<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leave Types Fix Verification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="bg-gray-50 p-8">
    <div id="app">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">Leave Types Fix Verification</h1>
            
            <!-- Before Fix -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Before Fix (Duplicates)</h2>
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <p class="text-red-800 text-sm mb-2">Issues identified:</p>
                    <ul class="text-red-700 text-sm space-y-1">
                        <li>• 55 leave types in database with many duplicates</li>
                        <li>• Multiple "Annual", "Sick", "Unpaid", "Paternity", "Maternity" entries</li>
                        <li>• UI showing all duplicates causing confusion</li>
                        <li>• Factory using random selection creating duplicates</li>
                    </ul>
                </div>
            </div>

            <!-- After Fix -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">After Fix (Clean)</h2>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                    <p class="text-green-800 text-sm mb-2">Fixed:</p>
                    <ul class="text-green-700 text-sm space-y-1">
                        <li>• Cleaned up duplicate leave types</li>
                        <li>• Created proper leave types with descriptive names</li>
                        <li>• Updated factory to prevent future duplicates</li>
                        <li>• Added dedicated LeaveTypeSeeder</li>
                    </ul>
                </div>
                
                <h3 class="text-lg font-medium text-gray-900 mb-3">Current Leave Types (7 unique types)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div v-for="type in leaveTypes" :key="type.id" class="p-4 border-2 border-gray-200 rounded-lg bg-white hover:border-blue-300 transition-colors">
                        <div class="flex items-center space-x-3">
                            <div :class="getLeaveTypeIconClasses(type.name)">
                                <component :is="getLeaveTypeIcon(type.name)" class="w-5 h-5" />
                            </div>
                            <div class="flex-1">
                                <h4 class="text-sm font-medium text-gray-900">{{ type.name }}</h4>
                                <p class="text-xs text-gray-500 mt-1">{{ type.quota }} days quota</p>
                                <p class="text-xs text-gray-400">ID: {{ type.id }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Changes -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Technical Changes Made</h2>
                <div class="space-y-4">
                    <div class="border-l-4 border-blue-500 pl-4">
                        <h3 class="font-medium text-gray-900">1. Database Cleanup</h3>
                        <p class="text-sm text-gray-600">Created cleanup command to remove duplicates and consolidate existing leave records</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <h3 class="font-medium text-gray-900">2. Factory Update</h3>
                        <p class="text-sm text-gray-600">Updated LeaveTypeFactory to create unique leave types instead of random duplicates</p>
                    </div>
                    <div class="border-l-4 border-purple-500 pl-4">
                        <h3 class="font-medium text-gray-900">3. Dedicated Seeder</h3>
                        <p class="text-sm text-gray-600">Created LeaveTypeSeeder for consistent leave type creation</p>
                    </div>
                    <div class="border-l-4 border-orange-500 pl-4">
                        <h3 class="font-medium text-gray-900">4. Seeder Integration</h3>
                        <p class="text-sm text-gray-600">Updated DemoDataSeeder to use the dedicated seeder instead of factory</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    leaveTypes: [
                        { id: 56, name: 'Annual Leave', quota: 21 },
                        { id: 57, name: 'Sick Leave', quota: 10 },
                        { id: 58, name: 'Personal Leave', quota: 5 },
                        { id: 59, name: 'Maternity Leave', quota: 90 },
                        { id: 60, name: 'Paternity Leave', quota: 14 },
                        { id: 61, name: 'Study Leave', quota: 10 },
                        { id: 62, name: 'Emergency Leave', quota: 3 }
                    ]
                };
            },
            methods: {
                getLeaveTypeIcon(leaveType) {
                    // Return appropriate icon class or component
                    return 'div'; // Placeholder for actual icon
                },
                getLeaveTypeIconClasses(leaveType) {
                    const classMap = {
                        'Annual Leave': 'w-8 h-8 p-1.5 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center',
                        'Sick Leave': 'w-8 h-8 p-1.5 bg-red-100 text-red-600 rounded-lg flex items-center justify-center',
                        'Personal Leave': 'w-8 h-8 p-1.5 bg-green-100 text-green-600 rounded-lg flex items-center justify-center',
                        'Maternity Leave': 'w-8 h-8 p-1.5 bg-pink-100 text-pink-600 rounded-lg flex items-center justify-center',
                        'Paternity Leave': 'w-8 h-8 p-1.5 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center',
                        'Study Leave': 'w-8 h-8 p-1.5 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center',
                        'Emergency Leave': 'w-8 h-8 p-1.5 bg-orange-100 text-orange-600 rounded-lg flex items-center justify-center'
                    };
                    
                    return classMap[leaveType] || 'w-8 h-8 p-1.5 bg-gray-100 text-gray-600 rounded-lg flex items-center justify-center';
                }
            }
        }).mount('#app');
    </script>
</body>
</html>