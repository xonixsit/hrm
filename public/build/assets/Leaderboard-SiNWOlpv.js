import{e as h,f as y,z as W,g as I,o as n,h as D,k as Q,a as e,c as i,i as g,F as w,r as _,n as u,t as o,l as z,w as k,b as L,v as q,Q as G}from"./app-q2kIxUnh.js";import{A as H}from"./AuthenticatedLayout-DN-JR91X.js";import{P as J}from"./PageLayout-vj8JKpMA.js";import"./useAuth-Bl6QYVqa.js";import"./icons-B4562BzG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-CO5ze_5h.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-CooZhwGN.js";import"./PageHeader-BA2Hs00f.js";import"./Icon-JVRnQCsX.js";/* empty css                                                                   */const K={class:"space-y-6"},X={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6"},Y={class:"space-y-3"},Z={class:"flex flex-wrap items-center gap-2"},ee=["onClick"],te={class:"group"},se={class:"mt-3 flex flex-wrap items-center gap-3 p-4 bg-gray-50 rounded-lg"},re={class:"flex items-center gap-2"},oe={class:"flex items-center gap-2"},ae={key:0,class:"border-t border-gray-200 pt-6 space-y-3"},le={class:"flex flex-wrap items-center gap-3"},ne=["value"],de={key:0,class:"text-sm text-gray-600"},ie={class:"border-t border-gray-200 pt-6 space-y-3"},ce={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},ue={key:0,class:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 text-xs px-2 py-1 rounded-full font-bold"},pe={key:0,class:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg shadow-sm border border-yellow-200 p-8"},ge={class:"flex items-end justify-center gap-8"},xe={class:"text-center"},me={class:"bg-gray-200 rounded-lg p-6 mb-4 relative"},be={class:"font-semibold text-gray-900"},fe={class:"text-sm text-gray-600"},ye={class:"text-center"},ve={class:"bg-gradient-to-br from-yellow-300 to-yellow-400 rounded-lg p-8 mb-4 relative transform scale-110"},he={class:"font-bold text-gray-900 text-lg"},we={class:"text-gray-700 font-semibold"},_e={class:"text-center"},ke={class:"bg-orange-200 rounded-lg p-6 mb-4 relative"},Ce={class:"font-semibold text-gray-900"},Se={class:"text-sm text-gray-600"},Re={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Te={class:"px-6 py-4 border-b border-gray-200"},Pe={class:"text-sm text-gray-600"},De={class:"overflow-hidden"},Le={class:"min-w-full divide-y divide-gray-200"},Ee={class:"bg-gray-50"},Ae={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},$e={class:"bg-white divide-y divide-gray-200"},Ve={class:"px-6 py-4 whitespace-nowrap"},Be={class:"flex items-center"},Fe={class:"px-6 py-4 whitespace-nowrap"},je={class:"flex items-center"},Ue={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium text-gray-600 mr-3"},Me={class:"text-sm font-medium text-gray-900"},Ne={class:"text-sm text-gray-500"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={__name:"Leaderboard",props:{employees:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},user_role:{type:String,default:"Employee"},can_view_all_departments:{type:Boolean,default:!1}},setup(x){const p=x,a=h({date_from:p.filters.date_from||"",date_to:p.filters.date_to||"",department_id:p.filters.department_id||""}),l=h("score"),m=h(null),E=y(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Work Reports",href:route("work-reports.index")},{label:"Leaderboard",href:route("work-reports.leaderboard"),current:!0}]),A=[{label:"Back to Reports",href:"/work-reports",variant:"secondary"},{label:"Export Rankings",action:()=>O(),variant:"primary"}],C=[{key:"recent",label:"Recent",icon:"⚡",days:7},{key:"month",label:"This Month",icon:"📅",days:30}],S=y(()=>{let s=[...p.employees];switch(l.value){case"calls":s.sort((t,d)=>d.total_calls-t.total_calls);break;case"success":s.sort((t,d)=>d.success_rate-t.success_rate);break;case"score":default:s.sort((t,d)=>d.performance_score-t.performance_score);break}return s}),c=y(()=>S.value.slice(0,3)),$=y(()=>p.employees.length),v=s=>{if(!s)return"";switch(l.value){case"calls":return`${s.total_calls} calls`;case"success":return`${s.success_rate}% success`;case"score":default:return`${s.performance_score} points`}},V=()=>{switch(l.value){case"calls":return"Total Calls";case"success":return"Success Rate";case"score":default:return"Performance Score"}},B=s=>s===1?"🥇":s===2?"🥈":s===3?"🥉":`#${s}`,F=s=>s===1?"bg-yellow-50 border-l-4 border-yellow-400":s===2?"bg-gray-50 border-l-4 border-gray-400":s===3?"bg-orange-50 border-l-4 border-orange-400":"hover:bg-gray-50",j=s=>s<=3?"text-2xl":"text-gray-600",R=s=>{m.value=s.key;const t=new Date,d=new Date(t.getTime()-s.days*24*60*60*1e3);a.value.date_from=d.toISOString().split("T")[0],a.value.date_to=t.toISOString().split("T")[0],b()},U=()=>{m.value=null,b()},M=()=>{m.value=null,b()},N=()=>{b()},b=()=>{try{G.get("/work-reports/leaderboard",a.value,{preserveState:!0,preserveScroll:!0,onError:s=>{console.error("Leaderboard filter error:",s)},onException:s=>{console.error("Leaderboard exception:",s)}})}catch(s){console.error("Router navigation error:",s);const t=new URLSearchParams(a.value);window.location.href=`/work-reports/leaderboard?${t.toString()}`}},O=()=>{try{const s=new URLSearchParams({...a.value,type:l.value,export:"leaderboard"});window.open(`/work-reports/export?${s}`,"_blank")}catch(s){console.error("Export error:",s),alert("Export failed. Please try again.")}};return W(()=>{(!a.value.date_from||!a.value.date_to)&&R(C[1])}),(s,t)=>(n(),I(H,null,{default:D(()=>[Q(J,{title:"🏆 Performance Leaderboard",subtitle:"See who's leading the pack in performance metrics",breadcrumbs:E.value,actions:A},{default:D(()=>{var d,T,P;return[e("div",K,[e("div",X,[e("div",Y,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold text-gray-900 flex items-center gap-2"}," 📅 Choose Time Period ",-1)),e("div",Z,[(n(),i(w,null,_(C,r=>e("button",{key:r.key,onClick:f=>R(r),class:u(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 border",m.value===r.key?"bg-blue-500 text-white border-blue-500 shadow-sm":"bg-white text-gray-700 border-gray-300 hover:border-blue-300 hover:bg-blue-50"])},[e("span",null,o(r.icon),1),e("span",null,o(r.label),1)],10,ee)),64))]),e("details",te,[t[8]||(t[8]=e("summary",{class:"cursor-pointer text-sm text-gray-600 hover:text-gray-900 flex items-center gap-2"},[e("span",{class:"group-open:rotate-90 transition-transform"},"▶"),z(" Custom date range ")],-1)),e("div",se,[e("div",re,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-700"},"From:",-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.value.date_from=r),type:"date",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:U},null,544),[[L,a.value.date_from]])]),e("div",oe,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-700"},"To:",-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.value.date_to=r),type:"date",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:M},null,544),[[L,a.value.date_to]])])])])]),x.can_view_all_departments?(n(),i("div",ae,[t[11]||(t[11]=e("h3",{class:"text-sm font-semibold text-gray-900 flex items-center gap-2"}," 🏢 Filter by Department ",-1)),e("div",le,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.value.department_id=r),onChange:N,class:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[t[10]||(t[10]=e("option",{value:""},"All Departments",-1)),(n(!0),i(w,null,_(x.departments,r=>(n(),i("option",{key:r.id,value:r.id},o(r.name),9,ne))),128))],544),[[q,a.value.department_id]]),a.value.department_id?(n(),i("div",de," Showing "+o($.value)+" employees ",1)):g("",!0)])])):g("",!0),e("div",ie,[t[16]||(t[16]=e("h3",{class:"text-sm font-semibold text-gray-900 flex items-center gap-2"}," 🏆 What to Rank By ",-1)),e("div",ce,[e("button",{onClick:t[3]||(t[3]=r=>l.value="score"),class:u([l.value==="score"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-500 shadow-lg":"bg-white text-gray-700 border-gray-300 hover:border-blue-300 hover:bg-blue-50","relative p-4 rounded-lg border-2 transition-all duration-200 text-left group"])},[t[12]||(t[12]=e("div",{class:"flex items-center gap-3 mb-2"},[e("span",{class:"text-2xl"},"🏆"),e("div",null,[e("div",{class:"font-semibold"},"Overall Performance"),e("div",{class:"text-xs opacity-75"},"Recommended")])],-1)),t[13]||(t[13]=e("p",{class:"text-xs opacity-90"}," Balanced score combining activity, quality, and consistency ",-1)),l.value==="score"?(n(),i("div",ue," ★ Active ")):g("",!0)],2),e("button",{onClick:t[4]||(t[4]=r=>l.value="calls"),class:u([l.value==="calls"?"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-500 shadow-lg":"bg-white text-gray-700 border-gray-300 hover:border-green-300 hover:bg-green-50","p-4 rounded-lg border-2 transition-all duration-200 text-left"])},t[14]||(t[14]=[e("div",{class:"flex items-center gap-3 mb-2"},[e("span",{class:"text-2xl"},"📞"),e("div",null,[e("div",{class:"font-semibold"},"Activity Level"),e("div",{class:"text-xs opacity-75"},"Volume focused")])],-1),e("p",{class:"text-xs opacity-90"}," Who's making the most calls and staying busy ",-1)]),2),e("button",{onClick:t[5]||(t[5]=r=>l.value="success"),class:u([l.value==="success"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-500 shadow-lg":"bg-white text-gray-700 border-gray-300 hover:border-purple-300 hover:bg-purple-50","p-4 rounded-lg border-2 transition-all duration-200 text-left"])},t[15]||(t[15]=[e("div",{class:"flex items-center gap-3 mb-2"},[e("span",{class:"text-2xl"},"✅"),e("div",null,[e("div",{class:"font-semibold"},"Success Rate"),e("div",{class:"text-xs opacity-75"},"Quality focused")])],-1),e("p",{class:"text-xs opacity-90"}," Who's most effective at converting calls ",-1)]),2)])])]),c.value.length>=3?(n(),i("div",pe,[t[23]||(t[23]=e("h3",{class:"text-xl font-bold text-gray-900 text-center mb-8"},"🏆 Top Performers",-1)),e("div",ge,[e("div",xe,[e("div",me,[t[17]||(t[17]=e("div",{class:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gray-400 text-white text-xs font-bold px-2 py-1 rounded-full"}," 2nd ",-1)),t[18]||(t[18]=e("div",{class:"w-16 h-16 bg-gray-300 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl"}," 👤 ",-1)),e("h4",be,o((d=c.value[1])==null?void 0:d.name),1),e("p",fe,o(v(c.value[1])),1)])]),e("div",ye,[e("div",ve,[t[19]||(t[19]=e("div",{class:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white text-sm font-bold px-3 py-1 rounded-full"}," 🥇 1st ",-1)),t[20]||(t[20]=e("div",{class:"w-20 h-20 bg-yellow-200 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl"}," 👤 ",-1)),e("h4",he,o((T=c.value[0])==null?void 0:T.name),1),e("p",we,o(v(c.value[0])),1)])]),e("div",_e,[e("div",ke,[t[21]||(t[21]=e("div",{class:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-orange-400 text-white text-xs font-bold px-2 py-1 rounded-full"}," 3rd ",-1)),t[22]||(t[22]=e("div",{class:"w-16 h-16 bg-orange-300 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl"}," 👤 ",-1)),e("h4",Ce,o((P=c.value[2])==null?void 0:P.name),1),e("p",Se,o(v(c.value[2])),1)])])])])):g("",!0),e("div",Re,[e("div",Te,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Complete Rankings",-1)),e("p",Pe,"All employees ranked by "+o(V()),1)]),e("div",De,[e("table",Le,[e("thead",Ee,[e("tr",null,[t[25]||(t[25]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rank",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee",-1)),x.can_view_all_departments?(n(),i("th",Ae,"Department")):g("",!0),t[27]||(t[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Calls",-1)),t[28]||(t[28]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Success Rate",-1)),t[29]||(t[29]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Performance Score",-1)),t[30]||(t[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trend",-1))])]),e("tbody",$e,[(n(!0),i(w,null,_(S.value,(r,f)=>(n(),i("tr",{key:r.id,class:u(F(f+1))},[e("td",Ve,[e("div",Be,[e("span",{class:u(["text-lg font-bold",j(f+1)])},o(B(f+1)),3)])]),e("td",Fe,[e("div",je,[e("div",Ue,o(r.name.charAt(0).toUpperCase()),1),e("div",null,[e("div",Me,o(r.name),1),e("div",Ne,o(r.position||"Employee"),1)])])]),e("td",Oe,o(r.total_calls),1),e("td",We,o(r.success_rate)+"% ",1),e("td",Ie,o(r.performance_score),1),e("td",{class:u(["px-6 py-4 whitespace-nowrap text-sm",r.trend>=0?"text-green-600":"text-red-600"])},o(r.trend>=0?"+":"")+o(r.trend)+"% ",3)],2))),128))])])])])])]}),_:1},8,["breadcrumbs"])]),_:1}))}};export{tt as default};
