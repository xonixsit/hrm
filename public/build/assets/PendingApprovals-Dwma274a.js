import{e as h,f as S,g as we,o as a,h as ee,k as ke,Q as N,a as e,c as n,i as u,w,u as te,b as M,t as o,F as E,r as R,v as se,l as x,j as _e,n as oe,d as le}from"./app-CENzkeBJ.js";import{l as je}from"./lodash-B-zzSzzU.js";import{u as Ce}from"./useNotifications-BSJW2Cpf.js";import{A as Ae}from"./AuthenticatedLayout-B4Jiau2L.js";import{P as Me}from"./PageLayout-tyXKPItD.js";import"./useAuth-BHxCyxca.js";import"./icons-Dsyq6Fl2.js";import"./UsersIcon-CPTVgdSJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-WwaY5kFs.js";import"./Icon-b4qdcvTv.js";const Le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Be={class:"p-6 text-gray-900"},Te={class:"flex justify-between items-start mb-6"},Fe={class:"flex items-center space-x-3"},Se={class:"relative flex-1 max-w-md"},Ne={class:"hidden sm:inline"},Pe={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg"},Ee={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Re={key:0},Ve=["value"],ze={key:1},De=["value"],Oe={key:0,class:"mt-4 flex flex-wrap gap-2"},$e={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ue={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800"},qe={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},He={key:3,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Ie={key:4,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Xe={class:"flex justify-between items-center mb-6"},We={class:"flex items-center space-x-4 text-sm text-gray-600"},Je={class:"flex items-center"},Ke={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Qe={class:"overflow-x-auto"},Ye={class:"min-w-full divide-y divide-gray-300"},Ge={class:"bg-gray-50"},Ze={class:"px-6 py-3 text-left"},et=["checked"],tt={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4"},ot=["value"],lt={class:"px-6 py-4 whitespace-nowrap"},rt={class:"flex items-center"},at={class:"flex-shrink-0 h-8 w-8"},nt={class:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center"},it={class:"text-sm font-medium text-indigo-700"},dt={class:"ml-3"},ut={class:"text-sm font-medium text-gray-900"},pt={class:"text-sm text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm text-gray-900"},xt={class:"text-sm text-gray-500"},ft={class:"px-6 py-4 whitespace-nowrap"},gt={class:"flex items-center space-x-2"},yt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800"},ht={key:0,class:"flex items-center"},bt={class:"px-6 py-4 whitespace-nowrap"},wt={key:0,class:"text-xs"},kt={class:"text-gray-900"},_t={class:"text-gray-500"},jt={key:1,class:"text-xs text-gray-400"},Ct={class:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Mt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Lt={class:"flex items-center justify-end space-x-2"},Bt=["onClick"],Tt=["onClick"],Ft={key:0,class:"py-12 text-center"},St={class:"flex items-center justify-center min-h-screen px-4 py-6"},Nt={class:"text-lg font-medium text-gray-900 mb-4"},Pt={class:"space-y-4"},Et={class:"bg-gray-50 p-4 rounded-lg"},Rt={class:"text-sm"},Vt={class:"font-medium text-gray-900"},zt={class:"text-gray-600"},Dt={class:"text-gray-600"},Ot={key:0,class:"bg-teal-50 p-4 rounded-lg"},$t={class:"grid grid-cols-3 gap-4 text-xs"},Ut={key:1,class:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg"},qt={class:"flex items-start"},Ht={class:"text-sm text-yellow-700 mt-1"},It={class:"block text-sm font-medium text-gray-700 mb-1"},Xt=["required","placeholder"],Wt={class:"flex justify-end space-x-3 mt-6"},Jt=["disabled"],Kt={class:"flex items-center justify-center min-h-screen px-4 py-6"},Qt={class:"space-y-4"},Yt={class:"text-sm text-gray-600"},Gt={class:"flex justify-end space-x-3 mt-6"},us={__name:"PendingApprovals",props:{timesheets:{type:Object,required:!0},availableEmployees:{type:Array,default:()=>[]},availableProjects:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(b){const f=b,{showSuccess:V,showError:L,showLoading:z,removeNotification:B}=Ce(),T=h(!1),c=h([]),j=h(!1),k=h(!1),i=h(null),p=h("approve"),g=h(""),C=h(""),l=h({search:f.filters.search||"",employee:f.filters.employee||"",project:f.filters.project||"",date_from:f.filters.date_from||"",date_to:f.filters.date_to||""}),D=S(()=>f.timesheets.data.length>0&&c.value.length===f.timesheets.data.length),re=S(()=>l.value.search&&l.value.search.trim()||l.value.employee||l.value.project||l.value.date_from||l.value.date_to),O=S(()=>{if(!l.value.employee)return null;const r=f.availableEmployees.find(t=>t.id.toString()===l.value.employee.toString());return r?r.name:null}),$=S(()=>{if(!l.value.project)return null;const r=f.availableProjects.find(t=>t.id.toString()===l.value.project.toString());return r?r.name:null}),ae=[{label:"Dashboard",href:route("dashboard")},{label:"Timesheets",href:route("timesheets.index")},{label:"Pending Approvals",current:!0}],ne=[{id:"view-all-timesheets",label:"View All Timesheets",variant:"secondary",handler:()=>N.visit(route("timesheets.index"))}],ie=r=>r?r.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2):"N/A",F=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",de=r=>{if(!r)return"N/A";const t=new Date(r),d=Math.abs(new Date-t),m=Math.ceil(d/(1e3*60*60*24));return m===1?"1 day ago":m<7?`${m} days ago`:m<30?`${Math.ceil(m/7)} weeks ago`:`${Math.ceil(m/30)} months ago`},ue=()=>{D.value?c.value=[]:c.value=f.timesheets.data.map(r=>r.id)},pe=r=>{i.value=r,p.value="approve",g.value="",k.value=!0},ce=r=>{i.value=r,p.value="reject",g.value="",k.value=!0},me=async()=>{if(!i.value){L("No timesheet selected for approval.");return}const r=p.value==="approve"?route("timesheets.approve",i.value.id):route("timesheets.reject",i.value.id),t=p.value==="approve"?"approving":"rejecting",y=z(`${t.charAt(0).toUpperCase()+t.slice(1)} timesheet...`);try{const d=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({comments:g.value.trim()})});B(y);const m=d.headers.get("content-type");if(!m||!m.includes("application/json")){const _=await d.text();throw console.error("Non-JSON response:",_),new Error("Server returned an invalid response format. Please try again.")}const A=await d.json();if(d.ok&&A.success){k.value=!1,i.value=null,g.value="";const _=p.value==="approve"?"approved":"rejected";V(`Timesheet ${_} successfully!`),N.reload({only:["timesheets"]})}else throw new Error(A.message||`Failed to ${p.value} timesheet`)}catch(d){B(y),console.error("Approval failed:",d),k.value=!1,i.value=null,g.value="",L(d.message||"Failed to process approval. Please try again.")}},v=()=>{N.get(route("timesheets.pending-approvals"),l.value,{preserveState:!0,replace:!0})},U=je.debounce(v,300),ve=()=>{l.value.search="",v()},xe=()=>{l.value.employee="",v()},fe=()=>{l.value.project="",v()},ge=()=>{l.value.date_from="",v()},ye=()=>{l.value.date_to="",v()},he=()=>{l.value={search:"",employee:"",project:"",date_from:"",date_to:""},v()},be=async()=>{if(c.value.length===0){L("No timesheets selected for approval.");return}const r=z(`Approving ${c.value.length} timesheet(s)...`);try{const t=await fetch(route("timesheets.bulk-approve"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({timesheet_ids:c.value,comments:C.value.trim()})});B(r);const y=t.headers.get("content-type");if(!y||!y.includes("application/json"))throw new Error("Invalid response format. Please try again.");const d=await t.json();if(t.ok&&d.success)j.value=!1,c.value=[],C.value="",V(`Successfully approved ${d.approved_count} timesheet(s)!`),N.reload({only:["timesheets"]});else throw new Error(d.message||"Bulk approval failed")}catch(t){B(r),console.error("Bulk approval failed:",t),j.value=!1,c.value=[],C.value="",L(t.message||"Failed to process bulk approval. Please try again.")}};return(r,t)=>(a(),we(Ae,null,{default:ee(()=>[ke(Me,{title:"Pending Timesheet Approvals",subtitle:"Review and approve employee timesheet submissions",breadcrumbs:ae,actions:ne},{default:ee(()=>{var y,d,m,A,_,q,H,I,X;return[e("div",Le,[e("div",Be,[e("div",Te,[t[20]||(t[20]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Pending Timesheet Approvals"),e("p",{class:"mt-1 text-sm text-gray-600"}," Review and approve employee timesheet submissions with work report context. ")],-1)),e("div",Fe,[e("div",Se,[t[17]||(t[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.search=s),type:"text",placeholder:"Search employees, projects...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput:t[1]||(t[1]=(...s)=>te(U)&&te(U)(...s))},null,544),[[M,l.value.search]])]),e("button",{onClick:t[2]||(t[2]=s=>T.value=!T.value),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 whitespace-nowrap"},[t[18]||(t[18]=e("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),e("span",Ne,o(T.value?"Hide Filters":"Show Filters"),1),t[19]||(t[19]=e("span",{class:"sm:hidden"},"Filters",-1))])])]),T.value?(a(),n("div",Pe,[e("div",Ee,[b.availableEmployees.length>0?(a(),n("div",Re,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.employee=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onChange:v},[t[21]||(t[21]=e("option",{value:""},"All employees",-1)),(a(!0),n(E,null,R(b.availableEmployees,s=>(a(),n("option",{key:s.id,value:s.id},o(s.name),9,Ve))),128))],544),[[se,l.value.employee]])])):u("",!0),b.availableProjects.length>0?(a(),n("div",ze,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Project",-1)),w(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.project=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onChange:v},[t[23]||(t[23]=e("option",{value:""},"All projects",-1)),(a(!0),n(E,null,R(b.availableProjects,s=>(a(),n("option",{key:s.id,value:s.id},o(s.name),9,De))),128))],544),[[se,l.value.project]])])):u("",!0),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.date_from=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onChange:v},null,544),[[M,l.value.date_from]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.date_to=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onChange:v},null,544),[[M,l.value.date_to]])])]),re.value?(a(),n("div",Oe,[t[32]||(t[32]=e("span",{class:"text-sm font-medium text-gray-700"},"Active filters:",-1)),l.value.search?(a(),n("span",$e,[x(' Search: "'+o(l.value.search)+'" ',1),e("button",{onClick:ve,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-500 focus:outline-none"},t[27]||(t[27]=[e("span",{class:"sr-only"},"Remove search filter",-1),e("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[e("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):u("",!0),O.value?(a(),n("span",Ue,[x(" Employee: "+o(O.value)+" ",1),e("button",{onClick:xe,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-teal-400 hover:bg-teal-200 hover:text-teal-500 focus:outline-none"},t[28]||(t[28]=[e("span",{class:"sr-only"},"Remove employee filter",-1),e("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[e("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):u("",!0),$.value?(a(),n("span",qe,[x(" Project: "+o($.value)+" ",1),e("button",{onClick:fe,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500 focus:outline-none"},t[29]||(t[29]=[e("span",{class:"sr-only"},"Remove project filter",-1),e("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[e("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):u("",!0),l.value.date_from?(a(),n("span",He,[x(" From: "+o(F(l.value.date_from))+" ",1),e("button",{onClick:ge,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500 focus:outline-none"},t[30]||(t[30]=[e("span",{class:"sr-only"},"Remove date from filter",-1),e("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[e("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):u("",!0),l.value.date_to?(a(),n("span",Ie,[x(" To: "+o(F(l.value.date_to))+" ",1),e("button",{onClick:ye,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500 focus:outline-none"},t[31]||(t[31]=[e("span",{class:"sr-only"},"Remove date to filter",-1),e("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[e("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):u("",!0),e("button",{onClick:he,class:"text-sm text-teal-600 hover:text-teal-800"}," Clear all ")])):u("",!0)])):u("",!0),e("div",Xe,[e("div",We,[e("span",Je,[t[33]||(t[33]=e("div",{class:"w-2 h-2 bg-yellow-500 rounded-full mr-2"},null,-1)),x(" "+o(b.timesheets.total)+" pending ",1)]),c.value.length>0?(a(),n("button",{key:0,onClick:t[7]||(t[7]=s=>j.value=!0),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700"}," Bulk Approve ("+o(c.value.length)+") ",1)):u("",!0)])]),e("div",Ke,[e("div",Qe,[e("table",Ye,[e("thead",Ge,[e("tr",null,[e("th",Ze,[e("input",{type:"checkbox",checked:D.value,onChange:ue,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,et)]),t[34]||(t[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee",-1)),t[35]||(t[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date",-1)),t[36]||(t[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project",-1)),t[37]||(t[37]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Hours",-1)),t[38]||(t[38]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Work Report",-1)),t[39]||(t[39]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description",-1)),t[40]||(t[40]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted",-1)),t[41]||(t[41]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",tt,[(a(!0),n(E,null,R(b.timesheets.data,s=>{var W,J,K,Q,Y,G,Z;return a(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",st,[w(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[8]||(t[8]=P=>c.value=P),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,ot),[[_e,c.value]])]),e("td",lt,[e("div",rt,[e("div",at,[e("div",nt,[e("span",it,o(ie((J=(W=s.employee)==null?void 0:W.user)==null?void 0:J.name)),1)])]),e("div",dt,[e("div",ut,o(((Q=(K=s.employee)==null?void 0:K.user)==null?void 0:Q.name)||"Unknown"),1),e("div",pt,o(((Y=s.employee)==null?void 0:Y.employee_code)||"N/A"),1)])])]),e("td",ct,o(F(s.date)),1),e("td",mt,[e("div",vt,o(((G=s.project)==null?void 0:G.name)||"N/A"),1),e("div",xt,o(((Z=s.task)==null?void 0:Z.name)||"No task"),1)]),e("td",ft,[e("div",gt,[e("span",yt,o(s.hours)+"h ",1),s.has_discrepancy?(a(),n("div",ht,[(a(),n("svg",{class:oe(["w-4 h-4",s.has_discrepancy.severity==="high"?"text-red-500":"text-yellow-500"]),fill:"currentColor",viewBox:"0 0 20 20"},t[42]||(t[42]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]),2))])):u("",!0)])]),e("td",bt,[s.work_report?(a(),n("div",wt,[e("div",kt,o(s.work_report.interested_count||0)+" interested",1),e("div",_t,o(s.work_report.emails)+" emails",1)])):(a(),n("div",jt,"No report"))]),e("td",Ct,o(s.description||"No description"),1),e("td",At,o(de(s.created_at)),1),e("td",Mt,[e("div",Lt,[e("button",{onClick:P=>pe(s),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[43]||(t[43]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),x(" Approve ")]),8,Bt),e("button",{onClick:P=>ce(s),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},t[44]||(t[44]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),x(" Reject ")]),8,Tt)])])])}),128))])])]),b.timesheets.data.length?u("",!0):(a(),n("div",Ft,t[45]||(t[45]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No pending approvals",-1),e("p",{class:"mt-1 text-sm text-gray-500"}," All timesheets have been reviewed. ",-1)])))]),k.value?(a(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[12]||(t[12]=(...s)=>r.closeModalOnBackdrop&&r.closeModalOnBackdrop(...s))},[e("div",St,[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",onClick:t[11]||(t[11]=le(()=>{},["stop"]))},[e("h3",Nt,o(p.value==="approve"?"Approve":"Reject")+" Timesheet ",1),e("div",Pt,[e("div",Et,[e("div",Rt,[e("div",Vt,o((m=(d=(y=i.value)==null?void 0:y.employee)==null?void 0:d.user)==null?void 0:m.name),1),e("div",zt,o(F((A=i.value)==null?void 0:A.date))+" - "+o((_=i.value)==null?void 0:_.hours)+"h",1),e("div",Dt,o((H=(q=i.value)==null?void 0:q.project)==null?void 0:H.name),1)])]),(I=i.value)!=null&&I.work_report?(a(),n("div",Ot,[t[49]||(t[49]=e("h4",{class:"text-sm font-medium text-teal-900 mb-2"},"Work Report Context",-1)),e("div",$t,[e("div",null,[t[46]||(t[46]=e("span",{class:"text-teal-700"},"Interested:",-1)),x(" "+o(i.value.work_report.interested_count||0)+"/"+o(i.value.work_report.calls),1)]),e("div",null,[t[47]||(t[47]=e("span",{class:"text-teal-700"},"Emails:",-1)),x(" "+o(i.value.work_report.emails),1)]),e("div",null,[t[48]||(t[48]=e("span",{class:"text-teal-700"},"WhatsApp:",-1)),x(" "+o(i.value.work_report.whatsapp),1)])])])):u("",!0),(X=i.value)!=null&&X.has_discrepancy?(a(),n("div",Ut,[e("div",qt,[t[51]||(t[51]=e("svg",{class:"w-5 h-5 text-yellow-400 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[t[50]||(t[50]=e("h4",{class:"text-sm font-medium text-yellow-800"},"Time Discrepancy Detected",-1)),e("p",Ht,o(i.value.has_discrepancy.message),1)])])])):u("",!0),e("div",null,[e("label",It," Comments "+o(p.value==="reject"?"(Required)":"(Optional)"),1),w(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>g.value=s),rows:"3",required:p.value==="reject",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:p.value==="approve"?"Add approval comments...":"Please provide reason for rejection..."},null,8,Xt),[[M,g.value]])])]),e("div",Wt,[e("button",{onClick:t[10]||(t[10]=s=>k.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:me,disabled:p.value==="reject"&&!g.value.trim(),class:oe(["px-4 py-2 text-sm font-medium text-white rounded-lg",p.value==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",p.value==="reject"&&!g.value.trim()?"opacity-50 cursor-not-allowed":""])},o(p.value==="approve"?"Approve":"Reject"),11,Jt)])])])])):u("",!0),j.value?(a(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[16]||(t[16]=(...s)=>r.closeBulkModalOnBackdrop&&r.closeBulkModalOnBackdrop(...s))},[e("div",Kt,[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-xl",onClick:t[15]||(t[15]=le(()=>{},["stop"]))},[t[53]||(t[53]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Bulk Approve Timesheets",-1)),e("div",Qt,[e("p",Yt," You are about to approve "+o(c.value.length)+" timesheet(s). ",1),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Comments (Optional)",-1)),w(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>C.value=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add comments for all selected timesheets..."},null,512),[[M,C.value]])])]),e("div",Gt,[e("button",{onClick:t[14]||(t[14]=s=>j.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:be,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700"}," Approve All ")])])])])):u("",!0)])])]}),_:1})]),_:1}))}};export{us as default};
