import{e as K,J as W,f,g as _,o as r,h as x,k as h,a as e,n as b,c as o,i as k,w as v,F as d,r as c,t as l,v as A,b as X,u as g,S as w,l as S,Q as Y}from"./app-GWiVPcSK.js";import{A as Z}from"./AuthenticatedLayout-DehU7O92.js";import{P as $}from"./PageLayout-D8VB3F2Z.js";import{a as ee}from"./UsersIcon-BpkVLzNK.js";import"./useAuth-BVqEpHic.js";import"./icons-DOtjRcix.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-C174pY8J.js";import"./Icon-BGUd75Np.js";const te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se={class:"p-6 text-gray-900"},ae={class:"bg-gray-50 rounded-lg border border-gray-200 mb-6"},re={class:"p-6"},oe={key:0},le=["value"],ne=["value"],ie=["value"],de={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ce={class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200"},me={class:"bg-white divide-y divide-gray-200"},pe={class:"px-6 py-4 whitespace-nowrap"},ye={class:"flex items-center"},xe={class:"flex-shrink-0 h-10 w-10"},ge={class:"h-10 w-10 rounded-full bg-teal-100 flex items-center justify-center"},fe={class:"text-sm font-medium text-teal-600"},he={class:"ml-4"},be={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm text-gray-900"},we={class:"px-6 py-4 whitespace-nowrap"},_e={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ke={class:"px-6 py-4 whitespace-nowrap"},Ae={key:0,class:"flex items-center"},Se={class:"flex"},Ce={class:"ml-2 text-sm text-gray-600"},Te={key:1,class:"text-sm text-gray-400"},je={class:"px-6 py-4 whitespace-nowrap"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ue={class:"flex items-center justify-end space-x-2"},Ve={key:0,class:"px-6 py-3 border-t border-gray-200"},De={class:"flex items-center justify-between"},Ee={class:"text-sm text-gray-700"},Me={class:"flex space-x-1"},Je={__name:"Index",props:{assessments:Object,employees:Array,competencies:Array,assessmentCycles:Array,assessors:Array,assessmentTypes:Array,statusOptions:Array,filters:Object,stats:Object,canFilterByEmployee:Boolean,canFilterByAssessor:Boolean},setup(n){var B,F,U,V,D;const u=n,i=K({employee_id:((B=u.filters)==null?void 0:B.employee_id)||"",competency_id:((F=u.filters)==null?void 0:F.competency_id)||"",assessment_type:((U=u.filters)==null?void 0:U.assessment_type)||"",status:((V=u.filters)==null?void 0:V.status)||"",search:((D=u.filters)==null?void 0:D.search)||""});let C=null;const O=W(),R=f(()=>{var a;return(a=O.props.auth)==null?void 0:a.user}),H=f(()=>{var s;return(((s=R.value)==null?void 0:s.roles)||[]).some(t=>["Manager","Admin","HR"].includes(t.name))}),I=f(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Competency Management",href:route("competency-assessments.index")},{label:"Assessments",current:!0}]),P=f(()=>{const a=[];return H.value&&a.push({id:"new-assessment",label:"New Assessment",icon:"plus",variant:"primary",href:route("competency-assessments.create")}),a}),m=()=>{Y.get(route("competency-assessments.index"),i.value,{preserveState:!0,preserveScroll:!0})},Q=()=>{clearTimeout(C),C=setTimeout(()=>{m()},300)},z=()=>{i.value={employee_id:"",competency_id:"",assessment_type:"",status:"",search:""},m()},T=a=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360Â° Feedback"})[a]||a,j=a=>({draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected"})[a]||a,J=a=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",q=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),G=a=>a.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2);return(a,s)=>(r(),_(Z,null,{default:x(()=>[h($,{title:"Competency Assessments",subtitle:"Manage and review competency assessments",breadcrumbs:I.value,actions:P.value},{default:x(()=>[e("div",te,[e("div",se,[e("div",ae,[e("div",re,[e("div",{class:b(["grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",{"lg:grid-cols-5":n.canFilterByEmployee}])},[n.canFilterByEmployee?(r(),o("div",oe,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee",-1)),v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value.employee_id=t),onChange:m,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[s[4]||(s[4]=e("option",{value:""},"All Employees",-1)),(r(!0),o(d,null,c(n.employees,t=>{var p;return r(),o("option",{key:t.id,value:t.id},l(((p=t.user)==null?void 0:p.name)||"Unknown"),9,le)}),128))],544),[[A,i.value.employee_id]])])):k("",!0),e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value.status=t),onChange:m,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[s[6]||(s[6]=e("option",{value:""},"All Statuses",-1)),(r(!0),o(d,null,c(n.statusOptions,t=>(r(),o("option",{key:t,value:t},l(j(t)),9,ne))),128))],544),[[A,i.value.status]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>i.value.assessment_type=t),onChange:m,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[s[8]||(s[8]=e("option",{value:""},"All Types",-1)),(r(!0),o(d,null,c(n.assessmentTypes,t=>(r(),o("option",{key:t,value:t},l(T(t)),9,ie))),128))],544),[[A,i.value.assessment_type]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>i.value.search=t),onInput:Q,type:"text",placeholder:"Search assessments...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},null,544),[[X,i.value.search]])]),e("div",{class:"flex items-end"},[e("button",{onClick:z,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Clear Filters ")])],2)])])]),e("div",de,[e("div",ce,[e("table",ue,[s[13]||(s[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Competency "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",me,[(r(!0),o(d,null,c(n.assessments.data,t=>{var p,E,M,L;return r(),o("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",pe,[e("div",ye,[e("div",xe,[e("div",ge,[e("span",fe,l(G(((E=(p=t.employee)==null?void 0:p.user)==null?void 0:E.name)||"Unknown")),1)])]),e("div",he,[h(g(w),{href:a.route("competency-assessments.by-employee",(M=t.employee)==null?void 0:M.id),class:"text-sm font-medium text-teal-600 hover:text-teal-800 hover:underline"},{default:x(()=>{var y,N;return[S(l(((N=(y=t.employee)==null?void 0:y.user)==null?void 0:N.name)||"Unknown"),1)]}),_:2},1032,["href"])])])]),e("td",be,[e("div",ve,l((L=t.competency)==null?void 0:L.name),1)]),e("td",we,[e("span",_e,l(T(t.assessment_type)),1)]),e("td",ke,[t.rating?(r(),o("div",Ae,[e("div",Se,[(r(),o(d,null,c(5,y=>h(g(ee),{key:y,class:b([y<=t.rating?"text-yellow-400":"text-gray-300","h-4 w-4"])},null,8,["class"])),64))]),e("span",Ce,l(t.rating)+"/5",1)])):(r(),o("span",Te,"Not rated"))]),e("td",je,[e("span",{class:b([J(t.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},l(j(t.status)),3)]),e("td",Be,l(q(t.created_at)),1),e("td",Fe,[e("div",Ue,[h(g(w),{href:a.route("competency-assessments.show",t.id),class:"text-teal-600 hover:text-teal-900"},{default:x(()=>s[11]||(s[11]=[S(" View ")])),_:2,__:[11]},1032,["href"]),t.status==="draft"?(r(),_(g(w),{key:0,href:a.route("competency-assessments.evaluate",t.id),class:"text-green-600 hover:text-green-900"},{default:x(()=>s[12]||(s[12]=[S(" Edit ")])),_:2,__:[12]},1032,["href"])):k("",!0)])])])}),128))])])]),n.assessments.links?(r(),o("div",Ve,[e("div",De,[e("div",Ee," Showing "+l(n.assessments.from)+" to "+l(n.assessments.to)+" of "+l(n.assessments.total)+" results ",1),e("div",Me,[(r(!0),o(d,null,c(n.assessments.links,t=>(r(),_(g(w),{key:t.label,href:t.url,class:b(["px-3 py-2 text-sm font-medium rounded-md",t.active?"bg-teal-500 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))])])])):k("",!0)])])]),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{Je as default};
