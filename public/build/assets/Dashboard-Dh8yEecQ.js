import{c as r,o as s,a as e,i as h,m as we,n as f,d as _e,u as l,A as K,t as n,F as W,g as z,s as Y,f as S,Q as xe,e as O,h as N,r as q,l as F,z as Be,k as g,q as se,B as Qe,w as Ge,b as Ke,G as Z}from"./app-L5TNdppF.js";import{u as Te}from"./useAuth-CT60yBfG.js";import{b as Ve,a as Je,r as Xe,A as Ye}from"./AuthenticatedLayout-QANNGp3v.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as $e}from"./StatsCard-JZnUlhbP.js";import{A as Ze}from"./ApprovalModal-DyaV2Kdy.js";import{a as Ae,H as je,q as Ne,n as ae,w as Oe,f as Se,G as Le,b as et,m as oe,e as Ee,h as He,p as ne,O as Ie,l as De,k as le}from"./icons-D-wAh2Tt.js";import{r as ce}from"./ChartBarIcon-NsRYmra4.js";import{r as ye}from"./AcademicCapIcon-G0LSikof.js";import{r as tt}from"./ArrowTrendingUpIcon-nj3FxkYE.js";import{r as Pe}from"./ArrowPathIcon-9FPuqJpP.js";import{r as Re}from"./CogIcon-Cxsez5sO.js";import"./useAccessibility-BNN3rHR9.js";import"./ArrowTrendingDownIcon-5x-eqfG_.js";import"./ArrowTopRightOnSquareIcon-Ktk6QccF.js";function We(t,T){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}const st=["role","tabindex"],at={key:0,class:"flex items-center justify-between mb-4"},nt={class:"flex items-center space-x-3"},ot={key:0,class:"flex items-center space-x-2"},rt={class:"flex-1"},it={class:"flex items-center space-x-3"},pe={__name:"UnifiedCard",props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:[String,Object],default:null},iconVariant:{type:String,default:null,validator:t=>["primary","success","warning","danger","info"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","elevated"].includes(t)},size:{type:String,default:"default",validator:t=>["small","default"].includes(t)},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},status:{type:String,default:null,validator:t=>["success","warning","error","info"].includes(t)},statusText:{type:String,default:null},className:{type:String,default:""}},emits:["click"],setup(t,{emit:T}){const{isDark:o}=Ve();return(y,c)=>(s(),r(W,null,[e("div",{class:f(["group relative transition-all duration-300",l(o)?"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50":"bg-white/80 backdrop-blur-sm border border-gray-200/60",t.variant==="elevated"?l(o)?"shadow-xl shadow-gray-900/30":"shadow-xl shadow-gray-900/15":l(o)?"shadow-lg shadow-gray-900/20":"shadow-lg shadow-gray-900/10",t.size==="small"?"rounded-lg":"rounded-2xl",t.clickable&&"cursor-pointer hover:scale-[1.02] hover:shadow-2xl",t.clickable&&(l(o)?"hover:bg-gray-700/60 hover:border-gray-600/60":"hover:bg-white/90 hover:border-gray-300/60"),t.size==="small"?"p-3":"p-4",t.className]),onClick:c[0]||(c[0]=j=>t.clickable&&y.$emit("click")),role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[c[1]||(c[1]=we(j=>t.clickable&&y.$emit("click"),["enter"])),c[2]||(c[2]=we(_e(j=>t.clickable&&y.$emit("click"),["prevent"]),["space"]))]},null,42,st),y.$slots.header||t.title?(s(),r("div",at,[e("div",nt,[t.icon||y.$slots.icon?(s(),r("div",{key:0,class:f(["flex items-center justify-center rounded-xl transition-all duration-200",t.size==="small"?"w-10 h-10 p-2":"w-12 h-12 p-3",t.iconVariant==="primary"&&(l(o)?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-600 border border-blue-200/50"),t.iconVariant==="success"&&(l(o)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-600 border border-green-200/50"),t.iconVariant==="warning"&&(l(o)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-600 border border-orange-200/50"),t.iconVariant==="danger"&&(l(o)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200/50"),t.iconVariant==="info"&&(l(o)?"bg-purple-600/20 text-purple-400 border border-purple-500/30":"bg-purple-50 text-purple-600 border border-purple-200/50"),!t.iconVariant&&(l(o)?"bg-gray-700/50 text-gray-300 border border-gray-600/50":"bg-gray-100 text-gray-600 border border-gray-200/50")])},[K(y.$slots,"icon",{},()=>[t.icon?(s(),z(Y(t.icon),{key:0,class:f(t.size==="small"?"w-4 h-4":"w-5 h-5")},null,8,["class"])):h("",!0)])],2)):h("",!0),e("div",null,[t.title?(s(),r("h3",{key:0,class:f(["font-semibold transition-colors duration-200",t.size==="small"?"text-base":"text-lg",l(o)?"text-white":"text-gray-900"])},n(t.title),3)):h("",!0),t.description?(s(),r("p",{key:1,class:f(["transition-colors duration-200",t.size==="small"?"text-xs":"text-sm",l(o)?"text-gray-400":"text-gray-600"])},n(t.description),3)):h("",!0),K(y.$slots,"header")])]),y.$slots.headerActions?(s(),r("div",ot,[K(y.$slots,"headerActions")])):h("",!0)])):h("",!0),e("div",rt,[K(y.$slots,"default")]),y.$slots.footer?(s(),r("div",{key:1,class:f(["mt-6 pt-4 border-t transition-colors duration-200",l(o)?"border-gray-700/50":"border-gray-200/50"])},[K(y.$slots,"footer")],2)):h("",!0),t.loading?(s(),r("div",{key:2,class:f(["absolute inset-0 flex items-center justify-center rounded-2xl transition-all duration-200",l(o)?"bg-gray-800/80 backdrop-blur-sm":"bg-white/80 backdrop-blur-sm"])},[e("div",it,[e("div",{class:f(["animate-spin rounded-full border-2 border-t-transparent",t.size==="small"?"w-5 h-5":"w-6 h-6",l(o)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:f(["text-sm font-medium",l(o)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])],2)):h("",!0),t.status?(s(),r("div",{key:3,class:f(["absolute top-4 right-4 flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="success"&&(l(o)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-700 border border-green-200"),t.status==="warning"&&(l(o)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-700 border border-orange-200"),t.status==="error"&&(l(o)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200"),t.status==="info"&&(l(o)?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200")])},[e("div",{class:f(["w-1.5 h-1.5 rounded-full",t.status==="success"&&"bg-green-400",t.status==="warning"&&"bg-orange-400",t.status==="error"&&"bg-red-400",t.status==="info"&&"bg-blue-400"])},null,2),e("span",null,n(t.statusText||t.status),1)],2)):h("",!0)],64))}},lt=["role","tabindex","onKeydown"],ct={class:"flex items-start justify-between mb-4"},dt={key:0,class:"flex items-center space-x-1"},ut={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mt={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={class:"space-y-1 mb-3"},vt={class:"flex items-center gap-2"},bt={key:2,class:"absolute z-20 -top-2 -right-2"},ee={__name:"UnifiedStatsCard",props:{value:{type:[Number,String],required:!0},label:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],required:!0},variant:{type:String,default:"primary",validator:t=>["primary","success","warning","info","neutral"].includes(t)},trend:{type:Number,default:null},trendSuffix:{type:String,default:"%"},status:{type:String,default:null,validator:t=>["excellent","good","warning","critical"].includes(t)},statusText:{type:String,default:null},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},route:{type:String,default:null},urgent:{type:Boolean,default:!1},prefix:{type:String,default:""},suffix:{type:String,default:""}},emits:["click"],setup(t,{emit:T}){const o=t,y=T,{isDark:c}=Ve(),j=S(()=>{if(o.loading)return"...";let k=o.value;return typeof k=="number"&&(k=k.toLocaleString()),`${o.prefix}${k}${o.suffix}`}),C=()=>{!o.clickable||o.loading||(o.route&&xe.visit(route(o.route)),y("click"))};return(k,v)=>(s(),r("div",{class:f(["group relative transition-all duration-300",t.clickable&&"cursor-pointer",l(c)?"bg-gray-800/50 border border-gray-700/50 backdrop-blur-sm":"bg-white border border-gray-100 shadow-sm backdrop-blur-sm","hover:shadow-md hover:-translate-y-0.5","rounded-2xl p-5 sm:p-6"]),onClick:C,role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[we(C,["enter"]),we(_e(C,["prevent"]),["space"])]},[e("div",ct,[e("div",{class:f(["flex items-center justify-center w-12 h-12 rounded-xl flex-shrink-0 shadow-sm",t.variant==="primary"&&(l(c)?"bg-blue-600/20 text-blue-400":"bg-blue-500 text-white shadow-blue-100"),t.variant==="success"&&(l(c)?"bg-green-600/20 text-green-400":"bg-green-500 text-white shadow-green-100"),t.variant==="warning"&&(l(c)?"bg-orange-600/20 text-orange-400":"bg-orange-500 text-white shadow-orange-100"),t.variant==="info"&&(l(c)?"bg-purple-600/20 text-purple-400":"bg-purple-500 text-white shadow-purple-100"),t.variant==="neutral"&&(l(c)?"bg-gray-700/50 text-gray-300":"bg-gray-500 text-white shadow-gray-100")])},[(s(),z(Y(t.icon),{class:"w-6 h-6"}))],2),t.trend!==null&&!t.loading?(s(),r("div",dt,[t.trend>0?(s(),r("svg",ut,v[0]||(v[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):t.trend<0?(s(),r("svg",mt,v[1]||(v[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):h("",!0),e("span",{class:f(["text-sm font-medium",t.trend>0&&"text-green-600",t.trend<0&&"text-red-600",t.trend===0&&"text-gray-500"])},n(t.trend>0?"+":"")+n(t.trend)+n(t.trendSuffix),3)])):t.status&&!t.loading?(s(),r("div",{key:1,class:f(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="excellent"&&(l(c)?"bg-green-600/20 text-green-400":"bg-green-50 text-green-700 border border-green-100"),t.status==="good"&&(l(c)?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-700 border border-blue-100"),t.status==="warning"&&(l(c)?"bg-orange-600/20 text-orange-400":"bg-orange-50 text-orange-700 border border-orange-100"),t.status==="critical"&&(l(c)?"bg-red-600/20 text-red-400":"bg-red-50 text-red-700 border border-red-100")])},[e("span",{class:f(["w-1.5 h-1.5 rounded-full",t.status==="excellent"&&"bg-green-500",t.status==="good"&&"bg-blue-500",t.status==="warning"&&"bg-orange-500",t.status==="critical"&&"bg-red-500"])},null,2),e("span",null,n(t.statusText||t.status),1)],2)):h("",!0)]),e("div",gt,[e("div",{class:f(["text-3xl font-semibold tracking-tight transition-colors duration-200",l(c)?"text-white":"text-gray-900",t.variant==="success"&&!l(c)&&"text-green-600",t.variant==="warning"&&!l(c)&&"text-orange-600"])},n(t.loading?"...":j.value),3),e("div",{class:f(["text-sm font-medium transition-colors duration-200",l(c)?"text-gray-400":"text-gray-600"])},n(t.label),3)]),t.description?(s(),r("div",{key:0,class:f(["text-sm leading-relaxed transition-colors duration-200",(l(c),"text-gray-500")])},n(t.description),3)):h("",!0),t.loading?(s(),r("div",{key:1,class:f(["absolute inset-0 z-10 flex items-center justify-center rounded-2xl backdrop-blur-sm",l(c)?"bg-gray-800/80":"bg-white/80"])},[e("div",vt,[e("div",{class:f(["animate-spin rounded-full w-5 h-5 border-2 border-t-transparent",l(c)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:f(["text-sm font-medium",l(c)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])],2)):h("",!0),t.urgent&&!t.loading?(s(),r("div",bt,v[2]||(v[2]=[e("div",{class:"relative"},[e("div",{class:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),e("div",{class:"absolute inset-0 w-4 h-4 bg-red-500 rounded-full animate-ping opacity-75"})],-1)]))):h("",!0)],42,lt))}},ht={key:0,class:"widget-header"},ft={class:"flex items-center justify-between"},yt={class:"widget-title"},pt={key:0,class:"widget-actions"},xt={class:"widget-content"},wt={key:1,class:"widget-footer"},kt={__name:"DashboardWidget",props:{title:{type:String,default:""},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},padding:{type:String,default:"md",validator:t=>["none","sm","md","lg"].includes(t)},background:{type:String,default:"white",validator:t=>["white","neutral","gradient"].includes(t)},interactive:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},class:{type:[String,Array,Object],default:""}},setup(t){const T=t,o=S(()=>["dashboard-widget","relative","overflow-hidden","transition-all","duration-200",{"cursor-pointer":T.interactive,"hover:shadow-lg":T.interactive,"opacity-50":T.loading,"border-error-200":T.error,"bg-error-50":T.error}]),y=S(()=>({sm:"min-h-[120px]",md:"min-h-[160px]",lg:"min-h-[200px]",xl:"min-h-[240px]"})[T.size]),c=S(()=>({none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"})[T.padding]),j=S(()=>({white:"bg-white border border-neutral-200 shadow-sm",neutral:"bg-neutral-50 border border-neutral-200",gradient:"bg-gradient-to-br from-white to-neutral-50 border border-neutral-200 shadow-sm"})[T.background]),C=S(()=>"rounded-xl"),k=S(()=>[...o.value,y.value,c.value,j.value,C.value,T.class]);return(v,I)=>(s(),r("div",{class:f(k.value)},[v.$slots.header||t.title?(s(),r("div",ht,[K(v.$slots,"header",{},()=>[e("div",ft,[e("h3",yt,n(t.title),1),v.$slots.actions?(s(),r("div",pt,[K(v.$slots,"actions",{},void 0,!0)])):h("",!0)])],!0)])):h("",!0),e("div",xt,[K(v.$slots,"default",{},void 0,!0)]),v.$slots.footer?(s(),r("div",wt,[K(v.$slots,"footer",{},void 0,!0)])):h("",!0)],2))}},de=ue(kt,[["__scopeId","data-v-0708b2c1"]]),$t={class:"timeline-container"},At={key:0,class:"timeline-empty"},St={class:"empty-state"},Tt={class:"text-neutral-500 text-center"},Ct={key:1,class:"timeline-list"},Mt={class:"timeline-line"},jt={class:"timeline-content"},It={class:"activity-header"},Dt={class:"activity-main"},Pt={class:"activity-title"},Rt={key:0,class:"activity-description"},_t={class:"activity-meta"},Bt=["datetime"],Vt={key:0,class:"activity-details"},Nt={class:"detail-label"},Ot={class:"detail-value"},Lt={key:1,class:"activity-actions"},Et=["onClick"],Ht={key:2,class:"timeline-footer"},Wt=["disabled"],Ft={__name:"ActivityTimeline",props:{activities:{type:Array,default:()=>[]},title:{type:String,default:"Recent Activity"},maxItems:{type:Number,default:10},showLoadMore:{type:Boolean,default:!0},emptyMessage:{type:String,default:"No recent activity"},emptyIcon:{type:[String,Object],default:null},loading:{type:Boolean,default:!1},timeFormat:{type:String,default:"relative",validator:t=>["relative","absolute","both"].includes(t)}},emits:["load-more","action"],setup(t,{emit:T}){const o=t,y=T,c=O(!1),j=O(o.maxItems),C=S(()=>o.activities.slice(0,j.value)),k=S(()=>o.showLoadMore&&o.activities.length>j.value),v=async()=>{if(!c.value){c.value=!0;try{await y("load-more"),j.value+=o.maxItems}finally{c.value=!1}}},I=(w,V)=>{y("action",{action:w,activity:V})},x=w=>{const V=new Date(w),E=Math.floor((new Date-V)/(1e3*60));if(o.timeFormat==="absolute")return V.toLocaleString();if(o.timeFormat==="relative"||E<60){if(E<1)return"Just now";if(E<60)return`${E}m ago`;const U=Math.floor(E/60);if(U<24)return`${U}h ago`;const X=Math.floor(U/24);return X<7?`${X}d ago`:V.toLocaleDateString()}const L=x(w),G=V.toLocaleString();return`${L} (${G})`},D=w=>{const V="timeline-dot w-3 h-3 rounded-full border-2 border-white shadow-sm",$={success:"bg-success-500",warning:"bg-warning-500",error:"bg-error-500",info:"bg-info-500",default:"bg-neutral-400"},E=$[w.status]||$.default;return`${V} ${E}`},B=w=>{const V="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",$={create:"bg-success-100 text-success-800",update:"bg-info-100 text-info-800",delete:"bg-error-100 text-error-800",approve:"bg-success-100 text-success-800",reject:"bg-error-100 text-error-800",pending:"bg-warning-100 text-warning-800",default:"bg-neutral-100 text-neutral-800"};return`${V} ${$[w]||$.default}`},M=w=>{const V="inline-flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-md transition-colors",$={primary:"bg-primary-100 text-primary-700 hover:bg-primary-200",secondary:"bg-neutral-100 text-neutral-700 hover:bg-neutral-200",success:"bg-success-100 text-success-700 hover:bg-success-200",warning:"bg-warning-100 text-warning-700 hover:bg-warning-200",error:"bg-error-100 text-error-700 hover:bg-error-200",default:"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"};return`${V} ${$[w]||$.default}`};return(w,V)=>(s(),z(de,{title:t.title,loading:t.loading,class:"activity-timeline",padding:"md"},{actions:N(()=>[K(w.$slots,"actions",{},void 0,!0)]),default:N(()=>[e("div",$t,[t.activities.length===0?(s(),r("div",At,[e("div",St,[t.emptyIcon?(s(),z(Y(t.emptyIcon),{key:0,class:"w-12 h-12 text-neutral-400 mx-auto mb-3"})):h("",!0),e("p",Tt,n(t.emptyMessage),1)])])):(s(),r("div",Ct,[(s(!0),r(W,null,q(C.value,($,E)=>(s(),r("div",{key:$.id||E,class:f(["timeline-item",{"timeline-item--last":E===C.value.length-1}])},[e("div",Mt,[e("div",{class:f(D($))},null,2)]),e("div",jt,[e("div",It,[e("div",Dt,[e("h4",Pt,n($.title),1),$.description?(s(),r("p",Rt,n($.description),1)):h("",!0)]),e("div",_t,[e("time",{class:"activity-time",datetime:$.timestamp},n(x($.timestamp)),9,Bt),$.type?(s(),r("span",{key:0,class:f(B($.type))},n($.type),3)):h("",!0)])]),$.details?(s(),r("div",Vt,[(s(!0),r(W,null,q($.details,(L,G)=>(s(),r("div",{key:G,class:"detail-item"},[e("span",Nt,n(G)+":",1),e("span",Ot,n(L),1)]))),128))])):h("",!0),$.actions?(s(),r("div",Lt,[(s(!0),r(W,null,q($.actions,L=>(s(),r("button",{key:L.label,onClick:G=>I(L,$),class:f(["action-button",M(L.type)])},[L.icon?(s(),z(Y(L.icon),{key:0,class:"w-4 h-4"})):h("",!0),F(" "+n(L.label),1)],10,Et))),128))])):h("",!0)])],2))),128))])),k.value&&!t.loading?(s(),r("div",Ht,[e("button",{onClick:v,class:"load-more-button",disabled:c.value},[c.value?(s(),z(Y("LoadingIcon"),{key:0,class:"w-4 h-4 animate-spin"})):h("",!0),F(" "+n(c.value?"Loading...":"Load More"),1)],8,Wt)])):h("",!0)])]),_:3},8,["title","loading"]))}},qt=ue(Ft,[["__scopeId","data-v-20cefea4"]]),zt={class:"actions-grid"},Ut=["onClick","disabled"],Qt={class:"action-icon"},Gt={class:"action-content"},Kt={class:"action-label"},Jt={key:0,class:"action-description"},Xt={key:0,class:"actions-footer"},Yt={__name:"QuickActions",props:{actions:{type:Array,default:()=>[]},title:{type:String,default:"Quick Actions"},maxVisible:{type:Number,default:6},layout:{type:String,default:"grid",validator:t=>["grid","list"].includes(t)},loading:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:T}){const o=t,y=T,c=O(!1),j=S(()=>c.value||o.actions.length<=o.maxVisible?o.actions:o.actions.slice(0,o.maxVisible)),C=D=>{D.disabled||(y("action",D),D.href&&(D.external?window.open(D.href,"_blank"):window.location.href=D.href),D.route&&window.route&&(window.location.href=window.route(D.route,D.params||{})))},k=()=>{c.value=!c.value},v=D=>{const B=["group relative flex items-center p-4 rounded-xl border transition-all duration-200","hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"];D.disabled?B.push("opacity-50 cursor-not-allowed"):B.push("cursor-pointer hover:border-primary-200 hover:bg-primary-50");const M={primary:"border-primary-200 bg-primary-50 text-primary-900",secondary:"border-neutral-200 bg-white text-neutral-900",success:"border-success-200 bg-success-50 text-success-900",warning:"border-warning-200 bg-warning-50 text-warning-900",error:"border-error-200 bg-error-50 text-error-900",default:"border-neutral-200 bg-white text-neutral-900"},w=D.variant||"default";return B.push(M[w]),B},I=D=>{const B="w-6 h-6",M={primary:"text-primary-600",secondary:"text-neutral-600",success:"text-success-600",warning:"text-warning-600",error:"text-error-600",default:"text-neutral-600"},w=D.variant||"default";return`${B} ${M[w]}`},x=D=>{const B="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",M={primary:"bg-primary-100 text-primary-800",secondary:"bg-neutral-100 text-neutral-800",success:"bg-success-100 text-success-800",warning:"bg-warning-100 text-warning-800",error:"bg-error-100 text-error-800",info:"bg-info-100 text-info-800",default:"bg-neutral-100 text-neutral-800"},w=D.variant||"default";return`${B} ${M[w]}`};return(D,B)=>(s(),z(de,{title:t.title,loading:t.loading,class:"quick-actions",padding:"md"},{actions:N(()=>[K(D.$slots,"actions",{},void 0,!0)]),default:N(()=>[e("div",zt,[(s(!0),r(W,null,q(j.value,M=>(s(),r("button",{key:M.id||M.label,onClick:w=>C(M),disabled:M.disabled||t.loading,class:f([v(M),"action-item"])},[e("div",Qt,[M.icon?(s(),z(Y(M.icon),{key:0,class:f(I(M))},null,8,["class"])):h("",!0)]),e("div",Gt,[e("h4",Kt,n(M.label),1),M.description?(s(),r("p",Jt,n(M.description),1)):h("",!0),M.badge?(s(),r("span",{key:1,class:f(x(M.badge))},n(M.badge.text),3)):h("",!0)]),B[0]||(B[0]=e("div",{class:"action-arrow"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))],10,Ut))),128))]),t.actions.length>t.maxVisible?(s(),r("div",Xt,[e("button",{onClick:k,class:"toggle-button"},[F(n(c.value?"Show Less":`Show ${t.actions.length-t.maxVisible} More`)+" ",1),(s(),r("svg",{class:f(["w-4 h-4 transition-transform",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},B[1]||(B[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])):h("",!0)]),_:3},8,["title","loading"]))}},Fe=ue(Yt,[["__scopeId","data-v-d61ca03f"]]),Zt={class:"manager-dashboard"},es={class:"welcome-section"},ts={class:"welcome-content"},ss={class:"welcome-title"},as={class:"welcome-actions"},ns=["disabled"],os={class:"stats-grid"},rs={class:"dashboard-content"},is={class:"left-column"},ls={class:"performance-metrics"},cs={class:"metric-item"},ds={class:"metric-header"},us={class:"metric-value"},ms={class:"metric-bar"},gs={class:"metric-item"},vs={class:"metric-header"},bs={class:"metric-value"},hs={class:"metric-bar"},fs={class:"metric-item"},ys={class:"metric-header"},ps={class:"metric-value"},xs={class:"metric-bar"},ws={class:"right-column"},ks={class:"team-members"},$s={class:"member-avatar"},As=["src","alt"],Ss={key:1,class:"avatar-placeholder"},Ts={class:"member-info"},Cs={class:"member-name"},Ms={class:"member-role"},js={class:"member-status"},Is={key:0,class:"member-task"},Ds={class:"member-actions"},Ps=["onClick"],Rs=["onClick"],_s={class:"approval-count"},Bs={key:0,class:"empty-state"},Vs={key:1,class:"approvals-container"},Ns={class:"approvals-scroll"},Os=["data-approval-id"],Ls={class:"approval-content"},Es={class:"approval-header"},Hs={class:"approval-title"},Ws={class:"approval-requester"},Fs={class:"approval-date"},qs={key:0,class:"approval-stats"},zs={class:"stats-row"},Us={class:"stat-item"},Qs={class:"stat-value"},Gs={class:"stat-item"},Ks={class:"stat-value"},Js={key:0,class:"stats-row"},Xs={class:"stat-item overtime"},Ys={class:"stat-value"},Zs={key:1,class:"approval-feedback"},ea={class:"approval-actions"},ta=["onClick","disabled","title"],sa={key:0,class:"w-4 h-4 animate-spin"},aa=["onClick","disabled","title"],na={key:0,class:"w-4 h-4 animate-spin"},oa={key:0,class:"view-all-section"},ra={__name:"ManagerDashboard",props:{stats:{type:Object,default:()=>({teamSize:0,activeProjects:0,pendingTasks:0,teamAttendance:0,teamTrend:0,projectTrend:0,taskTrend:0,attendanceTrend:0})},teamActivities:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({completionRate:85,taskVelocity:12,satisfaction:4.2})},teamMembers:{type:Array,default:()=>[]},pendingApprovals:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh","approve","reject","action","view-member","send-message"],setup(t,{emit:T}){const o=T,{user:y}=Te(),c=O(!1),j=O(!1),C=O(new Set),k=O({}),v=O(!1),I=O(null),x=O("approve"),D=S(()=>{var a;return((a=y.value)==null?void 0:a.name)||"Manager"}),B=S(()=>{const a=new Date().getHours();return a<12?"morning":a<17?"afternoon":"evening"}),M=S(()=>[{id:"create-project",label:"New Project",description:"Start a new team project",icon:Ae,variant:"primary",route:"projects.create"},{id:"assign-tasks",label:"Assign Tasks",description:"Delegate tasks to team members",icon:je,variant:"secondary",route:"tasks.create"},{id:"team-reports",label:"Team Reports",description:"View team performance analytics",icon:ce,variant:"info",route:"reports.team"},{id:"schedule-meeting",label:"Schedule Meeting",description:"Plan team meetings and reviews",icon:Ne,variant:"success",route:"meetings.create"},{id:"review-timesheets",label:"Review Timesheets",description:"Approve team time entries",icon:ae,variant:"warning",route:"timesheets.review"},{id:"team-feedback",label:"Team Feedback",description:"Provide feedback to team members",icon:Oe,variant:"secondary",route:"feedback.create"}]),w=async()=>{c.value=!0;try{await o("refresh")}finally{c.value=!1}},V=a=>{o("action",{type:"timeline",data:a})},$=a=>{o("action",{type:"quick-action",data:a})},E=()=>{o("action",{type:"view-reports"})},L=a=>{o("view-member",a)},G=a=>{o("send-message",a)},U=(a,m)=>{I.value=a,x.value=m,v.value=!0},X=async a=>{j.value=!0,delete k.value[a.approval.id];try{const m={...a.approval,comments:a.comments};a.action==="approve"?await o("approve",m):await o("reject",m),te(a.approval.id,"success",`${a.action==="approve"?"Approved":"Rejected"} successfully`),setTimeout(()=>{delete k.value[a.approval.id]},3e3),v.value=!1}catch{te(a.approval.id,"error",`Failed to ${a.action}. Please try again.`),setTimeout(()=>{delete k.value[a.approval.id]},5e3)}finally{j.value=!1}},me=()=>{o("action",{type:"view-all-approvals"})},ge=a=>{const m="absolute -bottom-0 -right-0 w-3 h-3 rounded-full border-2 border-white",u={online:"bg-success-500",away:"bg-warning-500",busy:"bg-error-500",offline:"bg-neutral-400"};return`${m} ${u[a]||u.offline}`},re=a=>{const m="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",u={online:"bg-success-100 text-success-800",away:"bg-warning-100 text-warning-800",busy:"bg-error-100 text-error-800",offline:"bg-neutral-100 text-neutral-800"};return`${m} ${u[a]||u.offline}`},ve=a=>{const m=new Date,u=new Date(a),_=Math.floor((m-u)/(1e3*60));if(_<1)return"Just now";if(_<60)return`${_}m ago`;const H=Math.floor(_/60);return H<24?`${H}h ago`:`${Math.floor(H/24)}d ago`},te=(a,m,u)=>{k.value[a]={type:m,message:u}},ie=a=>{const m="flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium",u={success:"bg-success-50 text-success-700 border border-success-200",error:"bg-error-50 text-error-700 border border-error-200",warning:"bg-warning-50 text-warning-700 border border-warning-200"};return`${m} ${u[a]||u.error}`},p=a=>({success:oe,error:ne,warning:ne})[a]||ne;return Be(()=>{}),(a,m)=>(s(),r("div",Zt,[e("div",es,[e("div",ts,[e("h1",ss," Good "+n(B.value)+", "+n(D.value)+"! ",1),m[1]||(m[1]=e("p",{class:"welcome-subtitle"}," Here's your team overview and management tools for today. ",-1))]),e("div",as,[e("button",{onClick:w,disabled:c.value,class:"refresh-button"},[(s(),z(Y(c.value?"LoadingIcon":"ArrowPathIcon"),{class:f(["w-4 h-4",{"animate-spin":c.value}])},null,8,["class"])),m[2]||(m[2]=F(" Refresh "))],8,ns)])]),e("div",os,[g($e,{value:t.stats.teamSize,label:"Team Members",icon:l(Se),"icon-color":"primary",variant:"featured",trend:t.stats.teamTrend,loading:t.loading,clickable:!0,route:"employees.index"},null,8,["value","icon","trend","loading"]),g($e,{value:t.stats.pendingTasks,label:"Pending Tasks",icon:l(je),"icon-color":"warning",trend:t.stats.taskTrend,loading:t.loading,clickable:!0,route:"tasks.index"},null,8,["value","icon","trend","loading"]),g($e,{value:t.stats.teamAttendance,label:"Team Attendance",icon:l(Le),"icon-color":"info",unit:"%",trend:t.stats.attendanceTrend,loading:t.loading,clickable:!0,route:"attendances.index"},null,8,["value","icon","trend","loading"])]),e("div",rs,[e("div",is,[g(qt,{activities:t.teamActivities,title:"Team Activity","max-items":8,loading:t.loading,onAction:V},null,8,["activities","loading"]),g(de,{title:"Team Performance",loading:t.loading,class:"team-performance"},{actions:N(()=>[e("button",{onClick:E,class:"text-sm text-primary-600 hover:text-primary-700"}," View Reports ")]),default:N(()=>[e("div",ls,[e("div",cs,[e("div",ds,[m[3]||(m[3]=e("span",{class:"metric-label"},"Project Completion Rate",-1)),e("span",us,n(t.teamPerformance.completionRate)+"%",1)]),e("div",ms,[e("div",{class:"metric-progress bg-success-500",style:se({width:`${t.teamPerformance.completionRate}%`})},null,4)])]),e("div",gs,[e("div",vs,[m[4]||(m[4]=e("span",{class:"metric-label"},"Average Task Velocity",-1)),e("span",bs,n(t.teamPerformance.taskVelocity)+" tasks/week",1)]),e("div",hs,[e("div",{class:"metric-progress bg-info-500",style:se({width:`${Math.min(t.teamPerformance.taskVelocity*10,100)}%`})},null,4)])]),e("div",fs,[e("div",ys,[m[5]||(m[5]=e("span",{class:"metric-label"},"Team Satisfaction",-1)),e("span",ps,n(t.teamPerformance.satisfaction)+"/5",1)]),e("div",xs,[e("div",{class:"metric-progress bg-warning-500",style:se({width:`${t.teamPerformance.satisfaction/5*100}%`})},null,4)])])])]),_:1},8,["loading"])]),e("div",ws,[g(Fe,{actions:M.value,title:"Management Tools","max-visible":6,onAction:$},null,8,["actions"]),g(de,{title:"Team Status",loading:t.loading,class:"team-status"},{default:N(()=>[e("div",ks,[(s(!0),r(W,null,q(t.teamMembers,u=>(s(),r("div",{key:u.id,class:"team-member"},[e("div",$s,[u.avatar?(s(),r("img",{key:0,src:u.avatar,alt:u.name,class:"w-10 h-10 rounded-full"},null,8,As)):(s(),r("div",Ss,n(u.name.charAt(0)),1)),e("div",{class:f(ge(u.status))},null,2)]),e("div",Ts,[e("h4",Cs,n(u.name),1),e("p",Ms,n(u.role),1),e("div",js,[e("span",{class:f(re(u.status))},n(u.status),3),u.currentTask?(s(),r("span",Is," Working on: "+n(u.currentTask),1)):h("",!0)])]),e("div",Ds,[e("button",{onClick:_=>L(u),class:"action-button",title:"View Details"},[g(l(et),{class:"w-4 h-4"})],8,Ps),e("button",{onClick:_=>G(u),class:"action-button",title:"Send Message"},[g(l(We),{class:"w-4 h-4"})],8,Rs)])]))),128))])]),_:1},8,["loading"]),g(de,{title:"Pending Approvals",loading:t.loading,class:"pending-approvals"},{actions:N(()=>[e("span",_s,n(t.pendingApprovals.length),1)]),default:N(()=>[t.pendingApprovals.length===0?(s(),r("div",Bs,[g(l(oe),{class:"w-12 h-12 text-success-400 mx-auto mb-3"}),m[6]||(m[6]=e("p",{class:"text-neutral-500 text-center"},"All approvals handled!",-1))])):(s(),r("div",Vs,[e("div",Ns,[(s(!0),r(W,null,q(t.pendingApprovals,u=>(s(),r("div",{key:u.id,"data-approval-id":u.id,class:f(["approval-item",{"approval-processing":C.value.has(u.id)}])},[e("div",Ls,[e("div",Es,[e("h4",Hs,n(u.title),1)]),e("p",Ws," Requested by "+n(u.requester),1),e("span",Fs,n(ve(u.created_at)),1),u.type==="timesheet"&&u.stats?(s(),r("div",qs,[e("div",zs,[e("div",Us,[m[7]||(m[7]=e("span",{class:"stat-label"},"Total Hours:",-1)),e("span",Qs,n(u.stats.total_hours||"0h 0m"),1)]),e("div",Gs,[m[8]||(m[8]=e("span",{class:"stat-label"},"Days:",-1)),e("span",Ks,n(u.stats.days_count||0),1)])]),u.stats.overtime_hours?(s(),r("div",Js,[e("div",Xs,[m[9]||(m[9]=e("span",{class:"stat-label"},"Overtime:",-1)),e("span",Ys,n(u.stats.overtime_hours),1)])])):h("",!0)])):h("",!0),k.value[u.id]?(s(),r("div",Zs,[e("div",{class:f(ie(k.value[u.id].type))},[(s(),z(Y(p(k.value[u.id].type)),{class:"w-4 h-4"})),e("span",null,n(k.value[u.id].message),1)],2)])):h("",!0)]),e("div",ea,[e("button",{onClick:_=>U(u,"approve"),class:"approve-button",disabled:j.value||C.value.has(u.id),title:C.value.has(u.id)?"Processing...":"Approve"},[C.value.has(u.id)?(s(),r("div",sa,m[10]||(m[10]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(s(),z(l(Ee),{key:1,class:"w-4 h-4"}))],8,ta),e("button",{onClick:_=>U(u,"reject"),class:"reject-button",disabled:j.value||C.value.has(u.id),title:C.value.has(u.id)?"Processing...":"Reject"},[C.value.has(u.id)?(s(),r("div",na,m[11]||(m[11]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(s(),z(l(He),{key:1,class:"w-4 h-4"}))],8,aa)])],10,Os))),128))]),t.pendingApprovals.length>3?(s(),r("div",oa,[e("button",{onClick:me,class:"view-all-link"},[e("span",null,"View All "+n(t.pendingApprovals.length)+" Approvals",1),m[12]||(m[12]=e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])):h("",!0)]))]),_:1},8,["loading"])])]),g(Ze,{show:v.value,approval:I.value,action:x.value,onClose:m[0]||(m[0]=u=>v.value=!1),onSubmit:X},null,8,["show","approval","action"])]))}},ia=ue(ra,[["__scopeId","data-v-539c5cb0"]]),la={class:"employee-dashboard"},ca={class:"motivation-block"},da={class:"motivation-content"},ua={class:"motivation-text"},ma={class:"quick-clock-actions"},ga=["disabled"],va=["disabled"],ba=["disabled"],ha={class:"time-tracking-section"},fa={class:"real-time-clock"},ya={class:"clock-display"},pa={class:"current-time"},xa={class:"current-date"},wa={class:"work-status"},ka={class:"status-text"},$a={class:"time-progress-block"},Aa={class:"duration-display"},Sa={class:"duration-item"},Ta={class:"duration-value"},Ca={key:0,class:"duration-item"},Ma={class:"duration-value"},ja={class:"duration-item"},Ia={class:"duration-value"},Da={class:"horizontal-clock-container"},Pa={class:"time-markers"},Ra={class:"marker-time"},_a={class:"time-progress-bar"},Ba={key:0,class:"current-time-indicator"},Va={class:"time-tooltip"},Na={class:"time-progress-info"},Oa={class:"progress-left"},La={class:"progress-time"},Ea={class:"progress-right"},Ha={class:"progress-percentage"},Wa={class:"journey-overview-section"},Fa={class:"journey-milestones"},qa={class:"milestone-grid"},za={class:"milestone-card"},Ua={class:"milestone-icon"},Qa={class:"milestone-content"},Ga={class:"milestone-value"},Ka={class:"milestone-sublabel"},Ja={class:"milestone-card"},Xa={class:"milestone-icon"},Ya={class:"milestone-content"},Za={class:"milestone-value"},en={class:"milestone-card"},tn={class:"milestone-icon"},sn={class:"milestone-content"},an={class:"milestone-value"},nn={class:"milestone-card"},on={class:"milestone-icon"},rn={class:"milestone-content"},ln={class:"milestone-value"},cn={class:"performance-stats"},dn={class:"stats-grid"},un={class:"stat-card primary"},mn={class:"stat-header"},gn={class:"stat-value"},vn={class:"stat-card success"},bn={class:"stat-header"},hn={class:"stat-value"},fn={class:"stat-card info"},yn={class:"stat-header"},pn={class:"stat-value"},xn={class:"stat-card warning"},wn={class:"stat-header"},kn={class:"consistency-score"},$n={class:"stat-value"},An={key:0,class:"achievements-section"},Sn={class:"achievements-grid"},Tn={class:"achievement-summary"},Cn={class:"achievement-count"},Mn={class:"recent-achievements"},jn={class:"achievement-text"},In={class:"growth-progress"},Dn={class:"progress-items"},Pn={class:"progress-item"},Rn={class:"progress-header"},_n={class:"progress-value"},Bn={class:"progress-bar"},Vn={class:"dashboard-content"},Nn={class:"left-column"},On={key:0,class:"empty-state"},Ln={key:1,class:"feedback-list"},En={class:"feedback-header"},Hn={class:"feedback-from"},Wn={class:"feedback-author"},Fn={class:"feedback-role"},qn={class:"feedback-rating"},zn={class:"rating-stars"},Un={class:"feedback-comment"},Qn={class:"feedback-date"},Gn={class:"right-column"},Kn={__name:"EmployeeDashboard",props:{stats:{type:Object,default:()=>({hoursToday:0,tasksCompleted:0,leaveBalance:0,upcomingDeadlines:0,taskTrend:0,daysWithCompany:0,yearsOfService:0,monthsWithCompany:0,totalWorkHours:0,projectsContributed:0,performanceRank:"N/A",myAverageRating:"N/A",attendanceRate:0,myWorkReports:0,mySuccessfulCalls:0,consistencyScore:0,totalAchievements:0,recentAchievements:[],performanceTrend:0,attendanceTrend:0,productivityTrend:0,competencyProgress:0})},personalActivities:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,break_sessions:[],current_break_start:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m",sessions:0,clock_ins:0},recent_activities:[],stats:{weekly_hours:"0h 0m",monthly_hours:"0h 0m",average_daily:"0h 0m"}})},birthdayNotifications:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})}},emits:["clock-in-out","toggle-task","action","view-task"],setup(t,{emit:T}){const o=t,y=T;Te();const c=O(new Date),j=O(""),C=O("0h 0m 0s"),k=O("0h 0m 0s"),v=O(null);let I=null;const x=S(()=>{const d=o.clockedIn||o.currentAttendance.clocked_in;return console.log("🔍 isCurrentlyClockedIn computed:",{propsClockedIn:o.clockedIn,currentAttendanceClockedIn:o.currentAttendance.clocked_in,result:d}),d}),D=S(()=>x.value?"Clock Out":"Clock In"),B=S(()=>["inline-flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",x.value?"text-white bg-error-600 border border-error-600 hover:bg-error-700 focus:ring-error-500":"text-white bg-success-600 border border-success-600 hover:bg-success-700 focus:ring-success-500"]),M=S(()=>c.value.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),w=S(()=>!x.value||!o.currentAttendance.clock_in_time?"before-work":"during-work"),V=S(()=>{if(!x.value)return console.log("🔍 Progress: Not clocked in, returning 0%"),0;const d=o.currentAttendance.clock_in_time;if(!d)return console.log("🔍 Progress: No clock in time, returning 0%"),0;const i=c.value,b=new Date(d);if(i<b)return console.log("🔍 Progress: Current time before clock in, returning 0%"),0;const P=(i.getTime()-b.getTime())/(1e3*60*60),R=P/8*100,J=Math.min(100,Math.max(0,R));return console.log("🔍 Progress calculation:",{clockInTime:d,now:i.toISOString(),workTimeElapsedHours:P.toFixed(2),percentage:R.toFixed(2),finalPercentage:J.toFixed(2)}),J}),$=S(()=>{const d=Math.round(V.value);switch(w.value){case"before-work":return x.value?"Work session starting":"Ready to clock in";case"after-work":return"Workday complete!";case"during-work":return`${d}% of workday`;default:return`${d}% of workday`}}),E=S(()=>{switch(w.value){case"before-work":return"Pre-work";case"after-work":return"Complete";case"during-work":return"Active";default:return"Active"}}),L=S(()=>[{label:"8 AM",isLunch:!1},{label:"9",isLunch:!1},{label:"10",isLunch:!1},{label:"11",isLunch:!1},{label:"12 PM",isLunch:!0},{label:"1",isLunch:!1},{label:"2",isLunch:!1},{label:"3",isLunch:!1},{label:"4",isLunch:!1},{label:"5 PM",isLunch:!1}]),G=S(()=>{if(!x.value)return 0;const d=o.currentAttendance.clock_in_time;if(!d)return 0;const i=c.value,b=new Date(i);b.setHours(8,0,0,0);const A=new Date(i);A.setHours(17,0,0,0);const P=new Date(d),Q=A.getTime()-b.getTime(),R=P.getTime()-b.getTime(),J=Math.max(0,R/Q*100);return Math.min(100,J)}),U=S(()=>{if(!x.value)return console.log("🔍 ProgressWidth: Not clocked in, returning 0"),0;const d=o.currentAttendance.clock_in_time;if(!d)return console.log("🔍 ProgressWidth: No clock in time, returning 0"),0;const i=c.value,b=new Date(i);b.setHours(8,0,0,0);const A=new Date(i);A.setHours(17,0,0,0);const P=new Date(d),Q=A.getTime()-b.getTime();if(i<P)return console.log("🔍 ProgressWidth: Current time before clock in, returning 0"),0;const R=i.getTime()-b.getTime(),J=Math.min(100,Math.max(0,R/Q*100)),ke=P.getTime()-b.getTime(),be=Math.max(0,ke/Q*100),he=J-be,fe=Math.max(0,he);return console.log("🔍 ProgressWidth calculation:",{clockInTime:d,timelineStart:b.toISOString(),timelineEnd:A.toISOString(),currentPositionPercent:J.toFixed(2),clockInPositionPercent:be.toFixed(2),width:he.toFixed(2),finalWidth:fe.toFixed(2)}),fe}),X=S(()=>{if(!x.value)return 0;const d=o.currentAttendance.clock_in_time;if(!d)return 0;const i=c.value,b=new Date(i);b.setHours(8,0,0,0);const A=new Date(i);A.setHours(17,0,0,0);const P=new Date(d),Q=A.getTime()-b.getTime(),R=P.getTime()-b.getTime(),J=Math.max(0,R/Q*100);return Math.min(100,J)}),me=S(()=>{if(!x.value)return[];const d=c.value,i=new Date(d);i.setHours(8,0,0,0);const b=new Date(d);b.setHours(17,0,0,0);const A=b.getTime()-i.getTime(),P=[];if((o.currentAttendance.break_sessions||[]).forEach(R=>{R.start&&P.push({start:R.start,end:R.end,isOngoing:!1})}),o.currentAttendance&&o.currentAttendance.on_break){let R=null;o.currentAttendance.current_break_start?R=o.currentAttendance.current_break_start:v.value&&(R=v.value),R&&P.push({start:R,end:null,isOngoing:!0})}return P.length===0?[]:P.map((R,J)=>{const ke=new Date(R.start),be=R.end?new Date(R.end):d,he=ke.getTime()-i.getTime(),fe=be.getTime()-i.getTime(),Me=Math.max(0,he/A*100),ze=Math.min(100,fe/A*100),Ue=Math.max(0,ze-Me);return{left:Me,width:Ue,isOngoing:R.isOngoing}}).filter(R=>R.width>0)}),ge=S(()=>[{id:"my-assessments",label:"My Assessments",description:"View and complete competency assessments",icon:oe,variant:"primary",route:"competency-assessments.my-assessments"},{id:"request-leave",label:"Request Leave",description:"Submit a new leave request",icon:Ne,variant:"secondary",route:"leaves.create"},{id:"assessment-dashboard",label:"Assessment Dashboard",description:"View assessment overview and analytics",icon:ne,variant:"success",route:"assessment-dashboard"}]),re=()=>{const d="text-xs font-medium px-2 py-1 rounded-full";switch(w.value){case"before-work":return`${d} bg-neutral-100 text-neutral-600`;case"after-work":return`${d} bg-success-100 text-success-700`;case"during-work":return`${d} bg-primary-100 text-primary-700`;default:return`${d} bg-primary-100 text-primary-700`}},ve=()=>{const d="flex items-center space-x-2";switch(w.value){case"before-work":return`${d} text-neutral-600`;case"after-work":return`${d} text-success-700`;case"during-work":return o.currentAttendance&&o.currentAttendance.on_break?`${d} text-warning-700`:`${d} text-primary-700`;default:return`${d} text-primary-700`}},te=()=>{const d=new Date;c.value=d,j.value=d.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},ie=()=>{if(x.value&&o.currentAttendance.clock_in_time){const d=new Date(o.currentAttendance.clock_in_time),b=new Date-d,A=Math.floor(b/(1e3*60*60)),P=Math.floor(b%(1e3*60*60)/(1e3*60)),Q=Math.floor(b%(1e3*60)/1e3);C.value=`${A}h ${P}m ${Q}s`}else C.value="0h 0m 0s";if(o.currentAttendance&&o.currentAttendance.on_break){let d=null;if(o.currentAttendance.current_break_start)d=new Date(o.currentAttendance.current_break_start);else if(v.value)d=new Date(v.value);else if(o.currentAttendance.break_sessions&&o.currentAttendance.break_sessions.length>0){const i=o.currentAttendance.break_sessions[o.currentAttendance.break_sessions.length-1];i&&!i.end&&(d=new Date(i.start))}if(d&&!isNaN(d.getTime())){const b=Math.max(0,new Date-d),A=Math.floor(b/(1e3*60*60)),P=Math.floor(b%(1e3*60*60)/(1e3*60)),Q=Math.floor(b%(1e3*60)/1e3);k.value=`${A}h ${P}m ${Q}s`,v.value||(v.value=d.toISOString())}else v.value||(v.value=new Date().toISOString()),k.value="0h 0m 1s"}else k.value="0h 0m 0s",v.value=null},p=async()=>{try{console.log("🔍 EmployeeDashboard: Clock in/out button clicked"),console.log("🔍 Current state:",{isCurrentlyClockedIn:x.value,clockedIn:o.clockedIn,currentAttendanceClockedIn:o.currentAttendance.clocked_in}),y("clock-in-out"),setTimeout(()=>{const d=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!x.value,onBreak:!1,clockInTime:x.value?null:new Date().toISOString(),breakStartTime:null,timestamp:Date.now()}});window.dispatchEvent(d)},100)}catch(d){console.error("Clock in/out failed:",d)}},a=async()=>{try{v.value=new Date().toISOString(),y("action",{type:"take-break"}),setTimeout(()=>{const d=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!0,onBreak:!0,clockInTime:o.currentAttendance&&o.currentAttendance.clock_in_time||null,breakStartTime:v.value,timestamp:Date.now()}});window.dispatchEvent(d)},100)}catch(d){console.error("Take break failed:",d)}},m=async()=>{try{y("action",{type:"end-break"}),setTimeout(()=>{const d=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!0,onBreak:!1,clockInTime:o.currentAttendance&&o.currentAttendance.clock_in_time||null,breakStartTime:null,timestamp:Date.now()}});window.dispatchEvent(d)},100)}catch(d){console.error("End break failed:",d)}},u=(d,i)=>{const b=Number(d)||0,A=Number(i)||0;return b>0?`${b} year${b>1?"s":""}, ${A} month${A>1?"s":""}`:`${A} month${A>1?"s":""}`},_=d=>{const i=Number(d)||0;return i>0?`+${i}%`:i<0?`${i}%`:"0%"},H=d=>{const i=Number(d)||0;return i===0?"neutral":i>0?"positive":"negative"},Ce=d=>{if(!d)return"Unknown";try{const i=new Date(d),A=new Date-i,P=Math.floor(A/(1e3*60*60*24));return P===0?"Today":P===1?"Yesterday":P<7?`${P} days ago`:P<30?`${Math.floor(P/7)} weeks ago`:`${Math.floor(P/30)} months ago`}catch{return"Unknown"}},qe=d=>{y("action",d)};return Be(()=>{te(),ie(),I=setInterval(()=>{te(),ie()},1e3)}),Qe(()=>{I&&clearInterval(I)}),(d,i)=>(s(),r("div",la,[e("div",ca,[e("div",da,[e("p",ua,[g(l(Ie),{class:"w-5 h-5 inline-block mr-2 text-yellow-500"}),i[0]||(i[0]=F(" Ready to tackle today's challenges? "))])]),e("div",ma,[e("button",{onClick:p,disabled:t.loading,class:f(B.value)},[g(l(ae),{class:"w-4 h-4"}),F(" "+n(D.value),1)],10,ga),x.value&&!(t.currentAttendance&&t.currentAttendance.on_break)?(s(),r("button",{key:0,onClick:a,disabled:t.loading,class:"break-button"},[g(l(Je),{class:"w-4 h-4"}),i[1]||(i[1]=F(" Take Break "))],8,va)):h("",!0),x.value&&t.currentAttendance&&t.currentAttendance.on_break?(s(),r("button",{key:1,onClick:m,disabled:t.loading,class:"end-break-button"},[g(l(Xe),{class:"w-4 h-4"}),i[2]||(i[2]=F(" End Break "))],8,ba)):h("",!0)])]),e("div",ha,[e("div",fa,[e("div",ya,[e("div",pa,n(M.value),1),e("div",xa,n(j.value),1)]),e("div",wa,[e("div",{class:f(["status-indicator",ve()])},[i[3]||(i[3]=e("div",{class:"status-dot"},null,-1)),e("span",ka,n(E.value),1)],2)])]),e("div",$a,[e("div",Aa,[e("div",Sa,[i[4]||(i[4]=e("div",{class:"duration-label"},"Work Time",-1)),e("div",Ta,n(C.value),1)]),t.currentAttendance&&t.currentAttendance.on_break?(s(),r("div",Ca,[i[5]||(i[5]=e("div",{class:"duration-label"},"Break Time",-1)),e("div",Ma,n(k.value),1)])):h("",!0),e("div",ja,[i[6]||(i[6]=e("div",{class:"duration-label"},"Progress",-1)),e("div",Ia,n(Math.round(V.value))+"%",1)])]),e("div",Da,[e("div",Pa,[(s(!0),r(W,null,q(L.value,(b,A)=>(s(),r("div",{key:A,class:f(["time-marker",{"start-marker":A===0,"end-marker":A===L.value.length-1,"lunch-marker":b.isLunch,"regular-marker":!b.isLunch&&A!==0&&A!==L.value.length-1}])},[i[7]||(i[7]=e("div",{class:"marker-line"},null,-1)),e("span",Ra,n(b.label),1)],2))),128))]),e("div",_a,[i[9]||(i[9]=e("div",{class:"progress-bar-shimmer"},null,-1)),x.value&&X.value>0?(s(),r("div",{key:0,class:"pre-work-fill",style:se({width:`${X.value}%`,transition:"width 0.5s ease-out"})},null,4)):h("",!0),x.value&&U.value>0?(s(),r("div",{key:1,class:"work-progress-fill",style:se({left:`${G.value}%`,width:`${U.value}%`,transition:"width 0.5s ease-out, left 0.5s ease-out"})},[w.value==="during-work"?(s(),r("div",Ba,[i[8]||(i[8]=e("div",{class:"time-dot"},null,-1)),e("div",Va,n(M.value),1)])):h("",!0)],4)):h("",!0),(s(!0),r(W,null,q(me.value,(b,A)=>(s(),r("div",{key:`break-${A}`,class:f(["break-time-fill",{"ongoing-break":b.isOngoing}]),style:se({left:`${b.left}%`,width:`${b.width}%`})},null,6))),128))]),e("div",Na,[e("div",Oa,[e("span",La,n(M.value),1),e("span",{class:f(["progress-status",re()])},n(E.value),3)]),e("div",Ea,[e("span",Ha,n($.value),1)])])])])]),e("div",Wa,[e("div",Fa,[i[17]||(i[17]=e("h3",{class:"section-title"},"Your Journey",-1)),e("div",qa,[e("div",za,[e("div",Ua,[g(l(Le),{class:"w-6 h-6 text-blue-600"})]),e("div",Qa,[e("div",Ga,n(Math.floor(t.stats.daysWithCompany||0)),1),i[10]||(i[10]=e("div",{class:"milestone-label"},"Days with Company",-1)),e("div",Ka,n(u(Math.floor(t.stats.yearsOfService||0),Math.floor(t.stats.monthsWithCompany||0))),1)])]),e("div",Ja,[e("div",Xa,[g(l(ae),{class:"w-6 h-6 text-green-600"})]),e("div",Ya,[e("div",Za,n(t.stats.totalWorkHours||0)+"h",1),i[11]||(i[11]=e("div",{class:"milestone-label"},"Total Work Hours",-1)),i[12]||(i[12]=e("div",{class:"milestone-sublabel"},"Lifetime contribution",-1))])]),e("div",en,[e("div",tn,[g(l(ce),{class:"w-6 h-6 text-purple-600"})]),e("div",sn,[e("div",an,n(t.stats.projectsContributed||0),1),i[13]||(i[13]=e("div",{class:"milestone-label"},"Projects",-1)),i[14]||(i[14]=e("div",{class:"milestone-sublabel"},"Cross-functional work",-1))])]),e("div",nn,[e("div",on,[g(l(De),{class:"w-6 h-6 text-yellow-600"})]),e("div",rn,[e("div",ln,n(t.stats.performanceRank||"N/A"),1),i[15]||(i[15]=e("div",{class:"milestone-label"},"Performance Rank",-1)),i[16]||(i[16]=e("div",{class:"milestone-sublabel"},"Among peers",-1))])])])]),e("div",cn,[i[22]||(i[22]=e("h3",{class:"section-title"},"Performance & Growth",-1)),e("div",dn,[e("div",un,[e("div",mn,[g(l(oe),{class:"w-5 h-5"}),e("span",{class:f(["stat-trend",H(t.stats.performanceTrend)])},n(_(t.stats.performanceTrend)),3)]),e("div",gn,n(t.stats.myAverageRating||"N/A"),1),i[18]||(i[18]=e("div",{class:"stat-label"},"Avg Rating",-1))]),e("div",vn,[e("div",bn,[g(l(Oe),{class:"w-5 h-5"}),e("span",{class:f(["stat-trend",H(t.stats.attendanceTrend)])},n(_(t.stats.attendanceTrend)),3)]),e("div",hn,n(isNaN(t.stats.attendanceRate)?"N/A":Math.round(t.stats.attendanceRate||0)+"%"),1),i[19]||(i[19]=e("div",{class:"stat-label"},"Attendance Rate",-1))]),e("div",fn,[e("div",yn,[g(l(ce),{class:"w-5 h-5"}),e("span",{class:f(["stat-trend",H(t.stats.productivityTrend)])},n(_(t.stats.productivityTrend)),3)]),e("div",pn,n(t.stats.myWorkReports||0),1),i[20]||(i[20]=e("div",{class:"stat-label"},"Work Reports",-1))]),e("div",xn,[e("div",wn,[g(l(Ie),{class:"w-5 h-5"}),e("span",kn,n(Math.round(t.stats.consistencyScore||0))+"%",1)]),e("div",$n,n(t.stats.mySuccessfulCalls||0),1),i[21]||(i[21]=e("div",{class:"stat-label"},"Successful Calls",-1))])])]),t.stats.totalAchievements>0?(s(),r("div",An,[i[25]||(i[25]=e("h3",{class:"section-title"},"Achievements & Recognition",-1)),e("div",Sn,[e("div",Tn,[e("div",Cn,n(t.stats.totalAchievements),1),i[23]||(i[23]=e("div",{class:"achievement-label"},"Total Achievements",-1))]),e("div",Mn,[(s(!0),r(W,null,q(t.stats.recentAchievements,b=>(s(),r("div",{key:b,class:"achievement-item"},[i[24]||(i[24]=e("div",{class:"achievement-badge"},"🏆",-1)),e("span",jn,n(b),1)]))),128))])])])):h("",!0),e("div",In,[i[27]||(i[27]=e("h3",{class:"section-title"},"Development Progress",-1)),e("div",Dn,[e("div",Pn,[e("div",Rn,[i[26]||(i[26]=e("span",{class:"progress-label"},"Competency Progress",-1)),e("span",_n,n(_(t.stats.competencyProgress)),1)]),e("div",Bn,[e("div",{class:"progress-fill",style:se({width:Math.abs(t.stats.competencyProgress||0)+"%"})},null,4)])])])])]),e("div",Vn,[e("div",Nn,[g(de,{title:"Recent Feedback",loading:t.loading,class:"recent-feedback"},{default:N(()=>[t.recentFeedback.length===0?(s(),r("div",On,[g(l(We),{class:"w-12 h-12 text-neutral-400 mx-auto mb-3"}),i[28]||(i[28]=e("p",{class:"text-neutral-500 text-center"},"No recent feedback",-1))])):(s(),r("div",Ln,[(s(!0),r(W,null,q(t.recentFeedback.slice(0,3),b=>(s(),r("div",{key:b.id,class:"feedback-item"},[e("div",En,[e("div",Hn,[e("span",Wn,n(b.from.name),1),e("span",Fn,n(b.from.role),1)]),e("div",qn,[e("div",zn,[(s(),r(W,null,q(5,A=>g(l(De),{key:A,class:f(["w-4 h-4",A<=b.rating?"text-warning-400 fill-current":"text-neutral-300"])},null,8,["class"])),64))])])]),e("p",Un,n(b.comment),1),e("span",Qn,n(Ce(b.created_at)),1)]))),128))]))]),_:1},8,["loading"])]),e("div",Gn,[g(Fe,{actions:ge.value,title:"Quick Actions","max-visible":6,onAction:qe},null,8,["actions"])])])]))}},Jn=ue(Kn,[["__scopeId","data-v-99a60f3b"]]),Xn={class:"pending-approvals-widget"},Yn={class:"widget-header"},Zn={class:"approval-count"},eo={key:0,class:"text-xs text-gray-500 ml-1"},to={key:0,class:"empty-state"},so={key:1,class:"approvals-list"},ao={class:"approval-content"},no={class:"approval-title"},oo={class:"approval-description"},ro={class:"approval-requester"},io={class:"approval-actions"},lo=["onClick"],co=["onClick"],uo={__name:"PendingApprovalsWidget",props:{approvals:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["approve","reject","view-all"],setup(t){return(T,o)=>(s(),r("div",Xn,[e("div",Yn,[o[1]||(o[1]=e("h3",{class:"widget-title"},"Pending Approvals",-1)),e("span",Zn,n(Math.min(t.approvals.length,5)),1),t.approvals.length>5?(s(),r("span",eo,"of "+n(t.approvals.length),1)):h("",!0)]),t.approvals.length===0?(s(),r("div",to,[g(l(oe),{class:"w-12 h-12 text-green-500 mx-auto mb-3"}),o[2]||(o[2]=e("p",{class:"text-gray-600"},"No pending approvals",-1))])):(s(),r("div",so,[(s(!0),r(W,null,q(t.approvals.slice(0,5),y=>(s(),r("div",{key:y.id,class:"approval-item"},[e("div",ao,[e("h4",no,n(y.title),1),e("p",oo,n(y.description),1),e("span",ro,n(y.requester),1)]),e("div",io,[e("button",{onClick:c=>T.$emit("approve",y),class:"approve-button"},[g(l(Ee),{class:"w-4 h-4"})],8,lo),e("button",{onClick:c=>T.$emit("reject",y),class:"reject-button"},[g(l(He),{class:"w-4 h-4"})],8,co)])]))),128))])),t.approvals.length>5?(s(),r("button",{key:2,onClick:o[0]||(o[0]=y=>T.$emit("view-all")),class:"view-all-button"}," View All "+n(t.approvals.length)+" Approvals ",1)):h("",!0)]))}},mo=ue(uo,[["__scopeId","data-v-d3fae1f6"]]),go={key:0,class:"space-y-4"},vo={key:0,class:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4"},bo={class:"space-y-2"},ho={class:"flex items-center space-x-3"},fo={class:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center"},yo={class:"text-sm font-semibold text-pink-700"},po={class:"font-medium text-gray-900"},xo={class:"text-sm text-gray-500"},wo={class:"text-right"},ko={key:0,class:"text-xs text-gray-500"},$o={key:1,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},Ao={class:"flex items-center justify-between mb-3"},So={class:"space-y-2"},To={class:"flex items-center space-x-3"},Co={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},Mo={class:"text-sm font-semibold text-blue-700"},jo={class:"font-medium text-gray-900"},Io={class:"text-sm text-gray-500"},Do={class:"text-right"},Po={class:"text-sm font-medium text-gray-900"},Ro={class:"text-xs text-gray-500"},_o={key:2,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},Bo={__name:"BirthdayNotifications",props:{todaysBirthdays:{type:Array,default:()=>[]},upcomingBirthdays:{type:Array,default:()=>[]},stats:{type:Object,default:null}},setup(t){const T=t,o=O(!1),y=S(()=>T.todaysBirthdays.length>0||T.upcomingBirthdays.length>0),c=S(()=>o.value?T.upcomingBirthdays:T.upcomingBirthdays.slice(0,3)),j=v=>v.split(" ").map(I=>I.charAt(0).toUpperCase()).join("").substring(0,2),C=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=v=>v===0?"Today":v===1?"Tomorrow":`In ${v} days`;return(v,I)=>y.value?(s(),r("div",go,[t.todaysBirthdays.length>0?(s(),r("div",vo,[I[2]||(I[2]=e("div",{class:"flex items-center space-x-3 mb-3"},[e("div",{class:"text-2xl"},"🎉"),e("div",null,[e("h3",{class:"text-lg font-semibold text-pink-800"},"Birthday Today!"),e("p",{class:"text-sm text-pink-600"},"Let's celebrate our team members")])],-1)),e("div",bo,[(s(!0),r(W,null,q(t.todaysBirthdays,x=>(s(),r("div",{key:x.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",ho,[e("div",fo,[e("span",yo,n(j(x.user.name)),1)]),e("div",null,[e("p",po,n(x.user.name),1),e("p",xo,n(x.job_title||"Employee"),1)])]),e("div",wo,[I[1]||(I[1]=e("div",{class:"text-lg"},"🎂",-1)),x.age?(s(),r("p",ko,n(x.age)+" years",1)):h("",!0)])]))),128))])])):h("",!0),t.upcomingBirthdays.length>0?(s(),r("div",$o,[e("div",Ao,[I[3]||(I[3]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"🎂"),e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800"},"Upcoming Birthdays"),e("p",{class:"text-sm text-blue-600"},"Don't forget to wish them well!")])],-1)),e("button",{onClick:I[0]||(I[0]=x=>o.value=!o.value),class:"text-sm text-blue-600 hover:text-blue-800 font-medium"},n(o.value?"Show Less":"Show All"),1)]),e("div",So,[(s(!0),r(W,null,q(c.value,(x,D)=>(s(),r("div",{key:x.employee.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",To,[e("div",Co,[e("span",Mo,n(j(x.employee.user.name)),1)]),e("div",null,[e("p",jo,n(x.employee.user.name),1),e("p",Io,n(x.employee.job_title||"Employee"),1)])]),e("div",Do,[e("p",Po,n(C(x.birthday_date)),1),e("p",Ro,n(k(x.days_until)),1)])]))),128))])])):h("",!0),t.todaysBirthdays.length===0&&t.upcomingBirthdays.length===0&&t.stats&&t.stats.this_month===0?(s(),r("div",_o,I[4]||(I[4]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"🎂"),e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800"},"No Birthdays This Month"),e("p",{class:"text-sm text-blue-600"},"No team birthdays to celebrate right now, but stay tuned!")])],-1)]))):h("",!0)])):h("",!0)}},Vo={class:"flex items-center text-gray-500 mr-6"},No={class:"flex items-center"},Oo={class:"text-sm"},Lo={class:"flex space-x-3"},Eo=["onClick","disabled"],Ho={key:0,class:"space-y-6"},Wo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Fo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},qo={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},zo={class:"lg:col-span-2 space-y-4"},Uo={class:"flex items-center space-x-2"},Qo={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800"},Go={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Ko={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},Jo={class:"text-2xl font-bold text-green-600"},Xo={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},Yo={class:"text-2xl font-bold text-orange-600"},Zo={class:"text-center p-4 bg-purple-50 rounded-xl border border-purple-100"},er={class:"text-2xl font-bold text-purple-600"},tr={class:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100"},sr={class:"text-2xl font-bold text-blue-600"},ar={class:"lg:col-span-1 space-y-4"},nr={class:"space-y-3"},or={class:"flex items-center"},rr={class:"flex items-center"},ir={class:"flex items-center"},lr={class:"flex items-center"},cr={class:"flex items-center"},dr={class:"space-y-3"},ur={class:"flex items-center justify-between"},mr={class:"text-sm font-medium text-gray-900"},gr={key:1,class:"manager-layout"},vr={key:2,class:"employee-layout"},br={key:3,class:"fixed inset-0 z-50 overflow-y-auto"},hr={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fr={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},yr={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},pr={class:"sm:flex sm:items-start"},xr={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},wr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},kr={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},$r={class:"space-y-4"},Ar={class:"text-sm text-gray-600 mb-2"},Sr={class:"text-sm text-gray-600 mb-4"},Tr={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Cr=["disabled"],Fr={__name:"Dashboard",props:{adminStats:{type:Object,default:()=>({})},managerStats:{type:Object,default:()=>({})},employeeStats:{type:Object,default:()=>({})},pendingApprovals:{type:Array,default:()=>[]},teamMembers:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({})},teamActivities:{type:Array,default:()=>[]},personalActivities:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},currentAttendance:{type:Object,default:null},birthdayData:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})}},setup(t){const T=t,{user:o,roles:y}=Te(),c=O(!1),j=O(!1),C=O(null),k=O(""),v=S(()=>{const p=Array.isArray(y.value)&&y.value.includes("Admin");return console.log("Dashboard - User:",o.value),console.log("Dashboard - Roles:",y.value),console.log("Dashboard - Is Admin:",p),p}),I=S(()=>Array.isArray(y.value)&&(y.value.includes("Manager")||y.value.includes("HR"))&&!v.value),x=S(()=>v.value?"Admin Dashboard":I.value?"Manager Dashboard":"My Dashboard"),D=S(()=>v.value?"System overview and administrative management tools":I.value?"Team management and performance overview":"Your personal workspace and activities"),B=S(()=>new Date().toLocaleTimeString()),M=S(()=>{const p=[{id:"refresh",label:"Refresh",icon:"ArrowPathIcon",handler:$,disabled:c.value}];return v.value&&p.unshift({id:"settings",label:"System Settings",icon:"CogIcon",handler:()=>w("admin.roles.index")},{id:"reports",label:"View Reports",icon:"ChartBarIcon",handler:()=>w("reports.index"),primary:!0}),p}),w=p=>{try{xe.visit(route(p))}catch(a){console.error("Navigation error:",a)}},V=p=>({ArrowPathIcon:Pe,CogIcon:Re,ChartBarIcon:ce,ClockIcon:ae})[p]||ae,$=async()=>{c.value=!0;try{await xe.reload({only:["adminStats","managerStats","employeeStats","pendingApprovals"]})}catch(p){console.error("Refresh error:",p)}finally{c.value=!1}},E=async p=>{c.value=!0;try{await Z.post(route("approvals.approve",p.id)),await $()}catch(a){console.error("Approval error:",a)}finally{c.value=!1}},L=p=>{C.value=p,k.value="",j.value=!0},G=async()=>{if(k.value.trim()){c.value=!0;try{await Z.post(route("approvals.reject",C.value.id),{reason:k.value}),j.value=!1,await $()}catch(p){console.error("Rejection error:",p)}finally{c.value=!1}}},U=()=>{j.value=!1,C.value=null,k.value=""},X=p=>{w("employees.show",{employee:p.id})},me=p=>{console.log("Send message to:",p)},ge=async()=>{var p,a;c.value=!0;try{const u=(await Z.get("/api/attendance/current")).data;let _;u.clocked_in?_="/api/attendance/clock-out":_="/api/attendance/clock-in",(await Z.post(_,{},{headers:{"X-CSRF-TOKEN":(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}})).data.success&&await re()}catch(m){console.error("Clock in/out error:",m),((a=m.response)==null?void 0:a.status)===419&&window.location.reload()}finally{c.value=!1}},re=async()=>{try{const p=await Z.get("/api/attendance/current");T.currentAttendance&&Object.assign(T.currentAttendance,p.data),T.clockedIn=p.data.clocked_in}catch(p){console.error("Failed to update attendance status:",p)}},ve=async p=>{var a,m,u;if(p.route)w(p.route);else if(p.type)try{c.value=!0,p.type==="take-break"?await Z.post("/api/attendance/break-start",{},{headers:{"X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}):p.type==="end-break"&&await Z.post("/api/attendance/break-end",{},{headers:{"X-CSRF-TOKEN":(m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}),await re()}catch(_){console.error("Break action failed:",_),((u=_.response)==null?void 0:u.status)===419&&window.location.reload()}finally{c.value=!1}},te=async p=>{try{await Z.patch(route("tasks.toggle",p.id)),await $()}catch(a){console.error("Task toggle error:",a)}},ie=p=>{w("tasks.show",{task:p.id})};return(p,a)=>(s(),z(Ye,null,{header:N(()=>[F(n(x.value),1)]),subtitle:N(()=>[F(n(D.value),1)]),headerActions:N(()=>[e("div",Vo,[a[8]||(a[8]=e("div",{class:"flex items-center mr-6"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm"},"System Online")],-1)),e("div",No,[g(l(ae),{class:"w-4 h-4 mr-2"}),e("span",Oo,n(B.value),1)])]),e("div",Lo,[(s(!0),r(W,null,q(M.value,m=>(s(),r("button",{key:m.id,onClick:m.handler,disabled:m.disabled,class:f(["inline-flex items-center px-4 py-2 rounded-lg transition-all duration-200 text-sm font-medium",m.primary?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/25":"bg-white/60 text-gray-700 border border-gray-200 hover:bg-white hover:shadow-sm","disabled:opacity-50 disabled:cursor-not-allowed"])},[(s(),z(Y(V(m.icon)),{class:"w-4 h-4 mr-2"})),F(" "+n(m.label),1)],10,Eo))),128))])]),default:N(()=>{var m,u,_;return[v.value?(s(),r("div",Ho,[e("div",Wo,[g(ee,{value:t.adminStats.totalEmployees,label:"Total Employees",description:"Active workforce",icon:l(Se),variant:"primary",trend:t.adminStats.employeeTrend,route:"employees.index",loading:c.value},null,8,["value","icon","trend","loading"]),g(ee,{value:t.adminStats.pendingLeaves,label:"Pending Approvals",description:"Requires attention",icon:l(ne),variant:"warning",status:t.adminStats.pendingLeaves>10?"critical":"warning",statusText:t.adminStats.pendingLeaves>10?"High":"Normal",route:"approvals.index",urgent:t.adminStats.pendingLeaves>15,loading:c.value},null,8,["value","icon","status","statusText","urgent","loading"]),g(ee,{value:t.adminStats.pendingAssessments,label:"Pending Assessments",description:"Review status",icon:l(ye),variant:"info",status:t.adminStats.pendingAssessments>5?"warning":"good",statusText:t.adminStats.pendingAssessments>5?"Review":"On Track",route:"assessment-dashboard",loading:c.value},null,8,["value","icon","status","statusText","loading"]),g(ee,{value:t.adminStats.systemHealth+"%",label:"System Health",description:"Uptime",icon:l(oe),variant:"success",status:t.adminStats.systemHealth>95?"excellent":t.adminStats.systemHealth>85?"good":"warning",statusText:t.adminStats.systemHealth>95?"Excellent":t.adminStats.systemHealth>85?"Good":"Needs Attention",clickable:!1,loading:c.value},null,8,["value","icon","status","statusText","loading"])]),e("div",Fo,[g(ee,{value:(t.adminStats.attendanceRate||0)+"%",label:"Attendance Rate",description:"This month",icon:l(ae),variant:"info",trend:t.adminStats.attendanceTrend||0,status:(t.adminStats.attendanceRate||0)>95?"excellent":(t.adminStats.attendanceRate||0)>85?"good":"warning",statusText:(t.adminStats.attendanceRate||0)>95?"Excellent":(t.adminStats.attendanceRate||0)>85?"Good":"Needs Attention",route:"attendance.reports",loading:c.value},null,8,["value","icon","trend","status","statusText","loading"]),g(ee,{value:t.adminStats.workReportsCount||0,label:"Work Reports",description:"This month",icon:l(ce),variant:"primary",trend:t.adminStats.workReportsTrend||0,status:(t.adminStats.workReportsCount||0)>50?"excellent":(t.adminStats.workReportsCount||0)>20?"good":"warning",statusText:(t.adminStats.workReportsCount||0)>50?"High Activity":(t.adminStats.workReportsCount||0)>20?"Active":"Low Activity",route:"work-reports.index",loading:c.value},null,8,["value","icon","trend","status","statusText","loading"]),g(ee,{value:t.adminStats.successfulCalls||0,label:"Successful Calls",description:"This month",icon:l(tt),variant:"success",trend:t.adminStats.successfulCallsTrend||0,status:(t.adminStats.successfulCalls||0)>100?"excellent":(t.adminStats.successfulCalls||0)>50?"good":"warning",statusText:(t.adminStats.successfulCalls||0)>100?"Excellent":(t.adminStats.successfulCalls||0)>50?"Good":"Needs Focus",route:"work-reports.leaderboard",loading:c.value},null,8,["value","icon","trend","status","statusText","loading"]),g(ee,{value:(t.adminStats.avgPerformanceScore||0)+"%",label:"Avg Performance",description:"Team score",icon:l(ye),variant:"info",trend:t.adminStats.performanceTrend||0,status:(t.adminStats.avgPerformanceScore||0)>85?"excellent":(t.adminStats.avgPerformanceScore||0)>70?"good":"warning",statusText:(t.adminStats.avgPerformanceScore||0)>85?"Excellent":(t.adminStats.avgPerformanceScore||0)>70?"Good":"Needs Improvement",route:"performance.reports",loading:c.value},null,8,["value","icon","trend","status","statusText","loading"])]),e("div",qo,[e("div",zo,[t.pendingApprovals.length>0?(s(),z(pe,{key:0,title:"Action Required",description:"Items needing your immediate attention",icon:l(ne),iconVariant:"danger",variant:"elevated"},{headerActions:N(()=>[e("div",Uo,[e("span",Qo,n(t.pendingApprovals.length)+" pending ",1),e("button",{onClick:$,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white rounded-lg transition-all"},[g(l(Pe),{class:"w-4 h-4"})])])]),default:N(()=>[g(mo,{approvals:t.pendingApprovals,loading:c.value,onApprove:E,onReject:L,onViewAll:a[0]||(a[0]=()=>l(xe).visit(p.route("approvals.index")))},null,8,["approvals","loading"])]),_:1},8,["icon"])):h("",!0),g(pe,{title:"Competency Management",description:"Track and manage employee competencies",icon:l(ye),iconVariant:"primary",variant:"elevated"},{headerActions:N(()=>[e("button",{onClick:a[1]||(a[1]=H=>w("assessment-dashboard")),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/25"},[a[9]||(a[9]=F(" View Details ")),g(l(le),{class:"w-4 h-4 ml-1"})])]),default:N(()=>[e("div",Go,[e("div",Ko,[e("div",Jo,n(t.adminStats.completedAssessmentsThisMonth||0),1),a[10]||(a[10]=e("div",{class:"text-xs text-gray-600 mt-1"},"Completed",-1))]),e("div",Xo,[e("div",Yo,n(t.adminStats.pendingAssessments||0),1),a[11]||(a[11]=e("div",{class:"text-xs text-gray-600 mt-1"},"Pending",-1))]),e("div",Zo,[e("div",er,n(t.adminStats.activeAssessmentCycles||0),1),a[12]||(a[12]=e("div",{class:"text-xs text-gray-600 mt-1"},"Active Cycles",-1))]),e("div",tr,[e("div",sr,n(t.adminStats.averageRating||"-"),1),a[13]||(a[13]=e("div",{class:"text-xs text-gray-600 mt-1"},"Avg Rating",-1))])]),a[14]||(a[14]=e("div",{class:"space-y-3"},[e("h3",{class:"text-sm font-medium text-gray-900 mb-3"},"Recent Competency Activity"),e("div",{class:"space-y-2"},[e("div",{class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full"}),e("span",{class:"text-sm text-gray-700"},"Q4 Performance Review cycle started")]),e("span",{class:"text-xs text-gray-500"},"2 hours ago")]),e("div",{class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-2 h-2 bg-blue-400 rounded-full"}),e("span",{class:"text-sm text-gray-700"},"5 new assessments submitted")]),e("span",{class:"text-xs text-gray-500"},"4 hours ago")]),e("div",{class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-2 h-2 bg-purple-400 rounded-full"}),e("span",{class:"text-sm text-gray-700"},"Leadership competency updated")]),e("span",{class:"text-xs text-gray-500"},"1 day ago")])])],-1))]),_:1,__:[14]},8,["icon"])]),e("div",ar,[g(pe,{title:"Quick Actions",description:"Common tasks",icon:l(Ae),iconVariant:"primary"},{default:N(()=>[e("div",nr,[e("button",{onClick:a[2]||(a[2]=H=>w("competencies.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all group shadow-lg shadow-blue-500/25"},[e("div",or,[g(l(ye),{class:"w-5 h-5 mr-3"}),a[15]||(a[15]=e("span",{class:"font-medium"},"Add Competency",-1))]),g(l(le),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:a[3]||(a[3]=H=>w("employees.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",rr,[g(l(Se),{class:"w-5 h-5 mr-3"}),a[16]||(a[16]=e("span",{class:"font-medium"},"Manage Employees",-1))]),g(l(le),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:a[4]||(a[4]=H=>w("assessment-cycles.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ir,[g(l(Ae),{class:"w-5 h-5 mr-3"}),a[17]||(a[17]=e("span",{class:"font-medium"},"New Assessment Cycle",-1))]),g(l(le),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:a[5]||(a[5]=H=>w("reports.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",lr,[g(l(ce),{class:"w-5 h-5 mr-3"}),a[18]||(a[18]=e("span",{class:"font-medium"},"View Reports",-1))]),g(l(le),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:a[6]||(a[6]=H=>w("admin.roles.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",cr,[g(l(Re),{class:"w-5 h-5 mr-3"}),a[19]||(a[19]=e("span",{class:"font-medium"},"Role Management",-1))]),g(l(le),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})])])]),_:1},8,["icon"]),g(Bo,{"todays-birthdays":t.birthdayData.todaysBirthdays,"upcoming-birthdays":t.birthdayData.upcomingBirthdays,stats:t.birthdayData.stats},null,8,["todays-birthdays","upcoming-birthdays","stats"]),g(pe,{title:"System Status",description:"All systems operational",icon:l(oe),iconVariant:"success"},{default:N(()=>[e("div",dr,[a[21]||(a[21]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"Database"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Healthy")])],-1)),a[22]||(a[22]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"API Services"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Online")])],-1)),e("div",ur,[a[20]||(a[20]=e("span",{class:"text-sm text-gray-600"},"Uptime",-1)),e("span",mr,n(t.adminStats.systemUptime)+"%",1)])])]),_:1},8,["icon"])])])])):I.value?(s(),r("div",gr,[g(ia,{stats:t.managerStats,"team-members":t.teamMembers,"team-performance":t.teamPerformance,"team-activities":t.teamActivities,loading:c.value,onViewMember:X,onSendMessage:me},null,8,["stats","team-members","team-performance","team-activities","loading"])])):(s(),r("div",vr,[g(Jn,{stats:t.employeeStats,"personal-activities":t.personalActivities,"my-tasks":t.myTasks,"recent-feedback":t.recentFeedback,"clocked-in":t.clockedIn,"current-attendance":t.currentAttendance,"birthday-notifications":t.birthdayData,loading:c.value,onClockInOut:ge,onAction:ve,onToggleTask:te,onViewTask:ie},null,8,["stats","personal-activities","my-tasks","recent-feedback","clocked-in","current-attendance","birthday-notifications","loading"])])),j.value?(s(),r("div",br,[e("div",hr,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:U}),e("div",fr,[e("div",yr,[e("div",pr,[e("div",xr,[g(l(ne),{class:"h-6 w-6 text-red-600"})]),e("div",wr,[e("h3",kr," Reject "+n(((m=C.value)==null?void 0:m.title)||"Request"),1),e("div",$r,[e("div",null,[e("p",Ar,[a[23]||(a[23]=e("strong",null,"Requester:",-1)),F(" "+n((u=C.value)==null?void 0:u.requester),1)]),e("p",Sr,[a[24]||(a[24]=e("strong",null,"Request:",-1)),F(" "+n((_=C.value)==null?void 0:_.description),1)])]),e("div",null,[a[25]||(a[25]=e("label",{for:"rejection-reason",class:"block text-sm font-medium text-gray-700 mb-2"},[F(" Reason for rejection "),e("span",{class:"text-red-500"},"*")],-1)),Ge(e("textarea",{id:"rejection-reason","onUpdate:modelValue":a[7]||(a[7]=H=>k.value=H),rows:"4",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a clear reason for rejecting this request...",required:""},null,512),[[Ke,k.value]]),a[26]||(a[26]=e("p",{class:"text-xs text-gray-500 mt-1"}," This reason will be sent to the employee and recorded in the system. ",-1))])])])])]),e("div",Tr,[e("button",{onClick:G,disabled:!k.value.trim(),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Reject Request ",8,Cr),e("button",{onClick:U,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):h("",!0)]}),_:1}))}};export{Fr as default};
