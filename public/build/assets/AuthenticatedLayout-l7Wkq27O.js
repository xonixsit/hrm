import{z as te,B as re,f as h,e as w,c as p,o as m,a as r,w as Qe,k as V,A as he,p as Ze,h as Q,n as R,T as Me,g as Z,u as N,S as De,i as G,t as $,y as ge,D as Ue,N as W,F as ve,r as me,Q as we,l as de,d as rt,O as ft,s as Le,P as Ge,q as je,C as yt,M as Ve,R as bt,U as wt,K as We,V as kt}from"./app-CEXzEMMR.js";import{u as pe}from"./useAuth-DHcx6i2v.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as Et}from"./ApplicationLogo-CWVa1HTx.js";import{I as ee,D as Fe,E as xt,t as Tt}from"./Icon-D_evevV6.js";import{u as Ct}from"./useAccessibility-Bb-oRnMb.js";const _t={class:"relative"},st={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(i){const t=i,e=u=>{n.value&&u.key==="Escape"&&(n.value=!1)};te(()=>document.addEventListener("keydown",e)),re(()=>document.removeEventListener("keydown",e));const o=h(()=>({48:"w-48"})[t.width.toString()]),a=h(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=w(!1);return(u,f)=>(m(),p("div",_t,[r("div",{onClick:f[0]||(f[0]=v=>n.value=!n.value)},[he(u.$slots,"trigger")]),Qe(r("div",{class:"fixed inset-0 z-40",onClick:f[1]||(f[1]=v=>n.value=!1)},null,512),[[Ze,n.value]]),V(Me,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Q(()=>[Qe(r("div",{class:R(["absolute z-50 mt-2 rounded-md shadow-lg",[o.value,a.value]]),style:{display:"none"},onClick:f[2]||(f[2]=v=>n.value=!1)},[r("div",{class:R(["rounded-md ring-1 ring-black ring-opacity-5",i.contentClasses])},[he(u.$slots,"content")],2)],2),[[Ze,n.value]])]),_:3})]))}},Ce={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(i){return(t,e)=>(m(),Z(N(De),{href:i.href,method:i.method,as:i.as,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:Q(()=>[he(t.$slots,"default")]),_:3},8,["href","method","as"]))}},At={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},St={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},It={class:"flex items-start"},Nt={class:"ml-3 flex-1"},Rt={class:"mt-1 text-sm text-red-700"},Dt={key:0,class:"mt-3"},Mt={__name:"NavigationErrorDisplay",setup(i){const t=w(!1),e=w(""),o=w(null),a=w(null),n=h(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),u=(b,C=null)=>{e.value=b,o.value=C,t.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{v()},1e4)},f=async()=>{if(o.value)try{await o.value()}catch(b){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",b)}v()},v=()=>{t.value=!1,e.value="",o.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return te(()=>{typeof window<"u"&&(window.showNavigationError=u)}),re(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(b,C)=>t.value?(m(),p("div",At,[r("div",St,[r("div",It,[C[2]||(C[2]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),r("div",Nt,[C[0]||(C[0]=r("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),r("div",Rt,$(e.value),1),o.value?(m(),p("div",Dt,[r("button",{onClick:f,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},$(n.value),1)])):G("",!0)]),r("div",{class:"ml-4 flex-shrink-0"},[r("button",{onClick:v,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},C[1]||(C[1]=[r("span",{class:"sr-only"},"Close",-1),r("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):G("",!0)}},Y={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920},Je={tablet:{min:768},desktop:{min:1024}},ze={minimum:44,comfortable:48,large:56};function Lt(i){return i===void 0&&(i=typeof window<"u"&&window.innerWidth||1024),i<Je.tablet.min?"mobile":i<Je.desktop.min?"tablet":"desktop"}function it(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Bt(i="comfortable"){const t=Lt(),e=ze[i]||ze.comfortable;return t==="mobile"?Math.max(e,ze.minimum):e}function lt(i,t){let e;return function(...a){const n=()=>{clearTimeout(e),i(...a)};clearTimeout(e),e=setTimeout(n,t)}}function Ot(i,t){let e;return function(...a){e||(i.apply(this,a),e=!0,setTimeout(()=>e=!1,t))}}function $t(){if(typeof window>"u")return{top:0,right:0,bottom:0,left:0};const i=getComputedStyle(document.documentElement);return{top:parseInt(i.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(i.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(i.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(i.getPropertyValue("env(safe-area-inset-left)"))||0}}function Pt(){if(!it())return;let i=window.innerHeight;const t=()=>{const e=window.innerHeight;i-e>150?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")};return window.addEventListener("resize",lt(t,100)),()=>{window.removeEventListener("resize",t),document.body.classList.remove("keyboard-visible")}}const K=w(0),Xe=w(0),et=w("portrait");function $e(){const i=()=>{typeof window<"u"&&(K.value=window.innerWidth,Xe.value=window.innerHeight,et.value=window.innerWidth>window.innerHeight?"landscape":"portrait")};i();const t=h(()=>K.value>=Y.sm),e=h(()=>K.value>=Y.md),o=h(()=>K.value>=Y.lg),a=h(()=>K.value>=Y.xl),n=h(()=>K.value>=Y["2xl"]),u=h(()=>K.value<Y.sm),f=h(()=>K.value>=Y.sm&&K.value<Y.lg),v=h(()=>K.value>=Y.lg),b=h(()=>K.value>=Y["2xl"]?"2xl":K.value>=Y.xl?"xl":K.value>=Y.lg?"lg":K.value>=Y.md?"md":K.value>=Y.sm?"sm":"xs"),C=h(()=>u.value?"mobile":f.value?"tablet":"desktop"),E=h(()=>it()),k=h(()=>typeof window>"u"?1:window.devicePixelRatio||1),A=h(()=>k.value>1),B=h(()=>$t()),M=w(!1);let P=null,d=null;const c=T=>K.value>=Y[T],s=T=>{const F=Object.keys(Y),x=F.indexOf(T);if(x===-1)return!1;const y=Y[T],z=F[x+1],ne=z?Y[z]-1:1/0;return K.value>=y&&K.value<=ne},l=T=>K.value<Y[T],g=T=>{const F=Object.keys(Y).sort((x,y)=>Y[y]-Y[x]);for(const x of F)if(K.value>=Y[x]&&T[x]!==void 0)return T[x];return T.xs||T[Object.keys(T)[0]]},H=T=>g(T),D=()=>({sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"})[b.value]||"100%",J=T=>g(T),I=(T,F="up")=>{const x=Y[T];if(!x)return"";switch(F){case"up":return`(min-width: ${x}px)`;case"down":return`(max-width: ${x-1}px)`;case"only":const y=Object.keys(Y).find(ne=>Y[ne]>x),z=y?Y[y]-1:9999;return`(min-width: ${x}px) and (max-width: ${z}px)`;default:return`(min-width: ${x}px)`}};let L;const j=()=>{clearTimeout(L),L=setTimeout(i,100)},U=(T="comfortable")=>Bt(T),O=T=>g(T,K.value);te(()=>{if(i(),typeof window<"u"){window.addEventListener("resize",j),window.addEventListener("orientationchange",i),P=Pt();const T=()=>{M.value=document.body.classList.contains("keyboard-visible")};d=new MutationObserver(T),d.observe(document.body,{attributes:!0,attributeFilter:["class"]})}}),re(()=>{typeof window<"u"&&(window.removeEventListener("resize",j),window.removeEventListener("orientationchange",i)),clearTimeout(L),P&&typeof P=="function"&&P(),d&&d.disconnect()});const _=()=>{};return{windowWidth:h(()=>K.value),windowHeight:h(()=>Xe.value),orientation:h(()=>et.value),isSmUp:t,isMdUp:e,isLgUp:o,isXlUp:a,is2XlUp:n,isMobile:u,isTablet:f,isDesktop:v,isTouchDevice:E,isHighDensity:A,currentBreakpoint:b,deviceType:C,pixelRatio:k,safeAreaInsets:B,isKeyboardVisible:h(()=>M.value),isBreakpoint:c,isBreakpointOnly:s,isBreakpointDown:l,getResponsiveValue:g,getGridColumns:H,getContainerMaxWidth:D,getResponsiveSpacing:J,createMediaQuery:I,getOptimalTouchSize:U,getResponsiveValueFromConfig:O,debugResponsive:_,breakpoints:h(()=>Y)}}const Ee=1024,tt=150,ot=200,se=w(0),Se=w(0),Ie=w(!1),Be=w(null),Ne=w([]),Re=w("portrait"),Vt=h(()=>Re.value==="landscape");function ct(){const i=h(()=>se.value>=Ee),t=h(()=>se.value<Ee),e=h(()=>i.value?"desktop":"mobile"),o=h(()=>Be.value?Be.value.mode!==e.value:!1),a=w({currentRoute:null,userPreferences:{},navigationState:{},scrollPosition:0,timestamp:null}),n=()=>{if(typeof window>"u")return;const c=window.innerWidth,s=window.innerHeight,l=c>s?"landscape":"portrait";se.value!==0&&(Be.value={width:se.value,height:Se.value,mode:e.value,orientation:Re.value,timestamp:Date.now()}),se.value=c,Se.value=s,Re.value=l};n();const u=lt(()=>{n()},tt),f=Ot(()=>{typeof window<"u"&&(se.value=window.innerWidth,Se.value=window.innerHeight)},16),v=(c={})=>{const s={currentRoute:window.location.pathname,scrollPosition:window.scrollY||0,timestamp:Date.now(),breakpoint:se.value,navigationMode:e.value,...c};return a.value=s,Ne.value.unshift(s),Ne.value.length>5&&(Ne.value=Ne.value.slice(0,5)),s},b=()=>{if(!a.value.timestamp)return null;try{return a.value.scrollPosition&&window.scrollTo(0,a.value.scrollPosition),a.value}catch(c){return console.error("[BreakpointManager] Error restoring state:",c),null}},C=async(c,s)=>{if(Ie.value){console.warn("[BreakpointManager] Transition already in progress, skipping");return}Ie.value=!0;try{const l=v({fromMode:c,toMode:s,transitionReason:"breakpoint_change"});return await Ue(),await new Promise(g=>setTimeout(g,ot)),b(),l}catch(l){throw console.error("[BreakpointManager] Transition error:",l),l}finally{Ie.value=!1}},E=()=>{v({reason:"device_rotation"}),setTimeout(()=>{n(),b()},100)},k=()=>{v({reason:"browser_zoom"}),n()},A=()=>{if(typeof window>"u")return!1;const c=window.innerWidth,s=se.value,l=Math.abs(c-s);return l>10?(console.warn("[BreakpointManager] Breakpoint conflict detected:",{actual:c,reported:s,difference:l}),n(),!0):!1},B=(c=se.value)=>Math.abs(c-Ee)<5,M=(c=se.value)=>c-Ee,P=()=>({currentWidth:se.value,currentHeight:Se.value,navigationBreakpoint:Ee,navigationMode:e.value,isTransitioning:Ie.value,orientation:Re.value,isExactBreakpoint:B(),breakpointDistance:M(),hasChanged:o.value,previousState:Be.value}),d=()=>{};return ge(e,async(c,s)=>{if(s&&c!==s)try{await C(s,c)}catch(l){console.error("[BreakpointManager] Failed to execute transition:",l)}},{immediate:!1}),te(()=>{if(n(),typeof window<"u"){window.addEventListener("resize",u),window.addEventListener("resize",f),window.addEventListener("orientationchange",E);let c=window.devicePixelRatio;const s=setInterval(()=>{window.devicePixelRatio!==c&&(c=window.devicePixelRatio,k())},500);re(()=>{window.removeEventListener("resize",u),window.removeEventListener("resize",f),window.removeEventListener("orientationchange",E),clearInterval(s)})}}),{windowWidth:h(()=>se.value),windowHeight:h(()=>Se.value),navigationMode:e,isDesktopBreakpoint:i,isMobileBreakpoint:t,isTransitioning:h(()=>Ie.value),hasBreakpointChanged:o,orientation:h(()=>Re.value),isLandscape:Vt,preservedState:h(()=>a.value),stateHistory:h(()=>Ne.value),preserveCurrentState:v,restorePreservedState:b,isExactBreakpoint:B,getBreakpointDistance:M,getBreakpointInfo:P,detectBreakpointConflicts:A,debugBreakpointManager:d,NAVIGATION_BREAKPOINT:Ee,DEBOUNCE_DELAY:tt,TRANSITION_DELAY:ot}}const ye=w("light"),be=w("light"),xe=w(!1),Te={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Pe(){const i=h(()=>xe.value?be.value:ye.value),t=h(()=>Te[i.value]),e=h(()=>i.value==="dark"),o=h(()=>i.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(l){return console.warn("Failed to detect system theme:",l),"light"}},n=(l,g=!1)=>{try{const D={theme:k(l)?l:"light",useSystem:!!g,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(D))}catch(H){console.warn("Failed to save theme preference:",H);try{localStorage.removeItem("theme-preference")}catch(D){console.warn("Failed to clear corrupted theme preference:",D)}}},u=l=>{if(!(typeof document>"u"))try{const g=document.documentElement,H=k(l)?l:"light";g.classList.remove("theme-light","theme-dark"),g.classList.add(`theme-${H}`),f(H);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:H,config:Te[H]}}))}catch(D){console.warn("Failed to dispatch theme change event:",D)}}catch(g){console.error("Failed to apply theme:",g);try{const H=document.documentElement;H.classList.remove("theme-light","theme-dark"),H.classList.add("theme-light"),f("light")}catch(H){console.error("Failed to apply fallback theme:",H)}}},f=l=>{if(!(typeof document>"u"))try{const g=document.documentElement;l==="dark"?(g.style.setProperty("--color-neutral-50","#0a0a0a"),g.style.setProperty("--color-neutral-100","#111827"),g.style.setProperty("--color-neutral-200","#262626"),g.style.setProperty("--color-neutral-300","#404040"),g.style.setProperty("--color-neutral-400","#525252"),g.style.setProperty("--color-neutral-500","#6b7280"),g.style.setProperty("--color-neutral-600","#a3a3a3"),g.style.setProperty("--color-neutral-700","#d4d4d4"),g.style.setProperty("--color-neutral-800","#e5e5e5"),g.style.setProperty("--color-neutral-900","#fafafa"),g.style.setProperty("--color-neutral-950","#ffffff")):(g.style.setProperty("--color-neutral-50","#fafafa"),g.style.setProperty("--color-neutral-100","#f5f5f5"),g.style.setProperty("--color-neutral-200","#e5e5e5"),g.style.setProperty("--color-neutral-300","#d4d4d4"),g.style.setProperty("--color-neutral-400","#a3a3a3"),g.style.setProperty("--color-neutral-500","#6b7280"),g.style.setProperty("--color-neutral-600","#525252"),g.style.setProperty("--color-neutral-700","#404040"),g.style.setProperty("--color-neutral-800","#262626"),g.style.setProperty("--color-neutral-900","#111827"),g.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(g){console.warn("Failed to update theme properties:",g)}},v=l=>{u(l)},b=l=>{if(!Te[l]){console.warn(`Theme "${l}" not found`);return}ye.value=l,xe.value=!1,n(l,!1),v(l)},C=()=>{xe.value=!0;const l=a();be.value=l,n(l,!0),v(l)},E=()=>{const l=i.value==="light"?"dark":"light";b(l)},k=l=>Te.hasOwnProperty(l),A=()=>Object.values(Te),B=()=>{},M=()=>{const l=[];if(k(ye.value)||l.push(`Invalid current theme: ${ye.value}`),k(be.value)||l.push(`Invalid system theme: ${be.value}`),k(i.value)||l.push(`Invalid active theme: ${i.value}`),typeof document<"u"){const g=document.documentElement,H=g.classList.contains("theme-light"),D=g.classList.contains("theme-dark");!H&&!D&&l.push("No theme class found on document root"),H&&D&&l.push("Multiple theme classes found on document root");const J=`theme-${i.value}`;g.classList.contains(J)||l.push(`Expected theme class ${J} not found on document root`)}return{isValid:l.length===0,issues:l}},P=()=>{if(!(typeof document>"u"))try{const l=document.documentElement;return["theme-light","theme-dark"].forEach(H=>{l.classList.remove(H)}),!0}catch(l){return console.warn("Failed to cleanup theme classes:",l),!1}},d=()=>{try{ye.value="light",be.value=a(),xe.value=!1;try{localStorage.removeItem("theme-preference")}catch(l){console.warn("Failed to clear theme preference from localStorage:",l)}return u("light"),!0}catch(l){return console.error("Failed to reset theme to default:",l),!1}},c=()=>{console.warn("Attempting theme system recovery...");try{if(P(),d())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(l){console.error("Theme system recovery failed:",l);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(g){return console.error("Last resort theme recovery failed:",g),!1}}},s=()=>{try{ye.value="light",be.value="light",xe.value=!1;try{localStorage.removeItem("theme-preference")}catch(l){console.warn("Failed to clear theme preference:",l)}if(typeof document<"u"){const l=document.documentElement;l.classList.remove("theme-light","theme-dark","dark","light"),l.classList.add("theme-light"),l.style.setProperty("--color-neutral-50","#fafafa"),l.style.setProperty("--color-neutral-100","#f5f5f5"),l.style.setProperty("--color-neutral-200","#e5e5e5"),l.style.setProperty("--color-neutral-300","#d4d4d4"),l.style.setProperty("--color-neutral-400","#a3a3a3"),l.style.setProperty("--color-neutral-500","#6b7280"),l.style.setProperty("--color-neutral-600","#525252"),l.style.setProperty("--color-neutral-700","#404040"),l.style.setProperty("--color-neutral-800","#262626"),l.style.setProperty("--color-neutral-900","#111827"),l.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(l){console.error("Theme initialization failed:",l);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(g){console.error("Emergency theme fallback failed:",g)}return null}};return te(()=>{s()}),ge(i,l=>{v(l)}),{currentTheme:h(()=>ye.value),systemTheme:h(()=>be.value),activeTheme:i,themeConfig:t,isDark:e,isLight:o,isSystemThemePreferred:h(()=>xe.value),setTheme:b,toggleTheme:E,useSystemTheme:C,validateTheme:k,getAvailableThemes:A,debugThemeState:B,initializeTheme:s,validateThemeState:M,cleanupThemeClasses:P,resetThemeToDefault:d,recoverThemeSystem:c,cleanupAndApplyTheme:u,themes:h(()=>Te)}}const Ft=["data-sidebar-id"],zt={key:0,class:"flex-1 min-w-0"},Ht=["aria-label"],Gt={class:"flex-1 overflow-y-auto py-3 scrollbar-hide"},jt={key:0,class:"mb-1"},Ut=["onClick","title"],Wt={class:"flex items-center"},Yt={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Kt={key:2,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={key:0,class:"truncate"},Zt={key:0,class:"mt-1 ml-6 space-y-0.5"},Jt=["onClick"],Xt={class:"flex-shrink-0 w-5 h-5 flex items-center justify-center mr-3"},eo={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},to={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oo={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},no={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ao={key:4,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ro={key:5,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},so={key:6,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},io={key:7,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lo={class:"truncate"},co=["onClick","title"],uo={key:0,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},vo={key:1,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},mo={key:2,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},ho={key:3,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},go={key:4,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},po={key:5,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},fo={key:6,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},yo={key:7,class:"w-5 h-5 max-w-5 max-h-5",fill:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},bo={key:8,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},wo={key:9,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},ko={key:10,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Eo={key:11,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},xo={key:12,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},To={key:13,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Co={key:14,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},_o={key:0,class:"font-medium truncate"},Ao={key:1,class:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-blue-600 rounded-l"},So=["title"],Io={key:0,class:"font-medium"},No=["title"],Ro={key:0,class:"font-medium"},Do="HR Management",Mo="Streamline your workforce",Lo={__name:"SidebarNavigation",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1}},emits:["navigate","collapse-change"],setup(i,{emit:t}){const e=i,o=t,{roles:a}=pe(),{isDark:n}=Pe(),u=w(!1),f=w(null),v=w(e.initiallyCollapsed),b=w(["competency-section"]),C=()=>{typeof window<"u"&&(u.value=window.innerWidth>=1024)},E=h(()=>{const c=a.value,s=[];return s.push({id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard"}),s.push({id:"my-profile",label:"My Profile",icon:"user",route:"profile.edit"}),(c.includes("Admin")||c.includes("Manager"))&&s.push({id:"employees",label:"Employee Management",icon:"users",route:"employees.index"}),s.push({id:"attendance",label:"Time Tracking",icon:"clock",route:"attendances.index"}),s.push({id:"leaves",label:"Leave Management",icon:"calendar",route:"leaves.index"}),(c.includes("Admin")||c.includes("HR"))&&s.push({id:"leave-types",label:"Leave Policies",icon:"clipboard-document-list",route:"leave-types.index"}),s.push({id:"feedbacks",label:"Feedback System",icon:"chat",route:"feedbacks.index"}),s.push({id:"work-reports",label:"Work Reports",icon:"document-text",route:"work-reports.index"}),s.push({id:"leaderboard",label:"Performance Leaderboard",icon:"trophy",route:"work-reports.leaderboard"}),(c.includes("Admin")||c.includes("Manager"))&&s.push({id:"organizational-analytics",label:"Organizational Analytics",icon:"chart-bar-square",route:"organizational-analytics.index"}),s.push({id:"competency-section",label:"Competency Management",icon:"academic-cap",type:"accordion",children:[{id:"my-assessments",label:"My Assessments",icon:"clipboard-document-check",route:"competency-assessments.my-assessments"},...c.includes("Admin")||c.includes("Manager")?[{id:"assessment-dashboard",label:"Assessment Dashboard",icon:"chart-pie",route:"assessment-dashboard"},{id:"all-assessments",label:"All Assessments",icon:"clipboard-document-list",route:"competency-assessments.index"},{id:"pending-assessments",label:"Pending Assessments",icon:"clipboard-document-check",route:"competency-assessments.pending"}]:[],...c.includes("Admin")?[{id:"assessment-cycles",label:"Assessment Cycles",icon:"calendar",route:"assessment-cycle-manager"},{id:"competency-setup",label:"Competency Setup",icon:"cog-6-tooth",route:"competencies.index"},{id:"competency-reports",label:"Reports & Analytics",icon:"chart-bar",route:"competency-analytics.reports"}]:[]]}),(c.includes("Admin")||c.includes("Manager"))&&s.push({id:"approvals-section",label:"Approvals",icon:"check-circle",type:"accordion",children:[{id:"pending-timesheets",label:"Timesheet Approvals",icon:"clock",route:"timesheets.pending-approvals"}]}),s}),k=c=>{if(!(c!=null&&c.route)||!e.currentRoute)return!1;if(c.route===e.currentRoute)return!0;const s=c.route.split("."),l=e.currentRoute.split(".");return s[0]===l[0]},A=()=>{v.value=!v.value,localStorage.setItem("sidebar-collapsed",v.value.toString()),o("collapse-change",v.value)},B=c=>{if(console.log("Navigation clicked:",c),o("navigate",{route:c.route,item:c}),c.route)try{if(console.log("Attempting navigation to:",c.route),typeof window<"u"&&window.route)we.visit(window.route(c.route));else{const s=`/${c.route.replace(".","/")}`;console.log("Navigating to URL:",s),we.visit(s)}}catch(s){console.warn(`Navigation failed for route: ${c.route}`,s)}},M=()=>{try{typeof window<"u"&&window.route?we.post(window.route("logout")):we.post("/logout")}catch(c){console.warn("Logout navigation failed:",c),window.location.href="/logout"}},P=c=>{const s=b.value.indexOf(c);s>-1?b.value.splice(s,1):b.value.push(c)},d=w(`sidebar-${Math.random().toString(36).substr(2,9)}`);return te(()=>{C(),console.log("[SidebarNavigation] Component mounted, isDesktop:",u.value,"ID:",d.value),W.registerComponent(d.value,"desktop"),window.addEventListener("resize",C);const c=localStorage.getItem("sidebar-collapsed");c!==null&&(v.value=c==="true"),o("collapse-change",v.value)}),re(()=>{typeof window<"u"&&window.removeEventListener("resize",C),W.unregisterComponent(d.value)}),(c,s)=>u.value?(m(),p("nav",{key:0,ref_key:"sidebarRef",ref:f,class:R(["sidebar-navigation flex flex-col h-screen fixed left-0 top-0 z-40 transition-all duration-300 ease-out",N(n)?"bg-gray-900 border-r border-gray-800":"bg-white border-r border-gray-200",{"w-64":!v.value,"w-16":v.value}]),role:"navigation","aria-label":"Main navigation","data-debug":"sidebar-navigation-component","data-sidebar-id":Math.random().toString(36).substr(2,9)},[r("div",{class:R(["flex items-center justify-between p-4 border-b",N(n)?"border-gray-800":"border-gray-200"])},[v.value?G("",!0):(m(),p("div",zt,[r("h1",{class:R(["text-lg font-semibold truncate",N(n)?"text-white":"text-gray-900"])},$(Do),2),r("p",{class:R(["text-sm truncate",N(n)?"text-gray-400":"text-gray-500"])},$(Mo),2)])),r("button",{onClick:A,class:R(["p-2 rounded-lg transition-colors",N(n)?"text-gray-400 hover:text-white hover:bg-gray-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"]),"aria-label":v.value?"Expand sidebar":"Collapse sidebar"},[(m(),p("svg",{class:R(["w-5 h-5 transition-transform duration-200",{"rotate-180":v.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[1]||(s[1]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)]),2))],10,Ht)],2),r("div",Gt,[r("div",{class:R(["space-y-0.5",{"px-3":!v.value,"px-2":v.value}])},[(m(!0),p(ve,null,me(E.value,l=>(m(),p("div",{key:l.id},[l.type==="accordion"?(m(),p("div",jt,[r("button",{onClick:g=>P(l.id),class:R(["group w-full flex items-center justify-between text-left transition-all duration-200","rounded-lg",{"p-2.5":v.value,"px-3 py-1.5":!v.value,"hover:bg-gray-50":!N(n),"hover:bg-gray-800":N(n),"text-gray-700 font-medium":!N(n),"text-gray-300 font-medium":N(n)}]),title:v.value?l.label:""},[r("div",Wt,[r("div",{class:R(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},[l.icon==="academic-cap"?(m(),p("svg",Yt,s[2]||(s[2]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l9-5-9-5-9 5 9 5z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l6.16-3.422A12.083 12.083 0 0112 21a12.083 12.083 0 01-6.16-10.422L12 14z"},null,-1)]))):l.icon==="check-circle"?(m(),p("svg",qt,s[3]||(s[3]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(m(),p("svg",Kt,s[4]||(s[4]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?G("",!0):(m(),p("span",Qt,$(l.label),1))]),v.value?G("",!0):(m(),p("svg",{key:0,class:R(["w-4 h-4 transition-transform duration-200",{"rotate-90":b.value.includes(l.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[5]||(s[5]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],10,Ut),!v.value&&b.value.includes(l.id)?(m(),p("div",Zt,[(m(!0),p(ve,null,me(l.children,g=>(m(),p("button",{key:g.id,onClick:()=>B(g),class:R(["group w-full flex items-center text-left transition-all duration-200","rounded-md px-3 py-1.5 text-sm",{"bg-blue-50 text-blue-700":k(g)&&!N(n),"bg-blue-900/20 text-blue-400":k(g)&&N(n),"hover:bg-gray-50":!k(g)&&!N(n),"hover:bg-gray-800":!k(g)&&N(n),"text-gray-600":!k(g)&&!N(n),"text-gray-400":!k(g)&&N(n)}])},[r("div",Xt,[g.icon==="chart-pie"?(m(),p("svg",eo,s[6]||(s[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"},null,-1)]))):g.icon==="clipboard-document-check"?(m(),p("svg",to,s[7]||(s[7]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7l2 2 4-4"},null,-1)]))):g.icon==="clipboard-document-list"?(m(),p("svg",oo,s[8]||(s[8]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):g.icon==="calendar"?(m(),p("svg",no,s[9]||(s[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):g.icon==="cog-6-tooth"?(m(),p("svg",ao,s[10]||(s[10]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]))):g.icon==="chart-bar"?(m(),p("svg",ro,s[11]||(s[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):g.icon==="clock"?(m(),p("svg",so,s[12]||(s[12]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(m(),p("svg",io,s[13]||(s[13]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))]),r("span",lo,$(g.label),1)],10,Jt))),128))])):G("",!0)])):(m(),p("button",{key:1,onClick:()=>B(l),class:R(["group w-full flex items-center text-left transition-all duration-200 relative","rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-1.5":!v.value,"bg-blue-50 text-blue-700":k(l)&&!N(n),"bg-blue-900/20 text-blue-400":k(l)&&N(n),"hover:bg-gray-50":!k(l)&&!N(n),"hover:bg-gray-800":!k(l)&&N(n),"text-gray-700":!k(l)&&!N(n),"text-gray-300":!k(l)&&N(n)}]),title:v.value?l.label:""},[r("div",{class:R(["flex-shrink-0 w-6 h-6 flex items-center justify-center overflow-hidden",{"mr-3":!v.value}]),style:{"min-width":"24px","max-width":"24px","min-height":"24px","max-height":"24px"}},[l.icon==="home"?(m(),p("svg",uo,s[14]||(s[14]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)]))):l.icon==="users"?(m(),p("svg",vo,s[15]||(s[15]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):l.icon==="clock"?(m(),p("svg",mo,s[16]||(s[16]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):l.icon==="calendar"?(m(),p("svg",ho,s[17]||(s[17]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):l.icon==="folder"?(m(),p("svg",go,s[18]||(s[18]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):l.icon==="chat"?(m(),p("svg",po,s[19]||(s[19]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)]))):l.icon==="document-text"?(m(),p("svg",fo,s[20]||(s[20]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):l.icon==="trophy"?(m(),p("svg",yo,s[21]||(s[21]=[r("path",{d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h9.284a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Z"},null,-1)]))):l.icon==="check-circle"?(m(),p("svg",bo,s[22]||(s[22]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):l.icon==="academic-cap"?(m(),p("svg",wo,s[23]||(s[23]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l9-5-9-5-9 5 9 5z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l6.16-3.422A12.083 12.083 0 0112 21a12.083 12.083 0 01-6.16-10.422L12 14z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.06 10.538A12.04 12.04 0 0112 3.5a12.04 12.04 0 018.94 7.038"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 10.538V14a9 9 0 01-9 8 9 9 0 01-9-8v-3.462"},null,-1)]))):l.icon==="chart-pie"?(m(),p("svg",ko,s[24]||(s[24]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"},null,-1)]))):l.icon==="chart-bar"?(m(),p("svg",Eo,s[25]||(s[25]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):l.icon==="chart-bar-square"?(m(),p("svg",xo,s[26]||(s[26]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"},null,-1)]))):l.icon==="clipboard-document-check"?(m(),p("svg",To,s[27]||(s[27]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7l2 2 4-4"},null,-1)]))):(m(),p("svg",Co,s[28]||(s[28]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?G("",!0):(m(),p("span",_o,$(l.label),1)),k(l)?(m(),p("div",Ao)):G("",!0)],10,co))]))),128))],2)]),r("div",{class:R(["p-2 border-t space-y-1",N(n)?"border-gray-800":"border-gray-200"])},[r("button",{onClick:s[0]||(s[0]=()=>B({route:"profile.edit",label:"Settings"})),class:R(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-1.5":!v.value},N(n)?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"]),title:v.value?"Settings":""},[r("div",{class:R(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},s[29]||(s[29]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),2),v.value?G("",!0):(m(),p("span",Io,"Settings"))],10,So),r("button",{onClick:M,class:R(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-1.5":!v.value},"text-red-600 hover:bg-red-50 hover:text-red-700"]),title:v.value?"Logout":""},[r("div",{class:R(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},s[30]||(s[30]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)]),2),v.value?G("",!0):(m(),p("span",Ro,"Logout"))],10,No)],2)],10,Ft)):G("",!0)}},nt=le(Lo,[["__scopeId","data-v-94629173"]]);function Bo(i,t){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function Oo(i,t){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const $o={class:"mobile-navigation-item"},Po={class:"flex-1"},Vo={class:"flex-1"},Fo={__name:"MobileNavigationItem",props:{item:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]},isChild:{type:Boolean,default:!1}},emits:["navigate"],setup(i,{emit:t}){const e=i,o=t,a=h(()=>{if(!e.item.route)return!1;if(e.item.exact)return e.currentRoute===e.item.route;const f=e.item.route.split(".")[0];return e.currentRoute.startsWith(f)});h(()=>!e.item.roles||e.item.roles.length===0?!0:e.item.roles.some(f=>e.userRoles.includes(f)));const n=f=>{const v="inline-flex items-center justify-center";switch(f){case"success":return`${v} bg-green-100 text-green-800`;case"warning":return`${v} bg-yellow-100 text-yellow-800`;case"error":return`${v} bg-red-100 text-red-800`;case"info":return`${v} bg-blue-100 text-blue-800`;default:return`${v} bg-neutral-100 text-neutral-800`}},u=f=>{o("navigate",{item:e.item,route:e.item.route,event:f}),"vibrate"in navigator&&navigator.vibrate(10)};return(f,v)=>(m(),p("div",$o,[i.item.route?(m(),Z(N(De),{key:0,href:f.route(i.item.route),class:R(["nav-link flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 touch-manipulation",[a.value?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 border-l-4 border-primary-500 dark:border-primary-400":"text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100",i.isChild?"text-sm":"text-base"]]),style:{"min-height":"44px"},onClick:u,"aria-label":`Navigate to ${i.item.label}`},{default:Q(()=>[V(ee,{name:i.item.icon,size:i.isChild?"sm":"md",class:R(["flex-shrink-0 mr-3",a.value?"text-primary-600 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500"])},null,8,["name","size","class"]),r("span",Po,$(i.item.label),1),i.item.badge?(m(),p("span",{key:0,class:R(["ml-2 px-2 py-1 text-xs font-medium rounded-full",n(i.item.badge.type)])},$(i.item.badge.count),3)):G("",!0),i.item.external?(m(),Z(ee,{key:1,name:"external-link",size:"sm",class:"ml-2 text-neutral-400 dark:text-neutral-500"})):G("",!0)]),_:1},8,["href","class","aria-label"])):(m(),p("div",{key:1,class:R(["nav-item flex items-center px-3 py-3 text-sm font-medium text-neutral-500 dark:text-neutral-400",i.isChild?"text-sm":"text-base"]),style:{"min-height":"44px"}},[V(ee,{name:i.item.icon,size:i.isChild?"sm":"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name","size"]),r("span",Vo,$(i.item.label),1)],2))]))}},at=le(Fo,[["__scopeId","data-v-94500539"]]),zo={class:"mobile-navigation-section"},Ho={key:0,class:"section-header"},Go=["aria-expanded","aria-label"],jo={class:"flex items-center"},Uo={key:0,class:"section-children overflow-hidden"},Wo={class:"ml-6 mt-2 space-y-1"},Yo={__name:"MobileNavigationSection",props:{section:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]}},emits:["navigate"],setup(i,{emit:t}){const e=i,o=t,a=w(!1),n=h(()=>e.section.children?e.section.children.filter(b=>!b.roles||b.roles.length===0?!0:b.roles.some(C=>e.userRoles.includes(C))):[]),u=h(()=>n.value.some(b=>b.route?e.currentRoute.startsWith(b.route.split(".")[0]):!1)),f=()=>{a.value=!a.value;const b=`mobile-nav-section-${e.section.id}`;localStorage.setItem(b,a.value.toString())},v=b=>{o("navigate",b)};return te(()=>{if(u.value)a.value=!0;else{const b=`mobile-nav-section-${e.section.id}`,C=localStorage.getItem(b);C!==null&&(a.value=C==="true")}}),(b,C)=>(m(),p("div",zo,[i.section.children&&i.section.children.length>0?(m(),p("div",Ho,[r("button",{onClick:f,class:"w-full flex items-center justify-between px-3 py-3 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors duration-200 touch-manipulation",style:{"min-height":"44px"},"aria-expanded":a.value,"aria-label":`Toggle ${i.section.label} section`},[r("div",jo,[V(ee,{name:i.section.icon,size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name"]),r("span",null,$(i.section.label),1)]),V(ee,{name:"chevron-down",size:"sm",class:R(["text-neutral-400 dark:text-neutral-500 transition-transform duration-200",{"rotate-180":a.value}])},null,8,["class"])],8,Go)])):G("",!0),!i.section.children||i.section.children.length===0?(m(),Z(at,{key:1,item:i.section,"current-route":i.currentRoute,"user-roles":i.userRoles,onNavigate:v},null,8,["item","current-route","user-roles"])):G("",!0),V(Me,{name:"section-expand","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-96 opacity-100","leave-from-class":"max-h-96 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:Q(()=>[i.section.children&&i.section.children.length>0&&a.value?(m(),p("div",Uo,[r("div",Wo,[(m(!0),p(ve,null,me(n.value,E=>(m(),Z(at,{key:E.id,item:E,"current-route":i.currentRoute,"user-roles":i.userRoles,"is-child":!0,onNavigate:v},null,8,["item","current-route","user-roles"]))),128))])])):G("",!0)]),_:1})]))}},qo=le(Yo,[["__scopeId","data-v-512cc717"]]),Ko={sections:[{id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"],order:1},{id:"my-profile",label:"My Profile",icon:"user",route:"profile.edit",roles:["Admin","Manager","Employee"],order:1.5},{id:"people",label:"People Management",icon:"users",roles:["Admin","Manager"],order:2,children:[{id:"employees",label:"Employees",icon:"user",route:"employees.index",roles:["Admin","Manager"]},{id:"departments",label:"Departments",icon:"building-office",route:"departments.index",roles:["Admin"]}]},{id:"time",label:"Time Management",icon:"clock",roles:["Admin","Manager","Employee"],order:3,children:[{id:"attendance",label:"Attendance",icon:"calendar-check",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"timesheets",label:"Timesheets",icon:"document-text",route:"timesheets.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar-x",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals",roles:["Admin","Manager"]}]},{id:"projects",label:"Project Management",icon:"folder-open",roles:["Admin","Manager","Employee"],order:4,children:[{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"tasks",label:"Tasks",icon:"clipboard",route:"tasks.index",roles:["Admin","Manager","Employee"]}]},{id:"communication",label:"Communication",icon:"chat",roles:["Admin","Manager","Employee"],order:5,children:[{id:"feedbacks",label:"Feedbacks",icon:"message-square",route:"feedbacks.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Notifications",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}]},{id:"competency",label:"Competency",icon:"academic-cap",roles:["Admin"],order:6,children:[{id:"competencies",label:"Competencies",icon:"academic-cap",route:"competencies.index",roles:["Admin"]},{id:"employee-competencies",label:"Assess Employee",icon:"user-check",route:"employee-competencies.index",roles:["Admin"]}]},{id:"settings",label:"Settings",icon:"cog",roles:["Admin"],order:7,children:[{id:"system-settings",label:"System Settings",icon:"cog",route:"settings.index",roles:["Admin"]},{id:"user-management",label:"User Management",icon:"users",route:"users.index",roles:["Admin"]}]}]};function Qo(i=[]){return!Array.isArray(i)||i.length===0?[]:Ko.sections.filter(t=>t.roles.some(e=>i.includes(e))).map(t=>{if(t.children){const e=t.children.filter(o=>o.roles.some(a=>i.includes(a)));return e.length>0||t.route?{...t,children:e}:null}return t}).filter(Boolean).sort((t,e)=>(t.order||999)-(e.order||999))}const Zo={key:0,class:"mobile-navigation"},Jo={class:"mobile-top-bar fixed top-0 left-0 right-0 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-4 py-3 z-50 shadow-sm"},Xo={class:"flex items-center justify-between"},en=["aria-expanded"],tn={class:"flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-label":"User menu"},on={class:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},nn={class:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700"},an={class:"text-sm font-medium text-neutral-900 dark:text-neutral-100"},rn={class:"text-xs text-neutral-500 dark:text-neutral-400"},sn={class:"drawer-header p-4 border-b border-neutral-200 dark:border-neutral-700"},ln={class:"flex items-center space-x-3"},cn={class:"h-12 w-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},un={class:"flex-1 min-w-0"},dn={class:"text-base font-medium text-neutral-900 dark:text-neutral-100 truncate"},vn={class:"text-sm text-neutral-500 dark:text-neutral-400 truncate"},mn={class:"drawer-navigation p-4"},hn={class:"space-y-2"},gn={class:"drawer-footer border-t border-neutral-200 dark:border-neutral-700 p-4 mt-auto"},pn={class:"space-y-2"},fn={class:"ml-3"},yn={type:"submit",class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Logout"},bn={class:"mobile-bottom-nav fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-700 px-4 py-2 safe-area-pb"},wn={class:"flex items-center justify-around"},kn={class:"text-xs font-medium"},En={__name:"MobileNavigation",props:{currentRoute:{type:String,required:!0}},emits:["navigate","mobile-drawer-toggle"],setup(i,{emit:t}){const e=i,o=t,{roles:a,getUserProperty:n}=pe(),{isDarkMode:u,toggleTheme:f}=Pe(),{isMobile:v}=$e(),b=w(!1),C=w(0),E=w(0),k=w(!1),A=h(()=>n("name","User")),B=h(()=>n("email","")),M=h(()=>{const _=a.value;return _.includes("Admin")?"Administrator":_.includes("Manager")?"Manager":_.includes("Employee")?"Employee":"User"}),P=h(()=>Qo(a.value)),d=h(()=>[{id:"dashboard",label:"Home",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"]},{id:"attendance",label:"Time",icon:"clock",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"my-profile",label:"Profile",icon:"user",route:"profile.edit",roles:["Admin","Manager","Employee"]}].filter(_=>_.roles.some(T=>a.value.includes(T)))),c=()=>{b.value=!b.value,o("mobile-drawer-toggle",b.value),b.value?document.body.style.overflow="hidden":document.body.style.overflow=""},s=()=>{b.value=!1,document.body.style.overflow="",o("mobile-drawer-toggle",!1)},l=_=>e.currentRoute.startsWith(_.split(".")[0]),g=_=>{if(s(),o("navigate",_),_.route)try{const T=route(_.route);if(!T)throw new Error(`Route '${_.route}' not found`);we.visit(T,{onError:F=>{console.error("Navigation error:",F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:new Error("Navigation failed with errors"),route:_.route,context:"mobile-navigation",errors:F}}))},onException:F=>{console.error("Navigation exception:",F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:F,route:_.route,context:"mobile-navigation"}}))}})}catch(T){console.warn(`Navigation failed for route: ${_.route}`,T),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:T,route:_.route,context:"mobile-navigation"}}))}},H=_=>{try{return route(_)}catch{return console.warn(`Route '${_}' not found, falling back to dashboard`),route("dashboard")}},D=(_,T)=>{try{if(!route(_.route)){T.preventDefault(),console.warn(`Route '${_.route}' not found`);return}}catch(F){T.preventDefault(),console.warn(`Navigation failed for route: ${_.route}`,F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:F,route:_.route,context:"mobile-bottom-navigation"}}))}},J=()=>{s(),we.post(route("logout"))},I=_=>{C.value=_.touches[0].clientX,k.value=!0},L=_=>{if(!k.value)return;E.value=_.touches[0].clientX,E.value-C.value<-50&&_.preventDefault()},j=_=>{if(!k.value)return;E.value-C.value<-100&&s(),k.value=!1,C.value=0,E.value=0},U=_=>{_.key==="Escape"&&b.value&&s()},O=w(`mobile-${Math.random().toString(36).substr(2,9)}`);return te(()=>{document.addEventListener("keydown",U),W.registerComponent(O.value,"mobile")}),re(()=>{document.removeEventListener("keydown",U),document.body.style.overflow="",W.unregisterComponent(O.value)}),(_,T)=>N(v)?(m(),p("div",Zo,[r("div",Jo,[r("div",Xo,[r("button",{onClick:c,class:"hamburger-button flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-expanded":b.value,"aria-label":"Toggle navigation menu"},[V(ee,{name:b.value?"x":"menu",size:"md",class:"transition-transform duration-200"},null,8,["name"])],8,en),V(N(De),{href:_.route("dashboard"),class:"flex items-center touch-manipulation"},{default:Q(()=>[V(Et,{class:"h-8 w-8"}),T[1]||(T[1]=r("span",{class:"ml-2 text-lg font-semibold text-neutral-900 dark:text-neutral-100"},"HR Management",-1))]),_:1,__:[1]},8,["href"]),V(st,{align:"right",width:"48"},{trigger:Q(()=>[r("button",tn,[r("div",on,[V(ee,{name:"user",size:"sm",class:"text-primary-600 dark:text-primary-400"})])])]),content:Q(()=>[r("div",nn,[r("p",an,$(A.value),1),r("p",rn,$(B.value),1)]),V(Ce,{href:_.route("profile.edit")},{default:Q(()=>T[2]||(T[2]=[de(" Profile Settings ")])),_:1,__:[2]},8,["href"]),V(Ce,{href:_.route("logout"),method:"post",as:"button"},{default:Q(()=>T[3]||(T[3]=[de(" Log Out ")])),_:1,__:[3]},8,["href"])]),_:1})])]),V(Me,{name:"mobile-drawer","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-300 ease-in","enter-from-class":"transform -translate-x-full","enter-to-class":"transform translate-x-0","leave-from-class":"transform translate-x-0","leave-to-class":"transform -translate-x-full"},{default:Q(()=>[b.value?(m(),p("div",{key:0,class:"mobile-drawer fixed inset-y-0 left-0 z-40 w-80 max-w-sm bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-700 shadow-xl overflow-y-auto",onTouchstart:I,onTouchmove:L,onTouchend:j,role:"navigation","aria-label":"Mobile navigation menu"},[r("div",sn,[r("div",ln,[r("div",cn,[V(ee,{name:"user",size:"md",class:"text-primary-600 dark:text-primary-400"})]),r("div",un,[r("p",dn,$(A.value),1),r("p",vn,$(M.value),1)])])]),r("nav",mn,[r("div",hn,[(m(!0),p(ve,null,me(P.value,F=>(m(),Z(qo,{key:F.id,section:F,"current-route":i.currentRoute,"user-roles":N(a),onNavigate:g},null,8,["section","current-route","user-roles"]))),128))])]),r("div",gn,[r("div",pn,[r("button",{onClick:T[0]||(T[0]=(...F)=>N(f)&&N(f)(...F)),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Toggle theme"},[V(ee,{name:N(u)?"sun":"moon",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"},null,8,["name"]),r("span",fn,$(N(u)?"Light Mode":"Dark Mode"),1)]),V(N(De),{href:_.route("profile.edit"),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},onClick:s},{default:Q(()=>[V(ee,{name:"cog",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),T[4]||(T[4]=r("span",{class:"ml-3"},"Settings",-1))]),_:1,__:[4]},8,["href"]),r("form",{onSubmit:rt(J,["prevent"]),class:"w-full"},[r("button",yn,[V(ee,{name:"arrow-left",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),T[5]||(T[5]=r("span",{class:"ml-3"},"Logout",-1))])],32)])])],32)):G("",!0)]),_:1}),V(Me,{name:"mobile-backdrop","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-300 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Q(()=>[b.value?(m(),p("div",{key:0,class:"mobile-backdrop fixed inset-0 z-30 bg-black bg-opacity-50",onClick:s,onTouchstart:s},null,32)):G("",!0)]),_:1}),r("div",bn,[r("div",wn,[(m(!0),p(ve,null,me(d.value,F=>(m(),Z(N(De),{key:F.id,href:H(F.route),class:R(["bottom-nav-item flex flex-col items-center px-2 py-2 rounded-lg transition-colors duration-200 touch-manipulation",{"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":l(F.route),"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800":!l(F.route)}]),style:{"min-height":"44px","min-width":"44px"},onClick:x=>D(F,x),"aria-label":`Navigate to ${F.label}`},{default:Q(()=>[V(ee,{name:F.icon,size:"md",class:"mb-1"},null,8,["name"]),r("span",kn,$(F.label),1)]),_:2},1032,["href","class","onClick","aria-label"]))),128))])])])):G("",!0)}},xn=le(En,[["__scopeId","data-v-8f1e8de2"]]),Tn={class:"fallback-header"},Cn={class:"fallback-logo"},_n={key:0,class:"fallback-error-indicator"},An={class:"fallback-menu",role:"menu"},Sn={class:"fallback-menu-list"},In=["href","onClick"],Nn={class:"fallback-menu-text"},Rn={class:"fallback-actions"},Dn=["disabled"],Mn={key:0,class:"fallback-debug"},Ln={key:0,class:"debug-details"},Bn={class:"debug-section"},On={class:"debug-text"},$n={class:"debug-section"},Pn={class:"debug-code"},Vn={class:"debug-section"},Fn={class:"debug-code"},He=3,zn={__name:"NavigationFallback",props:{fallbackReason:{type:String,default:"Navigation component failed to load"},errorDetails:{type:Object,default:()=>({})},currentRoute:{type:String,default:""},failedNavigationType:{type:String,validator:i=>["desktop","mobile","unknown"].includes(i),default:"unknown"},showErrorIndicator:{type:Boolean,default:!0},showDebugInfo:{type:Boolean,default:!0},onRetry:{type:Function,default:null}},emits:["navigate","retry","reload","fallback-action"],setup(i,{emit:t}){const e=i,o=t,{hasRole:a}=pe(),n=w(!1),u=w(!1),f=w(0),v=!1,b=h(()=>({"navigation-fallback--desktop":e.failedNavigationType==="desktop","navigation-fallback--mobile":e.failedNavigationType==="mobile","navigation-fallback--with-error":e.showErrorIndicator,"navigation-fallback--debug":u.value&&v})),C=h(()=>({currentRoute:e.currentRoute,failedNavigationType:e.failedNavigationType,fallbackReason:e.fallbackReason,retryCount:f.value,timestamp:Date.now(),windowWidth:typeof window<"u"?window.innerWidth:0,userAgent:typeof navigator<"u"?navigator.userAgent:""})),E=h(()=>[{name:"dashboard",label:"Dashboard",icon:"home",href:"/dashboard",route:"dashboard",roles:[]},{name:"employees",label:"Employees",icon:"users",href:"/employees",route:"employees.index",roles:["admin","manager"]},{name:"projects",label:"Projects",icon:"briefcase",href:"/projects",route:"projects.index",roles:[]},{name:"leaves",label:"Leaves",icon:"calendar-days",href:"/leaves",route:"leaves.index",roles:[]},{name:"feedbacks",label:"Feedbacks",icon:"chat-bubble-left-right",href:"/feedbacks",route:"feedbacks.index",roles:[]}].filter(c=>c.roles.length===0?!0:c.roles.some(s=>a(s)))),k=d=>!d||!e.currentRoute?!1:e.currentRoute.startsWith(d),A=(d,c)=>{try{c.preventDefault(),o("navigate",{item:d,route:d.route,href:d.href,source:"fallback"}),we.visit(d.href)}catch(s){console.error("[NAVIGATION FALLBACK] Navigation failed:",s),window.location.href=d.href}},B=async()=>{if(!(n.value||f.value>=He)){n.value=!0,f.value++;try{o("retry",{attempt:f.value,maxRetries:He,failedNavigationType:e.failedNavigationType}),e.onRetry?await e.onRetry():(await new Promise(d=>setTimeout(d,1e3)),window.location.reload())}catch(d){console.error("[NAVIGATION FALLBACK] Retry failed:",d),f.value>=He&&alert("Maximum retry attempts reached. Please reload the page manually.")}finally{n.value=!1}}},M=()=>{o("reload"),window.location.reload()},P=()=>{u.value=!u.value};return te(()=>{o("fallback-action",{action:"activated",reason:e.fallbackReason,failedType:e.failedNavigationType,timestamp:Date.now()}),typeof window<"u"&&window.reportError&&window.reportError({type:"navigation_fallback_activated",reason:e.fallbackReason,failedNavigationType:e.failedNavigationType,errorDetails:e.errorDetails,timestamp:Date.now()})}),re(()=>{o("fallback-action",{action:"deactivated",retryCount:f.value,timestamp:Date.now()})}),(d,c)=>(m(),p("div",{class:R(["navigation-fallback",b.value]),"data-navigation-type":"fallback",role:"navigation","aria-label":"Fallback Navigation"},[r("div",Tn,[r("div",Cn,[V(ee,{name:"building-office",size:"lg",class:"text-primary-600"}),c[0]||(c[0]=r("span",{class:"fallback-title"},"HR Management",-1))]),i.showErrorIndicator?(m(),p("div",_n,[V(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),c[1]||(c[1]=r("span",{class:"sr-only"},"Navigation Error",-1))])):G("",!0)]),r("nav",An,[r("ul",Sn,[(m(!0),p(ve,null,me(E.value,s=>(m(),p("li",{key:s.name,class:"fallback-menu-item"},[r("a",{href:s.href,class:R(["fallback-menu-link",{"fallback-menu-link--active":k(s.route)}]),role:"menuitem",onClick:l=>A(s,l)},[s.icon?(m(),Z(ee,{key:0,name:s.icon,size:"sm",class:"fallback-menu-icon"},null,8,["name"])):G("",!0),r("span",Nn,$(s.label),1)],10,In)]))),128))])]),r("div",Rn,[r("button",{onClick:B,disabled:n.value,class:"fallback-action fallback-action--primary",type:"button"},[n.value?(m(),Z(ee,{key:0,name:"loading",size:"sm",class:"animate-spin mr-2"})):(m(),Z(ee,{key:1,name:"arrow-path",size:"sm",class:"mr-2"})),de(" "+$(n.value?"Retrying...":"Retry Navigation"),1)],8,Dn),r("button",{onClick:M,class:"fallback-action fallback-action--secondary",type:"button"},[V(ee,{name:"arrow-path",size:"sm",class:"mr-2"}),c[2]||(c[2]=de(" Reload Page "))])]),i.showDebugInfo&&v?(m(),p("div",Mn,[r("button",{onClick:P,class:"debug-toggle",type:"button"},[V(ee,{name:"bug-ant",size:"sm",class:"mr-1"}),de(" "+$(u.value?"Hide":"Show")+" Debug Info ",1)]),u.value?(m(),p("div",Ln,[r("div",Bn,[c[3]||(c[3]=r("h4",{class:"debug-heading"},"Fallback Reason",-1)),r("p",On,$(i.fallbackReason),1)]),r("div",$n,[c[4]||(c[4]=r("h4",{class:"debug-heading"},"Error Details",-1)),r("pre",Pn,$(JSON.stringify(i.errorDetails,null,2)),1)]),r("div",Vn,[c[5]||(c[5]=r("h4",{class:"debug-heading"},"Navigation State",-1)),r("pre",Fn,$(JSON.stringify(C.value,null,2)),1)])])):G("",!0)])):G("",!0)],2))}},ut=le(zn,[["__scopeId","data-v-183ff890"]]);function Hn(){const{getAuthError:i,validateAuthState:t}=pe(),e=w([]),o=50,a={CRITICAL:"critical",WARNING:"warning",INFO:"info",DEBUG:"debug"},n={AUTH_DATA:"auth_data",ROLE_CHECK:"role_check",NAVIGATION:"navigation",COMPONENT:"component",NETWORK:"network"},u=(d,c={})=>{const s=new Date().toISOString(),l=i(),g={id:`auth_error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:s,level:c.level||a.WARNING,category:c.category||n.COMPONENT,message:d.message||"Unknown authentication error",error:{name:d.name,message:d.message,stack:d.stack},context:{component:c.component||"Unknown",operation:c.operation||"Unknown",userAgent:navigator.userAgent,url:window.location.href,...c},authState:l,sessionInfo:{hasLocalStorage:typeof localStorage<"u",hasSessionStorage:typeof sessionStorage<"u",cookiesEnabled:navigator.cookieEnabled}};return e.value.unshift(g),e.value.length>o&&(e.value=e.value.slice(0,o)),g},f=(d,c={})=>{const s=u(d,c);return s.level,a.CRITICAL,s},v=(d,c,s={})=>f(d,{...s,category:n.ROLE_CHECK,operation:`checking role: ${c}`,level:a.WARNING}),b=(d,c,s={})=>f(d,{...s,category:n.NAVIGATION,operation:`navigating to: ${c}`,level:a.CRITICAL}),C=(d,c,s={})=>f(d,{...s,category:n.COMPONENT,component:c,operation:"component initialization",level:a.CRITICAL}),E=(d,c,s={})=>f(d,{...s,category:n.NETWORK,operation:`API request to: ${c}`,level:a.WARNING}),k=async(d,c={})=>{try{if(!t()&&c.requireAuth!==!1)throw new Error("Authentication state is invalid");return await d()}catch(s){if(f(s,{...c,operation:c.operation||"safe execution"}),c.fallback!==void 0)return c.fallback;if(c.suppressError)return null;throw s}},A=h(()=>{const d={total:e.value.length,byLevel:{},byCategory:{},recent:e.value.slice(0,10),oldestError:e.value[e.value.length-1],newestError:e.value[0]};return Object.values(a).forEach(c=>{d.byLevel[c]=e.value.filter(s=>s.level===c).length}),Object.values(n).forEach(c=>{d.byCategory[c]=e.value.filter(s=>s.category===c).length}),d}),B=()=>{e.value=[]},M=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,stats:A.value,errors:e.value}),P={};return{handleAuthError:f,handleRoleError:v,handleNavigationError:b,handleComponentError:C,handleNetworkError:E,safeExecute:k,createErrorReport:u,errorHistory:h(()=>e.value),getErrorStats:A,clearErrorHistory:B,exportErrorHistory:M,ERROR_LEVELS:a,ERROR_CATEGORIES:n,...P}}const Gn={class:"navigation-error-boundary"},jn=5e3,Un={__name:"NavigationErrorBoundary",props:{currentRoute:{type:String,required:!0},navigationType:{type:String,validator:i=>["desktop","mobile","controller"].includes(i),default:"controller"},componentId:{type:String,default:()=>`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},maxRetries:{type:Number,default:3},onError:{type:Function,default:null},onRecover:{type:Function,default:null}},emits:["error","recover","fallback-activated","fallback-deactivated","navigation-attempt","conflict-detected"],setup(i,{expose:t,emit:e}){const o=i,a=e,{handleNavigationError:n,handleComponentError:u,ERROR_LEVELS:f,ERROR_CATEGORIES:v}=Hn(),b=w(!1),C=w(null),E=w({}),k=w(0),A=w(!1),B=w(null),M=w([]),P=w([]),d=!1,c=h(()=>{var z;if(!C.value)return"Navigation component failed to load";const y=((z=C.value.message)==null?void 0:z.toLowerCase())||"";return y.includes("chunk")||y.includes("loading")?"Navigation component failed to load. This may be due to a network issue.":y.includes("permission")||y.includes("unauthorized")?"You don't have permission to access this navigation. Please contact your administrator.":y.includes("auth")||y.includes("session")?"Your session has expired. Please log in again.":y.includes("network")||y.includes("fetch")?"Network error while loading navigation. Please check your connection.":y.includes("conflict")||y.includes("multiple")?"Navigation conflict detected. Multiple navigation components are active.":y.includes("breakpoint")||y.includes("responsive")?"Navigation responsive behavior error. The navigation may not match your screen size.":"Navigation system encountered an error. Using fallback navigation."}),s=h(()=>o.navigationType);h(()=>b.value&&(k.value>=o.maxRetries||A.value===!1));const l=x=>{var ne,fe;const y=((ne=x.message)==null?void 0:ne.toLowerCase())||"",z=((fe=x.stack)==null?void 0:fe.toLowerCase())||"";return y.includes("conflict")||y.includes("multiple")?"navigation_conflict":y.includes("breakpoint")||y.includes("responsive")?"responsive_error":y.includes("chunk")||y.includes("loading")?"component_loading":y.includes("permission")||y.includes("auth")?"authorization_error":y.includes("network")||y.includes("fetch")?"network_error":z.includes("vue")||z.includes("component")?"component_error":"unknown_navigation_error"},g=(x,y,z)=>{var _e;const ne=Date.now();if(B.value&&ne-B.value<jn){const ke=M.value[0];if(ke&&ke.message===x.message)return!1}B.value=ne;const fe=l(x),ce={id:`nav_error_${ne}_${Math.random().toString(36).substr(2,9)}`,timestamp:ne,type:fe,message:x.message,stack:x.stack,name:x.name,navigationType:o.navigationType,componentId:o.componentId,currentRoute:o.currentRoute,retryCount:k.value,windowWidth:window.innerWidth,userAgent:navigator.userAgent,errorInfo:z,instance:((_e=y==null?void 0:y.$options)==null?void 0:_e.name)||"Unknown"};switch(M.value.unshift(ce),M.value.length>20&&(M.value=M.value.slice(0,20)),z.value=ce,E.value={...ce,conflictStatus:W.getStatus(),navigationState:{hasError:b.value,retryCount:k.value,navigationType:o.navigationType,componentId:o.componentId}},b.value=!0,fe){case"navigation_conflict":H(ce);break;case"component_loading":D();break;case"authorization_error":J(ce);break;default:I(ce)}if(o.onError)try{o.onError(ce)}catch(ke){console.error("[NAVIGATION ERROR BOUNDARY] Custom error handler failed:",ke)}return F(ce),a("error",ce),!1},H=x=>{const y=W.detectConflicts();y.length>0&&(P.value.unshift({timestamp:Date.now(),conflicts:y,errorReport:x}),a("conflict-detected",{conflicts:y,errorReport:x}),W.resolveConflicts())},D=x=>{k.value<o.maxRetries&&setTimeout(()=>{b.value&&L()},2e3)},J=x=>{n(new Error(x.message),o.currentRoute,{component:`NavigationErrorBoundary-${o.navigationType}`,navigationType:o.navigationType,level:f.CRITICAL,category:v.NAVIGATION})},I=x=>{u(new Error(x.message),`NavigationErrorBoundary-${o.navigationType}`,{navigationType:o.navigationType,componentId:o.componentId,level:f.WARNING,category:v.COMPONENT})},L=async()=>{if(!(A.value||k.value>=o.maxRetries)){A.value=!0,k.value++;try{o.onRecover?await o.onRecover():await new Promise(x=>setTimeout(x,1e3)),j(),a("recover",{attempt:k.value,navigationType:o.navigationType,componentId:o.componentId})}catch(x){console.error("[NAVIGATION ERROR BOUNDARY] Recovery failed:",x);const y={...C.value,retryError:x.message,retryAttempt:k.value,timestamp:Date.now()};E.value=y,k.value>=o.maxRetries&&a("fallback-activated",{reason:"max_retries_reached",errorReport:y})}finally{A.value=!1}}},j=()=>{b.value=!1,C.value=null,E.value={},k.value=0,A.value=!1},U=x=>{a("navigation-attempt",{...x,source:"fallback",errorContext:C.value})},O=x=>{L()},_=()=>{window.location.reload()},T=x=>{x.action==="activated"?a("fallback-activated",{reason:"user_activated",errorReport:C.value}):x.action==="deactivated"&&a("fallback-deactivated",{errorReport:C.value})},F=x=>{if(typeof window<"u"&&window.reportError)try{window.reportError({type:"navigation_error",category:"navigation_boundary",...x})}catch(y){console.error("[NAVIGATION ERROR BOUNDARY] Failed to report error:",y)}x.type};return te(()=>{W.registerComponent(o.componentId,o.navigationType,{currentRoute:o.currentRoute,boundaryActive:!0,timestamp:Date.now()})}),re(()=>{W.unregisterComponent(o.componentId)}),ft((x,y,z)=>g(x,y,z)),te(()=>{const x=z=>{const ne=new Error(`Navigation conflict: ${z.detail.message}`);g(ne,null,{type:"conflict_event",detail:z.detail})},y=z=>{z.detail.componentId===o.componentId&&j()};window.addEventListener("navigation-conflict",x),window.addEventListener("navigation-conflict-cleanup",y),window._navigationErrorBoundaryCleanup=()=>{window.removeEventListener("navigation-conflict",x),window.removeEventListener("navigation-conflict-cleanup",y)}}),re(()=>{window._navigationErrorBoundaryCleanup&&(window._navigationErrorBoundaryCleanup(),delete window._navigationErrorBoundaryCleanup)}),ge(()=>o.currentRoute,(x,y)=>{x!==y&&b.value&&j()}),t({hasError:b,errorInfo:C,retryCount:k,resetError:j,handleRetry:L,getErrorHistory:()=>M.value,getConflictHistory:()=>P.value,getStatus:()=>{var x;return{hasError:b.value,errorType:(x=C.value)==null?void 0:x.type,retryCount:k.value,isRetrying:A.value,navigationType:o.navigationType,componentId:o.componentId}}}),(x,y)=>(m(),p("div",Gn,[b.value?(m(),Z(ut,{key:1,"fallback-reason":c.value,"error-details":E.value,"current-route":i.currentRoute,"failed-navigation-type":s.value,"show-error-indicator":!0,"show-debug-info":d,"on-retry":L,onNavigate:U,onRetry:O,onReload:_,onFallbackAction:T},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):he(x.$slots,"default",{key:0},void 0,!0)]))}},Wn=le(Un,[["__scopeId","data-v-7c3ddc96"]]);class Yn{constructor(){this.isEnabled=w(!0),this.events=w([]),this.metrics=w({totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()}),this.maxEventHistory=1e3,this.performanceMarks=new Map,this.EVENT_TYPES={NAVIGATION_LOAD:"navigation_load",NAVIGATION_ERROR:"navigation_error",CONFLICT_DETECTED:"conflict_detected",CONFLICT_RESOLVED:"conflict_resolved",FALLBACK_ACTIVATED:"fallback_activated",FALLBACK_DEACTIVATED:"fallback_deactivated",COMPONENT_REGISTERED:"component_registered",COMPONENT_UNREGISTERED:"component_unregistered",NAVIGATION_SWITCH:"navigation_switch",RETRY_ATTEMPT:"retry_attempt",PERFORMANCE_MARK:"performance_mark",USER_ACTION:"user_action",BREAKPOINT_CHANGE:"breakpoint_change"},this.SEVERITY_LEVELS={CRITICAL:"critical",HIGH:"high",MEDIUM:"medium",LOW:"low",INFO:"info"},this.setupMonitoring()}logEvent(t,e={},o=this.SEVERITY_LEVELS.INFO){if(!this.isEnabled.value)return;const a=Date.now(),n={id:`event_${a}_${Math.random().toString(36).substr(2,9)}`,type:t,severity:o,timestamp:a,data:{...e,windowWidth:window.innerWidth,url:window.location.href,userAgent:navigator.userAgent},sessionId:this.getSessionId(),sequence:this.metrics.value.totalEvents+1};return this.events.value.unshift(n),this.events.value.length>this.maxEventHistory&&(this.events.value=this.events.value.slice(0,this.maxEventHistory)),this.updateMetrics(n),this.reportEvent(n),n}logNavigationLoad(t,e,o=null){const a={componentType:t,componentId:e,loadTime:o,timestamp:Date.now()};return o&&this.updateLoadTimeMetrics(o),this.logEvent(this.EVENT_TYPES.NAVIGATION_LOAD,a,this.SEVERITY_LEVELS.INFO)}logNavigationError(t,e={}){const o={errorMessage:t.message,errorStack:t.stack,errorName:t.name,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_ERROR,o,this.SEVERITY_LEVELS.HIGH)}logConflict(t,e=!1){const o=e?this.EVENT_TYPES.CONFLICT_RESOLVED:this.EVENT_TYPES.CONFLICT_DETECTED,a={conflicts:t.map(n=>({id:n.id,type:n.type,severity:n.severity,message:n.message})),conflictCount:t.length,resolved:e,timestamp:Date.now()};return this.logEvent(o,a,e?this.SEVERITY_LEVELS.MEDIUM:this.SEVERITY_LEVELS.HIGH)}logFallback(t,e="",o={}){const a=t?this.EVENT_TYPES.FALLBACK_ACTIVATED:this.EVENT_TYPES.FALLBACK_DEACTIVATED,n={activated:t,reason:e,errorContext:o,timestamp:Date.now()};return this.logEvent(a,n,t?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logComponentLifecycle(t,e,o,a={}){const n=t?this.EVENT_TYPES.COMPONENT_REGISTERED:this.EVENT_TYPES.COMPONENT_UNREGISTERED,u={registered:t,componentId:e,componentType:o,metadata:a,timestamp:Date.now()};return this.logEvent(n,u,this.SEVERITY_LEVELS.INFO)}logNavigationSwitch(t,e,o="",a={}){const n={fromType:t,toType:e,reason:o,preservedData:a,windowWidth:window.innerWidth,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_SWITCH,n,this.SEVERITY_LEVELS.INFO)}logRetryAttempt(t,e,o={}){const a={attempt:t,maxAttempts:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.RETRY_ATTEMPT,a,t>=e?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logUserAction(t,e,o={}){const a={action:t,target:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.USER_ACTION,a,this.SEVERITY_LEVELS.INFO)}logBreakpointChange(t,e,o,a){const n={oldWidth:t,newWidth:e,oldType:o,newType:a,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.BREAKPOINT_CHANGE,n,this.SEVERITY_LEVELS.INFO)}startPerformanceMark(t){const e=performance.now();return this.performanceMarks.set(t,{startTime:e}),e}endPerformanceMark(t,e={}){const o=this.performanceMarks.get(t);if(!o)return console.warn(`[NAVIGATION MONITOR] Performance mark not found: ${t}`),null;const a=performance.now(),n=a-o.startTime;this.performanceMarks.delete(t);const u={markName:t,duration:n,startTime:o.startTime,endTime:a,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.PERFORMANCE_MARK,u,this.SEVERITY_LEVELS.INFO),n}updateMetrics(t){switch(this.metrics.value.totalEvents++,t.type){case this.EVENT_TYPES.NAVIGATION_ERROR:this.metrics.value.errorCount++;break;case this.EVENT_TYPES.CONFLICT_DETECTED:this.metrics.value.conflictCount++;break;case this.EVENT_TYPES.FALLBACK_ACTIVATED:this.metrics.value.fallbackActivations++;break;case this.EVENT_TYPES.RETRY_ATTEMPT:this.metrics.value.retryAttempts++;break;case this.EVENT_TYPES.NAVIGATION_SWITCH:this.metrics.value.navigationSwitches++;break}}updateLoadTimeMetrics(t){const e=this.metrics.value.averageLoadTime,o=this.events.value.filter(a=>a.type===this.EVENT_TYPES.NAVIGATION_LOAD&&a.data.loadTime).length;o===1?this.metrics.value.averageLoadTime=t:this.metrics.value.averageLoadTime=(e*(o-1)+t)/o}getSessionId(){return this.sessionId||(this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),this.sessionId}logToConsole(t){const e={[this.SEVERITY_LEVELS.CRITICAL]:console.error,[this.SEVERITY_LEVELS.HIGH]:console.warn,[this.SEVERITY_LEVELS.MEDIUM]:console.warn,[this.SEVERITY_LEVELS.LOW]:console.info,[this.SEVERITY_LEVELS.INFO]:console.log}[t.severity]||console.log,o={[this.EVENT_TYPES.NAVIGATION_LOAD]:"🚀",[this.EVENT_TYPES.NAVIGATION_ERROR]:"❌",[this.EVENT_TYPES.CONFLICT_DETECTED]:"⚠️",[this.EVENT_TYPES.CONFLICT_RESOLVED]:"✅",[this.EVENT_TYPES.FALLBACK_ACTIVATED]:"🔄",[this.EVENT_TYPES.FALLBACK_DEACTIVATED]:"✅",[this.EVENT_TYPES.COMPONENT_REGISTERED]:"📝",[this.EVENT_TYPES.COMPONENT_UNREGISTERED]:"🗑️",[this.EVENT_TYPES.NAVIGATION_SWITCH]:"🔄",[this.EVENT_TYPES.RETRY_ATTEMPT]:"🔄",[this.EVENT_TYPES.PERFORMANCE_MARK]:"⏱️",[this.EVENT_TYPES.USER_ACTION]:"👆",[this.EVENT_TYPES.BREAKPOINT_CHANGE]:"📱"}[t.type]||"📊";e(`${o} [NAV MONITOR] ${t.type.toUpperCase()}`,t.data)}reportEvent(t){[this.SEVERITY_LEVELS.CRITICAL,this.SEVERITY_LEVELS.HIGH].includes(t.severity)&&this.reportCriticalEvent(t)}reportCriticalEvent(t){}setupMonitoring(){if(typeof window>"u")return;try{const o=W.detectConflicts.bind(W);W.detectConflicts=(...n)=>{try{const u=o(...n);return u&&Array.isArray(u)&&u.length>0&&this.logConflict(u,!1),u||[]}catch(u){return console.warn("[NAVIGATION MONITOR] Error in detectConflicts wrapper:",u),[]}};const a=W.resolveConflicts.bind(W);W.resolveConflicts=(...n)=>{try{const u=a(...n);return u&&Array.isArray(u)&&u.length>0&&this.logConflict([],!0),u||[]}catch(u){return console.warn("[NAVIGATION MONITOR] Error in resolveConflicts wrapper:",u),[]}}}catch(o){console.warn("[NAVIGATION MONITOR] Error setting up conflict detector monitoring:",o)}let t=window.innerWidth,e=t>=1024?"desktop":"mobile";window.addEventListener("resize",()=>{const o=window.innerWidth,a=o>=1024?"desktop":"mobile";a!==e&&(this.logBreakpointChange(t,o,e,a),t=o,e=a)}),window.addEventListener("navigation-conflict",o=>{this.logConflict([{id:"custom_conflict",type:"custom",severity:"high",message:o.detail.message}],!1)}),document.addEventListener("visibilitychange",()=>{this.logUserAction(document.hidden?"page_hidden":"page_visible","document",{visibility:document.visibilityState})})}getStats(){const e=Date.now()-this.metrics.value.lastResetTime;return{...this.metrics.value,timeRange:e,eventsPerMinute:(this.metrics.value.totalEvents/(e/6e4)).toFixed(2),errorRate:(this.metrics.value.errorCount/this.metrics.value.totalEvents*100).toFixed(2),conflictRate:(this.metrics.value.conflictCount/this.metrics.value.totalEvents*100).toFixed(2),recentEvents:this.events.value.slice(0,10),eventsByType:this.getEventsByType(),eventsBySeverity:this.getEventsBySeverity()}}getEventsByType(){const t={};return this.events.value.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),t}getEventsBySeverity(){const t={};return this.events.value.forEach(e=>{t[e.severity]=(t[e.severity]||0)+1}),t}exportData(){return{sessionId:this.getSessionId(),exportTime:Date.now(),metrics:this.metrics.value,events:this.events.value,stats:this.getStats(),conflictStatus:W.getStatus(),systemInfo:{userAgent:navigator.userAgent,windowSize:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:Date.now()}}}reset(){this.events.value=[],this.metrics.value={totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()},this.performanceMarks.clear(),this.logEvent("monitor_reset",{reason:"manual_reset"},this.SEVERITY_LEVELS.INFO)}setEnabled(t){this.isEnabled.value=t,this.logEvent("monitor_toggle",{enabled:t},this.SEVERITY_LEVELS.INFO)}}const q=new Yn;class qn{constructor(){this.isEnabled=!1,this.debugLevel="info",this.autoDebug=!0,this.debugHistory=[],this.maxHistorySize=100,this.DEBUG_CATEGORIES={CONFLICT:"conflict",PERFORMANCE:"performance",COMPONENT:"component",BREAKPOINT:"breakpoint",ERROR:"error",STATE:"state",LIFECYCLE:"lifecycle"},this.setupDebugTools()}debug(t=null,e=!1){if(!this.isEnabled)return;const o=this.gatherDebugInfo();return console.group("🧭 Navigation System Debug Report"),(!t||t===this.DEBUG_CATEGORIES.STATE)&&this.debugNavigationState(o,e),(!t||t===this.DEBUG_CATEGORIES.CONFLICT)&&this.debugConflicts(o,e),(!t||t===this.DEBUG_CATEGORIES.COMPONENT)&&this.debugComponents(o,e),(!t||t===this.DEBUG_CATEGORIES.BREAKPOINT)&&this.debugBreakpoints(o,e),(!t||t===this.DEBUG_CATEGORIES.PERFORMANCE)&&this.debugPerformance(o,e),(!t||t===this.DEBUG_CATEGORIES.ERROR)&&this.debugErrors(o,e),e&&this.debugDetailed(o),console.groupEnd(),this.addToHistory("debug_report",{category:t,detailed:e,debugInfo:o}),o}gatherDebugInfo(){return{timestamp:Date.now(),window:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio,userAgent:navigator.userAgent},location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},conflicts:W.getStatus(),monitoring:q.getStats(),dom:this.analyzeDOMState(),components:this.analyzeComponents(),breakpoints:this.analyzeBreakpoints(),performance:this.analyzePerformance(),errors:this.analyzeErrors()}}debugNavigationState(t,e){console.group("📊 Navigation State"),console.log("Window Size:",`${t.window.width}x${t.window.height}`),console.log("Current URL:",t.location.href),console.log("Active Components:",t.components.active),console.log("Conflicts:",t.conflicts.hasConflicts?"❌ YES":"✅ NO"),console.log("Monitoring Enabled:",t.monitoring.totalEvents>0?"✅ YES":"❌ NO"),e&&(console.log("Full Window Info:",t.window),console.log("Full Location Info:",t.location),console.log("DOM Analysis:",t.dom)),console.groupEnd()}debugConflicts(t,e){console.group("⚠️ Conflict Analysis");const o=t.conflicts;o.hasConflicts?(console.error(`Found ${o.conflictCount} conflicts:`),o.conflicts.forEach((a,n)=>{console.error(`${n+1}. ${a.type}: ${a.message}`),e&&console.log("Conflict Details:",a)})):console.log("✅ No conflicts detected"),console.log("Active Components:",o.activeComponents.length),o.activeComponents.forEach(a=>{console.log(`- ${a.type}: ${a.id}`)}),e&&console.log("Full Conflict Status:",o),console.groupEnd()}debugComponents(t,e){console.group("🧩 Component Analysis");const o=t.components;console.log("Active Components:",o.active.length),console.log("Desktop Components:",o.desktop.length),console.log("Mobile Components:",o.mobile.length),console.log("Fallback Components:",o.fallback.length),o.duplicates.length>0&&(console.warn("⚠️ Duplicate Components Found:"),o.duplicates.forEach(a=>{console.warn(`- ${a.type}: ${a.count} instances`)})),e&&(console.log("Component Details:"),console.log("- Active:",o.active),console.log("- Desktop:",o.desktop),console.log("- Mobile:",o.mobile),console.log("- Fallback:",o.fallback)),console.groupEnd()}debugBreakpoints(t,e){console.group("📱 Breakpoint Analysis");const o=t.breakpoints;console.log("Current Width:",o.currentWidth),console.log("Expected Type:",o.expectedType),console.log("Actual Type:",o.actualType),console.log("Match:",o.matches?"✅ YES":"❌ NO"),o.matches||(console.warn("⚠️ Breakpoint mismatch detected!"),console.warn(`Expected: ${o.expectedType}, Actual: ${o.actualType}`)),e&&console.log("Breakpoint Details:",o),console.groupEnd()}debugPerformance(t,e){console.group("⏱️ Performance Analysis");const o=t.performance;console.log("Average Load Time:",`${o.averageLoadTime.toFixed(2)}ms`),console.log("Total Events:",o.totalEvents),console.log("Error Rate:",`${o.errorRate}%`),console.log("Events/Minute:",o.eventsPerMinute),o.slowComponents.length>0&&(console.warn("⚠️ Slow Components:"),o.slowComponents.forEach(a=>{console.warn(`- ${a.name}: ${a.loadTime}ms`)})),e&&console.log("Performance Details:",o),console.groupEnd()}debugErrors(t,e){console.group("❌ Error Analysis");const o=t.errors;console.log("Total Errors:",o.totalErrors),console.log("Recent Errors:",o.recentErrors.length),console.log("Error Types:",Object.keys(o.errorsByType).join(", ")),o.recentErrors.length>0&&(console.warn("Recent Errors:"),o.recentErrors.forEach((a,n)=>{console.warn(`${n+1}. ${a.type}: ${a.message}`)})),e&&console.log("Error Details:",o),console.groupEnd()}debugDetailed(t){console.group("🔍 Detailed Analysis"),console.log("Full Debug Info:",t),console.log("Debug History:",this.debugHistory.slice(0,10)),this.checkCommonIssues(t),console.groupEnd()}checkCommonIssues(t){console.group("🔧 Common Issues Check");const e=[];t.components.duplicates.length>0&&e.push("Multiple navigation components of the same type detected"),t.breakpoints.matches||e.push("Navigation type does not match current breakpoint"),parseFloat(t.monitoring.errorRate)>10&&e.push("High error rate detected (>10%)"),t.performance.averageLoadTime>1e3&&e.push("Slow navigation loading detected (>1000ms)"),t.conflicts.hasConflicts&&e.push("Navigation conflicts detected"),e.length>0?(console.warn("⚠️ Issues Found:"),e.forEach((o,a)=>{console.warn(`${a+1}. ${o}`)})):console.log("✅ No common issues detected"),console.groupEnd()}analyzeDOMState(){const t=document.querySelectorAll("[data-navigation-type]"),e=document.querySelectorAll('[data-navigation-type="desktop"]'),o=document.querySelectorAll('[data-navigation-type="mobile"]'),a=document.querySelectorAll('[data-navigation-type="fallback"]');return{totalNavigationElements:t.length,desktopElements:e.length,mobileElements:o.length,fallbackElements:a.length,visibleElements:Array.from(t).filter(n=>n.offsetWidth>0&&n.offsetHeight>0).length,hiddenElements:Array.from(t).filter(n=>n.offsetWidth===0||n.offsetHeight===0).length}}analyzeComponents(){const e=W.getStatus().activeComponents,o=e.filter(v=>v.type==="desktop"),a=e.filter(v=>v.type==="mobile"),n=e.filter(v=>v.type==="fallback"),u={};e.forEach(v=>{u[v.type]=(u[v.type]||0)+1});const f=Object.entries(u).filter(([v,b])=>b>1).map(([v,b])=>({type:v,count:b}));return{active:e,desktop:o,mobile:a,fallback:n,duplicates:f}}analyzeBreakpoints(){const t=window.innerWidth,e=t>=1024?"desktop":"mobile",a=W.getStatus().activeComponents,n=a.some(v=>v.type==="desktop"),u=a.some(v=>v.type==="mobile");let f="none";return n&&!u?f="desktop":u&&!n?f="mobile":n&&u&&(f="both"),{currentWidth:t,expectedType:e,actualType:f,matches:e===f,hasDesktop:n,hasMobile:u}}analyzePerformance(){const t=q.getStats(),a=q.events.value.filter(n=>n.type==="navigation_load"&&n.data.loadTime).filter(n=>n.data.loadTime>500).map(n=>({name:n.data.componentType,loadTime:n.data.loadTime}));return{...t,slowComponents:a}}analyzeErrors(){const e=q.events.value.filter(a=>a.type==="navigation_error"||a.severity==="high"||a.severity==="critical"),o={};return e.forEach(a=>{const n=a.data.errorName||a.type;o[n]=(o[n]||0)+1}),{totalErrors:e.length,recentErrors:e.slice(0,5),errorsByType:o}}addToHistory(t,e){this.debugHistory.unshift({timestamp:Date.now(),action:t,data:e}),this.debugHistory.length>this.maxHistorySize&&(this.debugHistory=this.debugHistory.slice(0,this.maxHistorySize))}setupDebugTools(){this.isEnabled&&(window.debugNavigation=(t,e)=>this.debug(t,e),window.debugNavigationConflicts=()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),window.debugNavigationPerformance=()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),window.debugNavigationComponents=()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),window.navDebug={debug:(t,e)=>this.debug(t,e),conflicts:()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),performance:()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),components:()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),breakpoints:()=>this.debug(this.DEBUG_CATEGORIES.BREAKPOINT,!0),errors:()=>this.debug(this.DEBUG_CATEGORIES.ERROR,!0),export:()=>this.exportDebugData(),reset:()=>this.resetDebugData(),monitor:q,conflicts:W},console.log("🧭 Navigation Debug Tools Available:"),console.log("- debugNavigation() - Full debug report"),console.log("- debugNavigationConflicts() - Conflict analysis"),console.log("- debugNavigationPerformance() - Performance analysis"),console.log("- debugNavigationComponents() - Component analysis"),console.log("- navDebug.* - Debug shortcuts object"))}exportDebugData(){const t=this.gatherDebugInfo(),e={timestamp:Date.now(),debugInfo:t,debugHistory:this.debugHistory,monitoringData:q.exportData(),conflictData:W.getStatus()};return console.log("📤 Debug Data Export:",e),navigator.clipboard&&navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>console.log("✅ Debug data copied to clipboard")).catch(()=>console.log("❌ Failed to copy to clipboard")),e}resetDebugData(){this.debugHistory=[],q.reset(),W.reset(),console.log("🔄 Debug data reset"),this.addToHistory("debug_reset",{timestamp:Date.now()})}autoDebugOnIssues(){if(this.autoDebug){try{const t=W.detectConflicts.bind(W);W.detectConflicts=(...e)=>{try{const o=t(...e);return o&&Array.isArray(o)&&o.length>0&&(console.warn("🚨 Auto-debug triggered by conflicts"),this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0)),o||[]}catch(o){return console.warn("[NAVIGATION DEBUGGER] Error in detectConflicts wrapper:",o),[]}}}catch(t){console.warn("[NAVIGATION DEBUGGER] Error setting up conflict detector monitoring:",t)}window.addEventListener("error",t=>{t.error&&t.error.message.toLowerCase().includes("navigation")&&(console.warn("🚨 Auto-debug triggered by navigation error"),this.debug(this.DEBUG_CATEGORIES.ERROR,!0))})}}}new qn;const Kn=["data-navigation-mode","data-navigation-id","data-conflict-status"],Qn={class:"conflict-count"},Zn={__name:"NavigationController",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1},forceNavigationType:{type:String,validator:i=>["desktop","mobile",null].includes(i),default:null}},emits:["navigate","collapse-change","state-change","navigation-type-change","navigation-transition","mobile-drawer-toggle"],setup(i,{expose:t,emit:e}){const o=i,a=e;$e();const{windowWidth:n,navigationMode:u,isTransitioning:f,preserveCurrentState:v,restorePreservedState:b,getBreakpointInfo:C}=ct(),{roles:E,isAuthenticated:k}=pe();Pe();const A=w("desktop"),B=w(null),M=w({isTransitioning:!1,fromType:null,toType:null,preservedData:null}),P=w(`controller_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),d=w(`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),c=w([]),s=w(!1),l=w(""),g=w({}),H=!1,D=h(()=>o.forceNavigationType?o.forceNavigationType:u.value),J=h(()=>{try{const S=D.value==="desktop"?nt:xn;return A.value=D.value,S}catch(S){return console.error("[NavigationController] Error selecting navigation component:",S),B.value=S,nt}}),I=h(()=>{const S={currentRoute:o.currentRoute,userRoles:E.value||[],isAuthenticated:k.value};return D.value==="desktop"?{...S,initiallyCollapsed:o.initiallyCollapsed}:{...S}});h(()=>D.value==="desktop"),h(()=>D.value==="mobile");const L=h(()=>!1),j=S=>{try{a("navigate",{...S,navigationType:A.value,timestamp:Date.now()})}catch(X){console.error("[NavigationController] Navigation error:",X),B.value=X}},U=S=>{try{a("collapse-change",S)}catch(X){console.error("[NavigationController] Collapse change error:",X)}},O=S=>{try{a("state-change",{...S,navigationType:A.value,deviceType:D.value})}catch(X){console.error("[NavigationController] State change error:",X)}},_=S=>{try{a("mobile-drawer-toggle",S)}catch(X){console.error("[NavigationController] Mobile drawer toggle error:",X)}};ge(D,async(S,X)=>{if(S!==X){M.value.isTransitioning=!0,M.value.fromType=X,M.value.toType=S;try{a("navigation-transition",!0);const Ae=v({navigationState:{currentRoute:o.currentRoute,userPreferences:{},timestamp:Date.now()}});M.value.preservedData=Ae,a("navigation-type-change",{from:X,to:S,breakpoint:n.value,breakpointInfo:C(),preservedData:Ae,timestamp:Date.now(),isTransitioning:!0}),await Ue(),await new Promise(pt=>setTimeout(pt,150)),b()}catch(Ae){console.error("[NavigationController] Error during navigation type change:",Ae),B.value=Ae}finally{a("navigation-transition",!1),M.value.isTransitioning=!1,M.value.fromType=null,M.value.toType=null}}},{immediate:!1});const T=()=>{B.value=null},F=()=>{},x=async S=>{q.logNavigationError(S,{componentId:P.value,navigationType:D.value,currentRoute:o.currentRoute}),(S.severity==="critical"||S.type==="component_loading")&&_e("Navigation component error",S)},y=async()=>{try{return d.value=`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c.value=[],ke(),q.logEvent("navigation_recovery_success",{controllerId:P.value,deviceType:D.value}),!0}catch(S){return console.error("[NavigationController] Recovery failed:",S),!1}},z=S=>{q.logNavigationError(new Error(S.message),{errorReport:S,source:"error_boundary"})},ne=S=>{q.logEvent("boundary_recovery",S)},fe=S=>{_e(S.reason,S.errorReport)},ce=S=>{c.value=S.conflicts,q.logConflict(S.conflicts,!1),W.resolveConflicts().length>0&&q.logConflict(S.conflicts,!0)},_e=(S,X={})=>{s.value=!0,l.value=S,g.value=X,q.logFallback(!0,S,X)},ke=()=>{s.value=!1,l.value="",g.value={},q.logFallback(!1,"recovery_successful")},dt=S=>{q.logUserAction("fallback_navigation",S.item.name,S),j(S)},Ye=async()=>await y(),vt=S=>{q.logRetryAttempt(S.attempt,S.maxRetries,{source:"fallback",failedNavigationType:S.failedNavigationType}),Ye()},mt=()=>{q.logUserAction("fallback_reload","page"),window.location.reload()},ht=S=>{q.logUserAction("fallback_action",S.action,S)},qe=()=>{q.startPerformanceMark(`navigation_transition_${D.value}`)},Ke=()=>{q.endPerformanceMark(`navigation_transition_${D.value}`,{navigationType:D.value,controllerId:P.value})},gt=()=>{};return te(()=>{W.registerComponent(P.value,"controller",{currentRoute:o.currentRoute,deviceType:D.value,timestamp:Date.now()}),W.registerComponent(d.value,D.value,{currentRoute:o.currentRoute,controllerId:P.value,timestamp:Date.now()}),q.logNavigationLoad("controller",P.value),A.value=D.value,a("navigation-type-change",{from:null,to:D.value,breakpoint:n.value,timestamp:Date.now()});const S=setInterval(()=>{const X=W.detectConflicts();X.length!==c.value.length&&(c.value=X)},2e3);re(()=>{console.log("Unregistering NavigationController:",{controllerId:P.value,componentId:d.value}),clearInterval(S),clearInterval(devConflictCheckInterval),W.unregisterComponent(P.value),W.unregisterComponent(d.value),q.logEvent("component_unregistered",{controllerId:P.value,componentId:d.value})})}),t({debugNavigationController:F,clearError:T,currentNavigationType:h(()=>A.value),deviceType:D,isTransitioning:h(()=>M.value.isTransitioning||f.value),navigationError:h(()=>B.value),transitionState:h(()=>M.value),breakpointInfo:C}),(S,X)=>(m(),Z(Wn,{"current-route":i.currentRoute,"navigation-type":"controller","component-id":P.value,"max-retries":3,"on-error":x,"on-recover":y,onError:z,onRecover:ne,onFallbackActivated:fe,onConflictDetected:ce},{default:Q(()=>[r("div",{class:R(["navigation-controller",{"is-transitioning":M.value.isTransitioning||N(f),"desktop-mode":D.value==="desktop","mobile-mode":D.value==="mobile","has-conflicts":L.value,"fallback-active":s.value}]),"data-navigation-mode":D.value,"data-navigation-id":P.value,"data-conflict-status":L.value?"conflict":"clean"},[s.value?(m(),Z(ut,{key:0,"fallback-reason":l.value,"error-details":g.value,"current-route":i.currentRoute,"failed-navigation-type":D.value,"show-error-indicator":!0,"show-debug-info":H,"on-retry":Ye,onNavigate:dt,onRetry:vt,onReload:mt,onFallbackAction:ht},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):(m(),Z(Me,{key:1,name:"navigation-transition",mode:"out-in",duration:{enter:200,leave:150},onBeforeEnter:qe,onAfterEnter:Ke,onBeforeLeave:qe,onAfterLeave:Ke},{default:Q(()=>[(m(),Z(Le(J.value),Ge({key:D.value},I.value,{"data-navigation-type":D.value,"data-navigation-id":d.value,"data-conflict-protected":!0,onNavigate:j,onCollapseChange:U,onStateChange:O,onMobileDrawerToggle:_}),null,16,["data-navigation-type","data-navigation-id"]))]),_:1})),H&&L.value?(m(),p("div",{key:2,class:"conflict-indicator",onClick:gt},[V(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),r("span",Qn,$(c.value.length),1)])):G("",!0)],10,Kn)]),_:1},8,["current-route","component-id"]))}},Jn=le(Zn,[["__scopeId","data-v-75cf281c"]]),Xn=["aria-live"],ea={class:"toast-content"},ta={key:0,class:"toast-icon"},oa={class:"toast-message"},na={key:0,class:"toast-title"},aa={class:"toast-text"},ra={key:1,class:"toast-actions"},sa=["aria-label"],ia={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:i=>["success","error","warning","info","loading"].includes(i)},position:{type:String,default:"top-right",validator:i=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(i)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:i=>["low","normal","high"].includes(i)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:i=>["sm","md","lg"].includes(i)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(i,{expose:t,emit:e}){const o=i,a=e,n=w(!1),u=w(null),f=w(null),v=w(100),b=w(!1),C=w(0),E=w(0),k=h(()=>Fe("x-mark")),A=h(()=>{if(o.icon)return Fe(o.icon);const O={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return Fe(O[o.type]||O.info)}),B=h(()=>["toast-notification",`toast-notification--${o.type}`,`toast-notification--${o.size}`,`toast-notification--${o.position}`,{"toast-notification--with-title":o.title,"toast-notification--persistent":o.persistent,"toast-notification--with-action":o.actionText}]),M=h(()=>({zIndex:o.zIndex})),P=h(()=>["w-5 h-5",{"animate-spin":o.type==="loading"}]),d=h(()=>o.closable||o.actionText),c=h(()=>[`toast-progress--${o.type}`]),s=h(()=>({width:`${v.value}%`})),l=()=>{n.value=!0,o.sound&&U(),!o.persistent&&o.duration>0&&D()},g=()=>{n.value=!1,j(),a("close")},H=()=>{a("action"),o.persistent||g()},D=()=>{o.duration<=0||(C.value=Date.now(),E.value=o.duration,u.value=setTimeout(()=>{g()},o.duration),J())},J=()=>{if(!o.showProgress)return;const O=Date.now(),_=()=>{if(!n.value||b.value)return;const T=Date.now()-O,F=Math.max(0,100-T/o.duration*100);v.value=F,F>0&&(f.value=requestAnimationFrame(_))};_()},I=()=>{if(!u.value||o.persistent)return;b.value=!0,clearTimeout(u.value),cancelAnimationFrame(f.value);const O=Date.now()-C.value;E.value=Math.max(0,o.duration-O)},L=()=>{!b.value||o.persistent||(b.value=!1,E.value>0&&(C.value=Date.now(),u.value=setTimeout(()=>{g()},E.value),J()))},j=()=>{u.value&&(clearTimeout(u.value),u.value=null),f.value&&(cancelAnimationFrame(f.value),f.value=null)},U=()=>{try{const O=new Audio,_={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};O.src=_[o.type]||_.info,O.volume=.3,O.play().catch(()=>{})}catch{}};return te(()=>{l()}),re(()=>{j()}),ge(()=>o.duration,()=>{n.value&&!o.persistent&&(j(),D())}),t({show:l,close:g,pauseTimer:I,resumeTimer:L}),(O,_)=>(m(),Z(yt,{to:"body"},[n.value?(m(),p("div",{key:0,class:R(B.value),style:je(M.value),role:"alert","aria-live":i.priority==="high"?"assertive":"polite",onMouseenter:I,onMouseleave:L},[r("div",ea,[i.showIcon?(m(),p("div",ta,[(m(),Z(Le(A.value),{class:R(P.value)},null,8,["class"]))])):G("",!0),r("div",oa,[i.title?(m(),p("div",na,$(i.title),1)):G("",!0),r("div",aa,[he(O.$slots,"default",{},()=>[de($(i.message),1)],!0)])]),d.value?(m(),p("div",ra,[i.actionText?(m(),p("button",{key:0,onClick:H,class:"toast-action-button"},$(i.actionText),1)):G("",!0),i.closable?(m(),p("button",{key:1,onClick:g,class:"toast-close-button","aria-label":i.closeLabel},[(m(),Z(Le(k.value),{class:"w-4 h-4"}))],8,sa)):G("",!0)])):G("",!0)]),i.showProgress&&i.duration>0?(m(),p("div",{key:0,class:R(["toast-progress",c.value]),style:je(s.value)},null,6)):G("",!0)],46,Xn)):G("",!0)]))}},la=le(ia,[["__scopeId","data-v-11baa49e"]]);class ca{constructor(){this.notifications=Ve([]),this.maxNotifications=w(5),this.defaultDuration=w(5e3),this.positions=Ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=Ve({enabled:!0,volume:.3})}add(t){const e=this.generateId(),o=t.position||"top-right",a={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:o,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(a),this.positions[o].push(a),this.manageQueueSize(o),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(e)},a.duration),e}remove(t){const e=this.notifications.find(u=>u.id===t);if(!e)return;const o=this.notifications.findIndex(u=>u.id===t);o>-1&&this.notifications.splice(o,1);const a=this.positions[e.position],n=a.findIndex(u=>u.id===t);n>-1&&a.splice(n,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(o=>{this.remove(o.id)})}clearType(t){this.notifications.filter(o=>o.type===t).forEach(o=>{this.remove(o.id)})}update(t,e){const o=this.notifications.find(a=>a.id===t);o&&Object.assign(o,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const o=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:a=>{this.remove(o),e(a==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(o=>{const a=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(a),o(!0)},onClose:()=>{o(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(a=>{const n=this.notifications.findIndex(u=>u.id===a.id);n>-1&&this.notifications.splice(n,1)})}}const ae=new ca,ua={class:"notification-container"},da={__name:"NotificationContainer",setup(i,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];h(()=>ae.notifications.filter(E=>!E.component));const o=h(()=>ae.notifications.filter(E=>E.component)),a=E=>{const k="fixed z-50 pointer-events-none",A={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${k} ${A[E]||A["top-right"]}`},n=E=>ae.getByPosition(E),u=E=>E.includes("left")?"slide-left":E.includes("right")?"slide-right":E.includes("center")?"slide-center":"slide-right",f=E=>{ae.remove(E)},v=(E,k="action")=>{const A=ae.getById(E);A!=null&&A.onAction&&A.onAction(k)},b=()=>{window.notify={success:(E,k)=>ae.success(E,k),error:(E,k)=>ae.error(E,k),warning:(E,k)=>ae.warning(E,k),info:(E,k)=>ae.info(E,k),loading:(E,k)=>ae.loading(E,k),confirm:E=>ae.confirm(E),alert:(E,k)=>ae.alert(E,k),clear:()=>ae.clear(),remove:E=>ae.remove(E)}},C=()=>{window.notify&&delete window.notify};return te(()=>{b()}),re(()=>{C()}),t({notificationQueue:ae,notify:window.notify}),(E,k)=>(m(),p("div",ua,[(m(),p(ve,null,me(e,A=>r("div",{key:A,class:R(a(A))},[V(bt,{name:u(A),tag:"div",class:"space-y-2"},{default:Q(()=>[(m(!0),p(ve,null,me(n(A),B=>(m(),Z(la,Ge({key:B.id},{ref_for:!0},B,{onClose:M=>f(B.id),onAction:M=>v(B.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(m(!0),p(ve,null,me(o.value,A=>(m(),Z(Le(A.component||"NotificationModal"),Ge({key:A.id,ref_for:!0},A.props,{onClose:B=>f(A.id),onConfirm:B=>v(A.id,"confirm"),onCancel:B=>v(A.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},va=le(da,[["__scopeId","data-v-67e6c621"]]),ma={class:"floating-attendance-widget"},ha={class:"status-indicator"},ga={class:"time-info"},pa={class:"time-display"},fa={class:"time-label-mini"},ya={class:"widget-header"},ba={class:"status-info"},wa={class:"status-text"},ka={class:"timer-section"},Ea={class:"timer-value"},xa={class:"timer-label"},Ta={class:"quick-actions"},Ca=["disabled"],_a=["disabled"],Aa={class:"quick-stats"},Sa={class:"stat"},Ia={class:"stat-value"},Na={class:"stat"},Ra={class:"stat-value"},Da={__name:"FloatingAttendanceWidget",setup(i){const t=w(!1),e=w({clockedIn:!1,onBreak:!1,clockInTime:null}),o=w(!1),a=w("0h 0m 0s"),n=w(null),u=()=>{try{const I={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(I))}catch(I){console.warn("Failed to save attendance state to localStorage:",I)}},f=()=>{try{const I=localStorage.getItem("floating-attendance-state");if(I){const L=JSON.parse(I),j=new Date(L.lastUpdate);if((new Date-j)/(1e3*60)<5)return e.value.clockedIn=L.clockedIn||!1,e.value.onBreak=L.onBreak||!1,e.value.clockInTime=L.clockInTime||null,n.value=L.breakStartTime||null,!0}}catch(I){console.warn("Failed to load attendance state from localStorage:",I)}return!1};let v=null;const b=h(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),C=h(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),E=h(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),k=h(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),A=h(()=>o.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),B=h(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),M=h(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const I=new Date(e.value.clockInTime),j=new Date-I,U=Math.floor(j/(1e3*60)),O=Math.floor(U/60),_=U%60;return`${O}h ${_}m`}),P=h(()=>{if(e.value.onBreak&&n.value){const I=new Date(n.value);if(isNaN(I.getTime()))return"0h 0m 1s";{const j=Math.max(0,new Date-I),U=Math.floor(j/(1e3*60*60)),O=Math.floor(j%(1e3*60*60)/(1e3*60)),_=Math.floor(j%(1e3*60)/1e3);return`${U}h ${O}m ${_}s`}}return"0h 0m"});h(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const d=()=>{t.value=!t.value},c=()=>{if(e.value.clockedIn&&e.value.clockInTime){const I=new Date;let L;e.value.onBreak&&n.value?L=new Date(n.value):L=new Date(e.value.clockInTime);const j=I-L,U=Math.floor(j/(1e3*60*60)),O=Math.floor(j%(1e3*60*60)/(1e3*60)),_=Math.floor(j%(1e3*60)/1e3);a.value=`${U}h ${O}m ${_}s`}else a.value="0h 0m 0s"},s=async()=>{try{if(o.value=!0,e.value.clockedIn){const I=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,a.value="0h 0m 0s",u(),J()}else{const I=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=I.data.clock_in_time||new Date().toISOString(),u(),J()}}catch(I){console.error("Clock in/out failed:",I),alert("Action failed: "+I.message)}finally{o.value=!1}},l=async()=>{try{if(o.value=!0,e.value.onBreak){const I=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,u(),J()}else{n.value=new Date().toISOString(),e.value.onBreak=!0;const I=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});I.data.break_start_time&&(n.value=I.data.break_start_time),u(),J()}}catch(I){console.error("Break action failed:",I),alert("Action failed: "+I.message)}finally{o.value=!1}},g=async()=>{var I,L;try{const U=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=U.clocked_in||!1,e.value.onBreak=U.on_break||!1,e.value.clockInTime=U.clock_in_time||null,U.on_break)if(U.break_start_time)n.value=U.break_start_time;else if((I=U.current_session)!=null&&I.current_break_start)n.value=U.current_session.current_break_start;else if((L=U.current_session)!=null&&L.break_sessions&&U.current_session.break_sessions.length>0){const O=U.current_session.break_sessions[U.current_session.break_sessions.length-1];O&&!O.end&&(n.value=O.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value})}catch(j){console.error("Failed to fetch attendance status:",j)}},H=I=>{I.key==="attendance-update"&&g()},D=I=>{console.log("FloatingWidget: Received attendance state change:",I.detail);const{clockedIn:L,onBreak:j,clockInTime:U,breakStartTime:O}=I.detail;e.value.clockedIn=L,e.value.onBreak=j,e.value.clockInTime=U,j&&O?n.value=O:j||(n.value=null),u(),c(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:O})},J=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(I){console.warn("Failed to broadcast attendance update:",I)}};return te(async()=>{f()&&c(),await g(),u(),c(),v=setInterval(c,1e3),window.addEventListener("storage",H),window.addEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners registered")}),re(()=>{v&&clearInterval(v),window.removeEventListener("storage",H),window.removeEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners removed")}),(I,L)=>(m(),p("div",ma,[t.value?G("",!0):(m(),p("div",{key:0,onClick:d,class:R(["floating-button",k.value])},[r("div",ha,[r("div",{class:R(E.value)},null,2)]),r("div",ga,[r("div",pa,$(a.value),1),r("div",fa,$(C.value),1)]),V(N(xt),{class:"w-4 h-4 expand-icon"})],2)),t.value?(m(),p("div",{key:1,class:"expanded-widget",onClick:L[0]||(L[0]=rt(()=>{},["stop"]))},[r("div",ya,[r("div",ba,[r("div",{class:R(E.value)},null,2),r("span",wa,$(b.value),1)]),r("button",{onClick:d,class:"minimize-btn",title:"Minimize"},[V(N(Tt),{class:"w-4 h-4"})])]),r("div",ka,[r("div",Ea,$(a.value),1),r("div",xa,$(C.value),1)]),r("div",Ta,[r("button",{onClick:s,disabled:o.value,class:R(B.value)},$(A.value),11,Ca),e.value.clockedIn?(m(),p("button",{key:0,onClick:l,disabled:o.value,class:"break-action"},[(m(),Z(Le(e.value.onBreak?N(Oo):N(Bo)),{class:"w-3 h-3"})),de(" "+$(e.value.onBreak?"End":"Break"),1)],8,_a)):G("",!0)]),r("div",Aa,[r("div",Sa,[r("span",Ia,$(M.value),1),L[1]||(L[1]=r("span",{class:"stat-label"},"Today",-1))]),r("div",Na,[r("span",Ra,$(P.value),1),L[2]||(L[2]=r("span",{class:"stat-label"},"Break",-1))])])])):G("",!0),t.value?(m(),p("div",{key:2,class:"backdrop",onClick:d})):G("",!0)]))}},Ma=le(Da,[["__scopeId","data-v-421365b8"]]),La={class:"skip-links","aria-label":"Skip navigation links"},Ba=["href","onClick"],Oa={__name:"SkipLinks",setup(i){const{skipLinks:t,handleSkipLinkClick:e}=Ct();return(o,a)=>(m(),p("div",La,[(m(!0),p(ve,null,me(N(t),n=>(m(),p("a",{key:n.href,href:n.href,class:"skip-link sr-only-focusable",onClick:u=>N(e)(u,n.href)},$(n.label),9,Ba))),128))]))}},$a=le(Oa,[["__scopeId","data-v-f9a7b518"]]),Pa={class:"live-regions"},Va={__name:"LiveRegion",setup(i){const t=w(null),e=w(null),o=w(null);return te(()=>{wt.init()}),(a,n)=>(m(),p("div",Pa,[r("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),r("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),r("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:o},null,512)]))}},Fa=le(Va,[["__scopeId","data-v-94955163"]]),Oe=w("desktop"),ue=w({isCollapsed:!1,width:{expanded:256,collapsed:64}}),oe=w({isDrawerOpen:!1,headerHeight:64,bottomNavHeight:80}),ie=w({isTransitioning:!1,duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});function za(){const{windowWidth:i}=$e(),{isTransitioning:t}=ct(),e=h(()=>Oe.value),o=h(()=>{const d={marginLeft:ue.value.isCollapsed?ue.value.width.collapsed:ue.value.width.expanded,marginRight:0,paddingTop:0,paddingBottom:0,minHeight:"100vh"};return{...d,marginLeftPx:`${d.marginLeft}px`,transition:`margin-left ${ie.value.duration}ms ${ie.value.easing}`}}),a=h(()=>{const d=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top").replace("px",""))||0,c=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom").replace("px",""))||0,s={marginLeft:0,marginRight:0,paddingTop:oe.value.headerHeight+d,paddingBottom:oe.value.bottomNavHeight+c,minHeight:`calc(100vh - ${oe.value.headerHeight+oe.value.bottomNavHeight}px)`};return{...s,paddingTopPx:`${s.paddingTop}px`,paddingBottomPx:`${s.paddingBottom}px`,transition:`all ${ie.value.duration}ms ${ie.value.easing}`}}),n=h(()=>e.value==="desktop"?o.value:a.value),u=h(()=>{const d={"main-content-area":!0,"gpu-accelerated":!0};return d[`${e.value}-layout`]=!0,e.value==="desktop"&&(d["sidebar-collapsed"]=ue.value.isCollapsed,d["sidebar-expanded"]=!ue.value.isCollapsed),e.value==="mobile"&&(d["drawer-open"]=oe.value.isDrawerOpen,d["drawer-closed"]=!oe.value.isDrawerOpen),ie.value.isTransitioning||t.value?d.transitioning=!0:d["transition-complete"]=!0,d}),f=h(()=>{const d={"content-inner":!0,"transition-all":!0,"duration-300":!0,"ease-out":!0};return e.value==="mobile"&&oe.value.isDrawerOpen&&(d["opacity-50"]=!0,d["pointer-events-none"]=!0,d["scale-95"]=!0),d}),v=h(()=>{const d={};return e.value==="desktop"?(d["--sidebar-width"]=`${n.value.marginLeft}px`,d["--content-margin-left"]=n.value.marginLeftPx):(d["--mobile-header-height"]=`${oe.value.headerHeight}px`,d["--mobile-bottom-nav-height"]=`${oe.value.bottomNavHeight}px`,d["--content-padding-top"]=n.value.paddingTopPx,d["--content-padding-bottom"]=n.value.paddingBottomPx),d["--layout-transition-duration"]=`${ie.value.duration}ms`,d["--layout-transition-easing"]=ie.value.easing,d}),b=d=>{ue.value.isCollapsed!==d&&(ue.value.isCollapsed=d,k("sidebar-toggle"))},C=d=>{oe.value.isDrawerOpen!==d&&(oe.value.isDrawerOpen=d,d?document.body.style.overflow="hidden":document.body.style.overflow="")},E=d=>{if(Oe.value!==d){const c=Oe.value;Oe.value=d,k("layout-type-change",{from:c,to:d})}},k=async(d,c={})=>{if(ie.value.isTransitioning){console.warn("[useLayoutSpacing] Transition already in progress, skipping");return}ie.value.isTransitioning=!0;try{await Ue();const s=document.documentElement;Object.entries(v.value).forEach(([l,g])=>{s.style.setProperty(l,g)}),await new Promise(l=>setTimeout(l,ie.value.duration))}catch(s){console.error("[useLayoutSpacing] Layout transition error:",s)}finally{ie.value.isTransitioning=!1}},A=()=>{const d=i.value;d>=1440?ue.value.width.expanded=280:d>=1920?ue.value.width.expanded=320:ue.value.width.expanded=256,d<=375?(oe.value.headerHeight=56,oe.value.bottomNavHeight=72):d<=640?(oe.value.headerHeight=64,oe.value.bottomNavHeight=80):(oe.value.headerHeight=68,oe.value.bottomNavHeight=84)},B=()=>{const d=n.value,c=i.value,s=window.innerHeight;let l,g;return e.value==="desktop"?(l=c-d.marginLeft,g=s):(l=c,g=s-d.paddingTop-d.paddingBottom),{width:l,height:g,availableWidth:Math.max(l,320),availableHeight:Math.max(g,200)}},M=()=>{const d=[],c=document.querySelector('[data-navigation-type="desktop"]'),s=document.querySelector('[data-navigation-type="mobile"]');if(c&&s){const g=window.getComputedStyle(c).display!=="none",H=window.getComputedStyle(s).display!=="none";g&&H&&d.push("Both desktop and mobile navigation are visible")}const l=document.querySelector(".main-content-area");if(l){const g=window.getComputedStyle(l),H=parseInt(g.marginLeft),D=n.value.marginLeft;Math.abs(H-D)>5&&d.push(`Content margin mismatch: expected ${D}px, got ${H}px`)}return d};ge(e,(d,c)=>{d!==c&&E(d)},{immediate:!0}),ge(i,()=>{A()},{immediate:!0});const P=()=>{};return{layoutType:h(()=>e.value),currentSpacing:n,sidebarState:h(()=>ue.value),mobileState:h(()=>oe.value),isTransitioning:h(()=>ie.value.isTransitioning),mainContentClasses:u,contentInnerClasses:f,cssCustomProperties:v,updateSidebarState:b,updateMobileDrawerState:C,updateLayoutType:E,executeLayoutTransition:k,getContentAreaDimensions:B,detectLayoutConflicts:M,debugLayoutSpacing:P,adjustForScreenSize:A}}function Ha(){const{props:i}=We(),{user:t}=pe();let e;const o=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(n=>{var f;const u=((f=t.value)==null?void 0:f.name)||"Employee";n.showNotification(`Hi ${u}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},a=()=>{const n=new Date,u=new Date(i.auth.user.clock_in_time);(isNaN(u.getTime())||n.getTime()-u.getTime()>5*60*1e3)&&o()};te(()=>{a(),e=setInterval(a,5*60*1e3)}),re(()=>{clearInterval(e)})}function Ga(){const{isAuthenticated:i,user:t}=pe(),e=We();let o=null;const a=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(u=>{var v;const f=((v=t.value)==null?void 0:v.name)||"Employee";u.showNotification(`Hi ${f}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},n=()=>{if(!i.value)return;const u=e.props.auth.user.todays_attendance;if(u&&u.clock_in_time&&!u.clock_out_time){const f=new Date(u.clock_in_time);(new Date-f)/1e3/60/60>=7.5&&a()}};te(()=>{o=setInterval(n,5*60*1e3),n()}),re(()=>{o&&clearInterval(o)})}function ja(){const i=We();return ge(()=>i.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:i.props.flash}}const Ua={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},Wa=["aria-hidden"],Ya={"aria-label":"User account menu"},qa=["aria-label"],tr={__name:"AuthenticatedLayout",setup(i){const t=kt(),e=w("desktop"),o=w(!1),{getUserProperty:a,getAuthError:n}=pe();$e();const{isDark:u,initializeTheme:f}=Pe();Ha(),Ga(),ja(),te(()=>{f()});const{mainContentClasses:v,contentInnerClasses:b,cssCustomProperties:C,updateSidebarState:E,updateMobileDrawerState:k,updateLayoutType:A,isTransitioning:B}=za(),M=h(()=>a("name","User")),P=h(()=>a("email","")),d=h(()=>n()),c=h(()=>!!d.value),s=h(()=>{try{return route().current()||""}catch(y){return console.warn("[LAYOUT] Route helper not available:",y),window.location.pathname.replace("/","")||"dashboard"}}),l=y=>{},g=y=>{e.value=y.to,A(y.to)},H=y=>{o.value=y,E(y)},D=y=>{y.sidebarCollapsed!==void 0&&(o.value=y.sidebarCollapsed)},J=h(()=>({"layout-container":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value,"desktop-layout":e.value==="desktop","mobile-layout":e.value==="mobile"}));h(()=>{const y=v.value,z={"has-header":_.value};return{...y,...z}});const I=h(()=>({"px-6":!0,"py-4":!0,flex:!0,"items-center":!0,"justify-between":!0,"shadow-sm":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),L=h(()=>({"px-6":!0,"py-4":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),j=h(()=>({"flex-1":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value})),U=w(!1),O=w(!1),_=h(()=>!!t.header),T=y=>{U.value=y,k(y),y?document.body.style.overflow="hidden":document.body.style.overflow=""},F=y=>{O.value=y},x=h(()=>b.value);return(y,z)=>(m(),p("div",null,[V($a),V(Fa),V(Mt),V(va),V(Ma),c.value?(m(),p("div",Ua,[z[0]||(z[0]=r("p",{class:"font-semibold"},"Authentication Error:",-1)),r("p",null,$(d.value),1),z[1]||(z[1]=r("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):G("",!0),V(Jn,{"current-route":s.value,"initially-collapsed":o.value,onNavigate:l,onCollapseChange:H,onNavigationTypeChange:g,onNavigationTransition:F,onStateChange:D,onMobileDrawerToggle:T},null,8,["current-route","initially-collapsed"]),r("div",{class:R(J.value)},[r("div",{class:R(["main-content-area","desktop-layout","gpu-accelerated",{"sidebar-collapsed":o.value,"sidebar-expanded":!o.value,transitioning:O.value||N(B),"has-header":_.value}]),style:je({marginLeft:e.value==="desktop"?o.value?"64px":"256px":"0",transition:"margin-left 300ms cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"100vh",...N(C)}),"data-layout-type":"authenticated-content","aria-hidden":O.value?"true":"false"},[e.value==="desktop"&&N(t).header?(m(),p("header",{key:0,class:R(["content-header",I.value]),role:"banner","aria-label":"Page header"},[r("div",{class:R(["text-lg font-semibold transition-colors duration-200",N(u)?"text-neutral-100":"text-neutral-900"])},[he(y.$slots,"header")],2),r("nav",Ya,[V(st,{align:"right",width:"48"},{trigger:Q(()=>[r("button",{class:R(["flex items-center p-2 rounded-lg transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",N(u)?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"]),"aria-label":`User menu for ${M.value}`,"aria-haspopup":"true","aria-expanded":"false"},[z[2]||(z[2]=r("div",{class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},[r("svg",{class:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),r("span",{class:R(["ml-2 text-sm font-medium",N(u)?"text-neutral-200":"text-neutral-700"])},$(M.value),3)],10,qa)]),content:Q(()=>[r("div",{class:R(["px-4 py-2 border-b",N(u)?"border-neutral-600 bg-neutral-800":"border-neutral-200 bg-white"])},[r("p",{class:R(["text-sm font-medium",N(u)?"text-neutral-100":"text-neutral-900"])},$(M.value),3),r("p",{class:R(["text-xs",N(u)?"text-neutral-400":"text-neutral-500"])},$(P.value),3)],2),V(Ce,{href:y.route("profile.edit")},{default:Q(()=>z[3]||(z[3]=[de(" 👤 My Profile ")])),_:1,__:[3]},8,["href"]),V(Ce,{href:y.route("profile.edit")},{default:Q(()=>z[4]||(z[4]=[de(" ⚙️ Profile Settings ")])),_:1,__:[4]},8,["href"]),V(Ce,{href:y.route("email-preferences.show")},{default:Q(()=>z[5]||(z[5]=[de(" 📧 Email Preferences ")])),_:1,__:[5]},8,["href"]),V(Ce,{href:y.route("logout"),method:"post",as:"button"},{default:Q(()=>z[6]||(z[6]=[de(" Log Out ")])),_:1,__:[6]},8,["href"])]),_:1})])],2)):G("",!0),e.value==="mobile"&&N(t).header?(m(),p("header",{key:1,class:R(["content-header",L.value]),role:"banner","aria-label":"Page header"},[r("div",{class:R(["text-lg font-semibold",N(u)?"text-neutral-100":"text-neutral-900"])},[he(y.$slots,"header")],2)],2)):G("",!0),r("main",{id:"main-content",class:R(["content-body",j.value]),role:"main","aria-label":"Main content",tabindex:"-1"},[r("div",{class:R(x.value)},[he(y.$slots,"default")],2)],2)],14,Wa)],2)]))}};export{tr as _,Bo as a,$e as b,st as c,ae as n,Oo as r,ja as u};
