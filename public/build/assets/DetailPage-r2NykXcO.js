import{f as u,e as F,z as G,B as Q,c as a,o as n,i as c,F as $,r as N,n as p,g as v,s as V,t as A,a as d,k as B,u as O,h as J,T as X,l as Z,S as ee,A as z,Q as se}from"./app-BP0mJPoz.js";import{L as M}from"./InfoCard-BqjUNkQm.js";import{u as te}from"./useAuth-nbMsfpWI.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{x as re,c as ne,k as ae}from"./Icon-BHWzvrQ1.js";function oe(){const{isAuthenticated:e,roles:b,hasRole:o,hasAnyRole:x}=te(),_=(l,m)=>{},f=(l,m={})=>{try{return m.requireAuth!==!1&&!e.value?m.fallback!==void 0?m.fallback:!1:l()}catch(I){return _(I,m.operation||"unknown operation"),m.fallback!==void 0?m.fallback:!1}},r={EMPLOYEE_VIEW:"employee.view",EMPLOYEE_CREATE:"employee.create",EMPLOYEE_EDIT:"employee.edit",EMPLOYEE_DELETE:"employee.delete",DEPARTMENT_VIEW:"department.view",DEPARTMENT_CREATE:"department.create",DEPARTMENT_EDIT:"department.edit",DEPARTMENT_DELETE:"department.delete",LEAVE_VIEW:"leave.view",LEAVE_CREATE:"leave.create",LEAVE_APPROVE:"leave.approve",LEAVE_DELETE:"leave.delete",ATTENDANCE_VIEW:"attendance.view",ATTENDANCE_EDIT:"attendance.edit",ATTENDANCE_REPORT:"attendance.report",PROJECT_VIEW:"project.view",PROJECT_CREATE:"project.create",PROJECT_EDIT:"project.edit",PROJECT_DELETE:"project.delete",TASK_VIEW:"task.view",TASK_CREATE:"task.create",TASK_EDIT:"task.edit",TASK_ASSIGN:"task.assign",FEEDBACK_VIEW:"feedback.view",FEEDBACK_CREATE:"feedback.create",FEEDBACK_RESPOND:"feedback.respond",ADMIN_USERS:"admin.users",ADMIN_ROLES:"admin.roles",ADMIN_SETTINGS:"admin.settings"},k={Admin:Object.values(r),HR:[r.EMPLOYEE_VIEW,r.EMPLOYEE_CREATE,r.EMPLOYEE_EDIT,r.DEPARTMENT_VIEW,r.DEPARTMENT_CREATE,r.DEPARTMENT_EDIT,r.LEAVE_VIEW,r.LEAVE_APPROVE,r.ATTENDANCE_VIEW,r.ATTENDANCE_REPORT,r.FEEDBACK_VIEW,r.FEEDBACK_RESPOND],Manager:[r.EMPLOYEE_VIEW,r.LEAVE_VIEW,r.LEAVE_APPROVE,r.ATTENDANCE_VIEW,r.PROJECT_VIEW,r.PROJECT_CREATE,r.PROJECT_EDIT,r.TASK_VIEW,r.TASK_CREATE,r.TASK_EDIT,r.TASK_ASSIGN,r.FEEDBACK_VIEW],Employee:[r.LEAVE_VIEW,r.LEAVE_CREATE,r.ATTENDANCE_VIEW,r.PROJECT_VIEW,r.TASK_VIEW,r.TASK_CREATE,r.TASK_EDIT,r.FEEDBACK_CREATE]},T=u(()=>f(()=>{if(!e.value||!b.value.length)return[];const l=new Set;return b.value.forEach(m=>{(k[m]||[]).forEach(D=>l.add(D))}),Array.from(l)},{fallback:[],operation:"getting user permissions",component:"usePermissions",requireAuth:!1})),i=l=>f(()=>!l||typeof l!="string"?(console.warn("[PERMISSIONS] Invalid permission parameter:",l),!1):e.value?T.value.includes(l):!1,{fallback:!1,operation:`checking permission: ${l}`,component:"usePermissions"}),w=l=>f(()=>Array.isArray(l)?e.value?l.some(m=>i(m)):!1:(console.warn("[PERMISSIONS] hasAnyPermission expects an array:",l),!1),{fallback:!1,operation:`checking any permissions: ${l}`,component:"usePermissions"}),g=l=>f(()=>Array.isArray(l)?e.value?l.every(m=>i(m)):!1:(console.warn("[PERMISSIONS] hasAllPermissions expects an array:",l),!1),{fallback:!1,operation:`checking all permissions: ${l}`,component:"usePermissions"}),P=l=>{try{return o(l)}catch{return!1}},L=u(()=>f(()=>x(["Admin","HR"]),{fallback:!1,operation:"checking employee management access",component:"usePermissions"})),W=u(()=>f(()=>x(["Admin","HR","Manager"]),{fallback:!1,operation:"checking HR operations access",component:"usePermissions"})),R=u(()=>f(()=>x(["Admin","HR","Manager"]),{fallback:!1,operation:"checking leave approval access",component:"usePermissions"})),j=u(()=>f(()=>x(["Admin","Manager"]),{fallback:!1,operation:"checking project management access",component:"usePermissions"})),S=u(()=>f(()=>o("Admin"),{fallback:!1,operation:"checking admin privileges",component:"usePermissions"}));return{PERMISSIONS:r,ROLE_PERMISSIONS:k,userPermissions:T,hasPermission:i,hasAnyPermission:w,hasAllPermissions:g,canAccessRole:P,canManageEmployees:L,canAccessHROperations:W,canApproveLeaves:R,canManageProjects:j,isAdmin:S,getPermissionSummary:()=>({}),debugPermissions:()=>{}}}const le={key:0,class:"flex items-center space-x-2"},ie=["onClick","disabled","title"],ce={key:2},ue={key:1,class:"flex items-center space-x-2"},de=["onClick","disabled","title"],me={key:2},fe=["disabled","aria-expanded"],ge={class:"py-1",role:"none"},Ee=["onClick","disabled"],ye={key:2,class:"ml-auto text-xs text-neutral-400"},pe={key:3,class:"text-xs text-neutral-500"},be={__name:"ActionBar",props:{actions:{type:Array,default:()=>[],validator:e=>e.every(b=>b.id&&(b.label||b.icon)&&typeof b.handler=="function")},layout:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","compact"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},loading:{type:Boolean,default:!1},loadingActions:{type:Array,default:()=>[]},maxPrimaryActions:{type:Number,default:3},maxSecondaryActions:{type:Number,default:2},requiredPermissions:{type:Array,default:()=>[]},requireAllPermissions:{type:Boolean,default:!1}},emits:["action"],setup(e,{emit:b}){const o=e,x=b,{hasAnyPermission:_,hasAllPermissions:f}=oe(),r=F(!1),k=F(null),T=u(()=>{const s="action-bar flex items-center",y={horizontal:"space-x-3",vertical:"flex-col space-y-2",compact:"space-x-1"},t={sm:"text-sm",md:"",lg:"text-lg"};return`${s} ${y[o.layout]} ${t[o.size]}`}),i=u(()=>o.actions.filter(s=>s.permissions&&s.permissions.length&&!(s.requireAllPermissions?f(s.permissions):_(s.permissions))?!1:typeof s.visible=="function"?s.visible():s.visible!==!1)),w=u(()=>i.value.filter(s=>s.priority==="primary").slice(0,o.maxPrimaryActions)),g=u(()=>i.value.filter(s=>s.priority==="secondary"||!s.priority).slice(0,o.maxSecondaryActions)),P=u(()=>{const s=i.value.filter(E=>E.priority==="primary").slice(o.maxPrimaryActions),y=i.value.filter(E=>E.priority==="secondary"||!E.priority).slice(o.maxSecondaryActions),t=i.value.filter(E=>E.priority==="dropdown");return[...s,...y,...t]}),L=u(()=>{const s="inline-flex items-center justify-center p-2 rounded-md text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",y=o.loading?"opacity-50 cursor-not-allowed":"";return`${s} ${y}`}),W=u(()=>"absolute right-0 z-10 mt-2 w-56 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"),R=u(()=>o.requiredPermissions.length>0),j=u(()=>R.value?o.requireAllPermissions?f(o.requiredPermissions):_(o.requiredPermissions):!0),S=(s,y="primary")=>{const t="inline-flex items-center px-3 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",E={primary:{primary:"border-transparent text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",secondary:"border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50 focus:ring-primary-500",success:"border-transparent text-white bg-success-600 hover:bg-success-700 focus:ring-success-500",warning:"border-transparent text-white bg-warning-600 hover:bg-warning-700 focus:ring-warning-500",error:"border-transparent text-white bg-error-600 hover:bg-error-700 focus:ring-error-500"},secondary:{primary:"border-primary-300 text-primary-700 bg-primary-50 hover:bg-primary-100 focus:ring-primary-500",secondary:"border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50 focus:ring-neutral-500",success:"border-success-300 text-success-700 bg-success-50 hover:bg-success-100 focus:ring-success-500",warning:"border-warning-300 text-warning-700 bg-warning-50 hover:bg-warning-100 focus:ring-warning-500",error:"border-error-300 text-error-700 bg-error-50 hover:bg-error-100 focus:ring-error-500"}},C={sm:"px-2 py-1 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2 text-base"},K=s.disabled||o.loading||h(s.id)?"opacity-50 cursor-not-allowed":"",H=s.variant||"primary",U=E[y][H]||E[y].primary;return`${t} ${U} ${C[o.size]} ${K}`},q=s=>{const y="group flex items-center w-full px-4 py-2 text-sm text-left hover:bg-neutral-100 focus:outline-none focus:bg-neutral-100 transition-colors duration-200",t={error:"text-error-700 hover:bg-error-50 focus:bg-error-50",warning:"text-warning-700 hover:bg-warning-50 focus:bg-warning-50",success:"text-success-700 hover:bg-success-50 focus:bg-success-50"},E=s.disabled||o.loading||h(s.id)?"opacity-50 cursor-not-allowed":"",C=s.variant,K=C&&t[C]?t[C]:"text-neutral-700";return`${y} ${K} ${E}`},h=s=>o.loadingActions.includes(s),l=s=>{if(!(s.disabled||o.loading||h(s.id))){if(s.permissions&&s.permissions.length&&!(s.requireAllPermissions?f(s.permissions):_(s.permissions))){console.warn(`Action ${s.id} blocked: insufficient permissions`);return}typeof s.handler=="function"&&s.handler(),x("action",s)}},m=s=>{l(s),r.value=!1},I=()=>{o.loading||(r.value=!r.value)},D=s=>{k.value&&!k.value.contains(s.target)&&(r.value=!1)};return G(()=>{document.addEventListener("click",D)}),Q(()=>{document.removeEventListener("click",D)}),(s,y)=>(n(),a("div",{class:p(T.value)},[w.value.length?(n(),a("div",le,[(n(!0),a($,null,N(w.value,t=>(n(),a("button",{key:t.id,onClick:E=>l(t),disabled:t.disabled||e.loading||h(t.id),class:p(S(t,"primary")),title:t.tooltip},[h(t.id)?(n(),v(M,{key:0,size:"sm",class:"mr-2"})):t.icon?(n(),v(V(t.icon),{key:1,class:p(["w-4 h-4",{"mr-2":t.label}])},null,8,["class"])):c("",!0),t.label?(n(),a("span",ce,A(t.label),1)):c("",!0)],10,ie))),128))])):c("",!0),g.value.length?(n(),a("div",ue,[(n(!0),a($,null,N(g.value,t=>(n(),a("button",{key:t.id,onClick:E=>l(t),disabled:t.disabled||e.loading||h(t.id),class:p(S(t,"secondary")),title:t.tooltip},[h(t.id)?(n(),v(M,{key:0,size:"sm",class:"mr-2"})):t.icon?(n(),v(V(t.icon),{key:1,class:p(["w-4 h-4",{"mr-2":t.label}])},null,8,["class"])):c("",!0),t.label?(n(),a("span",me,A(t.label),1)):c("",!0)],10,de))),128))])):c("",!0),P.value.length?(n(),a("div",{key:2,class:"relative",ref_key:"dropdownRef",ref:k},[d("button",{onClick:I,disabled:e.loading,class:p(L.value),"aria-expanded":r.value,"aria-haspopup":"true"},[B(O(re),{class:"w-4 h-4"})],10,fe),B(X,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:J(()=>[r.value?(n(),a("div",{key:0,class:p(W.value),role:"menu","aria-orientation":"vertical"},[d("div",ge,[(n(!0),a($,null,N(P.value,t=>(n(),a("button",{key:t.id,onClick:E=>m(t),disabled:t.disabled||e.loading||h(t.id),class:p(q(t)),role:"menuitem"},[h(t.id)?(n(),v(M,{key:0,size:"sm",class:"mr-3"})):t.icon?(n(),v(V(t.icon),{key:1,class:"w-4 h-4 mr-3"})):c("",!0),d("span",null,A(t.label),1),t.shortcut?(n(),a("span",ye,A(t.shortcut),1)):c("",!0)],10,Ee))),128))])],2)):c("",!0)]),_:1})],512)):c("",!0),R.value&&!j.value?(n(),a("div",pe," Insufficient permissions ")):c("",!0)],2))}},he=Y(be,[["__scopeId","data-v-aae129fc"]]),ve={class:"detail-page"},Ae={class:"detail-page-header bg-white border-b border-neutral-200 px-6 py-4 mb-6"},xe={class:"flex items-center justify-between"},ke={class:"flex items-center space-x-4"},_e=["aria-label"],we={class:"min-w-0 flex-1"},Pe={class:"flex items-center space-x-3"},Te={key:0,class:"flex-shrink-0 w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"},Ce={key:1,class:"flex-shrink-0"},Re=["src","alt"],Se={key:1,class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},Ie={class:"text-sm font-semibold text-primary-700"},De={class:"min-w-0 flex-1"},$e={class:"text-2xl font-bold text-neutral-900 truncate"},Ne={key:0,class:"text-sm text-neutral-600 mt-1"},Ve={key:2,class:"flex-shrink-0"},Oe={key:0,class:"flex mt-2","aria-label":"Breadcrumb"},Me={class:"flex items-center space-x-2 text-sm"},Be={class:"flex items-center"},Le=["aria-current"],We={class:"detail-page-content px-6 pb-6"},je={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10"},Ke={__name:"DetailPage",props:{title:{type:String,required:!0},subtitle:{type:String,default:null},icon:{type:[Object,Function],default:null},avatar:{type:Object,default:null,validator:e=>e?typeof e=="object"&&(e.src||e.initials):!0},status:{type:Object,default:null,validator:e=>e?typeof e=="object"&&e.label:!0},breadcrumbs:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},layout:{type:String,default:"two-column",validator:e=>["single-column","two-column","three-column"].includes(e)},showBackButton:{type:Boolean,default:!0},backButtonLabel:{type:String,default:"Go back"},backUrl:{type:String,default:null},loading:{type:Boolean,default:!1}},emits:["back"],setup(e,{emit:b}){const o=e,x=b,_=u(()=>{const i="grid gap-6";switch(o.layout){case"single-column":return`${i} grid-cols-1`;case"two-column":return`${i} grid-cols-1 lg:grid-cols-3`;case"three-column":return`${i} grid-cols-1 md:grid-cols-2 lg:grid-cols-3`;default:return`${i} grid-cols-1 lg:grid-cols-3`}}),f=u(()=>{switch(o.layout){case"single-column":return"col-span-1";case"two-column":return"lg:col-span-2";case"three-column":return"md:col-span-1 lg:col-span-2";default:return"lg:col-span-2"}}),r=u(()=>{switch(o.layout){case"single-column":return"col-span-1";case"two-column":return"lg:col-span-1";case"three-column":return"md:col-span-1 lg:col-span-1";default:return"lg:col-span-1"}}),k=i=>{const w="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",g={success:"bg-success-100 text-success-800",warning:"bg-warning-100 text-warning-800",error:"bg-error-100 text-error-800",info:"bg-info-100 text-info-800",neutral:"bg-neutral-100 text-neutral-800",primary:"bg-primary-100 text-primary-800"};return`${w} ${g[i.variant]||g.neutral}`},T=()=>{o.backUrl?se.visit(o.backUrl):(x("back"),o.backUrl||window.history.back())};return(i,w)=>(n(),a("div",ve,[d("div",Ae,[d("div",xe,[d("div",ke,[e.showBackButton?(n(),a("button",{key:0,onClick:T,class:"inline-flex items-center p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200","aria-label":e.backButtonLabel},[B(O(ne),{class:"w-5 h-5"})],8,_e)):c("",!0),d("div",we,[d("div",Pe,[e.icon?(n(),a("div",Te,[(n(),v(V(e.icon),{class:"w-6 h-6 text-primary-600"}))])):e.avatar?(n(),a("div",Ce,[e.avatar.src?(n(),a("img",{key:0,src:e.avatar.src,alt:e.avatar.alt||e.title,class:"w-10 h-10 rounded-full object-cover"},null,8,Re)):(n(),a("div",Se,[d("span",Ie,A(e.avatar.initials),1)]))])):c("",!0),d("div",De,[d("h1",$e,A(e.title),1),e.subtitle?(n(),a("p",Ne,A(e.subtitle),1)):c("",!0)]),e.status?(n(),a("div",Ve,[d("span",{class:p(k(e.status))},A(e.status.label),3)])):c("",!0)]),e.breadcrumbs&&e.breadcrumbs.length?(n(),a("nav",Oe,[d("ol",Me,[(n(!0),a($,null,N(e.breadcrumbs,(g,P)=>(n(),a("li",{key:P},[d("div",Be,[P>0?(n(),v(O(ae),{key:0,class:"w-4 h-4 text-neutral-400 mr-2"})):c("",!0),g.href&&!g.current?(n(),v(O(ee),{key:1,href:g.href,class:"text-neutral-500 hover:text-neutral-700 transition-colors duration-200"},{default:J(()=>[Z(A(g.label),1)]),_:2},1032,["href"])):(n(),a("span",{key:2,class:"text-neutral-900 font-medium","aria-current":g.current?"page":void 0},A(g.label),9,Le))])]))),128))])])):c("",!0)])]),e.actions&&e.actions.length?(n(),v(he,{key:0,actions:e.actions,loading:e.loading,class:"flex-shrink-0 ml-6"},null,8,["actions","loading"])):c("",!0)])]),d("div",We,[d("div",{class:p(_.value)},[d("div",{class:p(f.value)},[z(i.$slots,"primary",{},void 0,!0),z(i.$slots,"default",{},void 0,!0)],2),i.$slots.secondary?(n(),a("div",{key:0,class:p(r.value)},[z(i.$slots,"secondary",{},void 0,!0)],2)):c("",!0)],2)]),e.loading?(n(),a("div",je,[B(M,{size:"lg"})])):c("",!0)]))}},He=Y(Ke,[["__scopeId","data-v-f52f1f31"]]);export{He as D,oe as u};
