import{e as F,f as h,g as H,o as v,h as w,k as D,a as e,c as k,i as x,n as C,t as o,w as ae,b as oe,l as j,u as re,S as ne,Q as z}from"./app-BABwUXl-.js";import{A as le}from"./AuthenticatedLayout-D911acWM.js";import{P as de}from"./PageLayout-CevOU2Zv.js";import{C as ie}from"./ContentCard-DgmDuECC.js";import{H as ue}from"./HorizontalCalendar-CjgO4tpc.js";import{u as me}from"./useAuth-Bs38W61b.js";import"./icons-rhSSQCfC.js";import"./UsersIcon-pfcgBTrh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-BNjNz92h.js";import"./Icon-D9sfh6F2.js";import"./AcademicCapIcon-j9cFGba1.js";const ce={class:"flex justify-end mb-6"},ve={class:"mb-8"},fe={key:0,class:"border-t border-gray-200 pt-6 mb-6"},ge={class:"flex items-center space-x-4"},ye={class:"flex-shrink-0"},xe={class:"h-16 w-16 rounded-full bg-gradient-to-r from-teal-500 to-cyan-600 flex items-center justify-center"},be={class:"text-xl font-bold text-white"},pe={class:"flex-1"},he={class:"text-lg font-medium text-gray-900"},we={class:"text-sm text-gray-600"},ke={class:"flex items-center mt-2 space-x-4"},Ae={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},De={class:"border-t border-gray-200 pt-6 mb-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},je={class:"flex items-center"},Re={class:"text-sm font-medium text-gray-900"},Le={class:"text-sm font-medium text-gray-900"},Se={class:"text-sm font-medium text-gray-900"},Me={class:"text-sm font-medium text-gray-900"},Ne={class:"text-sm font-medium text-gray-900"},$e={key:0},qe={class:"text-sm font-medium text-gray-500 mb-1"},Be={class:"text-sm font-medium text-gray-900"},Ie={class:"border-t border-gray-200 pt-6 mb-6"},Te={class:"bg-gray-50 rounded-lg p-4"},_e={class:"text-sm text-gray-900 leading-relaxed"},Ee={key:1,class:"border-t border-gray-200 pt-6 mb-6"},Pe={class:"text-lg font-medium text-gray-900 mb-4"},Ue={key:2,class:"border-t border-gray-200 pt-6"},Oe={class:"space-y-4"},Ve={class:"flex space-x-3"},Fe=["disabled"],He=["disabled"],ze={class:"border-t border-gray-200 pt-6"},ot={__name:"Show",props:{leave:{type:Object,required:!0},leaveBalance:{type:Number,default:null}},setup(a){const r=a,{hasAnyRole:R}=me(),n=F(!1),b=F(""),A=h(()=>R(["Admin","HR","Manager"])),Q=h(()=>{var s;return R(["Admin","HR"])?!0:((s=r.leave)==null?void 0:s.status)==="pending"&&!A.value}),G=h(()=>{var s;return[{label:"Dashboard",href:route("dashboard")},{label:"Leave Management",href:route("leaves.index")},{label:`Request #${(s=r.leave)==null?void 0:s.id}`,current:!0}]}),J=h(()=>{var t;const s=[];return Q.value&&s.push({id:"edit",label:"Edit Request",icon:"pencil",variant:"secondary",href:route("leaves.edit",(t=r.leave)==null?void 0:t.id)}),s}),K=s=>!s||typeof s!="string"?"--":s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),L=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",W=(s,t)=>{if(!s||!t)return"N/A";const l=new Date(s),d=new Date(t),m=l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${m} - ${f}`},S=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",X=()=>{var g,y;if(!((g=r.leave)!=null&&g.from_date)||!((y=r.leave)!=null&&y.to_date))return"N/A";const s=r.leave.from_date,t=r.leave.to_date,l=s.split(/[-T\s]/),d=t.split(/[-T\s]/),m=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2])),p=new Date(parseInt(d[0]),parseInt(d[1])-1,parseInt(d[2])).getTime()-m.getTime(),i=Math.floor(p/(1e3*60*60*24))+1;if(i===1)return"1 day";if(i<=7)return`${i} days`;const u=Math.floor(i/7),c=i%7;return c===0?u===1?"1 week":`${u} weeks`:`${u} week${u>1?"s":""}, ${c} day${c>1?"s":""}`},Y=s=>({pending:"Pending Review",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"})[s]||s,Z=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",ee=()=>{var s;(s=r.leave)!=null&&s.id&&confirm("Are you sure you want to approve this leave request?")&&(n.value=!0,z.post(route("leaves.approve",r.leave.id),{comments:b.value},{onFinish:()=>{n.value=!1}}))},te=()=>{var s;(s=r.leave)!=null&&s.id&&confirm("Are you sure you want to reject this leave request?")&&(n.value=!0,z.post(route("leaves.reject",r.leave.id),{comments:b.value||"Request rejected"},{onFinish:()=>{n.value=!1}}))};return(s,t)=>(v(),H(le,null,{default:w(()=>{var l,d,m,f,p;return[D(de,{title:`Leave Request #${(l=a.leave)==null?void 0:l.id}`,subtitle:`${(m=(d=a.leave)==null?void 0:d.leave_type)==null?void 0:m.name} â€¢ ${W((f=a.leave)==null?void 0:f.from_date,(p=a.leave)==null?void 0:p.to_date)}`,breadcrumbs:G.value,actions:J.value},{default:w(()=>[D(ie,null,{default:w(()=>{var i,u,c,g,y,M,N,$,q,B,I,T,_,E,P,U,O,V;return[e("div",ce,[e("span",{class:C([Z((i=a.leave)==null?void 0:i.status),"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full"])},o(Y((u=a.leave)==null?void 0:u.status)),3)]),e("div",ve,[(c=a.leave)!=null&&c.from_date&&((g=a.leave)!=null&&g.to_date)?(v(),H(ue,{key:0,"start-date":a.leave.from_date,"end-date":a.leave.to_date,"leave-type":((M=(y=a.leave)==null?void 0:y.leave_type)==null?void 0:M.name)||"Leave",status:((N=a.leave)==null?void 0:N.status)||"pending"},null,8,["start-date","end-date","leave-type","status"])):x("",!0)]),A.value&&((q=($=a.leave)==null?void 0:$.employee)!=null&&q.user)?(v(),k("div",fe,[t[1]||(t[1]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Employee Information",-1)),e("div",ge,[e("div",ye,[e("div",xe,[e("span",be,o(K(a.leave.employee.user.name)),1)])]),e("div",pe,[e("h4",he,o(a.leave.employee.user.name),1),e("p",we,o(a.leave.employee.user.email),1),e("div",ke,[e("span",Ae," Employee ID: "+o(a.leave.employee.employee_code||"N/A"),1)])])])])):x("",!0),e("div",De,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Leave Details",-1)),e("dl",Ce,[e("div",null,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Leave Type",-1)),e("dd",je,[t[2]||(t[2]=e("div",{class:"w-3 h-3 rounded-full bg-teal-500 mr-2"},null,-1)),e("span",Re,o(((I=(B=a.leave)==null?void 0:B.leave_type)==null?void 0:I.name)||"N/A"),1)])]),e("div",null,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Duration",-1)),e("dd",Le,o(X()),1)]),e("div",null,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Start Date",-1)),e("dd",Se,o(L((T=a.leave)==null?void 0:T.from_date)),1)]),e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"End Date",-1)),e("dd",Me,o(L((_=a.leave)==null?void 0:_.to_date)),1)]),e("div",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Submitted On",-1)),e("dd",Ne,o(S((E=a.leave)==null?void 0:E.created_at)),1)]),(P=a.leave)!=null&&P.approved_at?(v(),k("div",$e,[e("dt",qe,o(a.leave.status==="approved"?"Approved On":"Processed On"),1),e("dd",Be,o(S(a.leave.approved_at)),1)])):x("",!0)])]),e("div",Ie,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reason for Leave",-1)),e("div",Te,[e("p",_e,o(((U=a.leave)==null?void 0:U.reason)||"No reason provided"),1)])]),(O=a.leave)!=null&&O.approval_comments?(v(),k("div",Ee,[e("h3",Pe,o(a.leave.status==="approved"?"Approval Comments":"Rejection Comments"),1),e("div",{class:C(["rounded-lg p-4",a.leave.status==="approved"?"bg-green-50":"bg-red-50"])},[e("p",{class:C(["text-sm leading-relaxed",a.leave.status==="approved"?"text-green-900":"text-red-900"])},o(a.leave.approval_comments),3)],2)])):x("",!0),A.value&&((V=a.leave)==null?void 0:V.status)==="pending"?(v(),k("div",Ue,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Review & Approval",-1)),e("div",Oe,[e("div",null,[t[10]||(t[10]=e("label",{for:"approval-comments",class:"block text-sm font-medium text-gray-700 mb-2"}," Comments (Optional) ",-1)),ae(e("textarea",{id:"approval-comments","onUpdate:modelValue":t[0]||(t[0]=se=>b.value=se),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",placeholder:"Add any comments about this leave request..."},null,512),[[oe,b.value]])]),e("div",Ve,[e("button",{onClick:ee,disabled:n.value,class:"inline-flex items-center px-6 py-3 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition-colors duration-200"},[t[11]||(t[11]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),j(" "+o(n.value?"Approving...":"Approve Request"),1)],8,Fe),e("button",{onClick:te,disabled:n.value,class:"inline-flex items-center px-6 py-3 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 transition-colors duration-200"},[t[12]||(t[12]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),j(" "+o(n.value?"Rejecting...":"Reject Request"),1)],8,He)])])])):x("",!0),e("div",ze,[D(re(ne),{href:s.route("leaves.index"),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},{default:w(()=>t[14]||(t[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),j(" Back to Leaves ")])),_:1,__:[14]},8,["href"])])]}),_:1})]),_:1},8,["title","subtitle","breadcrumbs","actions"])]}),_:1}))}};export{ot as default};
