import{e as V,f as h,g as F,o as v,h as A,k as H,a as e,c as w,i as y,n as D,t as o,w as ae,b as oe,l as j,u as re,S as ne,Q as z}from"./app-Cm3llMqd.js";import{A as le}from"./AuthenticatedLayout-C8ec8lQo.js";import{P as de}from"./PageLayout-CUlxWFz9.js";import{H as ie}from"./HorizontalCalendar-DpKHF8cV.js";import{u as ue}from"./useAuth-CZfU0609.js";import"./icons-CB5xuajn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-CC5Tycr7.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-BFTpE9_M.js";import"./PageHeader-3hGWHw_8.js";import"./Icon-BzPSoVaV.js";/* empty css                                                                   */import"./AcademicCapIcon-Dp1Jkw0d.js";const me={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ce={class:"p-6"},ve={class:"flex justify-end mb-6"},ge={class:"mb-8"},fe={key:0,class:"border-t border-gray-200 pt-6 mb-6"},xe={class:"flex items-center space-x-4"},ye={class:"flex-shrink-0"},pe={class:"h-16 w-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center"},be={class:"text-xl font-bold text-white"},he={class:"flex-1"},we={class:"text-lg font-medium text-gray-900"},ke={class:"text-sm text-gray-600"},Ae={class:"flex items-center mt-2 space-x-4"},De={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},je={class:"border-t border-gray-200 pt-6 mb-6"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={class:"flex items-center"},Le={class:"text-sm font-medium text-gray-900"},Se={class:"text-sm font-medium text-gray-900"},Me={class:"text-sm font-medium text-gray-900"},Ne={class:"text-sm font-medium text-gray-900"},$e={class:"text-sm font-medium text-gray-900"},_e={key:0},qe={class:"text-sm font-medium text-gray-500 mb-1"},Be={class:"text-sm font-medium text-gray-900"},Ie={class:"border-t border-gray-200 pt-6 mb-6"},Te={class:"bg-gray-50 rounded-lg p-4"},Ee={class:"text-sm text-gray-900 leading-relaxed"},Pe={key:1,class:"border-t border-gray-200 pt-6 mb-6"},Ue={class:"text-lg font-medium text-gray-900 mb-4"},Oe={key:2,class:"border-t border-gray-200 pt-6"},Ve={class:"space-y-4"},Fe={class:"flex space-x-3"},He=["disabled"],ze=["disabled"],Qe={class:"border-t border-gray-200 pt-6"},nt={__name:"Show",props:{leave:{type:Object,required:!0},leaveBalance:{type:Number,default:null}},setup(a){const r=a,{hasAnyRole:R}=ue(),n=V(!1),p=V(""),k=h(()=>R(["Admin","HR","Manager"])),Q=h(()=>{var s;return R(["Admin","HR"])?!0:((s=r.leave)==null?void 0:s.status)==="pending"&&!k.value}),G=h(()=>{var s;return[{label:"Dashboard",href:route("dashboard")},{label:"Leave Management",href:route("leaves.index")},{label:`Request #${(s=r.leave)==null?void 0:s.id}`,current:!0}]}),J=h(()=>{var t;const s=[];return Q.value&&s.push({id:"edit",label:"Edit Request",icon:"pencil",variant:"secondary",href:route("leaves.edit",(t=r.leave)==null?void 0:t.id)}),s}),K=s=>!s||typeof s!="string"?"--":s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",W=(s,t)=>{if(!s||!t)return"N/A";const l=new Date(s),d=new Date(t),m=l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),g=d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${m} - ${g}`},L=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",X=()=>{var f,x;if(!((f=r.leave)!=null&&f.from_date)||!((x=r.leave)!=null&&x.to_date))return"N/A";const s=r.leave.from_date,t=r.leave.to_date,l=s.split(/[-T\s]/),d=t.split(/[-T\s]/),m=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2])),b=new Date(parseInt(d[0]),parseInt(d[1])-1,parseInt(d[2])).getTime()-m.getTime(),i=Math.floor(b/(1e3*60*60*24))+1;if(i===1)return"1 day";if(i<=7)return`${i} days`;const u=Math.floor(i/7),c=i%7;return c===0?u===1?"1 week":`${u} weeks`:`${u} week${u>1?"s":""}, ${c} day${c>1?"s":""}`},Y=s=>({pending:"Pending Review",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"})[s]||s,Z=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",ee=()=>{var s;(s=r.leave)!=null&&s.id&&confirm("Are you sure you want to approve this leave request?")&&(n.value=!0,z.post(route("leaves.approve",r.leave.id),{comments:p.value},{onFinish:()=>{n.value=!1}}))},te=()=>{var s;(s=r.leave)!=null&&s.id&&confirm("Are you sure you want to reject this leave request?")&&(n.value=!0,z.post(route("leaves.reject",r.leave.id),{comments:p.value||"Request rejected"},{onFinish:()=>{n.value=!1}}))};return(s,t)=>(v(),F(le,null,{default:A(()=>{var l,d,m,g,b;return[H(de,{title:`Leave Request #${(l=a.leave)==null?void 0:l.id}`,subtitle:`${(m=(d=a.leave)==null?void 0:d.leave_type)==null?void 0:m.name} â€¢ ${W((g=a.leave)==null?void 0:g.from_date,(b=a.leave)==null?void 0:b.to_date)}`,breadcrumbs:G.value,actions:J.value},{default:A(()=>{var i,u,c,f,x,S,M,N,$,_,q,B,I,T,E,P,U,O;return[e("div",me,[e("div",ce,[e("div",ve,[e("span",{class:D([Z((i=a.leave)==null?void 0:i.status),"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full"])},o(Y((u=a.leave)==null?void 0:u.status)),3)]),e("div",ge,[(c=a.leave)!=null&&c.from_date&&((f=a.leave)!=null&&f.to_date)?(v(),F(ie,{key:0,"start-date":a.leave.from_date,"end-date":a.leave.to_date,"leave-type":((S=(x=a.leave)==null?void 0:x.leave_type)==null?void 0:S.name)||"Leave",status:((M=a.leave)==null?void 0:M.status)||"pending"},null,8,["start-date","end-date","leave-type","status"])):y("",!0)]),k.value&&(($=(N=a.leave)==null?void 0:N.employee)!=null&&$.user)?(v(),w("div",fe,[t[1]||(t[1]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Employee Information",-1)),e("div",xe,[e("div",ye,[e("div",pe,[e("span",be,o(K(a.leave.employee.user.name)),1)])]),e("div",he,[e("h4",we,o(a.leave.employee.user.name),1),e("p",ke,o(a.leave.employee.user.email),1),e("div",Ae,[e("span",De," Employee ID: "+o(a.leave.employee.employee_code||"N/A"),1)])])])])):y("",!0),e("div",je,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Leave Details",-1)),e("dl",Re,[e("div",null,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Leave Type",-1)),e("dd",Ce,[t[2]||(t[2]=e("div",{class:"w-3 h-3 rounded-full bg-indigo-500 mr-2"},null,-1)),e("span",Le,o(((q=(_=a.leave)==null?void 0:_.leave_type)==null?void 0:q.name)||"N/A"),1)])]),e("div",null,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Duration",-1)),e("dd",Se,o(X()),1)]),e("div",null,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Start Date",-1)),e("dd",Me,o(C((B=a.leave)==null?void 0:B.from_date)),1)]),e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"End Date",-1)),e("dd",Ne,o(C((I=a.leave)==null?void 0:I.to_date)),1)]),e("div",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Submitted On",-1)),e("dd",$e,o(L((T=a.leave)==null?void 0:T.created_at)),1)]),(E=a.leave)!=null&&E.approved_at?(v(),w("div",_e,[e("dt",qe,o(a.leave.status==="approved"?"Approved On":"Processed On"),1),e("dd",Be,o(L(a.leave.approved_at)),1)])):y("",!0)])]),e("div",Ie,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reason for Leave",-1)),e("div",Te,[e("p",Ee,o(((P=a.leave)==null?void 0:P.reason)||"No reason provided"),1)])]),(U=a.leave)!=null&&U.approval_comments?(v(),w("div",Pe,[e("h3",Ue,o(a.leave.status==="approved"?"Approval Comments":"Rejection Comments"),1),e("div",{class:D(["rounded-lg p-4",a.leave.status==="approved"?"bg-green-50":"bg-red-50"])},[e("p",{class:D(["text-sm leading-relaxed",a.leave.status==="approved"?"text-green-900":"text-red-900"])},o(a.leave.approval_comments),3)],2)])):y("",!0),k.value&&((O=a.leave)==null?void 0:O.status)==="pending"?(v(),w("div",Oe,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Review & Approval",-1)),e("div",Ve,[e("div",null,[t[10]||(t[10]=e("label",{for:"approval-comments",class:"block text-sm font-medium text-gray-700 mb-2"}," Comments (Optional) ",-1)),ae(e("textarea",{id:"approval-comments","onUpdate:modelValue":t[0]||(t[0]=se=>p.value=se),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Add any comments about this leave request..."},null,512),[[oe,p.value]])]),e("div",Fe,[e("button",{onClick:ee,disabled:n.value,class:"inline-flex items-center px-6 py-3 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition-colors duration-200"},[t[11]||(t[11]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),j(" "+o(n.value?"Approving...":"Approve Request"),1)],8,He),e("button",{onClick:te,disabled:n.value,class:"inline-flex items-center px-6 py-3 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 transition-colors duration-200"},[t[12]||(t[12]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),j(" "+o(n.value?"Rejecting...":"Reject Request"),1)],8,ze)])])])):y("",!0),e("div",Qe,[H(re(ne),{href:s.route("leaves.index"),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},{default:A(()=>t[14]||(t[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),j(" Back to Leaves ")])),_:1,__:[14]},8,["href"])])])])]}),_:1},8,["title","subtitle","breadcrumbs","actions"])]}),_:1}))}};export{nt as default};
