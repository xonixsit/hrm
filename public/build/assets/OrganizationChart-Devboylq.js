import{f as a,b as r,p as e,c as M,g as x,e as m,u as n,y as b,n as V,F as _,t as k,Q as j,k as C,o as U,a as N,w as $,l as q,s as Z}from"./app-DAzcyEvr.js";import{_ as Q}from"./AuthenticatedLayout-CFGOHXJK.js";import{P as T}from"./PageLayout-D5WgxeVv.js";import{C as W}from"./ContentCard-DG0PYGi_.js";import{B as S}from"./BaseSelect-C08W1b7q.js";import{I as D,p as G,f as J,g as K,s as X}from"./Icon-B-rWLZbN.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-4HHi2Jc_.js";import"./ApplicationLogo-DkJ980bm.js";import"./useAccessibility-jP7VLpRx.js";import"./PageHeader-C8FYiuPv.js";/* empty css                                                                   *//* empty css                                                                   *//* empty css                                                                    *//* empty css                                                                   */function Y(s,p){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function ee(s,p){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const te={class:"bg-white rounded-lg border-2 shadow-sm p-4 min-w-[200px]"},se={class:"flex items-center space-x-3 mb-3"},ne={class:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0"},re={class:"min-w-0 flex-1"},ae={class:"font-semibold text-neutral-900 truncate"},oe={class:"text-sm text-neutral-500 truncate"},le={key:0,class:"mb-3"},ie={class:"flex items-center space-x-2"},de={class:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},ce={class:"text-xs font-medium text-green-700"},ue={class:"min-w-0 flex-1"},me={class:"text-sm font-medium text-neutral-900 truncate"},xe={class:"text-xs text-neutral-500 truncate"},pe={class:"flex items-center justify-between text-sm"},ve={class:"flex items-center space-x-1"},he={class:"text-neutral-600"},fe={class:"flex items-center space-x-1"},ge={key:1,class:"mt-3 pt-3 border-t border-neutral-200"},be={class:"space-y-2 max-h-32 overflow-y-auto"},ye={class:"w-5 h-5 bg-neutral-200 rounded-full flex items-center justify-center"},we={class:"text-xs font-medium text-neutral-600"},$e={class:"min-w-0 flex-1"},_e={class:"text-xs font-medium text-neutral-900 truncate"},ke={class:"text-xs text-neutral-500 truncate"},Ce={key:0,class:"text-xs text-neutral-500 text-center"},Me={__name:"DepartmentNode",props:{department:{type:Object,required:!0},viewMode:{type:String,default:"departments"},isRoot:{type:Boolean,default:!1}},emits:["node-click"],setup(s){const p=s,g=M(()=>{const t=[];return p.isRoot&&t.push("border-primary-300 bg-primary-50"),t.join(" ")}),y=t=>t.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2),u=t=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[t]||"building-office",l=t=>{const c="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(t==null?void 0:t.toLowerCase()){case"active":return`${c} bg-green-100 text-green-800`;case"inactive":return`${c} bg-red-100 text-red-800`;case"restructuring":return`${c} bg-yellow-100 text-yellow-800`;default:return`${c} bg-green-100 text-green-800`}};return(t,c)=>{var i;return r(),a("div",{class:V(["department-node cursor-pointer transform transition-all duration-200 hover:scale-105",g.value]),onClick:c[0]||(c[0]=v=>t.$emit("node-click",s.department))},[e("div",te,[e("div",se,[e("div",ne,[m(D,{name:u(s.department.name),class:"w-5 h-5 text-primary-600"},null,8,["name"])]),e("div",re,[e("h3",ae,n(s.department.name),1),e("p",oe,n(s.department.code||"No code"),1)])]),s.department.manager&&(s.viewMode==="employees"||s.viewMode==="mixed")?(r(),a("div",le,[e("div",ie,[e("div",de,[e("span",ce,n(y(s.department.manager.user.name)),1)]),e("div",ue,[e("p",me,n(s.department.manager.user.name),1),e("p",xe,n(s.department.manager.job_title||"Manager"),1)])])])):x("",!0),e("div",pe,[e("div",ve,[m(b(G),{class:"w-4 h-4 text-neutral-400"}),e("span",he,n(s.department.employees_count||0),1)]),e("div",fe,[e("span",{class:V(l(s.department.status))},n(s.department.status||"Active"),3)])]),s.viewMode==="employees"&&((i=s.department.employees)==null?void 0:i.length)>0?(r(),a("div",ge,[e("div",be,[(r(!0),a(_,null,k(s.department.employees.slice(0,5),v=>(r(),a("div",{key:v.id,class:"flex items-center space-x-2"},[e("div",ye,[e("span",we,n(y(v.user.name)),1)]),e("div",$e,[e("p",_e,n(v.user.name),1),e("p",ke,n(v.job_title||"No title"),1)])]))),128)),s.department.employees.length>5?(r(),a("div",Ce," +"+n(s.department.employees.length-5)+" more ",1)):x("",!0)])])):x("",!0)]),c[1]||(c[1]=e("div",{class:"connection-point absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-neutral-300 rounded-full border-2 border-white"},null,-1))],2)}}},A=O(Me,[["__scopeId","data-v-197d911b"]]),je={class:"fixed inset-0 z-50 overflow-y-auto"},Ve={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},De={class:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"},ze={class:"flex items-center justify-between mb-6"},Le={class:"flex items-center space-x-3"},Ne={class:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center"},Se={class:"text-lg font-semibold text-neutral-900"},Ae={class:"text-sm text-neutral-500"},Oe={class:"space-y-6"},Be={class:"grid grid-cols-2 gap-4 text-sm"},Ee={class:"ml-2 font-medium text-neutral-900"},Ie={key:0},He={class:"ml-2 text-neutral-900"},Pe={key:1},Fe={class:"ml-2 text-neutral-900"},Re={key:0},Ue={class:"flex items-center space-x-3 p-3 bg-neutral-50 rounded-lg"},qe={class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},Ze={class:"text-sm font-medium text-green-700"},Qe={class:"flex-1"},Te={class:"font-medium text-neutral-900"},We={class:"text-sm text-neutral-500"},Ge={class:"text-sm text-neutral-500"},Je={key:1},Ke={class:"text-sm text-neutral-600 leading-relaxed"},Xe={key:2},Ye={class:"text-sm font-medium text-neutral-900 mb-3"},et={class:"max-h-48 overflow-y-auto space-y-2"},tt={class:"flex items-center space-x-3"},st={class:"w-8 h-8 bg-neutral-200 rounded-full flex items-center justify-center"},nt={class:"text-xs font-medium text-neutral-600"},rt={class:"text-sm font-medium text-neutral-900"},at={class:"text-xs text-neutral-500"},ot={class:"flex items-center space-x-2"},lt=["onClick"],it={class:"flex items-center justify-end space-x-3 pt-4 border-t border-neutral-200"},dt={__name:"DepartmentModal",props:{department:{type:Object,required:!0}},emits:["close"],setup(s){const p=l=>l.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),g=l=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[l]||"building-office",y=l=>{const t="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(l==null?void 0:l.toLowerCase()){case"active":return`${t} bg-green-100 text-green-800`;case"inactive":return`${t} bg-red-100 text-red-800`;case"restructuring":return`${t} bg-yellow-100 text-yellow-800`;default:return`${t} bg-green-100 text-green-800`}},u=l=>{const t="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(l){case"Full-time":return`${t} bg-green-100 text-green-800`;case"Part-time":return`${t} bg-yellow-100 text-yellow-800`;case"Contract":return`${t} bg-blue-100 text-blue-800`;default:return`${t} bg-neutral-100 text-neutral-800`}};return(l,t)=>{var c;return r(),a("div",je,[e("div",Ve,[e("div",{class:"fixed inset-0 transition-opacity bg-neutral-500 bg-opacity-75",onClick:t[0]||(t[0]=i=>l.$emit("close"))}),e("div",De,[e("div",ze,[e("div",Le,[e("div",Ne,[m(D,{name:g(s.department.name),class:"w-6 h-6 text-primary-600"},null,8,["name"])]),e("div",null,[e("h3",Se,n(s.department.name),1),e("p",Ae,n(s.department.code||"No code assigned"),1)])]),e("button",{onClick:t[1]||(t[1]=i=>l.$emit("close")),class:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-colors"},[m(b(J),{class:"w-5 h-5"})])]),e("div",Oe,[e("div",null,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Department Information",-1)),e("div",Be,[e("div",null,[t[5]||(t[5]=e("span",{class:"text-neutral-500"},"Status:",-1)),e("span",{class:V([y(s.department.status),"ml-2"])},n(s.department.status||"Active"),3)]),e("div",null,[t[6]||(t[6]=e("span",{class:"text-neutral-500"},"Employees:",-1)),e("span",Ee,n(s.department.employees_count||0),1)]),s.department.location?(r(),a("div",Ie,[t[7]||(t[7]=e("span",{class:"text-neutral-500"},"Location:",-1)),e("span",He,n(s.department.location),1)])):x("",!0),s.department.budget?(r(),a("div",Pe,[t[8]||(t[8]=e("span",{class:"text-neutral-500"},"Budget:",-1)),e("span",Fe,"$"+n(Number(s.department.budget).toLocaleString()),1)])):x("",!0)])]),s.department.manager?(r(),a("div",Re,[t[10]||(t[10]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Department Manager",-1)),e("div",Ue,[e("div",qe,[e("span",Ze,n(p(s.department.manager.user.name)),1)]),e("div",Qe,[e("p",Te,n(s.department.manager.user.name),1),e("p",We,n(s.department.manager.job_title||"Manager"),1),e("p",Ge,n(s.department.manager.user.email),1)]),e("button",{onClick:t[2]||(t[2]=i=>b(j).visit(l.route("employees.show",s.department.manager.id))),class:"px-3 py-1 text-sm text-primary-600 hover:text-primary-700 font-medium"}," View Profile ")])])):x("",!0),s.department.description?(r(),a("div",Je,[t[11]||(t[11]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Description",-1)),e("p",Ke,n(s.department.description),1)])):x("",!0),((c=s.department.employees)==null?void 0:c.length)>0?(r(),a("div",Xe,[e("h4",Ye," Department Employees ("+n(s.department.employees.length)+") ",1),e("div",et,[(r(!0),a(_,null,k(s.department.employees,i=>(r(),a("div",{key:i.id,class:"flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-colors"},[e("div",tt,[e("div",st,[e("span",nt,n(p(i.user.name)),1)]),e("div",null,[e("p",rt,n(i.user.name),1),e("p",at,n(i.job_title||"No title"),1)])]),e("div",ot,[e("span",{class:V(u(i.contract_type))},n(i.contract_type||"N/A"),3),e("button",{onClick:v=>b(j).visit(l.route("employees.show",i.id)),class:"text-xs text-primary-600 hover:text-primary-700 font-medium"}," View ",8,lt)])]))),128))])])):x("",!0),e("div",it,[e("button",{onClick:t[3]||(t[3]=i=>l.$emit("close")),class:"px-4 py-2 text-sm text-neutral-600 hover:text-neutral-900 font-medium"}," Close "),e("button",{onClick:t[4]||(t[4]=i=>b(j).visit(l.route("departments.show",s.department.id))),class:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"}," View Details ")])])])])])}}},ct={class:"border-b border-neutral-200 p-4 bg-neutral-50"},ut={class:"flex items-center justify-between"},mt={class:"flex items-center space-x-4"},xt={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},vt={class:"flex items-center space-x-2"},ht=["disabled"],ft={class:"text-sm text-neutral-600 min-w-[60px] text-center"},gt=["disabled"],bt={class:"relative overflow-auto",style:{height:"600px"}},yt={class:"flex justify-center py-8"},wt={key:0,class:"org-chart-node"},$t={key:0,class:"relative"},_t={class:"absolute inset-0 w-full h-full pointer-events-none",style:{"z-index":"1"}},kt=["x1","y1","x2","y2"],Ct={key:1,class:"text-center py-16"},Mt={__name:"OrganizationChart",props:{departments:{type:Array,required:!0}},setup(s){const p=s,g=C("departments"),y=C("vertical"),u=C(1),l=C(null),t=[{label:"Dashboard",href:route("dashboard")},{label:"People Management",href:"#"},{label:"Departments",href:route("departments.index")},{label:"Organization Chart",current:!0}],c=[{id:"export-chart",label:"Export Chart",icon:Y,variant:"secondary",handler:()=>P()},{id:"print-chart",label:"Print Chart",icon:ee,variant:"secondary",handler:()=>F()}],i=M(()=>p.departments.find(h=>!h.parent_id&&h.manager)),v=M(()=>{const h=[],o=new Set;let d=p.departments.filter(w=>{var f;return!w.parent_id&&w.id!==((f=i.value)==null?void 0:f.id)});for(;d.length>0;){h.push([...d]),d.forEach(f=>o.add(f.id));const w=[];d.forEach(f=>{const R=p.departments.filter(L=>L.parent_id===f.id&&!o.has(L.id));w.push(...R)}),d=w}return h}),B=M(()=>[]),z=h=>{l.value=h},E=()=>{u.value<2&&(u.value=Math.min(2,u.value+.1))},I=()=>{u.value>.5&&(u.value=Math.max(.5,u.value-.1))},H=()=>{u.value=1},P=()=>{console.log("Exporting organization chart...")},F=()=>{window.print()};return U(()=>{}),(h,o)=>(r(),N(Q,null,{default:$(()=>[m(T,{title:"Organization Chart",subtitle:"Visual representation of your organizational structure",breadcrumbs:t,actions:c},{default:$(()=>[m(W,{class:"overflow-hidden"},{default:$(()=>[e("div",ct,[e("div",ut,[e("div",mt,[e("div",xt,[o[5]||(o[5]=e("label",{class:"text-sm font-medium text-neutral-700"},"View:",-1)),m(S,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=d=>g.value=d),class:"w-40"},{default:$(()=>o[4]||(o[4]=[e("option",{value:"departments"},"Departments",-1),e("option",{value:"employees"},"Employees",-1),e("option",{value:"mixed"},"Mixed View",-1)])),_:1,__:[4]},8,["modelValue"])]),e("div",pt,[o[7]||(o[7]=e("label",{class:"text-sm font-medium text-neutral-700"},"Layout:",-1)),m(S,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=d=>y.value=d),class:"w-32"},{default:$(()=>o[6]||(o[6]=[e("option",{value:"vertical"},"Vertical",-1),e("option",{value:"horizontal"},"Horizontal",-1)])),_:1,__:[6]},8,["modelValue"])])]),e("div",vt,[e("button",{onClick:I,class:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",disabled:u.value<=.5},[m(D,{name:"minus",class:"w-4 h-4"})],8,ht),e("span",ft,n(Math.round(u.value*100))+"% ",1),e("button",{onClick:E,class:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",disabled:u.value>=2},[m(D,{name:"plus",class:"w-4 h-4"})],8,gt),e("button",{onClick:H,class:"px-3 py-2 text-sm text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors"}," Reset ")])])]),e("div",bt,[e("div",{class:"org-chart-container",style:q({transform:`scale(${u.value})`,transformOrigin:"top left",minWidth:"100%",minHeight:"100%"})},[e("div",yt,[i.value?(r(),a("div",wt,[m(A,{department:i.value,"view-mode":g.value,"is-root":!0,onNodeClick:z},null,8,["department","view-mode"])])):x("",!0)]),v.value.length>0?(r(),a("div",$t,[(r(),a("svg",_t,[(r(!0),a(_,null,k(B.value,d=>(r(),a("g",{key:`${d.from}-${d.to}`},[e("line",{x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,stroke:"#d1d5db","stroke-width":"2"},null,8,kt)]))),128))])),(r(!0),a(_,null,k(v.value,(d,w)=>(r(),a("div",{key:w,class:"flex justify-center space-x-8 py-8",style:{"z-index":"2",position:"relative"}},[(r(!0),a(_,null,k(d,f=>(r(),a("div",{key:f.id,class:"org-chart-node"},[m(A,{department:f,"view-mode":g.value,onNodeClick:z},null,8,["department","view-mode"])]))),128))]))),128))])):x("",!0),!i.value&&v.value.length===0?(r(),a("div",Ct,[m(b(K),{class:"w-16 h-16 text-neutral-400 mx-auto mb-4"}),o[9]||(o[9]=e("h3",{class:"text-lg font-medium text-neutral-900 mb-2"},"No Organization Structure",-1)),o[10]||(o[10]=e("p",{class:"text-neutral-600 mb-4"},"Create departments and assign managers to build your organization chart.",-1)),e("button",{onClick:o[2]||(o[2]=d=>b(j).visit(h.route("departments.create"))),class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"},[m(b(X),{class:"w-4 h-4 mr-2"}),o[8]||(o[8]=Z(" Create Department "))])])):x("",!0)],4)])]),_:1}),l.value?(r(),N(dt,{key:0,department:l.value,onClose:o[3]||(o[3]=d=>l.value=null)},null,8,["department"])):x("",!0)]),_:1})]),_:1}))}},Rt=O(Mt,[["__scopeId","data-v-569ed06d"]]);export{Rt as default};
