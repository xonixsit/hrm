import{L as Ve,k as y,o as oe,d as re,c as d,f as k,b as g,p as i,z as Ke,e as H,r as ge,R as Qe,w as X,n as L,T as De,a as Q,y as $,S as Re,g as W,u as V,v as be,j as We,U as Y,F as de,t as ve,Q as ye,s as me,h as at,V as ft,m as Le,H as Ge,l as Ue,i as pt,W as yt,X as bt,I as wt}from"./app-D8ofPjSu.js";import{u as xe}from"./useAuth-D0CKBA2e.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as kt}from"./ApplicationLogo-C6SQStN-.js";import{I as ee,C as Fe,D as Et,E as Tt}from"./Icon-Bs8iYFbI.js";import{a as xt}from"./useAccessibility-DJF01NUi.js";class Ct{constructor(){this.notifications=Ve([]),this.maxNotifications=y(5),this.defaultDuration=y(5e3),this.positions=Ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=Ve({enabled:!0,volume:.3})}add(t){const e=this.generateId(),o=t.position||"top-right",a={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:o,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(a),this.positions[o].push(a),this.manageQueueSize(o),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(e)},a.duration),e}remove(t){const e=this.notifications.find(c=>c.id===t);if(!e)return;const o=this.notifications.findIndex(c=>c.id===t);o>-1&&this.notifications.splice(o,1);const a=this.positions[e.position],n=a.findIndex(c=>c.id===t);n>-1&&a.splice(n,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(o=>{this.remove(o.id)})}clearType(t){this.notifications.filter(o=>o.type===t).forEach(o=>{this.remove(o.id)})}update(t,e){const o=this.notifications.find(a=>a.id===t);o&&Object.assign(o,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const o=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:a=>{this.remove(o),e(a==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(o=>{const a=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(a),o(!0)},onClose:()=>{o(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(a=>{const n=this.notifications.findIndex(c=>c.id===a.id);n>-1&&this.notifications.splice(n,1)})}}const ae=new Ct,_t={class:"relative"},rt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(s){const t=s,e=c=>{n.value&&c.key==="Escape"&&(n.value=!1)};oe(()=>document.addEventListener("keydown",e)),re(()=>document.removeEventListener("keydown",e));const o=d(()=>({48:"w-48"})[t.width.toString()]),a=d(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=y(!1);return(c,b)=>(g(),k("div",_t,[i("div",{onClick:b[0]||(b[0]=v=>n.value=!n.value)},[ge(c.$slots,"trigger")]),Ke(i("div",{class:"fixed inset-0 z-40",onClick:b[1]||(b[1]=v=>n.value=!1)},null,512),[[Qe,n.value]]),H(De,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:X(()=>[Ke(i("div",{class:L(["absolute z-50 mt-2 rounded-md shadow-lg",[o.value,a.value]]),style:{display:"none"},onClick:b[2]||(b[2]=v=>n.value=!1)},[i("div",{class:L(["rounded-md ring-1 ring-black ring-opacity-5",s.contentClasses])},[ge(c.$slots,"content")],2)],2),[[Qe,n.value]])]),_:3})]))}},Oe={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){return(t,e)=>(g(),Q($(Re),{href:s.href,method:s.method,as:s.as,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:X(()=>[ge(t.$slots,"default")]),_:3},8,["href","method","as"]))}},At={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},St={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},It={class:"flex items-start"},Nt={class:"ml-3 flex-1"},Rt={class:"mt-1 text-sm text-red-700"},Dt={key:0,class:"mt-3"},Lt={__name:"NavigationErrorDisplay",setup(s){const t=y(!1),e=y(""),o=y(null),a=y(null),n=d(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),c=(w,S=null)=>{e.value=w,o.value=S,t.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{v()},1e4)},b=async()=>{if(o.value)try{await o.value()}catch(w){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",w)}v()},v=()=>{t.value=!1,e.value="",o.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return oe(()=>{typeof window<"u"&&(window.showNavigationError=c)}),re(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(w,S)=>t.value?(g(),k("div",At,[i("div",St,[i("div",It,[S[2]||(S[2]=i("div",{class:"flex-shrink-0"},[i("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),i("div",Nt,[S[0]||(S[0]=i("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),i("div",Rt,V(e.value),1),o.value?(g(),k("div",Dt,[i("button",{onClick:b,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},V(n.value),1)])):W("",!0)]),i("div",{class:"ml-4 flex-shrink-0"},[i("button",{onClick:v,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},S[1]||(S[1]=[i("span",{class:"sr-only"},"Close",-1),i("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):W("",!0)}},j={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920},Ze={tablet:{min:768},desktop:{min:1024}},He={minimum:44,comfortable:48,large:56};function Mt(s){return s===void 0&&(s=typeof window<"u"&&window.innerWidth||1024),s<Ze.tablet.min?"mobile":s<Ze.desktop.min?"tablet":"desktop"}function it(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function $t(s="comfortable"){const t=Mt(),e=He[s]||He.comfortable;return t==="mobile"?Math.max(e,He.minimum):e}function st(s,t){let e;return function(...a){const n=()=>{clearTimeout(e),s(...a)};clearTimeout(e),e=setTimeout(n,t)}}function Ot(s,t){let e;return function(...a){e||(s.apply(this,a),e=!0,setTimeout(()=>e=!1,t))}}function Bt(){if(typeof window>"u")return{top:0,right:0,bottom:0,left:0};const s=getComputedStyle(document.documentElement);return{top:parseInt(s.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(s.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(s.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(s.getPropertyValue("env(safe-area-inset-left)"))||0}}function Pt(){if(!it())return;let s=window.innerHeight;const t=()=>{const e=window.innerHeight;s-e>150?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")};return window.addEventListener("resize",st(t,100)),()=>{window.removeEventListener("resize",t),document.body.classList.remove("keyboard-visible")}}const K=y(0),Je=y(0),Xe=y("portrait");function Be(){const s=()=>{typeof window<"u"&&(K.value=window.innerWidth,Je.value=window.innerHeight,Xe.value=window.innerWidth>window.innerHeight?"landscape":"portrait")};s();const t=d(()=>K.value>=j.sm),e=d(()=>K.value>=j.md),o=d(()=>K.value>=j.lg),a=d(()=>K.value>=j.xl),n=d(()=>K.value>=j["2xl"]),c=d(()=>K.value<j.sm),b=d(()=>K.value>=j.sm&&K.value<j.lg),v=d(()=>K.value>=j.lg),w=d(()=>K.value>=j["2xl"]?"2xl":K.value>=j.xl?"xl":K.value>=j.lg?"lg":K.value>=j.md?"md":K.value>=j.sm?"sm":"xs"),S=d(()=>c.value?"mobile":b.value?"tablet":"desktop"),p=d(()=>it()),x=d(()=>typeof window>"u"?1:window.devicePixelRatio||1),A=d(()=>x.value>1),B=d(()=>Bt()),D=y(!1);let E=null,r=null;const l=C=>K.value>=j[C],m=C=>{const P=Object.keys(j),T=P.indexOf(C);if(T===-1)return!1;const f=j[C],U=P[T+1],ne=U?j[U]-1:1/0;return K.value>=f&&K.value<=ne},u=C=>K.value<j[C],h=C=>{const P=Object.keys(j).sort((T,f)=>j[f]-j[T]);for(const T of P)if(K.value>=j[T]&&C[T]!==void 0)return C[T];return C.xs||C[Object.keys(C)[0]]},F=C=>h(C),R=()=>({sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"})[w.value]||"100%",Z=C=>h(C),N=(C,P="up")=>{const T=j[C];if(!T)return"";switch(P){case"up":return`(min-width: ${T}px)`;case"down":return`(max-width: ${T-1}px)`;case"only":const f=Object.keys(j).find(ne=>j[ne]>T),U=f?j[f]-1:9999;return`(min-width: ${T}px) and (max-width: ${U}px)`;default:return`(min-width: ${T}px)`}};let M;const z=()=>{clearTimeout(M),M=setTimeout(s,100)},G=(C="comfortable")=>$t(C),O=C=>h(C,K.value);oe(()=>{if(s(),typeof window<"u"){window.addEventListener("resize",z),window.addEventListener("orientationchange",s),E=Pt();const C=()=>{D.value=document.body.classList.contains("keyboard-visible")};r=new MutationObserver(C),r.observe(document.body,{attributes:!0,attributeFilter:["class"]})}}),re(()=>{typeof window<"u"&&(window.removeEventListener("resize",z),window.removeEventListener("orientationchange",s)),clearTimeout(M),E&&typeof E=="function"&&E(),r&&r.disconnect()});const _=()=>{};return{windowWidth:d(()=>K.value),windowHeight:d(()=>Je.value),orientation:d(()=>Xe.value),isSmUp:t,isMdUp:e,isLgUp:o,isXlUp:a,is2XlUp:n,isMobile:c,isTablet:b,isDesktop:v,isTouchDevice:p,isHighDensity:A,currentBreakpoint:w,deviceType:S,pixelRatio:x,safeAreaInsets:B,isKeyboardVisible:d(()=>D.value),isBreakpoint:l,isBreakpointOnly:m,isBreakpointDown:u,getResponsiveValue:h,getGridColumns:F,getContainerMaxWidth:R,getResponsiveSpacing:Z,createMediaQuery:N,getOptimalTouchSize:G,getResponsiveValueFromConfig:O,debugResponsive:_,breakpoints:d(()=>j)}}const ke=1024,et=150,tt=200,ie=y(0),Ae=y(0),Se=y(!1),Me=y(null),Ie=y([]),Ne=y("portrait"),Vt=d(()=>Ne.value==="landscape");function lt(){const s=d(()=>ie.value>=ke),t=d(()=>ie.value<ke),e=d(()=>s.value?"desktop":"mobile"),o=d(()=>Me.value?Me.value.mode!==e.value:!1),a=y({currentRoute:null,userPreferences:{},navigationState:{},scrollPosition:0,timestamp:null}),n=()=>{if(typeof window>"u")return;const l=window.innerWidth,m=window.innerHeight,u=l>m?"landscape":"portrait";ie.value!==0&&(Me.value={width:ie.value,height:Ae.value,mode:e.value,orientation:Ne.value,timestamp:Date.now()}),ie.value=l,Ae.value=m,Ne.value=u};n();const c=st(()=>{n()},et),b=Ot(()=>{typeof window<"u"&&(ie.value=window.innerWidth,Ae.value=window.innerHeight)},16),v=(l={})=>{const m={currentRoute:window.location.pathname,scrollPosition:window.scrollY||0,timestamp:Date.now(),breakpoint:ie.value,navigationMode:e.value,...l};return a.value=m,Ie.value.unshift(m),Ie.value.length>5&&(Ie.value=Ie.value.slice(0,5)),m},w=()=>{if(!a.value.timestamp)return null;try{return a.value.scrollPosition&&window.scrollTo(0,a.value.scrollPosition),a.value}catch(l){return console.error("[BreakpointManager] Error restoring state:",l),null}},S=async(l,m)=>{if(Se.value){console.warn("[BreakpointManager] Transition already in progress, skipping");return}Se.value=!0;try{const u=v({fromMode:l,toMode:m,transitionReason:"breakpoint_change"});return await We(),await new Promise(h=>setTimeout(h,tt)),w(),u}catch(u){throw console.error("[BreakpointManager] Transition error:",u),u}finally{Se.value=!1}},p=()=>{v({reason:"device_rotation"}),setTimeout(()=>{n(),w()},100)},x=()=>{v({reason:"browser_zoom"}),n()},A=()=>{if(typeof window>"u")return!1;const l=window.innerWidth,m=ie.value,u=Math.abs(l-m);return u>10?(console.warn("[BreakpointManager] Breakpoint conflict detected:",{actual:l,reported:m,difference:u}),n(),!0):!1},B=(l=ie.value)=>Math.abs(l-ke)<5,D=(l=ie.value)=>l-ke,E=()=>({currentWidth:ie.value,currentHeight:Ae.value,navigationBreakpoint:ke,navigationMode:e.value,isTransitioning:Se.value,orientation:Ne.value,isExactBreakpoint:B(),breakpointDistance:D(),hasChanged:o.value,previousState:Me.value}),r=()=>{};return be(e,async(l,m)=>{if(m&&l!==m)try{await S(m,l)}catch(u){console.error("[BreakpointManager] Failed to execute transition:",u)}},{immediate:!1}),oe(()=>{if(n(),typeof window<"u"){window.addEventListener("resize",c),window.addEventListener("resize",b),window.addEventListener("orientationchange",p);let l=window.devicePixelRatio;const m=setInterval(()=>{window.devicePixelRatio!==l&&(l=window.devicePixelRatio,x())},500);re(()=>{window.removeEventListener("resize",c),window.removeEventListener("resize",b),window.removeEventListener("orientationchange",p),clearInterval(m)})}}),{windowWidth:d(()=>ie.value),windowHeight:d(()=>Ae.value),navigationMode:e,isDesktopBreakpoint:s,isMobileBreakpoint:t,isTransitioning:d(()=>Se.value),hasBreakpointChanged:o,orientation:d(()=>Ne.value),isLandscape:Vt,preservedState:d(()=>a.value),stateHistory:d(()=>Ie.value),preserveCurrentState:v,restorePreservedState:w,isExactBreakpoint:B,getBreakpointDistance:D,getBreakpointInfo:E,detectBreakpointConflicts:A,debugBreakpointManager:r,NAVIGATION_BREAKPOINT:ke,DEBOUNCE_DELAY:et,TRANSITION_DELAY:tt}}const fe=y("light"),pe=y("light"),Ee=y(!1),Te={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Pe(){const s=d(()=>Ee.value?pe.value:fe.value),t=d(()=>Te[s.value]),e=d(()=>s.value==="dark"),o=d(()=>s.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(u){return console.warn("Failed to detect system theme:",u),"light"}},n=(u,h=!1)=>{try{const R={theme:x(u)?u:"light",useSystem:!!h,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(R))}catch(F){console.warn("Failed to save theme preference:",F);try{localStorage.removeItem("theme-preference")}catch(R){console.warn("Failed to clear corrupted theme preference:",R)}}},c=u=>{if(!(typeof document>"u"))try{const h=document.documentElement,F=x(u)?u:"light";h.classList.remove("theme-light","theme-dark"),h.classList.add(`theme-${F}`),b(F);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:F,config:Te[F]}}))}catch(R){console.warn("Failed to dispatch theme change event:",R)}}catch(h){console.error("Failed to apply theme:",h);try{const F=document.documentElement;F.classList.remove("theme-light","theme-dark"),F.classList.add("theme-light"),b("light")}catch(F){console.error("Failed to apply fallback theme:",F)}}},b=u=>{if(!(typeof document>"u"))try{const h=document.documentElement;u==="dark"?(h.style.setProperty("--color-neutral-50","#0a0a0a"),h.style.setProperty("--color-neutral-100","#111827"),h.style.setProperty("--color-neutral-200","#262626"),h.style.setProperty("--color-neutral-300","#404040"),h.style.setProperty("--color-neutral-400","#525252"),h.style.setProperty("--color-neutral-500","#6b7280"),h.style.setProperty("--color-neutral-600","#a3a3a3"),h.style.setProperty("--color-neutral-700","#d4d4d4"),h.style.setProperty("--color-neutral-800","#e5e5e5"),h.style.setProperty("--color-neutral-900","#fafafa"),h.style.setProperty("--color-neutral-950","#ffffff")):(h.style.setProperty("--color-neutral-50","#fafafa"),h.style.setProperty("--color-neutral-100","#f5f5f5"),h.style.setProperty("--color-neutral-200","#e5e5e5"),h.style.setProperty("--color-neutral-300","#d4d4d4"),h.style.setProperty("--color-neutral-400","#a3a3a3"),h.style.setProperty("--color-neutral-500","#6b7280"),h.style.setProperty("--color-neutral-600","#525252"),h.style.setProperty("--color-neutral-700","#404040"),h.style.setProperty("--color-neutral-800","#262626"),h.style.setProperty("--color-neutral-900","#111827"),h.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(h){console.warn("Failed to update theme properties:",h)}},v=u=>{c(u)},w=u=>{if(!Te[u]){console.warn(`Theme "${u}" not found`);return}fe.value=u,Ee.value=!1,n(u,!1),v(u)},S=()=>{Ee.value=!0;const u=a();pe.value=u,n(u,!0),v(u)},p=()=>{const u=s.value==="light"?"dark":"light";w(u)},x=u=>Te.hasOwnProperty(u),A=()=>Object.values(Te),B=()=>{},D=()=>{const u=[];if(x(fe.value)||u.push(`Invalid current theme: ${fe.value}`),x(pe.value)||u.push(`Invalid system theme: ${pe.value}`),x(s.value)||u.push(`Invalid active theme: ${s.value}`),typeof document<"u"){const h=document.documentElement,F=h.classList.contains("theme-light"),R=h.classList.contains("theme-dark");!F&&!R&&u.push("No theme class found on document root"),F&&R&&u.push("Multiple theme classes found on document root");const Z=`theme-${s.value}`;h.classList.contains(Z)||u.push(`Expected theme class ${Z} not found on document root`)}return{isValid:u.length===0,issues:u}},E=()=>{if(!(typeof document>"u"))try{const u=document.documentElement;return["theme-light","theme-dark"].forEach(F=>{u.classList.remove(F)}),!0}catch(u){return console.warn("Failed to cleanup theme classes:",u),!1}},r=()=>{try{fe.value="light",pe.value=a(),Ee.value=!1;try{localStorage.removeItem("theme-preference")}catch(u){console.warn("Failed to clear theme preference from localStorage:",u)}return c("light"),!0}catch(u){return console.error("Failed to reset theme to default:",u),!1}},l=()=>{console.warn("Attempting theme system recovery...");try{if(E(),r())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(u){console.error("Theme system recovery failed:",u);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(h){return console.error("Last resort theme recovery failed:",h),!1}}},m=()=>{try{fe.value="light",pe.value="light",Ee.value=!1;try{localStorage.removeItem("theme-preference")}catch(u){console.warn("Failed to clear theme preference:",u)}if(typeof document<"u"){const u=document.documentElement;u.classList.remove("theme-light","theme-dark","dark","light"),u.classList.add("theme-light"),u.style.setProperty("--color-neutral-50","#fafafa"),u.style.setProperty("--color-neutral-100","#f5f5f5"),u.style.setProperty("--color-neutral-200","#e5e5e5"),u.style.setProperty("--color-neutral-300","#d4d4d4"),u.style.setProperty("--color-neutral-400","#a3a3a3"),u.style.setProperty("--color-neutral-500","#6b7280"),u.style.setProperty("--color-neutral-600","#525252"),u.style.setProperty("--color-neutral-700","#404040"),u.style.setProperty("--color-neutral-800","#262626"),u.style.setProperty("--color-neutral-900","#111827"),u.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(u){console.error("Theme initialization failed:",u);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(h){console.error("Emergency theme fallback failed:",h)}return null}};return oe(()=>{m()}),be(s,u=>{v(u)}),{currentTheme:d(()=>fe.value),systemTheme:d(()=>pe.value),activeTheme:s,themeConfig:t,isDark:e,isLight:o,isSystemThemePreferred:d(()=>Ee.value),setTheme:w,toggleTheme:p,useSystemTheme:S,validateTheme:x,getAvailableThemes:A,debugThemeState:B,initializeTheme:m,validateThemeState:D,cleanupThemeClasses:E,resetThemeToDefault:r,recoverThemeSystem:l,cleanupAndApplyTheme:c,themes:d(()=>Te)}}const Ft=["data-sidebar-id"],Ht={key:0,class:"flex-1 min-w-0"},zt=["aria-label"],Gt={class:"flex-1 overflow-y-auto py-4"},Ut=["onClick","title"],Wt={key:0,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Yt={key:1,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},jt={key:2,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},qt={key:3,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Kt={key:4,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Qt={key:5,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Zt={key:6,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Jt={key:7,class:"w-5 h-5 max-w-5 max-h-5",fill:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Xt={key:8,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},eo={key:9,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},to={key:0,class:"font-medium truncate"},oo={key:1,class:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-blue-600 rounded-l"},no=["title"],ao={key:0,class:"font-medium"},ro=["title"],io={key:0,class:"font-medium"},so="HR Management",lo="Streamline your workforce",co={__name:"SidebarNavigation",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1}},emits:["navigate","collapse-change"],setup(s,{emit:t}){const e=s,o=t,{roles:a}=xe(),{isDark:n}=Pe(),c=y(!1),b=y(null),v=y(e.initiallyCollapsed),w=()=>{typeof window<"u"&&(c.value=window.innerWidth>=1024)},S=d(()=>{const E=a.value,r=[];return r.push({id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard"}),(E.includes("Admin")||E.includes("Manager"))&&r.push({id:"employees",label:"Employee Management",icon:"users",route:"employees.index"}),r.push({id:"attendance",label:"Time Tracking",icon:"clock",route:"attendances.index"}),r.push({id:"leaves",label:"Leave Management",icon:"calendar",route:"leaves.index"}),(E.includes("Admin")||E.includes("HR"))&&r.push({id:"leave-types",label:"Leave Policies",icon:"clipboard-document-list",route:"leave-types.index"}),r.push({id:"feedbacks",label:"Feedback System",icon:"chat",route:"feedbacks.index"}),r.push({id:"work-reports",label:"Work Reports",icon:"document-text",route:"work-reports.index"}),r.push({id:"leaderboard",label:"Performance Leaderboard",icon:"trophy",route:"work-reports.leaderboard"}),(E.includes("Admin")||E.includes("Manager"))&&r.push({id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals"}),r}),p=E=>{if(!(E!=null&&E.route)||!e.currentRoute)return!1;if(E.route===e.currentRoute)return!0;const r=E.route.split("."),l=e.currentRoute.split(".");return r[0]===l[0]},x=()=>{v.value=!v.value,localStorage.setItem("sidebar-collapsed",v.value.toString()),o("collapse-change",v.value)},A=E=>{if(console.log("Navigation clicked:",E),o("navigate",{route:E.route,item:E}),E.route)try{if(console.log("Attempting navigation to:",E.route),typeof window<"u"&&window.route)ye.visit(window.route(E.route));else{const r=`/${E.route.replace(".","/")}`;console.log("Navigating to URL:",r),ye.visit(r)}}catch(r){console.warn(`Navigation failed for route: ${E.route}`,r)}},B=()=>{try{typeof window<"u"&&window.route?ye.post(window.route("logout")):ye.post("/logout")}catch(E){console.warn("Logout navigation failed:",E),window.location.href="/logout"}},D=y(`sidebar-${Math.random().toString(36).substr(2,9)}`);return oe(()=>{w(),console.log("[SidebarNavigation] Component mounted, isDesktop:",c.value,"ID:",D.value),Y.registerComponent(D.value,"desktop"),window.addEventListener("resize",w);const E=localStorage.getItem("sidebar-collapsed");E!==null&&(v.value=E==="true"),o("collapse-change",v.value)}),re(()=>{typeof window<"u"&&window.removeEventListener("resize",w),Y.unregisterComponent(D.value)}),(E,r)=>c.value?(g(),k("nav",{key:0,ref_key:"sidebarRef",ref:b,class:L(["sidebar-navigation flex flex-col h-screen fixed left-0 top-0 z-40 transition-all duration-300 ease-out",$(n)?"bg-gray-900 border-r border-gray-800":"bg-white border-r border-gray-200",{"w-64":!v.value,"w-16":v.value}]),role:"navigation","aria-label":"Main navigation","data-debug":"sidebar-navigation-component","data-sidebar-id":Math.random().toString(36).substr(2,9)},[i("div",{class:L(["flex items-center justify-between p-4 border-b",$(n)?"border-gray-800":"border-gray-200"])},[v.value?W("",!0):(g(),k("div",Ht,[i("h1",{class:L(["text-lg font-semibold truncate",$(n)?"text-white":"text-gray-900"])},V(so),2),i("p",{class:L(["text-sm truncate",$(n)?"text-gray-400":"text-gray-500"])},V(lo),2)])),i("button",{onClick:x,class:L(["p-2 rounded-lg transition-colors",$(n)?"text-gray-400 hover:text-white hover:bg-gray-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"]),"aria-label":v.value?"Expand sidebar":"Collapse sidebar"},[(g(),k("svg",{class:L(["w-5 h-5 transition-transform duration-200",{"rotate-180":v.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[1]||(r[1]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)]),2))],10,zt)],2),i("div",Gt,[i("div",{class:L(["space-y-1",{"px-3":!v.value,"px-2":v.value}])},[(g(!0),k(de,null,ve(S.value,l=>(g(),k("div",{key:l.id},[i("button",{onClick:()=>A(l),class:L(["group w-full flex items-center text-left transition-all duration-200 relative","rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value,"bg-blue-50 text-blue-700":p(l)&&!$(n),"bg-blue-900/20 text-blue-400":p(l)&&$(n),"hover:bg-gray-50":!p(l)&&!$(n),"hover:bg-gray-800":!p(l)&&$(n),"text-gray-700":!p(l)&&!$(n),"text-gray-300":!p(l)&&$(n)}]),title:v.value?l.label:""},[i("div",{class:L(["flex-shrink-0 w-6 h-6 flex items-center justify-center overflow-hidden",{"mr-3":!v.value}]),style:{"min-width":"24px","max-width":"24px","min-height":"24px","max-height":"24px"}},[l.icon==="home"?(g(),k("svg",Wt,r[2]||(r[2]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)]))):l.icon==="users"?(g(),k("svg",Yt,r[3]||(r[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):l.icon==="clock"?(g(),k("svg",jt,r[4]||(r[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):l.icon==="calendar"?(g(),k("svg",qt,r[5]||(r[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):l.icon==="folder"?(g(),k("svg",Kt,r[6]||(r[6]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):l.icon==="chat"?(g(),k("svg",Qt,r[7]||(r[7]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)]))):l.icon==="document-text"?(g(),k("svg",Zt,r[8]||(r[8]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):l.icon==="trophy"?(g(),k("svg",Jt,r[9]||(r[9]=[i("path",{d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h9.284a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Z"},null,-1)]))):l.icon==="check-circle"?(g(),k("svg",Xt,r[10]||(r[10]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(g(),k("svg",eo,r[11]||(r[11]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?W("",!0):(g(),k("span",to,V(l.label),1)),p(l)?(g(),k("div",oo)):W("",!0)],10,Ut)]))),128))],2)]),i("div",{class:L(["p-3 border-t space-y-1",$(n)?"border-gray-800":"border-gray-200"])},[i("button",{onClick:r[0]||(r[0]=()=>A({route:"profile.edit",label:"Settings"})),class:L(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value},$(n)?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"]),title:v.value?"Settings":""},[i("div",{class:L(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},r[12]||(r[12]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),2),v.value?W("",!0):(g(),k("span",ao,"Settings"))],10,no),i("button",{onClick:B,class:L(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value},"text-red-600 hover:bg-red-50 hover:text-red-700"]),title:v.value?"Logout":""},[i("div",{class:L(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},r[13]||(r[13]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)]),2),v.value?W("",!0):(g(),k("span",io,"Logout"))],10,ro)],2)],10,Ft)):W("",!0)}},ot=le(co,[["__scopeId","data-v-cd7292f1"]]);function uo(s,t){return g(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function vo(s,t){return g(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const mo={class:"mobile-navigation-item"},go={class:"flex-1"},ho={class:"flex-1"},fo={__name:"MobileNavigationItem",props:{item:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]},isChild:{type:Boolean,default:!1}},emits:["navigate"],setup(s,{emit:t}){const e=s,o=t,a=d(()=>{if(!e.item.route)return!1;if(e.item.exact)return e.currentRoute===e.item.route;const b=e.item.route.split(".")[0];return e.currentRoute.startsWith(b)});d(()=>!e.item.roles||e.item.roles.length===0?!0:e.item.roles.some(b=>e.userRoles.includes(b)));const n=b=>{const v="inline-flex items-center justify-center";switch(b){case"success":return`${v} bg-green-100 text-green-800`;case"warning":return`${v} bg-yellow-100 text-yellow-800`;case"error":return`${v} bg-red-100 text-red-800`;case"info":return`${v} bg-blue-100 text-blue-800`;default:return`${v} bg-neutral-100 text-neutral-800`}},c=b=>{o("navigate",{item:e.item,route:e.item.route,event:b}),"vibrate"in navigator&&navigator.vibrate(10)};return(b,v)=>(g(),k("div",mo,[s.item.route?(g(),Q($(Re),{key:0,href:b.route(s.item.route),class:L(["nav-link flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 touch-manipulation",[a.value?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 border-l-4 border-primary-500 dark:border-primary-400":"text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100",s.isChild?"text-sm":"text-base"]]),style:{"min-height":"44px"},onClick:c,"aria-label":`Navigate to ${s.item.label}`},{default:X(()=>[H(ee,{name:s.item.icon,size:s.isChild?"sm":"md",class:L(["flex-shrink-0 mr-3",a.value?"text-primary-600 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500"])},null,8,["name","size","class"]),i("span",go,V(s.item.label),1),s.item.badge?(g(),k("span",{key:0,class:L(["ml-2 px-2 py-1 text-xs font-medium rounded-full",n(s.item.badge.type)])},V(s.item.badge.count),3)):W("",!0),s.item.external?(g(),Q(ee,{key:1,name:"external-link",size:"sm",class:"ml-2 text-neutral-400 dark:text-neutral-500"})):W("",!0)]),_:1},8,["href","class","aria-label"])):(g(),k("div",{key:1,class:L(["nav-item flex items-center px-3 py-3 text-sm font-medium text-neutral-500 dark:text-neutral-400",s.isChild?"text-sm":"text-base"]),style:{"min-height":"44px"}},[H(ee,{name:s.item.icon,size:s.isChild?"sm":"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name","size"]),i("span",ho,V(s.item.label),1)],2))]))}},nt=le(fo,[["__scopeId","data-v-94500539"]]),po={class:"mobile-navigation-section"},yo={key:0,class:"section-header"},bo=["aria-expanded","aria-label"],wo={class:"flex items-center"},ko={key:0,class:"section-children overflow-hidden"},Eo={class:"ml-6 mt-2 space-y-1"},To={__name:"MobileNavigationSection",props:{section:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]}},emits:["navigate"],setup(s,{emit:t}){const e=s,o=t,a=y(!1),n=d(()=>e.section.children?e.section.children.filter(w=>!w.roles||w.roles.length===0?!0:w.roles.some(S=>e.userRoles.includes(S))):[]),c=d(()=>n.value.some(w=>w.route?e.currentRoute.startsWith(w.route.split(".")[0]):!1)),b=()=>{a.value=!a.value;const w=`mobile-nav-section-${e.section.id}`;localStorage.setItem(w,a.value.toString())},v=w=>{o("navigate",w)};return oe(()=>{if(c.value)a.value=!0;else{const w=`mobile-nav-section-${e.section.id}`,S=localStorage.getItem(w);S!==null&&(a.value=S==="true")}}),(w,S)=>(g(),k("div",po,[s.section.children&&s.section.children.length>0?(g(),k("div",yo,[i("button",{onClick:b,class:"w-full flex items-center justify-between px-3 py-3 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors duration-200 touch-manipulation",style:{"min-height":"44px"},"aria-expanded":a.value,"aria-label":`Toggle ${s.section.label} section`},[i("div",wo,[H(ee,{name:s.section.icon,size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name"]),i("span",null,V(s.section.label),1)]),H(ee,{name:"chevron-down",size:"sm",class:L(["text-neutral-400 dark:text-neutral-500 transition-transform duration-200",{"rotate-180":a.value}])},null,8,["class"])],8,bo)])):W("",!0),!s.section.children||s.section.children.length===0?(g(),Q(nt,{key:1,item:s.section,"current-route":s.currentRoute,"user-roles":s.userRoles,onNavigate:v},null,8,["item","current-route","user-roles"])):W("",!0),H(De,{name:"section-expand","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-96 opacity-100","leave-from-class":"max-h-96 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:X(()=>[s.section.children&&s.section.children.length>0&&a.value?(g(),k("div",ko,[i("div",Eo,[(g(!0),k(de,null,ve(n.value,p=>(g(),Q(nt,{key:p.id,item:p,"current-route":s.currentRoute,"user-roles":s.userRoles,"is-child":!0,onNavigate:v},null,8,["item","current-route","user-roles"]))),128))])])):W("",!0)]),_:1})]))}},xo=le(To,[["__scopeId","data-v-512cc717"]]),Co={sections:[{id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"],order:1},{id:"people",label:"People Management",icon:"users",roles:["Admin","Manager"],order:2,children:[{id:"employees",label:"Employees",icon:"user",route:"employees.index",roles:["Admin","Manager"]},{id:"departments",label:"Departments",icon:"building-office",route:"departments.index",roles:["Admin"]}]},{id:"time",label:"Time Management",icon:"clock",roles:["Admin","Manager","Employee"],order:3,children:[{id:"attendance",label:"Attendance",icon:"calendar-check",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"timesheets",label:"Timesheets",icon:"document-text",route:"timesheets.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar-x",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals",roles:["Admin","Manager"]}]},{id:"projects",label:"Project Management",icon:"folder-open",roles:["Admin","Manager","Employee"],order:4,children:[{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"tasks",label:"Tasks",icon:"clipboard",route:"tasks.index",roles:["Admin","Manager","Employee"]}]},{id:"communication",label:"Communication",icon:"chat",roles:["Admin","Manager","Employee"],order:5,children:[{id:"feedbacks",label:"Feedbacks",icon:"message-square",route:"feedbacks.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Notifications",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}]},{id:"settings",label:"Settings",icon:"cog",roles:["Admin"],order:6,children:[{id:"system-settings",label:"System Settings",icon:"cog",route:"settings.index",roles:["Admin"]},{id:"user-management",label:"User Management",icon:"users",route:"users.index",roles:["Admin"]}]}]};function _o(s=[]){return!Array.isArray(s)||s.length===0?[]:Co.sections.filter(t=>t.roles.some(e=>s.includes(e))).map(t=>{if(t.children){const e=t.children.filter(o=>o.roles.some(a=>s.includes(a)));return e.length>0||t.route?{...t,children:e}:null}return t}).filter(Boolean).sort((t,e)=>(t.order||999)-(e.order||999))}const Ao={key:0,class:"mobile-navigation"},So={class:"mobile-top-bar fixed top-0 left-0 right-0 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-4 py-3 z-50 shadow-sm"},Io={class:"flex items-center justify-between"},No=["aria-expanded"],Ro={class:"flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-label":"User menu"},Do={class:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},Lo={class:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700"},Mo={class:"text-sm font-medium text-neutral-900 dark:text-neutral-100"},$o={class:"text-xs text-neutral-500 dark:text-neutral-400"},Oo={class:"drawer-header p-4 border-b border-neutral-200 dark:border-neutral-700"},Bo={class:"flex items-center space-x-3"},Po={class:"h-12 w-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},Vo={class:"flex-1 min-w-0"},Fo={class:"text-base font-medium text-neutral-900 dark:text-neutral-100 truncate"},Ho={class:"text-sm text-neutral-500 dark:text-neutral-400 truncate"},zo={class:"drawer-navigation p-4"},Go={class:"space-y-2"},Uo={class:"drawer-footer border-t border-neutral-200 dark:border-neutral-700 p-4 mt-auto"},Wo={class:"space-y-2"},Yo={class:"ml-3"},jo={type:"submit",class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Logout"},qo={class:"mobile-bottom-nav fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-700 px-4 py-2 safe-area-pb"},Ko={class:"flex items-center justify-around"},Qo={class:"text-xs font-medium"},Zo={__name:"MobileNavigation",props:{currentRoute:{type:String,required:!0}},emits:["navigate","mobile-drawer-toggle"],setup(s,{emit:t}){const e=s,o=t,{roles:a,getUserProperty:n}=xe(),{isDarkMode:c,toggleTheme:b}=Pe(),{isMobile:v}=Be(),w=y(!1),S=y(0),p=y(0),x=y(!1),A=d(()=>n("name","User")),B=d(()=>n("email","")),D=d(()=>{const _=a.value;return _.includes("Admin")?"Administrator":_.includes("Manager")?"Manager":_.includes("Employee")?"Employee":"User"}),E=d(()=>_o(a.value)),r=d(()=>[{id:"dashboard",label:"Home",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"]},{id:"attendance",label:"Time",icon:"clock",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Alerts",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}].filter(_=>_.roles.some(C=>a.value.includes(C)))),l=()=>{w.value=!w.value,o("mobile-drawer-toggle",w.value),w.value?document.body.style.overflow="hidden":document.body.style.overflow=""},m=()=>{w.value=!1,document.body.style.overflow="",o("mobile-drawer-toggle",!1)},u=_=>e.currentRoute.startsWith(_.split(".")[0]),h=_=>{if(m(),o("navigate",_),_.route)try{const C=route(_.route);if(!C)throw new Error(`Route '${_.route}' not found`);ye.visit(C,{onError:P=>{console.error("Navigation error:",P),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:new Error("Navigation failed with errors"),route:_.route,context:"mobile-navigation",errors:P}}))},onException:P=>{console.error("Navigation exception:",P),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:P,route:_.route,context:"mobile-navigation"}}))}})}catch(C){console.warn(`Navigation failed for route: ${_.route}`,C),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:C,route:_.route,context:"mobile-navigation"}}))}},F=_=>{try{return route(_)}catch{return console.warn(`Route '${_}' not found, falling back to dashboard`),route("dashboard")}},R=(_,C)=>{try{if(!route(_.route)){C.preventDefault(),console.warn(`Route '${_.route}' not found`);return}}catch(P){C.preventDefault(),console.warn(`Navigation failed for route: ${_.route}`,P),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:P,route:_.route,context:"mobile-bottom-navigation"}}))}},Z=()=>{m(),ye.post(route("logout"))},N=_=>{S.value=_.touches[0].clientX,x.value=!0},M=_=>{if(!x.value)return;p.value=_.touches[0].clientX,p.value-S.value<-50&&_.preventDefault()},z=_=>{if(!x.value)return;p.value-S.value<-100&&m(),x.value=!1,S.value=0,p.value=0},G=_=>{_.key==="Escape"&&w.value&&m()},O=y(`mobile-${Math.random().toString(36).substr(2,9)}`);return oe(()=>{document.addEventListener("keydown",G),Y.registerComponent(O.value,"mobile")}),re(()=>{document.removeEventListener("keydown",G),document.body.style.overflow="",Y.unregisterComponent(O.value)}),(_,C)=>$(v)?(g(),k("div",Ao,[i("div",So,[i("div",Io,[i("button",{onClick:l,class:"hamburger-button flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-expanded":w.value,"aria-label":"Toggle navigation menu"},[H(ee,{name:w.value?"x":"menu",size:"md",class:"transition-transform duration-200"},null,8,["name"])],8,No),H($(Re),{href:_.route("dashboard"),class:"flex items-center touch-manipulation"},{default:X(()=>[H(kt,{class:"h-8 w-8"}),C[1]||(C[1]=i("span",{class:"ml-2 text-lg font-semibold text-neutral-900 dark:text-neutral-100"},"HR Management",-1))]),_:1,__:[1]},8,["href"]),H(rt,{align:"right",width:"48"},{trigger:X(()=>[i("button",Ro,[i("div",Do,[H(ee,{name:"user",size:"sm",class:"text-primary-600 dark:text-primary-400"})])])]),content:X(()=>[i("div",Lo,[i("p",Mo,V(A.value),1),i("p",$o,V(B.value),1)]),H(Oe,{href:_.route("profile.edit")},{default:X(()=>C[2]||(C[2]=[me(" Profile Settings ")])),_:1,__:[2]},8,["href"]),H(Oe,{href:_.route("logout"),method:"post",as:"button"},{default:X(()=>C[3]||(C[3]=[me(" Log Out ")])),_:1,__:[3]},8,["href"])]),_:1})])]),H(De,{name:"mobile-drawer","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-300 ease-in","enter-from-class":"transform -translate-x-full","enter-to-class":"transform translate-x-0","leave-from-class":"transform translate-x-0","leave-to-class":"transform -translate-x-full"},{default:X(()=>[w.value?(g(),k("div",{key:0,class:"mobile-drawer fixed inset-y-0 left-0 z-40 w-80 max-w-sm bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-700 shadow-xl overflow-y-auto",onTouchstart:N,onTouchmove:M,onTouchend:z,role:"navigation","aria-label":"Mobile navigation menu"},[i("div",Oo,[i("div",Bo,[i("div",Po,[H(ee,{name:"user",size:"md",class:"text-primary-600 dark:text-primary-400"})]),i("div",Vo,[i("p",Fo,V(A.value),1),i("p",Ho,V(D.value),1)])])]),i("nav",zo,[i("div",Go,[(g(!0),k(de,null,ve(E.value,P=>(g(),Q(xo,{key:P.id,section:P,"current-route":s.currentRoute,"user-roles":$(a),onNavigate:h},null,8,["section","current-route","user-roles"]))),128))])]),i("div",Uo,[i("div",Wo,[i("button",{onClick:C[0]||(C[0]=(...P)=>$(b)&&$(b)(...P)),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Toggle theme"},[H(ee,{name:$(c)?"sun":"moon",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"},null,8,["name"]),i("span",Yo,V($(c)?"Light Mode":"Dark Mode"),1)]),H($(Re),{href:_.route("profile.edit"),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},onClick:m},{default:X(()=>[H(ee,{name:"cog",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),C[4]||(C[4]=i("span",{class:"ml-3"},"Settings",-1))]),_:1,__:[4]},8,["href"]),i("form",{onSubmit:at(Z,["prevent"]),class:"w-full"},[i("button",jo,[H(ee,{name:"arrow-left",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),C[5]||(C[5]=i("span",{class:"ml-3"},"Logout",-1))])],32)])])],32)):W("",!0)]),_:1}),H(De,{name:"mobile-backdrop","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-300 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:X(()=>[w.value?(g(),k("div",{key:0,class:"mobile-backdrop fixed inset-0 z-30 bg-black bg-opacity-50",onClick:m,onTouchstart:m},null,32)):W("",!0)]),_:1}),i("div",qo,[i("div",Ko,[(g(!0),k(de,null,ve(r.value,P=>(g(),Q($(Re),{key:P.id,href:F(P.route),class:L(["bottom-nav-item flex flex-col items-center px-2 py-2 rounded-lg transition-colors duration-200 touch-manipulation",{"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":u(P.route),"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800":!u(P.route)}]),style:{"min-height":"44px","min-width":"44px"},onClick:T=>R(P,T),"aria-label":`Navigate to ${P.label}`},{default:X(()=>[H(ee,{name:P.icon,size:"md",class:"mb-1"},null,8,["name"]),i("span",Qo,V(P.label),1)]),_:2},1032,["href","class","onClick","aria-label"]))),128))])])])):W("",!0)}},Jo=le(Zo,[["__scopeId","data-v-8c20ed64"]]),Xo={class:"fallback-header"},en={class:"fallback-logo"},tn={key:0,class:"fallback-error-indicator"},on={class:"fallback-menu",role:"menu"},nn={class:"fallback-menu-list"},an=["href","onClick"],rn={class:"fallback-menu-text"},sn={class:"fallback-actions"},ln=["disabled"],cn={key:0,class:"fallback-debug"},un={key:0,class:"debug-details"},dn={class:"debug-section"},vn={class:"debug-text"},mn={class:"debug-section"},gn={class:"debug-code"},hn={class:"debug-section"},fn={class:"debug-code"},ze=3,pn={__name:"NavigationFallback",props:{fallbackReason:{type:String,default:"Navigation component failed to load"},errorDetails:{type:Object,default:()=>({})},currentRoute:{type:String,default:""},failedNavigationType:{type:String,validator:s=>["desktop","mobile","unknown"].includes(s),default:"unknown"},showErrorIndicator:{type:Boolean,default:!0},showDebugInfo:{type:Boolean,default:!0},onRetry:{type:Function,default:null}},emits:["navigate","retry","reload","fallback-action"],setup(s,{emit:t}){const e=s,o=t,{hasRole:a}=xe(),n=y(!1),c=y(!1),b=y(0),v=!1,w=d(()=>({"navigation-fallback--desktop":e.failedNavigationType==="desktop","navigation-fallback--mobile":e.failedNavigationType==="mobile","navigation-fallback--with-error":e.showErrorIndicator,"navigation-fallback--debug":c.value&&v})),S=d(()=>({currentRoute:e.currentRoute,failedNavigationType:e.failedNavigationType,fallbackReason:e.fallbackReason,retryCount:b.value,timestamp:Date.now(),windowWidth:typeof window<"u"?window.innerWidth:0,userAgent:typeof navigator<"u"?navigator.userAgent:""})),p=d(()=>[{name:"dashboard",label:"Dashboard",icon:"home",href:"/dashboard",route:"dashboard",roles:[]},{name:"employees",label:"Employees",icon:"users",href:"/employees",route:"employees.index",roles:["admin","manager"]},{name:"projects",label:"Projects",icon:"briefcase",href:"/projects",route:"projects.index",roles:[]},{name:"leaves",label:"Leaves",icon:"calendar-days",href:"/leaves",route:"leaves.index",roles:[]},{name:"feedbacks",label:"Feedbacks",icon:"chat-bubble-left-right",href:"/feedbacks",route:"feedbacks.index",roles:[]}].filter(l=>l.roles.length===0?!0:l.roles.some(m=>a(m)))),x=r=>!r||!e.currentRoute?!1:e.currentRoute.startsWith(r),A=(r,l)=>{try{l.preventDefault(),o("navigate",{item:r,route:r.route,href:r.href,source:"fallback"}),ye.visit(r.href)}catch(m){console.error("[NAVIGATION FALLBACK] Navigation failed:",m),window.location.href=r.href}},B=async()=>{if(!(n.value||b.value>=ze)){n.value=!0,b.value++;try{o("retry",{attempt:b.value,maxRetries:ze,failedNavigationType:e.failedNavigationType}),e.onRetry?await e.onRetry():(await new Promise(r=>setTimeout(r,1e3)),window.location.reload())}catch(r){console.error("[NAVIGATION FALLBACK] Retry failed:",r),b.value>=ze&&alert("Maximum retry attempts reached. Please reload the page manually.")}finally{n.value=!1}}},D=()=>{o("reload"),window.location.reload()},E=()=>{c.value=!c.value};return oe(()=>{o("fallback-action",{action:"activated",reason:e.fallbackReason,failedType:e.failedNavigationType,timestamp:Date.now()}),typeof window<"u"&&window.reportError&&window.reportError({type:"navigation_fallback_activated",reason:e.fallbackReason,failedNavigationType:e.failedNavigationType,errorDetails:e.errorDetails,timestamp:Date.now()})}),re(()=>{o("fallback-action",{action:"deactivated",retryCount:b.value,timestamp:Date.now()})}),(r,l)=>(g(),k("div",{class:L(["navigation-fallback",w.value]),"data-navigation-type":"fallback",role:"navigation","aria-label":"Fallback Navigation"},[i("div",Xo,[i("div",en,[H(ee,{name:"building-office",size:"lg",class:"text-primary-600"}),l[0]||(l[0]=i("span",{class:"fallback-title"},"HR Management",-1))]),s.showErrorIndicator?(g(),k("div",tn,[H(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),l[1]||(l[1]=i("span",{class:"sr-only"},"Navigation Error",-1))])):W("",!0)]),i("nav",on,[i("ul",nn,[(g(!0),k(de,null,ve(p.value,m=>(g(),k("li",{key:m.name,class:"fallback-menu-item"},[i("a",{href:m.href,class:L(["fallback-menu-link",{"fallback-menu-link--active":x(m.route)}]),role:"menuitem",onClick:u=>A(m,u)},[m.icon?(g(),Q(ee,{key:0,name:m.icon,size:"sm",class:"fallback-menu-icon"},null,8,["name"])):W("",!0),i("span",rn,V(m.label),1)],10,an)]))),128))])]),i("div",sn,[i("button",{onClick:B,disabled:n.value,class:"fallback-action fallback-action--primary",type:"button"},[n.value?(g(),Q(ee,{key:0,name:"loading",size:"sm",class:"animate-spin mr-2"})):(g(),Q(ee,{key:1,name:"arrow-path",size:"sm",class:"mr-2"})),me(" "+V(n.value?"Retrying...":"Retry Navigation"),1)],8,ln),i("button",{onClick:D,class:"fallback-action fallback-action--secondary",type:"button"},[H(ee,{name:"arrow-path",size:"sm",class:"mr-2"}),l[2]||(l[2]=me(" Reload Page "))])]),s.showDebugInfo&&v?(g(),k("div",cn,[i("button",{onClick:E,class:"debug-toggle",type:"button"},[H(ee,{name:"bug-ant",size:"sm",class:"mr-1"}),me(" "+V(c.value?"Hide":"Show")+" Debug Info ",1)]),c.value?(g(),k("div",un,[i("div",dn,[l[3]||(l[3]=i("h4",{class:"debug-heading"},"Fallback Reason",-1)),i("p",vn,V(s.fallbackReason),1)]),i("div",mn,[l[4]||(l[4]=i("h4",{class:"debug-heading"},"Error Details",-1)),i("pre",gn,V(JSON.stringify(s.errorDetails,null,2)),1)]),i("div",hn,[l[5]||(l[5]=i("h4",{class:"debug-heading"},"Navigation State",-1)),i("pre",fn,V(JSON.stringify(S.value,null,2)),1)])])):W("",!0)])):W("",!0)],2))}},ct=le(pn,[["__scopeId","data-v-183ff890"]]);function yn(){const{getAuthError:s,validateAuthState:t}=xe(),e=y([]),o=50,a={CRITICAL:"critical",WARNING:"warning",INFO:"info",DEBUG:"debug"},n={AUTH_DATA:"auth_data",ROLE_CHECK:"role_check",NAVIGATION:"navigation",COMPONENT:"component",NETWORK:"network"},c=(r,l={})=>{const m=new Date().toISOString(),u=s(),h={id:`auth_error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:m,level:l.level||a.WARNING,category:l.category||n.COMPONENT,message:r.message||"Unknown authentication error",error:{name:r.name,message:r.message,stack:r.stack},context:{component:l.component||"Unknown",operation:l.operation||"Unknown",userAgent:navigator.userAgent,url:window.location.href,...l},authState:u,sessionInfo:{hasLocalStorage:typeof localStorage<"u",hasSessionStorage:typeof sessionStorage<"u",cookiesEnabled:navigator.cookieEnabled}};return e.value.unshift(h),e.value.length>o&&(e.value=e.value.slice(0,o)),h},b=(r,l={})=>{const m=c(r,l);return m.level,a.CRITICAL,m},v=(r,l,m={})=>b(r,{...m,category:n.ROLE_CHECK,operation:`checking role: ${l}`,level:a.WARNING}),w=(r,l,m={})=>b(r,{...m,category:n.NAVIGATION,operation:`navigating to: ${l}`,level:a.CRITICAL}),S=(r,l,m={})=>b(r,{...m,category:n.COMPONENT,component:l,operation:"component initialization",level:a.CRITICAL}),p=(r,l,m={})=>b(r,{...m,category:n.NETWORK,operation:`API request to: ${l}`,level:a.WARNING}),x=async(r,l={})=>{try{if(!t()&&l.requireAuth!==!1)throw new Error("Authentication state is invalid");return await r()}catch(m){if(b(m,{...l,operation:l.operation||"safe execution"}),l.fallback!==void 0)return l.fallback;if(l.suppressError)return null;throw m}},A=d(()=>{const r={total:e.value.length,byLevel:{},byCategory:{},recent:e.value.slice(0,10),oldestError:e.value[e.value.length-1],newestError:e.value[0]};return Object.values(a).forEach(l=>{r.byLevel[l]=e.value.filter(m=>m.level===l).length}),Object.values(n).forEach(l=>{r.byCategory[l]=e.value.filter(m=>m.category===l).length}),r}),B=()=>{e.value=[]},D=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,stats:A.value,errors:e.value}),E={};return{handleAuthError:b,handleRoleError:v,handleNavigationError:w,handleComponentError:S,handleNetworkError:p,safeExecute:x,createErrorReport:c,errorHistory:d(()=>e.value),getErrorStats:A,clearErrorHistory:B,exportErrorHistory:D,ERROR_LEVELS:a,ERROR_CATEGORIES:n,...E}}const bn={class:"navigation-error-boundary"},wn=5e3,kn={__name:"NavigationErrorBoundary",props:{currentRoute:{type:String,required:!0},navigationType:{type:String,validator:s=>["desktop","mobile","controller"].includes(s),default:"controller"},componentId:{type:String,default:()=>`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},maxRetries:{type:Number,default:3},onError:{type:Function,default:null},onRecover:{type:Function,default:null}},emits:["error","recover","fallback-activated","fallback-deactivated","navigation-attempt","conflict-detected"],setup(s,{expose:t,emit:e}){const o=s,a=e,{handleNavigationError:n,handleComponentError:c,ERROR_LEVELS:b,ERROR_CATEGORIES:v}=yn(),w=y(!1),S=y(null),p=y({}),x=y(0),A=y(!1),B=y(null),D=y([]),E=y([]),r=!1,l=d(()=>{var U;if(!S.value)return"Navigation component failed to load";const f=((U=S.value.message)==null?void 0:U.toLowerCase())||"";return f.includes("chunk")||f.includes("loading")?"Navigation component failed to load. This may be due to a network issue.":f.includes("permission")||f.includes("unauthorized")?"You don't have permission to access this navigation. Please contact your administrator.":f.includes("auth")||f.includes("session")?"Your session has expired. Please log in again.":f.includes("network")||f.includes("fetch")?"Network error while loading navigation. Please check your connection.":f.includes("conflict")||f.includes("multiple")?"Navigation conflict detected. Multiple navigation components are active.":f.includes("breakpoint")||f.includes("responsive")?"Navigation responsive behavior error. The navigation may not match your screen size.":"Navigation system encountered an error. Using fallback navigation."}),m=d(()=>o.navigationType);d(()=>w.value&&(x.value>=o.maxRetries||A.value===!1));const u=T=>{var ne,he;const f=((ne=T.message)==null?void 0:ne.toLowerCase())||"",U=((he=T.stack)==null?void 0:he.toLowerCase())||"";return f.includes("conflict")||f.includes("multiple")?"navigation_conflict":f.includes("breakpoint")||f.includes("responsive")?"responsive_error":f.includes("chunk")||f.includes("loading")?"component_loading":f.includes("permission")||f.includes("auth")?"authorization_error":f.includes("network")||f.includes("fetch")?"network_error":U.includes("vue")||U.includes("component")?"component_error":"unknown_navigation_error"},h=(T,f,U)=>{var Ce;const ne=Date.now();if(B.value&&ne-B.value<wn){const we=D.value[0];if(we&&we.message===T.message)return!1}B.value=ne;const he=u(T),ce={id:`nav_error_${ne}_${Math.random().toString(36).substr(2,9)}`,timestamp:ne,type:he,message:T.message,stack:T.stack,name:T.name,navigationType:o.navigationType,componentId:o.componentId,currentRoute:o.currentRoute,retryCount:x.value,windowWidth:window.innerWidth,userAgent:navigator.userAgent,errorInfo:U,instance:((Ce=f==null?void 0:f.$options)==null?void 0:Ce.name)||"Unknown"};switch(D.value.unshift(ce),D.value.length>20&&(D.value=D.value.slice(0,20)),U.value=ce,p.value={...ce,conflictStatus:Y.getStatus(),navigationState:{hasError:w.value,retryCount:x.value,navigationType:o.navigationType,componentId:o.componentId}},w.value=!0,he){case"navigation_conflict":F(ce);break;case"component_loading":R();break;case"authorization_error":Z(ce);break;default:N(ce)}if(o.onError)try{o.onError(ce)}catch(we){console.error("[NAVIGATION ERROR BOUNDARY] Custom error handler failed:",we)}return P(ce),a("error",ce),!1},F=T=>{const f=Y.detectConflicts();f.length>0&&(E.value.unshift({timestamp:Date.now(),conflicts:f,errorReport:T}),a("conflict-detected",{conflicts:f,errorReport:T}),Y.resolveConflicts())},R=T=>{x.value<o.maxRetries&&setTimeout(()=>{w.value&&M()},2e3)},Z=T=>{n(new Error(T.message),o.currentRoute,{component:`NavigationErrorBoundary-${o.navigationType}`,navigationType:o.navigationType,level:b.CRITICAL,category:v.NAVIGATION})},N=T=>{c(new Error(T.message),`NavigationErrorBoundary-${o.navigationType}`,{navigationType:o.navigationType,componentId:o.componentId,level:b.WARNING,category:v.COMPONENT})},M=async()=>{if(!(A.value||x.value>=o.maxRetries)){A.value=!0,x.value++;try{o.onRecover?await o.onRecover():await new Promise(T=>setTimeout(T,1e3)),z(),a("recover",{attempt:x.value,navigationType:o.navigationType,componentId:o.componentId})}catch(T){console.error("[NAVIGATION ERROR BOUNDARY] Recovery failed:",T);const f={...S.value,retryError:T.message,retryAttempt:x.value,timestamp:Date.now()};p.value=f,x.value>=o.maxRetries&&a("fallback-activated",{reason:"max_retries_reached",errorReport:f})}finally{A.value=!1}}},z=()=>{w.value=!1,S.value=null,p.value={},x.value=0,A.value=!1},G=T=>{a("navigation-attempt",{...T,source:"fallback",errorContext:S.value})},O=T=>{M()},_=()=>{window.location.reload()},C=T=>{T.action==="activated"?a("fallback-activated",{reason:"user_activated",errorReport:S.value}):T.action==="deactivated"&&a("fallback-deactivated",{errorReport:S.value})},P=T=>{if(typeof window<"u"&&window.reportError)try{window.reportError({type:"navigation_error",category:"navigation_boundary",...T})}catch(f){console.error("[NAVIGATION ERROR BOUNDARY] Failed to report error:",f)}T.type};return oe(()=>{Y.registerComponent(o.componentId,o.navigationType,{currentRoute:o.currentRoute,boundaryActive:!0,timestamp:Date.now()})}),re(()=>{Y.unregisterComponent(o.componentId)}),ft((T,f,U)=>h(T,f,U)),oe(()=>{const T=U=>{const ne=new Error(`Navigation conflict: ${U.detail.message}`);h(ne,null,{type:"conflict_event",detail:U.detail})},f=U=>{U.detail.componentId===o.componentId&&z()};window.addEventListener("navigation-conflict",T),window.addEventListener("navigation-conflict-cleanup",f),window._navigationErrorBoundaryCleanup=()=>{window.removeEventListener("navigation-conflict",T),window.removeEventListener("navigation-conflict-cleanup",f)}}),re(()=>{window._navigationErrorBoundaryCleanup&&(window._navigationErrorBoundaryCleanup(),delete window._navigationErrorBoundaryCleanup)}),be(()=>o.currentRoute,(T,f)=>{T!==f&&w.value&&z()}),t({hasError:w,errorInfo:S,retryCount:x,resetError:z,handleRetry:M,getErrorHistory:()=>D.value,getConflictHistory:()=>E.value,getStatus:()=>{var T;return{hasError:w.value,errorType:(T=S.value)==null?void 0:T.type,retryCount:x.value,isRetrying:A.value,navigationType:o.navigationType,componentId:o.componentId}}}),(T,f)=>(g(),k("div",bn,[w.value?(g(),Q(ct,{key:1,"fallback-reason":l.value,"error-details":p.value,"current-route":s.currentRoute,"failed-navigation-type":m.value,"show-error-indicator":!0,"show-debug-info":r,"on-retry":M,onNavigate:G,onRetry:O,onReload:_,onFallbackAction:C},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):ge(T.$slots,"default",{key:0},void 0,!0)]))}},En=le(kn,[["__scopeId","data-v-7c3ddc96"]]);class Tn{constructor(){this.isEnabled=y(!0),this.events=y([]),this.metrics=y({totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()}),this.maxEventHistory=1e3,this.performanceMarks=new Map,this.EVENT_TYPES={NAVIGATION_LOAD:"navigation_load",NAVIGATION_ERROR:"navigation_error",CONFLICT_DETECTED:"conflict_detected",CONFLICT_RESOLVED:"conflict_resolved",FALLBACK_ACTIVATED:"fallback_activated",FALLBACK_DEACTIVATED:"fallback_deactivated",COMPONENT_REGISTERED:"component_registered",COMPONENT_UNREGISTERED:"component_unregistered",NAVIGATION_SWITCH:"navigation_switch",RETRY_ATTEMPT:"retry_attempt",PERFORMANCE_MARK:"performance_mark",USER_ACTION:"user_action",BREAKPOINT_CHANGE:"breakpoint_change"},this.SEVERITY_LEVELS={CRITICAL:"critical",HIGH:"high",MEDIUM:"medium",LOW:"low",INFO:"info"},this.setupMonitoring()}logEvent(t,e={},o=this.SEVERITY_LEVELS.INFO){if(!this.isEnabled.value)return;const a=Date.now(),n={id:`event_${a}_${Math.random().toString(36).substr(2,9)}`,type:t,severity:o,timestamp:a,data:{...e,windowWidth:window.innerWidth,url:window.location.href,userAgent:navigator.userAgent},sessionId:this.getSessionId(),sequence:this.metrics.value.totalEvents+1};return this.events.value.unshift(n),this.events.value.length>this.maxEventHistory&&(this.events.value=this.events.value.slice(0,this.maxEventHistory)),this.updateMetrics(n),this.reportEvent(n),n}logNavigationLoad(t,e,o=null){const a={componentType:t,componentId:e,loadTime:o,timestamp:Date.now()};return o&&this.updateLoadTimeMetrics(o),this.logEvent(this.EVENT_TYPES.NAVIGATION_LOAD,a,this.SEVERITY_LEVELS.INFO)}logNavigationError(t,e={}){const o={errorMessage:t.message,errorStack:t.stack,errorName:t.name,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_ERROR,o,this.SEVERITY_LEVELS.HIGH)}logConflict(t,e=!1){const o=e?this.EVENT_TYPES.CONFLICT_RESOLVED:this.EVENT_TYPES.CONFLICT_DETECTED,a={conflicts:t.map(n=>({id:n.id,type:n.type,severity:n.severity,message:n.message})),conflictCount:t.length,resolved:e,timestamp:Date.now()};return this.logEvent(o,a,e?this.SEVERITY_LEVELS.MEDIUM:this.SEVERITY_LEVELS.HIGH)}logFallback(t,e="",o={}){const a=t?this.EVENT_TYPES.FALLBACK_ACTIVATED:this.EVENT_TYPES.FALLBACK_DEACTIVATED,n={activated:t,reason:e,errorContext:o,timestamp:Date.now()};return this.logEvent(a,n,t?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logComponentLifecycle(t,e,o,a={}){const n=t?this.EVENT_TYPES.COMPONENT_REGISTERED:this.EVENT_TYPES.COMPONENT_UNREGISTERED,c={registered:t,componentId:e,componentType:o,metadata:a,timestamp:Date.now()};return this.logEvent(n,c,this.SEVERITY_LEVELS.INFO)}logNavigationSwitch(t,e,o="",a={}){const n={fromType:t,toType:e,reason:o,preservedData:a,windowWidth:window.innerWidth,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_SWITCH,n,this.SEVERITY_LEVELS.INFO)}logRetryAttempt(t,e,o={}){const a={attempt:t,maxAttempts:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.RETRY_ATTEMPT,a,t>=e?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logUserAction(t,e,o={}){const a={action:t,target:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.USER_ACTION,a,this.SEVERITY_LEVELS.INFO)}logBreakpointChange(t,e,o,a){const n={oldWidth:t,newWidth:e,oldType:o,newType:a,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.BREAKPOINT_CHANGE,n,this.SEVERITY_LEVELS.INFO)}startPerformanceMark(t){const e=performance.now();return this.performanceMarks.set(t,{startTime:e}),e}endPerformanceMark(t,e={}){const o=this.performanceMarks.get(t);if(!o)return console.warn(`[NAVIGATION MONITOR] Performance mark not found: ${t}`),null;const a=performance.now(),n=a-o.startTime;this.performanceMarks.delete(t);const c={markName:t,duration:n,startTime:o.startTime,endTime:a,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.PERFORMANCE_MARK,c,this.SEVERITY_LEVELS.INFO),n}updateMetrics(t){switch(this.metrics.value.totalEvents++,t.type){case this.EVENT_TYPES.NAVIGATION_ERROR:this.metrics.value.errorCount++;break;case this.EVENT_TYPES.CONFLICT_DETECTED:this.metrics.value.conflictCount++;break;case this.EVENT_TYPES.FALLBACK_ACTIVATED:this.metrics.value.fallbackActivations++;break;case this.EVENT_TYPES.RETRY_ATTEMPT:this.metrics.value.retryAttempts++;break;case this.EVENT_TYPES.NAVIGATION_SWITCH:this.metrics.value.navigationSwitches++;break}}updateLoadTimeMetrics(t){const e=this.metrics.value.averageLoadTime,o=this.events.value.filter(a=>a.type===this.EVENT_TYPES.NAVIGATION_LOAD&&a.data.loadTime).length;o===1?this.metrics.value.averageLoadTime=t:this.metrics.value.averageLoadTime=(e*(o-1)+t)/o}getSessionId(){return this.sessionId||(this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),this.sessionId}logToConsole(t){const e={[this.SEVERITY_LEVELS.CRITICAL]:console.error,[this.SEVERITY_LEVELS.HIGH]:console.warn,[this.SEVERITY_LEVELS.MEDIUM]:console.warn,[this.SEVERITY_LEVELS.LOW]:console.info,[this.SEVERITY_LEVELS.INFO]:console.log}[t.severity]||console.log,o={[this.EVENT_TYPES.NAVIGATION_LOAD]:"",[this.EVENT_TYPES.NAVIGATION_ERROR]:"",[this.EVENT_TYPES.CONFLICT_DETECTED]:"",[this.EVENT_TYPES.CONFLICT_RESOLVED]:"",[this.EVENT_TYPES.FALLBACK_ACTIVATED]:"",[this.EVENT_TYPES.FALLBACK_DEACTIVATED]:"",[this.EVENT_TYPES.COMPONENT_REGISTERED]:"",[this.EVENT_TYPES.COMPONENT_UNREGISTERED]:"",[this.EVENT_TYPES.NAVIGATION_SWITCH]:"",[this.EVENT_TYPES.RETRY_ATTEMPT]:"",[this.EVENT_TYPES.PERFORMANCE_MARK]:"",[this.EVENT_TYPES.USER_ACTION]:"",[this.EVENT_TYPES.BREAKPOINT_CHANGE]:""}[t.type]||"";e(`${o} [NAV MONITOR] ${t.type.toUpperCase()}`,t.data)}reportEvent(t){[this.SEVERITY_LEVELS.CRITICAL,this.SEVERITY_LEVELS.HIGH].includes(t.severity)&&this.reportCriticalEvent(t)}reportCriticalEvent(t){}setupMonitoring(){if(typeof window>"u")return;const t=Y.detectConflicts.bind(Y);Y.detectConflicts=(...n)=>{const c=t(...n);return c.length>0&&this.logConflict(c,!1),c};const e=Y.resolveConflicts.bind(Y);Y.resolveConflicts=(...n)=>{const c=e(...n);return c.length>0&&this.logConflict([],!0),c};let o=window.innerWidth,a=o>=1024?"desktop":"mobile";window.addEventListener("resize",()=>{const n=window.innerWidth,c=n>=1024?"desktop":"mobile";c!==a&&(this.logBreakpointChange(o,n,a,c),o=n,a=c)}),window.addEventListener("navigation-conflict",n=>{this.logConflict([{id:"custom_conflict",type:"custom",severity:"high",message:n.detail.message}],!1)}),document.addEventListener("visibilitychange",()=>{this.logUserAction(document.hidden?"page_hidden":"page_visible","document",{visibility:document.visibilityState})})}getStats(){const e=Date.now()-this.metrics.value.lastResetTime;return{...this.metrics.value,timeRange:e,eventsPerMinute:(this.metrics.value.totalEvents/(e/6e4)).toFixed(2),errorRate:(this.metrics.value.errorCount/this.metrics.value.totalEvents*100).toFixed(2),conflictRate:(this.metrics.value.conflictCount/this.metrics.value.totalEvents*100).toFixed(2),recentEvents:this.events.value.slice(0,10),eventsByType:this.getEventsByType(),eventsBySeverity:this.getEventsBySeverity()}}getEventsByType(){const t={};return this.events.value.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),t}getEventsBySeverity(){const t={};return this.events.value.forEach(e=>{t[e.severity]=(t[e.severity]||0)+1}),t}exportData(){return{sessionId:this.getSessionId(),exportTime:Date.now(),metrics:this.metrics.value,events:this.events.value,stats:this.getStats(),conflictStatus:Y.getStatus(),systemInfo:{userAgent:navigator.userAgent,windowSize:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:Date.now()}}}reset(){this.events.value=[],this.metrics.value={totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()},this.performanceMarks.clear(),this.logEvent("monitor_reset",{reason:"manual_reset"},this.SEVERITY_LEVELS.INFO)}setEnabled(t){this.isEnabled.value=t,this.logEvent("monitor_toggle",{enabled:t},this.SEVERITY_LEVELS.INFO)}}const q=new Tn;class xn{constructor(){this.isEnabled=!1,this.debugLevel="info",this.autoDebug=!0,this.debugHistory=[],this.maxHistorySize=100,this.DEBUG_CATEGORIES={CONFLICT:"conflict",PERFORMANCE:"performance",COMPONENT:"component",BREAKPOINT:"breakpoint",ERROR:"error",STATE:"state",LIFECYCLE:"lifecycle"},this.setupDebugTools()}debug(t=null,e=!1){if(!this.isEnabled)return;const o=this.gatherDebugInfo();return console.group(" Navigation System Debug Report"),(!t||t===this.DEBUG_CATEGORIES.STATE)&&this.debugNavigationState(o,e),(!t||t===this.DEBUG_CATEGORIES.CONFLICT)&&this.debugConflicts(o,e),(!t||t===this.DEBUG_CATEGORIES.COMPONENT)&&this.debugComponents(o,e),(!t||t===this.DEBUG_CATEGORIES.BREAKPOINT)&&this.debugBreakpoints(o,e),(!t||t===this.DEBUG_CATEGORIES.PERFORMANCE)&&this.debugPerformance(o,e),(!t||t===this.DEBUG_CATEGORIES.ERROR)&&this.debugErrors(o,e),e&&this.debugDetailed(o),console.groupEnd(),this.addToHistory("debug_report",{category:t,detailed:e,debugInfo:o}),o}gatherDebugInfo(){return{timestamp:Date.now(),window:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio,userAgent:navigator.userAgent},location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},conflicts:Y.getStatus(),monitoring:q.getStats(),dom:this.analyzeDOMState(),components:this.analyzeComponents(),breakpoints:this.analyzeBreakpoints(),performance:this.analyzePerformance(),errors:this.analyzeErrors()}}debugNavigationState(t,e){console.group(" Navigation State"),console.log("Window Size:",`${t.window.width}x${t.window.height}`),console.log("Current URL:",t.location.href),console.log("Active Components:",t.components.active),console.log("Conflicts:",t.conflicts.hasConflicts?" YES":" NO"),console.log("Monitoring Enabled:",t.monitoring.totalEvents>0?" YES":" NO"),e&&(console.log("Full Window Info:",t.window),console.log("Full Location Info:",t.location),console.log("DOM Analysis:",t.dom)),console.groupEnd()}debugConflicts(t,e){console.group(" Conflict Analysis");const o=t.conflicts;o.hasConflicts?(console.error(`Found ${o.conflictCount} conflicts:`),o.conflicts.forEach((a,n)=>{console.error(`${n+1}. ${a.type}: ${a.message}`),e&&console.log("Conflict Details:",a)})):console.log(" No conflicts detected"),console.log("Active Components:",o.activeComponents.length),o.activeComponents.forEach(a=>{console.log(`- ${a.type}: ${a.id}`)}),e&&console.log("Full Conflict Status:",o),console.groupEnd()}debugComponents(t,e){console.group(" Component Analysis");const o=t.components;console.log("Active Components:",o.active.length),console.log("Desktop Components:",o.desktop.length),console.log("Mobile Components:",o.mobile.length),console.log("Fallback Components:",o.fallback.length),o.duplicates.length>0&&(console.warn(" Duplicate Components Found:"),o.duplicates.forEach(a=>{console.warn(`- ${a.type}: ${a.count} instances`)})),e&&(console.log("Component Details:"),console.log("- Active:",o.active),console.log("- Desktop:",o.desktop),console.log("- Mobile:",o.mobile),console.log("- Fallback:",o.fallback)),console.groupEnd()}debugBreakpoints(t,e){console.group(" Breakpoint Analysis");const o=t.breakpoints;console.log("Current Width:",o.currentWidth),console.log("Expected Type:",o.expectedType),console.log("Actual Type:",o.actualType),console.log("Match:",o.matches?" YES":" NO"),o.matches||(console.warn(" Breakpoint mismatch detected!"),console.warn(`Expected: ${o.expectedType}, Actual: ${o.actualType}`)),e&&console.log("Breakpoint Details:",o),console.groupEnd()}debugPerformance(t,e){console.group(" Performance Analysis");const o=t.performance;console.log("Average Load Time:",`${o.averageLoadTime.toFixed(2)}ms`),console.log("Total Events:",o.totalEvents),console.log("Error Rate:",`${o.errorRate}%`),console.log("Events/Minute:",o.eventsPerMinute),o.slowComponents.length>0&&(console.warn(" Slow Components:"),o.slowComponents.forEach(a=>{console.warn(`- ${a.name}: ${a.loadTime}ms`)})),e&&console.log("Performance Details:",o),console.groupEnd()}debugErrors(t,e){console.group(" Error Analysis");const o=t.errors;console.log("Total Errors:",o.totalErrors),console.log("Recent Errors:",o.recentErrors.length),console.log("Error Types:",Object.keys(o.errorsByType).join(", ")),o.recentErrors.length>0&&(console.warn("Recent Errors:"),o.recentErrors.forEach((a,n)=>{console.warn(`${n+1}. ${a.type}: ${a.message}`)})),e&&console.log("Error Details:",o),console.groupEnd()}debugDetailed(t){console.group(" Detailed Analysis"),console.log("Full Debug Info:",t),console.log("Debug History:",this.debugHistory.slice(0,10)),this.checkCommonIssues(t),console.groupEnd()}checkCommonIssues(t){console.group(" Common Issues Check");const e=[];t.components.duplicates.length>0&&e.push("Multiple navigation components of the same type detected"),t.breakpoints.matches||e.push("Navigation type does not match current breakpoint"),parseFloat(t.monitoring.errorRate)>10&&e.push("High error rate detected (>10%)"),t.performance.averageLoadTime>1e3&&e.push("Slow navigation loading detected (>1000ms)"),t.conflicts.hasConflicts&&e.push("Navigation conflicts detected"),e.length>0?(console.warn(" Issues Found:"),e.forEach((o,a)=>{console.warn(`${a+1}. ${o}`)})):console.log(" No common issues detected"),console.groupEnd()}analyzeDOMState(){const t=document.querySelectorAll("[data-navigation-type]"),e=document.querySelectorAll('[data-navigation-type="desktop"]'),o=document.querySelectorAll('[data-navigation-type="mobile"]'),a=document.querySelectorAll('[data-navigation-type="fallback"]');return{totalNavigationElements:t.length,desktopElements:e.length,mobileElements:o.length,fallbackElements:a.length,visibleElements:Array.from(t).filter(n=>n.offsetWidth>0&&n.offsetHeight>0).length,hiddenElements:Array.from(t).filter(n=>n.offsetWidth===0||n.offsetHeight===0).length}}analyzeComponents(){const e=Y.getStatus().activeComponents,o=e.filter(v=>v.type==="desktop"),a=e.filter(v=>v.type==="mobile"),n=e.filter(v=>v.type==="fallback"),c={};e.forEach(v=>{c[v.type]=(c[v.type]||0)+1});const b=Object.entries(c).filter(([v,w])=>w>1).map(([v,w])=>({type:v,count:w}));return{active:e,desktop:o,mobile:a,fallback:n,duplicates:b}}analyzeBreakpoints(){const t=window.innerWidth,e=t>=1024?"desktop":"mobile",a=Y.getStatus().activeComponents,n=a.some(v=>v.type==="desktop"),c=a.some(v=>v.type==="mobile");let b="none";return n&&!c?b="desktop":c&&!n?b="mobile":n&&c&&(b="both"),{currentWidth:t,expectedType:e,actualType:b,matches:e===b,hasDesktop:n,hasMobile:c}}analyzePerformance(){const t=q.getStats(),a=q.events.value.filter(n=>n.type==="navigation_load"&&n.data.loadTime).filter(n=>n.data.loadTime>500).map(n=>({name:n.data.componentType,loadTime:n.data.loadTime}));return{...t,slowComponents:a}}analyzeErrors(){const e=q.events.value.filter(a=>a.type==="navigation_error"||a.severity==="high"||a.severity==="critical"),o={};return e.forEach(a=>{const n=a.data.errorName||a.type;o[n]=(o[n]||0)+1}),{totalErrors:e.length,recentErrors:e.slice(0,5),errorsByType:o}}addToHistory(t,e){this.debugHistory.unshift({timestamp:Date.now(),action:t,data:e}),this.debugHistory.length>this.maxHistorySize&&(this.debugHistory=this.debugHistory.slice(0,this.maxHistorySize))}setupDebugTools(){this.isEnabled&&(window.debugNavigation=(t,e)=>this.debug(t,e),window.debugNavigationConflicts=()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),window.debugNavigationPerformance=()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),window.debugNavigationComponents=()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),window.navDebug={debug:(t,e)=>this.debug(t,e),conflicts:()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),performance:()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),components:()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),breakpoints:()=>this.debug(this.DEBUG_CATEGORIES.BREAKPOINT,!0),errors:()=>this.debug(this.DEBUG_CATEGORIES.ERROR,!0),export:()=>this.exportDebugData(),reset:()=>this.resetDebugData(),monitor:q,conflicts:Y},console.log(" Navigation Debug Tools Available:"),console.log("- debugNavigation() - Full debug report"),console.log("- debugNavigationConflicts() - Conflict analysis"),console.log("- debugNavigationPerformance() - Performance analysis"),console.log("- debugNavigationComponents() - Component analysis"),console.log("- navDebug.* - Debug shortcuts object"))}exportDebugData(){const t=this.gatherDebugInfo(),e={timestamp:Date.now(),debugInfo:t,debugHistory:this.debugHistory,monitoringData:q.exportData(),conflictData:Y.getStatus()};return console.log(" Debug Data Export:",e),navigator.clipboard&&navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>console.log(" Debug data copied to clipboard")).catch(()=>console.log(" Failed to copy to clipboard")),e}resetDebugData(){this.debugHistory=[],q.reset(),Y.reset(),console.log(" Debug data reset"),this.addToHistory("debug_reset",{timestamp:Date.now()})}autoDebugOnIssues(){if(!this.autoDebug)return;const t=Y.detectConflicts.bind(Y);Y.detectConflicts=(...e)=>{const o=t(...e);return o.length>0&&(console.warn(" Auto-debug triggered by conflicts"),this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0)),o},window.addEventListener("error",e=>{e.error&&e.error.message.toLowerCase().includes("navigation")&&(console.warn(" Auto-debug triggered by navigation error"),this.debug(this.DEBUG_CATEGORIES.ERROR,!0))})}}new xn;const Cn=["data-navigation-mode","data-navigation-id","data-conflict-status"],_n={class:"conflict-count"},An={__name:"NavigationController",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1},forceNavigationType:{type:String,validator:s=>["desktop","mobile",null].includes(s),default:null}},emits:["navigate","collapse-change","state-change","navigation-type-change","navigation-transition","mobile-drawer-toggle"],setup(s,{expose:t,emit:e}){const o=s,a=e;Be();const{windowWidth:n,navigationMode:c,isTransitioning:b,preserveCurrentState:v,restorePreservedState:w,getBreakpointInfo:S}=lt(),{roles:p,isAuthenticated:x}=xe();Pe();const A=y("desktop"),B=y(null),D=y({isTransitioning:!1,fromType:null,toType:null,preservedData:null}),E=y(`controller_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),r=y(`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),l=y([]),m=y(!1),u=y(""),h=y({}),F=!1,R=d(()=>o.forceNavigationType?o.forceNavigationType:c.value),Z=d(()=>{try{const I=R.value==="desktop"?ot:Jo;return A.value=R.value,I}catch(I){return console.error("[NavigationController] Error selecting navigation component:",I),B.value=I,ot}}),N=d(()=>{const I={currentRoute:o.currentRoute,userRoles:p.value||[],isAuthenticated:x.value};return R.value==="desktop"?{...I,initiallyCollapsed:o.initiallyCollapsed}:{...I}});d(()=>R.value==="desktop"),d(()=>R.value==="mobile");const M=d(()=>!1),z=I=>{try{a("navigate",{...I,navigationType:A.value,timestamp:Date.now()})}catch(J){console.error("[NavigationController] Navigation error:",J),B.value=J}},G=I=>{try{a("collapse-change",I)}catch(J){console.error("[NavigationController] Collapse change error:",J)}},O=I=>{try{a("state-change",{...I,navigationType:A.value,deviceType:R.value})}catch(J){console.error("[NavigationController] State change error:",J)}},_=I=>{try{a("mobile-drawer-toggle",I)}catch(J){console.error("[NavigationController] Mobile drawer toggle error:",J)}};be(R,async(I,J)=>{if(I!==J){D.value.isTransitioning=!0,D.value.fromType=J,D.value.toType=I;try{a("navigation-transition",!0);const _e=v({navigationState:{currentRoute:o.currentRoute,userPreferences:{},timestamp:Date.now()}});D.value.preservedData=_e,a("navigation-type-change",{from:J,to:I,breakpoint:n.value,breakpointInfo:S(),preservedData:_e,timestamp:Date.now(),isTransitioning:!0}),await We(),await new Promise(ht=>setTimeout(ht,150)),w()}catch(_e){console.error("[NavigationController] Error during navigation type change:",_e),B.value=_e}finally{a("navigation-transition",!1),D.value.isTransitioning=!1,D.value.fromType=null,D.value.toType=null}}},{immediate:!1});const C=()=>{B.value=null},P=()=>{},T=async I=>{q.logNavigationError(I,{componentId:E.value,navigationType:R.value,currentRoute:o.currentRoute}),(I.severity==="critical"||I.type==="component_loading")&&Ce("Navigation component error",I)},f=async()=>{try{return r.value=`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l.value=[],we(),q.logEvent("navigation_recovery_success",{controllerId:E.value,deviceType:R.value}),!0}catch(I){return console.error("[NavigationController] Recovery failed:",I),!1}},U=I=>{q.logNavigationError(new Error(I.message),{errorReport:I,source:"error_boundary"})},ne=I=>{q.logEvent("boundary_recovery",I)},he=I=>{Ce(I.reason,I.errorReport)},ce=I=>{l.value=I.conflicts,q.logConflict(I.conflicts,!1),Y.resolveConflicts().length>0&&q.logConflict(I.conflicts,!0)},Ce=(I,J={})=>{m.value=!0,u.value=I,h.value=J,q.logFallback(!0,I,J)},we=()=>{m.value=!1,u.value="",h.value={},q.logFallback(!1,"recovery_successful")},ut=I=>{q.logUserAction("fallback_navigation",I.item.name,I),z(I)},Ye=async()=>await f(),dt=I=>{q.logRetryAttempt(I.attempt,I.maxRetries,{source:"fallback",failedNavigationType:I.failedNavigationType}),Ye()},vt=()=>{q.logUserAction("fallback_reload","page"),window.location.reload()},mt=I=>{q.logUserAction("fallback_action",I.action,I)},je=()=>{q.startPerformanceMark(`navigation_transition_${R.value}`)},qe=()=>{q.endPerformanceMark(`navigation_transition_${R.value}`,{navigationType:R.value,controllerId:E.value})},gt=()=>{};return oe(()=>{Y.registerComponent(E.value,"controller",{currentRoute:o.currentRoute,deviceType:R.value,timestamp:Date.now()}),Y.registerComponent(r.value,R.value,{currentRoute:o.currentRoute,controllerId:E.value,timestamp:Date.now()}),q.logNavigationLoad("controller",E.value),A.value=R.value,a("navigation-type-change",{from:null,to:R.value,breakpoint:n.value,timestamp:Date.now()});const I=setInterval(()=>{const J=Y.detectConflicts();J.length!==l.value.length&&(l.value=J)},2e3);re(()=>{console.log("Unregistering NavigationController:",{controllerId:E.value,componentId:r.value}),clearInterval(I),clearInterval(devConflictCheckInterval),Y.unregisterComponent(E.value),Y.unregisterComponent(r.value),q.logEvent("component_unregistered",{controllerId:E.value,componentId:r.value})})}),t({debugNavigationController:P,clearError:C,currentNavigationType:d(()=>A.value),deviceType:R,isTransitioning:d(()=>D.value.isTransitioning||b.value),navigationError:d(()=>B.value),transitionState:d(()=>D.value),breakpointInfo:S}),(I,J)=>(g(),Q(En,{"current-route":s.currentRoute,"navigation-type":"controller","component-id":E.value,"max-retries":3,"on-error":T,"on-recover":f,onError:U,onRecover:ne,onFallbackActivated:he,onConflictDetected:ce},{default:X(()=>[i("div",{class:L(["navigation-controller",{"is-transitioning":D.value.isTransitioning||$(b),"desktop-mode":R.value==="desktop","mobile-mode":R.value==="mobile","has-conflicts":M.value,"fallback-active":m.value}]),"data-navigation-mode":R.value,"data-navigation-id":E.value,"data-conflict-status":M.value?"conflict":"clean"},[m.value?(g(),Q(ct,{key:0,"fallback-reason":u.value,"error-details":h.value,"current-route":s.currentRoute,"failed-navigation-type":R.value,"show-error-indicator":!0,"show-debug-info":F,"on-retry":Ye,onNavigate:ut,onRetry:dt,onReload:vt,onFallbackAction:mt},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):(g(),Q(De,{key:1,name:"navigation-transition",mode:"out-in",duration:{enter:200,leave:150},onBeforeEnter:je,onAfterEnter:qe,onBeforeLeave:je,onAfterLeave:qe},{default:X(()=>[(g(),Q(Le(Z.value),Ge({key:R.value},N.value,{"data-navigation-type":R.value,"data-navigation-id":r.value,"data-conflict-protected":!0,onNavigate:z,onCollapseChange:G,onStateChange:O,onMobileDrawerToggle:_}),null,16,["data-navigation-type","data-navigation-id"]))]),_:1})),F&&M.value?(g(),k("div",{key:2,class:"conflict-indicator",onClick:gt},[H(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),i("span",_n,V(l.value.length),1)])):W("",!0)],10,Cn)]),_:1},8,["current-route","component-id"]))}},Sn=le(An,[["__scopeId","data-v-75cf281c"]]),In=["aria-live"],Nn={class:"toast-content"},Rn={key:0,class:"toast-icon"},Dn={class:"toast-message"},Ln={key:0,class:"toast-title"},Mn={class:"toast-text"},$n={key:1,class:"toast-actions"},On=["aria-label"],Bn={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:s=>["success","error","warning","info","loading"].includes(s)},position:{type:String,default:"top-right",validator:s=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(s)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:s=>["low","normal","high"].includes(s)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(s,{expose:t,emit:e}){const o=s,a=e,n=y(!1),c=y(null),b=y(null),v=y(100),w=y(!1),S=y(0),p=y(0),x=d(()=>Fe("x-mark")),A=d(()=>{if(o.icon)return Fe(o.icon);const O={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return Fe(O[o.type]||O.info)}),B=d(()=>["toast-notification",`toast-notification--${o.type}`,`toast-notification--${o.size}`,`toast-notification--${o.position}`,{"toast-notification--with-title":o.title,"toast-notification--persistent":o.persistent,"toast-notification--with-action":o.actionText}]),D=d(()=>({zIndex:o.zIndex})),E=d(()=>["w-5 h-5",{"animate-spin":o.type==="loading"}]),r=d(()=>o.closable||o.actionText),l=d(()=>[`toast-progress--${o.type}`]),m=d(()=>({width:`${v.value}%`})),u=()=>{n.value=!0,o.sound&&G(),!o.persistent&&o.duration>0&&R()},h=()=>{n.value=!1,z(),a("close")},F=()=>{a("action"),o.persistent||h()},R=()=>{o.duration<=0||(S.value=Date.now(),p.value=o.duration,c.value=setTimeout(()=>{h()},o.duration),Z())},Z=()=>{if(!o.showProgress)return;const O=Date.now(),_=()=>{if(!n.value||w.value)return;const C=Date.now()-O,P=Math.max(0,100-C/o.duration*100);v.value=P,P>0&&(b.value=requestAnimationFrame(_))};_()},N=()=>{if(!c.value||o.persistent)return;w.value=!0,clearTimeout(c.value),cancelAnimationFrame(b.value);const O=Date.now()-S.value;p.value=Math.max(0,o.duration-O)},M=()=>{!w.value||o.persistent||(w.value=!1,p.value>0&&(S.value=Date.now(),c.value=setTimeout(()=>{h()},p.value),Z()))},z=()=>{c.value&&(clearTimeout(c.value),c.value=null),b.value&&(cancelAnimationFrame(b.value),b.value=null)},G=()=>{try{const O=new Audio,_={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};O.src=_[o.type]||_.info,O.volume=.3,O.play().catch(()=>{})}catch{}};return oe(()=>{u()}),re(()=>{z()}),be(()=>o.duration,()=>{n.value&&!o.persistent&&(z(),R())}),t({show:u,close:h,pauseTimer:N,resumeTimer:M}),(O,_)=>(g(),Q(pt,{to:"body"},[n.value?(g(),k("div",{key:0,class:L(B.value),style:Ue(D.value),role:"alert","aria-live":s.priority==="high"?"assertive":"polite",onMouseenter:N,onMouseleave:M},[i("div",Nn,[s.showIcon?(g(),k("div",Rn,[(g(),Q(Le(A.value),{class:L(E.value)},null,8,["class"]))])):W("",!0),i("div",Dn,[s.title?(g(),k("div",Ln,V(s.title),1)):W("",!0),i("div",Mn,[ge(O.$slots,"default",{},()=>[me(V(s.message),1)],!0)])]),r.value?(g(),k("div",$n,[s.actionText?(g(),k("button",{key:0,onClick:F,class:"toast-action-button"},V(s.actionText),1)):W("",!0),s.closable?(g(),k("button",{key:1,onClick:h,class:"toast-close-button","aria-label":s.closeLabel},[(g(),Q(Le(x.value),{class:"w-4 h-4"}))],8,On)):W("",!0)])):W("",!0)]),s.showProgress&&s.duration>0?(g(),k("div",{key:0,class:L(["toast-progress",l.value]),style:Ue(m.value)},null,6)):W("",!0)],46,In)):W("",!0)]))}},Pn=le(Bn,[["__scopeId","data-v-11baa49e"]]),Vn={class:"notification-container"},Fn={__name:"NotificationContainer",setup(s,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];d(()=>ae.notifications.filter(p=>!p.component));const o=d(()=>ae.notifications.filter(p=>p.component)),a=p=>{const x="fixed z-50 pointer-events-none",A={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${x} ${A[p]||A["top-right"]}`},n=p=>ae.getByPosition(p),c=p=>p.includes("left")?"slide-left":p.includes("right")?"slide-right":p.includes("center")?"slide-center":"slide-right",b=p=>{ae.remove(p)},v=(p,x="action")=>{const A=ae.getById(p);A!=null&&A.onAction&&A.onAction(x)},w=()=>{window.notify={success:(p,x)=>ae.success(p,x),error:(p,x)=>ae.error(p,x),warning:(p,x)=>ae.warning(p,x),info:(p,x)=>ae.info(p,x),loading:(p,x)=>ae.loading(p,x),confirm:p=>ae.confirm(p),alert:(p,x)=>ae.alert(p,x),clear:()=>ae.clear(),remove:p=>ae.remove(p)}},S=()=>{window.notify&&delete window.notify};return oe(()=>{w()}),re(()=>{S()}),t({notificationQueue:ae,notify:window.notify}),(p,x)=>(g(),k("div",Vn,[(g(),k(de,null,ve(e,A=>i("div",{key:A,class:L(a(A))},[H(yt,{name:c(A),tag:"div",class:"space-y-2"},{default:X(()=>[(g(!0),k(de,null,ve(n(A),B=>(g(),Q(Pn,Ge({key:B.id},{ref_for:!0},B,{onClose:D=>b(B.id),onAction:D=>v(B.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(g(!0),k(de,null,ve(o.value,A=>(g(),Q(Le(A.component||"NotificationModal"),Ge({key:A.id,ref_for:!0},A.props,{onClose:B=>b(A.id),onConfirm:B=>v(A.id,"confirm"),onCancel:B=>v(A.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Hn=le(Fn,[["__scopeId","data-v-67e6c621"]]),zn={class:"floating-attendance-widget"},Gn={class:"status-indicator"},Un={class:"time-info"},Wn={class:"time-display"},Yn={class:"time-label-mini"},jn={class:"widget-header"},qn={class:"status-info"},Kn={class:"status-text"},Qn={class:"timer-section"},Zn={class:"timer-value"},Jn={class:"timer-label"},Xn={class:"quick-actions"},ea=["disabled"],ta=["disabled"],oa={class:"quick-stats"},na={class:"stat"},aa={class:"stat-value"},ra={class:"stat"},ia={class:"stat-value"},sa={__name:"FloatingAttendanceWidget",setup(s){const t=y(!1),e=y({clockedIn:!1,onBreak:!1,clockInTime:null}),o=y(!1),a=y("0h 0m 0s"),n=y(null),c=()=>{try{const N={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(N))}catch(N){console.warn("Failed to save attendance state to localStorage:",N)}},b=()=>{try{const N=localStorage.getItem("floating-attendance-state");if(N){const M=JSON.parse(N),z=new Date(M.lastUpdate);if((new Date-z)/(1e3*60)<5)return e.value.clockedIn=M.clockedIn||!1,e.value.onBreak=M.onBreak||!1,e.value.clockInTime=M.clockInTime||null,n.value=M.breakStartTime||null,!0}}catch(N){console.warn("Failed to load attendance state from localStorage:",N)}return!1};let v=null;const w=d(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),S=d(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),p=d(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),x=d(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),A=d(()=>o.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),B=d(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),D=d(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const N=new Date(e.value.clockInTime),z=new Date-N,G=Math.floor(z/(1e3*60)),O=Math.floor(G/60),_=G%60;return`${O}h ${_}m`}),E=d(()=>{if(e.value.onBreak&&n.value){const N=new Date(n.value);if(isNaN(N.getTime()))return"0h 0m 1s";{const z=Math.max(0,new Date-N),G=Math.floor(z/(1e3*60*60)),O=Math.floor(z%(1e3*60*60)/(1e3*60)),_=Math.floor(z%(1e3*60)/1e3);return`${G}h ${O}m ${_}s`}}return"0h 0m"});d(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const r=()=>{t.value=!t.value},l=()=>{if(e.value.clockedIn&&e.value.clockInTime){const N=new Date;let M;e.value.onBreak&&n.value?M=new Date(n.value):M=new Date(e.value.clockInTime);const z=N-M,G=Math.floor(z/(1e3*60*60)),O=Math.floor(z%(1e3*60*60)/(1e3*60)),_=Math.floor(z%(1e3*60)/1e3);a.value=`${G}h ${O}m ${_}s`}else a.value="0h 0m 0s"},m=async()=>{try{if(o.value=!0,e.value.clockedIn){const N=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,a.value="0h 0m 0s",c(),Z()}else{const N=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=N.data.clock_in_time||new Date().toISOString(),c(),Z()}}catch(N){console.error("Clock in/out failed:",N),alert("Action failed: "+N.message)}finally{o.value=!1}},u=async()=>{try{if(o.value=!0,e.value.onBreak){const N=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,c(),Z()}else{n.value=new Date().toISOString(),e.value.onBreak=!0;const N=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});N.data.break_start_time&&(n.value=N.data.break_start_time),c(),Z()}}catch(N){console.error("Break action failed:",N),alert("Action failed: "+N.message)}finally{o.value=!1}},h=async()=>{var N,M;try{const G=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=G.clocked_in||!1,e.value.onBreak=G.on_break||!1,e.value.clockInTime=G.clock_in_time||null,G.on_break)if(G.break_start_time)n.value=G.break_start_time;else if((N=G.current_session)!=null&&N.current_break_start)n.value=G.current_session.current_break_start;else if((M=G.current_session)!=null&&M.break_sessions&&G.current_session.break_sessions.length>0){const O=G.current_session.break_sessions[G.current_session.break_sessions.length-1];O&&!O.end&&(n.value=O.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value})}catch(z){console.error("Failed to fetch attendance status:",z)}},F=N=>{N.key==="attendance-update"&&h()},R=N=>{console.log("FloatingWidget: Received attendance state change:",N.detail);const{clockedIn:M,onBreak:z,clockInTime:G,breakStartTime:O}=N.detail;e.value.clockedIn=M,e.value.onBreak=z,e.value.clockInTime=G,z&&O?n.value=O:z||(n.value=null),c(),l(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:O})},Z=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(N){console.warn("Failed to broadcast attendance update:",N)}};return oe(async()=>{b()&&l(),await h(),c(),l(),v=setInterval(l,1e3),window.addEventListener("storage",F),window.addEventListener("attendance-state-changed",R),console.log("FloatingWidget: Event listeners registered")}),re(()=>{v&&clearInterval(v),window.removeEventListener("storage",F),window.removeEventListener("attendance-state-changed",R),console.log("FloatingWidget: Event listeners removed")}),(N,M)=>(g(),k("div",zn,[t.value?W("",!0):(g(),k("div",{key:0,onClick:r,class:L(["floating-button",x.value])},[i("div",Gn,[i("div",{class:L(p.value)},null,2)]),i("div",Un,[i("div",Wn,V(a.value),1),i("div",Yn,V(S.value),1)]),H($(Et),{class:"w-4 h-4 expand-icon"})],2)),t.value?(g(),k("div",{key:1,class:"expanded-widget",onClick:M[0]||(M[0]=at(()=>{},["stop"]))},[i("div",jn,[i("div",qn,[i("div",{class:L(p.value)},null,2),i("span",Kn,V(w.value),1)]),i("button",{onClick:r,class:"minimize-btn",title:"Minimize"},[H($(Tt),{class:"w-4 h-4"})])]),i("div",Qn,[i("div",Zn,V(a.value),1),i("div",Jn,V(S.value),1)]),i("div",Xn,[i("button",{onClick:m,disabled:o.value,class:L(B.value)},V(A.value),11,ea),e.value.clockedIn?(g(),k("button",{key:0,onClick:u,disabled:o.value,class:"break-action"},[(g(),Q(Le(e.value.onBreak?$(vo):$(uo)),{class:"w-3 h-3"})),me(" "+V(e.value.onBreak?"End":"Break"),1)],8,ta)):W("",!0)]),i("div",oa,[i("div",na,[i("span",aa,V(D.value),1),M[1]||(M[1]=i("span",{class:"stat-label"},"Today",-1))]),i("div",ra,[i("span",ia,V(E.value),1),M[2]||(M[2]=i("span",{class:"stat-label"},"Break",-1))])])])):W("",!0),t.value?(g(),k("div",{key:2,class:"backdrop",onClick:r})):W("",!0)]))}},la=le(sa,[["__scopeId","data-v-421365b8"]]),ca={class:"skip-links","aria-label":"Skip navigation links"},ua=["href","onClick"],da={__name:"SkipLinks",setup(s){const{skipLinks:t,handleSkipLinkClick:e}=xt();return(o,a)=>(g(),k("div",ca,[(g(!0),k(de,null,ve($(t),n=>(g(),k("a",{key:n.href,href:n.href,class:"skip-link sr-only-focusable",onClick:c=>$(e)(c,n.href)},V(n.label),9,ua))),128))]))}},va=le(da,[["__scopeId","data-v-f9a7b518"]]),ma={class:"live-regions"},ga={__name:"LiveRegion",setup(s){const t=y(null),e=y(null),o=y(null);return oe(()=>{bt.init()}),(a,n)=>(g(),k("div",ma,[i("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),i("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),i("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:o},null,512)]))}},ha=le(ga,[["__scopeId","data-v-94955163"]]),$e=y("desktop"),ue=y({isCollapsed:!1,width:{expanded:256,collapsed:64}}),te=y({isDrawerOpen:!1,headerHeight:64,bottomNavHeight:80}),se=y({isTransitioning:!1,duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});function fa(){const{windowWidth:s}=Be(),{isTransitioning:t}=lt(),e=d(()=>$e.value),o=d(()=>{const r={marginLeft:ue.value.isCollapsed?ue.value.width.collapsed:ue.value.width.expanded,marginRight:0,paddingTop:0,paddingBottom:0,minHeight:"100vh"};return{...r,marginLeftPx:`${r.marginLeft}px`,transition:`margin-left ${se.value.duration}ms ${se.value.easing}`}}),a=d(()=>{const r=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top").replace("px",""))||0,l=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom").replace("px",""))||0,m={marginLeft:0,marginRight:0,paddingTop:te.value.headerHeight+r,paddingBottom:te.value.bottomNavHeight+l,minHeight:`calc(100vh - ${te.value.headerHeight+te.value.bottomNavHeight}px)`};return{...m,paddingTopPx:`${m.paddingTop}px`,paddingBottomPx:`${m.paddingBottom}px`,transition:`all ${se.value.duration}ms ${se.value.easing}`}}),n=d(()=>e.value==="desktop"?o.value:a.value),c=d(()=>{const r={"main-content-area":!0,"gpu-accelerated":!0};return r[`${e.value}-layout`]=!0,e.value==="desktop"&&(r["sidebar-collapsed"]=ue.value.isCollapsed,r["sidebar-expanded"]=!ue.value.isCollapsed),e.value==="mobile"&&(r["drawer-open"]=te.value.isDrawerOpen,r["drawer-closed"]=!te.value.isDrawerOpen),se.value.isTransitioning||t.value?r.transitioning=!0:r["transition-complete"]=!0,r}),b=d(()=>{const r={"content-inner":!0,"transition-all":!0,"duration-300":!0,"ease-out":!0};return e.value==="mobile"&&te.value.isDrawerOpen&&(r["opacity-50"]=!0,r["pointer-events-none"]=!0,r["scale-95"]=!0),r}),v=d(()=>{const r={};return e.value==="desktop"?(r["--sidebar-width"]=`${n.value.marginLeft}px`,r["--content-margin-left"]=n.value.marginLeftPx):(r["--mobile-header-height"]=`${te.value.headerHeight}px`,r["--mobile-bottom-nav-height"]=`${te.value.bottomNavHeight}px`,r["--content-padding-top"]=n.value.paddingTopPx,r["--content-padding-bottom"]=n.value.paddingBottomPx),r["--layout-transition-duration"]=`${se.value.duration}ms`,r["--layout-transition-easing"]=se.value.easing,r}),w=r=>{ue.value.isCollapsed!==r&&(ue.value.isCollapsed=r,x("sidebar-toggle"))},S=r=>{te.value.isDrawerOpen!==r&&(te.value.isDrawerOpen=r,r?document.body.style.overflow="hidden":document.body.style.overflow="")},p=r=>{if($e.value!==r){const l=$e.value;$e.value=r,x("layout-type-change",{from:l,to:r})}},x=async(r,l={})=>{if(se.value.isTransitioning){console.warn("[useLayoutSpacing] Transition already in progress, skipping");return}se.value.isTransitioning=!0;try{await We();const m=document.documentElement;Object.entries(v.value).forEach(([u,h])=>{m.style.setProperty(u,h)}),await new Promise(u=>setTimeout(u,se.value.duration))}catch(m){console.error("[useLayoutSpacing] Layout transition error:",m)}finally{se.value.isTransitioning=!1}},A=()=>{const r=s.value;r>=1440?ue.value.width.expanded=280:r>=1920?ue.value.width.expanded=320:ue.value.width.expanded=256,r<=375?(te.value.headerHeight=56,te.value.bottomNavHeight=72):r<=640?(te.value.headerHeight=64,te.value.bottomNavHeight=80):(te.value.headerHeight=68,te.value.bottomNavHeight=84)},B=()=>{const r=n.value,l=s.value,m=window.innerHeight;let u,h;return e.value==="desktop"?(u=l-r.marginLeft,h=m):(u=l,h=m-r.paddingTop-r.paddingBottom),{width:u,height:h,availableWidth:Math.max(u,320),availableHeight:Math.max(h,200)}},D=()=>{const r=[],l=document.querySelector('[data-navigation-type="desktop"]'),m=document.querySelector('[data-navigation-type="mobile"]');if(l&&m){const h=window.getComputedStyle(l).display!=="none",F=window.getComputedStyle(m).display!=="none";h&&F&&r.push("Both desktop and mobile navigation are visible")}const u=document.querySelector(".main-content-area");if(u){const h=window.getComputedStyle(u),F=parseInt(h.marginLeft),R=n.value.marginLeft;Math.abs(F-R)>5&&r.push(`Content margin mismatch: expected ${R}px, got ${F}px`)}return r};be(e,(r,l)=>{r!==l&&p(r)},{immediate:!0}),be(s,()=>{A()},{immediate:!0});const E=()=>{};return{layoutType:d(()=>e.value),currentSpacing:n,sidebarState:d(()=>ue.value),mobileState:d(()=>te.value),isTransitioning:d(()=>se.value.isTransitioning),mainContentClasses:c,contentInnerClasses:b,cssCustomProperties:v,updateSidebarState:w,updateMobileDrawerState:S,updateLayoutType:p,executeLayoutTransition:x,getContentAreaDimensions:B,detectLayoutConflicts:D,debugLayoutSpacing:E,adjustForScreenSize:A}}const pa={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},ya=["aria-hidden"],ba={"aria-label":"User account menu"},wa=["aria-label"],Aa={__name:"AuthenticatedLayout",setup(s){const t=wt(),e=y("desktop"),o=y(!1),{getUserProperty:a,getAuthError:n}=xe();Be();const{isDark:c,initializeTheme:b}=Pe();oe(()=>{b()});const{mainContentClasses:v,contentInnerClasses:w,cssCustomProperties:S,updateSidebarState:p,updateMobileDrawerState:x,updateLayoutType:A,isTransitioning:B}=fa(),D=d(()=>a("name","User")),E=d(()=>a("email","")),r=d(()=>n()),l=d(()=>!!r.value),m=d(()=>{try{return route().current()||""}catch(f){return console.warn("[LAYOUT] Route helper not available:",f),window.location.pathname.replace("/","")||"dashboard"}}),u=f=>{},h=f=>{e.value=f.to,A(f.to)},F=f=>{o.value=f,p(f)},R=f=>{f.sidebarCollapsed!==void 0&&(o.value=f.sidebarCollapsed)},Z=d(()=>({"layout-container":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!c.value,"bg-neutral-900":c.value,"desktop-layout":e.value==="desktop","mobile-layout":e.value==="mobile"}));d(()=>{const f=v.value,U={"has-header":_.value};return{...f,...U}});const N=d(()=>({"px-6":!0,"py-4":!0,flex:!0,"items-center":!0,"justify-between":!0,"shadow-sm":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!c.value,"border-neutral-200":!c.value,"bg-neutral-900":c.value,"border-neutral-700":c.value})),M=d(()=>({"px-6":!0,"py-4":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!c.value,"border-neutral-200":!c.value,"bg-neutral-900":c.value,"border-neutral-700":c.value})),z=d(()=>({"flex-1":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!c.value,"bg-neutral-900":c.value})),G=y(!1),O=y(!1),_=d(()=>!!t.header),C=f=>{G.value=f,x(f),f?document.body.style.overflow="hidden":document.body.style.overflow=""},P=f=>{O.value=f},T=d(()=>w.value);return(f,U)=>(g(),k("div",null,[H(va),H(ha),H(Lt),H(Hn),H(la),l.value?(g(),k("div",pa,[U[0]||(U[0]=i("p",{class:"font-semibold"},"Authentication Error:",-1)),i("p",null,V(r.value),1),U[1]||(U[1]=i("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):W("",!0),H(Sn,{"current-route":m.value,"initially-collapsed":o.value,onNavigate:u,onCollapseChange:F,onNavigationTypeChange:h,onNavigationTransition:P,onStateChange:R,onMobileDrawerToggle:C},null,8,["current-route","initially-collapsed"]),i("div",{class:L(Z.value)},[i("div",{class:L(["main-content-area","desktop-layout","gpu-accelerated",{"sidebar-collapsed":o.value,"sidebar-expanded":!o.value,transitioning:O.value||$(B),"has-header":_.value}]),style:Ue({marginLeft:e.value==="desktop"?o.value?"64px":"256px":"0",transition:"margin-left 300ms cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"100vh",...$(S)}),"data-layout-type":"authenticated-content","aria-hidden":O.value?"true":"false"},[e.value==="desktop"&&$(t).header?(g(),k("header",{key:0,class:L(["content-header",N.value]),role:"banner","aria-label":"Page header"},[i("div",{class:L(["text-lg font-semibold transition-colors duration-200",$(c)?"text-neutral-100":"text-neutral-900"])},[ge(f.$slots,"header")],2),i("nav",ba,[H(rt,{align:"right",width:"48"},{trigger:X(()=>[i("button",{class:L(["flex items-center p-2 rounded-lg transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",$(c)?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"]),"aria-label":`User menu for ${D.value}`,"aria-haspopup":"true","aria-expanded":"false"},[U[2]||(U[2]=i("div",{class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},[i("svg",{class:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),i("span",{class:L(["ml-2 text-sm font-medium",$(c)?"text-neutral-200":"text-neutral-700"])},V(D.value),3)],10,wa)]),content:X(()=>[i("div",{class:L(["px-4 py-2 border-b",$(c)?"border-neutral-600 bg-neutral-800":"border-neutral-200 bg-white"])},[i("p",{class:L(["text-sm font-medium",$(c)?"text-neutral-100":"text-neutral-900"])},V(D.value),3),i("p",{class:L(["text-xs",$(c)?"text-neutral-400":"text-neutral-500"])},V(E.value),3)],2),H(Oe,{href:f.route("profile.edit")},{default:X(()=>U[3]||(U[3]=[me(" Profile Settings ")])),_:1,__:[3]},8,["href"]),H(Oe,{href:f.route("logout"),method:"post",as:"button"},{default:X(()=>U[4]||(U[4]=[me(" Log Out ")])),_:1,__:[4]},8,["href"])]),_:1})])],2)):W("",!0),e.value==="mobile"&&$(t).header?(g(),k("header",{key:1,class:L(["content-header",M.value]),role:"banner","aria-label":"Page header"},[i("div",{class:L(["text-lg font-semibold",$(c)?"text-neutral-100":"text-neutral-900"])},[ge(f.$slots,"header")],2)],2)):W("",!0),i("main",{id:"main-content",class:L(["content-body",z.value]),role:"main","aria-label":"Main content",tabindex:"-1"},[i("div",{class:L(T.value)},[ge(f.$slots,"default")],2)],2)],14,ya)],2)]))}};export{Aa as _,vo as a,rt as b,ae as n,uo as r,Be as u};
