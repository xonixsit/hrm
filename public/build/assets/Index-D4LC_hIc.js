import{e as w,f as m,g as ae,o,h as c,k as f,Q as d,a as l,c as u,i as v,w as P,b as F,l as b,t as s,n as le}from"./app-CXKi8mjd.js";import{A as re}from"./AuthenticatedLayout-DoGEdwjp.js";import{P as se}from"./PageLayout-DEAr5RjW.js";import{D as oe}from"./DataTable-DTOUwT73.js";import{C as ne}from"./ContentCard-BNeNu51k.js";import{B as k}from"./BaseSelect-BHoRJ9If.js";import{I as ie}from"./Icon-Df7gT4AH.js";import{Q as ue,M as de,r as T,J as ce,b as pe,j as me}from"./icons-BQ2d7eX2.js";import"./useAuth-U3eYlS2P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-CfjFuS8p.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-Bz95mQtz.js";import"./PageHeader-CA4A4Ukr.js";/* empty css                                                                   */import"./BaseButton-Bs8zCeSD.js";/* empty css                                                                   */import"./BaseInput-Br0pCMu0.js";/* empty css                                                                  */import"./BaseMultiSelect-BTpgSi_0.js";/* empty css                                                                        *//* empty css                                                                  */import"./BaseCheckbox-BzpNIh1U.js";/* empty css                                                                     *//* empty css                                                                   */const fe={class:"bg-white rounded-lg shadow-sm overflow-hidden"},ve={class:"border-b border-gray-200 bg-gray-50 px-6 py-4"},ye={class:"flex justify-between items-center mb-4"},he={class:"flex items-center space-x-4"},ge={class:"relative"},be={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xe={key:1,class:"mt-4 flex flex-wrap gap-2"},_e={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},we={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},ke={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},je={key:3,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Ce={class:"flex items-center space-x-3"},Ae={class:"flex-shrink-0 relative"},De={class:"w-10 h-10 bg-gradient-to-br from-primary-100 to-primary-200 rounded-full flex items-center justify-center ring-2 ring-white shadow-sm"},Le={class:"text-sm font-semibold text-primary-700"},Se={class:"min-w-0 flex-1"},Ve={class:"font-semibold text-neutral-900 truncate"},Pe={class:"flex items-center space-x-2 text-sm text-neutral-500"},Fe={class:"truncate"},Te={key:0,class:"text-green-600",title:"Verified"},Ee={class:"text-sm"},ze={key:0,class:"text-neutral-900"},Me={key:1,class:"text-neutral-400 italic"},$e={class:"text-sm"},Be={key:0,class:"text-neutral-900 font-medium"},Ue={key:1,class:"text-neutral-400 italic"},Ie={class:"flex items-center space-x-2"},qe={class:"text-sm text-neutral-700 font-medium"},Ne={class:"text-sm"},Oe={class:"text-neutral-900"},We={class:"text-neutral-500"},vt={__name:"Index",props:{employees:{type:Object,required:!0},filters:{type:Object,default:()=>({})},queryParams:{type:Object,default:()=>({})}},setup(y){const n=y,g=w(!1),x=w(!1),e=w({department_id:n.queryParams.filter_department||"",contract_type:n.queryParams.filter_contract_type||"",status:n.queryParams.filter_status||"",search:n.queryParams.search||"",joined_after:n.queryParams.filter_joined_after||""}),j=m(()=>[{value:"",label:"All departments"},...(n.filters.departments||[]).map(t=>({value:t.id.toString(),label:t.name}))]),C=m(()=>[{value:"",label:"All types"},...(n.filters.contractTypes||[]).map(t=>({value:t,label:t}))]),A=m(()=>[{value:"",label:"All statuses"},...(n.filters.statuses||[]).map(t=>({value:t,label:t.charAt(0).toUpperCase()+t.slice(1)}))]),E=m(()=>e.value.department_id||e.value.contract_type||e.value.status||e.value.search||e.value.joined_after),D=m(()=>{if(!e.value.department_id)return null;const t=j.value.find(a=>a.value===e.value.department_id);return!t||t.value===""?null:t.label}),L=m(()=>{if(!e.value.contract_type)return null;const t=C.value.find(a=>a.value===e.value.contract_type);return!t||t.value===""?null:t.label}),S=m(()=>{if(!e.value.status)return null;const t=A.value.find(a=>a.value===e.value.status);return!t||t.value===""?null:t.label}),z=[{label:"Dashboard",href:route("dashboard")},{label:"Employees",current:!0}],M=[{id:"add-employee",label:"Add Employee",icon:ue,variant:"primary",handler:()=>d.visit(route("employees.create"))},{id:"import-employees",label:"Import Employees",icon:de,variant:"secondary",handler:()=>d.visit(route("employees.import"))},{id:"view-trash",label:"View Deleted",icon:T,variant:"secondary",handler:()=>d.visit(route("employees.trash"))},{id:"export",label:"Export",icon:ce,variant:"secondary",handler:()=>te()}],$=[{key:"name",label:"Employee",sortable:!0,minWidth:"200px",priority:"high"},{key:"email",label:"Email",sortable:!0,minWidth:"220px",priority:"high"},{key:"department",label:"Department",sortable:!0,minWidth:"140px",align:"left",priority:"high"},{key:"job_title",label:"Position",sortable:!0,minWidth:"150px",priority:"high"},{key:"contract_type",label:"Employment Type",sortable:!0,minWidth:"130px",align:"center",priority:"medium"},{key:"join_date",label:"Start Date",sortable:!0,minWidth:"120px",align:"left",priority:"medium"}],B=t=>[{id:"view",label:"View Details",icon:pe,handler:()=>d.visit(route("employees.show",t.id))},{id:"edit",label:"Edit",icon:me,handler:()=>d.visit(route("employees.edit",t.id))},{id:"delete",label:"Delete",icon:T,variant:"danger",handler:()=>W(t.id)}],U={enabled:!1},I={title:"No employees found",description:"Get started by adding your first employee to the system.",icon:"users",actions:[{id:"add-first-employee",label:"Add Employee",variant:"primary",handler:()=>d.visit(route("employees.create"))}]},q=t=>t.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),N=t=>{switch(t){case"Full-time":case"Permanent":return"bg-green-500";case"Part-time":return"bg-amber-500";case"Contract":return"bg-purple-500";case"Temporary":return"bg-orange-500";default:return"bg-neutral-400"}},V=t=>{if(!t)return"N/A";if(t.includes("-")){const[r,_,p]=t.split("-");return new Date(parseInt(r),parseInt(_)-1,parseInt(p)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},O=t=>{if(!t)return"";const a=new Date(t),_=Math.abs(new Date-a),p=Math.ceil(_/(1e3*60*60*24));if(p<30)return`${p} days ago`;if(p<365){const h=Math.floor(p/30);return`${h} month${h>1?"s":""} ago`}else{const h=Math.floor(p/365);return`${h} year${h>1?"s":""} ago`}},W=t=>{confirm("Are you sure you want to delete this employee? This action cannot be undone.")&&(g.value=!0,d.delete(route("employees.destroy",t),{onFinish:()=>{g.value=!1},onError:()=>{alert("Failed to delete employee. Please try again.")}}))},J=({action:t,row:a})=>{t.handler&&t.handler()},i=()=>{g.value=!0,console.log("apply filters");const t={page:1,per_page:n.employees.per_page||10};e.value.department_id&&(t.filter_department=e.value.department_id),e.value.contract_type&&(t.filter_contract_type=e.value.contract_type),e.value.status&&(t.filter_status=e.value.status),e.value.search&&(t.search=e.value.search),e.value.joined_after&&(t.filter_joined_after=e.value.joined_after),d.get(route("employees.index"),t,{preserveState:!0,preserveScroll:!0,onFinish:()=>{g.value=!1}})},Q=()=>{e.value.department_id="",i()},R=()=>{e.value.contract_type="",i()},G=()=>{e.value.status="",i()},H=()=>{e.value.joined_after="",i()},K=()=>{e.value={department_id:"",contract_type:"",status:"",search:"",joined_after:""},i()},X=()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{i()},500)},Y=t=>{e.value.search=t||"",i()},Z=t=>{const a={...n.queryParams,page:t};e.value.department_id&&(a.filter_department=e.value.department_id),e.value.contract_type&&(a.filter_contract_type=e.value.contract_type),e.value.status&&(a.filter_status=e.value.status),e.value.search&&(a.search=e.value.search),d.visit(route("employees.index",a),{preserveState:!0,preserveScroll:!0})},ee=t=>{const a={...n.queryParams,per_page:t,page:1};e.value.department_id&&(a.filter_department=e.value.department_id),e.value.contract_type&&(a.filter_contract_type=e.value.contract_type),e.value.status&&(a.filter_status=e.value.status),e.value.search&&(a.search=e.value.search),d.visit(route("employees.index",a),{preserveState:!0,preserveScroll:!0})},te=()=>{const t=new URLSearchParams;e.value.department_id&&t.set("filter_department",e.value.department_id),e.value.contract_type&&t.set("filter_contract_type",e.value.contract_type),e.value.status&&t.set("filter_status",e.value.status),e.value.search&&t.set("search",e.value.search),t.set("export","true"),window.open(`${route("employees.index")}?${t.toString()}`,"_blank")};return(t,a)=>(o(),ae(re,null,{default:c(()=>[f(se,{title:"Employees",subtitle:"Manage your organization's employees and their information",breadcrumbs:z,actions:M},{default:c(()=>[l("div",fe,[l("div",ve,[l("div",ye,[a[8]||(a[8]=l("h3",{class:"text-lg font-medium text-gray-900"},"Employee List",-1)),l("div",he,[l("div",ge,[a[6]||(a[6]=l("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),P(l("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.search=r),type:"text",placeholder:"Name, email, job title...",class:"block w-80 pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onInput:X},null,544),[[F,e.value.search]])]),l("button",{onClick:a[1]||(a[1]=r=>x.value=!x.value),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[a[7]||(a[7]=l("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1)),b(" "+s(x.value?"Hide Filters":"Show Filters"),1)])])]),x.value?(o(),u("div",be,[l("div",null,[a[9]||(a[9]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),f(k,{modelValue:e.value.department_id,"onUpdate:modelValue":[a[2]||(a[2]=r=>e.value.department_id=r),i],options:j.value,placeholder:"All departments",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[a[10]||(a[10]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employment Type",-1)),f(k,{modelValue:e.value.contract_type,"onUpdate:modelValue":[a[3]||(a[3]=r=>e.value.contract_type=r),i],options:C.value,placeholder:"All types",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[a[11]||(a[11]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),f(k,{modelValue:e.value.status,"onUpdate:modelValue":[a[4]||(a[4]=r=>e.value.status=r),i],options:A.value,placeholder:"All statuses",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[a[12]||(a[12]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Joined After",-1)),P(l("input",{"onUpdate:modelValue":a[5]||(a[5]=r=>e.value.joined_after=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:i},null,544),[[F,e.value.joined_after]])])])):v("",!0),E.value?(o(),u("div",xe,[a[17]||(a[17]=l("span",{class:"text-sm font-medium text-gray-700"},"Active filters:",-1)),D.value?(o(),u("span",_e,[b(" Department: "+s(D.value)+" ",1),l("button",{onClick:Q,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none"},a[13]||(a[13]=[l("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):v("",!0),L.value?(o(),u("span",we,[b(" Type: "+s(L.value)+" ",1),l("button",{onClick:R,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500 focus:outline-none"},a[14]||(a[14]=[l("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):v("",!0),S.value?(o(),u("span",ke,[b(" Status: "+s(S.value)+" ",1),l("button",{onClick:G,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500 focus:outline-none"},a[15]||(a[15]=[l("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):v("",!0),e.value.joined_after?(o(),u("span",je,[b(" Joined After: "+s(V(e.value.joined_after))+" ",1),l("button",{onClick:H,class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-yellow-400 hover:bg-yellow-200 hover:text-yellow-500 focus:outline-none"},a[16]||(a[16]=[l("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):v("",!0),l("button",{onClick:K,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200"}," Clear all ")])):v("",!0)]),f(ne,{class:"border-0 shadow-none"},{default:c(()=>[f(oe,{data:y.employees.data,columns:$,loading:g.value,"row-actions":B,"search-config":U,"empty-state":I,"show-footer":!0,"server-side-pagination":!0,"current-page":y.employees.current_page,"total-pages":y.employees.last_page,"total-items":y.employees.total,"page-size":y.employees.per_page,"page-size-options":[10,25,50,100],onRowAction:J,onSearch:Y,onPageChange:Z,onPageSizeChange:ee,class:"w-full"},{"cell-name":c(({row:r})=>[l("div",Ce,[l("div",Ae,[l("div",De,[l("span",Le,s(q(r.user.name)),1)]),a[18]||(a[18]=l("div",{class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full"},null,-1))]),l("div",Se,[l("div",Ve,s(r.user.name),1),l("div",Pe,[l("span",Fe,s(r.employee_code||"No code"),1),r.user.email_verified_at?(o(),u("span",Te,[f(ie,{name:"check-badge",class:"w-3 h-3"})])):v("",!0)])])])]),"cell-email":c(({row:r})=>[l("div",Ee,[r.user.email?(o(),u("div",ze,s(r.user.email),1)):(o(),u("div",Me," No email provided "))])]),"cell-department":c(({row:r})=>[l("div",$e,[r.department?(o(),u("span",Be,s(r.department.name),1)):(o(),u("span",Ue," Unassigned "))])]),"cell-contract_type":c(({row:r})=>[l("div",Ie,[l("div",{class:le([N(r.contract_type),"w-2 h-2 rounded-full flex-shrink-0"])},null,2),l("span",qe,s(r.contract_type),1)])]),"cell-join_date":c(({row:r})=>[l("div",Ne,[l("div",Oe,s(V(r.join_date)),1),l("div",We,s(O(r.join_date)),1)])]),_:1},8,["data","loading","current-page","total-pages","total-items","page-size"])]),_:1})])]),_:1})]),_:1}))}};export{vt as default};
