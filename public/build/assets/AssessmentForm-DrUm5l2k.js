import{c as o,o as a,a as e,e as k,f as w,i as g,n as T,l as se,t as u,F as N,r as H,g as ae,u as p,k as f,y as ye,z as be,s as de,d as ve,q as $e,h as L,x as Me,B as Te,K as Be,S as De,Q as Re}from"./app-IcL3AcBw.js";import{_ as Ve}from"./AuthenticatedLayout-yP2GqEla.js";import{F as me}from"./FormField-CdOH-5WG.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as xe,p as ce,v as Le,h as pe,b as Ie,r as Ue,z as Ee,w as _e,t as je,m as ze,e as ue,n as Ce,k as Pe,A as Oe,q as qe,i as fe}from"./Icon-Dp6S4qi3.js";import{_ as Ne}from"./Modal-Bdq9sbps.js";import{r as He}from"./ArrowDownTrayIcon-CMEQESxy.js";import{r as ke}from"./DocumentIcon-B11BljI1.js";import{R as Se}from"./RatingDisplay-gThmEWqf.js";import{B as We}from"./BaseTextarea-DVat8CHS.js";import{P as Ae}from"./PrimaryButton-DiTDKcfr.js";import{_ as ge}from"./SecondaryButton-Cyd88qnN.js";import{r as Fe}from"./ChartBarIcon-42Gaz5qH.js";import{_ as Ke}from"./ConfirmationModal-p7YxiMrY.js";import{Y as Ge,h as we,G as Ze,V as Ye,S as Je}from"./transition-n0xfBIsG.js";import{r as Qe}from"./ArrowPathIcon-ygBH2PYZ.js";import"./useAuth-2OZ_hAux.js";import"./ApplicationLogo-DoNIRFqr.js";import"./useAccessibility-utzIDGco.js";function Xe(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linejoin":"round",d:"M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z"})])}function et(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function tt(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function st(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.248 20.246H9.05m0 0h3.696m-3.696 0 5.893-16.502m0 0h-3.697m3.697 0h3.803"})])}function at(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.242 5.992h12m-12 6.003H20.24m-12 5.999h12M4.117 7.495v-3.75H2.99m1.125 3.75H2.99m1.125 0H5.24m-1.92 2.577a1.125 1.125 0 1 1 1.591 1.59l-1.83 1.83h2.16M2.99 15.745h1.125a1.125 1.125 0 0 1 0 2.25H3.74m0-.002h.375a1.125 1.125 0 0 1 0 2.25H2.99"})])}function nt(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function ot(s,F){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.995 3.744v7.5a6 6 0 1 1-12 0v-7.5m-2.25 16.502h16.5"})])}const rt=["for"],lt={key:0,class:"text-error-500 ml-1"},it={key:1,class:"rating-guidelines mb-4"},ct={class:"bg-neutral-50 rounded-lg p-4 border border-neutral-200"},dt={class:"space-y-2"},ut={class:"flex-shrink-0"},mt={class:"flex-1"},vt={class:"text-sm font-medium text-neutral-900"},pt={key:0,class:"text-xs text-neutral-600 mt-1"},ht={class:"rating-options"},ft=["id","name","value","checked","disabled","required","aria-describedby","aria-invalid","onChange"],gt=["for","title","onMouseenter"],yt={class:"rating-text"},bt={key:0,class:"rating-value"},xt={key:0,class:"selected-rating-display mt-4"},_t={class:"flex items-center justify-center space-x-2 p-3 bg-primary-50 rounded-lg border border-primary-200"},wt={class:"text-sm font-medium text-primary-900"},$t={key:2,class:"comments-notice mt-3"},Ct={class:"flex items-start space-x-2 p-3 bg-amber-50 rounded-lg border border-amber-200"},kt={class:"flex-1"},St={class:"text-xs text-amber-700 mt-1"},At={key:3,class:"mt-2"},Ft=["id"],Mt={key:4,class:"mt-2"},Tt=["id"],Bt={__name:"RatingInput",props:{modelValue:{type:[Number,String],default:null},label:{type:String,default:""},guidelines:{type:[Object,Array],default:null},showGuidelines:{type:Boolean,default:!0},displayType:{type:String,default:"stars",validator:s=>["stars","numbers","both"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},orientation:{type:String,default:"horizontal",validator:s=>["horizontal","vertical"].includes(s)},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},showValues:{type:Boolean,default:!1},showSelectedRating:{type:Boolean,default:!1},requireCommentsForExtremes:{type:Boolean,default:!0},customRatingOptions:{type:Array,default:null},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","change","focus","blur","hover"],setup(s,{expose:F,emit:V}){const t=s,S=V,h=k([]),y=k(null),M=k(!1),A=w(()=>`rating-input-${Math.random().toString(36).substr(2,9)}`),c=[{value:1,label:"Poor",description:"Performance significantly below expectations"},{value:2,label:"Needs Improvement",description:"Performance below expectations, requires development"},{value:3,label:"Meets Expectations",description:"Performance meets job requirements and standards"},{value:4,label:"Exceeds Expectations",description:"Performance consistently above expectations"},{value:5,label:"Outstanding",description:"Exceptional performance, significantly exceeds expectations"}],B=w(()=>t.customRatingOptions||c),K=w(()=>t.guidelines?Array.isArray(t.guidelines)?t.guidelines:Object.entries(t.guidelines).map(([v,_])=>({rating:parseInt(v),label:_.label||_,description:_.description||null})).sort((v,_)=>v.rating-_.rating):[]),I=w(()=>{if(!t.requireCommentsForExtremes||!t.modelValue)return!1;const v=parseInt(t.modelValue);return v<=2||v>=4}),R=w(()=>!!t.errorMessage),Y=w(()=>{const v=[];return R.value&&v.push(`${A.value}-error`),t.helpText&&!R.value&&v.push(`${A.value}-help`),v.length>0?v.join(" "):null}),U=w(()=>["rating-input-wrapper",`rating-input--${t.size}`,`rating-input--${t.orientation}`,{"rating-input--disabled":t.disabled,"rating-input--error":R.value,"rating-input--focused":M.value},t.class]),W=w(()=>["block text-sm font-medium mb-2",{"text-neutral-700":!R.value&&!t.disabled,"text-error-500":R.value,"text-neutral-500":t.disabled}]),ne=w(()=>["rating-scale",{"rating-scale--horizontal":t.orientation==="horizontal","rating-scale--vertical":t.orientation==="vertical"}]),oe=v=>["rating-option",{"rating-option--selected":t.modelValue===v,"rating-option--hovered":y.value===v,"rating-option--disabled":t.disabled}],re=v=>{const _=["rating-button","flex items-center justify-center rounded-full transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"],d={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},m=()=>{if(t.disabled)return["bg-neutral-100 cursor-not-allowed"];const i=t.modelValue===v,$=y.value===v;return i?["bg-primary-100 border-2 border-primary-500 text-primary-700"]:$?["bg-primary-50 border-2 border-primary-300 text-primary-600"]:["bg-white border-2 border-neutral-300 text-neutral-600 hover:border-neutral-400 hover:bg-neutral-50"]};return[..._,d[t.size],...m()]},le=v=>{const _={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d=t.modelValue===v,m=y.value===v;return[_[t.size],"transition-colors duration-200",{"text-primary-600":d||m,"text-neutral-400":!d&&!m&&!t.disabled,"text-neutral-300":t.disabled}]},E=v=>["font-semibold transition-colors duration-200",{"text-primary-700":t.modelValue===v,"text-primary-600":y.value===v,"text-neutral-600":t.modelValue!==v&&y.value!==v&&!t.disabled,"text-neutral-400":t.disabled}],J=v=>["rating-label","text-center mt-2",{"text-primary-700 font-medium":t.modelValue===v,"text-neutral-600":t.modelValue!==v&&!t.disabled,"text-neutral-400":t.disabled}],G=v=>`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-semibold ${{1:"bg-red-100 text-red-800",2:"bg-orange-100 text-orange-800",3:"bg-yellow-100 text-yellow-800",4:"bg-green-100 text-green-800",5:"bg-emerald-100 text-emerald-800"}[v]||"bg-neutral-100 text-neutral-800"}`,Q=()=>{const v=B.value.find(_=>_.value===t.modelValue);return v?`${v.value} - ${v.label}`:""},j=()=>{const v=parseInt(t.modelValue);return v<=2?"Please provide detailed comments explaining areas for improvement and specific examples.":v>=4?"Please provide detailed comments highlighting exceptional performance and specific achievements.":"Please provide detailed comments to support this rating."},z=v=>{if(t.disabled)return;const _=parseInt(v);S("update:modelValue",_),S("change",_)},X=v=>{t.disabled||(y.value=v,S("hover",v))},P=()=>{y.value=null,S("hover",null)},ee=()=>{M.value=!0,S("focus")},te=()=>{M.value=!1,S("blur")};return F({focus:()=>{var _;const v=(_=h.value)==null?void 0:_[0];v&&v.focus()},blur:()=>{var _;const v=(_=h.value)==null?void 0:_.find(d=>d===document.activeElement);v&&v.blur()},requiresComments:I}),(v,_)=>(a(),o("div",{class:T(["rating-input-wrapper",U.value])},[s.label?(a(),o("label",{key:0,for:A.value,class:T(W.value)},[se(u(s.label)+" ",1),s.required?(a(),o("span",lt,"*")):g("",!0)],10,rt)):g("",!0),s.guidelines&&s.showGuidelines?(a(),o("div",it,[e("div",ct,[_[0]||(_[0]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Rating Guidelines",-1)),e("div",dt,[(a(!0),o(N,null,H(K.value,(d,m)=>(a(),o("div",{key:m,class:"flex items-start space-x-3"},[e("div",ut,[e("span",{class:T([G(d.rating),"rating-badge"])},u(d.rating),3)]),e("div",mt,[e("div",vt,u(d.label),1),d.description?(a(),o("div",pt,u(d.description),1)):g("",!0)])]))),128))])])])):g("",!0),e("div",{class:T(["rating-scale",ne.value])},[e("div",ht,[(a(!0),o(N,null,H(B.value,d=>(a(),o("div",{key:d.value,class:T(["rating-option",oe(d.value)])},[e("input",{id:`${A.value}-${d.value}`,ref_for:!0,ref_key:"inputRefs",ref:h,type:"radio",name:A.value,value:d.value,checked:s.modelValue===d.value,disabled:s.disabled,required:s.required,"aria-describedby":Y.value,"aria-invalid":R.value,class:"sr-only",onChange:m=>z(d.value),onFocus:ee,onBlur:te},null,40,ft),e("label",{for:`${A.value}-${d.value}`,class:T(["rating-button",re(d.value)]),title:d.label,onMouseenter:m=>X(d.value),onMouseleave:P},[s.displayType==="stars"?(a(),ae(p(xe),{key:0,class:T([le(d.value),"rating-icon"])},null,8,["class"])):(a(),o("span",{key:1,class:T(["rating-number",E(d.value)])},u(d.value),3))],42,gt),e("div",{class:T(["rating-label",J(d.value)])},[e("span",yt,u(d.label),1),s.showValues?(a(),o("span",bt,"("+u(d.value)+")",1)):g("",!0)],2)],2))),128))]),s.modelValue&&s.showSelectedRating?(a(),o("div",xt,[e("div",_t,[f(p(xe),{class:"w-5 h-5 text-primary-600"}),e("span",wt," Selected: "+u(Q()),1)])])):g("",!0)],2),I.value&&s.modelValue?(a(),o("div",$t,[e("div",Ct,[f(p(ce),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e("div",kt,[_[1]||(_[1]=e("p",{class:"text-sm font-medium text-amber-900"},"Comments Required",-1)),e("p",St,u(j()),1)])])])):g("",!0),s.errorMessage?(a(),o("div",At,[e("p",{id:`${A.value}-error`,class:"text-sm text-error-500",role:"alert","aria-live":"polite"},u(s.errorMessage),9,Ft)])):g("",!0),s.helpText&&!s.errorMessage?(a(),o("div",Mt,[e("p",{id:`${A.value}-help`,class:"text-sm text-neutral-500"},u(s.helpText),9,Tt)])):g("",!0)],2))}},Dt=he(Bt,[["__scopeId","data-v-7eb4cdf7"]]),Rt={key:0,class:"editor-toolbar"},Vt={class:"toolbar-group"},Lt=["onClick","title"],It={class:"toolbar-group"},Ut=["onClick","title"],Et={class:"toolbar-group"},jt=["contenteditable","aria-label","aria-describedby","aria-invalid"],zt={key:1,class:"editor-footer"},Pt={class:"footer-left"},Ot={key:0,class:"text-sm text-error-500",role:"alert"},qt={key:1,class:"text-sm text-neutral-500"},Nt={__name:"RichTextEditor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:"Enter text..."},minLength:{type:Number,default:0},maxLength:{type:Number,default:null},showCharacterCount:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},allowedFormats:{type:Array,default:()=>["bold","italic","underline","bulletList","orderedList"]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","focus","blur","change"],setup(s,{expose:F,emit:V}){const t=s,S=V,h=k(null),y=k(!1),M=w(()=>`rich-editor-${Math.random().toString(36).substr(2,9)}`),A=w(()=>[{command:"bold",icon:Xe,title:"Bold",value:null},{command:"italic",icon:st,title:"Italic",value:null},{command:"underline",icon:ot,title:"Underline",value:null}].filter(i=>t.allowedFormats.includes(i.command))),c=w(()=>[{command:"insertUnorderedList",icon:Le,title:"Bullet List"},{command:"insertOrderedList",icon:at,title:"Numbered List"}].filter(i=>i.command==="insertUnorderedList"&&t.allowedFormats.includes("bulletList")||i.command==="insertOrderedList"&&t.allowedFormats.includes("orderedList"))),B=w(()=>h.value&&h.value.textContent||""),K=w(()=>B.value.length),I=w(()=>t.maxLength?K.value>t.maxLength*.8:!1),R=w(()=>t.maxLength?K.value>t.maxLength:!1),Y=w(()=>!y.value&&(!t.modelValue||t.modelValue.trim()==="")),U=w(()=>!!t.errorMessage),W=w(()=>{const i=[];return U.value&&i.push(`${M.value}-error`),t.helpText&&!U.value&&i.push(`${M.value}-help`),i.length>0?i.join(" "):null}),ne=w(()=>["rich-text-editor-wrapper",`rich-text-editor--${t.size}`,{"rich-text-editor--disabled":t.disabled,"rich-text-editor--readonly":t.readonly,"rich-text-editor--error":U.value,"rich-text-editor--focused":y.value},t.class]),oe=w(()=>["editor-container",{"editor-container--focused":y.value,"editor-container--error":U.value}]),re=w(()=>{const i=["editor-content","block w-full min-h-[120px] p-3 text-sm leading-6","focus:outline-none"],$={sm:"min-h-[80px] p-2 text-xs",md:"min-h-[120px] p-3 text-sm",lg:"min-h-[160px] p-4 text-base"};return[...i,$[t.size]]}),le=w(()=>["text-xs font-medium flex-shrink-0",{"text-neutral-500":!I.value&&!R.value,"text-warning-600":I.value&&!R.value,"text-error-600":R.value}]),E=(i,$=null)=>{var b;t.disabled||t.readonly||(document.execCommand(i,!1,$),(b=h.value)==null||b.focus(),P())},J=()=>{var i;t.disabled||t.readonly||(document.execCommand("removeFormat",!1,null),(i=h.value)==null||i.focus(),P())},G=i=>{const $=["toolbar-button","flex items-center justify-center w-8 h-8 rounded transition-colors","hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-primary-500"],b=document.queryCommandState&&document.queryCommandState(i);return[...$,{"bg-primary-100 text-primary-700":b,"text-neutral-600":!b}]},Q=()=>{var i;(i=h.value)==null||i.focus()},j=()=>{var i;return((i=h.value)==null?void 0:i.innerHTML)||""},z=i=>{h.value&&(h.value.innerHTML=i)},X=()=>{var i;return((i=h.value)==null?void 0:i.textContent)||""},P=()=>{const i=j(),$=X();t.maxLength&&$.length>t.maxLength||(S("update:modelValue",i),S("change",{html:i,text:$}))},ee=()=>{y.value=!0,S("focus")},te=()=>{y.value=!1,S("blur")},Z=i=>{if(i.ctrlKey||i.metaKey)switch(i.key){case"b":i.preventDefault(),E("bold");break;case"i":i.preventDefault(),E("italic");break;case"u":i.preventDefault(),E("underline");break}t.maxLength&&B.value.length>=t.maxLength&&!["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(i.key)&&!i.ctrlKey&&!i.metaKey&&i.preventDefault()},O=i=>{if(t.disabled||t.readonly){i.preventDefault();return}const $=(i.clipboardData||window.clipboardData).getData("text/plain");if(t.maxLength){const b=B.value.length,ie=$.length;if(b+ie>t.maxLength){i.preventDefault();const l=t.maxLength-b;if(l>0){const r=$.substring(0,l);document.execCommand("insertText",!1,r)}return}}i.preventDefault(),document.execCommand("insertText",!1,$)};return F({focus:()=>{Q()},blur:()=>{var i;(i=h.value)==null||i.blur()},insertText:i=>{t.disabled||t.readonly||(document.execCommand("insertText",!1,i),P())},selectAll:()=>{if(h.value){const i=document.createRange();i.selectNodeContents(h.value);const $=window.getSelection();$.removeAllRanges(),$.addRange(i)}},getHtmlContent:j,setHtmlContent:z,getTextContent:X,editorRef:h}),ye(()=>t.modelValue,i=>{h.value&&j()!==i&&z(i||"")}),be(()=>{t.modelValue&&z(t.modelValue)}),(i,$)=>(a(),o("div",{class:T(["rich-text-editor-wrapper",ne.value])},[s.showToolbar?(a(),o("div",Rt,[e("div",Vt,[(a(!0),o(N,null,H(A.value,b=>(a(),o("button",{key:b.command,onClick:ie=>E(b.command,b.value),class:T(G(b.command)),title:b.title,type:"button",tabindex:"-1"},[(a(),ae(de(b.icon),{class:"w-4 h-4"}))],10,Lt))),128))]),$[0]||($[0]=e("div",{class:"toolbar-divider"},null,-1)),e("div",It,[(a(!0),o(N,null,H(c.value,b=>(a(),o("button",{key:b.command,onClick:ie=>E(b.command),class:T(G(b.command)),title:b.title,type:"button",tabindex:"-1"},[(a(),ae(de(b.icon),{class:"w-4 h-4"}))],10,Ut))),128))]),$[1]||($[1]=e("div",{class:"toolbar-divider"},null,-1)),e("div",Et,[e("button",{onClick:J,class:"toolbar-button",title:"Clear Formatting",type:"button",tabindex:"-1"},[f(p(pe),{class:"w-4 h-4"})])])])):g("",!0),e("div",{class:T(["editor-container",oe.value])},[e("div",{ref_key:"editorRef",ref:h,contenteditable:!s.disabled&&!s.readonly,class:T(re.value),onInput:P,onFocus:ee,onBlur:te,onKeydown:Z,onPaste:O,"aria-label":s.label||"Rich text editor","aria-describedby":W.value,"aria-invalid":U.value,role:"textbox","aria-multiline":"true"},null,42,jt),Y.value?(a(),o("div",{key:0,class:"editor-placeholder",onClick:Q},u(s.placeholder),1)):g("",!0)],2),s.showCharacterCount||s.helpText||s.errorMessage?(a(),o("div",zt,[e("div",Pt,[s.errorMessage?(a(),o("p",Ot,u(s.errorMessage),1)):s.helpText?(a(),o("p",qt,u(s.helpText),1)):g("",!0)]),s.showCharacterCount?(a(),o("div",{key:0,class:T(le.value)},u(K.value)+u(s.maxLength?`/${s.maxLength}`:""),3)):g("",!0)])):g("",!0)],2))}},Ht=he(Nt,[["__scopeId","data-v-339be779"]]),Wt=["multiple","accept","disabled"],Kt={class:"upload-content"},Gt={class:"upload-icon"},Zt={class:"upload-text"},Yt={class:"upload-primary-text"},Jt={key:0},Qt={class:"upload-secondary-text"},Xt={key:0,class:"file-list"},es={class:"file-list-header"},ts={class:"file-list-title"},ss={class:"file-items"},as={class:"file-icon"},ns={class:"file-info"},os=["title"],rs={class:"file-meta"},ls={class:"file-size"},is={class:"file-actions"},cs=["onClick"],ds=["onClick"],us=["onClick"],ms={key:0,class:"file-progress"},vs={class:"progress-bar"},ps={class:"progress-text"},hs={key:1,class:"upload-errors"},fs={class:"error-header"},gs={class:"error-list"},ys={key:2,class:"upload-footer"},bs={key:0,class:"text-sm text-error-500",role:"alert"},xs={key:1,class:"text-sm text-neutral-500"},_s={class:"preview-modal"},ws={class:"preview-header"},$s={class:"preview-title"},Cs={class:"preview-content"},ks=["src","alt"],Ss={__name:"FileUpload",props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},maxFiles:{type:Number,default:null},maxFileSize:{type:Number,default:10},acceptedTypes:{type:Array,default:()=>["image/*","application/pdf",".doc",".docx",".txt"]},autoUpload:{type:Boolean,default:!1},uploadUrl:{type:String,default:""},disabled:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","files-added","file-removed","upload-progress","upload-complete","upload-error"],setup(s,{expose:F,emit:V}){const t=s,S=V,h=k([...t.modelValue]),y=k(!1),M=k([]),A=k(null),c=k(!1),B=k(null),K=k(null),I=w(()=>t.acceptedTypes.join(",")),R=w(()=>t.maxFiles?h.value.length<t.maxFiles:!0),Y=w(()=>["file-upload-wrapper",{"file-upload--disabled":t.disabled,"file-upload--error":t.errorMessage},t.class]),U=w(()=>["upload-area","border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",{"border-neutral-300 hover:border-neutral-400":!y.value&&!t.disabled&&!t.errorMessage,"border-primary-400 bg-primary-50":y.value&&!t.disabled,"border-error-300 bg-error-50":t.errorMessage,"border-neutral-200 bg-neutral-50 cursor-not-allowed":t.disabled,"opacity-50":!R.value}]),W=()=>{const l=[];if(t.acceptedTypes.length>0){const r=t.acceptedTypes.map(n=>n==="image/*"?"Images":n==="application/pdf"?"PDF":n.startsWith(".")?n.toUpperCase().slice(1):n).join(", ");l.push(r)}return t.maxFileSize&&l.push(`up to ${t.maxFileSize}MB each`),t.maxFiles&&l.push(`maximum ${t.maxFiles} files`),l.join(" • ")},ne=l=>{if(l===0)return"0 Bytes";const r=1024,n=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(l)/Math.log(r));return parseFloat((l/Math.pow(r,x)).toFixed(2))+" "+n[x]},oe=l=>{const r=l.type||"";return r.startsWith("image/")?Ee:r.startsWith("video/")?tt:r==="application/pdf"?_e:r.includes("text/")?_e:ke},re=l=>["file-item",{"file-item--uploading":l.status==="uploading","file-item--error":l.status==="error","file-item--success":l.status==="success"}],le=l=>["file-status",{"text-blue-600":l==="uploading","text-error-600":l==="error","text-success-600":l==="success"}],E=l=>({uploading:"Uploading...",error:"Failed",success:"Uploaded"})[l]||"",J=l=>{var r;return(r=l.type)==null?void 0:r.startsWith("image/")},G=l=>J(l),Q=l=>l.url?l.url:l instanceof File?URL.createObjectURL(l):"",j=l=>{const r=[];return t.maxFileSize&&l.size>t.maxFileSize*1024*1024&&r.push(`${l.name} is too large (max ${t.maxFileSize}MB)`),t.acceptedTypes.length>0&&(t.acceptedTypes.some(x=>x==="image/*"?l.type.startsWith("image/"):x==="video/*"?l.type.startsWith("video/"):x==="audio/*"?l.type.startsWith("audio/"):x.startsWith(".")?l.name.toLowerCase().endsWith(x.toLowerCase()):l.type===x)||r.push(`${l.name} is not an accepted file type`)),r},z=()=>{var l;t.disabled||!R.value||(l=B.value)==null||l.click()},X=l=>{const r=Array.from(l.target.files||[]);Z(r),B.value&&(B.value.value="")},P=l=>{t.disabled||!R.value||(y.value=!0)},ee=l=>{y.value=!1},te=l=>{if(y.value=!1,t.disabled||!R.value)return;const r=Array.from(l.dataTransfer.files||[]);Z(r)},Z=l=>{M.value=[];const r=t.maxFiles?t.maxFiles-h.value.length:l.length,n=l.slice(0,r);l.length>n.length&&M.value.push(`Only ${r} more files can be added`);const x=[];n.forEach(D=>{const C=j(D);if(C.length>0)M.value.push(...C);else{const q={...D,id:Date.now()+Math.random(),status:t.autoUpload?"uploading":null,progress:0};x.push(q)}}),x.length>0&&(h.value.push(...x),i(),S("files-added",x),t.autoUpload&&t.uploadUrl&&x.forEach(D=>m(D)))},O=l=>{const r=h.value[l];h.value.splice(l,1),i(),S("file-removed",r),r.url&&r.url.startsWith("blob:")&&URL.revokeObjectURL(r.url)},v=()=>{h.value.forEach(l=>{l.url&&l.url.startsWith("blob:")&&URL.revokeObjectURL(l.url)}),h.value=[],M.value=[],i()},_=()=>{c.value=!1,A.value=null},d=l=>{if(!l.url)return;const r=document.createElement("a");r.href=l.url,r.download=l.name,document.body.appendChild(r),r.click(),document.body.removeChild(r)},m=async l=>{var n;if(!t.uploadUrl)return;const r=new FormData;r.append("file",l);try{const x=await fetch(t.uploadUrl,{method:"POST",body:r,headers:{"X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}});if(x.ok){const D=await x.json(),C=h.value.findIndex(q=>q.id===l.id);C!==-1&&(h.value[C]={...h.value[C],status:"success",progress:100,url:D.url,id:D.id},i(),S("upload-complete",h.value[C]))}else throw new Error("Upload failed")}catch(x){const D=h.value.findIndex(C=>C.id===l.id);D!==-1&&(h.value[D].status="error",i()),S("upload-error",{file:l,error:x}),M.value.push(`Failed to upload ${l.name}`)}},i=()=>{S("update:modelValue",[...h.value])};return F({addFile:l=>{Z([l])},removeFileById:l=>{const r=h.value.findIndex(n=>n.id===l);r!==-1&&O(r)},clearFiles:()=>{v()},triggerFileInput:z}),ye(()=>t.modelValue,l=>{JSON.stringify(l)!==JSON.stringify(h.value)&&(h.value=[...l])},{deep:!0}),(l,r)=>(a(),o("div",{class:T(["file-upload-wrapper",Y.value])},[e("div",{ref_key:"dropZoneRef",ref:K,class:T(U.value),onClick:z,onDragover:ve(P,["prevent"]),onDragleave:ve(ee,["prevent"]),onDrop:ve(te,["prevent"])},[e("input",{ref_key:"fileInputRef",ref:B,type:"file",multiple:s.multiple,accept:I.value,disabled:s.disabled,class:"sr-only",onChange:X},null,40,Wt),e("div",Kt,[e("div",Gt,[f(p(et),{class:"w-8 h-8 text-neutral-400"})]),e("div",Zt,[e("p",Yt,[r[0]||(r[0]=e("span",{class:"upload-link"},"Click to upload",-1)),s.disabled?g("",!0):(a(),o("span",Jt," or drag and drop"))]),e("p",Qt,u(W()),1)])])],34),h.value.length>0?(a(),o("div",Xt,[e("div",es,[e("h4",ts,"Uploaded Files ("+u(h.value.length)+u(s.maxFiles?`/${s.maxFiles}`:"")+")",1),h.value.length>0&&!s.disabled?(a(),o("button",{key:0,onClick:v,class:"clear-all-button",type:"button"},[f(p(pe),{class:"w-4 h-4"}),r[1]||(r[1]=se(" Clear All "))])):g("",!0)]),e("div",ss,[(a(!0),o(N,null,H(h.value,(n,x)=>(a(),o("div",{key:n.id||x,class:T(["file-item",re(n)])},[e("div",as,[(a(),ae(de(oe(n)),{class:"w-5 h-5"}))]),e("div",ns,[e("div",{class:"file-name",title:n.name},u(n.name),9,os),e("div",rs,[e("span",ls,u(ne(n.size)),1),n.status?(a(),o("span",{key:0,class:T(["file-status",le(n.status)])},u(E(n.status)),3)):g("",!0)])]),e("div",is,[G(n)?(a(),o("button",{key:0,onClick:D=>A.value(n),class:"file-action-button",type:"button",title:"Preview"},[f(p(Ie),{class:"w-4 h-4"})],8,cs)):g("",!0),n.url?(a(),o("button",{key:1,onClick:D=>d(n),class:"file-action-button",type:"button",title:"Download"},[f(p(He),{class:"w-4 h-4"})],8,ds)):g("",!0),s.disabled?g("",!0):(a(),o("button",{key:2,onClick:D=>O(x),class:"file-action-button file-action-button--danger",type:"button",title:"Remove"},[f(p(Ue),{class:"w-4 h-4"})],8,us))]),n.status==="uploading"?(a(),o("div",ms,[e("div",vs,[e("div",{class:"progress-fill",style:$e({width:`${n.progress||0}%`})},null,4)]),e("span",ps,u(n.progress||0)+"%",1)])):g("",!0)],2))),128))])])):g("",!0),M.value.length>0?(a(),o("div",hs,[e("div",fs,[f(p(ce),{class:"w-4 h-4 text-error-500"}),r[2]||(r[2]=e("span",{class:"error-title"},"Upload Errors",-1))]),e("ul",gs,[(a(!0),o(N,null,H(M.value,(n,x)=>(a(),o("li",{key:x,class:"error-item"},u(n),1))),128))])])):g("",!0),s.helpText||s.errorMessage?(a(),o("div",ys,[s.errorMessage?(a(),o("p",bs,u(s.errorMessage),1)):s.helpText?(a(),o("p",xs,u(s.helpText),1)):g("",!0)])):g("",!0),A.value?(a(),ae(Ne,{key:3,show:c.value,onClose:_},{default:L(()=>{var n;return[e("div",_s,[e("div",ws,[e("h3",$s,u((n=A.value)==null?void 0:n.name),1),e("button",{onClick:_,class:"preview-close"},[f(p(pe),{class:"w-5 h-5"})])]),e("div",Cs,[A.value&&J(A.value)?(a(),o("img",{key:0,src:Q(A.value),alt:A.value.name,class:"preview-image"},null,8,ks)):g("",!0)])])]}),_:1},8,["show"])):g("",!0)],2))}},As=he(Ss,[["__scopeId","data-v-539f458a"]]),Fs={class:"assessment-form-wrapper"},Ms={class:"assessment-header"},Ts={class:"employee-context"},Bs={class:"employee-info"},Ds={class:"employee-avatar"},Rs={class:"avatar-placeholder"},Vs={class:"employee-details"},Ls={class:"employee-name"},Is={class:"employee-role"},Us={key:0,class:"employee-department"},Es={key:0,class:"previous-assessments"},js={key:0,class:"history-content"},zs={class:"history-timeline"},Ps={class:"history-date"},Os={class:"history-rating"},qs={class:"history-assessor"},Ns={class:"competency-context"},Hs={class:"competency-header"},Ws={class:"competency-info"},Ks={class:"competency-name"},Gs={class:"competency-meta"},Zs={class:"competency-category"},Ys={key:0,class:"competency-weight"},Js={class:"competency-description"},Qs={key:0,class:"measurement-indicators"},Xs={class:"indicators-list"},ea={class:"form-actions"},ta={class:"action-buttons"},sa={key:0,class:"flex items-center"},aa={key:1,class:"flex items-center"},na={key:0,class:"progress-indicator"},oa={class:"progress-bar"},ra={class:"progress-text"},la={class:"flex items-center space-x-2"},ia={class:"text-sm"},ca={__name:"AssessmentForm",props:{employee:{type:Object,required:!0},competency:{type:Object,required:!0},assessmentType:{type:String,default:"manager",validator:s=>["self","manager","peer","360"].includes(s)},assessmentCycle:{type:Object,default:null},existingAssessment:{type:Object,default:null},previousAssessments:{type:Array,default:()=>[]},showProgress:{type:Boolean,default:!0},autoSave:{type:Boolean,default:!0},autoSaveInterval:{type:Number,default:3e4}},emits:["submit","cancel","draft-saved","rating-changed","validation-error"],setup(s,{expose:F,emit:V}){var P,ee,te,Z,O,v,_;const t=s,S=V,h=k(!1),y=k(""),M=k(null),A=k(null),c=Me({employee_id:(P=t.employee)==null?void 0:P.id,competency_id:(ee=t.competency)==null?void 0:ee.id,assessment_cycle_id:((te=t.assessmentCycle)==null?void 0:te.id)||null,rating:((Z=t.existingAssessment)==null?void 0:Z.rating)||null,comments:((O=t.existingAssessment)==null?void 0:O.comments)||"",evidence_files:((v=t.existingAssessment)==null?void 0:v.evidence_files)||[],development_notes:((_=t.existingAssessment)==null?void 0:_.development_notes)||"",assessment_type:t.assessmentType,status:"draft"}),B=w(()=>{if(!c.rating)return!1;const d=parseInt(c.rating);return d<=2||d>=4}),K=w(()=>c.rating&&(!B.value||c.comments&&c.comments.length>=50)&&!c.processing),I=w(()=>{let d=0,m=2;return c.rating&&d++,c.comments&&(!B.value||c.comments.length>=50)&&d++,Math.round(d/m*100)}),R=d=>d.split(" ").map(m=>m.charAt(0)).join("").toUpperCase().slice(0,2),Y=()=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360° Feedback"})[t.assessmentType]||"Assessment",U=()=>{const d="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m={self:"bg-blue-100 text-blue-800",manager:"bg-green-100 text-green-800",peer:"bg-purple-100 text-purple-800",360:"bg-orange-100 text-orange-800"};return`${d} ${m[t.assessmentType]||m.manager}`},W=()=>{if(!c.rating)return"Comments will be required based on your rating selection";const d=parseInt(c.rating);return d<=2?"Detailed comments are required for ratings of 2 or below. Please explain areas for improvement and provide specific examples.":d>=4?"Detailed comments are required for ratings of 4 or above. Please highlight exceptional performance and specific achievements.":"Comments are optional for this rating, but encouraged to provide context."},ne=()=>{if(!c.rating)return"Provide detailed feedback about the employee's performance in this competency...";const d=parseInt(c.rating);return d<=2?"Describe specific areas where improvement is needed, provide examples of performance gaps, and suggest actionable steps for development...":d>=4?"Highlight specific examples of exceptional performance, describe how the employee exceeded expectations, and note any leadership or innovation demonstrated...":"Provide context for your rating, specific examples of performance, and any observations that support your assessment..."},oe=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),re=()=>{const d="fixed bottom-4 right-4 bg-white border rounded-lg px-3 py-2 shadow-lg z-50";return y.value.includes("Error")?`${d} border-error-200 text-error-700`:y.value.includes("Saved")?`${d} border-success-200 text-success-700`:`${d} border-neutral-200 text-neutral-600`},le=()=>y.value.includes("Error")?ce:y.value.includes("Saved")?ue:Ce,E=d=>{S("rating-changed",d),!B.value&&c.comments.length<50,t.autoSave&&z()},J=()=>{if(!c.rating){S("validation-error",{field:"rating",message:"Rating is required"});return}if(B.value&&(!c.comments||c.comments.length<50)){S("validation-error",{field:"comments",message:"Detailed comments are required for this rating"});return}c.status="submitted";const d={...c.data(),evidence_files:c.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};c.post(route("competency-assessments.store"),{data:d,onSuccess:()=>{S("submit",d)},onError:m=>{S("validation-error",m)}})},G=()=>{c.status="draft";const d={...c.data(),evidence_files:c.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};c.post(route("competency-assessments.store"),{data:d,onSuccess:()=>{S("draft-saved",c.data()),y.value="Draft saved",setTimeout(()=>{y.value=""},3e3)},onError:()=>{y.value="Error saving draft",setTimeout(()=>{y.value=""},5e3)}})},Q=()=>{j()?confirm("You have unsaved changes. Are you sure you want to cancel?")&&S("cancel"):S("cancel")},j=()=>A.value?JSON.stringify(c.data())!==JSON.stringify(A.value):!0,z=()=>{M.value&&clearTimeout(M.value),M.value=setTimeout(()=>{j()&&(c.rating||c.comments)&&X()},t.autoSaveInterval)},X=()=>{if(c.processing)return;y.value="Saving...",c.status="draft";const d={...c.data(),evidence_files:c.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};c.post(route("competency-assessments.store"),{data:d,preserveScroll:!0,onSuccess:()=>{A.value={...d},y.value="Auto-saved",setTimeout(()=>{y.value=""},3e3)},onError:()=>{y.value="Auto-save failed",setTimeout(()=>{y.value=""},5e3)}})};return ye([()=>c.rating,()=>c.comments,()=>c.development_notes],()=>{t.autoSave&&z()},{deep:!0}),be(()=>{A.value={...c.data()}}),Te(()=>{M.value&&clearTimeout(M.value)}),F({saveDraft:G,hasUnsavedChanges:j,form:c}),(d,m)=>{var i,$;return a(),o("div",Fs,[e("div",Ms,[e("div",Ts,[e("div",Bs,[e("div",Ds,[e("div",Rs,u(R(s.employee.name)),1)]),e("div",Vs,[e("h3",Ls,u(s.employee.name),1),e("p",Is,u(s.employee.position||"Employee"),1),s.employee.department?(a(),o("p",Us,u(s.employee.department.name),1)):g("",!0)])]),e("div",{class:T(["assessment-type-badge",U()])},u(Y()),3)]),(i=s.previousAssessments)!=null&&i.length?(a(),o("div",Es,[e("button",{onClick:m[0]||(m[0]=b=>h.value=!h.value),class:"history-toggle",type:"button"},[f(p(Fe),{class:"w-4 h-4"}),m[5]||(m[5]=e("span",null,"Assessment History",-1)),f(p(je),{class:T(["w-4 h-4 transition-transform duration-200",{"rotate-180":h.value}])},null,8,["class"])]),h.value?(a(),o("div",js,[e("div",zs,[(a(!0),o(N,null,H(s.previousAssessments.slice(0,3),b=>(a(),o("div",{key:b.id,class:"history-item"},[e("div",Ps,u(oe(b.submitted_at)),1),e("div",Os,[f(Se,{rating:b.rating,max:5,size:"sm"},null,8,["rating"])]),e("div",qs,"by "+u(b.assessor.name),1)]))),128))])])):g("",!0)])):g("",!0)]),e("div",Ns,[e("div",Hs,[e("div",Ws,[e("h2",Ks,u(s.competency.name),1),e("div",Gs,[e("span",Zs,u(s.competency.category),1),s.competency.weight?(a(),o("span",Ys," Weight: "+u(s.competency.weight),1)):g("",!0)])])]),e("div",Js,[e("p",null,u(s.competency.description),1)]),($=s.competency.measurement_indicators)!=null&&$.length?(a(),o("div",Qs,[m[6]||(m[6]=e("h4",{class:"indicators-title"},"Key Performance Indicators",-1)),e("ul",Xs,[(a(!0),o(N,null,H(s.competency.measurement_indicators,(b,ie)=>(a(),o("li",{key:ie,class:"indicator-item"},[f(p(ze),{class:"indicator-icon"}),e("span",null,u(b),1)]))),128))])])):g("",!0)]),e("form",{onSubmit:ve(J,["prevent"]),class:"assessment-form"},[f(me,{label:"Rating",required:!0,"error-message":p(c).errors.rating,"help-text":"Select a rating based on the employee's performance in this competency"},{default:L(()=>[f(Dt,{modelValue:p(c).rating,"onUpdate:modelValue":m[1]||(m[1]=b=>p(c).rating=b),guidelines:s.competency.rating_guidelines,"show-guidelines":!0,"require-comments-for-extremes":!0,"error-message":p(c).errors.rating,size:"lg",onChange:E},null,8,["modelValue","guidelines","error-message"])]),_:1},8,["error-message"]),f(me,{label:"Comments",required:B.value,"error-message":p(c).errors.comments,"help-text":W()},{default:L(()=>[f(Ht,{modelValue:p(c).comments,"onUpdate:modelValue":m[2]||(m[2]=b=>p(c).comments=b),placeholder:ne(),required:B.value,"min-length":B.value?50:0,"max-length":2e3,"show-character-count":!0,"error-message":p(c).errors.comments},null,8,["modelValue","placeholder","required","min-length","error-message"])]),_:1},8,["required","error-message","help-text"]),f(me,{label:"Supporting Evidence","error-message":p(c).errors.evidence_files,"help-text":"Upload documents, images, or other files that support your assessment (optional)"},{default:L(()=>[f(As,{modelValue:p(c).evidence_files,"onUpdate:modelValue":m[3]||(m[3]=b=>p(c).evidence_files=b),multiple:!0,"max-files":5,"max-file-size":10,"accepted-types":["image/*","application/pdf",".doc",".docx",".txt"],"error-message":p(c).errors.evidence_files},null,8,["modelValue","error-message"])]),_:1},8,["error-message"]),f(me,{label:"Development Recommendations","error-message":p(c).errors.development_notes,"help-text":"Suggest specific actions or resources for improvement (optional)"},{default:L(()=>[f(We,{modelValue:p(c).development_notes,"onUpdate:modelValue":m[4]||(m[4]=b=>p(c).development_notes=b),placeholder:"Provide specific recommendations for skill development, training opportunities, or areas of focus...",rows:4,"max-length":1e3,"show-character-count":!0,"error-message":p(c).errors.development_notes},null,8,["modelValue","error-message"])]),_:1},8,["error-message"]),e("div",ea,[e("div",ta,[f(ge,{onClick:G,disabled:p(c).processing,type:"button"},{default:L(()=>[f(p(ke),{class:"w-4 h-4 mr-2"}),m[7]||(m[7]=se(" Save Draft "))]),_:1,__:[7]},8,["disabled"]),f(ge,{onClick:Q,disabled:p(c).processing,type:"button"},{default:L(()=>m[8]||(m[8]=[se(" Cancel ")])),_:1,__:[8]},8,["disabled"]),f(Ae,{type:"submit",disabled:!K.value||p(c).processing,class:T({"opacity-50":p(c).processing})},{default:L(()=>[p(c).processing?(a(),o("span",sa,m[9]||(m[9]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),se(" Submitting... ")]))):(a(),o("span",aa,[f(p(ue),{class:"w-4 h-4 mr-2"}),m[10]||(m[10]=se(" Submit Assessment "))]))]),_:1},8,["disabled","class"])]),s.showProgress?(a(),o("div",na,[e("div",oa,[e("div",{class:"progress-fill",style:$e({width:`${I.value}%`})},null,4)]),e("span",ra,u(I.value)+"% Complete",1)])):g("",!0)])],32),y.value?(a(),o("div",{key:0,class:T(["auto-save-indicator",re()])},[e("div",la,[(a(),ae(de(le()),{class:"w-4 h-4"})),e("span",ia,u(y.value),1)])],2)):g("",!0)])}}},da={class:"fixed inset-0 z-10 overflow-y-auto"},ua={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ma={class:"sm:flex sm:items-start"},va={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},pa={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},ha={class:"mt-2"},fa={class:"text-sm text-gray-500"},ga={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},ya={__name:"SuccessModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Success"},message:{type:String,default:"Operation completed successfully."},closeText:{type:String,default:"Close"}},emits:["close"],setup(s){return(F,V)=>(a(),ae(p(Je),{as:"template",show:s.show},{default:L(()=>[f(p(Ge),{as:"div",class:"relative z-50",onClose:V[1]||(V[1]=t=>F.$emit("close"))},{default:L(()=>[f(p(we),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:L(()=>V[2]||(V[2]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[2]}),e("div",da,[e("div",ua,[f(p(we),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:L(()=>[f(p(Ze),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:L(()=>[e("div",ma,[e("div",va,[f(p(ue),{class:"h-6 w-6 text-green-600","aria-hidden":"true"})]),e("div",pa,[f(p(Ye),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:L(()=>[se(u(s.title),1)]),_:1}),e("div",ha,[e("p",fa,u(s.message),1)])])]),e("div",ga,[e("button",{type:"button",class:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto",onClick:V[0]||(V[0]=t=>F.$emit("close"))},u(s.closeText),1)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},ba={class:"assessment-page-header"},xa={class:"header-container"},_a={class:"header-content"},wa={class:"breadcrumb-section"},$a={class:"breadcrumb-nav"},Ca={class:"breadcrumb-current"},ka={class:"title-section"},Sa={class:"page-title"},Aa={class:"page-subtitle"},Fa={class:"assessment-page-container"},Ma={key:0,class:"progress-steps"},Ta={class:"steps-container"},Ba={class:"steps-list"},Da={class:"step-indicator"},Ra={class:"step-number"},Va={class:"step-content"},La={class:"step-title"},Ia={class:"step-description"},Ua={class:"form-container"},Ea={class:"form-wrapper"},ja={key:0,class:"loading-container"},za={key:1,class:"error-container"},Pa={class:"error-content"},Oa={class:"error-message"},qa={class:"error-actions"},Na={key:2,class:"assessment-form-container"},Ha={class:"form-header"},Wa={class:"context-cards"},Ka={class:"context-card employee-card"},Ga={class:"card-header"},Za={class:"card-content"},Ya={class:"employee-summary"},Ja={class:"employee-avatar"},Qa={class:"avatar-circle"},Xa={class:"employee-info"},en={class:"employee-name"},tn={class:"employee-details"},sn={key:0,class:"employee-position"},an={key:1,class:"employee-department"},nn={class:"context-card competency-card"},on={class:"card-header"},rn={class:"card-content"},ln={class:"competency-summary"},cn={class:"competency-name"},dn={class:"competency-meta"},un={class:"competency-category"},mn={key:0,class:"competency-weight"},vn={key:0,class:"context-card cycle-card"},pn={class:"card-header"},hn={class:"card-content"},fn={class:"cycle-summary"},gn={class:"cycle-name"},yn={class:"cycle-period"},bn={class:"main-form"},xn={class:"sidebar"},_n={class:"sidebar-card guidelines-card"},wn={class:"card-header"},$n={class:"card-content"},Cn={class:"guidelines-content"},kn={class:"guideline-item"},Sn={class:"rating-scale"},An={class:"rating-number"},Fn={class:"rating-label"},Mn={key:0,class:"guideline-item"},Tn={class:"guidelines-list"},Bn={key:0,class:"sidebar-card history-card"},Dn={class:"card-header"},Rn={class:"card-content"},Vn={class:"history-summary"},Ln={class:"history-stats"},In={class:"stat-item"},Un={class:"stat-value"},En={class:"stat-item"},jn={class:"stat-value"},zn={class:"recent-assessments"},Pn={class:"recent-list"},On={class:"recent-date"},qn={class:"recent-rating"},Nn={class:"recent-assessor"},Hn={class:"sidebar-card help-card"},Wn={class:"card-header"},Kn={key:0,class:"notification-overlay"},Gn={class:"notification-center"},Zn={class:"notification-icon"},Yn={class:"notification-text"},Jn={class:"notification-message"},Qn=["onClick"],Xn={__name:"AssessmentForm",props:{employee:{type:Object,required:!0},competency:{type:Object,required:!0},assessmentType:{type:String,default:"manager"},assessmentCycle:{type:Object,default:null},existingAssessment:{type:Object,default:null},previousAssessments:{type:Array,default:()=>[]},showSteps:{type:Boolean,default:!0}},setup(s){const F=s,V=k(!1),t=k(null),S=k(null),h=k(0),y=k([]),M=k(!1),A=k(""),c=k(""),B=k("Confirm"),K=k("Cancel"),I=k(null),R=k(!1),Y=k(""),U=k(""),W=w(()=>!!F.existingAssessment),ne=w(()=>[{id:"context",title:"Review Context",description:"Review employee and competency information"},{id:"rating",title:"Provide Rating",description:"Rate the employee's performance"},{id:"feedback",title:"Add Feedback",description:"Provide detailed comments and evidence"},{id:"submit",title:"Submit Assessment",description:"Review and submit your assessment"}]),oe=w(()=>["Poor","Needs Improvement","Meets Expectations","Exceeds Expectations","Outstanding"]),re=w(()=>{var n;return(n=F.previousAssessments)!=null&&n.length?(F.previousAssessments.reduce((x,D)=>x+D.rating,0)/F.previousAssessments.length).toFixed(1):"N/A"}),le=()=>W.value?`Editing assessment for ${F.employee.name} - ${F.competency.name}`:`Assessing ${F.employee.name} on ${F.competency.name}`,E=r=>r.split(" ").map(n=>n.charAt(0)).join("").toUpperCase().slice(0,2),J=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),G=(r,n)=>{const x=new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${x} - ${D}`},Q=r=>{const n="step-item";return r<h.value?`${n} completed`:r===h.value?`${n} active`:`${n} pending`},j=r=>r<h.value?ue:"div",z=r=>{A.value="Submit Assessment",c.value="Are you sure you want to submit this assessment? Once submitted, it cannot be edited.",B.value="Submit Assessment",I.value=()=>{X()},M.value=!0},X=r=>{V.value=!0,setTimeout(()=>{V.value=!1,Y.value="Assessment Submitted",U.value="The assessment has been successfully submitted and the employee will be notified.",R.value=!0},1e3)},P=()=>{var r;(r=S.value)!=null&&r.hasUnsavedChanges()?(A.value="Cancel Assessment",c.value="You have unsaved changes. Are you sure you want to cancel?",B.value="Yes, Cancel",I.value=()=>{O()},M.value=!0):O()},ee=r=>{$("Draft saved successfully","success")},te=r=>{r&&h.value<1&&(h.value=1)},Z=r=>{typeof r=="object"&&r.field?$(`${r.field}: ${r.message}`,"error"):$("Please check the form for errors","error")},O=()=>{Re.visit(route("assessment-dashboard"))},v=()=>{t.value=null,V.value=!0,setTimeout(()=>{V.value=!1},1e3)},_=()=>{$("Support contact feature coming soon","info")},d=()=>{M.value=!1,I.value&&(I.value(),I.value=null)},m=()=>{M.value=!1,I.value=null},i=()=>{R.value=!1,O()},$=(r,n="info",x=4e3)=>{const D=Date.now(),C={id:D,message:r,type:n,visible:!0};y.value.push(C),setTimeout(()=>{b(D)},x)},b=r=>{const n=y.value.findIndex(x=>x.id===r);n>-1&&y.value.splice(n,1)},ie=r=>{const n="notification-toast",x={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${n} ${x[r]||x.info}`},l=r=>({success:ue,error:ce,warning:ce,info:fe})[r]||fe;return be(()=>{}),Be(()=>{}),(r,n)=>(a(),ae(Ve,null,{default:L(()=>{var x,D;return[e("div",ba,[e("div",xa,[e("div",_a,[e("div",wa,[e("nav",$a,[f(p(De),{href:r.route("assessment-dashboard"),class:"breadcrumb-link"},{default:L(()=>n[0]||(n[0]=[se(" Assessment Dashboard ")])),_:1,__:[0]},8,["href"]),f(p(Pe),{class:"breadcrumb-separator"}),e("span",Ca,u(W.value?"Edit Assessment":"New Assessment"),1)])]),e("div",ka,[e("h1",Sa,u(W.value?"Edit Assessment":"Create Assessment"),1),e("p",Aa,u(le()),1)])])])]),e("div",Fa,[!W.value&&s.showSteps?(a(),o("div",Ma,[e("div",Ta,[e("div",Ba,[(a(!0),o(N,null,H(ne.value,(C,q)=>(a(),o("div",{key:C.id,class:T(["step-item",Q(q)])},[e("div",Da,[(a(),ae(de(j(q)),{class:"step-icon"})),e("span",Ra,u(q+1),1)]),e("div",Va,[e("div",La,u(C.title),1),e("div",Ia,u(C.description),1)])],2))),128))])])])):g("",!0),e("div",Ua,[e("div",Ea,[V.value?(a(),o("div",ja,n[1]||(n[1]=[e("div",{class:"loading-spinner"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})],-1),e("p",{class:"loading-text"},"Loading assessment data...",-1)]))):t.value?(a(),o("div",za,[e("div",Pa,[f(p(ce),{class:"error-icon"}),n[4]||(n[4]=e("h3",{class:"error-title"},"Unable to Load Assessment",-1)),e("p",Oa,u(t.value),1),e("div",qa,[f(ge,{onClick:v},{default:L(()=>[f(p(Qe),{class:"w-4 h-4 mr-2"}),n[2]||(n[2]=se(" Retry "))]),_:1,__:[2]}),f(Ae,{onClick:O},{default:L(()=>n[3]||(n[3]=[se(" Go Back ")])),_:1,__:[3]})])])])):(a(),o("div",Na,[e("div",Ha,[e("div",Wa,[e("div",Ka,[e("div",Ga,[f(p(Oe),{class:"card-icon"}),n[5]||(n[5]=e("h3",{class:"card-title"},"Employee",-1))]),e("div",Za,[e("div",Ya,[e("div",Ja,[e("div",Qa,u(E(s.employee.name)),1)]),e("div",Xa,[e("div",en,u(s.employee.name),1),e("div",tn,[s.employee.position?(a(),o("span",sn,u(s.employee.position),1)):g("",!0),s.employee.department?(a(),o("span",an,u(s.employee.department.name),1)):g("",!0)])])])])]),e("div",nn,[e("div",on,[f(p(Fe),{class:"card-icon"}),n[6]||(n[6]=e("h3",{class:"card-title"},"Competency",-1))]),e("div",rn,[e("div",ln,[e("div",cn,u(s.competency.name),1),e("div",dn,[e("span",un,u(s.competency.category),1),s.competency.weight?(a(),o("span",mn," Weight: "+u(s.competency.weight),1)):g("",!0)])])])]),s.assessmentCycle?(a(),o("div",vn,[e("div",pn,[f(p(qe),{class:"card-icon"}),n[7]||(n[7]=e("h3",{class:"card-title"},"Assessment Cycle",-1))]),e("div",hn,[e("div",fn,[e("div",gn,u(s.assessmentCycle.name),1),e("div",yn,u(G(s.assessmentCycle.start_date,s.assessmentCycle.end_date)),1)])])])):g("",!0)])]),e("div",bn,[f(ca,{ref_key:"assessmentFormRef",ref:S,employee:s.employee,competency:s.competency,"assessment-type":s.assessmentType,"assessment-cycle":s.assessmentCycle,"existing-assessment":s.existingAssessment,"previous-assessments":s.previousAssessments,"show-progress":!0,"auto-save":!0,onSubmit:z,onCancel:P,onDraftSaved:ee,onRatingChanged:te,onValidationError:Z},null,8,["employee","competency","assessment-type","assessment-cycle","existing-assessment","previous-assessments"])])]))]),e("div",xn,[e("div",_n,[e("div",wn,[f(p(fe),{class:"card-icon"}),n[8]||(n[8]=e("h3",{class:"card-title"},"Assessment Guidelines",-1))]),e("div",$n,[e("div",Cn,[e("div",kn,[n[9]||(n[9]=e("div",{class:"guideline-title"},"Rating Scale",-1)),e("div",Sn,[(a(!0),o(N,null,H(oe.value,(C,q)=>(a(),o("div",{key:q,class:"rating-level"},[e("div",An,u(q+1),1),e("div",Fn,u(C),1)]))),128))])]),(x=s.competency.rating_guidelines)!=null&&x.length?(a(),o("div",Mn,[n[10]||(n[10]=e("div",{class:"guideline-title"},"Specific Guidelines",-1)),e("ul",Tn,[(a(!0),o(N,null,H(s.competency.rating_guidelines,(C,q)=>(a(),o("li",{key:q,class:"guideline-point"},u(C),1))),128))])])):g("",!0)])])]),(D=s.previousAssessments)!=null&&D.length?(a(),o("div",Bn,[e("div",Dn,[f(p(Ce),{class:"card-icon"}),n[11]||(n[11]=e("h3",{class:"card-title"},"Assessment History",-1))]),e("div",Rn,[e("div",Vn,[e("div",Ln,[e("div",In,[e("div",Un,u(s.previousAssessments.length),1),n[12]||(n[12]=e("div",{class:"stat-label"},"Previous Assessments",-1))]),e("div",En,[e("div",jn,u(re.value),1),n[13]||(n[13]=e("div",{class:"stat-label"},"Average Rating",-1))])]),e("div",zn,[n[14]||(n[14]=e("div",{class:"recent-title"},"Recent Assessments",-1)),e("div",Pn,[(a(!0),o(N,null,H(s.previousAssessments.slice(0,3),C=>(a(),o("div",{key:C.id,class:"recent-item"},[e("div",On,u(J(C.submitted_at)),1),e("div",qn,[f(Se,{rating:C.rating,max:5,size:"sm"},null,8,["rating"])]),e("div",Nn,u(C.assessor.name),1)]))),128))])])])])])):g("",!0),e("div",Hn,[e("div",Wn,[f(p(nt),{class:"card-icon"}),n[15]||(n[15]=e("h3",{class:"card-title"},"Need Help?",-1))]),e("div",{class:"card-content"},[e("div",{class:"help-content"},[n[16]||(n[16]=e("p",{class:"help-text"}," If you need assistance with this assessment, you can: ",-1)),e("ul",{class:"help-actions"},[e("li",null,[e("button",{onClick:_,class:"help-link"}," Contact Support ")])])])])])])])]),f(Ke,{show:M.value,title:A.value,message:c.value,"confirm-text":B.value,"cancel-text":K.value,onConfirm:d,onCancel:m},null,8,["show","title","message","confirm-text","cancel-text"]),f(ya,{show:R.value,title:Y.value,message:U.value,onClose:i},null,8,["show","title","message"]),y.value.length>0?(a(),o("div",Kn,[e("div",Gn,[(a(!0),o(N,null,H(y.value,C=>(a(),o("div",{key:C.id,class:T([ie(C.type),"notification-card"])},[e("div",Zn,[(a(),ae(de(l(C.type)),{class:"w-5 h-5"}))]),e("div",Yn,[e("p",Jn,u(C.message),1)]),e("button",{onClick:q=>b(C.id),class:"notification-close"},[f(p(pe),{class:"w-4 h-4"})],8,Qn)],2))),128))])])):g("",!0)]}),_:1}))}},xo=he(Xn,[["__scopeId","data-v-72c24f24"]]);export{xo as default};
