import{L as D,x as R,c as y,a as E,b as r,w as C,p as e,h as M,f as n,g as l,e as _,y as o,u as i,z as v,s as N,A as p,K as b}from"./app-D8ofPjSu.js";import{_ as S}from"./AuthenticatedLayout-BlvGw8gF.js";import{r as $,u as B,z as P}from"./Icon-Bs8iYFbI.js";import"./useAuth-D0CKBA2e.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-C6SQStN-.js";import"./useAccessibility-DJF01NUi.js";const I={class:"flex items-center space-x-4"},j={class:"font-semibold text-xl text-gray-800 leading-tight"},z={class:"py-12"},F={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},K={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-md p-4"},O={class:"flex"},Q={class:"text-sm text-yellow-700 mt-1"},W={class:"border-b border-gray-200 pb-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={key:0,class:"text-red-600 text-sm mt-1"},X={key:0,class:"text-red-600 text-sm mt-1"},Y={key:1,class:"text-amber-600 text-sm mt-1"},Z={class:"mt-6"},ee={key:0,class:"text-red-600 text-sm mt-1"},te={class:"border-b border-gray-200 pb-6"},se={class:"space-y-6"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-4"},ae={class:"flex items-start"},re={class:"ml-3"},de={key:0,class:"text-amber-600 text-xs mt-1"},ne={class:"flex items-start"},le={class:"space-y-4"},ue={class:"flex items-start"},me={class:"ml-3"},ce={key:0,class:"text-red-600 text-xs mt-1"},ye={class:"pb-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={key:0,class:"text-red-600 text-sm mt-1"},xe={key:1,class:"text-amber-600 text-xs mt-1"},ge={key:0,class:"text-red-600 text-sm mt-1"},_e={key:1,class:"text-amber-600 text-xs mt-1"},be={key:1,class:"bg-blue-50 border border-blue-200 rounded-md p-4"},fe={class:"flex"},he={class:"text-sm text-blue-700 mt-1"},we={class:"list-disc list-inside space-y-1"},qe={key:0},ke={key:1},Te={key:2},Ce={key:3},Ne={key:4},Ve={class:"flex items-center justify-between pt-6 border-t border-gray-200"},Ue={class:"flex items-center space-x-4"},Ae=["disabled"],Le=["disabled"],Pe={__name:"Edit",props:{leaveType:Object},setup(x){const u=x,a=D({...u.leaveType}),s=R({name:u.leaveType.name,quota:u.leaveType.quota,description:u.leaveType.description||"",is_active:u.leaveType.is_active,requires_approval:u.leaveType.requires_approval,max_consecutive_days:u.leaveType.max_consecutive_days,min_notice_days:u.leaveType.min_notice_days,carry_forward:u.leaveType.carry_forward}),f=y(()=>s.quota!==a.quota),h=y(()=>s.requires_approval!==a.requires_approval),w=y(()=>s.is_active!==a.is_active),q=y(()=>s.max_consecutive_days!==a.max_consecutive_days),k=y(()=>s.min_notice_days!==a.min_notice_days),g=y(()=>s.name!==a.name||s.quota!==a.quota||s.description!==(a.description||"")||s.is_active!==a.is_active||s.requires_approval!==a.requires_approval||s.max_consecutive_days!==a.max_consecutive_days||s.min_notice_days!==a.min_notice_days||s.carry_forward!==a.carry_forward),V=y(()=>{var m;return((m=u.leaveType.leaves)==null?void 0:m.some(t=>t.status==="pending"))||!1}),U=y(()=>{var m;return((m=u.leaveType.leaves)==null?void 0:m.filter(t=>t.status==="pending").length)||0}),A=()=>{s.put(route("leave-types.update",u.leaveType.id),{onSuccess:()=>{},onError:m=>{console.error("Validation errors:",m)}})},L=()=>{s.reset(),s.clearErrors()},{errors:c,processing:T}=s;return(m,t)=>(r(),E(S,null,{header:C(()=>[e("div",I,[e("button",{onClick:t[0]||(t[0]=d=>m.$inertia.visit(m.route("leave-types.show",x.leaveType.id))),class:"text-gray-500 hover:text-gray-700"},[_(o(P),{class:"w-5 h-5"})]),e("div",null,[e("h2",j," Edit Leave Policy: "+i(x.leaveType.name),1),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mt-1"}," Update leave type policies and restrictions ",-1))])])]),default:C(()=>[e("div",z,[e("div",F,[e("div",H,[e("form",{onSubmit:M(A,["prevent"]),class:"p-6 space-y-6"},[V.value?(r(),n("div",K,[e("div",O,[_(o($),{class:"h-5 w-5 text-yellow-400 mr-3 mt-0.5"}),e("div",null,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-yellow-800"}," Active Leave Requests Exist ",-1)),e("p",Q," This leave type has "+i(U.value)+" active leave requests. Changes to policies may affect existing requests. Please review carefully. ",1)])])])):l("",!0),e("div",W,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),e("div",G,[e("div",null,[t[12]||(t[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Leave Type Name "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=d=>o(s).name=d),type:"text",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Annual Leave, Sick Leave",required:""},null,512),[[p,o(s).name]]),o(c).name?(r(),n("div",J,i(o(c).name),1)):l("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{for:"quota",class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Annual Quota (Days) "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{id:"quota","onUpdate:modelValue":t[2]||(t[2]=d=>o(s).quota=d),type:"number",min:"0",max:"365",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 25",required:""},null,512),[[p,o(s).quota,void 0,{number:!0}]]),o(c).quota?(r(),n("div",X,i(o(c).quota),1)):l("",!0),f.value?(r(),n("div",Y," ⚠️ Changing quota may affect employee leave balances ")):l("",!0)])]),e("div",Z,[t[14]||(t[14]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),v(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=d=>o(s).description=d),rows:"3",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of this leave type and when it can be used..."},null,512),[[p,o(s).description]]),o(c).description?(r(),n("div",ee,i(o(c).description),1)):l("",!0)])]),e("div",te,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Policy Settings",-1)),e("div",se,[e("div",oe,[e("div",ie,[e("div",ae,[v(e("input",{id:"requires_approval","onUpdate:modelValue":t[4]||(t[4]=d=>o(s).requires_approval=d),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-1"},null,512),[[b,o(s).requires_approval]]),e("div",re,[t[16]||(t[16]=e("label",{for:"requires_approval",class:"block text-sm font-medium text-gray-900"}," Requires manager approval ",-1)),t[17]||(t[17]=e("p",{class:"text-xs text-gray-500 mt-1"}," When enabled, all requests must be approved by a manager ",-1)),h.value?(r(),n("div",de," ⚠️ This will affect how future requests are processed ")):l("",!0)])]),e("div",ne,[v(e("input",{id:"carry_forward","onUpdate:modelValue":t[5]||(t[5]=d=>o(s).carry_forward=d),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-1"},null,512),[[b,o(s).carry_forward]]),t[18]||(t[18]=e("div",{class:"ml-3"},[e("label",{for:"carry_forward",class:"block text-sm font-medium text-gray-900"}," Allow unused days to carry forward "),e("p",{class:"text-xs text-gray-500 mt-1"}," Unused leave days will roll over to the next year ")],-1))])]),e("div",le,[e("div",ue,[v(e("input",{id:"is_active","onUpdate:modelValue":t[6]||(t[6]=d=>o(s).is_active=d),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-1"},null,512),[[b,o(s).is_active]]),e("div",me,[t[19]||(t[19]=e("label",{for:"is_active",class:"block text-sm font-medium text-gray-900"}," Active policy ",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 mt-1"}," Employees can request this leave type when active ",-1)),w.value&&!o(s).is_active?(r(),n("div",ce," ⚠️ Deactivating will prevent new leave requests ")):l("",!0)])])])])])]),e("div",ye,[t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Restrictions & Limits",-1)),e("div",ve,[e("div",null,[t[22]||(t[22]=e("label",{for:"max_consecutive_days",class:"block text-sm font-medium text-gray-700 mb-2"}," Maximum Consecutive Days ",-1)),v(e("input",{id:"max_consecutive_days","onUpdate:modelValue":t[7]||(t[7]=d=>o(s).max_consecutive_days=d),type:"number",min:"1",max:"365",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 30 (leave blank for no limit)"},null,512),[[p,o(s).max_consecutive_days,void 0,{number:!0}]]),t[23]||(t[23]=e("p",{class:"text-xs text-gray-500 mt-1"}," Maximum number of consecutive days that can be taken at once ",-1)),o(c).max_consecutive_days?(r(),n("div",pe,i(o(c).max_consecutive_days),1)):l("",!0),q.value&&o(s).max_consecutive_days?(r(),n("div",xe," ⚠️ This may affect pending leave requests exceeding "+i(o(s).max_consecutive_days)+" days ",1)):l("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"min_notice_days",class:"block text-sm font-medium text-gray-700 mb-2"}," Minimum Notice Period (Days) ",-1)),v(e("input",{id:"min_notice_days","onUpdate:modelValue":t[8]||(t[8]=d=>o(s).min_notice_days=d),type:"number",min:"0",max:"365",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 7 (leave blank for no requirement)"},null,512),[[p,o(s).min_notice_days,void 0,{number:!0}]]),t[25]||(t[25]=e("p",{class:"text-xs text-gray-500 mt-1"}," How many days in advance employees must request this leave ",-1)),o(c).min_notice_days?(r(),n("div",ge,i(o(c).min_notice_days),1)):l("",!0),k.value&&o(s).min_notice_days?(r(),n("div",_e," ⚠️ Future requests will require "+i(o(s).min_notice_days)+" days advance notice ",1)):l("",!0)])])]),g.value?(r(),n("div",be,[e("div",fe,[_(o(B),{class:"h-5 w-5 text-blue-400 mr-3 mt-0.5"}),e("div",null,[t[27]||(t[27]=e("h3",{class:"text-sm font-medium text-blue-800"}," Changes Summary ",-1)),e("div",he,[e("ul",we,[f.value?(r(),n("li",qe," Annual quota: "+i(a.quota)+" → "+i(o(s).quota)+" days ",1)):l("",!0),h.value?(r(),n("li",ke," Approval requirement: "+i(a.requires_approval?"Required":"Not required")+" → "+i(o(s).requires_approval?"Required":"Not required"),1)):l("",!0),w.value?(r(),n("li",Te," Status: "+i(a.is_active?"Active":"Inactive")+" → "+i(o(s).is_active?"Active":"Inactive"),1)):l("",!0),q.value?(r(),n("li",Ce," Max consecutive days: "+i(a.max_consecutive_days||"No limit")+" → "+i(o(s).max_consecutive_days||"No limit"),1)):l("",!0),k.value?(r(),n("li",Ne," Notice period: "+i(a.min_notice_days||"No requirement")+" → "+i(o(s).min_notice_days||"No requirement")+" days ",1)):l("",!0)])])])])])):l("",!0),e("div",Ve,[e("div",Ue,[e("button",{type:"button",onClick:t[9]||(t[9]=d=>m.$inertia.visit(m.route("leave-types.show",x.leaveType.id))),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"button",onClick:L,disabled:!g.value,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Reset Changes ",8,Ae)]),e("button",{type:"submit",disabled:o(T)||!g.value,class:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},i(o(T)?"Updating...":"Update Leave Policy"),9,Le)])],32)])])])]),_:1}))}};export{Pe as default};
