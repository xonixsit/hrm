import{f as i,b as n,p as e,c as $,g as I,r as te,u as d,n as j,k as O,a as z,w as G,F as W,t as q,m as K,s as H,o as De,d as Pe,e as p,y as S,l as ke,q as Re,Q as N,E as V,z as Be,A as Ee}from"./app-C-AAshzK.js";import{u as xe}from"./useAuth-BR0441rR.js";import{r as Oe,a as We,_ as qe}from"./AuthenticatedLayout-BM6d84yy.js";import{b as $e,c as ve,d as Ae,a as Se,e as Le,f as He,g as Ce,r as we,h as Ne,i as Te,j as Me,k as Ve,l as me,m as Ue,n as ze}from"./Icon-7yvi8Hy0.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                   *//* empty css                                                                   *//* empty css                                                                       *//* empty css                                                                    */import{S as Z}from"./StatsCard-C-V2lIi6.js";import{A as Fe}from"./ApprovalModal-DMGX0Si0.js";import{r as Ie}from"./ArrowPathIcon-q1RKTnbs.js";import{r as Qe}from"./ChartBarIcon-DqPYamVH.js";import"./ApplicationLogo-D2DRSCJi.js";import"./useAccessibility-Cf_masbl.js";import"./StatsCard.vue_vue_type_style_index_0_scoped_25b82822_lang-CQJsFUYD.js";function je(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Ze(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Xe(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Ye(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}function Je(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"})])}function Ge(a,v){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}const Ke={key:0,class:"widget-header"},et={class:"flex items-center justify-between"},tt={class:"widget-title"},st={key:0,class:"widget-actions"},at={class:"widget-content"},nt={key:1,class:"widget-footer"},ot={__name:"DashboardWidget",props:{title:{type:String,default:""},size:{type:String,default:"md",validator:a=>["sm","md","lg","xl"].includes(a)},padding:{type:String,default:"md",validator:a=>["none","sm","md","lg"].includes(a)},background:{type:String,default:"white",validator:a=>["white","neutral","gradient"].includes(a)},interactive:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},class:{type:[String,Array,Object],default:""}},setup(a){const v=a,l=$(()=>["dashboard-widget","relative","overflow-hidden","transition-all","duration-200",{"cursor-pointer":v.interactive,"hover:shadow-lg":v.interactive,"opacity-50":v.loading,"border-error-200":v.error,"bg-error-50":v.error}]),f=$(()=>({sm:"min-h-[120px]",md:"min-h-[160px]",lg:"min-h-[200px]",xl:"min-h-[240px]"})[v.size]),c=$(()=>({none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"})[v.padding]),w=$(()=>({white:"bg-white border border-neutral-200 shadow-sm",neutral:"bg-neutral-50 border border-neutral-200",gradient:"bg-gradient-to-br from-white to-neutral-50 border border-neutral-200 shadow-sm"})[v.background]),x=$(()=>"rounded-xl"),B=$(()=>[...l.value,f.value,c.value,w.value,x.value,v.class]);return(g,h)=>(n(),i("div",{class:j(B.value)},[g.$slots.header||a.title?(n(),i("div",Ke,[te(g.$slots,"header",{},()=>[e("div",et,[e("h3",tt,d(a.title),1),g.$slots.actions?(n(),i("div",st,[te(g.$slots,"actions",{},void 0,!0)])):I("",!0)])],!0)])):I("",!0),e("div",at,[te(g.$slots,"default",{},void 0,!0)]),g.$slots.footer?(n(),i("div",nt,[te(g.$slots,"footer",{},void 0,!0)])):I("",!0)],2))}},_e=L(ot,[["__scopeId","data-v-0708b2c1"]]),rt={class:"actions-grid"},it=["onClick","disabled"],lt={class:"action-icon"},ct={class:"action-content"},dt={class:"action-label"},ut={key:0,class:"action-description"},mt={key:0,class:"actions-footer"},vt={__name:"QuickActions",props:{actions:{type:Array,default:()=>[]},title:{type:String,default:"Quick Actions"},maxVisible:{type:Number,default:6},layout:{type:String,default:"grid",validator:a=>["grid","list"].includes(a)},loading:{type:Boolean,default:!1}},emits:["action"],setup(a,{emit:v}){const l=a,f=v,c=O(!1),w=$(()=>c.value||l.actions.length<=l.maxVisible?l.actions:l.actions.slice(0,l.maxVisible)),x=m=>{m.disabled||(f("action",m),m.href&&(m.external?window.open(m.href,"_blank"):window.location.href=m.href),m.route&&window.route&&(window.location.href=window.route(m.route,m.params||{})))},B=()=>{c.value=!c.value},g=m=>{const A=["group relative flex items-center p-4 rounded-xl border transition-all duration-200","hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"];m.disabled?A.push("opacity-50 cursor-not-allowed"):A.push("cursor-pointer hover:border-primary-200 hover:bg-primary-50");const k={primary:"border-primary-200 bg-primary-50 text-primary-900",secondary:"border-neutral-200 bg-white text-neutral-900",success:"border-success-200 bg-success-50 text-success-900",warning:"border-warning-200 bg-warning-50 text-warning-900",error:"border-error-200 bg-error-50 text-error-900",default:"border-neutral-200 bg-white text-neutral-900"},R=m.variant||"default";return A.push(k[R]),A},h=m=>{const A="w-6 h-6",k={primary:"text-primary-600",secondary:"text-neutral-600",success:"text-success-600",warning:"text-warning-600",error:"text-error-600",default:"text-neutral-600"},R=m.variant||"default";return`${A} ${k[R]}`},b=m=>{const A="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",k={primary:"bg-primary-100 text-primary-800",secondary:"bg-neutral-100 text-neutral-800",success:"bg-success-100 text-success-800",warning:"bg-warning-100 text-warning-800",error:"bg-error-100 text-error-800",info:"bg-info-100 text-info-800",default:"bg-neutral-100 text-neutral-800"},R=m.variant||"default";return`${A} ${k[R]}`};return(m,A)=>(n(),z(_e,{title:a.title,loading:a.loading,class:"quick-actions",padding:"md"},{actions:G(()=>[te(m.$slots,"actions",{},void 0,!0)]),default:G(()=>[e("div",rt,[(n(!0),i(W,null,q(w.value,k=>(n(),i("button",{key:k.id||k.label,onClick:R=>x(k),disabled:k.disabled||a.loading,class:j([g(k),"action-item"])},[e("div",lt,[k.icon?(n(),z(K(k.icon),{key:0,class:j(h(k))},null,8,["class"])):I("",!0)]),e("div",ct,[e("h4",dt,d(k.label),1),k.description?(n(),i("p",ut,d(k.description),1)):I("",!0),k.badge?(n(),i("span",{key:1,class:j(b(k.badge))},d(k.badge.text),3)):I("",!0)]),A[0]||(A[0]=e("div",{class:"action-arrow"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))],10,it))),128))]),a.actions.length>a.maxVisible?(n(),i("div",mt,[e("button",{onClick:B,class:"toggle-button"},[H(d(c.value?"Show Less":`Show ${a.actions.length-a.maxVisible} More`)+" ",1),(n(),i("svg",{class:j(["w-4 h-4 transition-transform",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A[1]||(A[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])):I("",!0)]),_:3},8,["title","loading"]))}},ht=L(vt,[["__scopeId","data-v-d61ca03f"]]),gt={class:"employee-dashboard"},pt={class:"motivation-block"},ft={class:"motivation-content"},yt={class:"motivation-text"},bt={class:"quick-clock-actions"},kt=["disabled"],wt=["disabled"],_t=["disabled"],$t={class:"time-tracking-section"},xt={class:"real-time-clock"},At={class:"clock-display"},St={class:"current-time"},Ct={class:"current-date"},Tt={class:"work-status"},Mt={class:"status-text"},It={class:"time-progress-block"},jt={class:"duration-display"},Dt={class:"duration-item"},Pt={class:"duration-value"},Rt={key:0,class:"duration-item"},Bt={class:"duration-value"},Et={class:"duration-item"},Ot={class:"duration-value"},Wt={class:"horizontal-clock-container"},qt={class:"time-markers"},Lt={class:"marker-time"},Ht={class:"time-progress-bar"},Nt={key:0,class:"current-time-indicator"},Vt={class:"time-tooltip"},Ut={class:"time-progress-info"},zt={class:"progress-left"},Ft={class:"progress-time"},Qt={class:"progress-right"},Zt={class:"progress-percentage"},Xt={class:"dashboard-content"},Yt={class:"left-column"},Jt={key:0,class:"empty-state"},Gt={key:1,class:"schedule-list"},Kt={class:"schedule-time"},es={class:"time-start"},ts={class:"time-end"},ss={class:"schedule-content"},as={class:"schedule-title"},ns={key:0,class:"schedule-description"},os={class:"schedule-meta"},rs={key:0,class:"schedule-location"},is={key:1,class:"schedule-attendees"},ls={class:"schedule-actions"},cs=["onClick"],ds={key:0,class:"empty-state"},us={key:1,class:"feedback-list"},ms={class:"feedback-header"},vs={class:"feedback-from"},hs={class:"feedback-author"},gs={class:"feedback-role"},ps={class:"feedback-rating"},fs={class:"rating-stars"},ys={class:"feedback-comment"},bs={class:"feedback-date"},ks={class:"right-column"},ws={__name:"EmployeeDashboard",props:{stats:{type:Object,default:()=>({hoursToday:0,tasksCompleted:0,leaveBalance:0,upcomingDeadlines:0,taskTrend:0})},personalActivities:{type:Array,default:()=>[]},todaysSchedule:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m",sessions:0,clock_ins:0},recent_activities:[],stats:{weekly_hours:"0h 0m",monthly_hours:"0h 0m",average_daily:"0h 0m"}})}},emits:["clock-in-out","toggle-task","action","view-task"],setup(a,{emit:v}){const l=a,f=v;xe();const c=O(new Date),w=O(""),x=O("0h 0m 0s"),B=O("0h 0m 0s"),g=O(null);let h=null;const b=$(()=>{const r=l.clockedIn||l.currentAttendance.clocked_in;return console.log("ğŸ” isCurrentlyClockedIn computed:",{propsClockedIn:l.clockedIn,currentAttendanceClockedIn:l.currentAttendance.clocked_in,result:r}),r}),m=$(()=>b.value?"Clock Out":"Clock In"),A=$(()=>["inline-flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",b.value?"text-white bg-error-600 border border-error-600 hover:bg-error-700 focus:ring-error-500":"text-white bg-success-600 border border-success-600 hover:bg-success-700 focus:ring-success-500"]),k=$(()=>c.value.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),R=$(()=>!b.value||!l.currentAttendance.clock_in_time?"before-work":"during-work"),F=$(()=>{if(!b.value)return console.log("ğŸ” Progress: Not clocked in, returning 0%"),0;const r=l.currentAttendance.clock_in_time;if(!r)return console.log("ğŸ” Progress: No clock in time, returning 0%"),0;const t=c.value,s=new Date(r);if(t<s)return console.log("ğŸ” Progress: Current time before clock in, returning 0%"),0;const y=(t.getTime()-s.getTime())/(1e3*60*60),u=y/8*100,T=Math.min(100,Math.max(0,u));return console.log("ğŸ” Progress calculation:",{clockInTime:r,now:t.toISOString(),workTimeElapsedHours:y.toFixed(2),percentage:u.toFixed(2),finalPercentage:T.toFixed(2)}),T}),X=$(()=>{const r=Math.round(F.value);switch(R.value){case"before-work":return b.value?"Work session starting":"Ready to clock in";case"after-work":return"Workday complete!";case"during-work":return`${r}% of workday`;default:return`${r}% of workday`}}),Q=$(()=>{switch(R.value){case"before-work":return"Pre-work";case"after-work":return"Complete";case"during-work":return"Active";default:return"Active"}}),U=$(()=>[{label:"8 AM",isLunch:!1},{label:"9",isLunch:!1},{label:"10",isLunch:!1},{label:"11",isLunch:!1},{label:"12 PM",isLunch:!0},{label:"1",isLunch:!1},{label:"2",isLunch:!1},{label:"3",isLunch:!1},{label:"4",isLunch:!1},{label:"5 PM",isLunch:!1}]),se=$(()=>{if(!b.value)return 0;const r=l.currentAttendance.clock_in_time;if(!r)return 0;const t=c.value,s=new Date(t);s.setHours(8,0,0,0);const o=new Date(t);o.setHours(17,0,0,0);const y=new Date(r),_=o.getTime()-s.getTime(),u=y.getTime()-s.getTime(),T=Math.max(0,u/_*100);return Math.min(100,T)}),ae=$(()=>{if(!b.value)return console.log("ğŸ” ProgressWidth: Not clocked in, returning 0"),0;const r=l.currentAttendance.clock_in_time;if(!r)return console.log("ğŸ” ProgressWidth: No clock in time, returning 0"),0;const t=c.value,s=new Date(t);s.setHours(8,0,0,0);const o=new Date(t);o.setHours(17,0,0,0);const y=new Date(r),_=o.getTime()-s.getTime();if(t<y)return console.log("ğŸ” ProgressWidth: Current time before clock in, returning 0"),0;const u=t.getTime()-s.getTime(),T=Math.min(100,Math.max(0,u/_*100)),M=y.getTime()-s.getTime(),D=Math.max(0,M/_*100),C=T-D,P=Math.max(0,C);return console.log("ğŸ” ProgressWidth calculation:",{clockInTime:r,timelineStart:s.toISOString(),timelineEnd:o.toISOString(),currentPositionPercent:T.toFixed(2),clockInPositionPercent:D.toFixed(2),width:C.toFixed(2),finalWidth:P.toFixed(2)}),P}),Y=$(()=>{if(!b.value)return 0;const r=l.currentAttendance.clock_in_time;if(!r)return 0;const t=c.value,s=new Date(t);s.setHours(8,0,0,0);const o=new Date(t);o.setHours(17,0,0,0);const y=new Date(r),_=o.getTime()-s.getTime(),u=y.getTime()-s.getTime(),T=Math.max(0,u/_*100);return Math.min(100,T)}),E=$(()=>{if(!b.value)return[];const r=c.value,t=new Date(r);t.setHours(8,0,0,0);const s=new Date(r);s.setHours(17,0,0,0);const o=s.getTime()-t.getTime(),y=[];if((l.currentAttendance.break_sessions||[]).forEach(u=>{u.start&&y.push({start:u.start,end:u.end,isOngoing:!1})}),l.currentAttendance.on_break){let u=null;l.currentAttendance.current_break_start?u=l.currentAttendance.current_break_start:g.value&&(u=g.value),u&&y.push({start:u,end:null,isOngoing:!0})}return y.length===0?[]:y.map((u,T)=>{const M=new Date(u.start),D=u.end?new Date(u.end):r,C=M.getTime()-t.getTime(),P=D.getTime()-t.getTime(),J=Math.max(0,C/o*100),de=Math.min(100,P/o*100),ue=Math.max(0,de-J);return{left:J,width:ue,isOngoing:u.isOngoing}}).filter(u=>u.width>0)}),ne=$(()=>[{id:"request-leave",label:"Request Leave",description:"Submit a new leave request",icon:$e,variant:"primary",route:"leaves.create"},{id:"view-performance",label:"Performance",description:"View your performance metrics",icon:ve,variant:"success",route:"performance.index"}]),he=()=>{const r="text-xs font-medium px-2 py-1 rounded-full";switch(R.value){case"before-work":return`${r} bg-neutral-100 text-neutral-600`;case"after-work":return`${r} bg-success-100 text-success-700`;case"during-work":return`${r} bg-primary-100 text-primary-700`;default:return`${r} bg-primary-100 text-primary-700`}},ge=()=>{const r="flex items-center space-x-2";switch(R.value){case"before-work":return`${r} text-neutral-600`;case"after-work":return`${r} text-success-700`;case"during-work":return l.currentAttendance.on_break?`${r} text-warning-700`:`${r} text-primary-700`;default:return`${r} text-primary-700`}},oe=()=>{const r=new Date;c.value=r,w.value=r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},re=()=>{if(b.value&&l.currentAttendance.clock_in_time){const r=new Date(l.currentAttendance.clock_in_time),s=new Date-r,o=Math.floor(s/(1e3*60*60)),y=Math.floor(s%(1e3*60*60)/(1e3*60)),_=Math.floor(s%(1e3*60)/1e3);x.value=`${o}h ${y}m ${_}s`}else x.value="0h 0m 0s";if(l.currentAttendance.on_break){let r=null;if(l.currentAttendance.current_break_start)r=new Date(l.currentAttendance.current_break_start);else if(g.value)r=new Date(g.value);else if(l.currentAttendance.break_sessions&&l.currentAttendance.break_sessions.length>0){const t=l.currentAttendance.break_sessions[l.currentAttendance.break_sessions.length-1];t&&!t.end&&(r=new Date(t.start))}if(r&&!isNaN(r.getTime())){const s=Math.max(0,new Date-r),o=Math.floor(s/(1e3*60*60)),y=Math.floor(s%(1e3*60*60)/(1e3*60)),_=Math.floor(s%(1e3*60)/1e3);B.value=`${o}h ${y}m ${_}s`,g.value||(g.value=r.toISOString())}else g.value||(g.value=new Date().toISOString()),B.value="0h 0m 1s"}else B.value="0h 0m 0s",g.value=null},ie=async()=>{try{console.log("ğŸ” EmployeeDashboard: Clock in/out button clicked"),console.log("ğŸ” Current state:",{isCurrentlyClockedIn:b.value,clockedIn:l.clockedIn,currentAttendanceClockedIn:l.currentAttendance.clocked_in}),f("clock-in-out"),setTimeout(()=>{const r=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!b.value,onBreak:!1,clockInTime:b.value?null:new Date().toISOString(),breakStartTime:null,timestamp:Date.now()}});window.dispatchEvent(r)},100)}catch(r){console.error("Clock in/out failed:",r)}},le=async()=>{try{g.value=new Date().toISOString(),f("action",{type:"take-break"}),setTimeout(()=>{const r=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!0,onBreak:!0,clockInTime:l.currentAttendance.clock_in_time,breakStartTime:g.value,timestamp:Date.now()}});window.dispatchEvent(r)},100)}catch(r){console.error("Take break failed:",r)}},pe=async()=>{try{f("action",{type:"end-break"}),setTimeout(()=>{const r=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!0,onBreak:!1,clockInTime:l.currentAttendance.clock_in_time,breakStartTime:null,timestamp:Date.now()}});window.dispatchEvent(r)},100)}catch(r){console.error("End break failed:",r)}},ee=r=>{f("action",{type:"quick-action",data:r})},fe=()=>{f("action",{type:"view-calendar"})},ye=r=>{r.meeting_link&&window.open(r.meeting_link,"_blank")},ce=r=>new Date(`2000-01-01T${r}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),be=r=>{const t=new Date,s=new Date(r),o=Math.floor((s-t)/(1e3*60));if(o<0){const u=Math.abs(o);if(u<60)return`${u}m ago`;const T=Math.floor(u/60);return T<24?`${T}h ago`:`${Math.floor(T/24)}d ago`}if(o<60)return`in ${o}m`;const y=Math.floor(o/60);return y<24?`in ${y}h`:`in ${Math.floor(y/24)}d`};return De(()=>{oe(),re(),h=setInterval(()=>{oe(),re()},1e3)}),Pe(()=>{h&&clearInterval(h)}),(r,t)=>(n(),i("div",gt,[e("div",pt,[e("div",ft,[e("p",yt,[p(S(Ae),{class:"w-5 h-5 inline-block mr-2 text-yellow-500"}),t[0]||(t[0]=H(" Ready to tackle today's challenges? "))])]),e("div",bt,[e("button",{onClick:ie,disabled:a.loading,class:j(A.value)},[p(S(Se),{class:"w-4 h-4"}),H(" "+d(m.value),1)],10,kt),b.value&&!a.currentAttendance.on_break?(n(),i("button",{key:0,onClick:le,disabled:a.loading,class:"break-button"},[p(S(Oe),{class:"w-4 h-4"}),t[1]||(t[1]=H(" Take Break "))],8,wt)):I("",!0),b.value&&a.currentAttendance.on_break?(n(),i("button",{key:1,onClick:pe,disabled:a.loading,class:"end-break-button"},[p(S(We),{class:"w-4 h-4"}),t[2]||(t[2]=H(" End Break "))],8,_t)):I("",!0)])]),e("div",$t,[e("div",xt,[e("div",At,[e("div",St,d(k.value),1),e("div",Ct,d(w.value),1)]),e("div",Tt,[e("div",{class:j(["status-indicator",ge()])},[t[3]||(t[3]=e("div",{class:"status-dot"},null,-1)),e("span",Mt,d(Q.value),1)],2)])]),e("div",It,[e("div",jt,[e("div",Dt,[t[4]||(t[4]=e("div",{class:"duration-label"},"Work Time",-1)),e("div",Pt,d(x.value),1)]),a.currentAttendance.on_break?(n(),i("div",Rt,[t[5]||(t[5]=e("div",{class:"duration-label"},"Break Time",-1)),e("div",Bt,d(B.value),1)])):I("",!0),e("div",Et,[t[6]||(t[6]=e("div",{class:"duration-label"},"Progress",-1)),e("div",Ot,d(Math.round(F.value))+"%",1)])]),e("div",Wt,[e("div",qt,[(n(!0),i(W,null,q(U.value,(s,o)=>(n(),i("div",{key:o,class:j(["time-marker",{"start-marker":o===0,"end-marker":o===U.value.length-1,"lunch-marker":s.isLunch,"regular-marker":!s.isLunch&&o!==0&&o!==U.value.length-1}])},[t[7]||(t[7]=e("div",{class:"marker-line"},null,-1)),e("span",Lt,d(s.label),1)],2))),128))]),e("div",Ht,[t[9]||(t[9]=e("div",{class:"progress-bar-shimmer"},null,-1)),b.value&&Y.value>0?(n(),i("div",{key:0,class:"pre-work-fill",style:ke({width:`${Y.value}%`,transition:"width 0.5s ease-out"})},null,4)):I("",!0),b.value&&ae.value>0?(n(),i("div",{key:1,class:"work-progress-fill",style:ke({left:`${se.value}%`,width:`${ae.value}%`,transition:"width 0.5s ease-out, left 0.5s ease-out"})},[R.value==="during-work"?(n(),i("div",Nt,[t[8]||(t[8]=e("div",{class:"time-dot"},null,-1)),e("div",Vt,d(k.value),1)])):I("",!0)],4)):I("",!0),(n(!0),i(W,null,q(E.value,(s,o)=>(n(),i("div",{key:`break-${o}`,class:j(["break-time-fill",{"ongoing-break":s.isOngoing}]),style:ke({left:`${s.left}%`,width:`${s.width}%`})},null,6))),128))]),e("div",Ut,[e("div",zt,[e("span",Ft,d(k.value),1),e("span",{class:j(["progress-status",he()])},d(Q.value),3)]),e("div",Qt,[e("span",Zt,d(X.value),1)])])])])]),e("div",Xt,[e("div",Yt,[p(_e,{title:"Today's Schedule",loading:a.loading,class:"todays-schedule"},{actions:G(()=>[e("button",{onClick:fe,class:"text-sm text-primary-600 hover:text-primary-700"}," View Calendar ")]),default:G(()=>[a.todaysSchedule.length===0?(n(),i("div",Jt,[p(S($e),{class:"w-12 h-12 text-neutral-400 mx-auto mb-3"}),t[10]||(t[10]=e("p",{class:"text-neutral-500 text-center"},"No scheduled events for today",-1))])):(n(),i("div",Gt,[(n(!0),i(W,null,q(a.todaysSchedule,s=>(n(),i("div",{key:s.id,class:"schedule-item"},[e("div",Kt,[e("span",es,d(ce(s.start_time)),1),t[11]||(t[11]=e("span",{class:"time-separator"},"-",-1)),e("span",ts,d(ce(s.end_time)),1)]),e("div",ss,[e("h4",as,d(s.title),1),s.description?(n(),i("p",ns,d(s.description),1)):I("",!0),e("div",os,[s.location?(n(),i("span",rs,[p(S(Ye),{class:"w-4 h-4"}),H(" "+d(s.location),1)])):I("",!0),s.attendees?(n(),i("span",is,[p(S(Le),{class:"w-4 h-4"}),H(" "+d(s.attendees.length)+" attendees ",1)])):I("",!0)])]),e("div",ls,[s.meeting_link?(n(),i("button",{key:0,onClick:o=>ye(s),class:"join-button"}," Join ",8,cs)):I("",!0)])]))),128))]))]),_:1},8,["loading"]),p(_e,{title:"Recent Feedback",loading:a.loading,class:"recent-feedback"},{default:G(()=>[a.recentFeedback.length===0?(n(),i("div",ds,[p(S(je),{class:"w-12 h-12 text-neutral-400 mx-auto mb-3"}),t[12]||(t[12]=e("p",{class:"text-neutral-500 text-center"},"No recent feedback",-1))])):(n(),i("div",us,[(n(!0),i(W,null,q(a.recentFeedback.slice(0,3),s=>(n(),i("div",{key:s.id,class:"feedback-item"},[e("div",ms,[e("div",vs,[e("span",hs,d(s.from.name),1),e("span",gs,d(s.from.role),1)]),e("div",ps,[e("div",fs,[(n(),i(W,null,q(5,o=>p(S(He),{key:o,class:j(["w-4 h-4",o<=s.rating?"text-warning-400 fill-current":"text-neutral-300"])},null,8,["class"])),64))])])]),e("p",ys,d(s.comment),1),e("span",bs,d(be(s.created_at)),1)]))),128))]))]),_:1},8,["loading"])]),e("div",ks,[p(ht,{actions:ne.value,title:"Quick Actions","max-visible":6,onAction:ee},null,8,["actions"])])])]))}},_s=L(ws,[["__scopeId","data-v-b9afa05a"]]),$s={class:"system-health-widget"},xs={class:"widget-header"},As={class:"header-content"},Ss={class:"header-icon"},Cs=["disabled"],Ts={class:"health-metrics"},Ms={class:"metric-item"},Is={class:"metric-header"},js={class:"metric-icon"},Ds={class:"status-text"},Ps={class:"metric-details"},Rs={class:"detail-value"},Bs={class:"metric-item"},Es={class:"metric-header"},Os={class:"metric-icon"},Ws={class:"status-text"},qs={class:"metric-details"},Ls={class:"detail-value"},Hs={class:"metric-item"},Ns={class:"metric-header"},Vs={class:"metric-icon"},Us={class:"status-text"},zs={class:"metric-details"},Fs={class:"detail-value"},Qs={class:"overall-status"},Zs={class:"status-content"},Xs={class:"status-info"},Ys={class:"status-title"},Js={class:"status-description"},Gs={class:"last-updated"},Ks={class:"updated-text"},ea={__name:"SystemHealthWidget",props:{health:{type:Object,default:()=>({database:{status:"healthy",responseTime:25},cache:{status:"healthy",hitRate:92},queue:{status:"healthy",pending:3}})},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(a){const v=a,l=g=>{const h={healthy:"status-healthy",warning:"status-warning",error:"status-error",unknown:"status-unknown"};return h[g]||h.unknown},f=()=>{const g=Object.values(v.health).every(m=>m.status==="healthy"),h=Object.values(v.health).some(m=>m.status==="error"),b=Object.values(v.health).some(m=>m.status==="warning");return h?"overall-status-error":b?"overall-status-warning":g?"overall-status-healthy":"overall-status-unknown"},c=()=>{const g=Object.values(v.health).every(m=>m.status==="healthy"),h=Object.values(v.health).some(m=>m.status==="error"),b=Object.values(v.health).some(m=>m.status==="warning");return h?Ce:b?we:g?ve:we},w=()=>{const g=Object.values(v.health).every(m=>m.status==="healthy"),h=Object.values(v.health).some(m=>m.status==="error"),b=Object.values(v.health).some(m=>m.status==="warning");return h?"System Issues Detected":b?"System Warnings":g?"All Systems Operational":"System Status Unknown"},x=()=>{const g=Object.values(v.health).every(m=>m.status==="healthy"),h=Object.values(v.health).some(m=>m.status==="error"),b=Object.values(v.health).some(m=>m.status==="warning");return h?"Immediate attention required":b?"Monitor system performance":g?"System running smoothly":"Unable to determine status"},B=g=>g.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(g,h)=>{var b,m,A,k,R,F,X,Q,U;return n(),i("div",$s,[e("div",xs,[e("div",As,[e("div",Ss,[p(S(Ge),{class:"w-5 h-5 text-green-600"})]),h[1]||(h[1]=e("div",{class:"header-text"},[e("h3",{class:"widget-title"},"System Health"),e("p",{class:"widget-subtitle"},"Real-time system monitoring")],-1))]),e("button",{onClick:h[0]||(h[0]=se=>g.$emit("refresh")),disabled:a.loading,class:"refresh-button"},[p(S(Ie),{class:j(["w-4 h-4",{"animate-spin":a.loading}])},null,8,["class"])],8,Cs)]),e("div",Ts,[e("div",Ms,[e("div",Is,[e("div",js,[p(S(Ze),{class:"w-4 h-4"})]),h[3]||(h[3]=e("span",{class:"metric-label"},"Database",-1)),e("div",{class:j([l((b=a.health.database)==null?void 0:b.status),"status-indicator"])},[h[2]||(h[2]=e("div",{class:"status-dot"},null,-1)),e("span",Ds,d(((m=a.health.database)==null?void 0:m.status)||"Unknown"),1)],2)]),e("div",Ps,[h[4]||(h[4]=e("span",{class:"detail-label"},"Response Time:",-1)),e("span",Rs,d(((A=a.health.database)==null?void 0:A.responseTime)||0)+"ms",1)])]),e("div",Bs,[e("div",Es,[e("div",Os,[p(S(Ae),{class:"w-4 h-4"})]),h[6]||(h[6]=e("span",{class:"metric-label"},"Cache",-1)),e("div",{class:j([l((k=a.health.cache)==null?void 0:k.status),"status-indicator"])},[h[5]||(h[5]=e("div",{class:"status-dot"},null,-1)),e("span",Ws,d(((R=a.health.cache)==null?void 0:R.status)||"Unknown"),1)],2)]),e("div",qs,[h[7]||(h[7]=e("span",{class:"detail-label"},"Hit Rate:",-1)),e("span",Ls,d(((F=a.health.cache)==null?void 0:F.hitRate)||0)+"%",1)])]),e("div",Hs,[e("div",Ns,[e("div",Vs,[p(S(Je),{class:"w-4 h-4"})]),h[9]||(h[9]=e("span",{class:"metric-label"},"Queue",-1)),e("div",{class:j([l((X=a.health.queue)==null?void 0:X.status),"status-indicator"])},[h[8]||(h[8]=e("div",{class:"status-dot"},null,-1)),e("span",Us,d(((Q=a.health.queue)==null?void 0:Q.status)||"Unknown"),1)],2)]),e("div",zs,[h[10]||(h[10]=e("span",{class:"detail-label"},"Pending Jobs:",-1)),e("span",Fs,d(((U=a.health.queue)==null?void 0:U.pending)||0),1)])])]),e("div",Qs,[e("div",{class:j([f(),"status-card"])},[e("div",Zs,[(n(),z(K(c()),{class:"w-6 h-6"})),e("div",Xs,[e("span",Ys,d(w()),1),e("span",Js,d(x()),1)])])],2)]),e("div",Gs,[p(S(Se),{class:"w-3 h-3 text-gray-400"}),e("span",Ks,"Last updated: "+d(B(new Date)),1)])])}}},ta=L(ea,[["__scopeId","data-v-22541880"]]),sa={class:"pending-approvals-widget"},aa={class:"widget-header"},na={class:"approval-count"},oa={key:0,class:"text-xs text-gray-500 ml-1"},ra={key:0,class:"empty-state"},ia={key:1,class:"approvals-list"},la={class:"approval-content"},ca={class:"approval-title"},da={class:"approval-description"},ua={class:"approval-requester"},ma={class:"approval-actions"},va=["onClick"],ha=["onClick"],ga={__name:"PendingApprovalsWidget",props:{approvals:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["approve","reject","view-all"],setup(a){return(v,l)=>(n(),i("div",sa,[e("div",aa,[l[1]||(l[1]=e("h3",{class:"widget-title"},"Pending Approvals",-1)),e("span",na,d(Math.min(a.approvals.length,5)),1),a.approvals.length>5?(n(),i("span",oa,"of "+d(a.approvals.length),1)):I("",!0)]),a.approvals.length===0?(n(),i("div",ra,[p(S(ve),{class:"w-12 h-12 text-green-500 mx-auto mb-3"}),l[2]||(l[2]=e("p",{class:"text-gray-600"},"No pending approvals",-1))])):(n(),i("div",ia,[(n(!0),i(W,null,q(a.approvals.slice(0,5),f=>(n(),i("div",{key:f.id,class:"approval-item"},[e("div",la,[e("h4",ca,d(f.title),1),e("p",da,d(f.description),1),e("span",ua,d(f.requester),1)]),e("div",ma,[e("button",{onClick:c=>v.$emit("approve",f),class:"approve-button"},[p(S(Ne),{class:"w-4 h-4"})],8,va),e("button",{onClick:c=>v.$emit("reject",f),class:"reject-button"},[p(S(Te),{class:"w-4 h-4"})],8,ha)])]))),128))])),a.approvals.length>5?(n(),i("button",{key:2,onClick:l[0]||(l[0]=f=>v.$emit("view-all")),class:"view-all-button"}," View All "+d(a.approvals.length)+" Approvals ",1)):I("",!0)]))}},pa=L(ga,[["__scopeId","data-v-d3fae1f6"]]),fa={class:"system-activities-widget"},ya={class:"widget-header"},ba={class:"activities-list"},ka={class:"activity-content"},wa={class:"activity-title"},_a={class:"activity-description"},$a={class:"activity-time"},xa={__name:"SystemActivitiesWidget",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(a){const v=c=>({create:me,approve:ve,reject:Ce,update:Ve,department:Me})[c]||me,l=c=>`activity-icon-base ${{create:"bg-green-100 text-green-600",approve:"bg-blue-100 text-blue-600",reject:"bg-red-100 text-red-600",update:"bg-yellow-100 text-yellow-600",department:"bg-purple-100 text-purple-600"}[c]||"bg-gray-100 text-gray-600"}`,f=c=>new Date(c).toLocaleString();return(c,w)=>(n(),i("div",fa,[e("div",ya,[w[1]||(w[1]=e("h3",{class:"widget-title"},"System Activities",-1)),e("button",{onClick:w[0]||(w[0]=x=>c.$emit("refresh")),class:"refresh-button"},[p(S(Ie),{class:"w-4 h-4"})])]),e("div",ba,[(n(!0),i(W,null,q(a.activities.slice(0,8),x=>(n(),i("div",{key:x.id,class:"activity-item"},[e("div",{class:j([l(x.type),"activity-icon"])},[(n(),z(K(v(x.type)),{class:"w-4 h-4"}))],2),e("div",ka,[e("p",wa,d(x.title),1),e("p",_a,d(x.description),1),e("span",$a,d(f(x.timestamp)),1)])]))),128))])]))}},Aa=L(xa,[["__scopeId","data-v-9a198d9f"]]),Sa={class:"recent-user-activity-widget"},Ca={class:"activity-list"},Ta={class:"user-avatar"},Ma={class:"activity-content"},Ia={class:"user-name"},ja={class:"activity-action"},Da={class:"activity-time"},Pa={__name:"RecentUserActivityWidget",props:{activities:{type:Array,default:()=>[]}},setup(a){const v=l=>{const f=new Date,c=new Date(l),w=f-c,x=Math.floor(w/(1e3*60*60*24));return x===0?"Today":x===1?"Yesterday":`${x}d ago`};return(l,f)=>(n(),i("div",Sa,[f[0]||(f[0]=e("div",{class:"widget-header"},[e("h3",{class:"widget-title"},"Recent User Activity")],-1)),e("div",Ca,[(n(!0),i(W,null,q(a.activities.slice(0,10),c=>(n(),i("div",{key:c.id,class:"activity-item"},[e("div",Ta,d(c.user.name.charAt(0).toUpperCase()),1),e("div",Ma,[e("span",Ia,d(c.user.name),1),e("span",ja,d(c.action),1),e("div",Da,d(v(c.created_at)),1)])]))),128))])]))}},Ra=L(Pa,[["__scopeId","data-v-d2c65721"]]),Ba={class:"quick-actions-widget"},Ea={class:"actions-grid"},Oa=["onClick"],Wa={class:"action-label"},qa={__name:"QuickActionsWidget",props:{actions:{type:Array,default:()=>[]}},emits:["action"],setup(a){const v=f=>({"user-plus":me,"chart-bar":Qe,"building-office":Me,"cloud-arrow-up":Xe})[f]||me,l=f=>{const c={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200",ghost:"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"};return c[f]||c.secondary};return(f,c)=>(n(),i("div",Ba,[c[0]||(c[0]=e("div",{class:"widget-header"},[e("h3",{class:"widget-title"},"Quick Actions")],-1)),e("div",Ea,[(n(!0),i(W,null,q(a.actions,w=>(n(),i("button",{key:w.id,onClick:w.handler,class:j([l(w.variant),"action-button"])},[(n(),z(K(v(w.icon)),{class:"w-5 h-5"})),e("span",Wa,d(w.label),1)],10,Oa))),128))])]))}},La=L(qa,[["__scopeId","data-v-d362c498"]]),Ha={class:"team-members-widget"},Na={class:"widget-header"},Va={class:"member-count"},Ua={class:"members-list"},za={class:"member-avatar"},Fa={class:"member-info"},Qa={class:"member-name"},Za={class:"member-position"},Xa={class:"member-actions"},Ya=["onClick"],Ja=["onClick"],Ga={__name:"TeamMembersWidget",props:{members:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["view-member","send-message"],setup(a){return(v,l)=>(n(),i("div",Ha,[e("div",Na,[l[0]||(l[0]=e("h3",{class:"widget-title"},"Team Members",-1)),e("span",Va,d(a.members.length),1)]),e("div",Ua,[(n(!0),i(W,null,q(a.members,f=>(n(),i("div",{key:f.id,class:"member-item"},[e("div",za,d(f.name.charAt(0).toUpperCase()),1),e("div",Fa,[e("h4",Qa,d(f.name),1),e("p",Za,d(f.position),1)]),e("div",Xa,[e("button",{onClick:c=>v.$emit("view-member",f),class:"action-button view-button"},[p(S(Ue),{class:"w-4 h-4"})],8,Ya),e("button",{onClick:c=>v.$emit("send-message",f),class:"action-button message-button"},[p(S(je),{class:"w-4 h-4"})],8,Ja)])]))),128))])]))}},Ka=L(Ga,[["__scopeId","data-v-be683641"]]),en={class:"team-performance-widget"},tn={__name:"TeamPerformanceWidget",props:{performance:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(a){return(v,l)=>(n(),i("div",en,l[0]||(l[0]=[Re('<div class="widget-header" data-v-d40c3726><h3 class="widget-title" data-v-d40c3726>Team Performance</h3></div><div class="performance-content" data-v-d40c3726><div class="performance-score" data-v-d40c3726><div class="score-circle" data-v-d40c3726><span class="score-value" data-v-d40c3726>85%</span></div><p class="score-label" data-v-d40c3726>Overall Performance</p></div><div class="performance-metrics" data-v-d40c3726><div class="metric-item" data-v-d40c3726><span class="metric-label" data-v-d40c3726>Productivity</span><div class="metric-bar" data-v-d40c3726><div class="metric-fill" style="width:88%;" data-v-d40c3726></div></div><span class="metric-value" data-v-d40c3726>88%</span></div><div class="metric-item" data-v-d40c3726><span class="metric-label" data-v-d40c3726>Quality</span><div class="metric-bar" data-v-d40c3726><div class="metric-fill" style="width:92%;" data-v-d40c3726></div></div><span class="metric-value" data-v-d40c3726>92%</span></div><div class="metric-item" data-v-d40c3726><span class="metric-label" data-v-d40c3726>Collaboration</span><div class="metric-bar" data-v-d40c3726><div class="metric-fill" style="width:78%;" data-v-d40c3726></div></div><span class="metric-value" data-v-d40c3726>78%</span></div></div></div>',2)])))}},sn=L(tn,[["__scopeId","data-v-d40c3726"]]),an={class:"team-activities-widget"},nn={class:"activities-placeholder"},on={__name:"TeamActivitiesWidget",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(a){return(v,l)=>(n(),i("div",an,[l[1]||(l[1]=e("div",{class:"widget-header"},[e("h3",{class:"widget-title"},"Team Activities")],-1)),e("div",nn,[p(S(ze),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),l[0]||(l[0]=e("p",{class:"text-gray-600 text-center"},"Team activities will appear here",-1))])]))}},rn=L(on,[["__scopeId","data-v-a99f683d"]]),ln={class:"dashboard-header"},cn={class:"header-container"},dn={class:"header-content"},un={class:"title-section"},mn={class:"dashboard-title"},vn={class:"dashboard-subtitle"},hn={class:"header-actions"},gn=["onClick","disabled"],pn={class:"dashboard-container"},fn={key:0,class:"admin-layout"},yn={class:"primary-stats-section"},bn={class:"stats-grid-primary"},kn={class:"secondary-content-section"},wn={class:"content-grid-secondary"},_n={class:"system-health-card priority-high"},$n={class:"pending-approvals-card priority-high"},xn={class:"system-activities-card priority-medium"},An={class:"tertiary-content-section"},Sn={class:"content-grid-tertiary"},Cn={class:"user-activity-card"},Tn={class:"quick-actions-card"},Mn={key:1,class:"manager-layout"},In={class:"team-overview-section"},jn={class:"stats-grid-primary"},Dn={class:"team-management-section"},Pn={class:"content-grid-manager"},Rn={class:"team-members-card priority-high"},Bn={class:"team-performance-card priority-medium"},En={class:"team-activities-card priority-medium"},On={key:2,class:"employee-layout"},Wn={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},qn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ln={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Hn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Nn={class:"sm:flex sm:items-start"},Vn={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},Un={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},zn={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},Fn={class:"space-y-4"},Qn={class:"text-sm text-gray-600 mb-2"},Zn={class:"text-sm text-gray-600 mb-4"},Xn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Yn=["disabled"],Jn={key:1,class:"notification-overlay"},Gn={class:"notification-center"},Kn={class:"notification-icon"},eo={class:"notification-text"},to={class:"notification-message"},so=["onClick"],ao={__name:"Dashboard",props:{totalEmployees:Number,pendingLeaves:Number,pendingTimesheets:Number,recentFeedbacks:Array,teamAttendances:Array,pendingApprovals:Array,myAttendances:Array,myLeaves:Array,myTimesheets:Array,myFeedbacks:Array,adminStats:{type:Object,default:()=>({})},managerStats:{type:Object,default:()=>({})},employeeStats:{type:Object,default:()=>({})},systemActivities:{type:Array,default:()=>[]},teamActivities:{type:Array,default:()=>[]},personalActivities:{type:Array,default:()=>[]},systemHealth:{type:Object,default:()=>({})},recentUserActivity:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({})},teamMembers:{type:Array,default:()=>[]},todaysSchedule:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m",sessions:0,clock_ins:0},recent_activities:[],stats:{weekly_hours:"0h 0m",monthly_hours:"0h 0m",average_daily:"0h 0m"}})}},setup(a){const v=a,{hasRole:l,user:f}=xe(),c=O(!1),w=O([]),x=O(!1),B=O(null),g=O(""),h=O(!1),b=O(null),m=O("approve"),A=$(()=>l("Admin")),k=$(()=>l("Manager")&&!A.value),R=$(()=>{var t;return A.value?"Admin Dashboard":k.value?"Manager Dashboard":`Welcome back, ${((t=f.value)==null?void 0:t.name)||"Employee"}!`}),F=$(()=>A.value?"System overview and administrative management tools.":k.value?"Team overview and management tools.":"Here's your personal workspace and productivity tools."),X=$(()=>[{id:"add-employee",label:"Add Employee",icon:"user-plus",variant:"primary",handler:()=>N.visit(route("employees.create"))},{id:"system-reports",label:"System Reports",icon:"chart-bar",variant:"secondary",handler:()=>N.visit(route("reports.index"))},{id:"manage-departments",label:"Manage Departments",icon:"building-office",variant:"secondary",handler:()=>N.visit(route("departments.index"))},{id:"backup-system",label:"Backup System",icon:"cloud-arrow-up",variant:"ghost",handler:()=>ee({type:"backup-system"})}]);$(()=>[{label:"Dashboard",href:route("dashboard"),current:!0}]);const Q=$(()=>{const t=[];return A.value&&t.push({id:"system-settings",label:"System Settings",icon:"cog-6-tooth",variant:"secondary",handler:()=>{console.log("Navigate to system settings")}}),(A.value||k.value)&&t.push({id:"reports",label:"View Reports",icon:"chart-bar",variant:"secondary",handler:()=>{console.log("Navigate to reports")}}),t.push({id:"refresh",label:"Refresh",icon:"arrow-path",variant:"ghost",handler:Y,disabled:c.value}),t}),U=t=>`action-button ${t}`,se=t=>({"cog-6-tooth":"CogIcon","chart-bar":"ChartBarIcon","arrow-path":"ArrowPathIcon","user-plus":"UserPlusIcon","building-office":"BuildingOfficeIcon","cloud-arrow-up":"CloudArrowUpIcon"})[t]||"QuestionMarkCircleIcon",ae=t=>({success:"CheckCircleIcon",error:"XCircleIcon",warning:"ExclamationTriangleIcon",info:"InformationCircleIcon"})[t]||"InformationCircleIcon",Y=async()=>{c.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),E("Dashboard refreshed successfully","success")}finally{c.value=!1}},E=(t,s="info",o=4e3)=>{const y=Date.now(),_={id:y,message:t,type:s,visible:!0};w.value.push(_),setTimeout(()=>{ne(y)},o)},ne=t=>{const s=w.value.findIndex(o=>o.id===t);s>-1&&w.value.splice(s,1)},he=t=>{const s="notification-toast",o={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${s} ${o[t]||o.info}`},ge=t=>{console.log("ğŸ¯ Opening approval modal for:",t),console.log("ğŸ¯ Modal state before:",h.value),b.value=t,m.value="approve",h.value=!0,console.log("ğŸ¯ Modal state after:",h.value),console.log("ğŸ¯ Selected approval:",b.value)},oe=t=>{console.log("ğŸš« Opening rejection modal for:",t),console.log("ğŸš« Modal state before:",h.value),b.value=t,m.value="reject",h.value=!0,console.log("ğŸš« Modal state after:",h.value),console.log("ğŸš« Selected approval:",b.value)},re=async()=>{var o,y,_,u,T;if(!g.value.trim()){E("âŒ Please provide a reason for rejection","error");return}const t=B.value,s=g.value.trim();try{console.log("ğŸš« Rejecting approval item:",t),console.log("ğŸ“‹ Approval type:",t.type),console.log("ğŸ†” Approval ID:",t.id),console.log("ğŸ’¬ Rejection reason:",s),x.value=!1,E("Processing rejection...","info");let M,D;const C={headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};if(t.type==="timesheet"?(D=`/timesheets/${t.id}/reject`,M=await V.post(D,{comments:s},C)):t.type==="leave"||t.type==="Leave Request"?(D=`/leaves/${t.id}/reject`,M=await V.post(D,{comments:s},C)):(D=`/${t.type}s/${t.id}/reject`,M=await V.post(D,{comments:s},C)),console.log("ğŸ“¡ Making request to:",D),console.log("âœ… Response received:",M.data),M.data.success){const P=t.type==="Leave Request"?"Leave request":t.type;console.log(`${P} rejected successfully`),E(`âœ… ${P} rejected successfully!`,"success"),setTimeout(()=>{N.reload({only:["pendingApprovals","adminStats","managerStats"],preserveScroll:!0})},100)}else console.warn("âš ï¸ Rejection succeeded but response indicates failure:",M.data),E("âš ï¸ Rejection may not have been processed correctly","warning")}catch(M){console.error("âŒ Error rejecting item:",M),console.error("ğŸ“„ Error response:",(o=M.response)==null?void 0:o.data),console.error("ğŸ”¢ Error status:",(y=M.response)==null?void 0:y.status);let D="Failed to reject item. Please try again.";((_=M.response)==null?void 0:_.status)===403?D="You are not authorized to reject this request. Please contact your administrator.":(T=(u=M.response)==null?void 0:u.data)!=null&&T.message&&(D=M.response.data.message),E("âŒ "+D,"error")}},ie=()=>{x.value=!1,B.value=null,g.value=""},le=()=>{h.value=!1,b.value=null,m.value="approve"},pe=async t=>{var _,u,T,M,D;const{approval:s,action:o,comments:y}=t;try{console.log(`ğŸ¯ ${o==="approve"?"Approving":"Rejecting"} approval item:`,s),console.log("ğŸ“‹ Approval type:",s.type),console.log("ğŸ†” Approval ID:",s.id),console.log("ğŸ’¬ Comments:",y),le(),E(`Processing ${o}...`,"info");let C,P;const J={headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};if(s.type==="timesheet"?(P=`/timesheets/${s.id}/${o}`,C=await V.post(P,{comments:y||`${o==="approve"?"Approved":"Rejected"} from dashboard`},J)):s.type==="leave"||s.type==="Leave Request"?(P=`/leaves/${s.id}/${o}`,C=await V.post(P,{comments:y||`${o==="approve"?"Approved":"Rejected"} from dashboard`},J)):(P=`/${s.type}s/${s.id}/${o}`,C=await V.post(P,{comments:y||`${o==="approve"?"Approved":"Rejected"} from dashboard`},J)),console.log("ğŸ“¡ Making request to:",P),console.log("âœ… Response received:",C.data),C.data.success){const de=s.type==="Leave Request"?"Leave request":s.type,ue=o==="approve"?"approved":"rejected";console.log(`${de} ${ue} successfully`),E(`âœ… ${de} ${ue} successfully!`,"success"),setTimeout(()=>{N.reload({only:["pendingApprovals","adminStats","managerStats"],preserveScroll:!0})},100)}else console.warn(`âš ï¸ ${o} succeeded but response indicates failure:`,C.data),E(`âš ï¸ ${o} may not have been processed correctly`,"warning")}catch(C){console.error(`âŒ Error ${o}ing item:`,C),console.error("ğŸ“„ Error response:",(_=C.response)==null?void 0:_.data),console.error("ğŸ”¢ Error status:",(u=C.response)==null?void 0:u.status);let P=`Failed to ${o} item. Please try again.`;((T=C.response)==null?void 0:T.status)===403?P=`You are not authorized to ${o} this request. Please contact your administrator.`:(D=(M=C.response)==null?void 0:M.data)!=null&&D.message&&(P=C.response.data.message),E("âŒ "+P,"error")}},ee=async t=>{var s;console.log("Dashboard action:",t),c.value=!0;try{switch(t.type){case"take-break":console.log("Taking break..."),(await V.post("/api/attendance/break-start")).data.success&&(console.log("Break started successfully"),E("Break started successfully!","success"),N.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0}));break;case"end-break":console.log("Ending break..."),(await V.post("/api/attendance/break-end")).data.success&&(console.log("Break ended successfully"),E("Break ended successfully!","success"),N.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0}));break;case"quick-action":(s=t.data)!=null&&s.route&&N.visit(route(t.data.route));break;case"view-calendar":console.log("Navigate to calendar");break;case"view-all-approvals":N.visit(route("timesheets.pending-approvals"));break;default:console.log("Unhandled action type:",t.type)}}catch(o){console.error("Error handling action:",o),E("Action failed. Please try again.","error")}finally{c.value=!1}},fe=t=>{console.log("Viewing member:",t)},ye=t=>{console.log("Sending message to:",t)},ce=async()=>{var t,s;c.value=!0;try{console.log("Clock in/out action");const o=v.currentAttendance.clocked_in,y=o?"/api/attendance/clock-out":"/api/attendance/clock-in";console.log(`Making ${o?"clock out":"clock in"} request to ${y}`);const _=await V.post(y,{location:"Dashboard"});if(_.data.success){console.log("Clock in/out successful:",_.data),console.log(_.data.message);try{const u=new CustomEvent("attendance-state-changed",{detail:{clockedIn:!o,onBreak:!1,clockInTime:o?null:new Date().toISOString(),timestamp:Date.now()}});window.dispatchEvent(u),localStorage.setItem("attendance-update",Date.now().toString()),setTimeout(()=>localStorage.removeItem("attendance-update"),100)}catch(u){console.warn("Failed to broadcast attendance update:",u)}N.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0})}else console.error("Clock in/out failed:",_.data.message)}catch(o){console.error("Error with clock in/out:",o),((t=o.response)==null?void 0:t.status)===400?console.error("Bad request:",o.response.data.message):((s=o.response)==null?void 0:s.status)===401?console.error("Unauthorized - please log in again"):console.error("Network or server error")}finally{c.value=!1}},be=async t=>{try{console.log("Toggling task completion:",t)}catch(s){console.error("Error toggling task:",s)}},r=t=>{console.log("Viewing task:",t)};return(t,s)=>(n(),z(qe,null,{default:G(()=>{var o,y,_;return[e("div",ln,[e("div",cn,[e("div",dn,[e("div",un,[e("h1",mn,d(R.value),1),e("p",vn,d(F.value),1)]),e("div",hn,[(n(!0),i(W,null,q(Q.value,u=>(n(),i("button",{key:u.id,onClick:u.handler,disabled:u.disabled,class:j([U(u.variant),"action-button"])},[(n(),z(K(se(u.icon)),{class:"w-4 h-4"})),H(" "+d(u.label),1)],10,gn))),128))])])])]),e("div",pn,[A.value?(n(),i("div",fn,[e("div",yn,[e("div",bn,[p(Z,{value:a.adminStats.totalEmployees,label:"Total Employees",icon:"users",variant:"primary",trend:a.adminStats.employeeTrend,loading:c.value,size:"large",clickable:!0,route:"employees.index"},null,8,["value","trend","loading"]),p(Z,{value:a.adminStats.pendingLeaves,label:"Pending Approvals",icon:"clock",variant:"warning",trend:a.adminStats.leaveTrend,loading:c.value,size:"large",urgent:a.adminStats.pendingLeaves>10,clickable:!0,route:"leaves.index"},null,8,["value","trend","loading","urgent"]),p(Z,{value:a.adminStats.totalDepartments,label:"Departments",icon:"building",variant:"secondary",trend:a.adminStats.departmentTrend,loading:c.value,size:"large",clickable:!0,route:"departments.index"},null,8,["value","trend","loading"])])]),e("div",kn,[e("div",wn,[e("div",_n,[p(ta,{health:a.systemHealth,loading:c.value,onRefresh:Y},null,8,["health","loading"])]),e("div",$n,[p(pa,{approvals:a.pendingApprovals,loading:c.value,onApprove:ge,onReject:oe,onViewAll:s[0]||(s[0]=()=>t.$inertia.visit(t.route("approvals.index")))},null,8,["approvals","loading"])]),e("div",xn,[p(Aa,{activities:a.systemActivities,loading:c.value,onRefresh:Y},null,8,["activities","loading"])])])]),e("div",An,[e("div",Sn,[e("div",Cn,[p(Ra,{activities:a.recentUserActivity,loading:c.value},null,8,["activities","loading"])]),e("div",Tn,[p(La,{actions:X.value,onAction:ee},null,8,["actions"])])])])])):k.value?(n(),i("div",Mn,[e("div",In,[e("div",jn,[p(Z,{value:a.managerStats.teamSize,label:"Team Members",icon:"users",variant:"primary",trend:a.managerStats.teamTrend,loading:c.value,size:"large",clickable:!0,route:"employees.index"},null,8,["value","trend","loading"]),p(Z,{value:a.managerStats.pendingLeaves,label:"Pending Team Leaves",icon:"calendar",variant:"warning",loading:c.value,size:"large",urgent:a.managerStats.pendingLeaves>5,clickable:!0,route:"leaves.index"},null,8,["value","loading","urgent"]),p(Z,{value:a.managerStats.activeProjects,label:"Active Projects",icon:"folder",variant:"success",trend:a.managerStats.projectTrend,loading:c.value,size:"large",clickable:!0,route:"projects.index"},null,8,["value","trend","loading"]),p(Z,{value:a.managerStats.teamPerformance,label:"Team Performance",icon:"chart-bar",variant:"info",suffix:"%",loading:c.value,size:"large",clickable:!0,route:"reports.index"},null,8,["value","loading"])])]),e("div",Dn,[e("div",Pn,[e("div",Rn,[p(Ka,{members:a.teamMembers,loading:c.value,onViewMember:fe,onSendMessage:ye},null,8,["members","loading"])]),e("div",Bn,[p(sn,{performance:a.teamPerformance,loading:c.value},null,8,["performance","loading"])]),e("div",En,[p(rn,{activities:a.teamActivities,loading:c.value},null,8,["activities","loading"])])])])])):(n(),i("div",On,[p(_s,{stats:a.employeeStats,"personal-activities":a.personalActivities,"todays-schedule":a.todaysSchedule,"my-tasks":a.myTasks,"recent-feedback":a.recentFeedback,"clocked-in":a.clockedIn,"current-attendance":a.currentAttendance,loading:c.value,onClockInOut:ce,onAction:ee,onToggleTask:be,onViewTask:r},null,8,["stats","personal-activities","todays-schedule","my-tasks","recent-feedback","clocked-in","current-attendance","loading"])]))]),x.value?(n(),i("div",Wn,[e("div",qn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:ie}),e("div",Ln,[e("div",Hn,[e("div",Nn,[e("div",Vn,[p(S(we),{class:"h-6 w-6 text-red-600"})]),e("div",Un,[e("h3",zn," Reject "+d(((o=B.value)==null?void 0:o.title)||"Request"),1),e("div",Fn,[e("div",null,[e("p",Qn,[s[2]||(s[2]=e("strong",null,"Requester:",-1)),H(" "+d((y=B.value)==null?void 0:y.requester),1)]),e("p",Zn,[s[3]||(s[3]=e("strong",null,"Request:",-1)),H(" "+d((_=B.value)==null?void 0:_.description),1)])]),e("div",null,[s[4]||(s[4]=e("label",{for:"rejection-reason",class:"block text-sm font-medium text-gray-700 mb-2"},[H(" Reason for rejection "),e("span",{class:"text-red-500"},"*")],-1)),Be(e("textarea",{id:"rejection-reason","onUpdate:modelValue":s[1]||(s[1]=u=>g.value=u),rows:"4",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a clear reason for rejecting this request...",required:""},null,512),[[Ee,g.value]]),s[5]||(s[5]=e("p",{class:"text-xs text-gray-500 mt-1"}," This reason will be sent to the employee and recorded in the system. ",-1))])])])])]),e("div",Xn,[e("button",{onClick:re,disabled:!g.value.trim(),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Reject Request ",8,Yn),e("button",{onClick:ie,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):I("",!0),p(Fe,{show:h.value,approval:b.value,action:m.value,onClose:le,onSubmit:pe},null,8,["show","approval","action"]),w.value.length>0?(n(),i("div",Jn,[e("div",Gn,[(n(!0),i(W,null,q(w.value,u=>(n(),i("div",{key:u.id,class:j([he(u.type),"notification-card"])},[e("div",Kn,[(n(),z(K(ae(u.type)),{class:"w-5 h-5"}))]),e("div",eo,[e("p",to,d(u.message),1)]),e("button",{onClick:T=>ne(u.id),class:"notification-close"},[p(S(Te),{class:"w-4 h-4"})],8,so)],2))),128))])])):I("",!0)]}),_:1}))}},wo=L(ao,[["__scopeId","data-v-ec00da81"]]);export{wo as default};
