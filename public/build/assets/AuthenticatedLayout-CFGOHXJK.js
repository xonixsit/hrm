import{L as Ve,k as E,o as oe,d as re,c as u,f as x,b as g,p as r,z as Ke,e as F,r as ge,R as Qe,w as J,n as $,T as De,a as K,y as O,S as Re,g as U,u as P,v as be,j as We,F as de,t as ve,Q as ye,s as me,h as at,U as q,V as ft,m as Le,H as Ge,l as Ue,i as pt,W as yt,X as bt,I as wt}from"./app-DAzcyEvr.js";import{u as xe}from"./useAuth-4HHi2Jc_.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as kt}from"./ApplicationLogo-DkJ980bm.js";import{I as X,B as Fe,C as Et,D as Tt}from"./Icon-B-rWLZbN.js";import{a as xt}from"./useAccessibility-jP7VLpRx.js";class Ct{constructor(){this.notifications=Ve([]),this.maxNotifications=E(5),this.defaultDuration=E(5e3),this.positions=Ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=Ve({enabled:!0,volume:.3})}add(t){const e=this.generateId(),o=t.position||"top-right",a={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:o,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(a),this.positions[o].push(a),this.manageQueueSize(o),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(e)},a.duration),e}remove(t){const e=this.notifications.find(l=>l.id===t);if(!e)return;const o=this.notifications.findIndex(l=>l.id===t);o>-1&&this.notifications.splice(o,1);const a=this.positions[e.position],n=a.findIndex(l=>l.id===t);n>-1&&a.splice(n,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(o=>{this.remove(o.id)})}clearType(t){this.notifications.filter(o=>o.type===t).forEach(o=>{this.remove(o.id)})}update(t,e){const o=this.notifications.find(a=>a.id===t);o&&Object.assign(o,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const o=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:a=>{this.remove(o),e(a==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(o=>{const a=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(a),o(!0)},onClose:()=>{o(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(a=>{const n=this.notifications.findIndex(l=>l.id===a.id);n>-1&&this.notifications.splice(n,1)})}}const ae=new Ct,_t={class:"relative"},rt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(s){const t=s,e=l=>{n.value&&l.key==="Escape"&&(n.value=!1)};oe(()=>document.addEventListener("keydown",e)),re(()=>document.removeEventListener("keydown",e));const o=u(()=>({48:"w-48"})[t.width.toString()]),a=u(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=E(!1);return(l,b)=>(g(),x("div",_t,[r("div",{onClick:b[0]||(b[0]=v=>n.value=!n.value)},[ge(l.$slots,"trigger")]),Ke(r("div",{class:"fixed inset-0 z-40",onClick:b[1]||(b[1]=v=>n.value=!1)},null,512),[[Qe,n.value]]),F(De,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:J(()=>[Ke(r("div",{class:$(["absolute z-50 mt-2 rounded-md shadow-lg",[o.value,a.value]]),style:{display:"none"},onClick:b[2]||(b[2]=v=>n.value=!1)},[r("div",{class:$(["rounded-md ring-1 ring-black ring-opacity-5",s.contentClasses])},[ge(l.$slots,"content")],2)],2),[[Qe,n.value]])]),_:3})]))}},Oe={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){return(t,e)=>(g(),K(O(Re),{href:s.href,method:s.method,as:s.as,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:J(()=>[ge(t.$slots,"default")]),_:3},8,["href","method","as"]))}},At={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},St={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},It={class:"flex items-start"},Nt={class:"ml-3 flex-1"},Rt={class:"mt-1 text-sm text-red-700"},Dt={key:0,class:"mt-3"},Lt={__name:"NavigationErrorDisplay",setup(s){const t=E(!1),e=E(""),o=E(null),a=E(null),n=u(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),l=(w,S=null)=>{e.value=w,o.value=S,t.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{v()},1e4)},b=async()=>{if(o.value)try{await o.value()}catch(w){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",w)}v()},v=()=>{t.value=!1,e.value="",o.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return oe(()=>{typeof window<"u"&&(window.showNavigationError=l)}),re(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(w,S)=>t.value?(g(),x("div",At,[r("div",St,[r("div",It,[S[2]||(S[2]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),r("div",Nt,[S[0]||(S[0]=r("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),r("div",Rt,P(e.value),1),o.value?(g(),x("div",Dt,[r("button",{onClick:b,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},P(n.value),1)])):U("",!0)]),r("div",{class:"ml-4 flex-shrink-0"},[r("button",{onClick:v,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},S[1]||(S[1]=[r("span",{class:"sr-only"},"Close",-1),r("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):U("",!0)}},W={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920},Ze={tablet:{min:768},desktop:{min:1024}},He={minimum:44,comfortable:48,large:56};function $t(s){return s===void 0&&(s=typeof window<"u"&&window.innerWidth||1024),s<Ze.tablet.min?"mobile":s<Ze.desktop.min?"tablet":"desktop"}function it(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Mt(s="comfortable"){const t=$t(),e=He[s]||He.comfortable;return t==="mobile"?Math.max(e,He.minimum):e}function st(s,t){let e;return function(...a){const n=()=>{clearTimeout(e),s(...a)};clearTimeout(e),e=setTimeout(n,t)}}function Ot(s,t){let e;return function(...a){e||(s.apply(this,a),e=!0,setTimeout(()=>e=!1,t))}}function Bt(){if(typeof window>"u")return{top:0,right:0,bottom:0,left:0};const s=getComputedStyle(document.documentElement);return{top:parseInt(s.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(s.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(s.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(s.getPropertyValue("env(safe-area-inset-left)"))||0}}function Pt(){if(!it())return;let s=window.innerHeight;const t=()=>{const e=window.innerHeight;s-e>150?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")};return window.addEventListener("resize",st(t,100)),()=>{window.removeEventListener("resize",t),document.body.classList.remove("keyboard-visible")}}const j=E(0),Je=E(0),Xe=E("portrait");function Be(){const s=()=>{typeof window<"u"&&(j.value=window.innerWidth,Je.value=window.innerHeight,Xe.value=window.innerWidth>window.innerHeight?"landscape":"portrait")};s();const t=u(()=>j.value>=W.sm),e=u(()=>j.value>=W.md),o=u(()=>j.value>=W.lg),a=u(()=>j.value>=W.xl),n=u(()=>j.value>=W["2xl"]),l=u(()=>j.value<W.sm),b=u(()=>j.value>=W.sm&&j.value<W.lg),v=u(()=>j.value>=W.lg),w=u(()=>j.value>=W["2xl"]?"2xl":j.value>=W.xl?"xl":j.value>=W.lg?"lg":j.value>=W.md?"md":j.value>=W.sm?"sm":"xs"),S=u(()=>l.value?"mobile":b.value?"tablet":"desktop"),y=u(()=>it()),C=u(()=>typeof window>"u"?1:window.devicePixelRatio||1),A=u(()=>C.value>1),B=u(()=>Bt()),T=E(!1);let h=null,i=null;const d=I=>j.value>=W[I],m=I=>{const te=Object.keys(W),_=te.indexOf(I);if(_===-1)return!1;const p=W[I],G=te[_+1],ne=G?W[G]-1:1/0;return j.value>=p&&j.value<=ne},c=I=>j.value<W[I],f=I=>{const te=Object.keys(W).sort((_,p)=>W[p]-W[_]);for(const _ of te)if(j.value>=W[_]&&I[_]!==void 0)return I[_];return I.xs||I[Object.keys(I)[0]]},V=I=>f(I),D=()=>({sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"})[w.value]||"100%",Q=I=>f(I),R=(I,te="up")=>{const _=W[I];if(!_)return"";switch(te){case"up":return`(min-width: ${_}px)`;case"down":return`(max-width: ${_-1}px)`;case"only":const p=Object.keys(W).find(ne=>W[ne]>_),G=p?W[p]-1:9999;return`(min-width: ${_}px) and (max-width: ${G}px)`;default:return`(min-width: ${_}px)`}};let M;const H=()=>{clearTimeout(M),M=setTimeout(s,100)},z=(I="comfortable")=>Mt(I),k=I=>f(I,j.value);oe(()=>{if(s(),typeof window<"u"){window.addEventListener("resize",H),window.addEventListener("orientationchange",s),h=Pt();const I=()=>{T.value=document.body.classList.contains("keyboard-visible")};i=new MutationObserver(I),i.observe(document.body,{attributes:!0,attributeFilter:["class"]})}}),re(()=>{typeof window<"u"&&(window.removeEventListener("resize",H),window.removeEventListener("orientationchange",s)),clearTimeout(M),h&&typeof h=="function"&&h(),i&&i.disconnect()});const L=()=>{};return{windowWidth:u(()=>j.value),windowHeight:u(()=>Je.value),orientation:u(()=>Xe.value),isSmUp:t,isMdUp:e,isLgUp:o,isXlUp:a,is2XlUp:n,isMobile:l,isTablet:b,isDesktop:v,isTouchDevice:y,isHighDensity:A,currentBreakpoint:w,deviceType:S,pixelRatio:C,safeAreaInsets:B,isKeyboardVisible:u(()=>T.value),isBreakpoint:d,isBreakpointOnly:m,isBreakpointDown:c,getResponsiveValue:f,getGridColumns:V,getContainerMaxWidth:D,getResponsiveSpacing:Q,createMediaQuery:R,getOptimalTouchSize:z,getResponsiveValueFromConfig:k,debugResponsive:L,breakpoints:u(()=>W)}}const ke=1024,et=150,tt=200,ie=E(0),Ae=E(0),Se=E(!1),$e=E(null),Ie=E([]),Ne=E("portrait"),Vt=u(()=>Ne.value==="landscape");function lt(){const s=u(()=>ie.value>=ke),t=u(()=>ie.value<ke),e=u(()=>s.value?"desktop":"mobile"),o=u(()=>$e.value?$e.value.mode!==e.value:!1),a=E({currentRoute:null,userPreferences:{},navigationState:{},scrollPosition:0,timestamp:null}),n=()=>{if(typeof window>"u")return;const d=window.innerWidth,m=window.innerHeight,c=d>m?"landscape":"portrait";ie.value!==0&&($e.value={width:ie.value,height:Ae.value,mode:e.value,orientation:Ne.value,timestamp:Date.now()}),ie.value=d,Ae.value=m,Ne.value=c};n();const l=st(()=>{n()},et),b=Ot(()=>{typeof window<"u"&&(ie.value=window.innerWidth,Ae.value=window.innerHeight)},16),v=(d={})=>{const m={currentRoute:window.location.pathname,scrollPosition:window.scrollY||0,timestamp:Date.now(),breakpoint:ie.value,navigationMode:e.value,...d};return a.value=m,Ie.value.unshift(m),Ie.value.length>5&&(Ie.value=Ie.value.slice(0,5)),m},w=()=>{if(!a.value.timestamp)return null;try{return a.value.scrollPosition&&window.scrollTo(0,a.value.scrollPosition),a.value}catch(d){return console.error("[BreakpointManager] Error restoring state:",d),null}},S=async(d,m)=>{if(Se.value){console.warn("[BreakpointManager] Transition already in progress, skipping");return}Se.value=!0;try{const c=v({fromMode:d,toMode:m,transitionReason:"breakpoint_change"});return await We(),await new Promise(f=>setTimeout(f,tt)),w(),c}catch(c){throw console.error("[BreakpointManager] Transition error:",c),c}finally{Se.value=!1}},y=()=>{v({reason:"device_rotation"}),setTimeout(()=>{n(),w()},100)},C=()=>{v({reason:"browser_zoom"}),n()},A=()=>{if(typeof window>"u")return!1;const d=window.innerWidth,m=ie.value,c=Math.abs(d-m);return c>10?(console.warn("[BreakpointManager] Breakpoint conflict detected:",{actual:d,reported:m,difference:c}),n(),!0):!1},B=(d=ie.value)=>Math.abs(d-ke)<5,T=(d=ie.value)=>d-ke,h=()=>({currentWidth:ie.value,currentHeight:Ae.value,navigationBreakpoint:ke,navigationMode:e.value,isTransitioning:Se.value,orientation:Ne.value,isExactBreakpoint:B(),breakpointDistance:T(),hasChanged:o.value,previousState:$e.value}),i=()=>{};return be(e,async(d,m)=>{if(m&&d!==m)try{await S(m,d)}catch(c){console.error("[BreakpointManager] Failed to execute transition:",c)}},{immediate:!1}),oe(()=>{if(n(),typeof window<"u"){window.addEventListener("resize",l),window.addEventListener("resize",b),window.addEventListener("orientationchange",y);let d=window.devicePixelRatio;const m=setInterval(()=>{window.devicePixelRatio!==d&&(d=window.devicePixelRatio,C())},500);re(()=>{window.removeEventListener("resize",l),window.removeEventListener("resize",b),window.removeEventListener("orientationchange",y),clearInterval(m)})}}),{windowWidth:u(()=>ie.value),windowHeight:u(()=>Ae.value),navigationMode:e,isDesktopBreakpoint:s,isMobileBreakpoint:t,isTransitioning:u(()=>Se.value),hasBreakpointChanged:o,orientation:u(()=>Ne.value),isLandscape:Vt,preservedState:u(()=>a.value),stateHistory:u(()=>Ie.value),preserveCurrentState:v,restorePreservedState:w,isExactBreakpoint:B,getBreakpointDistance:T,getBreakpointInfo:h,detectBreakpointConflicts:A,debugBreakpointManager:i,NAVIGATION_BREAKPOINT:ke,DEBOUNCE_DELAY:et,TRANSITION_DELAY:tt}}const fe=E("light"),pe=E("light"),Ee=E(!1),Te={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Pe(){const s=u(()=>Ee.value?pe.value:fe.value),t=u(()=>Te[s.value]),e=u(()=>s.value==="dark"),o=u(()=>s.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(c){return console.warn("Failed to detect system theme:",c),"light"}},n=(c,f=!1)=>{try{const D={theme:C(c)?c:"light",useSystem:!!f,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(D))}catch(V){console.warn("Failed to save theme preference:",V);try{localStorage.removeItem("theme-preference")}catch(D){console.warn("Failed to clear corrupted theme preference:",D)}}},l=c=>{if(!(typeof document>"u"))try{const f=document.documentElement,V=C(c)?c:"light";f.classList.remove("theme-light","theme-dark"),f.classList.add(`theme-${V}`),b(V);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:V,config:Te[V]}}))}catch(D){console.warn("Failed to dispatch theme change event:",D)}}catch(f){console.error("Failed to apply theme:",f);try{const V=document.documentElement;V.classList.remove("theme-light","theme-dark"),V.classList.add("theme-light"),b("light")}catch(V){console.error("Failed to apply fallback theme:",V)}}},b=c=>{if(!(typeof document>"u"))try{const f=document.documentElement;c==="dark"?(f.style.setProperty("--color-neutral-50","#0a0a0a"),f.style.setProperty("--color-neutral-100","#111827"),f.style.setProperty("--color-neutral-200","#262626"),f.style.setProperty("--color-neutral-300","#404040"),f.style.setProperty("--color-neutral-400","#525252"),f.style.setProperty("--color-neutral-500","#6b7280"),f.style.setProperty("--color-neutral-600","#a3a3a3"),f.style.setProperty("--color-neutral-700","#d4d4d4"),f.style.setProperty("--color-neutral-800","#e5e5e5"),f.style.setProperty("--color-neutral-900","#fafafa"),f.style.setProperty("--color-neutral-950","#ffffff")):(f.style.setProperty("--color-neutral-50","#fafafa"),f.style.setProperty("--color-neutral-100","#f5f5f5"),f.style.setProperty("--color-neutral-200","#e5e5e5"),f.style.setProperty("--color-neutral-300","#d4d4d4"),f.style.setProperty("--color-neutral-400","#a3a3a3"),f.style.setProperty("--color-neutral-500","#6b7280"),f.style.setProperty("--color-neutral-600","#525252"),f.style.setProperty("--color-neutral-700","#404040"),f.style.setProperty("--color-neutral-800","#262626"),f.style.setProperty("--color-neutral-900","#111827"),f.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(f){console.warn("Failed to update theme properties:",f)}},v=c=>{l(c)},w=c=>{if(!Te[c]){console.warn(`Theme "${c}" not found`);return}fe.value=c,Ee.value=!1,n(c,!1),v(c)},S=()=>{Ee.value=!0;const c=a();pe.value=c,n(c,!0),v(c)},y=()=>{const c=s.value==="light"?"dark":"light";w(c)},C=c=>Te.hasOwnProperty(c),A=()=>Object.values(Te),B=()=>{},T=()=>{const c=[];if(C(fe.value)||c.push(`Invalid current theme: ${fe.value}`),C(pe.value)||c.push(`Invalid system theme: ${pe.value}`),C(s.value)||c.push(`Invalid active theme: ${s.value}`),typeof document<"u"){const f=document.documentElement,V=f.classList.contains("theme-light"),D=f.classList.contains("theme-dark");!V&&!D&&c.push("No theme class found on document root"),V&&D&&c.push("Multiple theme classes found on document root");const Q=`theme-${s.value}`;f.classList.contains(Q)||c.push(`Expected theme class ${Q} not found on document root`)}return{isValid:c.length===0,issues:c}},h=()=>{if(!(typeof document>"u"))try{const c=document.documentElement;return["theme-light","theme-dark"].forEach(V=>{c.classList.remove(V)}),!0}catch(c){return console.warn("Failed to cleanup theme classes:",c),!1}},i=()=>{try{fe.value="light",pe.value=a(),Ee.value=!1;try{localStorage.removeItem("theme-preference")}catch(c){console.warn("Failed to clear theme preference from localStorage:",c)}return l("light"),!0}catch(c){return console.error("Failed to reset theme to default:",c),!1}},d=()=>{console.warn("Attempting theme system recovery...");try{if(h(),i())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(c){console.error("Theme system recovery failed:",c);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(f){return console.error("Last resort theme recovery failed:",f),!1}}},m=()=>{try{fe.value="light",pe.value="light",Ee.value=!1;try{localStorage.removeItem("theme-preference")}catch(c){console.warn("Failed to clear theme preference:",c)}if(typeof document<"u"){const c=document.documentElement;c.classList.remove("theme-light","theme-dark","dark","light"),c.classList.add("theme-light"),c.style.setProperty("--color-neutral-50","#fafafa"),c.style.setProperty("--color-neutral-100","#f5f5f5"),c.style.setProperty("--color-neutral-200","#e5e5e5"),c.style.setProperty("--color-neutral-300","#d4d4d4"),c.style.setProperty("--color-neutral-400","#a3a3a3"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#525252"),c.style.setProperty("--color-neutral-700","#404040"),c.style.setProperty("--color-neutral-800","#262626"),c.style.setProperty("--color-neutral-900","#111827"),c.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(c){console.error("Theme initialization failed:",c);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(f){console.error("Emergency theme fallback failed:",f)}return null}};return oe(()=>{m()}),be(s,c=>{v(c)}),{currentTheme:u(()=>fe.value),systemTheme:u(()=>pe.value),activeTheme:s,themeConfig:t,isDark:e,isLight:o,isSystemThemePreferred:u(()=>Ee.value),setTheme:w,toggleTheme:y,useSystemTheme:S,validateTheme:C,getAvailableThemes:A,debugThemeState:B,initializeTheme:m,validateThemeState:T,cleanupThemeClasses:h,resetThemeToDefault:i,recoverThemeSystem:d,cleanupAndApplyTheme:l,themes:u(()=>Te)}}const Ft=["data-sidebar-id"],Ht={key:0,class:"flex-1 min-w-0"},zt=["aria-label"],Gt={class:"flex-1 overflow-y-auto py-4"},Ut=["onClick","title"],Wt={key:0,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Yt={key:1,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},jt={key:2,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},qt={key:3,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Kt={key:4,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Qt={key:5,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Zt={key:6,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Jt={key:7,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},Xt={key:8,class:"w-5 h-5 max-w-5 max-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"20px",height:"20px"}},eo={key:0,class:"font-medium truncate"},to={key:1,class:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-blue-600 rounded-l"},oo=["title"],no={key:0,class:"font-medium"},ao=["title"],ro={key:0,class:"font-medium"},io="HR Management",so="Streamline your workforce",lo={__name:"SidebarNavigation",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1}},emits:["navigate","collapse-change"],setup(s,{emit:t}){const e=s,o=t,{roles:a}=xe(),{isDark:n}=Pe(),l=E(!1),b=E(null),v=E(e.initiallyCollapsed),w=()=>{typeof window<"u"&&(l.value=window.innerWidth>=1024)},S=u(()=>{const T=a.value,h=[];return h.push({id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard"}),(T.includes("Admin")||T.includes("Manager"))&&h.push({id:"employees",label:"Employee Management",icon:"users",route:"employees.index"}),h.push({id:"attendance",label:"Time Tracking",icon:"clock",route:"attendances.index"}),h.push({id:"leaves",label:"Leave Management",icon:"calendar",route:"leaves.index"}),(T.includes("Admin")||T.includes("HR"))&&h.push({id:"leave-types",label:"Leave Policies",icon:"clipboard-document-list",route:"leave-types.index"}),h.push({id:"feedbacks",label:"Feedback System",icon:"chat",route:"feedbacks.index"}),h.push({id:"work-reports",label:"Work Reports",icon:"document-text",route:"work-reports.index"}),(T.includes("Admin")||T.includes("Manager"))&&h.push({id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals"}),h}),y=T=>{if(!(T!=null&&T.route)||!e.currentRoute)return!1;if(T.route===e.currentRoute)return!0;const h=T.route.split("."),i=e.currentRoute.split(".");return h[0]===i[0]},C=()=>{v.value=!v.value,localStorage.setItem("sidebar-collapsed",v.value.toString()),o("collapse-change",v.value)},A=T=>{if(o("navigate",{route:T.route,item:T}),T.route)try{typeof window<"u"&&window.route?ye.visit(window.route(T.route)):ye.visit(`/${T.route.replace(".","/")}`)}catch(h){console.warn(`Navigation failed for route: ${T.route}`,h)}},B=()=>{try{typeof window<"u"&&window.route?ye.post(window.route("logout")):ye.post("/logout")}catch(T){console.warn("Logout navigation failed:",T),window.location.href="/logout"}};return oe(()=>{w();const T=Math.random().toString(36).substr(2,9);console.log("[SidebarNavigation] Component mounted, isDesktop:",l.value,"ID:",T),this.$conflictDetector.registerComponent("desktop",T),window.addEventListener("resize",w);const h=localStorage.getItem("sidebar-collapsed");h!==null&&(v.value=h==="true"),o("collapse-change",v.value)}),re(()=>{typeof window<"u"&&window.removeEventListener("resize",w),this.$conflictDetector.unregisterComponent("desktop")}),(T,h)=>l.value?(g(),x("nav",{key:0,ref_key:"sidebarRef",ref:b,class:$(["sidebar-navigation flex flex-col h-screen fixed left-0 top-0 z-40 transition-all duration-300 ease-out",O(n)?"bg-gray-900 border-r border-gray-800":"bg-white border-r border-gray-200",{"w-64":!v.value,"w-16":v.value}]),role:"navigation","aria-label":"Main navigation","data-debug":"sidebar-navigation-component","data-sidebar-id":Math.random().toString(36).substr(2,9)},[r("div",{class:$(["flex items-center justify-between p-4 border-b",O(n)?"border-gray-800":"border-gray-200"])},[v.value?U("",!0):(g(),x("div",Ht,[r("h1",{class:$(["text-lg font-semibold truncate",O(n)?"text-white":"text-gray-900"])},P(io),2),r("p",{class:$(["text-sm truncate",O(n)?"text-gray-400":"text-gray-500"])},P(so),2)])),r("button",{onClick:C,class:$(["p-2 rounded-lg transition-colors",O(n)?"text-gray-400 hover:text-white hover:bg-gray-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"]),"aria-label":v.value?"Expand sidebar":"Collapse sidebar"},[(g(),x("svg",{class:$(["w-5 h-5 transition-transform duration-200",{"rotate-180":v.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[1]||(h[1]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)]),2))],10,zt)],2),r("div",Gt,[r("div",{class:$(["space-y-1",{"px-3":!v.value,"px-2":v.value}])},[(g(!0),x(de,null,ve(S.value,i=>(g(),x("div",{key:i.id},[r("button",{onClick:()=>A(i),class:$(["group w-full flex items-center text-left transition-all duration-200 relative","rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value,"bg-blue-50 text-blue-700":y(i)&&!O(n),"bg-blue-900/20 text-blue-400":y(i)&&O(n),"hover:bg-gray-50":!y(i)&&!O(n),"hover:bg-gray-800":!y(i)&&O(n),"text-gray-700":!y(i)&&!O(n),"text-gray-300":!y(i)&&O(n)}]),title:v.value?i.label:""},[r("div",{class:$(["flex-shrink-0 w-6 h-6 flex items-center justify-center overflow-hidden",{"mr-3":!v.value}]),style:{"min-width":"24px","max-width":"24px","min-height":"24px","max-height":"24px"}},[i.icon==="home"?(g(),x("svg",Wt,h[2]||(h[2]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)]))):i.icon==="users"?(g(),x("svg",Yt,h[3]||(h[3]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):i.icon==="clock"?(g(),x("svg",jt,h[4]||(h[4]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):i.icon==="calendar"?(g(),x("svg",qt,h[5]||(h[5]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):i.icon==="folder"?(g(),x("svg",Kt,h[6]||(h[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):i.icon==="chat"?(g(),x("svg",Qt,h[7]||(h[7]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)]))):i.icon==="document-text"?(g(),x("svg",Zt,h[8]||(h[8]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):i.icon==="check-circle"?(g(),x("svg",Jt,h[9]||(h[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(g(),x("svg",Xt,h[10]||(h[10]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?U("",!0):(g(),x("span",eo,P(i.label),1)),y(i)?(g(),x("div",to)):U("",!0)],10,Ut)]))),128))],2)]),r("div",{class:$(["p-3 border-t space-y-1",O(n)?"border-gray-800":"border-gray-200"])},[r("button",{onClick:h[0]||(h[0]=()=>A({route:"profile.edit",label:"Settings"})),class:$(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value},O(n)?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"]),title:v.value?"Settings":""},[r("div",{class:$(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},h[11]||(h[11]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),2),v.value?U("",!0):(g(),x("span",no,"Settings"))],10,oo),r("button",{onClick:B,class:$(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-3 justify-center":v.value,"px-3 py-2":!v.value},"text-red-600 hover:bg-red-50 hover:text-red-700"]),title:v.value?"Logout":""},[r("div",{class:$(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},h[12]||(h[12]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)]),2),v.value?U("",!0):(g(),x("span",ro,"Logout"))],10,ao)],2)],10,Ft)):U("",!0)}},ot=le(lo,[["__scopeId","data-v-47c4ee13"]]);function co(s,t){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function uo(s,t){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const vo={class:"mobile-navigation-item"},mo={class:"flex-1"},go={class:"flex-1"},ho={__name:"MobileNavigationItem",props:{item:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]},isChild:{type:Boolean,default:!1}},emits:["navigate"],setup(s,{emit:t}){const e=s,o=t,a=u(()=>{if(!e.item.route)return!1;if(e.item.exact)return e.currentRoute===e.item.route;const b=e.item.route.split(".")[0];return e.currentRoute.startsWith(b)});u(()=>!e.item.roles||e.item.roles.length===0?!0:e.item.roles.some(b=>e.userRoles.includes(b)));const n=b=>{const v="inline-flex items-center justify-center";switch(b){case"success":return`${v} bg-green-100 text-green-800`;case"warning":return`${v} bg-yellow-100 text-yellow-800`;case"error":return`${v} bg-red-100 text-red-800`;case"info":return`${v} bg-blue-100 text-blue-800`;default:return`${v} bg-neutral-100 text-neutral-800`}},l=b=>{o("navigate",{item:e.item,route:e.item.route,event:b}),"vibrate"in navigator&&navigator.vibrate(10)};return(b,v)=>(g(),x("div",vo,[s.item.route?(g(),K(O(Re),{key:0,href:b.route(s.item.route),class:$(["nav-link flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 touch-manipulation",[a.value?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 border-l-4 border-primary-500 dark:border-primary-400":"text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100",s.isChild?"text-sm":"text-base"]]),style:{"min-height":"44px"},onClick:l,"aria-label":`Navigate to ${s.item.label}`},{default:J(()=>[F(X,{name:s.item.icon,size:s.isChild?"sm":"md",class:$(["flex-shrink-0 mr-3",a.value?"text-primary-600 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500"])},null,8,["name","size","class"]),r("span",mo,P(s.item.label),1),s.item.badge?(g(),x("span",{key:0,class:$(["ml-2 px-2 py-1 text-xs font-medium rounded-full",n(s.item.badge.type)])},P(s.item.badge.count),3)):U("",!0),s.item.external?(g(),K(X,{key:1,name:"external-link",size:"sm",class:"ml-2 text-neutral-400 dark:text-neutral-500"})):U("",!0)]),_:1},8,["href","class","aria-label"])):(g(),x("div",{key:1,class:$(["nav-item flex items-center px-3 py-3 text-sm font-medium text-neutral-500 dark:text-neutral-400",s.isChild?"text-sm":"text-base"]),style:{"min-height":"44px"}},[F(X,{name:s.item.icon,size:s.isChild?"sm":"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name","size"]),r("span",go,P(s.item.label),1)],2))]))}},nt=le(ho,[["__scopeId","data-v-94500539"]]),fo={class:"mobile-navigation-section"},po={key:0,class:"section-header"},yo=["aria-expanded","aria-label"],bo={class:"flex items-center"},wo={key:0,class:"section-children overflow-hidden"},ko={class:"ml-6 mt-2 space-y-1"},Eo={__name:"MobileNavigationSection",props:{section:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]}},emits:["navigate"],setup(s,{emit:t}){const e=s,o=t,a=E(!1),n=u(()=>e.section.children?e.section.children.filter(w=>!w.roles||w.roles.length===0?!0:w.roles.some(S=>e.userRoles.includes(S))):[]),l=u(()=>n.value.some(w=>w.route?e.currentRoute.startsWith(w.route.split(".")[0]):!1)),b=()=>{a.value=!a.value;const w=`mobile-nav-section-${e.section.id}`;localStorage.setItem(w,a.value.toString())},v=w=>{o("navigate",w)};return oe(()=>{if(l.value)a.value=!0;else{const w=`mobile-nav-section-${e.section.id}`,S=localStorage.getItem(w);S!==null&&(a.value=S==="true")}}),(w,S)=>(g(),x("div",fo,[s.section.children&&s.section.children.length>0?(g(),x("div",po,[r("button",{onClick:b,class:"w-full flex items-center justify-between px-3 py-3 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors duration-200 touch-manipulation",style:{"min-height":"44px"},"aria-expanded":a.value,"aria-label":`Toggle ${s.section.label} section`},[r("div",bo,[F(X,{name:s.section.icon,size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name"]),r("span",null,P(s.section.label),1)]),F(X,{name:"chevron-down",size:"sm",class:$(["text-neutral-400 dark:text-neutral-500 transition-transform duration-200",{"rotate-180":a.value}])},null,8,["class"])],8,yo)])):U("",!0),!s.section.children||s.section.children.length===0?(g(),K(nt,{key:1,item:s.section,"current-route":s.currentRoute,"user-roles":s.userRoles,onNavigate:v},null,8,["item","current-route","user-roles"])):U("",!0),F(De,{name:"section-expand","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-96 opacity-100","leave-from-class":"max-h-96 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:J(()=>[s.section.children&&s.section.children.length>0&&a.value?(g(),x("div",wo,[r("div",ko,[(g(!0),x(de,null,ve(n.value,y=>(g(),K(nt,{key:y.id,item:y,"current-route":s.currentRoute,"user-roles":s.userRoles,"is-child":!0,onNavigate:v},null,8,["item","current-route","user-roles"]))),128))])])):U("",!0)]),_:1})]))}},To=le(Eo,[["__scopeId","data-v-512cc717"]]),xo={sections:[{id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"],order:1},{id:"people",label:"People Management",icon:"users",roles:["Admin","Manager"],order:2,children:[{id:"employees",label:"Employees",icon:"user",route:"employees.index",roles:["Admin","Manager"]},{id:"departments",label:"Departments",icon:"building-office",route:"departments.index",roles:["Admin"]}]},{id:"time",label:"Time Management",icon:"clock",roles:["Admin","Manager","Employee"],order:3,children:[{id:"attendance",label:"Attendance",icon:"calendar-check",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"timesheets",label:"Timesheets",icon:"document-text",route:"timesheets.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar-x",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals",roles:["Admin","Manager"]}]},{id:"projects",label:"Project Management",icon:"folder-open",roles:["Admin","Manager","Employee"],order:4,children:[{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"tasks",label:"Tasks",icon:"clipboard",route:"tasks.index",roles:["Admin","Manager","Employee"]}]},{id:"communication",label:"Communication",icon:"chat",roles:["Admin","Manager","Employee"],order:5,children:[{id:"feedbacks",label:"Feedbacks",icon:"message-square",route:"feedbacks.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Notifications",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}]},{id:"settings",label:"Settings",icon:"cog",roles:["Admin"],order:6,children:[{id:"system-settings",label:"System Settings",icon:"cog",route:"settings.index",roles:["Admin"]},{id:"user-management",label:"User Management",icon:"users",route:"users.index",roles:["Admin"]}]}]};function Co(s=[]){return!Array.isArray(s)||s.length===0?[]:xo.sections.filter(t=>t.roles.some(e=>s.includes(e))).map(t=>{if(t.children){const e=t.children.filter(o=>o.roles.some(a=>s.includes(a)));return e.length>0||t.route?{...t,children:e}:null}return t}).filter(Boolean).sort((t,e)=>(t.order||999)-(e.order||999))}const _o={key:0,class:"mobile-navigation"},Ao={class:"mobile-top-bar fixed top-0 left-0 right-0 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-4 py-3 z-50 shadow-sm"},So={class:"flex items-center justify-between"},Io=["aria-expanded"],No={class:"flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-label":"User menu"},Ro={class:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},Do={class:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700"},Lo={class:"text-sm font-medium text-neutral-900 dark:text-neutral-100"},$o={class:"text-xs text-neutral-500 dark:text-neutral-400"},Mo={class:"drawer-header p-4 border-b border-neutral-200 dark:border-neutral-700"},Oo={class:"flex items-center space-x-3"},Bo={class:"h-12 w-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},Po={class:"flex-1 min-w-0"},Vo={class:"text-base font-medium text-neutral-900 dark:text-neutral-100 truncate"},Fo={class:"text-sm text-neutral-500 dark:text-neutral-400 truncate"},Ho={class:"drawer-navigation p-4"},zo={class:"space-y-2"},Go={class:"drawer-footer border-t border-neutral-200 dark:border-neutral-700 p-4 mt-auto"},Uo={class:"space-y-2"},Wo={class:"ml-3"},Yo={type:"submit",class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Logout"},jo={class:"mobile-bottom-nav fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-700 px-4 py-2 safe-area-pb"},qo={class:"flex items-center justify-around"},Ko={class:"text-xs font-medium"},Qo={__name:"MobileNavigation",props:{currentRoute:{type:String,required:!0}},emits:["navigate","mobile-drawer-toggle"],setup(s,{emit:t}){const e=s,o=t,{roles:a,getUserProperty:n}=xe(),{isDarkMode:l,toggleTheme:b}=Pe(),{isMobile:v}=Be(),w=E(!1),S=E(0),y=E(0),C=E(!1),A=u(()=>n("name","User")),B=u(()=>n("email","")),T=u(()=>{const k=a.value;return k.includes("Admin")?"Administrator":k.includes("Manager")?"Manager":k.includes("Employee")?"Employee":"User"}),h=u(()=>Co(a.value)),i=u(()=>[{id:"dashboard",label:"Home",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"]},{id:"attendance",label:"Time",icon:"clock",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Alerts",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}].filter(k=>k.roles.some(L=>a.value.includes(L)))),d=()=>{w.value=!w.value,o("mobile-drawer-toggle",w.value),w.value?document.body.style.overflow="hidden":document.body.style.overflow=""},m=()=>{w.value=!1,document.body.style.overflow="",o("mobile-drawer-toggle",!1)},c=k=>e.currentRoute.startsWith(k.split(".")[0]),f=k=>{if(m(),o("navigate",k),k.route)try{const L=route(k.route);if(!L)throw new Error(`Route '${k.route}' not found`);ye.visit(L,{onError:I=>{console.error("Navigation error:",I),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:new Error("Navigation failed with errors"),route:k.route,context:"mobile-navigation",errors:I}}))},onException:I=>{console.error("Navigation exception:",I),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:I,route:k.route,context:"mobile-navigation"}}))}})}catch(L){console.warn(`Navigation failed for route: ${k.route}`,L),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:L,route:k.route,context:"mobile-navigation"}}))}},V=k=>{try{return route(k)}catch{return console.warn(`Route '${k}' not found, falling back to dashboard`),route("dashboard")}},D=(k,L)=>{try{if(!route(k.route)){L.preventDefault(),console.warn(`Route '${k.route}' not found`);return}}catch(I){L.preventDefault(),console.warn(`Navigation failed for route: ${k.route}`,I),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:I,route:k.route,context:"mobile-bottom-navigation"}}))}},Q=()=>{m(),ye.post(route("logout"))},R=k=>{S.value=k.touches[0].clientX,C.value=!0},M=k=>{if(!C.value)return;y.value=k.touches[0].clientX,y.value-S.value<-50&&k.preventDefault()},H=k=>{if(!C.value)return;y.value-S.value<-100&&m(),C.value=!1,S.value=0,y.value=0},z=k=>{k.key==="Escape"&&w.value&&m()};return oe(()=>{document.addEventListener("keydown",z),this.$conflictDetector.registerComponent("mobile","mobile-navigation-component")}),re(()=>{document.removeEventListener("keydown",z),document.body.style.overflow="",this.$conflictDetector.unregisterComponent("mobile")}),(k,L)=>O(v)?(g(),x("div",_o,[r("div",Ao,[r("div",So,[r("button",{onClick:d,class:"hamburger-button flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-expanded":w.value,"aria-label":"Toggle navigation menu"},[F(X,{name:w.value?"x":"menu",size:"md",class:"transition-transform duration-200"},null,8,["name"])],8,Io),F(O(Re),{href:k.route("dashboard"),class:"flex items-center touch-manipulation"},{default:J(()=>[F(kt,{class:"h-8 w-8"}),L[1]||(L[1]=r("span",{class:"ml-2 text-lg font-semibold text-neutral-900 dark:text-neutral-100"},"HR Management",-1))]),_:1,__:[1]},8,["href"]),F(rt,{align:"right",width:"48"},{trigger:J(()=>[r("button",No,[r("div",Ro,[F(X,{name:"user",size:"sm",class:"text-primary-600 dark:text-primary-400"})])])]),content:J(()=>[r("div",Do,[r("p",Lo,P(A.value),1),r("p",$o,P(B.value),1)]),F(Oe,{href:k.route("profile.edit")},{default:J(()=>L[2]||(L[2]=[me(" Profile Settings ")])),_:1,__:[2]},8,["href"]),F(Oe,{href:k.route("logout"),method:"post",as:"button"},{default:J(()=>L[3]||(L[3]=[me(" Log Out ")])),_:1,__:[3]},8,["href"])]),_:1})])]),F(De,{name:"mobile-drawer","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-300 ease-in","enter-from-class":"transform -translate-x-full","enter-to-class":"transform translate-x-0","leave-from-class":"transform translate-x-0","leave-to-class":"transform -translate-x-full"},{default:J(()=>[w.value?(g(),x("div",{key:0,class:"mobile-drawer fixed inset-y-0 left-0 z-40 w-80 max-w-sm bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-700 shadow-xl overflow-y-auto",onTouchstart:R,onTouchmove:M,onTouchend:H,role:"navigation","aria-label":"Mobile navigation menu"},[r("div",Mo,[r("div",Oo,[r("div",Bo,[F(X,{name:"user",size:"md",class:"text-primary-600 dark:text-primary-400"})]),r("div",Po,[r("p",Vo,P(A.value),1),r("p",Fo,P(T.value),1)])])]),r("nav",Ho,[r("div",zo,[(g(!0),x(de,null,ve(h.value,I=>(g(),K(To,{key:I.id,section:I,"current-route":s.currentRoute,"user-roles":O(a),onNavigate:f},null,8,["section","current-route","user-roles"]))),128))])]),r("div",Go,[r("div",Uo,[r("button",{onClick:L[0]||(L[0]=(...I)=>O(b)&&O(b)(...I)),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Toggle theme"},[F(X,{name:O(l)?"sun":"moon",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"},null,8,["name"]),r("span",Wo,P(O(l)?"Light Mode":"Dark Mode"),1)]),F(O(Re),{href:k.route("profile.edit"),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},onClick:m},{default:J(()=>[F(X,{name:"cog",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),L[4]||(L[4]=r("span",{class:"ml-3"},"Settings",-1))]),_:1,__:[4]},8,["href"]),r("form",{onSubmit:at(Q,["prevent"]),class:"w-full"},[r("button",Yo,[F(X,{name:"arrow-left",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),L[5]||(L[5]=r("span",{class:"ml-3"},"Logout",-1))])],32)])])],32)):U("",!0)]),_:1}),F(De,{name:"mobile-backdrop","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-300 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:J(()=>[w.value?(g(),x("div",{key:0,class:"mobile-backdrop fixed inset-0 z-30 bg-black bg-opacity-50",onClick:m,onTouchstart:m},null,32)):U("",!0)]),_:1}),r("div",jo,[r("div",qo,[(g(!0),x(de,null,ve(i.value,I=>(g(),K(O(Re),{key:I.id,href:V(I.route),class:$(["bottom-nav-item flex flex-col items-center px-2 py-2 rounded-lg transition-colors duration-200 touch-manipulation",{"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":c(I.route),"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800":!c(I.route)}]),style:{"min-height":"44px","min-width":"44px"},onClick:te=>D(I,te),"aria-label":`Navigate to ${I.label}`},{default:J(()=>[F(X,{name:I.icon,size:"md",class:"mb-1"},null,8,["name"]),r("span",Ko,P(I.label),1)]),_:2},1032,["href","class","onClick","aria-label"]))),128))])])])):U("",!0)}},Zo=le(Qo,[["__scopeId","data-v-073fb9c4"]]),Jo={class:"fallback-header"},Xo={class:"fallback-logo"},en={key:0,class:"fallback-error-indicator"},tn={class:"fallback-menu",role:"menu"},on={class:"fallback-menu-list"},nn=["href","onClick"],an={class:"fallback-menu-text"},rn={class:"fallback-actions"},sn=["disabled"],ln={key:0,class:"fallback-debug"},cn={key:0,class:"debug-details"},un={class:"debug-section"},dn={class:"debug-text"},vn={class:"debug-section"},mn={class:"debug-code"},gn={class:"debug-section"},hn={class:"debug-code"},ze=3,fn={__name:"NavigationFallback",props:{fallbackReason:{type:String,default:"Navigation component failed to load"},errorDetails:{type:Object,default:()=>({})},currentRoute:{type:String,default:""},failedNavigationType:{type:String,validator:s=>["desktop","mobile","unknown"].includes(s),default:"unknown"},showErrorIndicator:{type:Boolean,default:!0},showDebugInfo:{type:Boolean,default:!0},onRetry:{type:Function,default:null}},emits:["navigate","retry","reload","fallback-action"],setup(s,{emit:t}){const e=s,o=t,{hasRole:a}=xe(),n=E(!1),l=E(!1),b=E(0),v=!1,w=u(()=>({"navigation-fallback--desktop":e.failedNavigationType==="desktop","navigation-fallback--mobile":e.failedNavigationType==="mobile","navigation-fallback--with-error":e.showErrorIndicator,"navigation-fallback--debug":l.value&&v})),S=u(()=>({currentRoute:e.currentRoute,failedNavigationType:e.failedNavigationType,fallbackReason:e.fallbackReason,retryCount:b.value,timestamp:Date.now(),windowWidth:typeof window<"u"?window.innerWidth:0,userAgent:typeof navigator<"u"?navigator.userAgent:""})),y=u(()=>[{name:"dashboard",label:"Dashboard",icon:"home",href:"/dashboard",route:"dashboard",roles:[]},{name:"employees",label:"Employees",icon:"users",href:"/employees",route:"employees.index",roles:["admin","manager"]},{name:"projects",label:"Projects",icon:"briefcase",href:"/projects",route:"projects.index",roles:[]},{name:"leaves",label:"Leaves",icon:"calendar-days",href:"/leaves",route:"leaves.index",roles:[]},{name:"feedbacks",label:"Feedbacks",icon:"chat-bubble-left-right",href:"/feedbacks",route:"feedbacks.index",roles:[]}].filter(d=>d.roles.length===0?!0:d.roles.some(m=>a(m)))),C=i=>!i||!e.currentRoute?!1:e.currentRoute.startsWith(i),A=(i,d)=>{try{d.preventDefault(),o("navigate",{item:i,route:i.route,href:i.href,source:"fallback"}),ye.visit(i.href)}catch(m){console.error("[NAVIGATION FALLBACK] Navigation failed:",m),window.location.href=i.href}},B=async()=>{if(!(n.value||b.value>=ze)){n.value=!0,b.value++;try{o("retry",{attempt:b.value,maxRetries:ze,failedNavigationType:e.failedNavigationType}),e.onRetry?await e.onRetry():(await new Promise(i=>setTimeout(i,1e3)),window.location.reload())}catch(i){console.error("[NAVIGATION FALLBACK] Retry failed:",i),b.value>=ze&&alert("Maximum retry attempts reached. Please reload the page manually.")}finally{n.value=!1}}},T=()=>{o("reload"),window.location.reload()},h=()=>{l.value=!l.value};return oe(()=>{o("fallback-action",{action:"activated",reason:e.fallbackReason,failedType:e.failedNavigationType,timestamp:Date.now()}),typeof window<"u"&&window.reportError&&window.reportError({type:"navigation_fallback_activated",reason:e.fallbackReason,failedNavigationType:e.failedNavigationType,errorDetails:e.errorDetails,timestamp:Date.now()})}),re(()=>{o("fallback-action",{action:"deactivated",retryCount:b.value,timestamp:Date.now()})}),(i,d)=>(g(),x("div",{class:$(["navigation-fallback",w.value]),"data-navigation-type":"fallback",role:"navigation","aria-label":"Fallback Navigation"},[r("div",Jo,[r("div",Xo,[F(X,{name:"building-office",size:"lg",class:"text-primary-600"}),d[0]||(d[0]=r("span",{class:"fallback-title"},"HR Management",-1))]),s.showErrorIndicator?(g(),x("div",en,[F(X,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),d[1]||(d[1]=r("span",{class:"sr-only"},"Navigation Error",-1))])):U("",!0)]),r("nav",tn,[r("ul",on,[(g(!0),x(de,null,ve(y.value,m=>(g(),x("li",{key:m.name,class:"fallback-menu-item"},[r("a",{href:m.href,class:$(["fallback-menu-link",{"fallback-menu-link--active":C(m.route)}]),role:"menuitem",onClick:c=>A(m,c)},[m.icon?(g(),K(X,{key:0,name:m.icon,size:"sm",class:"fallback-menu-icon"},null,8,["name"])):U("",!0),r("span",an,P(m.label),1)],10,nn)]))),128))])]),r("div",rn,[r("button",{onClick:B,disabled:n.value,class:"fallback-action fallback-action--primary",type:"button"},[n.value?(g(),K(X,{key:0,name:"loading",size:"sm",class:"animate-spin mr-2"})):(g(),K(X,{key:1,name:"arrow-path",size:"sm",class:"mr-2"})),me(" "+P(n.value?"Retrying...":"Retry Navigation"),1)],8,sn),r("button",{onClick:T,class:"fallback-action fallback-action--secondary",type:"button"},[F(X,{name:"arrow-path",size:"sm",class:"mr-2"}),d[2]||(d[2]=me(" Reload Page "))])]),s.showDebugInfo&&v?(g(),x("div",ln,[r("button",{onClick:h,class:"debug-toggle",type:"button"},[F(X,{name:"bug-ant",size:"sm",class:"mr-1"}),me(" "+P(l.value?"Hide":"Show")+" Debug Info ",1)]),l.value?(g(),x("div",cn,[r("div",un,[d[3]||(d[3]=r("h4",{class:"debug-heading"},"Fallback Reason",-1)),r("p",dn,P(s.fallbackReason),1)]),r("div",vn,[d[4]||(d[4]=r("h4",{class:"debug-heading"},"Error Details",-1)),r("pre",mn,P(JSON.stringify(s.errorDetails,null,2)),1)]),r("div",gn,[d[5]||(d[5]=r("h4",{class:"debug-heading"},"Navigation State",-1)),r("pre",hn,P(JSON.stringify(S.value,null,2)),1)])])):U("",!0)])):U("",!0)],2))}},ct=le(fn,[["__scopeId","data-v-183ff890"]]);function pn(){const{getAuthError:s,validateAuthState:t}=xe(),e=E([]),o=50,a={CRITICAL:"critical",WARNING:"warning",INFO:"info",DEBUG:"debug"},n={AUTH_DATA:"auth_data",ROLE_CHECK:"role_check",NAVIGATION:"navigation",COMPONENT:"component",NETWORK:"network"},l=(i,d={})=>{const m=new Date().toISOString(),c=s(),f={id:`auth_error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:m,level:d.level||a.WARNING,category:d.category||n.COMPONENT,message:i.message||"Unknown authentication error",error:{name:i.name,message:i.message,stack:i.stack},context:{component:d.component||"Unknown",operation:d.operation||"Unknown",userAgent:navigator.userAgent,url:window.location.href,...d},authState:c,sessionInfo:{hasLocalStorage:typeof localStorage<"u",hasSessionStorage:typeof sessionStorage<"u",cookiesEnabled:navigator.cookieEnabled}};return e.value.unshift(f),e.value.length>o&&(e.value=e.value.slice(0,o)),f},b=(i,d={})=>{const m=l(i,d);return m.level,a.CRITICAL,m},v=(i,d,m={})=>b(i,{...m,category:n.ROLE_CHECK,operation:`checking role: ${d}`,level:a.WARNING}),w=(i,d,m={})=>b(i,{...m,category:n.NAVIGATION,operation:`navigating to: ${d}`,level:a.CRITICAL}),S=(i,d,m={})=>b(i,{...m,category:n.COMPONENT,component:d,operation:"component initialization",level:a.CRITICAL}),y=(i,d,m={})=>b(i,{...m,category:n.NETWORK,operation:`API request to: ${d}`,level:a.WARNING}),C=async(i,d={})=>{try{if(!t()&&d.requireAuth!==!1)throw new Error("Authentication state is invalid");return await i()}catch(m){if(b(m,{...d,operation:d.operation||"safe execution"}),d.fallback!==void 0)return d.fallback;if(d.suppressError)return null;throw m}},A=u(()=>{const i={total:e.value.length,byLevel:{},byCategory:{},recent:e.value.slice(0,10),oldestError:e.value[e.value.length-1],newestError:e.value[0]};return Object.values(a).forEach(d=>{i.byLevel[d]=e.value.filter(m=>m.level===d).length}),Object.values(n).forEach(d=>{i.byCategory[d]=e.value.filter(m=>m.category===d).length}),i}),B=()=>{e.value=[]},T=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,stats:A.value,errors:e.value}),h={};return{handleAuthError:b,handleRoleError:v,handleNavigationError:w,handleComponentError:S,handleNetworkError:y,safeExecute:C,createErrorReport:l,errorHistory:u(()=>e.value),getErrorStats:A,clearErrorHistory:B,exportErrorHistory:T,ERROR_LEVELS:a,ERROR_CATEGORIES:n,...h}}const yn={class:"navigation-error-boundary"},bn=5e3,wn={__name:"NavigationErrorBoundary",props:{currentRoute:{type:String,required:!0},navigationType:{type:String,validator:s=>["desktop","mobile","controller"].includes(s),default:"controller"},componentId:{type:String,default:()=>`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},maxRetries:{type:Number,default:3},onError:{type:Function,default:null},onRecover:{type:Function,default:null}},emits:["error","recover","fallback-activated","fallback-deactivated","navigation-attempt","conflict-detected"],setup(s,{expose:t,emit:e}){const o=s,a=e,{handleNavigationError:n,handleComponentError:l,ERROR_LEVELS:b,ERROR_CATEGORIES:v}=pn(),w=E(!1),S=E(null),y=E({}),C=E(0),A=E(!1),B=E(null),T=E([]),h=E([]),i=!1,d=u(()=>{var G;if(!S.value)return"Navigation component failed to load";const p=((G=S.value.message)==null?void 0:G.toLowerCase())||"";return p.includes("chunk")||p.includes("loading")?"Navigation component failed to load. This may be due to a network issue.":p.includes("permission")||p.includes("unauthorized")?"You don't have permission to access this navigation. Please contact your administrator.":p.includes("auth")||p.includes("session")?"Your session has expired. Please log in again.":p.includes("network")||p.includes("fetch")?"Network error while loading navigation. Please check your connection.":p.includes("conflict")||p.includes("multiple")?"Navigation conflict detected. Multiple navigation components are active.":p.includes("breakpoint")||p.includes("responsive")?"Navigation responsive behavior error. The navigation may not match your screen size.":"Navigation system encountered an error. Using fallback navigation."}),m=u(()=>o.navigationType);u(()=>w.value&&(C.value>=o.maxRetries||A.value===!1));const c=_=>{var ne,he;const p=((ne=_.message)==null?void 0:ne.toLowerCase())||"",G=((he=_.stack)==null?void 0:he.toLowerCase())||"";return p.includes("conflict")||p.includes("multiple")?"navigation_conflict":p.includes("breakpoint")||p.includes("responsive")?"responsive_error":p.includes("chunk")||p.includes("loading")?"component_loading":p.includes("permission")||p.includes("auth")?"authorization_error":p.includes("network")||p.includes("fetch")?"network_error":G.includes("vue")||G.includes("component")?"component_error":"unknown_navigation_error"},f=(_,p,G)=>{var Ce;const ne=Date.now();if(B.value&&ne-B.value<bn){const we=T.value[0];if(we&&we.message===_.message)return!1}B.value=ne;const he=c(_),ce={id:`nav_error_${ne}_${Math.random().toString(36).substr(2,9)}`,timestamp:ne,type:he,message:_.message,stack:_.stack,name:_.name,navigationType:o.navigationType,componentId:o.componentId,currentRoute:o.currentRoute,retryCount:C.value,windowWidth:window.innerWidth,userAgent:navigator.userAgent,errorInfo:G,instance:((Ce=p==null?void 0:p.$options)==null?void 0:Ce.name)||"Unknown"};switch(T.value.unshift(ce),T.value.length>20&&(T.value=T.value.slice(0,20)),G.value=ce,y.value={...ce,conflictStatus:q.getStatus(),navigationState:{hasError:w.value,retryCount:C.value,navigationType:o.navigationType,componentId:o.componentId}},w.value=!0,he){case"navigation_conflict":V(ce);break;case"component_loading":D();break;case"authorization_error":Q(ce);break;default:R(ce)}if(o.onError)try{o.onError(ce)}catch(we){console.error("[NAVIGATION ERROR BOUNDARY] Custom error handler failed:",we)}return te(ce),a("error",ce),!1},V=_=>{const p=q.detectConflicts();p.length>0&&(h.value.unshift({timestamp:Date.now(),conflicts:p,errorReport:_}),a("conflict-detected",{conflicts:p,errorReport:_}),q.resolveConflicts())},D=_=>{C.value<o.maxRetries&&setTimeout(()=>{w.value&&M()},2e3)},Q=_=>{n(new Error(_.message),o.currentRoute,{component:`NavigationErrorBoundary-${o.navigationType}`,navigationType:o.navigationType,level:b.CRITICAL,category:v.NAVIGATION})},R=_=>{l(new Error(_.message),`NavigationErrorBoundary-${o.navigationType}`,{navigationType:o.navigationType,componentId:o.componentId,level:b.WARNING,category:v.COMPONENT})},M=async()=>{if(!(A.value||C.value>=o.maxRetries)){A.value=!0,C.value++;try{o.onRecover?await o.onRecover():await new Promise(_=>setTimeout(_,1e3)),H(),a("recover",{attempt:C.value,navigationType:o.navigationType,componentId:o.componentId})}catch(_){console.error("[NAVIGATION ERROR BOUNDARY] Recovery failed:",_);const p={...S.value,retryError:_.message,retryAttempt:C.value,timestamp:Date.now()};y.value=p,C.value>=o.maxRetries&&a("fallback-activated",{reason:"max_retries_reached",errorReport:p})}finally{A.value=!1}}},H=()=>{w.value=!1,S.value=null,y.value={},C.value=0,A.value=!1},z=_=>{a("navigation-attempt",{..._,source:"fallback",errorContext:S.value})},k=_=>{M()},L=()=>{window.location.reload()},I=_=>{_.action==="activated"?a("fallback-activated",{reason:"user_activated",errorReport:S.value}):_.action==="deactivated"&&a("fallback-deactivated",{errorReport:S.value})},te=_=>{if(typeof window<"u"&&window.reportError)try{window.reportError({type:"navigation_error",category:"navigation_boundary",..._})}catch(p){console.error("[NAVIGATION ERROR BOUNDARY] Failed to report error:",p)}_.type};return oe(()=>{q.registerComponent(o.componentId,o.navigationType,{currentRoute:o.currentRoute,boundaryActive:!0,timestamp:Date.now()})}),re(()=>{q.unregisterComponent(o.componentId)}),ft((_,p,G)=>f(_,p,G)),oe(()=>{const _=G=>{const ne=new Error(`Navigation conflict: ${G.detail.message}`);f(ne,null,{type:"conflict_event",detail:G.detail})},p=G=>{G.detail.componentId===o.componentId&&H()};window.addEventListener("navigation-conflict",_),window.addEventListener("navigation-conflict-cleanup",p),window._navigationErrorBoundaryCleanup=()=>{window.removeEventListener("navigation-conflict",_),window.removeEventListener("navigation-conflict-cleanup",p)}}),re(()=>{window._navigationErrorBoundaryCleanup&&(window._navigationErrorBoundaryCleanup(),delete window._navigationErrorBoundaryCleanup)}),be(()=>o.currentRoute,(_,p)=>{_!==p&&w.value&&H()}),t({hasError:w,errorInfo:S,retryCount:C,resetError:H,handleRetry:M,getErrorHistory:()=>T.value,getConflictHistory:()=>h.value,getStatus:()=>{var _;return{hasError:w.value,errorType:(_=S.value)==null?void 0:_.type,retryCount:C.value,isRetrying:A.value,navigationType:o.navigationType,componentId:o.componentId}}}),(_,p)=>(g(),x("div",yn,[w.value?(g(),K(ct,{key:1,"fallback-reason":d.value,"error-details":y.value,"current-route":s.currentRoute,"failed-navigation-type":m.value,"show-error-indicator":!0,"show-debug-info":i,"on-retry":M,onNavigate:z,onRetry:k,onReload:L,onFallbackAction:I},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):ge(_.$slots,"default",{key:0},void 0,!0)]))}},kn=le(wn,[["__scopeId","data-v-7c3ddc96"]]);class En{constructor(){this.isEnabled=E(!0),this.events=E([]),this.metrics=E({totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()}),this.maxEventHistory=1e3,this.performanceMarks=new Map,this.EVENT_TYPES={NAVIGATION_LOAD:"navigation_load",NAVIGATION_ERROR:"navigation_error",CONFLICT_DETECTED:"conflict_detected",CONFLICT_RESOLVED:"conflict_resolved",FALLBACK_ACTIVATED:"fallback_activated",FALLBACK_DEACTIVATED:"fallback_deactivated",COMPONENT_REGISTERED:"component_registered",COMPONENT_UNREGISTERED:"component_unregistered",NAVIGATION_SWITCH:"navigation_switch",RETRY_ATTEMPT:"retry_attempt",PERFORMANCE_MARK:"performance_mark",USER_ACTION:"user_action",BREAKPOINT_CHANGE:"breakpoint_change"},this.SEVERITY_LEVELS={CRITICAL:"critical",HIGH:"high",MEDIUM:"medium",LOW:"low",INFO:"info"},this.setupMonitoring()}logEvent(t,e={},o=this.SEVERITY_LEVELS.INFO){if(!this.isEnabled.value)return;const a=Date.now(),n={id:`event_${a}_${Math.random().toString(36).substr(2,9)}`,type:t,severity:o,timestamp:a,data:{...e,windowWidth:window.innerWidth,url:window.location.href,userAgent:navigator.userAgent},sessionId:this.getSessionId(),sequence:this.metrics.value.totalEvents+1};return this.events.value.unshift(n),this.events.value.length>this.maxEventHistory&&(this.events.value=this.events.value.slice(0,this.maxEventHistory)),this.updateMetrics(n),this.reportEvent(n),n}logNavigationLoad(t,e,o=null){const a={componentType:t,componentId:e,loadTime:o,timestamp:Date.now()};return o&&this.updateLoadTimeMetrics(o),this.logEvent(this.EVENT_TYPES.NAVIGATION_LOAD,a,this.SEVERITY_LEVELS.INFO)}logNavigationError(t,e={}){const o={errorMessage:t.message,errorStack:t.stack,errorName:t.name,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_ERROR,o,this.SEVERITY_LEVELS.HIGH)}logConflict(t,e=!1){const o=e?this.EVENT_TYPES.CONFLICT_RESOLVED:this.EVENT_TYPES.CONFLICT_DETECTED,a={conflicts:t.map(n=>({id:n.id,type:n.type,severity:n.severity,message:n.message})),conflictCount:t.length,resolved:e,timestamp:Date.now()};return this.logEvent(o,a,e?this.SEVERITY_LEVELS.MEDIUM:this.SEVERITY_LEVELS.HIGH)}logFallback(t,e="",o={}){const a=t?this.EVENT_TYPES.FALLBACK_ACTIVATED:this.EVENT_TYPES.FALLBACK_DEACTIVATED,n={activated:t,reason:e,errorContext:o,timestamp:Date.now()};return this.logEvent(a,n,t?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logComponentLifecycle(t,e,o,a={}){const n=t?this.EVENT_TYPES.COMPONENT_REGISTERED:this.EVENT_TYPES.COMPONENT_UNREGISTERED,l={registered:t,componentId:e,componentType:o,metadata:a,timestamp:Date.now()};return this.logEvent(n,l,this.SEVERITY_LEVELS.INFO)}logNavigationSwitch(t,e,o="",a={}){const n={fromType:t,toType:e,reason:o,preservedData:a,windowWidth:window.innerWidth,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_SWITCH,n,this.SEVERITY_LEVELS.INFO)}logRetryAttempt(t,e,o={}){const a={attempt:t,maxAttempts:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.RETRY_ATTEMPT,a,t>=e?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logUserAction(t,e,o={}){const a={action:t,target:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.USER_ACTION,a,this.SEVERITY_LEVELS.INFO)}logBreakpointChange(t,e,o,a){const n={oldWidth:t,newWidth:e,oldType:o,newType:a,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.BREAKPOINT_CHANGE,n,this.SEVERITY_LEVELS.INFO)}startPerformanceMark(t){const e=performance.now();return this.performanceMarks.set(t,{startTime:e}),e}endPerformanceMark(t,e={}){const o=this.performanceMarks.get(t);if(!o)return console.warn(`[NAVIGATION MONITOR] Performance mark not found: ${t}`),null;const a=performance.now(),n=a-o.startTime;this.performanceMarks.delete(t);const l={markName:t,duration:n,startTime:o.startTime,endTime:a,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.PERFORMANCE_MARK,l,this.SEVERITY_LEVELS.INFO),n}updateMetrics(t){switch(this.metrics.value.totalEvents++,t.type){case this.EVENT_TYPES.NAVIGATION_ERROR:this.metrics.value.errorCount++;break;case this.EVENT_TYPES.CONFLICT_DETECTED:this.metrics.value.conflictCount++;break;case this.EVENT_TYPES.FALLBACK_ACTIVATED:this.metrics.value.fallbackActivations++;break;case this.EVENT_TYPES.RETRY_ATTEMPT:this.metrics.value.retryAttempts++;break;case this.EVENT_TYPES.NAVIGATION_SWITCH:this.metrics.value.navigationSwitches++;break}}updateLoadTimeMetrics(t){const e=this.metrics.value.averageLoadTime,o=this.events.value.filter(a=>a.type===this.EVENT_TYPES.NAVIGATION_LOAD&&a.data.loadTime).length;o===1?this.metrics.value.averageLoadTime=t:this.metrics.value.averageLoadTime=(e*(o-1)+t)/o}getSessionId(){return this.sessionId||(this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),this.sessionId}logToConsole(t){const e={[this.SEVERITY_LEVELS.CRITICAL]:console.error,[this.SEVERITY_LEVELS.HIGH]:console.warn,[this.SEVERITY_LEVELS.MEDIUM]:console.warn,[this.SEVERITY_LEVELS.LOW]:console.info,[this.SEVERITY_LEVELS.INFO]:console.log}[t.severity]||console.log,o={[this.EVENT_TYPES.NAVIGATION_LOAD]:"",[this.EVENT_TYPES.NAVIGATION_ERROR]:"",[this.EVENT_TYPES.CONFLICT_DETECTED]:"",[this.EVENT_TYPES.CONFLICT_RESOLVED]:"",[this.EVENT_TYPES.FALLBACK_ACTIVATED]:"",[this.EVENT_TYPES.FALLBACK_DEACTIVATED]:"",[this.EVENT_TYPES.COMPONENT_REGISTERED]:"",[this.EVENT_TYPES.COMPONENT_UNREGISTERED]:"",[this.EVENT_TYPES.NAVIGATION_SWITCH]:"",[this.EVENT_TYPES.RETRY_ATTEMPT]:"",[this.EVENT_TYPES.PERFORMANCE_MARK]:"",[this.EVENT_TYPES.USER_ACTION]:"",[this.EVENT_TYPES.BREAKPOINT_CHANGE]:""}[t.type]||"";e(`${o} [NAV MONITOR] ${t.type.toUpperCase()}`,t.data)}reportEvent(t){[this.SEVERITY_LEVELS.CRITICAL,this.SEVERITY_LEVELS.HIGH].includes(t.severity)&&this.reportCriticalEvent(t)}reportCriticalEvent(t){}setupMonitoring(){if(typeof window>"u")return;const t=q.detectConflicts.bind(q);q.detectConflicts=(...n)=>{const l=t(...n);return l.length>0&&this.logConflict(l,!1),l};const e=q.resolveConflicts.bind(q);q.resolveConflicts=(...n)=>{const l=e(...n);return l.length>0&&this.logConflict([],!0),l};let o=window.innerWidth,a=o>=1024?"desktop":"mobile";window.addEventListener("resize",()=>{const n=window.innerWidth,l=n>=1024?"desktop":"mobile";l!==a&&(this.logBreakpointChange(o,n,a,l),o=n,a=l)}),window.addEventListener("navigation-conflict",n=>{this.logConflict([{id:"custom_conflict",type:"custom",severity:"high",message:n.detail.message}],!1)}),document.addEventListener("visibilitychange",()=>{this.logUserAction(document.hidden?"page_hidden":"page_visible","document",{visibility:document.visibilityState})})}getStats(){const e=Date.now()-this.metrics.value.lastResetTime;return{...this.metrics.value,timeRange:e,eventsPerMinute:(this.metrics.value.totalEvents/(e/6e4)).toFixed(2),errorRate:(this.metrics.value.errorCount/this.metrics.value.totalEvents*100).toFixed(2),conflictRate:(this.metrics.value.conflictCount/this.metrics.value.totalEvents*100).toFixed(2),recentEvents:this.events.value.slice(0,10),eventsByType:this.getEventsByType(),eventsBySeverity:this.getEventsBySeverity()}}getEventsByType(){const t={};return this.events.value.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),t}getEventsBySeverity(){const t={};return this.events.value.forEach(e=>{t[e.severity]=(t[e.severity]||0)+1}),t}exportData(){return{sessionId:this.getSessionId(),exportTime:Date.now(),metrics:this.metrics.value,events:this.events.value,stats:this.getStats(),conflictStatus:q.getStatus(),systemInfo:{userAgent:navigator.userAgent,windowSize:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:Date.now()}}}reset(){this.events.value=[],this.metrics.value={totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()},this.performanceMarks.clear(),this.logEvent("monitor_reset",{reason:"manual_reset"},this.SEVERITY_LEVELS.INFO)}setEnabled(t){this.isEnabled.value=t,this.logEvent("monitor_toggle",{enabled:t},this.SEVERITY_LEVELS.INFO)}}const Y=new En;class Tn{constructor(){this.isEnabled=!1,this.debugLevel="info",this.autoDebug=!0,this.debugHistory=[],this.maxHistorySize=100,this.DEBUG_CATEGORIES={CONFLICT:"conflict",PERFORMANCE:"performance",COMPONENT:"component",BREAKPOINT:"breakpoint",ERROR:"error",STATE:"state",LIFECYCLE:"lifecycle"},this.setupDebugTools()}debug(t=null,e=!1){if(!this.isEnabled)return;const o=this.gatherDebugInfo();return console.group(" Navigation System Debug Report"),(!t||t===this.DEBUG_CATEGORIES.STATE)&&this.debugNavigationState(o,e),(!t||t===this.DEBUG_CATEGORIES.CONFLICT)&&this.debugConflicts(o,e),(!t||t===this.DEBUG_CATEGORIES.COMPONENT)&&this.debugComponents(o,e),(!t||t===this.DEBUG_CATEGORIES.BREAKPOINT)&&this.debugBreakpoints(o,e),(!t||t===this.DEBUG_CATEGORIES.PERFORMANCE)&&this.debugPerformance(o,e),(!t||t===this.DEBUG_CATEGORIES.ERROR)&&this.debugErrors(o,e),e&&this.debugDetailed(o),console.groupEnd(),this.addToHistory("debug_report",{category:t,detailed:e,debugInfo:o}),o}gatherDebugInfo(){return{timestamp:Date.now(),window:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio,userAgent:navigator.userAgent},location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},conflicts:q.getStatus(),monitoring:Y.getStats(),dom:this.analyzeDOMState(),components:this.analyzeComponents(),breakpoints:this.analyzeBreakpoints(),performance:this.analyzePerformance(),errors:this.analyzeErrors()}}debugNavigationState(t,e){console.group(" Navigation State"),console.log("Window Size:",`${t.window.width}x${t.window.height}`),console.log("Current URL:",t.location.href),console.log("Active Components:",t.components.active),console.log("Conflicts:",t.conflicts.hasConflicts?" YES":" NO"),console.log("Monitoring Enabled:",t.monitoring.totalEvents>0?" YES":" NO"),e&&(console.log("Full Window Info:",t.window),console.log("Full Location Info:",t.location),console.log("DOM Analysis:",t.dom)),console.groupEnd()}debugConflicts(t,e){console.group(" Conflict Analysis");const o=t.conflicts;o.hasConflicts?(console.error(`Found ${o.conflictCount} conflicts:`),o.conflicts.forEach((a,n)=>{console.error(`${n+1}. ${a.type}: ${a.message}`),e&&console.log("Conflict Details:",a)})):console.log(" No conflicts detected"),console.log("Active Components:",o.activeComponents.length),o.activeComponents.forEach(a=>{console.log(`- ${a.type}: ${a.id}`)}),e&&console.log("Full Conflict Status:",o),console.groupEnd()}debugComponents(t,e){console.group(" Component Analysis");const o=t.components;console.log("Active Components:",o.active.length),console.log("Desktop Components:",o.desktop.length),console.log("Mobile Components:",o.mobile.length),console.log("Fallback Components:",o.fallback.length),o.duplicates.length>0&&(console.warn(" Duplicate Components Found:"),o.duplicates.forEach(a=>{console.warn(`- ${a.type}: ${a.count} instances`)})),e&&(console.log("Component Details:"),console.log("- Active:",o.active),console.log("- Desktop:",o.desktop),console.log("- Mobile:",o.mobile),console.log("- Fallback:",o.fallback)),console.groupEnd()}debugBreakpoints(t,e){console.group(" Breakpoint Analysis");const o=t.breakpoints;console.log("Current Width:",o.currentWidth),console.log("Expected Type:",o.expectedType),console.log("Actual Type:",o.actualType),console.log("Match:",o.matches?" YES":" NO"),o.matches||(console.warn(" Breakpoint mismatch detected!"),console.warn(`Expected: ${o.expectedType}, Actual: ${o.actualType}`)),e&&console.log("Breakpoint Details:",o),console.groupEnd()}debugPerformance(t,e){console.group(" Performance Analysis");const o=t.performance;console.log("Average Load Time:",`${o.averageLoadTime.toFixed(2)}ms`),console.log("Total Events:",o.totalEvents),console.log("Error Rate:",`${o.errorRate}%`),console.log("Events/Minute:",o.eventsPerMinute),o.slowComponents.length>0&&(console.warn(" Slow Components:"),o.slowComponents.forEach(a=>{console.warn(`- ${a.name}: ${a.loadTime}ms`)})),e&&console.log("Performance Details:",o),console.groupEnd()}debugErrors(t,e){console.group(" Error Analysis");const o=t.errors;console.log("Total Errors:",o.totalErrors),console.log("Recent Errors:",o.recentErrors.length),console.log("Error Types:",Object.keys(o.errorsByType).join(", ")),o.recentErrors.length>0&&(console.warn("Recent Errors:"),o.recentErrors.forEach((a,n)=>{console.warn(`${n+1}. ${a.type}: ${a.message}`)})),e&&console.log("Error Details:",o),console.groupEnd()}debugDetailed(t){console.group(" Detailed Analysis"),console.log("Full Debug Info:",t),console.log("Debug History:",this.debugHistory.slice(0,10)),this.checkCommonIssues(t),console.groupEnd()}checkCommonIssues(t){console.group(" Common Issues Check");const e=[];t.components.duplicates.length>0&&e.push("Multiple navigation components of the same type detected"),t.breakpoints.matches||e.push("Navigation type does not match current breakpoint"),parseFloat(t.monitoring.errorRate)>10&&e.push("High error rate detected (>10%)"),t.performance.averageLoadTime>1e3&&e.push("Slow navigation loading detected (>1000ms)"),t.conflicts.hasConflicts&&e.push("Navigation conflicts detected"),e.length>0?(console.warn(" Issues Found:"),e.forEach((o,a)=>{console.warn(`${a+1}. ${o}`)})):console.log(" No common issues detected"),console.groupEnd()}analyzeDOMState(){const t=document.querySelectorAll("[data-navigation-type]"),e=document.querySelectorAll('[data-navigation-type="desktop"]'),o=document.querySelectorAll('[data-navigation-type="mobile"]'),a=document.querySelectorAll('[data-navigation-type="fallback"]');return{totalNavigationElements:t.length,desktopElements:e.length,mobileElements:o.length,fallbackElements:a.length,visibleElements:Array.from(t).filter(n=>n.offsetWidth>0&&n.offsetHeight>0).length,hiddenElements:Array.from(t).filter(n=>n.offsetWidth===0||n.offsetHeight===0).length}}analyzeComponents(){const e=q.getStatus().activeComponents,o=e.filter(v=>v.type==="desktop"),a=e.filter(v=>v.type==="mobile"),n=e.filter(v=>v.type==="fallback"),l={};e.forEach(v=>{l[v.type]=(l[v.type]||0)+1});const b=Object.entries(l).filter(([v,w])=>w>1).map(([v,w])=>({type:v,count:w}));return{active:e,desktop:o,mobile:a,fallback:n,duplicates:b}}analyzeBreakpoints(){const t=window.innerWidth,e=t>=1024?"desktop":"mobile",a=q.getStatus().activeComponents,n=a.some(v=>v.type==="desktop"),l=a.some(v=>v.type==="mobile");let b="none";return n&&!l?b="desktop":l&&!n?b="mobile":n&&l&&(b="both"),{currentWidth:t,expectedType:e,actualType:b,matches:e===b,hasDesktop:n,hasMobile:l}}analyzePerformance(){const t=Y.getStats(),a=Y.events.value.filter(n=>n.type==="navigation_load"&&n.data.loadTime).filter(n=>n.data.loadTime>500).map(n=>({name:n.data.componentType,loadTime:n.data.loadTime}));return{...t,slowComponents:a}}analyzeErrors(){const e=Y.events.value.filter(a=>a.type==="navigation_error"||a.severity==="high"||a.severity==="critical"),o={};return e.forEach(a=>{const n=a.data.errorName||a.type;o[n]=(o[n]||0)+1}),{totalErrors:e.length,recentErrors:e.slice(0,5),errorsByType:o}}addToHistory(t,e){this.debugHistory.unshift({timestamp:Date.now(),action:t,data:e}),this.debugHistory.length>this.maxHistorySize&&(this.debugHistory=this.debugHistory.slice(0,this.maxHistorySize))}setupDebugTools(){this.isEnabled&&(window.debugNavigation=(t,e)=>this.debug(t,e),window.debugNavigationConflicts=()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),window.debugNavigationPerformance=()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),window.debugNavigationComponents=()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),window.navDebug={debug:(t,e)=>this.debug(t,e),conflicts:()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),performance:()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),components:()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),breakpoints:()=>this.debug(this.DEBUG_CATEGORIES.BREAKPOINT,!0),errors:()=>this.debug(this.DEBUG_CATEGORIES.ERROR,!0),export:()=>this.exportDebugData(),reset:()=>this.resetDebugData(),monitor:Y,conflicts:q},console.log(" Navigation Debug Tools Available:"),console.log("- debugNavigation() - Full debug report"),console.log("- debugNavigationConflicts() - Conflict analysis"),console.log("- debugNavigationPerformance() - Performance analysis"),console.log("- debugNavigationComponents() - Component analysis"),console.log("- navDebug.* - Debug shortcuts object"))}exportDebugData(){const t=this.gatherDebugInfo(),e={timestamp:Date.now(),debugInfo:t,debugHistory:this.debugHistory,monitoringData:Y.exportData(),conflictData:q.getStatus()};return console.log(" Debug Data Export:",e),navigator.clipboard&&navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>console.log(" Debug data copied to clipboard")).catch(()=>console.log(" Failed to copy to clipboard")),e}resetDebugData(){this.debugHistory=[],Y.reset(),q.reset(),console.log(" Debug data reset"),this.addToHistory("debug_reset",{timestamp:Date.now()})}autoDebugOnIssues(){if(!this.autoDebug)return;const t=q.detectConflicts.bind(q);q.detectConflicts=(...e)=>{const o=t(...e);return o.length>0&&(console.warn(" Auto-debug triggered by conflicts"),this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0)),o},window.addEventListener("error",e=>{e.error&&e.error.message.toLowerCase().includes("navigation")&&(console.warn(" Auto-debug triggered by navigation error"),this.debug(this.DEBUG_CATEGORIES.ERROR,!0))})}}new Tn;const xn=["data-navigation-mode","data-navigation-id","data-conflict-status"],Cn={class:"conflict-count"},_n={__name:"NavigationController",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1},forceNavigationType:{type:String,validator:s=>["desktop","mobile",null].includes(s),default:null}},emits:["navigate","collapse-change","state-change","navigation-type-change","navigation-transition","mobile-drawer-toggle"],setup(s,{expose:t,emit:e}){const o=s,a=e;Be();const{windowWidth:n,navigationMode:l,isTransitioning:b,preserveCurrentState:v,restorePreservedState:w,getBreakpointInfo:S}=lt(),{roles:y,isAuthenticated:C}=xe();Pe();const A=E("desktop"),B=E(null),T=E({isTransitioning:!1,fromType:null,toType:null,preservedData:null}),h=E(`controller_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),i=E(`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),d=E([]),m=E(!1),c=E(""),f=E({}),V=!1,D=u(()=>o.forceNavigationType?o.forceNavigationType:l.value),Q=u(()=>{try{const N=D.value==="desktop"?ot:Zo;return A.value=D.value,N}catch(N){return console.error("[NavigationController] Error selecting navigation component:",N),B.value=N,ot}}),R=u(()=>{const N={currentRoute:o.currentRoute,userRoles:y.value||[],isAuthenticated:C.value};return D.value==="desktop"?{...N,initiallyCollapsed:o.initiallyCollapsed}:{...N}});u(()=>D.value==="desktop"),u(()=>D.value==="mobile");const M=u(()=>d.value.length>0),H=N=>{try{a("navigate",{...N,navigationType:A.value,timestamp:Date.now()})}catch(Z){console.error("[NavigationController] Navigation error:",Z),B.value=Z}},z=N=>{try{a("collapse-change",N)}catch(Z){console.error("[NavigationController] Collapse change error:",Z)}},k=N=>{try{a("state-change",{...N,navigationType:A.value,deviceType:D.value})}catch(Z){console.error("[NavigationController] State change error:",Z)}},L=N=>{try{a("mobile-drawer-toggle",N)}catch(Z){console.error("[NavigationController] Mobile drawer toggle error:",Z)}};be(D,async(N,Z)=>{if(N!==Z){T.value.isTransitioning=!0,T.value.fromType=Z,T.value.toType=N;try{a("navigation-transition",!0);const _e=v({navigationState:{currentRoute:o.currentRoute,userPreferences:{},timestamp:Date.now()}});T.value.preservedData=_e,a("navigation-type-change",{from:Z,to:N,breakpoint:n.value,breakpointInfo:S(),preservedData:_e,timestamp:Date.now(),isTransitioning:!0}),await We(),await new Promise(ht=>setTimeout(ht,150)),w()}catch(_e){console.error("[NavigationController] Error during navigation type change:",_e),B.value=_e}finally{a("navigation-transition",!1),T.value.isTransitioning=!1,T.value.fromType=null,T.value.toType=null}}},{immediate:!1});const I=()=>{B.value=null},te=()=>{},_=async N=>{Y.logNavigationError(N,{componentId:h.value,navigationType:D.value,currentRoute:o.currentRoute}),(N.severity==="critical"||N.type==="component_loading")&&Ce("Navigation component error",N)},p=async()=>{try{return i.value=`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,d.value=[],we(),Y.logEvent("navigation_recovery_success",{controllerId:h.value,deviceType:D.value}),!0}catch(N){return console.error("[NavigationController] Recovery failed:",N),!1}},G=N=>{Y.logNavigationError(new Error(N.message),{errorReport:N,source:"error_boundary"})},ne=N=>{Y.logEvent("boundary_recovery",N)},he=N=>{Ce(N.reason,N.errorReport)},ce=N=>{d.value=N.conflicts,Y.logConflict(N.conflicts,!1),this.$conflictDetector.resolveConflicts().length>0&&Y.logConflict(N.conflicts,!0)},Ce=(N,Z={})=>{m.value=!0,c.value=N,f.value=Z,Y.logFallback(!0,N,Z)},we=()=>{m.value=!1,c.value="",f.value={},Y.logFallback(!1,"recovery_successful")},ut=N=>{Y.logUserAction("fallback_navigation",N.item.name,N),H(N)},Ye=async()=>await p(),dt=N=>{Y.logRetryAttempt(N.attempt,N.maxRetries,{source:"fallback",failedNavigationType:N.failedNavigationType}),Ye()},vt=()=>{Y.logUserAction("fallback_reload","page"),window.location.reload()},mt=N=>{Y.logUserAction("fallback_action",N.action,N)},je=()=>{Y.startPerformanceMark(`navigation_transition_${D.value}`)},qe=()=>{Y.endPerformanceMark(`navigation_transition_${D.value}`,{navigationType:D.value,controllerId:h.value})},gt=()=>{};return oe(()=>{this.$conflictDetector.registerComponent(h.value,"controller",{currentRoute:o.currentRoute,deviceType:D.value,timestamp:Date.now()}),this.$conflictDetector.registerComponent(i.value,D.value,{currentRoute:o.currentRoute,controllerId:h.value,timestamp:Date.now()}),Y.logNavigationLoad("controller",h.value),A.value=D.value,a("navigation-type-change",{from:null,to:D.value,breakpoint:n.value,timestamp:Date.now()});const N=setInterval(()=>{const Z=conflictDetector.detectConflicts();Z.length!==d.value.length&&(d.value=Z)},2e3);re(()=>{console.log("Unregistering NavigationController:",{controllerId:h.value,componentId:i.value}),clearInterval(N),clearInterval(devConflictCheckInterval),this.$conflictDetector.unregisterComponent(h.value),this.$conflictDetector.unregisterComponent(i.value),Y.logEvent("component_unregistered",{controllerId:h.value,componentId:i.value})})}),t({debugNavigationController:te,clearError:I,currentNavigationType:u(()=>A.value),deviceType:D,isTransitioning:u(()=>T.value.isTransitioning||b.value),navigationError:u(()=>B.value),transitionState:u(()=>T.value),breakpointInfo:S}),(N,Z)=>(g(),K(kn,{"current-route":s.currentRoute,"navigation-type":"controller","component-id":h.value,"max-retries":3,"on-error":_,"on-recover":p,onError:G,onRecover:ne,onFallbackActivated:he,onConflictDetected:ce},{default:J(()=>[r("div",{class:$(["navigation-controller",{"is-transitioning":T.value.isTransitioning||O(b),"desktop-mode":D.value==="desktop","mobile-mode":D.value==="mobile","has-conflicts":M.value,"fallback-active":m.value}]),"data-navigation-mode":D.value,"data-navigation-id":h.value,"data-conflict-status":M.value?"conflict":"clean"},[m.value?(g(),K(ct,{key:0,"fallback-reason":c.value,"error-details":f.value,"current-route":s.currentRoute,"failed-navigation-type":D.value,"show-error-indicator":!0,"show-debug-info":V,"on-retry":Ye,onNavigate:ut,onRetry:dt,onReload:vt,onFallbackAction:mt},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):(g(),K(De,{key:1,name:"navigation-transition",mode:"out-in",duration:{enter:200,leave:150},onBeforeEnter:je,onAfterEnter:qe,onBeforeLeave:je,onAfterLeave:qe},{default:J(()=>[(g(),K(Le(Q.value),Ge({key:D.value},R.value,{"data-navigation-type":D.value,"data-navigation-id":i.value,"data-conflict-protected":!0,onNavigate:H,onCollapseChange:z,onStateChange:k,onMobileDrawerToggle:L}),null,16,["data-navigation-type","data-navigation-id"]))]),_:1})),V&&M.value?(g(),x("div",{key:2,class:"conflict-indicator",onClick:gt},[F(X,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),r("span",Cn,P(d.value.length),1)])):U("",!0)],10,xn)]),_:1},8,["current-route","component-id"]))}},An=le(_n,[["__scopeId","data-v-0e015d9c"]]),Sn=["aria-live"],In={class:"toast-content"},Nn={key:0,class:"toast-icon"},Rn={class:"toast-message"},Dn={key:0,class:"toast-title"},Ln={class:"toast-text"},$n={key:1,class:"toast-actions"},Mn=["aria-label"],On={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:s=>["success","error","warning","info","loading"].includes(s)},position:{type:String,default:"top-right",validator:s=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(s)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:s=>["low","normal","high"].includes(s)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(s,{expose:t,emit:e}){const o=s,a=e,n=E(!1),l=E(null),b=E(null),v=E(100),w=E(!1),S=E(0),y=E(0),C=u(()=>Fe("x-mark")),A=u(()=>{if(o.icon)return Fe(o.icon);const k={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return Fe(k[o.type]||k.info)}),B=u(()=>["toast-notification",`toast-notification--${o.type}`,`toast-notification--${o.size}`,`toast-notification--${o.position}`,{"toast-notification--with-title":o.title,"toast-notification--persistent":o.persistent,"toast-notification--with-action":o.actionText}]),T=u(()=>({zIndex:o.zIndex})),h=u(()=>["w-5 h-5",{"animate-spin":o.type==="loading"}]),i=u(()=>o.closable||o.actionText),d=u(()=>[`toast-progress--${o.type}`]),m=u(()=>({width:`${v.value}%`})),c=()=>{n.value=!0,o.sound&&z(),!o.persistent&&o.duration>0&&D()},f=()=>{n.value=!1,H(),a("close")},V=()=>{a("action"),o.persistent||f()},D=()=>{o.duration<=0||(S.value=Date.now(),y.value=o.duration,l.value=setTimeout(()=>{f()},o.duration),Q())},Q=()=>{if(!o.showProgress)return;const k=Date.now(),L=()=>{if(!n.value||w.value)return;const I=Date.now()-k,te=Math.max(0,100-I/o.duration*100);v.value=te,te>0&&(b.value=requestAnimationFrame(L))};L()},R=()=>{if(!l.value||o.persistent)return;w.value=!0,clearTimeout(l.value),cancelAnimationFrame(b.value);const k=Date.now()-S.value;y.value=Math.max(0,o.duration-k)},M=()=>{!w.value||o.persistent||(w.value=!1,y.value>0&&(S.value=Date.now(),l.value=setTimeout(()=>{f()},y.value),Q()))},H=()=>{l.value&&(clearTimeout(l.value),l.value=null),b.value&&(cancelAnimationFrame(b.value),b.value=null)},z=()=>{try{const k=new Audio,L={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};k.src=L[o.type]||L.info,k.volume=.3,k.play().catch(()=>{})}catch{}};return oe(()=>{c()}),re(()=>{H()}),be(()=>o.duration,()=>{n.value&&!o.persistent&&(H(),D())}),t({show:c,close:f,pauseTimer:R,resumeTimer:M}),(k,L)=>(g(),K(pt,{to:"body"},[n.value?(g(),x("div",{key:0,class:$(B.value),style:Ue(T.value),role:"alert","aria-live":s.priority==="high"?"assertive":"polite",onMouseenter:R,onMouseleave:M},[r("div",In,[s.showIcon?(g(),x("div",Nn,[(g(),K(Le(A.value),{class:$(h.value)},null,8,["class"]))])):U("",!0),r("div",Rn,[s.title?(g(),x("div",Dn,P(s.title),1)):U("",!0),r("div",Ln,[ge(k.$slots,"default",{},()=>[me(P(s.message),1)],!0)])]),i.value?(g(),x("div",$n,[s.actionText?(g(),x("button",{key:0,onClick:V,class:"toast-action-button"},P(s.actionText),1)):U("",!0),s.closable?(g(),x("button",{key:1,onClick:f,class:"toast-close-button","aria-label":s.closeLabel},[(g(),K(Le(C.value),{class:"w-4 h-4"}))],8,Mn)):U("",!0)])):U("",!0)]),s.showProgress&&s.duration>0?(g(),x("div",{key:0,class:$(["toast-progress",d.value]),style:Ue(m.value)},null,6)):U("",!0)],46,Sn)):U("",!0)]))}},Bn=le(On,[["__scopeId","data-v-11baa49e"]]),Pn={class:"notification-container"},Vn={__name:"NotificationContainer",setup(s,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];u(()=>ae.notifications.filter(y=>!y.component));const o=u(()=>ae.notifications.filter(y=>y.component)),a=y=>{const C="fixed z-50 pointer-events-none",A={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${C} ${A[y]||A["top-right"]}`},n=y=>ae.getByPosition(y),l=y=>y.includes("left")?"slide-left":y.includes("right")?"slide-right":y.includes("center")?"slide-center":"slide-right",b=y=>{ae.remove(y)},v=(y,C="action")=>{const A=ae.getById(y);A!=null&&A.onAction&&A.onAction(C)},w=()=>{window.notify={success:(y,C)=>ae.success(y,C),error:(y,C)=>ae.error(y,C),warning:(y,C)=>ae.warning(y,C),info:(y,C)=>ae.info(y,C),loading:(y,C)=>ae.loading(y,C),confirm:y=>ae.confirm(y),alert:(y,C)=>ae.alert(y,C),clear:()=>ae.clear(),remove:y=>ae.remove(y)}},S=()=>{window.notify&&delete window.notify};return oe(()=>{w()}),re(()=>{S()}),t({notificationQueue:ae,notify:window.notify}),(y,C)=>(g(),x("div",Pn,[(g(),x(de,null,ve(e,A=>r("div",{key:A,class:$(a(A))},[F(yt,{name:l(A),tag:"div",class:"space-y-2"},{default:J(()=>[(g(!0),x(de,null,ve(n(A),B=>(g(),K(Bn,Ge({key:B.id},{ref_for:!0},B,{onClose:T=>b(B.id),onAction:T=>v(B.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(g(!0),x(de,null,ve(o.value,A=>(g(),K(Le(A.component||"NotificationModal"),Ge({key:A.id,ref_for:!0},A.props,{onClose:B=>b(A.id),onConfirm:B=>v(A.id,"confirm"),onCancel:B=>v(A.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Fn=le(Vn,[["__scopeId","data-v-67e6c621"]]),Hn={class:"floating-attendance-widget"},zn={class:"status-indicator"},Gn={class:"time-info"},Un={class:"time-display"},Wn={class:"time-label-mini"},Yn={class:"widget-header"},jn={class:"status-info"},qn={class:"status-text"},Kn={class:"timer-section"},Qn={class:"timer-value"},Zn={class:"timer-label"},Jn={class:"quick-actions"},Xn=["disabled"],ea=["disabled"],ta={class:"quick-stats"},oa={class:"stat"},na={class:"stat-value"},aa={class:"stat"},ra={class:"stat-value"},ia={__name:"FloatingAttendanceWidget",setup(s){const t=E(!1),e=E({clockedIn:!1,onBreak:!1,clockInTime:null}),o=E(!1),a=E("0h 0m 0s"),n=E(null),l=()=>{try{const R={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(R))}catch(R){console.warn("Failed to save attendance state to localStorage:",R)}},b=()=>{try{const R=localStorage.getItem("floating-attendance-state");if(R){const M=JSON.parse(R),H=new Date(M.lastUpdate);if((new Date-H)/(1e3*60)<5)return e.value.clockedIn=M.clockedIn||!1,e.value.onBreak=M.onBreak||!1,e.value.clockInTime=M.clockInTime||null,n.value=M.breakStartTime||null,!0}}catch(R){console.warn("Failed to load attendance state from localStorage:",R)}return!1};let v=null;const w=u(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),S=u(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),y=u(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),C=u(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),A=u(()=>o.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),B=u(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),T=u(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const R=new Date(e.value.clockInTime),H=new Date-R,z=Math.floor(H/(1e3*60)),k=Math.floor(z/60),L=z%60;return`${k}h ${L}m`}),h=u(()=>{if(e.value.onBreak&&n.value){const R=new Date(n.value);if(isNaN(R.getTime()))return"0h 0m 1s";{const H=Math.max(0,new Date-R),z=Math.floor(H/(1e3*60*60)),k=Math.floor(H%(1e3*60*60)/(1e3*60)),L=Math.floor(H%(1e3*60)/1e3);return`${z}h ${k}m ${L}s`}}return"0h 0m"});u(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const i=()=>{t.value=!t.value},d=()=>{if(e.value.clockedIn&&e.value.clockInTime){const R=new Date;let M;e.value.onBreak&&n.value?M=new Date(n.value):M=new Date(e.value.clockInTime);const H=R-M,z=Math.floor(H/(1e3*60*60)),k=Math.floor(H%(1e3*60*60)/(1e3*60)),L=Math.floor(H%(1e3*60)/1e3);a.value=`${z}h ${k}m ${L}s`}else a.value="0h 0m 0s"},m=async()=>{try{if(o.value=!0,e.value.clockedIn){const R=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,a.value="0h 0m 0s",l(),Q()}else{const R=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=R.data.clock_in_time||new Date().toISOString(),l(),Q()}}catch(R){console.error("Clock in/out failed:",R),alert("Action failed: "+R.message)}finally{o.value=!1}},c=async()=>{try{if(o.value=!0,e.value.onBreak){const R=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,l(),Q()}else{n.value=new Date().toISOString(),e.value.onBreak=!0;const R=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});R.data.break_start_time&&(n.value=R.data.break_start_time),l(),Q()}}catch(R){console.error("Break action failed:",R),alert("Action failed: "+R.message)}finally{o.value=!1}},f=async()=>{var R,M;try{const z=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=z.clocked_in||!1,e.value.onBreak=z.on_break||!1,e.value.clockInTime=z.clock_in_time||null,z.on_break)if(z.break_start_time)n.value=z.break_start_time;else if((R=z.current_session)!=null&&R.current_break_start)n.value=z.current_session.current_break_start;else if((M=z.current_session)!=null&&M.break_sessions&&z.current_session.break_sessions.length>0){const k=z.current_session.break_sessions[z.current_session.break_sessions.length-1];k&&!k.end&&(n.value=k.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value})}catch(H){console.error("Failed to fetch attendance status:",H)}},V=R=>{R.key==="attendance-update"&&f()},D=R=>{console.log("FloatingWidget: Received attendance state change:",R.detail);const{clockedIn:M,onBreak:H,clockInTime:z,breakStartTime:k}=R.detail;e.value.clockedIn=M,e.value.onBreak=H,e.value.clockInTime=z,H&&k?n.value=k:H||(n.value=null),l(),d(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:k})},Q=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(R){console.warn("Failed to broadcast attendance update:",R)}};return oe(async()=>{b()&&d(),await f(),l(),d(),v=setInterval(d,1e3),window.addEventListener("storage",V),window.addEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners registered")}),re(()=>{v&&clearInterval(v),window.removeEventListener("storage",V),window.removeEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners removed")}),(R,M)=>(g(),x("div",Hn,[t.value?U("",!0):(g(),x("div",{key:0,onClick:i,class:$(["floating-button",C.value])},[r("div",zn,[r("div",{class:$(y.value)},null,2)]),r("div",Gn,[r("div",Un,P(a.value),1),r("div",Wn,P(S.value),1)]),F(O(Et),{class:"w-4 h-4 expand-icon"})],2)),t.value?(g(),x("div",{key:1,class:"expanded-widget",onClick:M[0]||(M[0]=at(()=>{},["stop"]))},[r("div",Yn,[r("div",jn,[r("div",{class:$(y.value)},null,2),r("span",qn,P(w.value),1)]),r("button",{onClick:i,class:"minimize-btn",title:"Minimize"},[F(O(Tt),{class:"w-4 h-4"})])]),r("div",Kn,[r("div",Qn,P(a.value),1),r("div",Zn,P(S.value),1)]),r("div",Jn,[r("button",{onClick:m,disabled:o.value,class:$(B.value)},P(A.value),11,Xn),e.value.clockedIn?(g(),x("button",{key:0,onClick:c,disabled:o.value,class:"break-action"},[(g(),K(Le(e.value.onBreak?O(uo):O(co)),{class:"w-3 h-3"})),me(" "+P(e.value.onBreak?"End":"Break"),1)],8,ea)):U("",!0)]),r("div",ta,[r("div",oa,[r("span",na,P(T.value),1),M[1]||(M[1]=r("span",{class:"stat-label"},"Today",-1))]),r("div",aa,[r("span",ra,P(h.value),1),M[2]||(M[2]=r("span",{class:"stat-label"},"Break",-1))])])])):U("",!0),t.value?(g(),x("div",{key:2,class:"backdrop",onClick:i})):U("",!0)]))}},sa=le(ia,[["__scopeId","data-v-421365b8"]]),la={class:"skip-links","aria-label":"Skip navigation links"},ca=["href","onClick"],ua={__name:"SkipLinks",setup(s){const{skipLinks:t,handleSkipLinkClick:e}=xt();return(o,a)=>(g(),x("div",la,[(g(!0),x(de,null,ve(O(t),n=>(g(),x("a",{key:n.href,href:n.href,class:"skip-link sr-only-focusable",onClick:l=>O(e)(l,n.href)},P(n.label),9,ca))),128))]))}},da=le(ua,[["__scopeId","data-v-f9a7b518"]]),va={class:"live-regions"},ma={__name:"LiveRegion",setup(s){const t=E(null),e=E(null),o=E(null);return oe(()=>{bt.init()}),(a,n)=>(g(),x("div",va,[r("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),r("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),r("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:o},null,512)]))}},ga=le(ma,[["__scopeId","data-v-94955163"]]),Me=E("desktop"),ue=E({isCollapsed:!1,width:{expanded:256,collapsed:64}}),ee=E({isDrawerOpen:!1,headerHeight:64,bottomNavHeight:80}),se=E({isTransitioning:!1,duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});function ha(){const{windowWidth:s}=Be(),{isTransitioning:t}=lt(),e=u(()=>Me.value),o=u(()=>{const i={marginLeft:ue.value.isCollapsed?ue.value.width.collapsed:ue.value.width.expanded,marginRight:0,paddingTop:0,paddingBottom:0,minHeight:"100vh"};return{...i,marginLeftPx:`${i.marginLeft}px`,transition:`margin-left ${se.value.duration}ms ${se.value.easing}`}}),a=u(()=>{const i=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top").replace("px",""))||0,d=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom").replace("px",""))||0,m={marginLeft:0,marginRight:0,paddingTop:ee.value.headerHeight+i,paddingBottom:ee.value.bottomNavHeight+d,minHeight:`calc(100vh - ${ee.value.headerHeight+ee.value.bottomNavHeight}px)`};return{...m,paddingTopPx:`${m.paddingTop}px`,paddingBottomPx:`${m.paddingBottom}px`,transition:`all ${se.value.duration}ms ${se.value.easing}`}}),n=u(()=>e.value==="desktop"?o.value:a.value),l=u(()=>{const i={"main-content-area":!0,"gpu-accelerated":!0};return i[`${e.value}-layout`]=!0,e.value==="desktop"&&(i["sidebar-collapsed"]=ue.value.isCollapsed,i["sidebar-expanded"]=!ue.value.isCollapsed),e.value==="mobile"&&(i["drawer-open"]=ee.value.isDrawerOpen,i["drawer-closed"]=!ee.value.isDrawerOpen),se.value.isTransitioning||t.value?i.transitioning=!0:i["transition-complete"]=!0,i}),b=u(()=>{const i={"content-inner":!0,"transition-all":!0,"duration-300":!0,"ease-out":!0};return e.value==="mobile"&&ee.value.isDrawerOpen&&(i["opacity-50"]=!0,i["pointer-events-none"]=!0,i["scale-95"]=!0),i}),v=u(()=>{const i={};return e.value==="desktop"?(i["--sidebar-width"]=`${n.value.marginLeft}px`,i["--content-margin-left"]=n.value.marginLeftPx):(i["--mobile-header-height"]=`${ee.value.headerHeight}px`,i["--mobile-bottom-nav-height"]=`${ee.value.bottomNavHeight}px`,i["--content-padding-top"]=n.value.paddingTopPx,i["--content-padding-bottom"]=n.value.paddingBottomPx),i["--layout-transition-duration"]=`${se.value.duration}ms`,i["--layout-transition-easing"]=se.value.easing,i}),w=i=>{ue.value.isCollapsed!==i&&(ue.value.isCollapsed=i,C("sidebar-toggle"))},S=i=>{ee.value.isDrawerOpen!==i&&(ee.value.isDrawerOpen=i,i?document.body.style.overflow="hidden":document.body.style.overflow="")},y=i=>{if(Me.value!==i){const d=Me.value;Me.value=i,C("layout-type-change",{from:d,to:i})}},C=async(i,d={})=>{if(se.value.isTransitioning){console.warn("[useLayoutSpacing] Transition already in progress, skipping");return}se.value.isTransitioning=!0;try{await We();const m=document.documentElement;Object.entries(v.value).forEach(([c,f])=>{m.style.setProperty(c,f)}),await new Promise(c=>setTimeout(c,se.value.duration))}catch(m){console.error("[useLayoutSpacing] Layout transition error:",m)}finally{se.value.isTransitioning=!1}},A=()=>{const i=s.value;i>=1440?ue.value.width.expanded=280:i>=1920?ue.value.width.expanded=320:ue.value.width.expanded=256,i<=375?(ee.value.headerHeight=56,ee.value.bottomNavHeight=72):i<=640?(ee.value.headerHeight=64,ee.value.bottomNavHeight=80):(ee.value.headerHeight=68,ee.value.bottomNavHeight=84)},B=()=>{const i=n.value,d=s.value,m=window.innerHeight;let c,f;return e.value==="desktop"?(c=d-i.marginLeft,f=m):(c=d,f=m-i.paddingTop-i.paddingBottom),{width:c,height:f,availableWidth:Math.max(c,320),availableHeight:Math.max(f,200)}},T=()=>{const i=[],d=document.querySelector('[data-navigation-type="desktop"]'),m=document.querySelector('[data-navigation-type="mobile"]');if(d&&m){const f=window.getComputedStyle(d).display!=="none",V=window.getComputedStyle(m).display!=="none";f&&V&&i.push("Both desktop and mobile navigation are visible")}const c=document.querySelector(".main-content-area");if(c){const f=window.getComputedStyle(c),V=parseInt(f.marginLeft),D=n.value.marginLeft;Math.abs(V-D)>5&&i.push(`Content margin mismatch: expected ${D}px, got ${V}px`)}return i};be(e,(i,d)=>{i!==d&&y(i)},{immediate:!0}),be(s,()=>{A()},{immediate:!0});const h=()=>{};return{layoutType:u(()=>e.value),currentSpacing:n,sidebarState:u(()=>ue.value),mobileState:u(()=>ee.value),isTransitioning:u(()=>se.value.isTransitioning),mainContentClasses:l,contentInnerClasses:b,cssCustomProperties:v,updateSidebarState:w,updateMobileDrawerState:S,updateLayoutType:y,executeLayoutTransition:C,getContentAreaDimensions:B,detectLayoutConflicts:T,debugLayoutSpacing:h,adjustForScreenSize:A}}const fa={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},pa=["aria-hidden"],ya={"aria-label":"User account menu"},ba=["aria-label"],_a={__name:"AuthenticatedLayout",setup(s){const t=wt(),e=E("desktop"),o=E(!1),{getUserProperty:a,getAuthError:n}=xe();Be();const{isDark:l,initializeTheme:b}=Pe();oe(()=>{b()});const{mainContentClasses:v,contentInnerClasses:w,cssCustomProperties:S,updateSidebarState:y,updateMobileDrawerState:C,updateLayoutType:A,isTransitioning:B}=ha(),T=u(()=>a("name","User")),h=u(()=>a("email","")),i=u(()=>n()),d=u(()=>!!i.value),m=u(()=>{try{return route().current()||""}catch(p){return console.warn("[LAYOUT] Route helper not available:",p),window.location.pathname.replace("/","")||"dashboard"}}),c=p=>{},f=p=>{e.value=p.to,A(p.to)},V=p=>{o.value=p,y(p)},D=p=>{p.sidebarCollapsed!==void 0&&(o.value=p.sidebarCollapsed)},Q=u(()=>({"layout-container":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!l.value,"bg-neutral-900":l.value,"desktop-layout":e.value==="desktop","mobile-layout":e.value==="mobile"}));u(()=>{const p=v.value,G={"has-header":L.value};return{...p,...G}});const R=u(()=>({"px-6":!0,"py-4":!0,flex:!0,"items-center":!0,"justify-between":!0,"shadow-sm":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!l.value,"border-neutral-200":!l.value,"bg-neutral-900":l.value,"border-neutral-700":l.value})),M=u(()=>({"px-6":!0,"py-4":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!l.value,"border-neutral-200":!l.value,"bg-neutral-900":l.value,"border-neutral-700":l.value})),H=u(()=>({"flex-1":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!l.value,"bg-neutral-900":l.value})),z=E(!1),k=E(!1),L=u(()=>!!t.header),I=p=>{z.value=p,C(p),p?document.body.style.overflow="hidden":document.body.style.overflow=""},te=p=>{k.value=p},_=u(()=>w.value);return(p,G)=>(g(),x("div",null,[F(da),F(ga),F(Lt),F(Fn),F(sa),d.value?(g(),x("div",fa,[G[0]||(G[0]=r("p",{class:"font-semibold"},"Authentication Error:",-1)),r("p",null,P(i.value),1),G[1]||(G[1]=r("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):U("",!0),F(An,{"current-route":m.value,"initially-collapsed":o.value,onNavigate:c,onCollapseChange:V,onNavigationTypeChange:f,onNavigationTransition:te,onStateChange:D,onMobileDrawerToggle:I},null,8,["current-route","initially-collapsed"]),r("div",{class:$(Q.value)},[r("div",{class:$(["main-content-area","desktop-layout","gpu-accelerated",{"sidebar-collapsed":o.value,"sidebar-expanded":!o.value,transitioning:k.value||O(B),"has-header":L.value}]),style:Ue({marginLeft:e.value==="desktop"?o.value?"64px":"256px":"0",transition:"margin-left 300ms cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"100vh",...O(S)}),"data-layout-type":"authenticated-content","aria-hidden":k.value?"true":"false"},[e.value==="desktop"&&O(t).header?(g(),x("header",{key:0,class:$(["content-header",R.value]),role:"banner","aria-label":"Page header"},[r("div",{class:$(["text-lg font-semibold transition-colors duration-200",O(l)?"text-neutral-100":"text-neutral-900"])},[ge(p.$slots,"header")],2),r("nav",ya,[F(rt,{align:"right",width:"48"},{trigger:J(()=>[r("button",{class:$(["flex items-center p-2 rounded-lg transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",O(l)?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"]),"aria-label":`User menu for ${T.value}`,"aria-haspopup":"true","aria-expanded":"false"},[G[2]||(G[2]=r("div",{class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},[r("svg",{class:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),r("span",{class:$(["ml-2 text-sm font-medium",O(l)?"text-neutral-200":"text-neutral-700"])},P(T.value),3)],10,ba)]),content:J(()=>[r("div",{class:$(["px-4 py-2 border-b",O(l)?"border-neutral-600 bg-neutral-800":"border-neutral-200 bg-white"])},[r("p",{class:$(["text-sm font-medium",O(l)?"text-neutral-100":"text-neutral-900"])},P(T.value),3),r("p",{class:$(["text-xs",O(l)?"text-neutral-400":"text-neutral-500"])},P(h.value),3)],2),F(Oe,{href:p.route("profile.edit")},{default:J(()=>G[3]||(G[3]=[me(" Profile Settings ")])),_:1,__:[3]},8,["href"]),F(Oe,{href:p.route("logout"),method:"post",as:"button"},{default:J(()=>G[4]||(G[4]=[me(" Log Out ")])),_:1,__:[4]},8,["href"])]),_:1})])],2)):U("",!0),e.value==="mobile"&&O(t).header?(g(),x("header",{key:1,class:$(["content-header",M.value]),role:"banner","aria-label":"Page header"},[r("div",{class:$(["text-lg font-semibold",O(l)?"text-neutral-100":"text-neutral-900"])},[ge(p.$slots,"header")],2)],2)):U("",!0),r("main",{id:"main-content",class:$(["content-body",H.value]),role:"main","aria-label":"Main content",tabindex:"-1"},[r("div",{class:$(_.value)},[ge(p.$slots,"default")],2)],2)],14,pa)],2)]))}};export{_a as _,uo as a,rt as b,ae as n,co as r,Be as u};
