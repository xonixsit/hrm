import{e as v,f as x,g as U,o as h,h as l,k as n,Q as d,a as e,c as f,i as _,u as b,l as W,t as o,w as O,b as R}from"./app-DaiGH31u.js";import{_ as I}from"./AuthenticatedLayout-DKEvdzky.js";import{P as L}from"./PageLayout-XFRO5kDZ.js";import{D as Q}from"./DataTable-CAnD1wVv.js";import{C as H}from"./ContentCard-DgpqqaEH.js";import{B as Y}from"./BaseSelect-stSyaWqM.js";import{c as G,r as J,d as K,p as X,h as Z}from"./Icon-1UFbtoY8.js";import{r as ee}from"./ArrowPathIcon-6TMSIu6t.js";import"./useAuth-Bwiv_Ugw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-C7Dil9iA.js";import"./useAccessibility-DeguC9vc.js";import"./PageHeader-Dx7dIjWl.js";/* empty css                                                                   *//* empty css                                                                   */import"./BaseButton-B_xPq1JI.js";/* empty css                                                                   */import"./BaseInput-DRFlF4fc.js";/* empty css                                                                  */import"./BaseMultiSelect-CGVf8c9w.js";/* empty css                                                                        *//* empty css                                                                  */import"./BaseCheckbox-cK8gz9eD.js";/* empty css                                                                     *//* empty css                                                                    *//* empty css                                                                   */const te={class:"bg-white rounded-lg shadow-sm overflow-hidden"},re={class:"border-b border-gray-200 bg-red-50 px-6 py-4"},se={class:"flex items-center justify-between mb-4"},ae={class:"flex items-center"},oe={class:"bg-red-100 border border-red-200 rounded-md p-3 mb-4"},le={class:"flex"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ne={class:"flex items-end"},de={class:"flex items-center space-x-3"},me={class:"flex-shrink-0 relative"},ce={class:"w-10 h-10 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center ring-2 ring-white shadow-sm opacity-75"},pe={class:"text-sm font-semibold text-gray-600"},ue={class:"min-w-0 flex-1"},he={class:"font-semibold text-gray-700 truncate"},ye={class:"flex items-center space-x-2 text-sm text-gray-500"},fe={class:"truncate"},ge={class:"text-sm text-gray-600"},ve={class:"text-sm text-gray-600"},be={key:0},xe={key:1,class:"italic"},_e={class:"text-sm text-gray-600"},we={class:"text-sm"},ke={class:"text-gray-900"},De={class:"text-gray-500"},Ke={__name:"Trash",props:{employees:{type:Object,required:!0},filters:{type:Object,default:()=>({})},queryParams:{type:Object,default:()=>({})}},setup(m){const c=m,i=v(!1),y=v(!1),s=v({department_id:c.queryParams.filter_department||"",search:c.queryParams.search||""}),w=x(()=>[{value:"",label:"All departments"},...(c.filters.departments||[]).map(r=>({value:r.id.toString(),label:r.name}))]),k=x(()=>s.value.department_id||s.value.search),D=[{label:"Dashboard",href:route("dashboard")},{label:"Employees",href:route("employees.index")},{label:"Deleted Employees",current:!0}],P=[{id:"back-to-employees",label:"Back to Employees",icon:G,variant:"secondary",handler:()=>d.visit(route("employees.index"))}],S=[{key:"name",label:"Employee",sortable:!0,minWidth:"200px",priority:"high"},{key:"email",label:"Email",sortable:!0,minWidth:"220px",priority:"high"},{key:"department",label:"Department",sortable:!0,minWidth:"140px",priority:"high"},{key:"job_title",label:"Position",sortable:!0,minWidth:"150px",priority:"medium"},{key:"deleted_at",label:"Deleted Date",sortable:!0,minWidth:"120px",priority:"high"}],A=r=>[{id:"restore",label:"Restore Employee",icon:ee,variant:"success",handler:()=>$(r.id)},{id:"force-delete",label:"Delete Permanently",icon:Z,variant:"danger",handler:()=>j(r.id)}],C={title:"No deleted employees found",description:"There are no deleted employees to display.",icon:"trash",actions:[{id:"back-to-employees",label:"Back to Employees",variant:"primary",handler:()=>d.visit(route("employees.index"))}]},E=r=>r.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),T=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",F=r=>{if(!r)return"";const t=new Date(r),z=Math.abs(new Date-t),p=Math.ceil(z/(1e3*60*60*24));if(p<30)return`${p} days ago`;if(p<365){const u=Math.floor(p/30);return`${u} month${u>1?"s":""} ago`}else{const u=Math.floor(p/365);return`${u} year${u>1?"s":""} ago`}},$=r=>{confirm("Are you sure you want to restore this employee? They will become active again.")&&(i.value=!0,d.post(route("employees.restore",r),{},{onFinish:()=>{i.value=!1},onError:()=>{alert("Failed to restore employee. Please try again.")}}))},j=r=>{confirm("Are you sure you want to permanently delete this employee? This action cannot be undone and will remove all their data.")&&(i.value=!0,d.delete(route("employees.force-delete",r),{onFinish:()=>{i.value=!1},onError:()=>{alert("Failed to permanently delete employee. Please try again.")}}))},N=({action:r,row:t})=>{r.handler&&r.handler()},g=()=>{i.value=!0;const r={page:1,per_page:c.employees.per_page||10};s.value.department_id&&(r.filter_department=s.value.department_id),s.value.search&&(r.search=s.value.search),d.get(route("employees.trash"),r,{preserveState:!0,preserveScroll:!0,onFinish:()=>{i.value=!1}})},B=()=>{s.value={department_id:"",search:""},g()},V=()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{g()},500)},q=r=>{const t={...c.queryParams,page:r};s.value.department_id&&(t.filter_department=s.value.department_id),s.value.search&&(t.search=s.value.search),d.visit(route("employees.trash",t),{preserveState:!0,preserveScroll:!0})},M=r=>{const t={...c.queryParams,per_page:r,page:1};s.value.department_id&&(t.filter_department=s.value.department_id),s.value.search&&(t.search=s.value.search),d.visit(route("employees.trash",t),{preserveState:!0,preserveScroll:!0})};return(r,t)=>(h(),U(I,null,{default:l(()=>[n(L,{title:"Deleted Employees",subtitle:"Manage soft-deleted employees - restore or permanently delete",breadcrumbs:D,actions:P},{default:l(()=>[e("div",te,[e("div",re,[e("div",se,[e("div",ae,[n(b(J),{class:"h-5 w-5 text-red-600 mr-2"}),t[3]||(t[3]=e("h3",{class:"text-lg font-medium text-red-900"},"Deleted Employee Records",-1))]),e("button",{onClick:t[0]||(t[0]=a=>y.value=!y.value),class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[n(b(K),{class:"w-4 h-4 mr-2"}),W(" "+o(y.value?"Hide Filters":"Show Filters"),1)])]),e("div",oe,[e("div",le,[n(b(X),{class:"h-5 w-5 text-red-400 mr-2 flex-shrink-0 mt-0.5"}),t[4]||(t[4]=e("div",{class:"text-sm text-red-700"},[e("p",{class:"font-medium"},"These employees have been removed from the system"),e("p",{class:"mt-1"},"You can restore them to make them active again, or permanently delete them to free up space.")],-1))])]),y.value?(h(),f("div",ie,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),n(Y,{modelValue:s.value.department_id,"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.department_id=a),options:w.value,placeholder:"All departments",class:"w-full",onChange:g},null,8,["modelValue","options"])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),O(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.search=a),type:"text",placeholder:"Name, email, job title...",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm",onInput:V},null,544),[[R,s.value.search]])]),e("div",ne,[k.value?(h(),f("button",{key:0,onClick:B,class:"w-full px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Clear Filters ")):_("",!0)])])):_("",!0)]),n(H,{class:"border-0 shadow-none"},{default:l(()=>[n(Q,{data:m.employees.data,columns:S,loading:i.value,"row-actions":A,"empty-state":C,"show-footer":!0,"server-side-pagination":!0,"current-page":m.employees.current_page,"total-pages":m.employees.last_page,"total-items":m.employees.total,"page-size":m.employees.per_page,"page-size-options":[10,25,50,100],onRowAction:N,onPageChange:q,onPageSizeChange:M,class:"w-full"},{"cell-name":l(({row:a})=>[e("div",de,[e("div",me,[e("div",ce,[e("span",pe,o(E(a.user.name)),1)]),t[7]||(t[7]=e("div",{class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-red-500 border-2 border-white rounded-full"},null,-1))]),e("div",ue,[e("div",he,o(a.user.name),1),e("div",ye,[e("span",fe,o(a.employee_code||"No code"),1),t[8]||(t[8]=e("span",{class:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"}," Deleted ",-1))])])])]),"cell-email":l(({row:a})=>[e("div",ge,o(a.user.email),1)]),"cell-department":l(({row:a})=>[e("div",ve,[a.department?(h(),f("span",be,o(a.department.name),1)):(h(),f("span",xe," Unassigned "))])]),"cell-job_title":l(({row:a})=>[e("div",_e,o(a.job_title||"N/A"),1)]),"cell-deleted_at":l(({row:a})=>[e("div",we,[e("div",ke,o(T(a.deleted_at)),1),e("div",De,o(F(a.deleted_at)),1)])]),_:1},8,["data","loading","current-page","total-pages","total-items","page-size"])]),_:1})])]),_:1})]),_:1}))}};export{Ke as default};
