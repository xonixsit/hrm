import{f as _,e as z,Q as k,g,o as n,h as x,k as i,c as l,i as m,a as e,t as o,u as c,S as f,l as y,n as p,q as H,F as b,r as h}from"./app-BytV3NLt.js";import{r as P,A as Q}from"./AuthenticatedLayout-DSlPIyHJ.js";import{P as q}from"./PageLayout-DMycchJE.js";import{c as I,i as S,m as G,a as J,e as K}from"./icons-GnoQim57.js";import{a as W}from"./UsersIcon-BeiHXz-C.js";import"./useAuth-DT3MxvSe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-sT15H1YV.js";import"./Icon--yXFOfGw.js";const X={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md"},Y={class:"text-sm text-green-800"},Z={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},ee={class:"text-sm text-red-800"},te={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},se={class:"lg:col-span-2 space-y-6"},re={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ae={class:"p-6"},ne={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oe={class:"mt-1"},le={class:"mt-1"},de={class:"flex items-center"},ce={class:"flex-1 bg-gray-200 rounded-full h-2 mr-3"},ie={class:"text-sm font-medium text-gray-900"},me={class:"mt-1 text-sm text-gray-900"},ue={class:"mt-1 text-sm text-gray-900"},ye={class:"mt-1 text-sm text-gray-900"},ge={class:"mt-1 text-sm text-gray-900"},xe={key:0,class:"mt-6"},fe={class:"mt-1 text-sm text-gray-700"},pe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},be={class:"overflow-x-auto"},he={class:"min-w-full divide-y divide-gray-200"},ve={class:"bg-white divide-y divide-gray-200"},we={class:"px-6 py-4 whitespace-nowrap"},_e={class:"text-sm font-medium text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Se={class:"text-sm text-gray-900"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},$e={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap"},je={key:0,class:"flex items-center"},Ee={class:"flex"},Te={class:"ml-2 text-sm text-gray-600"},Le={key:1,class:"text-sm text-gray-400"},Pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Fe={class:"flex items-center justify-end space-x-2"},Be={key:0,class:"px-6 py-3 border-t border-gray-200"},Ne={class:"flex items-center justify-between"},Ve={class:"text-sm text-gray-700"},Me={class:"flex space-x-1"},Oe={class:"space-y-6"},Re={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ue={class:"p-6 space-y-3"},ze={key:0,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-md"},He={class:"flex"},Qe={class:"text-sm text-yellow-800"},qe=["disabled"],Ie={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ge={class:"p-6 space-y-3"},Je=["disabled"],Ke={class:"bg-white rounded-lg shadow-sm border border-gray-200"},We={class:"p-6"},Xe={class:"space-y-2"},lt={__name:"Show",props:{cycle:Object,assessments:Object},setup(r){const d=r,F=_(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Assessment Cycles",href:route("assessment-cycle-manager")},{label:d.cycle.name,href:null}]),B=_(()=>{const s=[{label:"Back to Cycles",href:route("assessment-cycle-manager"),icon:I,variant:"secondary"}];return(d.cycle.status==="planned"||d.cycle.status==="draft")&&s.push({label:"Edit Cycle",href:route("assessment-cycles.edit",d.cycle.id),icon:S,variant:"secondary"}),d.cycle.status==="planned"&&!v.value&&s.push({label:"Start Cycle",onClick:A,icon:P,variant:"primary",disabled:u.value}),s}),u=z(!1),v=_(()=>new Date(d.cycle.start_date)>new Date),A=()=>{confirm(`Are you sure you want to start the "${d.cycle.name}" assessment cycle?`)&&(u.value=!0,k.post(route("assessment-cycles.start",d.cycle.id),{},{onSuccess:s=>{},onError:s=>{console.error("Start cycle error:",s)},onFinish:()=>{u.value=!1}}))},N=()=>{confirm(`Are you sure you want to complete the "${d.cycle.name}" assessment cycle?`)&&(u.value=!0,k.post(route("assessment-cycles.complete",d.cycle.id),{},{onSuccess:s=>{},onError:s=>{console.error("Complete cycle error:",s)},onFinish:()=>{u.value=!1}}))},V=()=>{const s=new URLSearchParams({assessment_cycle_id:d.cycle.id,assessment_type:"manager"}),t=`${route("competency-assessments.create")}?${s.toString()}`;k.visit(t)},M=s=>({planned:"Planned",active:"Active",completed:"Completed",cancelled:"Cancelled"})[s]||s,O=s=>({planned:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-teal-100 text-teal-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",C=s=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360Â° Feedback"})[s]||s,R=s=>({draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected"})[s]||s,U=s=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",w=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(s,t)=>(n(),g(Q,null,{default:x(()=>[i(q,{title:r.cycle.name,subtitle:"Assessment cycle details and progress",breadcrumbs:F.value,actions:B.value},{default:x(()=>{var $,D;return[($=s.$page.props.flash)!=null&&$.success?(n(),l("div",X,[e("p",Y,o(s.$page.props.flash.success),1)])):m("",!0),(D=s.$page.props.flash)!=null&&D.error?(n(),l("div",Z,[e("p",ee,o(s.$page.props.flash.error),1)])):m("",!0),r.cycle.status==="planned"?(n(),g(c(f),{key:2,href:s.route("assessment-cycles.edit",r.cycle.id),class:"inline-flex items-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},{default:x(()=>[i(c(S),{class:"w-4 h-4 mr-2"}),t[0]||(t[0]=y(" Edit Cycle "))]),_:1,__:[0]},8,["href"])):m("",!0),e("div",te,[e("div",se,[e("div",re,[t[8]||(t[8]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Cycle Overview")],-1)),e("div",ae,[e("dl",ne,[e("div",null,[t[1]||(t[1]=e("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("dd",oe,[e("span",{class:p([O(r.cycle.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(M(r.cycle.status)),3)])]),e("div",null,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500"},"Progress",-1)),e("dd",le,[e("div",de,[e("div",ce,[e("div",{class:"bg-teal-600 h-2 rounded-full",style:H({width:`${r.cycle.completion_percentage||0}%`})},null,4)]),e("span",ie,o(r.cycle.completion_percentage||0)+"%",1)])])]),e("div",null,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500"},"Start Date",-1)),e("dd",me,o(w(r.cycle.start_date)),1)]),e("div",null,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500"},"End Date",-1)),e("dd",ue,o(w(r.cycle.end_date)),1)]),e("div",null,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500"},"Participants",-1)),e("dd",ye,o(r.cycle.participant_count||0),1)]),e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Total Assessments",-1)),e("dd",ge,o(r.cycle.assessment_count||0),1)])]),r.cycle.description?(n(),l("div",xe,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("dd",fe,o(r.cycle.description),1)])):m("",!0)])]),e("div",pe,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Assessments")],-1)),e("div",be,[e("table",he,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Competency "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ve,[(n(!0),l(b,null,h(r.assessments.data,a=>{var j,E,T;return n(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",we,[e("div",_e,o(((E=(j=a.employee)==null?void 0:j.user)==null?void 0:E.name)||"Unknown"),1)]),e("td",ke,[e("div",Se,o((T=a.competency)==null?void 0:T.name),1)]),e("td",Ae,[e("span",Ce,o(C(a.assessment_type)),1)]),e("td",$e,[e("span",{class:p([U(a.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(R(a.status)),3)]),e("td",De,[a.rating?(n(),l("div",je,[e("div",Ee,[(n(),l(b,null,h(5,L=>i(c(W),{key:L,class:p([L<=a.rating?"text-yellow-400":"text-gray-300","h-4 w-4"])},null,8,["class"])),64))]),e("span",Te,o(a.rating)+"/5",1)])):(n(),l("span",Le,"Not rated"))]),e("td",Pe,[e("div",Fe,[a.status==="draft"?(n(),g(c(f),{key:0,href:s.route("competency-assessments.evaluate",a.id),class:"inline-flex items-center px-3 py-1 bg-teal-600 text-white text-xs font-medium rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},{default:x(()=>[i(c(S),{class:"w-3 h-3 mr-1"}),t[9]||(t[9]=y(" Assess "))]),_:2,__:[9]},1032,["href"])):(n(),g(c(f),{key:1,href:s.route("competency-assessments.show",a.id),class:"text-teal-600 hover:text-teal-900 text-sm"},{default:x(()=>t[10]||(t[10]=[y(" View ")])),_:2,__:[10]},1032,["href"]))])])])}),128))])])]),r.assessments.links?(n(),l("div",Be,[e("div",Ne,[e("div",Ve," Showing "+o(r.assessments.from)+" to "+o(r.assessments.to)+" of "+o(r.assessments.total)+" results ",1),e("div",Me,[(n(!0),l(b,null,h(r.assessments.links,a=>(n(),g(c(f),{key:a.label,href:a.url,class:p(["px-3 py-2 text-sm font-medium rounded-md",a.active?"bg-teal-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"]),innerHTML:a.label},null,8,["href","class","innerHTML"]))),128))])])])):m("",!0)])]),e("div",Oe,[r.cycle.status==="planned"?(n(),l("div",Re,[t[15]||(t[15]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Actions")],-1)),e("div",Ue,[v.value?(n(),l("div",ze,[e("div",He,[i(c(G),{class:"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0"}),e("div",Qe,[t[13]||(t[13]=e("p",{class:"font-medium"},"Scheduled Start",-1)),e("p",null,"This cycle is scheduled to start on "+o(w(r.cycle.start_date))+".",1),t[14]||(t[14]=e("p",{class:"mt-1 text-xs"},"As an admin, you can start it early if needed.",-1))])])])):m("",!0),e("button",{onClick:A,disabled:u.value,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},[i(c(P),{class:"w-4 h-4 mr-2"}),y(" "+o(v.value?"Start Early":"Start Cycle"),1)],8,qe)])])):m("",!0),r.cycle.status==="active"?(n(),l("div",Ie,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Actions")],-1)),e("div",Ge,[e("button",{onClick:V,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[i(c(J),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=y(" Create Assessment "))]),e("button",{onClick:N,disabled:u.value,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50"},[i(c(K),{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=y(" Complete Cycle "))],8,Je)])])):m("",!0),e("div",Ke,[t[19]||(t[19]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Assessment Types")],-1)),e("div",We,[e("div",Xe,[(n(!0),l(b,null,h(r.cycle.assessment_types,a=>(n(),l("span",{key:a,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800 mr-2 mb-2"},o(C(a)),1))),128))])])])])])]}),_:1},8,["title","breadcrumbs","actions"])]),_:1}))}};export{lt as default};
