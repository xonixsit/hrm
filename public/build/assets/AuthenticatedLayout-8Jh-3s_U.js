import{e as A,f as k,z as U,B as te,c as m,i as N,o as d,a as t,t as S,y as fe,F as q,r as Y,n as u,u as c,w as ce,p as de,Q as we,g as ee,s as me,A as re,l as ae,q as ke,C as xe,M as ve,k as O,h as se,N as be,O as _e,d as Ae,P as Te,S as ue,J as pe,R as Ie}from"./app-DTH-eNCe.js";import{u as he}from"./useAuth-DUwMw6HR.js";import{B as ge,C as Be,p as Se}from"./icons-BZnEJAqD.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Ee={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Me={class:"flex items-start"},$e={class:"ml-3 flex-1"},Ne={class:"mt-1 text-sm text-red-700"},Fe={key:0,class:"mt-3"},De={__name:"NavigationErrorDisplay",setup(h){const a=A(!1),s=A(""),e=A(null),r=A(null),p=k(()=>s.value.includes("log in")?"Go to Login":s.value.includes("permission")?"Go to Dashboard":s.value.includes("network")?"Reload Page":"Try Again"),n=(C,T=null)=>{s.value=C,e.value=T,a.value=!0,r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{_()},1e4)},v=async()=>{if(e.value)try{await e.value()}catch(C){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",C)}_()},_=()=>{a.value=!1,s.value="",e.value=null,r.value&&(clearTimeout(r.value),r.value=null)};return U(()=>{typeof window<"u"&&(window.showNavigationError=n)}),te(()=>{typeof window<"u"&&delete window.showNavigationError,r.value&&clearTimeout(r.value)}),(C,T)=>a.value?(d(),m("div",Ce,[t("div",Ee,[t("div",Me,[T[2]||(T[2]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",$e,[T[0]||(T[0]=t("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),t("div",Ne,S(s.value),1),e.value?(d(),m("div",Fe,[t("button",{onClick:v,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},S(p.value),1)])):N("",!0)]),t("div",{class:"ml-4 flex-shrink-0"},[t("button",{onClick:_,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},T[1]||(T[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):N("",!0)}},J=A("light"),Q=A("light"),Z=A(!1),oe={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ye(){const h=k(()=>Z.value?Q.value:J.value),a=k(()=>oe[h.value]),s=k(()=>h.value==="dark"),e=k(()=>h.value==="light"),r=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(o){return console.warn("Failed to detect system theme:",o),"light"}},p=(o,i=!1)=>{try{const E={theme:$(o)?o:"light",useSystem:!!i,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(x){console.warn("Failed to save theme preference:",x);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},n=()=>{try{const o=localStorage.getItem("theme-preference");if(o){const i=JSON.parse(o);if(typeof i=="object"&&i!==null){const x=$(i.theme)?i.theme:"light",E=typeof i.useSystem=="boolean"?i.useSystem:!1;return{theme:x,useSystem:E,timestamp:i.timestamp||null,version:i.version||1}}}}catch(o){console.warn("Failed to load theme preference:",o);try{localStorage.removeItem("theme-preference")}catch(i){console.warn("Failed to clear corrupted theme preference:",i)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},v=o=>{if(!(typeof document>"u"))try{const i=document.documentElement,x=$(o)?o:"light";i.classList.remove("theme-light","theme-dark","dark","light"),i.classList.add(`theme-${x}`),x==="dark"&&i.classList.add("dark"),_(x);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:x,config:oe[x]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(i){console.error("Failed to apply theme:",i);try{const x=document.documentElement;x.classList.remove("theme-light","theme-dark","dark","light"),x.classList.add("theme-light"),_("light")}catch(x){console.error("Failed to apply fallback theme:",x)}}},_=o=>{if(!(typeof document>"u"))try{const i=document.documentElement;o==="dark"?(i.style.setProperty("--color-neutral-50","#0a0a0a"),i.style.setProperty("--color-neutral-100","#111827"),i.style.setProperty("--color-neutral-200","#262626"),i.style.setProperty("--color-neutral-300","#404040"),i.style.setProperty("--color-neutral-400","#525252"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#a3a3a3"),i.style.setProperty("--color-neutral-700","#d4d4d4"),i.style.setProperty("--color-neutral-800","#e5e5e5"),i.style.setProperty("--color-neutral-900","#fafafa"),i.style.setProperty("--color-neutral-950","#ffffff")):(i.style.setProperty("--color-neutral-50","#fafafa"),i.style.setProperty("--color-neutral-100","#f5f5f5"),i.style.setProperty("--color-neutral-200","#e5e5e5"),i.style.setProperty("--color-neutral-300","#d4d4d4"),i.style.setProperty("--color-neutral-400","#a3a3a3"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#525252"),i.style.setProperty("--color-neutral-700","#404040"),i.style.setProperty("--color-neutral-800","#262626"),i.style.setProperty("--color-neutral-900","#111827"),i.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(i){console.warn("Failed to update theme properties:",i)}},C=o=>{v(o)},T=o=>{if(!oe[o]){console.warn(`Theme "${o}" not found`);return}J.value=o,Z.value=!1,p(o,!1),v(o)},f=()=>{Z.value=!0;const o=r();Q.value=o,p(o,!0),v(o)},I=()=>{const o=h.value==="light"?"dark":"light";T(o)},B=()=>{if(typeof window>"u")return;const o=window.matchMedia("(prefers-color-scheme: dark)"),i=x=>{const E=x.matches?"dark":"light";Q.value=E,Z.value&&(C(E),p(E,!0))};return o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},$=o=>oe.hasOwnProperty(o),V=()=>Object.values(oe),K=()=>{},P=()=>{const o=[];if($(J.value)||o.push(`Invalid current theme: ${J.value}`),$(Q.value)||o.push(`Invalid system theme: ${Q.value}`),$(h.value)||o.push(`Invalid active theme: ${h.value}`),typeof document<"u"){const i=document.documentElement,x=i.classList.contains("theme-light"),E=i.classList.contains("theme-dark");!x&&!E&&o.push("No theme class found on document root"),x&&E&&o.push("Multiple theme classes found on document root");const j=`theme-${h.value}`;i.classList.contains(j)||o.push(`Expected theme class ${j} not found on document root`)}return{isValid:o.length===0,issues:o}},G=()=>{if(!(typeof document>"u"))try{const o=document.documentElement;return["theme-light","theme-dark"].forEach(x=>{o.classList.remove(x)}),!0}catch(o){return console.warn("Failed to cleanup theme classes:",o),!1}},z=()=>{try{J.value="light",Q.value=r(),Z.value=!1;try{localStorage.removeItem("theme-preference")}catch(o){console.warn("Failed to clear theme preference from localStorage:",o)}return v("light"),!0}catch(o){return console.error("Failed to reset theme to default:",o),!1}},R=()=>{console.warn("Attempting theme system recovery...");try{if(G(),z())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(o){console.error("Theme system recovery failed:",o);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(i){return console.error("Last resort theme recovery failed:",i),!1}}},g=()=>{try{const o=n();return Q.value=r(),o.useSystem?(Z.value=!0,J.value=Q.value):(Z.value=!1,J.value=o.theme),v(h.value),B()}catch(o){console.error("Theme initialization failed:",o);try{J.value="light",Q.value="light",Z.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(i){console.error("Emergency theme fallback failed:",i)}return null}};return U(()=>{g()}),fe(h,o=>{C(o)}),{currentTheme:k(()=>J.value),systemTheme:k(()=>Q.value),activeTheme:h,themeConfig:a,isDark:s,isLight:e,isSystemThemePreferred:k(()=>Z.value),setTheme:T,toggleTheme:I,useSystemTheme:f,validateTheme:$,getAvailableThemes:V,debugThemeState:K,initializeTheme:g,validateThemeState:P,cleanupThemeClasses:G,resetThemeToDefault:z,recoverThemeSystem:R,cleanupAndApplyTheme:v,themes:k(()=>oe)}}const Le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pe={class:"flex justify-between items-center h-20"},ze={class:"flex items-center space-x-6"},Oe={class:"hidden lg:flex space-x-1"},Re=["href"],je={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},We={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ve={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={class:"hidden xl:inline"},Qe={class:"relative assessment-menu"},Ue={class:"p-2 space-y-1"},Je=["href"],Ze={class:"relative more-menu"},qe={class:"p-2"},Ye={key:0,class:"space-y-1"},Xe={class:"space-y-1"},Ke=["href"],et={class:"space-y-1 mt-1"},tt=["href"],ot={class:"flex items-center space-x-3"},at={class:"relative user-menu"},rt={class:"hidden lg:block text-left"},st={class:"font-medium text-sm"},nt={class:"p-2"},lt={class:"py-1 space-y-1"},it=["href"],ct={class:"space-y-1 mt-1"},dt=["href"],ut={class:"md:hidden px-4 pb-3 mobile-menu"},mt={class:"mt-3 space-y-2"},ht=["href"],vt={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(h){var R;const a=h,{user:s,roles:e}=he(),{isDark:r}=ye(),p=A(!1),n=A(!1),v=A(!1),_=A(!1);console.log("IntegratedTopNav - User:",s.value),console.log("IntegratedTopNav - Roles:",e.value),console.log("IntegratedTopNav - Is Admin:",(R=e.value)==null?void 0:R.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const C=k(()=>{var g;return(g=s.value)!=null&&g.name?s.value.name.split(" ").map(o=>o[0]).join("").toUpperCase():"U"}),T=k(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Applications"}]),f=k(()=>{const g=e.value||[],o=Array.isArray(g)?g:[],i=o.includes("Admin")||o.includes("Manager")||o.includes("HR"),x=[{route:"competency-assessments.my-assessments",label:"My Assessments"}];return i&&x.push({route:"competency-assessments.index",label:"All Assessments"},{route:"assessment-dashboard",label:"Assessment Dashboard"},{route:"competency-assessments.pending",label:"Pending Assessments"},{route:"assessment-cycle-manager",label:"Assessment Cycles"},{route:"competencies.index",label:"Competency Setup"}),x}),I=k(()=>{try{const g=e.value||[],o=Array.isArray(g)?g:[],i=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"employee-handbook",label:"Employee Handbook",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],x=o.includes("Admin")||o.includes("Manager")||o.includes("HR"),E=o.includes("Admin");return x&&i.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"leave-types.index",label:"Leave Policies",category:"management"},{route:"support.index",label:"Support Management",category:"management"}),E&&i.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"leave-types.index",label:"Leave Policies",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"reports.index",label:"View Reports",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),i}catch(g){return console.error("Error computing moreNavItems:",g),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),B=k(()=>I.value.filter(g=>g.category==="regular")),$=k(()=>I.value.filter(g=>g.category==="management")),V=k(()=>I.value.filter(g=>g.category==="admin")),K=k(()=>[...T.value,...I.value]),P=g=>{var o;return a.currentRoute===g||((o=a.currentRoute)==null?void 0:o.startsWith(g.split(".")[0]))},G=()=>{we.post(route("logout"))},z=g=>{const o=g.target;o.closest(".assessment-menu")||(n.value=!1),o.closest(".more-menu")||(p.value=!1),o.closest(".user-menu")||(v.value=!1),o.closest(".mobile-menu")||(_.value=!1)};return U(()=>{document.addEventListener("click",z)}),te(()=>{document.removeEventListener("click",z)}),(g,o)=>{var i,x,E,j;return d(),m("nav",{class:u(["w-full transition-all duration-200 sticky top-0 z-50",c(r)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-600 border-b border-teal-700/60 shadow-lg shadow-teal-900/20 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[t("div",Le,[t("div",Pe,[t("div",ze,[o[17]||(o[17]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"flex items-center bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg hover:bg-white hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-white/20"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain filter drop-shadow-sm"})])],-1)),t("div",Oe,[(d(!0),m(q,null,Y(T.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",P(y.route)?c(r)?"bg-teal-600/20 text-teal-300":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[y.route==="dashboard"?(d(),m("svg",je,o[4]||(o[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):y.route==="attendances.index"?(d(),m("svg",We,o[5]||(o[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):y.route==="leaves.index"?(d(),m("svg",He,o[6]||(o[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(d(),m("svg",Ve,o[7]||(o[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),t("span",Ge,S(y.label),1)],10,Re))),128)),t("div",Qe,[t("button",{onClick:o[0]||(o[0]=y=>n.value=!n.value),class:u(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",n.value?c(r)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[o[9]||(o[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o[10]||(o[10]=t("span",{class:"hidden xl:inline"},"Assessments",-1)),(d(),m("svg",{class:u(["w-4 h-4 transition-transform duration-200",{"rotate-180":n.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[8]||(o[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:u(["absolute left-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",c(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",Ue,[(d(!0),m(q,null,Y(f.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?c(r)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[o[11]||(o[11]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,S(y.label),1)],10,Je))),128))])],2),[[de,n.value]])]),t("div",Ze,[t("button",{onClick:o[1]||(o[1]=y=>p.value=!p.value),class:u(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",p.value?c(r)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[o[13]||(o[13]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),o[14]||(o[14]=t("span",{class:"hidden xl:inline"},"More",-1)),(d(),m("svg",{class:u(["w-4 h-4 transition-transform duration-200",{"rotate-180":p.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[12]||(o[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:u(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",c(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",qe,[I.value.length>0?(d(),m("div",Ye,[t("div",Xe,[(d(!0),m(q,null,Y(B.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?c(r)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[o[15]||(o[15]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,S(y.label),1)],10,Ke))),128))]),$.value.length>0?(d(),m("div",{key:0,class:u(["border-t pt-2 mt-2",c(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:u(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",c(r)?"text-gray-400":"text-gray-500"])}," Management ",2),t("div",et,[(d(!0),m(q,null,Y($.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?c(r)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[o[16]||(o[16]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0891B2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("span",null,S(y.label),1)],10,tt))),128))])],2)):N("",!0)])):N("",!0)])],2),[[de,p.value]])])])]),t("div",ot,[t("div",at,[t("button",{onClick:o[2]||(o[2]=y=>v.value=!v.value),class:u(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",v.value?c(r)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[t("div",{class:u(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",c(r)?"bg-teal-600 text-white":"bg-teal-500 text-white"])},S(C.value),3),t("div",rt,[t("div",st,S((i=c(s))==null?void 0:i.name),1),t("div",{class:u(["text-xs",c(r)?"text-gray-400":"text-white/70"])},S(((x=c(e))==null?void 0:x.join(", "))||"User"),3)]),(d(),m("svg",{class:u(["w-4 h-4 transition-transform duration-200",{"rotate-180":v.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[18]||(o[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:u(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",c(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",nt,[t("div",{class:u(["px-3 py-2 border-b",c(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:u(["font-medium",c(r)?"text-white":"text-gray-900"])},S((E=c(s))==null?void 0:E.name),3),t("div",{class:u(["text-sm",c(r)?"text-gray-400":"text-gray-500"])},S((j=c(s))==null?void 0:j.email),3)],2),t("div",lt,[t("a",{href:g.route("profile.edit"),class:u(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},o[19]||(o[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",null,"Profile Settings",-1)]),10,it),V.value.length>0?(d(),m("div",{key:0,class:u(["border-t pt-2 mt-2",c(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:u(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",c(r)?"text-red-400":"text-red-600"])},o[20]||(o[20]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",null,"Admin",-1)]),2),t("div",ct,[(d(!0),m(q,null,Y(V.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?c(r)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[o[21]||(o[21]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,S(y.label),1)],10,dt))),128))])],2)):N("",!0),t("div",{class:u(["border-t pt-2 mt-2",c(r)?"border-gray-700":"border-gray-200"])},[t("button",{onClick:G,class:u(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},o[22]||(o[22]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",null,"Sign Out",-1)]))],2)])])],2),[[de,v.value]])])])])]),t("div",ut,[t("button",{onClick:o[3]||(o[3]=y=>_.value=!_.value),class:u(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",c(r)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[o[24]||(o[24]=t("span",null,"Menu",-1)),(d(),m("svg",{class:u(["w-5 h-5 transition-transform duration-200",{"rotate-180":_.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[23]||(o[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",mt,[(d(!0),m(q,null,Y(K.value,y=>(d(),m("a",{key:y.route,href:g.route(y.route),class:u(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?c(r)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},S(y.label),11,ht))),128))],512),[[de,_.value]])])],2)}}};function gt(h,a){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function ft(h,a){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const pt=["aria-live"],yt={class:"toast-content"},kt={key:0,class:"toast-icon"},bt={class:"toast-message"},wt={key:0,class:"toast-title"},xt={class:"toast-text"},_t={key:1,class:"toast-actions"},At=["aria-label"],Tt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:h=>["success","error","warning","info","loading"].includes(h)},position:{type:String,default:"top-right",validator:h=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(h)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:h=>["low","normal","high"].includes(h)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:h=>["sm","md","lg"].includes(h)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(h,{expose:a,emit:s}){const e=h,r=s,p=A(!1),n=A(null),v=A(null),_=A(100),C=A(!1),T=A(0),f=A(0),I=k(()=>ge("x-mark")),B=k(()=>{if(e.icon)return ge(e.icon);const D={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return ge(D[e.type]||D.info)}),$=k(()=>["toast-notification",`toast-notification--${e.type}`,`toast-notification--${e.size}`,`toast-notification--${e.position}`,{"toast-notification--with-title":e.title,"toast-notification--persistent":e.persistent,"toast-notification--with-action":e.actionText}]),V=k(()=>({zIndex:e.zIndex})),K=k(()=>["w-5 h-5",{"animate-spin":e.type==="loading"}]),P=k(()=>e.closable||e.actionText),G=k(()=>[`toast-progress--${e.type}`]),z=k(()=>({width:`${_.value}%`})),R=()=>{p.value=!0,e.sound&&le(),!e.persistent&&e.duration>0&&i()},g=()=>{p.value=!1,y(),r("close")},o=()=>{r("action"),e.persistent||g()},i=()=>{e.duration<=0||(T.value=Date.now(),f.value=e.duration,n.value=setTimeout(()=>{g()},e.duration),x())},x=()=>{if(!e.showProgress)return;const D=Date.now(),W=()=>{if(!p.value||C.value)return;const ie=Date.now()-D,l=Math.max(0,100-ie/e.duration*100);_.value=l,l>0&&(v.value=requestAnimationFrame(W))};W()},E=()=>{if(!n.value||e.persistent)return;C.value=!0,clearTimeout(n.value),cancelAnimationFrame(v.value);const D=Date.now()-T.value;f.value=Math.max(0,e.duration-D)},j=()=>{!C.value||e.persistent||(C.value=!1,f.value>0&&(T.value=Date.now(),n.value=setTimeout(()=>{g()},f.value),x()))},y=()=>{n.value&&(clearTimeout(n.value),n.value=null),v.value&&(cancelAnimationFrame(v.value),v.value=null)},le=()=>{try{const D=new Audio,W={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};D.src=W[e.type]||W.info,D.volume=.3,D.play().catch(()=>{})}catch{}};return U(()=>{R()}),te(()=>{y()}),fe(()=>e.duration,()=>{p.value&&!e.persistent&&(y(),i())}),a({show:R,close:g,pauseTimer:E,resumeTimer:j}),(D,W)=>(d(),ee(xe,{to:"body"},[p.value?(d(),m("div",{key:0,class:u($.value),style:ke(V.value),role:"alert","aria-live":h.priority==="high"?"assertive":"polite",onMouseenter:E,onMouseleave:j},[t("div",yt,[h.showIcon?(d(),m("div",kt,[(d(),ee(me(B.value),{class:u(K.value)},null,8,["class"]))])):N("",!0),t("div",bt,[h.title?(d(),m("div",wt,S(h.title),1)):N("",!0),t("div",xt,[re(D.$slots,"default",{},()=>[ae(S(h.message),1)],!0)])]),P.value?(d(),m("div",_t,[h.actionText?(d(),m("button",{key:0,onClick:o,class:"toast-action-button"},S(h.actionText),1)):N("",!0),h.closable?(d(),m("button",{key:1,onClick:g,class:"toast-close-button","aria-label":h.closeLabel},[(d(),ee(me(I.value),{class:"w-4 h-4"}))],8,At)):N("",!0)])):N("",!0)]),h.showProgress&&h.duration>0?(d(),m("div",{key:0,class:u(["toast-progress",G.value]),style:ke(z.value)},null,6)):N("",!0)],46,pt)):N("",!0)]))}},It=ne(Tt,[["__scopeId","data-v-11baa49e"]]);class Bt{constructor(){this.notifications=ve([]),this.maxNotifications=A(5),this.defaultDuration=A(5e3),this.positions=ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=ve({enabled:!0,volume:.3})}add(a){const s=this.generateId(),e=a.position||"top-right",r={id:s,message:a.message||"",title:a.title||"",type:a.type||"info",position:e,duration:a.duration!==void 0?a.duration:this.defaultDuration.value,persistent:a.persistent||!1,closable:a.closable!==!1,showIcon:a.showIcon!==!1,showProgress:a.showProgress!==!1,actionText:a.actionText||"",icon:a.icon||"",size:a.size||"md",sound:a.sound!==!1&&this.sounds.enabled,priority:a.priority||"normal",zIndex:a.zIndex||1e3,createdAt:Date.now(),onAction:a.onAction||null,onClose:a.onClose||null,component:a.component||null,props:a.props||{}};return this.notifications.push(r),this.positions[e].push(r),this.manageQueueSize(e),!r.persistent&&r.duration>0&&setTimeout(()=>{this.remove(s)},r.duration),s}remove(a){const s=this.notifications.find(n=>n.id===a);if(!s)return;const e=this.notifications.findIndex(n=>n.id===a);e>-1&&this.notifications.splice(e,1);const r=this.positions[s.position],p=r.findIndex(n=>n.id===a);p>-1&&r.splice(p,1),s.onClose&&s.onClose(s)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(a=>{this.positions[a].splice(0)})}clearPosition(a){[...this.positions[a]].forEach(e=>{this.remove(e.id)})}clearType(a){this.notifications.filter(e=>e.type===a).forEach(e=>{this.remove(e.id)})}update(a,s){const e=this.notifications.find(r=>r.id===a);e&&Object.assign(e,s)}getByPosition(a){return this.positions[a]||[]}getByType(a){return this.notifications.filter(s=>s.type===a)}getById(a){return this.notifications.find(s=>s.id===a)}exists(a){return this.notifications.some(s=>s.id===a)}count(){return this.notifications.length}countByPosition(a){var s;return((s=this.positions[a])==null?void 0:s.length)||0}setMaxNotifications(a){this.maxNotifications.value=a,Object.keys(this.positions).forEach(s=>{this.manageQueueSize(s)})}setDefaultDuration(a){this.defaultDuration.value=a}setSoundsEnabled(a){this.sounds.enabled=a}setSoundVolume(a){this.sounds.volume=Math.max(0,Math.min(1,a))}pauseAll(){this.notifications.forEach(a=>{a.pauseTimer&&a.pauseTimer()})}resumeAll(){this.notifications.forEach(a=>{a.resumeTimer&&a.resumeTimer()})}success(a,s={}){return this.add({message:a,type:"success",...s})}error(a,s={}){return this.add({message:a,type:"error",persistent:s.persistent!==!1,...s})}warning(a,s={}){return this.add({message:a,type:"warning",...s})}info(a,s={}){return this.add({message:a,type:"info",...s})}loading(a,s={}){return this.add({message:a,type:"loading",persistent:!0,closable:!1,...s})}confirm(a={}){return new Promise(s=>{const e=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:a.title||"Confirm Action",description:a.message||"Are you sure you want to proceed?",confirmText:a.confirmText||"Confirm",cancelText:a.cancelText||"Cancel",...a},onAction:r=>{this.remove(e),s(r==="confirm")},onClose:()=>{s(!1)}})})}alert(a,s={}){return new Promise(e=>{const r=this.add({type:s.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:s.type||"info",title:s.title||"Alert",description:a,showCancel:!1,confirmText:s.confirmText||"OK",...s},onAction:()=>{this.remove(r),e(!0)},onClose:()=>{e(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(a){const s=this.positions[a];s.length>this.maxNotifications.value&&s.splice(0,s.length-this.maxNotifications.value).forEach(r=>{const p=this.notifications.findIndex(n=>n.id===r.id);p>-1&&this.notifications.splice(p,1)})}}const L=new Bt,St={class:"notification-container"},Ct={__name:"NotificationContainer",setup(h,{expose:a}){const s=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];k(()=>L.notifications.filter(f=>!f.component));const e=k(()=>L.notifications.filter(f=>f.component)),r=f=>{const I="fixed z-50 pointer-events-none",B={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${I} ${B[f]||B["top-right"]}`},p=f=>L.getByPosition(f),n=f=>f.includes("left")?"slide-left":f.includes("right")?"slide-right":f.includes("center")?"slide-center":"slide-right",v=f=>{L.remove(f)},_=(f,I="action")=>{const B=L.getById(f);B!=null&&B.onAction&&B.onAction(I)},C=()=>{window.notify={success:(f,I)=>L.success(f,I),error:(f,I)=>L.error(f,I),warning:(f,I)=>L.warning(f,I),info:(f,I)=>L.info(f,I),loading:(f,I)=>L.loading(f,I),confirm:f=>L.confirm(f),alert:(f,I)=>L.alert(f,I),clear:()=>L.clear(),remove:f=>L.remove(f)}},T=()=>{window.notify&&delete window.notify};return U(()=>{C()}),te(()=>{T()}),a({notificationQueue:L,notify:window.notify}),(f,I)=>(d(),m("div",St,[(d(),m(q,null,Y(s,B=>t("div",{key:B,class:u(r(B))},[O(_e,{name:n(B),tag:"div",class:"space-y-2"},{default:se(()=>[(d(!0),m(q,null,Y(p(B),$=>(d(),ee(It,be({key:$.id},{ref_for:!0},$,{onClose:V=>v($.id),onAction:V=>_($.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(d(!0),m(q,null,Y(e.value,B=>(d(),ee(me(B.component||"NotificationModal"),be({key:B.id,ref_for:!0},B.props,{onClose:$=>v(B.id),onConfirm:$=>_(B.id,"confirm"),onCancel:$=>_(B.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Et=ne(Ct,[["__scopeId","data-v-67e6c621"]]),Mt={class:"floating-attendance-widget"},$t={class:"status-indicator"},Nt={class:"time-info"},Ft={class:"time-display"},Dt={class:"time-label-mini"},Lt={class:"widget-header"},Pt={class:"status-info"},zt={class:"status-text"},Ot={class:"timer-section"},Rt={class:"timer-value"},jt={class:"timer-label"},Wt={class:"quick-actions"},Ht=["disabled"],Vt=["disabled"],Gt={class:"quick-stats"},Qt={class:"stat"},Ut={class:"stat-value"},Jt={class:"stat"},Zt={class:"stat-value"},qt={class:"stat-label"},Yt={__name:"FloatingAttendanceWidget",setup(h){const a=A(!1),s=A(!1),e=A({clockedIn:!1,onBreak:!1,clockInTime:null}),r=A(!1),p=A("0h 0m 0s"),n=A(null),v=A([]),_=()=>{try{const l={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,completedBreakSessions:v.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(l))}catch(l){console.warn("Failed to save attendance state to localStorage:",l)}},C=()=>{try{const l=localStorage.getItem("floating-attendance-state");if(l){const b=JSON.parse(l),M=new Date(b.lastUpdate);if((new Date-M)/(1e3*60)<5)return e.value.clockedIn=b.clockedIn||!1,e.value.onBreak=b.onBreak||!1,e.value.clockInTime=b.clockInTime||null,n.value=b.breakStartTime||null,v.value=b.completedBreakSessions||[],!0}}catch(l){console.warn("Failed to load attendance state from localStorage:",l)}return!1};let T=null;const f=k(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),I=k(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),B=k(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),$=k(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),V=k(()=>r.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),K=k(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),P=k(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const l=new Date(e.value.clockInTime),M=new Date-l,w=Math.floor(M/(1e3*60)),F=Math.floor(w/60),H=w%60;return`${F}h ${H}m`}),G=k(()=>{if(e.value.onBreak&&n.value){const l=new Date(n.value);if(isNaN(l.getTime()))return"0h 0m 1s";{const M=Math.max(0,new Date-l),w=Math.floor(M/(1e3*60*60)),F=Math.floor(M%(1e3*60*60)/(1e3*60)),H=Math.floor(M%(1e3*60)/1e3);return`${w}h ${F}m ${H}s`}}return"0h 0m"}),z=k(()=>{let l=0;if(v.value.forEach(w=>{if(w.start&&w.end){const F=new Date(w.start),X=new Date(w.end)-F;l+=Math.floor(X/(1e3*60))}}),e.value.onBreak&&n.value){const w=new Date(n.value);if(!isNaN(w.getTime())){const H=Math.max(0,new Date-w);l+=Math.floor(H/(1e3*60))}}const b=Math.floor(l/60),M=l%60;return`${b}h ${M}m`});k(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const R=()=>{a.value=!a.value,s.value=!0},g=(l=!1)=>{if(l||!s.value){const b=!e.value.clockedIn,M=a.value!==b;a.value=b,l&&(s.value=!1),M&&console.log(`FloatingWidget: Auto-${b?"expanded":"collapsed"} (clockedIn: ${e.value.clockedIn}, force: ${l})`)}},o=()=>{if(e.value.clockedIn&&e.value.clockInTime){const l=new Date;let b;e.value.onBreak&&n.value?b=new Date(n.value):b=new Date(e.value.clockInTime);const M=l-b,w=Math.floor(M/(1e3*60*60)),F=Math.floor(M%(1e3*60*60)/(1e3*60)),H=Math.floor(M%(1e3*60)/1e3);p.value=`${w}h ${F}m ${H}s`,H%10===0&&W()}else p.value="0h 0m 0s"},i=async()=>{try{if(r.value=!0,e.value.clockedIn){const l=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,p.value="0h 0m 0s",_(),g(!0),W()}else{const l=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=l.data.clock_in_time||new Date().toISOString(),_(),g(!0),W()}}catch(l){console.error("Clock in/out failed:",l),alert("Action failed: "+l.message)}finally{r.value=!1}},x=async()=>{try{if(r.value=!0,e.value.onBreak){if(n.value){const b={start:n.value,end:new Date().toISOString(),isOngoing:!1};v.value=[...v.value,b],console.log("ðŸ’¾ FloatingWidget: Saved completed break session:",b)}const l=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,_(),ie("end-break")}else{const l=new Date().toISOString();n.value=l,e.value.onBreak=!0;const b=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});b.data.break_start_time&&(n.value=b.data.break_start_time),_(),ie("start-break")}}catch(l){console.error("Break action failed:",l),alert("Action failed: "+l.message)}finally{r.value=!1}},E=async()=>{var l,b;try{const w=(await window.axios.get("/api/attendance/current")).data,F=w.clock_in_time,H=e.value.clockInTime;if((F!==H||!w.clocked_in)&&(v.value=[],console.log("ðŸ”„ FloatingWidget: New session detected, cleared completed breaks")),e.value.clockedIn=w.clocked_in||!1,e.value.onBreak=w.on_break||!1,e.value.clockInTime=w.clock_in_time||null,w.break_sessions&&Array.isArray(w.break_sessions)&&(v.value=w.break_sessions.map(X=>({start:X.start,end:X.end,isOngoing:!1})),console.log("ðŸ“Š FloatingWidget: Loaded break sessions from server:",{serverBreakSessions:w.break_sessions.length,localBreakSessions:v.value.length})),w.on_break)if(w.break_start_time)n.value=w.break_start_time;else if((l=w.current_session)!=null&&l.current_break_start)n.value=w.current_session.current_break_start;else if((b=w.current_session)!=null&&b.break_sessions&&w.current_session.break_sessions.length>0){const X=w.current_session.break_sessions[w.current_session.break_sessions.length-1];X&&!X.end&&(n.value=X.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;g(),console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,completedBreaks:v.value.length,totalBreakTime:z.value,isExpanded:a.value})}catch(M){console.error("Failed to fetch attendance status:",M)}},j=l=>{l.key==="attendance-update"&&E()},y=l=>{console.log("FloatingWidget: Received attendance update via Echo:",l),e.value.clockedIn=l.clocked_in,e.value.onBreak=l.on_break,e.value.clockInTime=l.clock_in_time,l.on_break&&l.break_start_time?n.value=l.break_start_time:l.on_break||(n.value=null),_(),o(),g(),console.log("FloatingWidget: State updated via Echo:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,isExpanded:a.value})},le=l=>{console.log("FloatingWidget: Received attendance state change (legacy):",l.detail);const{clockedIn:b,onBreak:M,clockInTime:w,breakStartTime:F}=l.detail;e.value.clockedIn=b,e.value.onBreak=M,e.value.clockInTime=w,M&&F?n.value=F:M||(n.value=null),_(),o(),g(),console.log("FloatingWidget: State updated (legacy):",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:F,isExpanded:a.value})},D=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(l){console.warn("Failed to broadcast attendance update:",l)}},W=()=>{try{const l=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,completedBreakSessions:v.value,totalBreakTime:z.value,currentBreakTime:G.value,todaysHours:P.value,timestamp:Date.now(),source:"floating-widget-load"}});window.dispatchEvent(l),D(),console.log("FloatingWidget: Broadcasted current status to dashboard:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,completedBreaks:v.value.length,totalBreakTime:z.value})}catch(l){console.warn("Failed to broadcast current status:",l)}},ie=l=>{try{const b=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,completedBreakSessions:v.value,totalBreakTime:z.value,currentBreakTime:G.value,todaysHours:P.value,timestamp:Date.now(),source:"floating-widget-break",action:l}});window.dispatchEvent(b),D(),console.log(`FloatingWidget: Broadcasted break ${l} to dashboard:`,{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,completedBreaks:v.value.length,totalBreakTime:z.value,action:l})}catch(b){console.warn("Failed to broadcast break status change:",b)}};return U(async()=>{var b,M;if(C()&&o(),await E(),_(),o(),setTimeout(()=>{W()},100),T=setInterval(o,1e3),window.Echo)try{const F=(M=(b=(await window.axios.get("/api/user")).data)==null?void 0:b.employee)==null?void 0:M.id;F?(window.Echo.private(`attendance.${F}`).listen(".attendance.updated",y),console.log(`FloatingWidget: Subscribed to Echo channel attendance.${F}`)):console.warn("FloatingWidget: No employee ID found for Echo subscription")}catch(w){console.error("FloatingWidget: Failed to get user data for Echo subscription:",w)}else console.warn("FloatingWidget: Echo not available");window.addEventListener("storage",j),window.addEventListener("attendance-state-changed",le),console.log("FloatingWidget: Event listeners registered")}),te(()=>{if(T&&clearInterval(T),window.Echo)try{window.Echo.connector.pusher.allChannels().forEach(l=>{l.name.startsWith("private-attendance.")&&window.Echo.leave(l.name.replace("private-",""))}),console.log("FloatingWidget: Unsubscribed from Echo channels")}catch(l){console.warn("FloatingWidget: Error unsubscribing from Echo channels:",l)}window.removeEventListener("storage",j),window.removeEventListener("attendance-state-changed",le),console.log("FloatingWidget: Event listeners removed")}),(l,b)=>(d(),m("div",Mt,[a.value?N("",!0):(d(),m("div",{key:0,onClick:R,class:u(["floating-button",$.value])},[t("div",$t,[t("div",{class:u(B.value)},null,2)]),t("div",Nt,[t("div",Ft,S(p.value),1),t("div",Dt,S(I.value),1)]),O(c(Be),{class:"w-4 h-4 expand-icon"})],2)),a.value?(d(),m("div",{key:1,class:"expanded-widget",onClick:b[0]||(b[0]=Ae(()=>{},["stop"]))},[t("div",Lt,[t("div",Pt,[t("div",{class:u(B.value)},null,2),t("span",zt,S(f.value),1)]),t("button",{onClick:R,class:"minimize-btn",title:"Minimize"},[O(c(Se),{class:"w-4 h-4"})])]),t("div",Ot,[t("div",Rt,S(p.value),1),t("div",jt,S(I.value),1)]),t("div",Wt,[t("button",{onClick:i,disabled:r.value,class:u(K.value)},S(V.value),11,Ht),e.value.clockedIn?(d(),m("button",{key:0,onClick:x,disabled:r.value,class:"break-action"},[(d(),ee(me(e.value.onBreak?c(ft):c(gt)),{class:"w-3 h-3"})),ae(" "+S(e.value.onBreak?"End":"Break"),1)],8,Vt)):N("",!0)]),t("div",Gt,[t("div",Qt,[t("span",Ut,S(P.value),1),b[1]||(b[1]=t("span",{class:"stat-label"},"Today",-1))]),t("div",Jt,[t("span",Zt,S(e.value.onBreak?G.value:z.value),1),t("span",qt,S(e.value.onBreak?"Current":"Total"),1)])])])):N("",!0),a.value?(d(),m("div",{key:2,class:"backdrop",onClick:R})):N("",!0)]))}},Xt=ne(Yt,[["__scopeId","data-v-f59da162"]]),Kt={class:"live-regions"},eo={__name:"LiveRegion",setup(h){const a=A(null),s=A(null),e=A(null);return U(()=>{Te.init()}),(r,p)=>(d(),m("div",Kt,[t("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:a},null,512),t("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:s},null,512),t("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:e},null,512)]))}},to=ne(eo,[["__scopeId","data-v-94955163"]]),oo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ao={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},ro={class:"flex items-center space-x-6"},so={__name:"AppFooter",setup(h){const{isDark:a}=ye(),s=k(()=>new Date().getFullYear());return(e,r)=>(d(),m("footer",{class:u(["mt-auto border-t transition-all duration-200",c(a)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[t("div",oo,[t("div",ao,[r[4]||(r[4]=t("div",{class:"flex items-center"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),t("div",ro,[O(c(ue),{href:e.route("dashboard"),class:u(["text-sm hover:underline transition-colors",c(a)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>r[0]||(r[0]=[ae(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),O(c(ue),{href:e.route("support.index"),class:u(["text-sm hover:underline transition-colors",c(a)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>r[1]||(r[1]=[ae(" Support ")])),_:1,__:[1]},8,["href","class"]),O(c(ue),{href:e.route("legal.privacy"),class:u(["text-sm hover:underline transition-colors",c(a)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>r[2]||(r[2]=[ae(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),O(c(ue),{href:e.route("legal.disclaimer"),class:u(["text-sm hover:underline transition-colors",c(a)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>r[3]||(r[3]=[ae(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),t("div",{class:u(["text-sm",c(a)?"text-gray-400":"text-gray-500"])}," Â© "+S(s.value)+" Xonobics. All rights reserved. ",3)])])],2))}};function no(){const{props:h}=pe(),{user:a}=he();let s;const e=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(p=>{var v;const n=((v=a.value)==null?void 0:v.name)||"Employee";p.showNotification(`Hi ${n}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},r=()=>{const p=new Date,n=new Date(h.auth.user.clock_in_time);(isNaN(n.getTime())||p.getTime()-n.getTime()>5*60*1e3)&&e()};U(()=>{r(),s=setInterval(r,5*60*1e3)}),te(()=>{clearInterval(s)})}function lo(){const{isAuthenticated:h,user:a}=he(),s=pe();let e=null;const r=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(n=>{var _;const v=((_=a.value)==null?void 0:_.name)||"Employee";n.showNotification(`Hi ${v}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},p=()=>{if(!h.value)return;const n=s.props.auth.user.todays_attendance;if(n&&n.clock_in_time&&!n.clock_out_time){const v=new Date(n.clock_in_time);(new Date-v)/1e3/60/60>=7.5&&r()}};U(()=>{e=setInterval(p,5*60*1e3),p()}),te(()=>{e&&clearInterval(e)})}function io(){const h=pe();return fe(()=>h.props.flash,a=>{!a||!window.notify||(a.success&&window.notify.success(a.success),a.error&&window.notify.error(a.error),a.warning&&window.notify.warning(a.warning),a.info&&window.notify.info(a.info))},{immediate:!0,deep:!0}),{flash:h.props.flash}}const co={class:"relative"},uo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},mo={key:0,class:"flex items-center space-x-3"},ho={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},vo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},go={__name:"AuthenticatedLayout",setup(h){const a=Ie(),{hasRole:s,getAuthError:e}=he(),{isDark:r,initializeTheme:p}=ye();no(),lo(),io(),U(()=>{p()});const n=k(()=>e()),v=k(()=>!!n.value),_=k(()=>{try{return route().current()||""}catch(C){return console.warn("[LAYOUT] Route helper not available:",C),window.location.pathname.replace("/","")||"dashboard"}});return k(()=>!!a.header),(C,T)=>(d(),m("div",{class:u(["min-h-screen transition-all duration-300 flex flex-col",c(r)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-teal-50/30"])},[O(to),O(De),O(Et),c(s)("Admin")?N("",!0):(d(),ee(Xt,{key:0})),v.value?(d(),m("div",{key:1,class:u(["p-4 border z-50 relative rounded-lg mx-4 mt-4",c(r)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[T[0]||(T[0]=t("p",{class:"font-semibold"},"Authentication Error:",-1)),t("p",null,S(n.value),1),T[1]||(T[1]=t("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):N("",!0),O(vt,{"current-route":_.value},null,8,["current-route"]),t("div",co,[c(a).header?(d(),m("header",{key:0,class:u(["border-b transition-all duration-200 backdrop-blur-sm",c(r)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[t("div",uo,[t("div",{class:u(["flex items-center justify-between",c(r)?"text-white":"text-gray-900"])},[t("div",null,[t("h1",{class:u(["text-2xl font-bold transition-colors duration-200",c(r)?"text-white":"text-gray-900"])},[re(C.$slots,"header",{},void 0,!0)],2),c(a).subtitle?(d(),m("div",{key:0,class:u(["mt-1 text-sm",c(r)?"text-gray-300":"text-gray-600"])},[re(C.$slots,"subtitle",{},void 0,!0)],2)):N("",!0)]),c(a).headerActions?(d(),m("div",mo,[re(C.$slots,"headerActions",{},void 0,!0)])):N("",!0)],2)])],2)):N("",!0),t("main",ho,[t("div",vo,[t("div",{class:u(["relative transition-all duration-200",c(a).contentBackground!==!1&&(c(r)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[t("div",{class:u([c(a).contentBackground!==!1?"p-6 sm:p-8":""])},[re(C.$slots,"default",{},void 0,!0)],2)],2)])])]),O(so)],2))}},bo=ne(go,[["__scopeId","data-v-edbead4a"]]);export{bo as A,gt as a,ye as b,L as n,ft as r,io as u};
