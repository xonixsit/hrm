import{f as m,g as p,o as l,h as x,k as f,a as t,c as i,F as c,r as d,t as a,i as I,n as g,Q as U}from"./app-Bj8W9CoF.js";import{A as C}from"./AuthenticatedLayout-CO-2sryW.js";import{P as B}from"./PageLayout-O-g1KdJw.js";import{_ as S}from"./SimpleInfoCard-BZyZ1On5.js";import{B as E}from"./BaseSelect-BTGt0Qu5.js";/* empty css                                                                   */import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DI08NYi3.js";import"./icons-CyONBCp-.js";import"./useAccessibility-DGe0ya_-.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-CFOQFDmp.js";import"./PageHeader-q4XGPvjE.js";import"./Icon-ulFt8TY0.js";/* empty css                                                                   */import"./ChartBarIcon-CkW_OSKy.js";import"./UserGroupIcon-DkmVBi5G.js";/* empty css                                                                   */const M={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},V={class:"bg-white rounded-lg shadow-sm border border-neutral-200"},j={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-neutral-200 role-management-table"},D={class:"bg-white divide-y divide-neutral-200"},F={class:"px-6 py-4 whitespace-nowrap"},H={class:"flex items-center"},L={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0"},P={class:"text-sm font-semibold text-primary-700"},Q={class:"ml-4 min-w-0"},$={class:"text-sm font-medium text-neutral-900 truncate"},G={class:"text-sm text-neutral-500 truncate"},J={class:"text-xs text-neutral-400"},O={class:"px-6 py-4 whitespace-nowrap"},T={class:"flex flex-wrap gap-1"},Y={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-800 role-badge"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-900"},K={class:"truncate"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 text-sm font-medium"},Z={class:"w-44"},ee={class:"space-y-2"},te={__name:"Index",props:{users:Array,availableRoles:Array,currentUserId:Number},setup(u){const r=u,h=[{label:"Dashboard",href:route("dashboard"),icon:"home"},{label:"Administration",href:"#"},{label:"Role Management",href:route("admin.roles.index"),current:!0}],_=m(()=>r.availableRoles.map(o=>({value:o,label:o}))),b=m(()=>{const o=r.availableRoles.map(e=>{const n=r.users.filter(A=>A.roles.includes(e)).length;return{name:e,count:n,icon:v(e),color:w(e)}}),s=r.users.filter(e=>e.roles.length===0).length;return s>0&&o.push({name:"No Role",count:s,icon:"UserIcon",color:"neutral"}),o});function y(o){return o.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2)}function v(o){return{Admin:"ShieldCheckIcon",HR:"UserGroupIcon",Manager:"BriefcaseIcon",Employee:"UserIcon"}[o]||"UserIcon"}function w(o){return{Admin:"red",HR:"blue",Manager:"green",Employee:"yellow"}[o]||"neutral"}function R(o){return{Admin:"bg-red-100 text-red-800",HR:"bg-blue-100 text-blue-800",Manager:"bg-green-100 text-green-800",Employee:"bg-yellow-100 text-yellow-800"}[o]||"bg-neutral-100 text-neutral-800"}function k(o,s){if(!s)return;const e=r.users.find(n=>n.id===o);if(o===r.currentUserId&&(e!=null&&e.roles.includes("Admin"))&&s!=="Admin"){alert("You cannot remove your own Admin role.");return}e!=null&&e.roles.includes(s)||U.post(route("admin.roles.assign",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:n=>{console.error("Error assigning role:",n),n.message?alert(n.message):alert("Failed to assign role. Please try again.")}})}return(o,s)=>(l(),p(C,null,{default:x(()=>[f(B,{title:"Role Management",subtitle:"Assign and manage user roles in the system",breadcrumbs:h},{default:x(()=>[t("div",M,[(l(!0),i(c,null,d(b.value,e=>(l(),p(S,{key:e.name,title:e.name,value:e.count,subtitle:`${e.count===1?"user":"users"} with this role`,icon:e.icon,color:e.color},null,8,["title","value","subtitle","icon","color"]))),128))]),t("div",V,[s[2]||(s[2]=t("div",{class:"px-6 py-4 border-b border-neutral-200"},[t("h3",{class:"text-lg font-semibold text-neutral-900"},"User Role Assignments"),t("p",{class:"text-sm text-neutral-600 mt-1"},"Manage roles for all employees in the system")],-1)),t("div",j,[t("table",z,[s[1]||(s[1]=t("thead",{class:"bg-neutral-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Employee "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Current Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Job Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider w-48"}," Role Actions ")])],-1)),t("tbody",D,[(l(!0),i(c,null,d(u.users,e=>(l(),i("tr",{key:e.id,class:"hover:bg-neutral-50 transition-colors duration-150"},[t("td",F,[t("div",H,[t("div",L,[t("span",P,a(y(e.name)),1)]),t("div",Q,[t("div",$,a(e.name),1),t("div",G,a(e.email),1),t("div",J,"ID: "+a(e.employee_code),1)])])]),t("td",O,[t("div",T,[e.roles.length===0?(l(),i("span",Y," No Role ")):I("",!0),(l(!0),i(c,null,d(e.roles,n=>(l(),i("span",{key:n,class:g([R(n),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium role-badge"])},a(n),3))),128))])]),t("td",q,[t("span",K,a(e.job_title||"Not specified"),1)]),t("td",W,[t("span",{class:g([e.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},a(e.status),3)]),t("td",X,[t("div",Z,[t("div",ee,[s[0]||(s[0]=t("label",{class:"block text-xs font-medium text-neutral-700"}," Assign Role ",-1)),f(E,{"model-value":e.roles[0]||"",options:_.value,placeholder:"Select role",size:"sm",class:"w-full","onUpdate:modelValue":n=>k(e.id,n)},null,8,["model-value","options","onUpdate:modelValue"])])])])]))),128))])])])])]),_:1})]),_:1}))}},be=N(te,[["__scopeId","data-v-63cd4c5e"]]);export{be as default};
