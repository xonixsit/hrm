import{x as A,f as d,Q as B,y as x,g as C,o as F,h as l,k as a,u as r,a as m}from"./app-Z3Vh35gJ.js";import{A as U}from"./AuthenticatedLayout-Ba1NIxXO.js";import{P as w}from"./PageLayout-CZvEAz8F.js";import{F as E}from"./FormLayout-B2COV0-e.js";import{F as p}from"./FormSection-DjO1m4Pm.js";import{F as s}from"./FormField-rEGzp4wt.js";import{B as i}from"./BaseInput-BloYJLpf.js";import{B as u}from"./BaseSelect-DWRgyCPx.js";import{B as I}from"./BaseTextarea-niblCtPc.js";import{e as k}from"./icons-DfOgCrH-.js";import"./useAuth-OolSYttl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_4a3d46e5_lang-j1_TROGQ.js";import"./PageHeader-D0UdsjM7.js";import"./Icon-ClYW9Gxx.js";/* empty css                                                                   *//* empty css                                                                  *//* empty css                                                                   */import"./UsersIcon-DY0JEQ3k.js";const L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={__name:"Create",props:{employees:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},setup(b){const c=b,e=A({name:"",code:"",description:"",manager_id:"",parent_id:"",budget:"",location:"",status:"Active",established_date:""}),f=d(()=>c.employees.map(n=>({value:n.id,label:`${n.user.name} - ${n.job_title||"No title"}`}))),g=d(()=>c.departments.map(n=>({value:n.id,label:n.name}))),h=[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"},{value:"Restructuring",label:"Restructuring"}],v=[{label:"Dashboard",href:route("dashboard")},{label:"People Management",href:"#"},{label:"Departments",href:route("departments.index")},{label:"Create Department",current:!0}],V=d(()=>[{id:"cancel",label:"Cancel",variant:"secondary",handler:()=>B.visit(route("departments.index"))},{id:"save-draft",label:"Save as Draft",variant:"ghost",handler:()=>S()},{id:"create",label:"Create Department",type:"submit",variant:"primary",icon:k,loadingLabel:"Creating Department...",disabled:!_.value}]),_=d(()=>e.name&&e.name.trim().length>0),y=()=>{e.post(route("departments.store"),{onSuccess:()=>{},onError:n=>{console.error("Form submission errors:",n);const t=Object.keys(n)[0];if(t){const o=document.querySelector(`[name="${t}"]`);o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),o.focus())}}})},S=()=>{console.log("Saving as draft...")},D=()=>{if(!e.code&&e.name){const n=e.name.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,5);e.code=n}};return x(()=>e.name,()=>{e.name&&!e.code&&D()}),e.established_date||(e.established_date=new Date().toISOString().split("T")[0]),(n,t)=>(F(),C(U,null,{default:l(()=>[a(w,{title:"Create Department",subtitle:"Add a new department to your organization",breadcrumbs:v},{default:l(()=>[a(E,{title:"Department Information",description:"Enter the basic information for the new department",actions:V.value,errors:r(e).errors,"is-submitting":r(e).processing,variant:"card",onSubmit:y},{default:l(()=>[a(p,{title:"Basic Information",description:"Essential details about the department"},{default:l(()=>[m("div",L,[a(s,{label:"Department Name",required:"",error:r(e).errors.name,help:"Enter the full name of the department"},{default:l(()=>[a(i,{modelValue:r(e).name,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).name=o),type:"text",placeholder:"Engineering",error:!!r(e).errors.name,required:""},null,8,["modelValue","error"])]),_:1},8,["error"]),a(s,{label:"Department Code",error:r(e).errors.code,help:"Short code for the department (optional)"},{default:l(()=>[a(i,{modelValue:r(e).code,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).code=o),type:"text",placeholder:"ENG",error:!!r(e).errors.code,maxlength:"10"},null,8,["modelValue","error"])]),_:1},8,["error"]),a(s,{label:"Description",error:r(e).errors.description,help:"Brief description of the department's purpose",class:"md:col-span-2"},{default:l(()=>[a(I,{modelValue:r(e).description,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).description=o),placeholder:"Describe the department's role and responsibilities...",error:!!r(e).errors.description,rows:"3"},null,8,["modelValue","error"])]),_:1},8,["error"])])]),_:1}),a(p,{title:"Management Structure",description:"Assign leadership and organizational details"},{default:l(()=>[m("div",N,[a(s,{label:"Department Manager",error:r(e).errors.manager_id,help:"Select an employee to manage this department"},{default:l(()=>[a(u,{modelValue:r(e).manager_id,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).manager_id=o),options:f.value,"option-label":"label","option-value":"value",error:!!r(e).errors.manager_id,placeholder:"Select manager"},null,8,["modelValue","options","error"])]),_:1},8,["error"]),a(s,{label:"Parent Department",error:r(e).errors.parent_id,help:"Select a parent department if this is a sub-department"},{default:l(()=>[a(u,{modelValue:r(e).parent_id,"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).parent_id=o),options:g.value,"option-label":"label","option-value":"value",error:!!r(e).errors.parent_id,placeholder:"Select parent department"},null,8,["modelValue","options","error"])]),_:1},8,["error"]),a(s,{label:"Budget",error:r(e).errors.budget,help:"Annual budget for this department (optional)"},{default:l(()=>[a(i,{modelValue:r(e).budget,"onUpdate:modelValue":t[5]||(t[5]=o=>r(e).budget=o),type:"number",placeholder:"100000",error:!!r(e).errors.budget,step:"1000",min:"0"},null,8,["modelValue","error"])]),_:1},8,["error"]),a(s,{label:"Location",error:r(e).errors.location,help:"Physical location or office"},{default:l(()=>[a(i,{modelValue:r(e).location,"onUpdate:modelValue":t[6]||(t[6]=o=>r(e).location=o),type:"text",placeholder:"Building A, Floor 2",error:!!r(e).errors.location},null,8,["modelValue","error"])]),_:1},8,["error"])])]),_:1}),a(p,{title:"Department Status",description:"Set the current status and operational details"},{default:l(()=>[m("div",O,[a(s,{label:"Status",error:r(e).errors.status,help:"Current operational status"},{default:l(()=>[a(u,{modelValue:r(e).status,"onUpdate:modelValue":t[7]||(t[7]=o=>r(e).status=o),options:h,"option-label":"label","option-value":"value",error:!!r(e).errors.status,placeholder:"Select status"},null,8,["modelValue","error"])]),_:1},8,["error"]),a(s,{label:"Established Date",error:r(e).errors.established_date,help:"When was this department established"},{default:l(()=>[a(i,{modelValue:r(e).established_date,"onUpdate:modelValue":t[8]||(t[8]=o=>r(e).established_date=o),type:"date",error:!!r(e).errors.established_date},null,8,["modelValue","error"])]),_:1},8,["error"])])]),_:1})]),_:1},8,["actions","errors","is-submitting"])]),_:1})]),_:1}))}};export{te as default};
