import{f as p,Q as P,g as y,o as r,h as d,k as u,a as e,i as v,n as h,l as _,t as l,c as f,u as x,F as N,r as S}from"./app-M2_fgZiN.js";import{A as z}from"./AuthenticatedLayout-B5YS4MOp.js";import{P as G}from"./PageLayout-DSANij9P.js";import{C as T}from"./ContentCard-CqITvWEE.js";import{C as b}from"./ContentSection-2cOyj2Ib.js";import{_ as k}from"./SimpleInfoCard-BtnWPV1b.js";import{e as q,h as j,j as H,r as J,i as K}from"./icons-nKMwCBk2.js";import"./useAuth-D0Hz_eeo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-DIGN0rry.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-DUmirsBX.js";import"./PageHeader-lSP9_R8H.js";import"./Icon-gwQIASdP.js";/* empty css                                                                   */import"./ChartBarIcon-D_dSVQ6L.js";import"./UserGroupIcon-CH_973Dx.js";const W={class:"mb-6"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ee={class:"space-y-4"},te={class:"flex justify-between items-center py-2 border-b border-neutral-100"},se={class:"text-sm font-semibold text-neutral-900"},ne={class:"flex justify-between items-center py-2 border-b border-neutral-100"},ae={class:"text-sm font-semibold text-neutral-900"},le={key:0,class:"py-2"},ie={class:"text-sm text-neutral-900 bg-neutral-50 rounded-lg p-3"},re={class:"space-y-4"},oe={class:"flex items-center justify-between py-2"},ce={class:"inline-flex items-center"},ue={class:"flex items-center justify-between py-2"},de={class:"inline-flex items-center"},me={class:"flex items-center justify-between py-2"},pe={class:"inline-flex items-center"},ye={class:"space-y-4"},xe={class:"flex justify-between items-center py-2 border-b border-neutral-100"},fe={class:"text-sm font-semibold text-neutral-900"},ve={class:"flex justify-between items-center py-2 border-b border-neutral-100"},he={class:"text-sm font-semibold text-neutral-900"},be={class:"space-y-4"},ge={class:"flex items-center justify-between py-2"},we={class:"text-sm font-semibold text-neutral-900"},_e={class:"flex items-center justify-between py-2"},Te={class:"text-sm font-semibold text-neutral-900"},ke={class:"flex items-center justify-between py-2"},De={class:"text-sm font-semibold text-neutral-900"},qe={class:"space-y-4"},je={class:"flex justify-between items-center py-2 border-b border-neutral-100"},Me={class:"text-sm font-semibold text-neutral-900"},Ae={class:"flex justify-between items-center py-2 border-b border-neutral-100"},Ce={class:"text-sm font-semibold text-neutral-900"},Re={class:"flex justify-between items-center py-2 border-b border-neutral-100"},Le={class:"text-sm font-semibold text-neutral-900"},$e={class:"space-y-3"},Pe={class:"flex items-center"},Ne={class:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Se={class:"text-xs font-medium text-primary-700"},Ee={class:"text-sm font-medium text-neutral-900"},Ue={class:"text-sm font-semibold text-neutral-600"},Be={class:"overflow-x-auto"},Fe={class:"min-w-full divide-y divide-neutral-200"},Ye={class:"bg-white divide-y divide-neutral-200"},Ie={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"flex items-center"},Qe={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Oe={class:"text-xs font-medium text-primary-700"},ze={class:"text-sm font-medium text-neutral-900"},Ge={class:"px-6 py-4 whitespace-nowrap"},He={class:"text-sm text-neutral-900"},Je={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"text-sm font-medium text-neutral-900"},We={class:"px-6 py-4 whitespace-nowrap"},Xe={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center space-x-4"},tt={key:0,class:"text-sm text-neutral-500 bg-neutral-100 px-3 py-2 rounded-lg"},ht={__name:"Show",props:{leaveType:Object,canEdit:Boolean,canDelete:Boolean},setup(a){const c=a,E=p(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Leave Policies",href:route("leave-types.index")},{label:c.leaveType.name,current:!0}]),U=p(()=>{const s=[];return c.canEdit&&s.push({id:"edit-policy",label:"Edit Policy",icon:"pencil",variant:"primary",handler:()=>P.visit(route("leave-types.edit",c.leaveType.id))}),s}),g=p(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.length)||0}),M=p(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="approved").length)||0}),A=p(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="pending").length)||0}),B=p(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="rejected").length)||0}),C=p(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.slice(0,10))||[]}),F=p(()=>{var n;const s=new Date().getMonth(),t=new Date().getFullYear();return((n=c.leaveType.leaves)==null?void 0:n.filter(i=>{const o=new Date(i.created_at);return o.getMonth()===s&&o.getFullYear()===t}).length)||0}),Y=p(()=>{var i;const s=new Date().getMonth()-1,t=s<0?new Date().getFullYear()-1:new Date().getFullYear(),n=s<0?11:s;return((i=c.leaveType.leaves)==null?void 0:i.filter(o=>{const m=new Date(o.created_at);return m.getMonth()===n&&m.getFullYear()===t}).length)||0}),I=p(()=>{var n;if(!((n=c.leaveType.leaves)!=null&&n.length))return 0;const s=c.leaveType.leaves.reduce((i,o)=>new Date(o.created_at)<new Date(i.created_at)?o:i),t=Math.max(1,Math.ceil((new Date-new Date(s.created_at))/(1e3*60*60*24*30)));return Math.round(g.value/t)}),R=p(()=>{var t;if(!((t=c.leaveType.leaves)!=null&&t.length))return[];const s={};return c.leaveType.leaves.forEach(n=>{var m,w,L,$;const i=((w=(m=n.employee)==null?void 0:m.user)==null?void 0:w.name)||"Unknown",o=(($=(L=n.employee)==null?void 0:L.user)==null?void 0:$.id)||"unknown";s[o]||(s[o]={id:o,name:i,requests_count:0}),s[o].requests_count++}),Object.values(s).sort((n,i)=>i.requests_count-n.requests_count)}),D=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),V=(s,t)=>{const n=new Date(s),i=new Date(t),o=Math.abs(i-n),m=Math.ceil(o/(1e3*60*60*24))+1;return`${m} day${m!==1?"s":""}`},Q=s=>s.split(" ").map(t=>t.charAt(0).toUpperCase()).join("").substring(0,2),O=()=>{confirm(`Are you sure you want to delete "${c.leaveType.name}"? This action cannot be undone.`)&&P.delete(route("leave-types.destroy",c.leaveType.id))};return(s,t)=>(r(),y(z,null,{default:d(()=>[u(G,{title:a.leaveType.name,subtitle:"Leave policy details and usage statistics",breadcrumbs:E.value,actions:U.value},{default:d(()=>[e("div",W,[e("span",{class:h([{"bg-success-100 text-success-800 border-success-200":a.leaveType.is_active,"bg-neutral-100 text-neutral-800 border-neutral-200":!a.leaveType.is_active},"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full border"])},[e("div",{class:h([{"bg-success-400":a.leaveType.is_active,"bg-neutral-400":!a.leaveType.is_active},"w-2 h-2 rounded-full mr-2"])},null,2),_(" "+l(a.leaveType.is_active?"Active Policy":"Inactive Policy"),1)],2)]),e("div",X,[u(k,{title:"Annual Quota",value:`${a.leaveType.quota} days`,icon:"calendar-days",color:"primary"},null,8,["value"]),u(k,{title:"Total Requests",value:g.value,icon:"document-text",color:"info"},null,8,["value"]),u(k,{title:"Approved",value:M.value,icon:"check-circle",color:"success"},null,8,["value"]),u(k,{title:"Pending",value:A.value,icon:"clock",color:"warning"},null,8,["value"])]),e("div",Z,[u(T,{title:"Policy Configuration",subtitle:"Leave type settings and restrictions"},{default:d(()=>[u(b,{title:"Basic Information"},{default:d(()=>[e("div",ee,[e("div",te,[t[2]||(t[2]=e("span",{class:"text-sm font-medium text-neutral-600"},"Leave Type Name",-1)),e("span",se,l(a.leaveType.name),1)]),e("div",ne,[t[3]||(t[3]=e("span",{class:"text-sm font-medium text-neutral-600"},"Annual Quota",-1)),e("span",ae,l(a.leaveType.quota)+" days",1)]),a.leaveType.description?(r(),f("div",le,[t[4]||(t[4]=e("span",{class:"text-sm font-medium text-neutral-600 block mb-2"},"Description",-1)),e("p",ie,l(a.leaveType.description),1)])):v("",!0)])]),_:1}),u(b,{title:"Policy Settings"},{default:d(()=>[e("div",re,[e("div",oe,[t[5]||(t[5]=e("span",{class:"text-sm font-medium text-neutral-600"},"Requires Approval",-1)),e("span",ce,[a.leaveType.requires_approval?(r(),y(x(q),{key:0,class:"w-4 h-4 text-success-500 mr-2"})):(r(),y(x(j),{key:1,class:"w-4 h-4 text-neutral-400 mr-2"})),e("span",{class:h(["text-sm font-medium",a.leaveType.requires_approval?"text-success-700":"text-neutral-600"])},l(a.leaveType.requires_approval?"Yes":"No"),3)])]),e("div",ue,[t[6]||(t[6]=e("span",{class:"text-sm font-medium text-neutral-600"},"Carry Forward",-1)),e("span",de,[a.leaveType.carry_forward?(r(),y(x(q),{key:0,class:"w-4 h-4 text-success-500 mr-2"})):(r(),y(x(j),{key:1,class:"w-4 h-4 text-neutral-400 mr-2"})),e("span",{class:h(["text-sm font-medium",a.leaveType.carry_forward?"text-success-700":"text-neutral-600"])},l(a.leaveType.carry_forward?"Allowed":"Not Allowed"),3)])]),e("div",me,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-neutral-600"},"Status",-1)),e("span",pe,[a.leaveType.is_active?(r(),y(x(q),{key:0,class:"w-4 h-4 text-success-500 mr-2"})):(r(),y(x(j),{key:1,class:"w-4 h-4 text-neutral-400 mr-2"})),e("span",{class:h(["text-sm font-medium",a.leaveType.is_active?"text-success-700":"text-neutral-600"])},l(a.leaveType.is_active?"Active":"Inactive"),3)])])])]),_:1}),u(b,{title:"Restrictions & Limits"},{default:d(()=>[e("div",ye,[e("div",xe,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-neutral-600"},"Max Consecutive Days",-1)),e("span",fe,l(a.leaveType.max_consecutive_days||"No limit"),1)]),e("div",ve,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-neutral-600"},"Minimum Notice",-1)),e("span",he,l(a.leaveType.min_notice_days?`${a.leaveType.min_notice_days} days`:"No requirement"),1)])])]),_:1})]),_:1}),u(T,{title:"Usage Statistics",subtitle:"Request analytics and trends"},{default:d(()=>[u(b,{title:"Request Status Breakdown"},{default:d(()=>[e("div",be,[e("div",ge,[t[10]||(t[10]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-success-500 rounded-full mr-3"}),e("span",{class:"text-sm font-medium text-neutral-600"},"Approved")],-1)),e("span",we,l(M.value),1)]),e("div",_e,[t[11]||(t[11]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-warning-500 rounded-full mr-3"}),e("span",{class:"text-sm font-medium text-neutral-600"},"Pending")],-1)),e("span",Te,l(A.value),1)]),e("div",ke,[t[12]||(t[12]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-error-500 rounded-full mr-3"}),e("span",{class:"text-sm font-medium text-neutral-600"},"Rejected")],-1)),e("span",De,l(B.value),1)])])]),_:1}),u(b,{title:"Usage Trends"},{default:d(()=>[e("div",qe,[e("div",je,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-neutral-600"},"This Month",-1)),e("span",Me,l(F.value)+" requests",1)]),e("div",Ae,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-neutral-600"},"Last Month",-1)),e("span",Ce,l(Y.value)+" requests",1)]),e("div",Re,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-neutral-600"},"Average per Month",-1)),e("span",Le,l(I.value)+" requests",1)])])]),_:1}),R.value.length>0?(r(),y(b,{key:0,title:"Most Active Users"},{default:d(()=>[e("div",$e,[(r(!0),f(N,null,S(R.value.slice(0,5),(n,i)=>(r(),f("div",{key:n.id,class:"flex items-center justify-between py-2"},[e("div",Pe,[e("div",Ne,[e("span",Se,l(i+1),1)]),e("span",Ee,l(n.name),1)]),e("span",Ue,l(n.requests_count)+" requests",1)]))),128))])]),_:1})):v("",!0)]),_:1})]),C.value.length>0?(r(),y(T,{key:0,title:"Recent Leave Requests",subtitle:"Latest requests for this leave type"},{actions:d(()=>[e("button",{onClick:t[0]||(t[0]=n=>s.$inertia.visit(s.route("leaves.index",{type:a.leaveType.name}))),class:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors duration-150"}," View All → ")]),default:d(()=>[e("div",Be,[e("table",Fe,[t[16]||(t[16]=e("thead",{class:"bg-neutral-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Dates "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Days "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Requested ")])],-1)),e("tbody",Ye,[(r(!0),f(N,null,S(C.value,n=>{var i,o,m,w;return r(),f("tr",{key:n.id,class:"hover:bg-neutral-50 transition-colors duration-150"},[e("td",Ie,[e("div",Ve,[e("div",Qe,[e("span",Oe,l(Q(((o=(i=n.employee)==null?void 0:i.user)==null?void 0:o.name)||"U")),1)]),e("div",ze,l(((w=(m=n.employee)==null?void 0:m.user)==null?void 0:w.name)||"Unknown"),1)])]),e("td",Ge,[e("div",He,l(D(n.from_date))+" - "+l(D(n.to_date)),1)]),e("td",Je,[e("div",Ke,l(V(n.from_date,n.to_date)),1)]),e("td",We,[e("span",{class:h([{"bg-success-100 text-success-800":n.status==="approved","bg-warning-100 text-warning-800":n.status==="pending","bg-error-100 text-error-800":n.status==="rejected"},"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},l(n.status),3)]),e("td",Xe,l(D(n.created_at)),1)])}),128))])])])]),_:1})):v("",!0),a.canEdit||a.canDelete?(r(),y(T,{key:1,title:"Policy Actions",subtitle:"Manage this leave policy"},{default:d(()=>[e("div",Ze,[e("div",et,[a.canEdit?(r(),f("button",{key:0,onClick:t[1]||(t[1]=n=>s.$inertia.visit(s.route("leave-types.edit",a.leaveType.id))),class:"inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},[u(x(H),{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=_(" Edit Policy "))])):v("",!0),a.canDelete&&g.value===0?(r(),f("button",{key:1,onClick:O,class:"inline-flex items-center px-4 py-2 bg-error-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-error-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-error-500 transition-colors duration-150"},[u(x(J),{class:"w-4 h-4 mr-2"}),t[18]||(t[18]=_(" Delete Policy "))])):v("",!0)]),a.canDelete&&g.value>0?(r(),f("div",tt,[u(x(K),{class:"w-4 h-4 inline mr-1"}),_(" Cannot delete: "+l(g.value)+" leave requests exist for this type ",1)])):v("",!0)])]),_:1})):v("",!0)]),_:1},8,["title","breadcrumbs","actions"])]),_:1}))}};export{ht as default};
