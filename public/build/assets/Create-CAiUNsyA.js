import{e as q,f as u,Q as y,x as Y,g as x,o as d,h as l,k as o,u as t,a as r,t as p,c as m,F as f,r as h,n as V,i as C}from"./app-D9oDEPNn.js";import{_ as z}from"./AuthenticatedLayout-Dk-PjdW7.js";import{P as W}from"./PageLayout-Bn6HyvZe.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-D4WdmZuE.js";import{I as w}from"./Icon-DhUgsDhg.js";import{C as K}from"./ContentSection-D7WAhln9.js";import{C as X}from"./ContentCard-z-bq_pWD.js";import{F as Z}from"./FormLayout-DgEfyHS8.js";import{F as v}from"./FormSection-hhS9sekx.js";import{F as c}from"./FormField-D8GNyQfv.js";import{B as F}from"./BaseButton-B2x1sUGI.js";import{B}from"./BaseSelect-Dwi_ykLc.js";import{B as ee}from"./BaseInput-B1RUv3RS.js";import{B as k}from"./BaseTextarea-jccz3EKi.js";import{u as te}from"./useNotifications-DsOX33Zv.js";import"./useAuth-C0KO1uRQ.js";import"./icons-CnHki6Ac.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-mJOamzVJ.js";import"./PageHeader-8au1Wkwq.js";/* empty css                                                                   *//* empty css                                                             *//* empty css                                                                       *//* empty css                                                                    *//* empty css                                                                   *//* empty css                                                                   *//* empty css                                                                  */const se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={class:"flex items-center gap-3"},ae={class:"flex-shrink-0 w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center"},re={class:"text-xs font-semibold text-primary-700"},ie={class:"min-w-0 flex-1"},le={class:"font-medium text-neutral-900 truncate"},ne={class:"text-xs text-neutral-500 truncate"},de={class:"space-y-6"},ce={class:"flex items-center space-x-2"},ue={class:"flex items-center space-x-1"},me=["onClick","onMouseover","disabled"],pe={class:"text-sm font-medium text-neutral-700 ml-3"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},be={class:"flex items-center justify-between mb-2"},fe={class:"flex items-center space-x-2"},he={class:"font-medium text-neutral-900"},ve={class:"flex items-center space-x-1"},ke=["onClick","disabled"],_e={class:"space-y-6"},ye={class:"space-y-6"},xe={class:"space-y-3"},We={__name:"Create",props:{users:Array},setup(R){const A=R,{showNotification:g}=te(),b=q(0),D=u(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Feedbacks",href:route("feedbacks.index")},{label:"Submit Feedback",current:!0}]),N=u(()=>[{id:"back-to-feedbacks",label:"Back to Feedbacks",icon:"arrow-left",variant:"secondary",handler:()=>y.visit(route("feedbacks.index"))}]),e=Y({reviewee_id:"",period:"",rating:0,categoryRatings:{communication:0,teamwork:0,technical:0,leadership:0,initiative:0,reliability:0},strengths:"",improvements:"",comments:"",goals:[""],support:""}),Q=u(()=>A.users.map(a=>({value:a.id,label:a.name,department:a.department||"No Department",initials:a.name.split(" ").map(i=>i[0]).join("").toUpperCase()}))),U=u(()=>[{value:"Q1 2024",label:"Q1 2024 (Jan - Mar)"},{value:"Q2 2024",label:"Q2 2024 (Apr - Jun)"},{value:"Q3 2024",label:"Q3 2024 (Jul - Sep)"},{value:"Q4 2024",label:"Q4 2024 (Oct - Dec)"},{value:"H1 2024",label:"H1 2024 (Jan - Jun)"},{value:"H2 2024",label:"H2 2024 (Jul - Dec)"},{value:"Annual 2024",label:"Annual 2024"}]),E=u(()=>[{key:"communication",label:"Communication",icon:"chat"},{key:"teamwork",label:"Teamwork",icon:"users"},{key:"technical",label:"Technical Skills",icon:"cog"},{key:"leadership",label:"Leadership",icon:"star"},{key:"initiative",label:"Initiative",icon:"bolt"},{key:"reliability",label:"Reliability",icon:"shield"}]),P=u(()=>[{id:"cancel",label:"Cancel",variant:"secondary",disabled:e.processing},{id:"save-draft",label:"Save Draft",variant:"ghost",disabled:e.processing},{id:"submit",label:"Submit Feedback",variant:"primary",type:"submit",disabled:e.processing||!$.value,loadingLabel:"Submitting..."}]),$=u(()=>e.reviewee_id&&e.period&&e.rating>0&&e.comments.trim().length>0),G=a=>{e.rating=a,b.value=0},I=(a,i)=>{e.categoryRatings[a]=i},J=a=>({0:"No rating",1:"Needs Improvement",2:"Below Expectations",3:"Meets Expectations",4:"Exceeds Expectations",5:"Exceptional"})[a]||"No rating",L=()=>{e.goals.length<5&&e.goals.push("")},M=a=>{e.goals.length>1&&e.goals.splice(a,1)},H=()=>{j()?confirm("You have unsaved changes. Are you sure you want to leave?")&&y.visit(route("feedbacks.index")):y.visit(route("feedbacks.index"))},S=()=>{e.goals=e.goals.filter(a=>a.trim().length>0),e.post(route("feedbacks.store"),{onSuccess:()=>{g({type:"success",title:"Feedback Submitted",message:"Your feedback has been successfully submitted."})},onError:()=>{g({type:"error",title:"Submission Failed",message:"There was an error submitting your feedback. Please check the form and try again."})}})},O=a=>{switch(a.id){case"cancel":H();break;case"save-draft":T();break;case"submit":S();break}},T=()=>{e.goals=e.goals.filter(a=>a.trim().length>0),e.post(route("feedbacks.save-draft"),{onSuccess:()=>{g({type:"success",title:"Draft Saved",message:"Your feedback draft has been saved. You can continue editing later."})},onError:()=>{g({type:"error",title:"Save Failed",message:"Failed to save your draft. Please try again."})}})},j=()=>e.reviewee_id||e.period||e.rating>0||e.comments.trim().length>0||e.strengths.trim().length>0||e.improvements.trim().length>0||e.support.trim().length>0||e.goals.some(a=>a.trim().length>0)||Object.values(e.categoryRatings).some(a=>a>0);return(a,i)=>(d(),x(z,null,{default:l(()=>[o(W,{title:"Submit Feedback",subtitle:"Provide constructive feedback to help team members grow",breadcrumbs:D.value,actions:N.value},{default:l(()=>[o(K,null,{default:l(()=>[o(X,{class:"max-w-4xl mx-auto"},{default:l(()=>[o(Z,{title:"",actions:P.value,errors:t(e).errors,"is-submitting":t(e).processing,variant:"card",onSubmit:S,onAction:O},{default:l(()=>[o(v,{title:"Feedback Details",description:"Select who you're providing feedback for and the review period"},{default:l(()=>[r("div",se,[o(c,{label:"Team Member",description:"Select the person you're providing feedback for",required:"",error:t(e).errors.reviewee_id},{default:l(()=>[o(B,{modelValue:t(e).reviewee_id,"onUpdate:modelValue":i[0]||(i[0]=s=>t(e).reviewee_id=s),options:Q.value,placeholder:"Select a team member...",searchable:"",disabled:t(e).processing},{option:l(({option:s})=>[r("div",oe,[r("div",ae,[r("span",re,p(s.initials),1)]),r("div",ie,[r("div",le,p(s.label),1),r("div",ne,p(s.department),1)])])]),_:1},8,["modelValue","options","disabled"])]),_:1},8,["error"]),o(c,{label:"Review Period",description:"Specify the time period this feedback covers",required:"",error:t(e).errors.period},{default:l(()=>[o(B,{modelValue:t(e).period,"onUpdate:modelValue":i[1]||(i[1]=s=>t(e).period=s),options:U.value,placeholder:"Select review period...",disabled:t(e).processing},null,8,["modelValue","options","disabled"])]),_:1},8,["error"])])]),_:1}),o(v,{title:"Overall Rating",description:"Rate the overall performance during this period"},{default:l(()=>[r("div",de,[o(c,{label:"Performance Rating",description:"Click on the stars to rate (1 = Needs Improvement, 5 = Exceptional)",required:"",error:t(e).errors.rating},{default:l(()=>[r("div",ce,[r("div",ue,[(d(),m(f,null,h(5,s=>r("button",{key:s,type:"button",onClick:n=>G(s),onMouseover:n=>b.value=s,onMouseleave:i[2]||(i[2]=n=>b.value=0),class:V(["w-8 h-8 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",b.value>=s||t(e).rating>=s?"text-yellow-400":"text-neutral-300 hover:text-yellow-300"]),disabled:t(e).processing},[o(w,{name:"star-solid",class:"w-full h-full"})],42,me)),64))]),r("span",pe,p(J(t(e).rating)),1)])]),_:1},8,["error"]),r("div",ge,[(d(!0),m(f,null,h(E.value,s=>(d(),m("div",{key:s.key,class:"bg-neutral-50 rounded-lg p-4"},[r("div",be,[r("div",fe,[o(w,{name:s.icon,class:"w-5 h-5 text-neutral-600"},null,8,["name"]),r("span",he,p(s.label),1)])]),r("div",ve,[(d(),m(f,null,h(5,n=>r("button",{key:n,type:"button",onClick:_=>I(s.key,n),class:V(["w-4 h-4 transition-colors duration-200",t(e).categoryRatings[s.key]>=n?"text-yellow-400":"text-neutral-300 hover:text-yellow-300"]),disabled:t(e).processing},[o(w,{name:"star-solid",class:"w-full h-full"})],10,ke)),64))])]))),128))])])]),_:1}),o(v,{title:"Detailed Comments",description:"Provide specific, constructive feedback"},{default:l(()=>[r("div",_e,[o(c,{label:"Strengths & Achievements",description:"What did this person do well? Highlight specific achievements and strengths.",error:t(e).errors.strengths},{default:l(()=>[o(k,{modelValue:t(e).strengths,"onUpdate:modelValue":i[3]||(i[3]=s=>t(e).strengths=s),placeholder:"Describe specific strengths, achievements, and positive contributions...",rows:"4",disabled:t(e).processing,"character-count":!0,"max-length":1e3},null,8,["modelValue","disabled"])]),_:1},8,["error"]),o(c,{label:"Areas for Development",description:"What areas could benefit from improvement? Be constructive and specific.",error:t(e).errors.improvements},{default:l(()=>[o(k,{modelValue:t(e).improvements,"onUpdate:modelValue":i[4]||(i[4]=s=>t(e).improvements=s),placeholder:"Suggest specific areas for development and growth opportunities...",rows:"4",disabled:t(e).processing,"character-count":!0,"max-length":1e3},null,8,["modelValue","disabled"])]),_:1},8,["error"]),o(c,{label:"Additional Comments",description:"Any other feedback, suggestions, or observations you'd like to share.",required:"",error:t(e).errors.comments},{default:l(()=>[o(k,{modelValue:t(e).comments,"onUpdate:modelValue":i[5]||(i[5]=s=>t(e).comments=s),placeholder:"Share any additional thoughts, suggestions, or observations...",rows:"6",disabled:t(e).processing,"character-count":!0,"max-length":2e3},null,8,["modelValue","disabled"])]),_:1},8,["error"])])]),_:1}),o(v,{title:"Future Goals & Recommendations",description:"Suggest goals and next steps"},{default:l(()=>[r("div",ye,[o(c,{label:"Recommended Goals",description:"Suggest 2-3 specific goals for the next review period",error:t(e).errors.goals},{default:l(()=>[r("div",xe,[(d(!0),m(f,null,h(t(e).goals,(s,n)=>(d(),m("div",{key:n,class:"flex items-center space-x-3"},[o(ee,{modelValue:t(e).goals[n],"onUpdate:modelValue":_=>t(e).goals[n]=_,placeholder:`Goal ${n+1}...`,disabled:t(e).processing,class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),t(e).goals.length>1?(d(),x(F,{key:0,variant:"ghost","icon-left":"minus",onClick:_=>M(n),disabled:t(e).processing,size:"sm"},null,8,["onClick","disabled"])):C("",!0)]))),128)),t(e).goals.length<5?(d(),x(F,{key:0,variant:"ghost","icon-left":"plus",label:"Add Goal",onClick:L,disabled:t(e).processing,size:"sm"},null,8,["disabled"])):C("",!0)])]),_:1},8,["error"]),o(c,{label:"Support & Resources",description:"What support or resources would help this person succeed?",error:t(e).errors.support},{default:l(()=>[o(k,{modelValue:t(e).support,"onUpdate:modelValue":i[6]||(i[6]=s=>t(e).support=s),placeholder:"Suggest training, mentoring, resources, or other support...",rows:"3",disabled:t(e).processing,"character-count":!0,"max-length":500},null,8,["modelValue","disabled"])]),_:1},8,["error"])])]),_:1})]),_:1},8,["actions","errors","is-submitting"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{We as default};
