import{z as te,B as re,f as m,e as w,c as h,o as g,a as s,w as Qe,k as F,A as ge,p as Ze,h as Q,n as M,T as Me,g as Z,u as I,S as Re,i as j,t as $,y as he,D as Ue,N as W,F as de,r as ve,Q as we,l as me,d as rt,O as ft,s as Le,P as Ge,q as je,C as yt,M as Ve,R as bt,U as wt,K as We,V as kt}from"./app-BZSoyAQ4.js";import{u as pe}from"./useAuth-C_KYBUzS.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as Et}from"./ApplicationLogo-bZGkATQv.js";import{I as ee,D as Fe,E as Tt,t as xt}from"./Icon-BIgMkaDq.js";import{u as Ct}from"./useAccessibility-DCqOG1QY.js";const _t={class:"relative"},st={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(l){const t=l,e=u=>{n.value&&u.key==="Escape"&&(n.value=!1)};te(()=>document.addEventListener("keydown",e)),re(()=>document.removeEventListener("keydown",e));const o=m(()=>({48:"w-48"})[t.width.toString()]),r=m(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=w(!1);return(u,f)=>(g(),h("div",_t,[s("div",{onClick:f[0]||(f[0]=v=>n.value=!n.value)},[ge(u.$slots,"trigger")]),Qe(s("div",{class:"fixed inset-0 z-40",onClick:f[1]||(f[1]=v=>n.value=!1)},null,512),[[Ze,n.value]]),F(Me,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Q(()=>[Qe(s("div",{class:M(["absolute z-50 mt-2 rounded-md shadow-lg",[o.value,r.value]]),style:{display:"none"},onClick:f[2]||(f[2]=v=>n.value=!1)},[s("div",{class:M(["rounded-md ring-1 ring-black ring-opacity-5",l.contentClasses])},[ge(u.$slots,"content")],2)],2),[[Ze,n.value]])]),_:3})]))}},De={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(l){return(t,e)=>(g(),Z(I(Re),{href:l.href,method:l.method,as:l.as,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:Q(()=>[ge(t.$slots,"default")]),_:3},8,["href","method","as"]))}},At={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},St={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},It={class:"flex items-start"},Nt={class:"ml-3 flex-1"},Rt={class:"mt-1 text-sm text-red-700"},Dt={key:0,class:"mt-3"},Mt={__name:"NavigationErrorDisplay",setup(l){const t=w(!1),e=w(""),o=w(null),r=w(null),n=m(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),u=(k,A=null)=>{e.value=k,o.value=A,t.value=!0,r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{v()},1e4)},f=async()=>{if(o.value)try{await o.value()}catch(k){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",k)}v()},v=()=>{t.value=!1,e.value="",o.value=null,r.value&&(clearTimeout(r.value),r.value=null)};return te(()=>{typeof window<"u"&&(window.showNavigationError=u)}),re(()=>{typeof window<"u"&&delete window.showNavigationError,r.value&&clearTimeout(r.value)}),(k,A)=>t.value?(g(),h("div",At,[s("div",St,[s("div",It,[A[2]||(A[2]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),s("div",Nt,[A[0]||(A[0]=s("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),s("div",Rt,$(e.value),1),o.value?(g(),h("div",Dt,[s("button",{onClick:f,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},$(n.value),1)])):j("",!0)]),s("div",{class:"ml-4 flex-shrink-0"},[s("button",{onClick:v,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},A[1]||(A[1]=[s("span",{class:"sr-only"},"Close",-1),s("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):j("",!0)}},Y={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920},Je={tablet:{min:768},desktop:{min:1024}},He={minimum:44,comfortable:48,large:56};function Lt(l){return l===void 0&&(l=typeof window<"u"&&window.innerWidth||1024),l<Je.tablet.min?"mobile":l<Je.desktop.min?"tablet":"desktop"}function it(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Bt(l="comfortable"){const t=Lt(),e=He[l]||He.comfortable;return t==="mobile"?Math.max(e,He.minimum):e}function lt(l,t){let e;return function(...r){const n=()=>{clearTimeout(e),l(...r)};clearTimeout(e),e=setTimeout(n,t)}}function Ot(l,t){let e;return function(...r){e||(l.apply(this,r),e=!0,setTimeout(()=>e=!1,t))}}function $t(){if(typeof window>"u")return{top:0,right:0,bottom:0,left:0};const l=getComputedStyle(document.documentElement);return{top:parseInt(l.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(l.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(l.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(l.getPropertyValue("env(safe-area-inset-left)"))||0}}function Pt(){if(!it())return;let l=window.innerHeight;const t=()=>{const e=window.innerHeight;l-e>150?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")};return window.addEventListener("resize",lt(t,100)),()=>{window.removeEventListener("resize",t),document.body.classList.remove("keyboard-visible")}}const K=w(0),Xe=w(0),et=w("portrait");function $e(){const l=()=>{typeof window<"u"&&(K.value=window.innerWidth,Xe.value=window.innerHeight,et.value=window.innerWidth>window.innerHeight?"landscape":"portrait")};l();const t=m(()=>K.value>=Y.sm),e=m(()=>K.value>=Y.md),o=m(()=>K.value>=Y.lg),r=m(()=>K.value>=Y.xl),n=m(()=>K.value>=Y["2xl"]),u=m(()=>K.value<Y.sm),f=m(()=>K.value>=Y.sm&&K.value<Y.lg),v=m(()=>K.value>=Y.lg),k=m(()=>K.value>=Y["2xl"]?"2xl":K.value>=Y.xl?"xl":K.value>=Y.lg?"lg":K.value>=Y.md?"md":K.value>=Y.sm?"sm":"xs"),A=m(()=>u.value?"mobile":f.value?"tablet":"desktop"),p=m(()=>it()),T=m(()=>typeof window>"u"?1:window.devicePixelRatio||1),x=m(()=>T.value>1),P=m(()=>$t()),R=w(!1);let B=null,i=null;const a=C=>K.value>=Y[C],d=C=>{const V=Object.keys(Y),E=V.indexOf(C);if(E===-1)return!1;const y=Y[C],G=V[E+1],ne=G?Y[G]-1:1/0;return K.value>=y&&K.value<=ne},c=C=>K.value<Y[C],b=C=>{const V=Object.keys(Y).sort((E,y)=>Y[y]-Y[E]);for(const E of V)if(K.value>=Y[E]&&C[E]!==void 0)return C[E];return C.xs||C[Object.keys(C)[0]]},H=C=>b(C),D=()=>({sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"})[k.value]||"100%",J=C=>b(C),N=(C,V="up")=>{const E=Y[C];if(!E)return"";switch(V){case"up":return`(min-width: ${E}px)`;case"down":return`(max-width: ${E-1}px)`;case"only":const y=Object.keys(Y).find(ne=>Y[ne]>E),G=y?Y[y]-1:9999;return`(min-width: ${E}px) and (max-width: ${G}px)`;default:return`(min-width: ${E}px)`}};let L;const z=()=>{clearTimeout(L),L=setTimeout(l,100)},U=(C="comfortable")=>Bt(C),O=C=>b(C,K.value);te(()=>{if(l(),typeof window<"u"){window.addEventListener("resize",z),window.addEventListener("orientationchange",l),B=Pt();const C=()=>{R.value=document.body.classList.contains("keyboard-visible")};i=new MutationObserver(C),i.observe(document.body,{attributes:!0,attributeFilter:["class"]})}}),re(()=>{typeof window<"u"&&(window.removeEventListener("resize",z),window.removeEventListener("orientationchange",l)),clearTimeout(L),B&&typeof B=="function"&&B(),i&&i.disconnect()});const _=()=>{};return{windowWidth:m(()=>K.value),windowHeight:m(()=>Xe.value),orientation:m(()=>et.value),isSmUp:t,isMdUp:e,isLgUp:o,isXlUp:r,is2XlUp:n,isMobile:u,isTablet:f,isDesktop:v,isTouchDevice:p,isHighDensity:x,currentBreakpoint:k,deviceType:A,pixelRatio:T,safeAreaInsets:P,isKeyboardVisible:m(()=>R.value),isBreakpoint:a,isBreakpointOnly:d,isBreakpointDown:c,getResponsiveValue:b,getGridColumns:H,getContainerMaxWidth:D,getResponsiveSpacing:J,createMediaQuery:N,getOptimalTouchSize:U,getResponsiveValueFromConfig:O,debugResponsive:_,breakpoints:m(()=>Y)}}const Ee=1024,tt=150,ot=200,se=w(0),Ae=w(0),Se=w(!1),Be=w(null),Ie=w([]),Ne=w("portrait"),Vt=m(()=>Ne.value==="landscape");function ct(){const l=m(()=>se.value>=Ee),t=m(()=>se.value<Ee),e=m(()=>l.value?"desktop":"mobile"),o=m(()=>Be.value?Be.value.mode!==e.value:!1),r=w({currentRoute:null,userPreferences:{},navigationState:{},scrollPosition:0,timestamp:null}),n=()=>{if(typeof window>"u")return;const a=window.innerWidth,d=window.innerHeight,c=a>d?"landscape":"portrait";se.value!==0&&(Be.value={width:se.value,height:Ae.value,mode:e.value,orientation:Ne.value,timestamp:Date.now()}),se.value=a,Ae.value=d,Ne.value=c};n();const u=lt(()=>{n()},tt),f=Ot(()=>{typeof window<"u"&&(se.value=window.innerWidth,Ae.value=window.innerHeight)},16),v=(a={})=>{const d={currentRoute:window.location.pathname,scrollPosition:window.scrollY||0,timestamp:Date.now(),breakpoint:se.value,navigationMode:e.value,...a};return r.value=d,Ie.value.unshift(d),Ie.value.length>5&&(Ie.value=Ie.value.slice(0,5)),d},k=()=>{if(!r.value.timestamp)return null;try{return r.value.scrollPosition&&window.scrollTo(0,r.value.scrollPosition),r.value}catch(a){return console.error("[BreakpointManager] Error restoring state:",a),null}},A=async(a,d)=>{if(Se.value){console.warn("[BreakpointManager] Transition already in progress, skipping");return}Se.value=!0;try{const c=v({fromMode:a,toMode:d,transitionReason:"breakpoint_change"});return await Ue(),await new Promise(b=>setTimeout(b,ot)),k(),c}catch(c){throw console.error("[BreakpointManager] Transition error:",c),c}finally{Se.value=!1}},p=()=>{v({reason:"device_rotation"}),setTimeout(()=>{n(),k()},100)},T=()=>{v({reason:"browser_zoom"}),n()},x=()=>{if(typeof window>"u")return!1;const a=window.innerWidth,d=se.value,c=Math.abs(a-d);return c>10?(console.warn("[BreakpointManager] Breakpoint conflict detected:",{actual:a,reported:d,difference:c}),n(),!0):!1},P=(a=se.value)=>Math.abs(a-Ee)<5,R=(a=se.value)=>a-Ee,B=()=>({currentWidth:se.value,currentHeight:Ae.value,navigationBreakpoint:Ee,navigationMode:e.value,isTransitioning:Se.value,orientation:Ne.value,isExactBreakpoint:P(),breakpointDistance:R(),hasChanged:o.value,previousState:Be.value}),i=()=>{};return he(e,async(a,d)=>{if(d&&a!==d)try{await A(d,a)}catch(c){console.error("[BreakpointManager] Failed to execute transition:",c)}},{immediate:!1}),te(()=>{if(n(),typeof window<"u"){window.addEventListener("resize",u),window.addEventListener("resize",f),window.addEventListener("orientationchange",p);let a=window.devicePixelRatio;const d=setInterval(()=>{window.devicePixelRatio!==a&&(a=window.devicePixelRatio,T())},500);re(()=>{window.removeEventListener("resize",u),window.removeEventListener("resize",f),window.removeEventListener("orientationchange",p),clearInterval(d)})}}),{windowWidth:m(()=>se.value),windowHeight:m(()=>Ae.value),navigationMode:e,isDesktopBreakpoint:l,isMobileBreakpoint:t,isTransitioning:m(()=>Se.value),hasBreakpointChanged:o,orientation:m(()=>Ne.value),isLandscape:Vt,preservedState:m(()=>r.value),stateHistory:m(()=>Ie.value),preserveCurrentState:v,restorePreservedState:k,isExactBreakpoint:P,getBreakpointDistance:R,getBreakpointInfo:B,detectBreakpointConflicts:x,debugBreakpointManager:i,NAVIGATION_BREAKPOINT:Ee,DEBOUNCE_DELAY:tt,TRANSITION_DELAY:ot}}const ye=w("light"),be=w("light"),Te=w(!1),xe={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Pe(){const l=m(()=>Te.value?be.value:ye.value),t=m(()=>xe[l.value]),e=m(()=>l.value==="dark"),o=m(()=>l.value==="light"),r=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(c){return console.warn("Failed to detect system theme:",c),"light"}},n=(c,b=!1)=>{try{const D={theme:T(c)?c:"light",useSystem:!!b,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(D))}catch(H){console.warn("Failed to save theme preference:",H);try{localStorage.removeItem("theme-preference")}catch(D){console.warn("Failed to clear corrupted theme preference:",D)}}},u=c=>{if(!(typeof document>"u"))try{const b=document.documentElement,H=T(c)?c:"light";b.classList.remove("theme-light","theme-dark"),b.classList.add(`theme-${H}`),f(H);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:H,config:xe[H]}}))}catch(D){console.warn("Failed to dispatch theme change event:",D)}}catch(b){console.error("Failed to apply theme:",b);try{const H=document.documentElement;H.classList.remove("theme-light","theme-dark"),H.classList.add("theme-light"),f("light")}catch(H){console.error("Failed to apply fallback theme:",H)}}},f=c=>{if(!(typeof document>"u"))try{const b=document.documentElement;c==="dark"?(b.style.setProperty("--color-neutral-50","#0a0a0a"),b.style.setProperty("--color-neutral-100","#111827"),b.style.setProperty("--color-neutral-200","#262626"),b.style.setProperty("--color-neutral-300","#404040"),b.style.setProperty("--color-neutral-400","#525252"),b.style.setProperty("--color-neutral-500","#6b7280"),b.style.setProperty("--color-neutral-600","#a3a3a3"),b.style.setProperty("--color-neutral-700","#d4d4d4"),b.style.setProperty("--color-neutral-800","#e5e5e5"),b.style.setProperty("--color-neutral-900","#fafafa"),b.style.setProperty("--color-neutral-950","#ffffff")):(b.style.setProperty("--color-neutral-50","#fafafa"),b.style.setProperty("--color-neutral-100","#f5f5f5"),b.style.setProperty("--color-neutral-200","#e5e5e5"),b.style.setProperty("--color-neutral-300","#d4d4d4"),b.style.setProperty("--color-neutral-400","#a3a3a3"),b.style.setProperty("--color-neutral-500","#6b7280"),b.style.setProperty("--color-neutral-600","#525252"),b.style.setProperty("--color-neutral-700","#404040"),b.style.setProperty("--color-neutral-800","#262626"),b.style.setProperty("--color-neutral-900","#111827"),b.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(b){console.warn("Failed to update theme properties:",b)}},v=c=>{u(c)},k=c=>{if(!xe[c]){console.warn(`Theme "${c}" not found`);return}ye.value=c,Te.value=!1,n(c,!1),v(c)},A=()=>{Te.value=!0;const c=r();be.value=c,n(c,!0),v(c)},p=()=>{const c=l.value==="light"?"dark":"light";k(c)},T=c=>xe.hasOwnProperty(c),x=()=>Object.values(xe),P=()=>{},R=()=>{const c=[];if(T(ye.value)||c.push(`Invalid current theme: ${ye.value}`),T(be.value)||c.push(`Invalid system theme: ${be.value}`),T(l.value)||c.push(`Invalid active theme: ${l.value}`),typeof document<"u"){const b=document.documentElement,H=b.classList.contains("theme-light"),D=b.classList.contains("theme-dark");!H&&!D&&c.push("No theme class found on document root"),H&&D&&c.push("Multiple theme classes found on document root");const J=`theme-${l.value}`;b.classList.contains(J)||c.push(`Expected theme class ${J} not found on document root`)}return{isValid:c.length===0,issues:c}},B=()=>{if(!(typeof document>"u"))try{const c=document.documentElement;return["theme-light","theme-dark"].forEach(H=>{c.classList.remove(H)}),!0}catch(c){return console.warn("Failed to cleanup theme classes:",c),!1}},i=()=>{try{ye.value="light",be.value=r(),Te.value=!1;try{localStorage.removeItem("theme-preference")}catch(c){console.warn("Failed to clear theme preference from localStorage:",c)}return u("light"),!0}catch(c){return console.error("Failed to reset theme to default:",c),!1}},a=()=>{console.warn("Attempting theme system recovery...");try{if(B(),i())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(c){console.error("Theme system recovery failed:",c);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(b){return console.error("Last resort theme recovery failed:",b),!1}}},d=()=>{try{ye.value="light",be.value="light",Te.value=!1;try{localStorage.removeItem("theme-preference")}catch(c){console.warn("Failed to clear theme preference:",c)}if(typeof document<"u"){const c=document.documentElement;c.classList.remove("theme-light","theme-dark","dark","light"),c.classList.add("theme-light"),c.style.setProperty("--color-neutral-50","#fafafa"),c.style.setProperty("--color-neutral-100","#f5f5f5"),c.style.setProperty("--color-neutral-200","#e5e5e5"),c.style.setProperty("--color-neutral-300","#d4d4d4"),c.style.setProperty("--color-neutral-400","#a3a3a3"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#525252"),c.style.setProperty("--color-neutral-700","#404040"),c.style.setProperty("--color-neutral-800","#262626"),c.style.setProperty("--color-neutral-900","#111827"),c.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(c){console.error("Theme initialization failed:",c);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(b){console.error("Emergency theme fallback failed:",b)}return null}};return te(()=>{d()}),he(l,c=>{v(c)}),{currentTheme:m(()=>ye.value),systemTheme:m(()=>be.value),activeTheme:l,themeConfig:t,isDark:e,isLight:o,isSystemThemePreferred:m(()=>Te.value),setTheme:k,toggleTheme:p,useSystemTheme:A,validateTheme:T,getAvailableThemes:x,debugThemeState:P,initializeTheme:d,validateThemeState:R,cleanupThemeClasses:B,resetThemeToDefault:i,recoverThemeSystem:a,cleanupAndApplyTheme:u,themes:m(()=>xe)}}const Ft=["data-sidebar-id"],Ht={key:0,class:"flex-1 min-w-0"},zt=["aria-label"],Gt={class:"flex-1 overflow-y-auto overflow-x-visible py-3 scrollbar-hide"},jt={key:0,class:"relative group mb-1",style:{overflow:"visible"}},Ut=["onClick","title"],Wt={class:"flex items-center min-w-0 flex-1"},Yt={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Kt={key:2,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={key:3,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zt={key:0,class:"truncate text-sm"},Jt={key:0,class:"w-4 h-4 ml-2 flex-shrink-0 opacity-60 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xt={key:0,class:"absolute left-full top-0 ml-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[9999]"},eo={class:"py-2"},to=["onClick"],oo={class:"flex-shrink-0 w-5 h-5 flex items-center justify-center mr-3"},no={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ao={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ro={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},so={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},io={key:4,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lo={key:5,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},co={key:6,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},uo={key:7,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vo={key:8,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mo={key:9,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},go={class:"truncate"},ho=["onClick","title"],po={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fo={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},yo={key:2,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bo={key:3,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wo={key:4,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ko={key:5,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Eo={key:6,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={key:7,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xo={key:8,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},Co={key:9,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_o={key:10,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ao={key:0,class:"text-sm truncate"},So=["title"],Io={key:0,class:"font-medium"},No=["title"],Ro={key:0,class:"font-medium"},Do="HR Management",Mo="Streamline your workforce",Lo={__name:"SidebarNavigation",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1}},emits:["navigate","collapse-change"],setup(l,{emit:t}){const e=l,o=t,{roles:r}=pe(),{isDark:n}=Pe(),u=w(!1),f=w(null),v=w(e.initiallyCollapsed),k=()=>{typeof window<"u"&&(u.value=window.innerWidth>=1024)},A=m(()=>{const i=r.value,a=[];return a.push({id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard"}),a.push({id:"my-profile",label:"My Profile",icon:"user",route:"profile.edit"}),(i.includes("Admin")||i.includes("Manager")||i.includes("HR"))&&a.push({id:"employees",label:"Employee Management",icon:"users",route:"employees.index"}),a.push({id:"attendance",label:"Time Tracking",icon:"clock",route:"attendances.index"}),a.push({id:"leaves",label:"Leave Management",icon:"calendar",route:"leaves.index"}),(i.includes("Admin")||i.includes("HR"))&&a.push({id:"leave-types",label:"Leave Policies",icon:"clipboard-document-list",route:"leave-types.index"}),a.push({id:"feedbacks",label:"Feedback System",icon:"chat",route:"feedbacks.index"}),a.push({id:"work-reports",label:"Work Reports",icon:"document-text",route:"work-reports.index"}),a.push({id:"leaderboard",label:"Performance Leaderboard",icon:"trophy",route:"work-reports.leaderboard"}),(i.includes("Admin")||i.includes("Manager"))&&a.push({id:"organizational-analytics",label:"Organizational Analytics",icon:"chart-bar-square",route:"organizational-analytics.index"}),a.push({id:"competency-section",label:"Competency Management",icon:"academic-cap",type:"accordion",children:[{id:"my-assessments",label:"My Assessments",icon:"clipboard-document-check",route:"competency-assessments.my-assessments"},...i.includes("Admin")||i.includes("Manager")?[{id:"assessment-dashboard",label:"Assessment Dashboard",icon:"chart-pie",route:"assessment-dashboard"},{id:"all-assessments",label:"All Assessments",icon:"clipboard-document-list",route:"competency-assessments.index"},{id:"pending-assessments",label:"Pending Assessments",icon:"clipboard-document-check",route:"competency-assessments.pending"}]:[],...i.includes("Admin")?[{id:"assessment-cycles",label:"Assessment Cycles",icon:"calendar",route:"assessment-cycle-manager"},{id:"competency-setup",label:"Competency Setup",icon:"cog-6-tooth",route:"competencies.index"},{id:"competency-reports",label:"Reports & Analytics",icon:"chart-bar",route:"competency-analytics.reports"}]:[]]}),(i.includes("Admin")||i.includes("Manager"))&&a.push({id:"approvals-section",label:"Approvals",icon:"check-circle",type:"accordion",children:[{id:"pending-timesheets",label:"Timesheet Approvals",icon:"clock",route:"timesheets.pending-approvals"}]}),i.includes("Admin")&&a.push({id:"administration-section",label:"Administration",icon:"cog-6-tooth",type:"accordion",children:[{id:"role-management",label:"Role Management",icon:"shield-check",route:"admin.roles.index"},{id:"system-settings",label:"System Settings",icon:"adjustments-horizontal",route:"system-settings.index"}]}),a}),p=i=>{if(!(i!=null&&i.route)||!e.currentRoute)return!1;if(i.route===e.currentRoute)return!0;const a=i.route.split("."),d=e.currentRoute.split(".");return a[0]===d[0]},T=()=>{v.value=!v.value,localStorage.setItem("sidebar-collapsed",v.value.toString()),o("collapse-change",v.value)},x=i=>{if(console.log("Navigation clicked:",i),o("navigate",{route:i.route,item:i}),i.route)try{if(console.log("Attempting navigation to:",i.route),typeof window<"u"&&window.route)we.visit(window.route(i.route));else{const a=`/${i.route.replace(".","/")}`;console.log("Navigating to URL:",a),we.visit(a)}}catch(a){console.warn(`Navigation failed for route: ${i.route}`,a)}},P=()=>{try{typeof window<"u"&&window.route?we.post(window.route("logout")):we.post("/logout")}catch(i){console.warn("Logout navigation failed:",i),window.location.href="/logout"}},R=i=>i.children?i.children.some(a=>p(a)):!1,B=w(`sidebar-${Math.random().toString(36).substr(2,9)}`);return te(()=>{k(),console.log("[SidebarNavigation] Component mounted, isDesktop:",u.value,"ID:",B.value),W.registerComponent(B.value,"desktop"),window.addEventListener("resize",k);const i=localStorage.getItem("sidebar-collapsed");i!==null&&(v.value=i==="true"),o("collapse-change",v.value)}),re(()=>{typeof window<"u"&&window.removeEventListener("resize",k),W.unregisterComponent(B.value)}),(i,a)=>u.value?(g(),h("nav",{key:0,ref_key:"sidebarRef",ref:f,class:M(["sidebar-navigation flex flex-col h-screen fixed left-0 top-0 z-40 transition-all duration-300 ease-out overflow-visible",I(n)?"bg-gray-900 border-r border-gray-800":"bg-white border-r border-gray-200",{"w-64":!v.value,"w-16":v.value}]),role:"navigation","aria-label":"Main navigation","data-debug":"sidebar-navigation-component","data-sidebar-id":Math.random().toString(36).substr(2,9)},[s("div",{class:M(["flex items-center justify-between p-4 border-b",I(n)?"border-gray-800":"border-gray-200"])},[v.value?j("",!0):(g(),h("div",Ht,[s("h1",{class:M(["text-lg font-semibold truncate",I(n)?"text-white":"text-gray-900"])},$(Do),2),s("p",{class:M(["text-sm truncate",I(n)?"text-gray-400":"text-gray-500"])},$(Mo),2)])),s("button",{onClick:T,class:M(["p-2 rounded-lg transition-colors",I(n)?"text-gray-400 hover:text-white hover:bg-gray-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"]),"aria-label":v.value?"Expand sidebar":"Collapse sidebar"},[(g(),h("svg",{class:M(["w-5 h-5 transition-transform duration-200",{"rotate-180":v.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[1]||(a[1]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)]),2))],10,zt)],2),s("div",Gt,[s("div",{class:M(["space-y-0.5 overflow-visible",{"px-3":!v.value,"px-2":v.value}])},[(g(!0),h(de,null,ve(A.value,d=>(g(),h("div",{key:d.id},[d.type==="accordion"?(g(),h("div",jt,[s("button",{onClick:()=>x(d.children[0]),class:M(["group w-full flex items-center text-left transition-all duration-200","rounded-lg relative",{"p-2.5":v.value,"px-3 py-2":!v.value,"bg-blue-50 text-blue-700":R(d)&&!I(n),"bg-blue-900/20 text-blue-400":R(d)&&I(n),"hover:bg-gray-50":!R(d)&&!I(n),"hover:bg-gray-800":!R(d)&&I(n),"text-gray-700 font-medium":!R(d)&&!I(n),"text-gray-300 font-medium":!R(d)&&I(n)}]),title:v.value?d.label:""},[s("div",Wt,[s("div",{class:M(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},[d.icon==="academic-cap"?(g(),h("svg",Yt,a[2]||(a[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l9-5-9-5-9 5 9 5z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l6.16-3.422A12.083 12.083 0 0112 21a12.083 12.083 0 01-6.16-10.422L12 14z"},null,-1)]))):d.icon==="check-circle"?(g(),h("svg",qt,a[3]||(a[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):d.icon==="cog-6-tooth"?(g(),h("svg",Kt,a[4]||(a[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]))):(g(),h("svg",Qt,a[5]||(a[5]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?j("",!0):(g(),h("span",Zt,$(d.label),1))]),v.value?j("",!0):(g(),h("svg",Jt,a[6]||(a[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])))],10,Ut),v.value?j("",!0):(g(),h("div",Xt,[s("div",eo,[(g(!0),h(de,null,ve(d.children,c=>(g(),h("button",{key:c.id,onClick:()=>x(c),class:M(["w-full flex items-center px-4 py-2 text-sm transition-colors duration-150",{"bg-blue-50 text-blue-700":p(c)&&!I(n),"bg-blue-900/20 text-blue-400":p(c)&&I(n),"hover:bg-gray-50":!p(c)&&!I(n),"hover:bg-gray-700":!p(c)&&I(n),"text-gray-700":!p(c)&&!I(n),"text-gray-300":!p(c)&&I(n)}])},[s("div",oo,[c.icon==="chart-pie"?(g(),h("svg",no,a[7]||(a[7]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"},null,-1)]))):c.icon==="clipboard-document-check"?(g(),h("svg",ao,a[8]||(a[8]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7l2 2 4-4"},null,-1)]))):c.icon==="clipboard-document-list"?(g(),h("svg",ro,a[9]||(a[9]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):c.icon==="calendar"?(g(),h("svg",so,a[10]||(a[10]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):c.icon==="shield-check"?(g(),h("svg",io,a[11]||(a[11]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},null,-1)]))):c.icon==="adjustments-horizontal"?(g(),h("svg",lo,a[12]||(a[12]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"},null,-1)]))):c.icon==="cog-6-tooth"?(g(),h("svg",co,a[13]||(a[13]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]))):c.icon==="chart-bar"?(g(),h("svg",uo,a[14]||(a[14]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):c.icon==="clock"?(g(),h("svg",vo,a[15]||(a[15]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(g(),h("svg",mo,a[16]||(a[16]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))]),s("span",go,$(c.label),1)],10,to))),128))])]))])):(g(),h("button",{key:1,onClick:()=>x(d),class:M(["group w-full flex items-center text-left transition-all duration-200 relative","rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-2":!v.value,"bg-blue-50 text-blue-700":p(d)&&!I(n),"bg-blue-900/20 text-blue-400":p(d)&&I(n),"hover:bg-gray-50":!p(d)&&!I(n),"hover:bg-gray-800":!p(d)&&I(n),"text-gray-700":!p(d)&&!I(n),"text-gray-300":!p(d)&&I(n)}]),title:v.value?d.label:""},[s("div",{class:M(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},[d.icon==="home"?(g(),h("svg",po,a[17]||(a[17]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)]))):d.icon==="user"?(g(),h("svg",fo,a[18]||(a[18]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]))):d.icon==="users"?(g(),h("svg",yo,a[19]||(a[19]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):d.icon==="clock"?(g(),h("svg",bo,a[20]||(a[20]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):d.icon==="calendar"?(g(),h("svg",wo,a[21]||(a[21]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):d.icon==="clipboard-document-list"?(g(),h("svg",ko,a[22]||(a[22]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)]))):d.icon==="chat"?(g(),h("svg",Eo,a[23]||(a[23]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)]))):d.icon==="document-text"?(g(),h("svg",To,a[24]||(a[24]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"},null,-1)]))):d.icon==="trophy"?(g(),h("svg",xo,a[25]||(a[25]=[s("path",{d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h9.284a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Z"},null,-1)]))):d.icon==="chart-bar-square"?(g(),h("svg",Co,a[26]||(a[26]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"},null,-1)]))):(g(),h("svg",_o,a[27]||(a[27]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),v.value?j("",!0):(g(),h("span",Ao,$(d.label),1))],10,ho))]))),128))],2)]),s("div",{class:M(["p-2 border-t space-y-1",I(n)?"border-gray-800":"border-gray-200"])},[s("button",{onClick:a[0]||(a[0]=()=>x({route:"profile.edit",label:"Settings"})),class:M(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-1.5":!v.value},I(n)?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"]),title:v.value?"Settings":""},[s("div",{class:M(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},a[28]||(a[28]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),2),v.value?j("",!0):(g(),h("span",Io,"Settings"))],10,So),s("button",{onClick:P,class:M(["group w-full flex items-center text-left transition-colors rounded-lg",{"p-2.5 justify-center":v.value,"px-3 py-1.5":!v.value},"text-red-600 hover:bg-red-50 hover:text-red-700"]),title:v.value?"Logout":""},[s("div",{class:M(["flex-shrink-0 w-6 h-6 flex items-center justify-center",{"mr-3":!v.value}])},a[29]||(a[29]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)]),2),v.value?j("",!0):(g(),h("span",Ro,"Logout"))],10,No)],2)],10,Ft)):j("",!0)}},nt=le(Lo,[["__scopeId","data-v-ba0566fd"]]);function Bo(l,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function Oo(l,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const $o={class:"mobile-navigation-item"},Po={class:"flex-1"},Vo={class:"flex-1"},Fo={__name:"MobileNavigationItem",props:{item:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]},isChild:{type:Boolean,default:!1}},emits:["navigate"],setup(l,{emit:t}){const e=l,o=t,r=m(()=>{if(!e.item.route)return!1;if(e.item.exact)return e.currentRoute===e.item.route;const f=e.item.route.split(".")[0];return e.currentRoute.startsWith(f)});m(()=>!e.item.roles||e.item.roles.length===0?!0:e.item.roles.some(f=>e.userRoles.includes(f)));const n=f=>{const v="inline-flex items-center justify-center";switch(f){case"success":return`${v} bg-green-100 text-green-800`;case"warning":return`${v} bg-yellow-100 text-yellow-800`;case"error":return`${v} bg-red-100 text-red-800`;case"info":return`${v} bg-blue-100 text-blue-800`;default:return`${v} bg-neutral-100 text-neutral-800`}},u=f=>{o("navigate",{item:e.item,route:e.item.route,event:f}),"vibrate"in navigator&&navigator.vibrate(10)};return(f,v)=>(g(),h("div",$o,[l.item.route?(g(),Z(I(Re),{key:0,href:f.route(l.item.route),class:M(["nav-link flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 touch-manipulation",[r.value?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 border-l-4 border-primary-500 dark:border-primary-400":"text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100",l.isChild?"text-sm":"text-base"]]),style:{"min-height":"44px"},onClick:u,"aria-label":`Navigate to ${l.item.label}`},{default:Q(()=>[F(ee,{name:l.item.icon,size:l.isChild?"sm":"md",class:M(["flex-shrink-0 mr-3",r.value?"text-primary-600 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500"])},null,8,["name","size","class"]),s("span",Po,$(l.item.label),1),l.item.badge?(g(),h("span",{key:0,class:M(["ml-2 px-2 py-1 text-xs font-medium rounded-full",n(l.item.badge.type)])},$(l.item.badge.count),3)):j("",!0),l.item.external?(g(),Z(ee,{key:1,name:"external-link",size:"sm",class:"ml-2 text-neutral-400 dark:text-neutral-500"})):j("",!0)]),_:1},8,["href","class","aria-label"])):(g(),h("div",{key:1,class:M(["nav-item flex items-center px-3 py-3 text-sm font-medium text-neutral-500 dark:text-neutral-400",l.isChild?"text-sm":"text-base"]),style:{"min-height":"44px"}},[F(ee,{name:l.item.icon,size:l.isChild?"sm":"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name","size"]),s("span",Vo,$(l.item.label),1)],2))]))}},at=le(Fo,[["__scopeId","data-v-94500539"]]),Ho={class:"mobile-navigation-section"},zo={key:0,class:"section-header"},Go=["aria-expanded","aria-label"],jo={class:"flex items-center"},Uo={key:0,class:"section-children overflow-hidden"},Wo={class:"ml-6 mt-2 space-y-1"},Yo={__name:"MobileNavigationSection",props:{section:{type:Object,required:!0},currentRoute:{type:String,required:!0},userRoles:{type:Array,default:()=>[]}},emits:["navigate"],setup(l,{emit:t}){const e=l,o=t,r=w(!1),n=m(()=>e.section.children?e.section.children.filter(k=>!k.roles||k.roles.length===0?!0:k.roles.some(A=>e.userRoles.includes(A))):[]),u=m(()=>n.value.some(k=>k.route?e.currentRoute.startsWith(k.route.split(".")[0]):!1)),f=()=>{r.value=!r.value;const k=`mobile-nav-section-${e.section.id}`;localStorage.setItem(k,r.value.toString())},v=k=>{o("navigate",k)};return te(()=>{if(u.value)r.value=!0;else{const k=`mobile-nav-section-${e.section.id}`,A=localStorage.getItem(k);A!==null&&(r.value=A==="true")}}),(k,A)=>(g(),h("div",Ho,[l.section.children&&l.section.children.length>0?(g(),h("div",zo,[s("button",{onClick:f,class:"w-full flex items-center justify-between px-3 py-3 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors duration-200 touch-manipulation",style:{"min-height":"44px"},"aria-expanded":r.value,"aria-label":`Toggle ${l.section.label} section`},[s("div",jo,[F(ee,{name:l.section.icon,size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500 mr-3"},null,8,["name"]),s("span",null,$(l.section.label),1)]),F(ee,{name:"chevron-down",size:"sm",class:M(["text-neutral-400 dark:text-neutral-500 transition-transform duration-200",{"rotate-180":r.value}])},null,8,["class"])],8,Go)])):j("",!0),!l.section.children||l.section.children.length===0?(g(),Z(at,{key:1,item:l.section,"current-route":l.currentRoute,"user-roles":l.userRoles,onNavigate:v},null,8,["item","current-route","user-roles"])):j("",!0),F(Me,{name:"section-expand","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-96 opacity-100","leave-from-class":"max-h-96 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:Q(()=>[l.section.children&&l.section.children.length>0&&r.value?(g(),h("div",Uo,[s("div",Wo,[(g(!0),h(de,null,ve(n.value,p=>(g(),Z(at,{key:p.id,item:p,"current-route":l.currentRoute,"user-roles":l.userRoles,"is-child":!0,onNavigate:v},null,8,["item","current-route","user-roles"]))),128))])])):j("",!0)]),_:1})]))}},qo=le(Yo,[["__scopeId","data-v-512cc717"]]),Ko={sections:[{id:"dashboard",label:"Dashboard",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"],order:1},{id:"my-profile",label:"My Profile",icon:"user",route:"profile.edit",roles:["Admin","Manager","Employee"],order:1.5},{id:"people",label:"People Management",icon:"users",roles:["Admin","Manager","HR"],order:2,children:[{id:"employees",label:"Employees",icon:"user",route:"employees.index",roles:["Admin","Manager","HR"]},{id:"departments",label:"Departments",icon:"building-office",route:"departments.index",roles:["Admin"]}]},{id:"time",label:"Time Management",icon:"clock",roles:["Admin","Manager","Employee"],order:3,children:[{id:"attendance",label:"Attendance",icon:"calendar-check",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"timesheets",label:"Timesheets",icon:"document-text",route:"timesheets.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar-x",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"pending-approvals",label:"Pending Approvals",icon:"check-circle",route:"timesheets.pending-approvals",roles:["Admin","Manager"]}]},{id:"projects",label:"Project Management",icon:"folder-open",roles:["Admin","Manager","Employee"],order:4,children:[{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"tasks",label:"Tasks",icon:"clipboard",route:"tasks.index",roles:["Admin","Manager","Employee"]}]},{id:"communication",label:"Communication",icon:"chat",roles:["Admin","Manager","Employee"],order:5,children:[{id:"feedbacks",label:"Feedbacks",icon:"message-square",route:"feedbacks.index",roles:["Admin","Manager","Employee"]},{id:"notifications",label:"Notifications",icon:"bell",route:"notifications.index",roles:["Admin","Manager","Employee"]}]},{id:"competency",label:"Competency",icon:"academic-cap",roles:["Admin"],order:6,children:[{id:"competencies",label:"Competencies",icon:"academic-cap",route:"competencies.index",roles:["Admin"]},{id:"employee-competencies",label:"Assess Employee",icon:"user-check",route:"employee-competencies.index",roles:["Admin"]}]},{id:"settings",label:"Settings",icon:"cog",roles:["Admin"],order:7,children:[{id:"system-settings",label:"System Settings",icon:"cog",route:"settings.index",roles:["Admin"]},{id:"user-management",label:"User Management",icon:"users",route:"users.index",roles:["Admin"]}]}]};function Qo(l=[]){return!Array.isArray(l)||l.length===0?[]:Ko.sections.filter(t=>t.roles.some(e=>l.includes(e))).map(t=>{if(t.children){const e=t.children.filter(o=>o.roles.some(r=>l.includes(r)));return e.length>0||t.route?{...t,children:e}:null}return t}).filter(Boolean).sort((t,e)=>(t.order||999)-(e.order||999))}const Zo={key:0,class:"mobile-navigation"},Jo={class:"mobile-top-bar fixed top-0 left-0 right-0 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-4 py-3 z-50 shadow-sm"},Xo={class:"flex items-center justify-between"},en=["aria-expanded"],tn={class:"flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-label":"User menu"},on={class:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},nn={class:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700"},an={class:"text-sm font-medium text-neutral-900 dark:text-neutral-100"},rn={class:"text-xs text-neutral-500 dark:text-neutral-400"},sn={class:"drawer-header p-4 border-b border-neutral-200 dark:border-neutral-700"},ln={class:"flex items-center space-x-3"},cn={class:"h-12 w-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},un={class:"flex-1 min-w-0"},dn={class:"text-base font-medium text-neutral-900 dark:text-neutral-100 truncate"},vn={class:"text-sm text-neutral-500 dark:text-neutral-400 truncate"},mn={class:"drawer-navigation p-4"},gn={class:"space-y-2"},hn={class:"drawer-footer border-t border-neutral-200 dark:border-neutral-700 p-4 mt-auto"},pn={class:"space-y-2"},fn={class:"ml-3"},yn={type:"submit",class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Logout"},bn={class:"mobile-bottom-nav fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-700 px-4 py-2 safe-area-pb"},wn={class:"flex items-center justify-around"},kn={class:"text-xs font-medium"},En={__name:"MobileNavigation",props:{currentRoute:{type:String,required:!0}},emits:["navigate","mobile-drawer-toggle"],setup(l,{emit:t}){const e=l,o=t,{roles:r,getUserProperty:n}=pe(),{isDarkMode:u,toggleTheme:f}=Pe(),{isMobile:v}=$e(),k=w(!1),A=w(0),p=w(0),T=w(!1),x=m(()=>n("name","User")),P=m(()=>n("email","")),R=m(()=>{const _=r.value;return _.includes("Admin")?"Administrator":_.includes("Manager")?"Manager":_.includes("Employee")?"Employee":"User"}),B=m(()=>Qo(r.value)),i=m(()=>[{id:"dashboard",label:"Home",icon:"home",route:"dashboard",roles:["Admin","Manager","Employee"]},{id:"attendance",label:"Time",icon:"clock",route:"attendances.index",roles:["Admin","Manager","Employee"]},{id:"leaves",label:"Leaves",icon:"calendar",route:"leaves.index",roles:["Admin","Manager","Employee"]},{id:"projects",label:"Projects",icon:"folder",route:"projects.index",roles:["Admin","Manager","Employee"]},{id:"my-profile",label:"Profile",icon:"user",route:"profile.edit",roles:["Admin","Manager","Employee"]}].filter(_=>_.roles.some(C=>r.value.includes(C)))),a=()=>{k.value=!k.value,o("mobile-drawer-toggle",k.value),k.value?document.body.style.overflow="hidden":document.body.style.overflow=""},d=()=>{k.value=!1,document.body.style.overflow="",o("mobile-drawer-toggle",!1)},c=_=>e.currentRoute.startsWith(_.split(".")[0]),b=_=>{if(d(),o("navigate",_),_.route)try{const C=route(_.route);if(!C)throw new Error(`Route '${_.route}' not found`);we.visit(C,{onError:V=>{console.error("Navigation error:",V),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:new Error("Navigation failed with errors"),route:_.route,context:"mobile-navigation",errors:V}}))},onException:V=>{console.error("Navigation exception:",V),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:V,route:_.route,context:"mobile-navigation"}}))}})}catch(C){console.warn(`Navigation failed for route: ${_.route}`,C),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:C,route:_.route,context:"mobile-navigation"}}))}},H=_=>{try{return route(_)}catch{return console.warn(`Route '${_}' not found, falling back to dashboard`),route("dashboard")}},D=(_,C)=>{try{if(!route(_.route)){C.preventDefault(),console.warn(`Route '${_.route}' not found`);return}}catch(V){C.preventDefault(),console.warn(`Navigation failed for route: ${_.route}`,V),typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigation-error",{detail:{error:V,route:_.route,context:"mobile-bottom-navigation"}}))}},J=()=>{d(),we.post(route("logout"))},N=_=>{A.value=_.touches[0].clientX,T.value=!0},L=_=>{if(!T.value)return;p.value=_.touches[0].clientX,p.value-A.value<-50&&_.preventDefault()},z=_=>{if(!T.value)return;p.value-A.value<-100&&d(),T.value=!1,A.value=0,p.value=0},U=_=>{_.key==="Escape"&&k.value&&d()},O=w(`mobile-${Math.random().toString(36).substr(2,9)}`);return te(()=>{document.addEventListener("keydown",U),W.registerComponent(O.value,"mobile")}),re(()=>{document.removeEventListener("keydown",U),document.body.style.overflow="",W.unregisterComponent(O.value)}),(_,C)=>I(v)?(g(),h("div",Zo,[s("div",Jo,[s("div",Xo,[s("button",{onClick:a,class:"hamburger-button flex items-center justify-center p-2 rounded-lg text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200 touch-manipulation",style:{"min-height":"44px","min-width":"44px"},"aria-expanded":k.value,"aria-label":"Toggle navigation menu"},[F(ee,{name:k.value?"x":"menu",size:"md",class:"transition-transform duration-200"},null,8,["name"])],8,en),F(I(Re),{href:_.route("dashboard"),class:"flex items-center touch-manipulation"},{default:Q(()=>[F(Et,{class:"h-8 w-8"}),C[1]||(C[1]=s("span",{class:"ml-2 text-lg font-semibold text-neutral-900 dark:text-neutral-100"},"HR Management",-1))]),_:1,__:[1]},8,["href"]),F(st,{align:"right",width:"48"},{trigger:Q(()=>[s("button",tn,[s("div",on,[F(ee,{name:"user",size:"sm",class:"text-primary-600 dark:text-primary-400"})])])]),content:Q(()=>[s("div",nn,[s("p",an,$(x.value),1),s("p",rn,$(P.value),1)]),F(De,{href:_.route("profile.edit")},{default:Q(()=>C[2]||(C[2]=[me(" Profile Settings ")])),_:1,__:[2]},8,["href"]),F(De,{href:_.route("logout"),method:"post",as:"button"},{default:Q(()=>C[3]||(C[3]=[me(" Log Out ")])),_:1,__:[3]},8,["href"])]),_:1})])]),F(Me,{name:"mobile-drawer","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-300 ease-in","enter-from-class":"transform -translate-x-full","enter-to-class":"transform translate-x-0","leave-from-class":"transform translate-x-0","leave-to-class":"transform -translate-x-full"},{default:Q(()=>[k.value?(g(),h("div",{key:0,class:"mobile-drawer fixed inset-y-0 left-0 z-40 w-80 max-w-sm bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-700 shadow-xl overflow-y-auto",onTouchstart:N,onTouchmove:L,onTouchend:z,role:"navigation","aria-label":"Mobile navigation menu"},[s("div",sn,[s("div",ln,[s("div",cn,[F(ee,{name:"user",size:"md",class:"text-primary-600 dark:text-primary-400"})]),s("div",un,[s("p",dn,$(x.value),1),s("p",vn,$(R.value),1)])])]),s("nav",mn,[s("div",gn,[(g(!0),h(de,null,ve(B.value,V=>(g(),Z(qo,{key:V.id,section:V,"current-route":l.currentRoute,"user-roles":I(r),onNavigate:b},null,8,["section","current-route","user-roles"]))),128))])]),s("div",hn,[s("div",pn,[s("button",{onClick:C[0]||(C[0]=(...V)=>I(f)&&I(f)(...V)),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},"aria-label":"Toggle theme"},[F(ee,{name:I(u)?"sun":"moon",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"},null,8,["name"]),s("span",fn,$(I(u)?"Light Mode":"Dark Mode"),1)]),F(I(Re),{href:_.route("profile.edit"),class:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100 touch-manipulation",style:{"min-height":"44px"},onClick:d},{default:Q(()=>[F(ee,{name:"cog",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),C[4]||(C[4]=s("span",{class:"ml-3"},"Settings",-1))]),_:1,__:[4]},8,["href"]),s("form",{onSubmit:rt(J,["prevent"]),class:"w-full"},[s("button",yn,[F(ee,{name:"arrow-left",size:"md",class:"flex-shrink-0 text-neutral-400 dark:text-neutral-500"}),C[5]||(C[5]=s("span",{class:"ml-3"},"Logout",-1))])],32)])])],32)):j("",!0)]),_:1}),F(Me,{name:"mobile-backdrop","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-300 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Q(()=>[k.value?(g(),h("div",{key:0,class:"mobile-backdrop fixed inset-0 z-30 bg-black bg-opacity-50",onClick:d,onTouchstart:d},null,32)):j("",!0)]),_:1}),s("div",bn,[s("div",wn,[(g(!0),h(de,null,ve(i.value,V=>(g(),Z(I(Re),{key:V.id,href:H(V.route),class:M(["bottom-nav-item flex flex-col items-center px-2 py-2 rounded-lg transition-colors duration-200 touch-manipulation",{"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":c(V.route),"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800":!c(V.route)}]),style:{"min-height":"44px","min-width":"44px"},onClick:E=>D(V,E),"aria-label":`Navigate to ${V.label}`},{default:Q(()=>[F(ee,{name:V.icon,size:"md",class:"mb-1"},null,8,["name"]),s("span",kn,$(V.label),1)]),_:2},1032,["href","class","onClick","aria-label"]))),128))])])])):j("",!0)}},Tn=le(En,[["__scopeId","data-v-8f1e8de2"]]),xn={class:"fallback-header"},Cn={class:"fallback-logo"},_n={key:0,class:"fallback-error-indicator"},An={class:"fallback-menu",role:"menu"},Sn={class:"fallback-menu-list"},In=["href","onClick"],Nn={class:"fallback-menu-text"},Rn={class:"fallback-actions"},Dn=["disabled"],Mn={key:0,class:"fallback-debug"},Ln={key:0,class:"debug-details"},Bn={class:"debug-section"},On={class:"debug-text"},$n={class:"debug-section"},Pn={class:"debug-code"},Vn={class:"debug-section"},Fn={class:"debug-code"},ze=3,Hn={__name:"NavigationFallback",props:{fallbackReason:{type:String,default:"Navigation component failed to load"},errorDetails:{type:Object,default:()=>({})},currentRoute:{type:String,default:""},failedNavigationType:{type:String,validator:l=>["desktop","mobile","unknown"].includes(l),default:"unknown"},showErrorIndicator:{type:Boolean,default:!0},showDebugInfo:{type:Boolean,default:!0},onRetry:{type:Function,default:null}},emits:["navigate","retry","reload","fallback-action"],setup(l,{emit:t}){const e=l,o=t,{hasRole:r}=pe(),n=w(!1),u=w(!1),f=w(0),v=!1,k=m(()=>({"navigation-fallback--desktop":e.failedNavigationType==="desktop","navigation-fallback--mobile":e.failedNavigationType==="mobile","navigation-fallback--with-error":e.showErrorIndicator,"navigation-fallback--debug":u.value&&v})),A=m(()=>({currentRoute:e.currentRoute,failedNavigationType:e.failedNavigationType,fallbackReason:e.fallbackReason,retryCount:f.value,timestamp:Date.now(),windowWidth:typeof window<"u"?window.innerWidth:0,userAgent:typeof navigator<"u"?navigator.userAgent:""})),p=m(()=>[{name:"dashboard",label:"Dashboard",icon:"home",href:"/dashboard",route:"dashboard",roles:[]},{name:"employees",label:"Employees",icon:"users",href:"/employees",route:"employees.index",roles:["admin","manager"]},{name:"projects",label:"Projects",icon:"briefcase",href:"/projects",route:"projects.index",roles:[]},{name:"leaves",label:"Leaves",icon:"calendar-days",href:"/leaves",route:"leaves.index",roles:[]},{name:"feedbacks",label:"Feedbacks",icon:"chat-bubble-left-right",href:"/feedbacks",route:"feedbacks.index",roles:[]}].filter(a=>a.roles.length===0?!0:a.roles.some(d=>r(d)))),T=i=>!i||!e.currentRoute?!1:e.currentRoute.startsWith(i),x=(i,a)=>{try{a.preventDefault(),o("navigate",{item:i,route:i.route,href:i.href,source:"fallback"}),we.visit(i.href)}catch(d){console.error("[NAVIGATION FALLBACK] Navigation failed:",d),window.location.href=i.href}},P=async()=>{if(!(n.value||f.value>=ze)){n.value=!0,f.value++;try{o("retry",{attempt:f.value,maxRetries:ze,failedNavigationType:e.failedNavigationType}),e.onRetry?await e.onRetry():(await new Promise(i=>setTimeout(i,1e3)),window.location.reload())}catch(i){console.error("[NAVIGATION FALLBACK] Retry failed:",i),f.value>=ze&&alert("Maximum retry attempts reached. Please reload the page manually.")}finally{n.value=!1}}},R=()=>{o("reload"),window.location.reload()},B=()=>{u.value=!u.value};return te(()=>{o("fallback-action",{action:"activated",reason:e.fallbackReason,failedType:e.failedNavigationType,timestamp:Date.now()}),typeof window<"u"&&window.reportError&&window.reportError({type:"navigation_fallback_activated",reason:e.fallbackReason,failedNavigationType:e.failedNavigationType,errorDetails:e.errorDetails,timestamp:Date.now()})}),re(()=>{o("fallback-action",{action:"deactivated",retryCount:f.value,timestamp:Date.now()})}),(i,a)=>(g(),h("div",{class:M(["navigation-fallback",k.value]),"data-navigation-type":"fallback",role:"navigation","aria-label":"Fallback Navigation"},[s("div",xn,[s("div",Cn,[F(ee,{name:"building-office",size:"lg",class:"text-primary-600"}),a[0]||(a[0]=s("span",{class:"fallback-title"},"HR Management",-1))]),l.showErrorIndicator?(g(),h("div",_n,[F(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),a[1]||(a[1]=s("span",{class:"sr-only"},"Navigation Error",-1))])):j("",!0)]),s("nav",An,[s("ul",Sn,[(g(!0),h(de,null,ve(p.value,d=>(g(),h("li",{key:d.name,class:"fallback-menu-item"},[s("a",{href:d.href,class:M(["fallback-menu-link",{"fallback-menu-link--active":T(d.route)}]),role:"menuitem",onClick:c=>x(d,c)},[d.icon?(g(),Z(ee,{key:0,name:d.icon,size:"sm",class:"fallback-menu-icon"},null,8,["name"])):j("",!0),s("span",Nn,$(d.label),1)],10,In)]))),128))])]),s("div",Rn,[s("button",{onClick:P,disabled:n.value,class:"fallback-action fallback-action--primary",type:"button"},[n.value?(g(),Z(ee,{key:0,name:"loading",size:"sm",class:"animate-spin mr-2"})):(g(),Z(ee,{key:1,name:"arrow-path",size:"sm",class:"mr-2"})),me(" "+$(n.value?"Retrying...":"Retry Navigation"),1)],8,Dn),s("button",{onClick:R,class:"fallback-action fallback-action--secondary",type:"button"},[F(ee,{name:"arrow-path",size:"sm",class:"mr-2"}),a[2]||(a[2]=me(" Reload Page "))])]),l.showDebugInfo&&v?(g(),h("div",Mn,[s("button",{onClick:B,class:"debug-toggle",type:"button"},[F(ee,{name:"bug-ant",size:"sm",class:"mr-1"}),me(" "+$(u.value?"Hide":"Show")+" Debug Info ",1)]),u.value?(g(),h("div",Ln,[s("div",Bn,[a[3]||(a[3]=s("h4",{class:"debug-heading"},"Fallback Reason",-1)),s("p",On,$(l.fallbackReason),1)]),s("div",$n,[a[4]||(a[4]=s("h4",{class:"debug-heading"},"Error Details",-1)),s("pre",Pn,$(JSON.stringify(l.errorDetails,null,2)),1)]),s("div",Vn,[a[5]||(a[5]=s("h4",{class:"debug-heading"},"Navigation State",-1)),s("pre",Fn,$(JSON.stringify(A.value,null,2)),1)])])):j("",!0)])):j("",!0)],2))}},ut=le(Hn,[["__scopeId","data-v-183ff890"]]);function zn(){const{getAuthError:l,validateAuthState:t}=pe(),e=w([]),o=50,r={CRITICAL:"critical",WARNING:"warning",INFO:"info",DEBUG:"debug"},n={AUTH_DATA:"auth_data",ROLE_CHECK:"role_check",NAVIGATION:"navigation",COMPONENT:"component",NETWORK:"network"},u=(i,a={})=>{const d=new Date().toISOString(),c=l(),b={id:`auth_error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:d,level:a.level||r.WARNING,category:a.category||n.COMPONENT,message:i.message||"Unknown authentication error",error:{name:i.name,message:i.message,stack:i.stack},context:{component:a.component||"Unknown",operation:a.operation||"Unknown",userAgent:navigator.userAgent,url:window.location.href,...a},authState:c,sessionInfo:{hasLocalStorage:typeof localStorage<"u",hasSessionStorage:typeof sessionStorage<"u",cookiesEnabled:navigator.cookieEnabled}};return e.value.unshift(b),e.value.length>o&&(e.value=e.value.slice(0,o)),b},f=(i,a={})=>{const d=u(i,a);return d.level,r.CRITICAL,d},v=(i,a,d={})=>f(i,{...d,category:n.ROLE_CHECK,operation:`checking role: ${a}`,level:r.WARNING}),k=(i,a,d={})=>f(i,{...d,category:n.NAVIGATION,operation:`navigating to: ${a}`,level:r.CRITICAL}),A=(i,a,d={})=>f(i,{...d,category:n.COMPONENT,component:a,operation:"component initialization",level:r.CRITICAL}),p=(i,a,d={})=>f(i,{...d,category:n.NETWORK,operation:`API request to: ${a}`,level:r.WARNING}),T=async(i,a={})=>{try{if(!t()&&a.requireAuth!==!1)throw new Error("Authentication state is invalid");return await i()}catch(d){if(f(d,{...a,operation:a.operation||"safe execution"}),a.fallback!==void 0)return a.fallback;if(a.suppressError)return null;throw d}},x=m(()=>{const i={total:e.value.length,byLevel:{},byCategory:{},recent:e.value.slice(0,10),oldestError:e.value[e.value.length-1],newestError:e.value[0]};return Object.values(r).forEach(a=>{i.byLevel[a]=e.value.filter(d=>d.level===a).length}),Object.values(n).forEach(a=>{i.byCategory[a]=e.value.filter(d=>d.category===a).length}),i}),P=()=>{e.value=[]},R=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,stats:x.value,errors:e.value}),B={};return{handleAuthError:f,handleRoleError:v,handleNavigationError:k,handleComponentError:A,handleNetworkError:p,safeExecute:T,createErrorReport:u,errorHistory:m(()=>e.value),getErrorStats:x,clearErrorHistory:P,exportErrorHistory:R,ERROR_LEVELS:r,ERROR_CATEGORIES:n,...B}}const Gn={class:"navigation-error-boundary"},jn=5e3,Un={__name:"NavigationErrorBoundary",props:{currentRoute:{type:String,required:!0},navigationType:{type:String,validator:l=>["desktop","mobile","controller"].includes(l),default:"controller"},componentId:{type:String,default:()=>`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},maxRetries:{type:Number,default:3},onError:{type:Function,default:null},onRecover:{type:Function,default:null}},emits:["error","recover","fallback-activated","fallback-deactivated","navigation-attempt","conflict-detected"],setup(l,{expose:t,emit:e}){const o=l,r=e,{handleNavigationError:n,handleComponentError:u,ERROR_LEVELS:f,ERROR_CATEGORIES:v}=zn(),k=w(!1),A=w(null),p=w({}),T=w(0),x=w(!1),P=w(null),R=w([]),B=w([]),i=!1,a=m(()=>{var G;if(!A.value)return"Navigation component failed to load";const y=((G=A.value.message)==null?void 0:G.toLowerCase())||"";return y.includes("chunk")||y.includes("loading")?"Navigation component failed to load. This may be due to a network issue.":y.includes("permission")||y.includes("unauthorized")?"You don't have permission to access this navigation. Please contact your administrator.":y.includes("auth")||y.includes("session")?"Your session has expired. Please log in again.":y.includes("network")||y.includes("fetch")?"Network error while loading navigation. Please check your connection.":y.includes("conflict")||y.includes("multiple")?"Navigation conflict detected. Multiple navigation components are active.":y.includes("breakpoint")||y.includes("responsive")?"Navigation responsive behavior error. The navigation may not match your screen size.":"Navigation system encountered an error. Using fallback navigation."}),d=m(()=>o.navigationType);m(()=>k.value&&(T.value>=o.maxRetries||x.value===!1));const c=E=>{var ne,fe;const y=((ne=E.message)==null?void 0:ne.toLowerCase())||"",G=((fe=E.stack)==null?void 0:fe.toLowerCase())||"";return y.includes("conflict")||y.includes("multiple")?"navigation_conflict":y.includes("breakpoint")||y.includes("responsive")?"responsive_error":y.includes("chunk")||y.includes("loading")?"component_loading":y.includes("permission")||y.includes("auth")?"authorization_error":y.includes("network")||y.includes("fetch")?"network_error":G.includes("vue")||G.includes("component")?"component_error":"unknown_navigation_error"},b=(E,y,G)=>{var Ce;const ne=Date.now();if(P.value&&ne-P.value<jn){const ke=R.value[0];if(ke&&ke.message===E.message)return!1}P.value=ne;const fe=c(E),ce={id:`nav_error_${ne}_${Math.random().toString(36).substr(2,9)}`,timestamp:ne,type:fe,message:E.message,stack:E.stack,name:E.name,navigationType:o.navigationType,componentId:o.componentId,currentRoute:o.currentRoute,retryCount:T.value,windowWidth:window.innerWidth,userAgent:navigator.userAgent,errorInfo:G,instance:((Ce=y==null?void 0:y.$options)==null?void 0:Ce.name)||"Unknown"};switch(R.value.unshift(ce),R.value.length>20&&(R.value=R.value.slice(0,20)),G.value=ce,p.value={...ce,conflictStatus:W.getStatus(),navigationState:{hasError:k.value,retryCount:T.value,navigationType:o.navigationType,componentId:o.componentId}},k.value=!0,fe){case"navigation_conflict":H(ce);break;case"component_loading":D();break;case"authorization_error":J(ce);break;default:N(ce)}if(o.onError)try{o.onError(ce)}catch(ke){console.error("[NAVIGATION ERROR BOUNDARY] Custom error handler failed:",ke)}return V(ce),r("error",ce),!1},H=E=>{const y=W.detectConflicts();y.length>0&&(B.value.unshift({timestamp:Date.now(),conflicts:y,errorReport:E}),r("conflict-detected",{conflicts:y,errorReport:E}),W.resolveConflicts())},D=E=>{T.value<o.maxRetries&&setTimeout(()=>{k.value&&L()},2e3)},J=E=>{n(new Error(E.message),o.currentRoute,{component:`NavigationErrorBoundary-${o.navigationType}`,navigationType:o.navigationType,level:f.CRITICAL,category:v.NAVIGATION})},N=E=>{u(new Error(E.message),`NavigationErrorBoundary-${o.navigationType}`,{navigationType:o.navigationType,componentId:o.componentId,level:f.WARNING,category:v.COMPONENT})},L=async()=>{if(!(x.value||T.value>=o.maxRetries)){x.value=!0,T.value++;try{o.onRecover?await o.onRecover():await new Promise(E=>setTimeout(E,1e3)),z(),r("recover",{attempt:T.value,navigationType:o.navigationType,componentId:o.componentId})}catch(E){console.error("[NAVIGATION ERROR BOUNDARY] Recovery failed:",E);const y={...A.value,retryError:E.message,retryAttempt:T.value,timestamp:Date.now()};p.value=y,T.value>=o.maxRetries&&r("fallback-activated",{reason:"max_retries_reached",errorReport:y})}finally{x.value=!1}}},z=()=>{k.value=!1,A.value=null,p.value={},T.value=0,x.value=!1},U=E=>{r("navigation-attempt",{...E,source:"fallback",errorContext:A.value})},O=E=>{L()},_=()=>{window.location.reload()},C=E=>{E.action==="activated"?r("fallback-activated",{reason:"user_activated",errorReport:A.value}):E.action==="deactivated"&&r("fallback-deactivated",{errorReport:A.value})},V=E=>{if(typeof window<"u"&&window.reportError)try{window.reportError({type:"navigation_error",category:"navigation_boundary",...E})}catch(y){console.error("[NAVIGATION ERROR BOUNDARY] Failed to report error:",y)}E.type};return te(()=>{W.registerComponent(o.componentId,o.navigationType,{currentRoute:o.currentRoute,boundaryActive:!0,timestamp:Date.now()})}),re(()=>{W.unregisterComponent(o.componentId)}),ft((E,y,G)=>b(E,y,G)),te(()=>{const E=G=>{const ne=new Error(`Navigation conflict: ${G.detail.message}`);b(ne,null,{type:"conflict_event",detail:G.detail})},y=G=>{G.detail.componentId===o.componentId&&z()};window.addEventListener("navigation-conflict",E),window.addEventListener("navigation-conflict-cleanup",y),window._navigationErrorBoundaryCleanup=()=>{window.removeEventListener("navigation-conflict",E),window.removeEventListener("navigation-conflict-cleanup",y)}}),re(()=>{window._navigationErrorBoundaryCleanup&&(window._navigationErrorBoundaryCleanup(),delete window._navigationErrorBoundaryCleanup)}),he(()=>o.currentRoute,(E,y)=>{E!==y&&k.value&&z()}),t({hasError:k,errorInfo:A,retryCount:T,resetError:z,handleRetry:L,getErrorHistory:()=>R.value,getConflictHistory:()=>B.value,getStatus:()=>{var E;return{hasError:k.value,errorType:(E=A.value)==null?void 0:E.type,retryCount:T.value,isRetrying:x.value,navigationType:o.navigationType,componentId:o.componentId}}}),(E,y)=>(g(),h("div",Gn,[k.value?(g(),Z(ut,{key:1,"fallback-reason":a.value,"error-details":p.value,"current-route":l.currentRoute,"failed-navigation-type":d.value,"show-error-indicator":!0,"show-debug-info":i,"on-retry":L,onNavigate:U,onRetry:O,onReload:_,onFallbackAction:C},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):ge(E.$slots,"default",{key:0},void 0,!0)]))}},Wn=le(Un,[["__scopeId","data-v-7c3ddc96"]]);class Yn{constructor(){this.isEnabled=w(!0),this.events=w([]),this.metrics=w({totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()}),this.maxEventHistory=1e3,this.performanceMarks=new Map,this.EVENT_TYPES={NAVIGATION_LOAD:"navigation_load",NAVIGATION_ERROR:"navigation_error",CONFLICT_DETECTED:"conflict_detected",CONFLICT_RESOLVED:"conflict_resolved",FALLBACK_ACTIVATED:"fallback_activated",FALLBACK_DEACTIVATED:"fallback_deactivated",COMPONENT_REGISTERED:"component_registered",COMPONENT_UNREGISTERED:"component_unregistered",NAVIGATION_SWITCH:"navigation_switch",RETRY_ATTEMPT:"retry_attempt",PERFORMANCE_MARK:"performance_mark",USER_ACTION:"user_action",BREAKPOINT_CHANGE:"breakpoint_change"},this.SEVERITY_LEVELS={CRITICAL:"critical",HIGH:"high",MEDIUM:"medium",LOW:"low",INFO:"info"},this.setupMonitoring()}logEvent(t,e={},o=this.SEVERITY_LEVELS.INFO){if(!this.isEnabled.value)return;const r=Date.now(),n={id:`event_${r}_${Math.random().toString(36).substr(2,9)}`,type:t,severity:o,timestamp:r,data:{...e,windowWidth:window.innerWidth,url:window.location.href,userAgent:navigator.userAgent},sessionId:this.getSessionId(),sequence:this.metrics.value.totalEvents+1};return this.events.value.unshift(n),this.events.value.length>this.maxEventHistory&&(this.events.value=this.events.value.slice(0,this.maxEventHistory)),this.updateMetrics(n),this.reportEvent(n),n}logNavigationLoad(t,e,o=null){const r={componentType:t,componentId:e,loadTime:o,timestamp:Date.now()};return o&&this.updateLoadTimeMetrics(o),this.logEvent(this.EVENT_TYPES.NAVIGATION_LOAD,r,this.SEVERITY_LEVELS.INFO)}logNavigationError(t,e={}){const o={errorMessage:t.message,errorStack:t.stack,errorName:t.name,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_ERROR,o,this.SEVERITY_LEVELS.HIGH)}logConflict(t,e=!1){const o=e?this.EVENT_TYPES.CONFLICT_RESOLVED:this.EVENT_TYPES.CONFLICT_DETECTED,r={conflicts:t.map(n=>({id:n.id,type:n.type,severity:n.severity,message:n.message})),conflictCount:t.length,resolved:e,timestamp:Date.now()};return this.logEvent(o,r,e?this.SEVERITY_LEVELS.MEDIUM:this.SEVERITY_LEVELS.HIGH)}logFallback(t,e="",o={}){const r=t?this.EVENT_TYPES.FALLBACK_ACTIVATED:this.EVENT_TYPES.FALLBACK_DEACTIVATED,n={activated:t,reason:e,errorContext:o,timestamp:Date.now()};return this.logEvent(r,n,t?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logComponentLifecycle(t,e,o,r={}){const n=t?this.EVENT_TYPES.COMPONENT_REGISTERED:this.EVENT_TYPES.COMPONENT_UNREGISTERED,u={registered:t,componentId:e,componentType:o,metadata:r,timestamp:Date.now()};return this.logEvent(n,u,this.SEVERITY_LEVELS.INFO)}logNavigationSwitch(t,e,o="",r={}){const n={fromType:t,toType:e,reason:o,preservedData:r,windowWidth:window.innerWidth,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.NAVIGATION_SWITCH,n,this.SEVERITY_LEVELS.INFO)}logRetryAttempt(t,e,o={}){const r={attempt:t,maxAttempts:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.RETRY_ATTEMPT,r,t>=e?this.SEVERITY_LEVELS.HIGH:this.SEVERITY_LEVELS.MEDIUM)}logUserAction(t,e,o={}){const r={action:t,target:e,context:o,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.USER_ACTION,r,this.SEVERITY_LEVELS.INFO)}logBreakpointChange(t,e,o,r){const n={oldWidth:t,newWidth:e,oldType:o,newType:r,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.BREAKPOINT_CHANGE,n,this.SEVERITY_LEVELS.INFO)}startPerformanceMark(t){const e=performance.now();return this.performanceMarks.set(t,{startTime:e}),e}endPerformanceMark(t,e={}){const o=this.performanceMarks.get(t);if(!o)return console.warn(`[NAVIGATION MONITOR] Performance mark not found: ${t}`),null;const r=performance.now(),n=r-o.startTime;this.performanceMarks.delete(t);const u={markName:t,duration:n,startTime:o.startTime,endTime:r,context:e,timestamp:Date.now()};return this.logEvent(this.EVENT_TYPES.PERFORMANCE_MARK,u,this.SEVERITY_LEVELS.INFO),n}updateMetrics(t){switch(this.metrics.value.totalEvents++,t.type){case this.EVENT_TYPES.NAVIGATION_ERROR:this.metrics.value.errorCount++;break;case this.EVENT_TYPES.CONFLICT_DETECTED:this.metrics.value.conflictCount++;break;case this.EVENT_TYPES.FALLBACK_ACTIVATED:this.metrics.value.fallbackActivations++;break;case this.EVENT_TYPES.RETRY_ATTEMPT:this.metrics.value.retryAttempts++;break;case this.EVENT_TYPES.NAVIGATION_SWITCH:this.metrics.value.navigationSwitches++;break}}updateLoadTimeMetrics(t){const e=this.metrics.value.averageLoadTime,o=this.events.value.filter(r=>r.type===this.EVENT_TYPES.NAVIGATION_LOAD&&r.data.loadTime).length;o===1?this.metrics.value.averageLoadTime=t:this.metrics.value.averageLoadTime=(e*(o-1)+t)/o}getSessionId(){return this.sessionId||(this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),this.sessionId}logToConsole(t){const e={[this.SEVERITY_LEVELS.CRITICAL]:console.error,[this.SEVERITY_LEVELS.HIGH]:console.warn,[this.SEVERITY_LEVELS.MEDIUM]:console.warn,[this.SEVERITY_LEVELS.LOW]:console.info,[this.SEVERITY_LEVELS.INFO]:console.log}[t.severity]||console.log,o={[this.EVENT_TYPES.NAVIGATION_LOAD]:"🚀",[this.EVENT_TYPES.NAVIGATION_ERROR]:"❌",[this.EVENT_TYPES.CONFLICT_DETECTED]:"⚠️",[this.EVENT_TYPES.CONFLICT_RESOLVED]:"✅",[this.EVENT_TYPES.FALLBACK_ACTIVATED]:"🔄",[this.EVENT_TYPES.FALLBACK_DEACTIVATED]:"✅",[this.EVENT_TYPES.COMPONENT_REGISTERED]:"📝",[this.EVENT_TYPES.COMPONENT_UNREGISTERED]:"🗑️",[this.EVENT_TYPES.NAVIGATION_SWITCH]:"🔄",[this.EVENT_TYPES.RETRY_ATTEMPT]:"🔄",[this.EVENT_TYPES.PERFORMANCE_MARK]:"⏱️",[this.EVENT_TYPES.USER_ACTION]:"👆",[this.EVENT_TYPES.BREAKPOINT_CHANGE]:"📱"}[t.type]||"📊";e(`${o} [NAV MONITOR] ${t.type.toUpperCase()}`,t.data)}reportEvent(t){[this.SEVERITY_LEVELS.CRITICAL,this.SEVERITY_LEVELS.HIGH].includes(t.severity)&&this.reportCriticalEvent(t)}reportCriticalEvent(t){}setupMonitoring(){if(typeof window>"u")return;try{const o=W.detectConflicts.bind(W);W.detectConflicts=(...n)=>{try{const u=o(...n);return u&&Array.isArray(u)&&u.length>0&&this.logConflict(u,!1),u||[]}catch(u){return console.warn("[NAVIGATION MONITOR] Error in detectConflicts wrapper:",u),[]}};const r=W.resolveConflicts.bind(W);W.resolveConflicts=(...n)=>{try{const u=r(...n);return u&&Array.isArray(u)&&u.length>0&&this.logConflict([],!0),u||[]}catch(u){return console.warn("[NAVIGATION MONITOR] Error in resolveConflicts wrapper:",u),[]}}}catch(o){console.warn("[NAVIGATION MONITOR] Error setting up conflict detector monitoring:",o)}let t=window.innerWidth,e=t>=1024?"desktop":"mobile";window.addEventListener("resize",()=>{const o=window.innerWidth,r=o>=1024?"desktop":"mobile";r!==e&&(this.logBreakpointChange(t,o,e,r),t=o,e=r)}),window.addEventListener("navigation-conflict",o=>{this.logConflict([{id:"custom_conflict",type:"custom",severity:"high",message:o.detail.message}],!1)}),document.addEventListener("visibilitychange",()=>{this.logUserAction(document.hidden?"page_hidden":"page_visible","document",{visibility:document.visibilityState})})}getStats(){const e=Date.now()-this.metrics.value.lastResetTime;return{...this.metrics.value,timeRange:e,eventsPerMinute:(this.metrics.value.totalEvents/(e/6e4)).toFixed(2),errorRate:(this.metrics.value.errorCount/this.metrics.value.totalEvents*100).toFixed(2),conflictRate:(this.metrics.value.conflictCount/this.metrics.value.totalEvents*100).toFixed(2),recentEvents:this.events.value.slice(0,10),eventsByType:this.getEventsByType(),eventsBySeverity:this.getEventsBySeverity()}}getEventsByType(){const t={};return this.events.value.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),t}getEventsBySeverity(){const t={};return this.events.value.forEach(e=>{t[e.severity]=(t[e.severity]||0)+1}),t}exportData(){return{sessionId:this.getSessionId(),exportTime:Date.now(),metrics:this.metrics.value,events:this.events.value,stats:this.getStats(),conflictStatus:W.getStatus(),systemInfo:{userAgent:navigator.userAgent,windowSize:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:Date.now()}}}reset(){this.events.value=[],this.metrics.value={totalEvents:0,errorCount:0,conflictCount:0,fallbackActivations:0,retryAttempts:0,navigationSwitches:0,averageLoadTime:0,lastResetTime:Date.now()},this.performanceMarks.clear(),this.logEvent("monitor_reset",{reason:"manual_reset"},this.SEVERITY_LEVELS.INFO)}setEnabled(t){this.isEnabled.value=t,this.logEvent("monitor_toggle",{enabled:t},this.SEVERITY_LEVELS.INFO)}}const q=new Yn;class qn{constructor(){this.isEnabled=!1,this.debugLevel="info",this.autoDebug=!0,this.debugHistory=[],this.maxHistorySize=100,this.DEBUG_CATEGORIES={CONFLICT:"conflict",PERFORMANCE:"performance",COMPONENT:"component",BREAKPOINT:"breakpoint",ERROR:"error",STATE:"state",LIFECYCLE:"lifecycle"},this.setupDebugTools()}debug(t=null,e=!1){if(!this.isEnabled)return;const o=this.gatherDebugInfo();return console.group("🧭 Navigation System Debug Report"),(!t||t===this.DEBUG_CATEGORIES.STATE)&&this.debugNavigationState(o,e),(!t||t===this.DEBUG_CATEGORIES.CONFLICT)&&this.debugConflicts(o,e),(!t||t===this.DEBUG_CATEGORIES.COMPONENT)&&this.debugComponents(o,e),(!t||t===this.DEBUG_CATEGORIES.BREAKPOINT)&&this.debugBreakpoints(o,e),(!t||t===this.DEBUG_CATEGORIES.PERFORMANCE)&&this.debugPerformance(o,e),(!t||t===this.DEBUG_CATEGORIES.ERROR)&&this.debugErrors(o,e),e&&this.debugDetailed(o),console.groupEnd(),this.addToHistory("debug_report",{category:t,detailed:e,debugInfo:o}),o}gatherDebugInfo(){return{timestamp:Date.now(),window:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio,userAgent:navigator.userAgent},location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},conflicts:W.getStatus(),monitoring:q.getStats(),dom:this.analyzeDOMState(),components:this.analyzeComponents(),breakpoints:this.analyzeBreakpoints(),performance:this.analyzePerformance(),errors:this.analyzeErrors()}}debugNavigationState(t,e){console.group("📊 Navigation State"),console.log("Window Size:",`${t.window.width}x${t.window.height}`),console.log("Current URL:",t.location.href),console.log("Active Components:",t.components.active),console.log("Conflicts:",t.conflicts.hasConflicts?"❌ YES":"✅ NO"),console.log("Monitoring Enabled:",t.monitoring.totalEvents>0?"✅ YES":"❌ NO"),e&&(console.log("Full Window Info:",t.window),console.log("Full Location Info:",t.location),console.log("DOM Analysis:",t.dom)),console.groupEnd()}debugConflicts(t,e){console.group("⚠️ Conflict Analysis");const o=t.conflicts;o.hasConflicts?(console.error(`Found ${o.conflictCount} conflicts:`),o.conflicts.forEach((r,n)=>{console.error(`${n+1}. ${r.type}: ${r.message}`),e&&console.log("Conflict Details:",r)})):console.log("✅ No conflicts detected"),console.log("Active Components:",o.activeComponents.length),o.activeComponents.forEach(r=>{console.log(`- ${r.type}: ${r.id}`)}),e&&console.log("Full Conflict Status:",o),console.groupEnd()}debugComponents(t,e){console.group("🧩 Component Analysis");const o=t.components;console.log("Active Components:",o.active.length),console.log("Desktop Components:",o.desktop.length),console.log("Mobile Components:",o.mobile.length),console.log("Fallback Components:",o.fallback.length),o.duplicates.length>0&&(console.warn("⚠️ Duplicate Components Found:"),o.duplicates.forEach(r=>{console.warn(`- ${r.type}: ${r.count} instances`)})),e&&(console.log("Component Details:"),console.log("- Active:",o.active),console.log("- Desktop:",o.desktop),console.log("- Mobile:",o.mobile),console.log("- Fallback:",o.fallback)),console.groupEnd()}debugBreakpoints(t,e){console.group("📱 Breakpoint Analysis");const o=t.breakpoints;console.log("Current Width:",o.currentWidth),console.log("Expected Type:",o.expectedType),console.log("Actual Type:",o.actualType),console.log("Match:",o.matches?"✅ YES":"❌ NO"),o.matches||(console.warn("⚠️ Breakpoint mismatch detected!"),console.warn(`Expected: ${o.expectedType}, Actual: ${o.actualType}`)),e&&console.log("Breakpoint Details:",o),console.groupEnd()}debugPerformance(t,e){console.group("⏱️ Performance Analysis");const o=t.performance;console.log("Average Load Time:",`${o.averageLoadTime.toFixed(2)}ms`),console.log("Total Events:",o.totalEvents),console.log("Error Rate:",`${o.errorRate}%`),console.log("Events/Minute:",o.eventsPerMinute),o.slowComponents.length>0&&(console.warn("⚠️ Slow Components:"),o.slowComponents.forEach(r=>{console.warn(`- ${r.name}: ${r.loadTime}ms`)})),e&&console.log("Performance Details:",o),console.groupEnd()}debugErrors(t,e){console.group("❌ Error Analysis");const o=t.errors;console.log("Total Errors:",o.totalErrors),console.log("Recent Errors:",o.recentErrors.length),console.log("Error Types:",Object.keys(o.errorsByType).join(", ")),o.recentErrors.length>0&&(console.warn("Recent Errors:"),o.recentErrors.forEach((r,n)=>{console.warn(`${n+1}. ${r.type}: ${r.message}`)})),e&&console.log("Error Details:",o),console.groupEnd()}debugDetailed(t){console.group("🔍 Detailed Analysis"),console.log("Full Debug Info:",t),console.log("Debug History:",this.debugHistory.slice(0,10)),this.checkCommonIssues(t),console.groupEnd()}checkCommonIssues(t){console.group("🔧 Common Issues Check");const e=[];t.components.duplicates.length>0&&e.push("Multiple navigation components of the same type detected"),t.breakpoints.matches||e.push("Navigation type does not match current breakpoint"),parseFloat(t.monitoring.errorRate)>10&&e.push("High error rate detected (>10%)"),t.performance.averageLoadTime>1e3&&e.push("Slow navigation loading detected (>1000ms)"),t.conflicts.hasConflicts&&e.push("Navigation conflicts detected"),e.length>0?(console.warn("⚠️ Issues Found:"),e.forEach((o,r)=>{console.warn(`${r+1}. ${o}`)})):console.log("✅ No common issues detected"),console.groupEnd()}analyzeDOMState(){const t=document.querySelectorAll("[data-navigation-type]"),e=document.querySelectorAll('[data-navigation-type="desktop"]'),o=document.querySelectorAll('[data-navigation-type="mobile"]'),r=document.querySelectorAll('[data-navigation-type="fallback"]');return{totalNavigationElements:t.length,desktopElements:e.length,mobileElements:o.length,fallbackElements:r.length,visibleElements:Array.from(t).filter(n=>n.offsetWidth>0&&n.offsetHeight>0).length,hiddenElements:Array.from(t).filter(n=>n.offsetWidth===0||n.offsetHeight===0).length}}analyzeComponents(){const e=W.getStatus().activeComponents,o=e.filter(v=>v.type==="desktop"),r=e.filter(v=>v.type==="mobile"),n=e.filter(v=>v.type==="fallback"),u={};e.forEach(v=>{u[v.type]=(u[v.type]||0)+1});const f=Object.entries(u).filter(([v,k])=>k>1).map(([v,k])=>({type:v,count:k}));return{active:e,desktop:o,mobile:r,fallback:n,duplicates:f}}analyzeBreakpoints(){const t=window.innerWidth,e=t>=1024?"desktop":"mobile",r=W.getStatus().activeComponents,n=r.some(v=>v.type==="desktop"),u=r.some(v=>v.type==="mobile");let f="none";return n&&!u?f="desktop":u&&!n?f="mobile":n&&u&&(f="both"),{currentWidth:t,expectedType:e,actualType:f,matches:e===f,hasDesktop:n,hasMobile:u}}analyzePerformance(){const t=q.getStats(),r=q.events.value.filter(n=>n.type==="navigation_load"&&n.data.loadTime).filter(n=>n.data.loadTime>500).map(n=>({name:n.data.componentType,loadTime:n.data.loadTime}));return{...t,slowComponents:r}}analyzeErrors(){const e=q.events.value.filter(r=>r.type==="navigation_error"||r.severity==="high"||r.severity==="critical"),o={};return e.forEach(r=>{const n=r.data.errorName||r.type;o[n]=(o[n]||0)+1}),{totalErrors:e.length,recentErrors:e.slice(0,5),errorsByType:o}}addToHistory(t,e){this.debugHistory.unshift({timestamp:Date.now(),action:t,data:e}),this.debugHistory.length>this.maxHistorySize&&(this.debugHistory=this.debugHistory.slice(0,this.maxHistorySize))}setupDebugTools(){this.isEnabled&&(window.debugNavigation=(t,e)=>this.debug(t,e),window.debugNavigationConflicts=()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),window.debugNavigationPerformance=()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),window.debugNavigationComponents=()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),window.navDebug={debug:(t,e)=>this.debug(t,e),conflicts:()=>this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0),performance:()=>this.debug(this.DEBUG_CATEGORIES.PERFORMANCE,!0),components:()=>this.debug(this.DEBUG_CATEGORIES.COMPONENT,!0),breakpoints:()=>this.debug(this.DEBUG_CATEGORIES.BREAKPOINT,!0),errors:()=>this.debug(this.DEBUG_CATEGORIES.ERROR,!0),export:()=>this.exportDebugData(),reset:()=>this.resetDebugData(),monitor:q,conflicts:W},console.log("🧭 Navigation Debug Tools Available:"),console.log("- debugNavigation() - Full debug report"),console.log("- debugNavigationConflicts() - Conflict analysis"),console.log("- debugNavigationPerformance() - Performance analysis"),console.log("- debugNavigationComponents() - Component analysis"),console.log("- navDebug.* - Debug shortcuts object"))}exportDebugData(){const t=this.gatherDebugInfo(),e={timestamp:Date.now(),debugInfo:t,debugHistory:this.debugHistory,monitoringData:q.exportData(),conflictData:W.getStatus()};return console.log("📤 Debug Data Export:",e),navigator.clipboard&&navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>console.log("✅ Debug data copied to clipboard")).catch(()=>console.log("❌ Failed to copy to clipboard")),e}resetDebugData(){this.debugHistory=[],q.reset(),W.reset(),console.log("🔄 Debug data reset"),this.addToHistory("debug_reset",{timestamp:Date.now()})}autoDebugOnIssues(){if(this.autoDebug){try{const t=W.detectConflicts.bind(W);W.detectConflicts=(...e)=>{try{const o=t(...e);return o&&Array.isArray(o)&&o.length>0&&(console.warn("🚨 Auto-debug triggered by conflicts"),this.debug(this.DEBUG_CATEGORIES.CONFLICT,!0)),o||[]}catch(o){return console.warn("[NAVIGATION DEBUGGER] Error in detectConflicts wrapper:",o),[]}}}catch(t){console.warn("[NAVIGATION DEBUGGER] Error setting up conflict detector monitoring:",t)}window.addEventListener("error",t=>{t.error&&t.error.message.toLowerCase().includes("navigation")&&(console.warn("🚨 Auto-debug triggered by navigation error"),this.debug(this.DEBUG_CATEGORIES.ERROR,!0))})}}}new qn;const Kn=["data-navigation-mode","data-navigation-id","data-conflict-status"],Qn={class:"conflict-count"},Zn={__name:"NavigationController",props:{currentRoute:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1},forceNavigationType:{type:String,validator:l=>["desktop","mobile",null].includes(l),default:null}},emits:["navigate","collapse-change","state-change","navigation-type-change","navigation-transition","mobile-drawer-toggle"],setup(l,{expose:t,emit:e}){const o=l,r=e;$e();const{windowWidth:n,navigationMode:u,isTransitioning:f,preserveCurrentState:v,restorePreservedState:k,getBreakpointInfo:A}=ct(),{roles:p,isAuthenticated:T}=pe();Pe();const x=w("desktop"),P=w(null),R=w({isTransitioning:!1,fromType:null,toType:null,preservedData:null}),B=w(`controller_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),i=w(`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),a=w([]),d=w(!1),c=w(""),b=w({}),H=!1,D=m(()=>o.forceNavigationType?o.forceNavigationType:u.value),J=m(()=>{try{const S=D.value==="desktop"?nt:Tn;return x.value=D.value,S}catch(S){return console.error("[NavigationController] Error selecting navigation component:",S),P.value=S,nt}}),N=m(()=>{const S={currentRoute:o.currentRoute,userRoles:p.value||[],isAuthenticated:T.value};return D.value==="desktop"?{...S,initiallyCollapsed:o.initiallyCollapsed}:{...S}});m(()=>D.value==="desktop"),m(()=>D.value==="mobile");const L=m(()=>!1),z=S=>{try{r("navigate",{...S,navigationType:x.value,timestamp:Date.now()})}catch(X){console.error("[NavigationController] Navigation error:",X),P.value=X}},U=S=>{try{r("collapse-change",S)}catch(X){console.error("[NavigationController] Collapse change error:",X)}},O=S=>{try{r("state-change",{...S,navigationType:x.value,deviceType:D.value})}catch(X){console.error("[NavigationController] State change error:",X)}},_=S=>{try{r("mobile-drawer-toggle",S)}catch(X){console.error("[NavigationController] Mobile drawer toggle error:",X)}};he(D,async(S,X)=>{if(S!==X){R.value.isTransitioning=!0,R.value.fromType=X,R.value.toType=S;try{r("navigation-transition",!0);const _e=v({navigationState:{currentRoute:o.currentRoute,userPreferences:{},timestamp:Date.now()}});R.value.preservedData=_e,r("navigation-type-change",{from:X,to:S,breakpoint:n.value,breakpointInfo:A(),preservedData:_e,timestamp:Date.now(),isTransitioning:!0}),await Ue(),await new Promise(pt=>setTimeout(pt,150)),k()}catch(_e){console.error("[NavigationController] Error during navigation type change:",_e),P.value=_e}finally{r("navigation-transition",!1),R.value.isTransitioning=!1,R.value.fromType=null,R.value.toType=null}}},{immediate:!1});const C=()=>{P.value=null},V=()=>{},E=async S=>{q.logNavigationError(S,{componentId:B.value,navigationType:D.value,currentRoute:o.currentRoute}),(S.severity==="critical"||S.type==="component_loading")&&Ce("Navigation component error",S)},y=async()=>{try{return i.value=`nav_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a.value=[],ke(),q.logEvent("navigation_recovery_success",{controllerId:B.value,deviceType:D.value}),!0}catch(S){return console.error("[NavigationController] Recovery failed:",S),!1}},G=S=>{q.logNavigationError(new Error(S.message),{errorReport:S,source:"error_boundary"})},ne=S=>{q.logEvent("boundary_recovery",S)},fe=S=>{Ce(S.reason,S.errorReport)},ce=S=>{a.value=S.conflicts,q.logConflict(S.conflicts,!1),W.resolveConflicts().length>0&&q.logConflict(S.conflicts,!0)},Ce=(S,X={})=>{d.value=!0,c.value=S,b.value=X,q.logFallback(!0,S,X)},ke=()=>{d.value=!1,c.value="",b.value={},q.logFallback(!1,"recovery_successful")},dt=S=>{q.logUserAction("fallback_navigation",S.item.name,S),z(S)},Ye=async()=>await y(),vt=S=>{q.logRetryAttempt(S.attempt,S.maxRetries,{source:"fallback",failedNavigationType:S.failedNavigationType}),Ye()},mt=()=>{q.logUserAction("fallback_reload","page"),window.location.reload()},gt=S=>{q.logUserAction("fallback_action",S.action,S)},qe=()=>{q.startPerformanceMark(`navigation_transition_${D.value}`)},Ke=()=>{q.endPerformanceMark(`navigation_transition_${D.value}`,{navigationType:D.value,controllerId:B.value})},ht=()=>{};return te(()=>{W.registerComponent(B.value,"controller",{currentRoute:o.currentRoute,deviceType:D.value,timestamp:Date.now()}),W.registerComponent(i.value,D.value,{currentRoute:o.currentRoute,controllerId:B.value,timestamp:Date.now()}),q.logNavigationLoad("controller",B.value),x.value=D.value,r("navigation-type-change",{from:null,to:D.value,breakpoint:n.value,timestamp:Date.now()});const S=setInterval(()=>{const X=W.detectConflicts();X.length!==a.value.length&&(a.value=X)},2e3);re(()=>{console.log("Unregistering NavigationController:",{controllerId:B.value,componentId:i.value}),clearInterval(S),clearInterval(devConflictCheckInterval),W.unregisterComponent(B.value),W.unregisterComponent(i.value),q.logEvent("component_unregistered",{controllerId:B.value,componentId:i.value})})}),t({debugNavigationController:V,clearError:C,currentNavigationType:m(()=>x.value),deviceType:D,isTransitioning:m(()=>R.value.isTransitioning||f.value),navigationError:m(()=>P.value),transitionState:m(()=>R.value),breakpointInfo:A}),(S,X)=>(g(),Z(Wn,{"current-route":l.currentRoute,"navigation-type":"controller","component-id":B.value,"max-retries":3,"on-error":E,"on-recover":y,onError:G,onRecover:ne,onFallbackActivated:fe,onConflictDetected:ce},{default:Q(()=>[s("div",{class:M(["navigation-controller",{"is-transitioning":R.value.isTransitioning||I(f),"desktop-mode":D.value==="desktop","mobile-mode":D.value==="mobile","has-conflicts":L.value,"fallback-active":d.value}]),"data-navigation-mode":D.value,"data-navigation-id":B.value,"data-conflict-status":L.value?"conflict":"clean"},[d.value?(g(),Z(ut,{key:0,"fallback-reason":c.value,"error-details":b.value,"current-route":l.currentRoute,"failed-navigation-type":D.value,"show-error-indicator":!0,"show-debug-info":H,"on-retry":Ye,onNavigate:dt,onRetry:vt,onReload:mt,onFallbackAction:gt},null,8,["fallback-reason","error-details","current-route","failed-navigation-type"])):(g(),Z(Me,{key:1,name:"navigation-transition",mode:"out-in",duration:{enter:200,leave:150},onBeforeEnter:qe,onAfterEnter:Ke,onBeforeLeave:qe,onAfterLeave:Ke},{default:Q(()=>[(g(),Z(Le(J.value),Ge({key:D.value},N.value,{"data-navigation-type":D.value,"data-navigation-id":i.value,"data-conflict-protected":!0,onNavigate:z,onCollapseChange:U,onStateChange:O,onMobileDrawerToggle:_}),null,16,["data-navigation-type","data-navigation-id"]))]),_:1})),H&&L.value?(g(),h("div",{key:2,class:"conflict-indicator",onClick:ht},[F(ee,{name:"exclamation-triangle",size:"sm",class:"text-warning-500"}),s("span",Qn,$(a.value.length),1)])):j("",!0)],10,Kn)]),_:1},8,["current-route","component-id"]))}},Jn=le(Zn,[["__scopeId","data-v-75cf281c"]]),Xn=["aria-live"],ea={class:"toast-content"},ta={key:0,class:"toast-icon"},oa={class:"toast-message"},na={key:0,class:"toast-title"},aa={class:"toast-text"},ra={key:1,class:"toast-actions"},sa=["aria-label"],ia={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:l=>["success","error","warning","info","loading"].includes(l)},position:{type:String,default:"top-right",validator:l=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(l)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:l=>["low","normal","high"].includes(l)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:l=>["sm","md","lg"].includes(l)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(l,{expose:t,emit:e}){const o=l,r=e,n=w(!1),u=w(null),f=w(null),v=w(100),k=w(!1),A=w(0),p=w(0),T=m(()=>Fe("x-mark")),x=m(()=>{if(o.icon)return Fe(o.icon);const O={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return Fe(O[o.type]||O.info)}),P=m(()=>["toast-notification",`toast-notification--${o.type}`,`toast-notification--${o.size}`,`toast-notification--${o.position}`,{"toast-notification--with-title":o.title,"toast-notification--persistent":o.persistent,"toast-notification--with-action":o.actionText}]),R=m(()=>({zIndex:o.zIndex})),B=m(()=>["w-5 h-5",{"animate-spin":o.type==="loading"}]),i=m(()=>o.closable||o.actionText),a=m(()=>[`toast-progress--${o.type}`]),d=m(()=>({width:`${v.value}%`})),c=()=>{n.value=!0,o.sound&&U(),!o.persistent&&o.duration>0&&D()},b=()=>{n.value=!1,z(),r("close")},H=()=>{r("action"),o.persistent||b()},D=()=>{o.duration<=0||(A.value=Date.now(),p.value=o.duration,u.value=setTimeout(()=>{b()},o.duration),J())},J=()=>{if(!o.showProgress)return;const O=Date.now(),_=()=>{if(!n.value||k.value)return;const C=Date.now()-O,V=Math.max(0,100-C/o.duration*100);v.value=V,V>0&&(f.value=requestAnimationFrame(_))};_()},N=()=>{if(!u.value||o.persistent)return;k.value=!0,clearTimeout(u.value),cancelAnimationFrame(f.value);const O=Date.now()-A.value;p.value=Math.max(0,o.duration-O)},L=()=>{!k.value||o.persistent||(k.value=!1,p.value>0&&(A.value=Date.now(),u.value=setTimeout(()=>{b()},p.value),J()))},z=()=>{u.value&&(clearTimeout(u.value),u.value=null),f.value&&(cancelAnimationFrame(f.value),f.value=null)},U=()=>{try{const O=new Audio,_={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};O.src=_[o.type]||_.info,O.volume=.3,O.play().catch(()=>{})}catch{}};return te(()=>{c()}),re(()=>{z()}),he(()=>o.duration,()=>{n.value&&!o.persistent&&(z(),D())}),t({show:c,close:b,pauseTimer:N,resumeTimer:L}),(O,_)=>(g(),Z(yt,{to:"body"},[n.value?(g(),h("div",{key:0,class:M(P.value),style:je(R.value),role:"alert","aria-live":l.priority==="high"?"assertive":"polite",onMouseenter:N,onMouseleave:L},[s("div",ea,[l.showIcon?(g(),h("div",ta,[(g(),Z(Le(x.value),{class:M(B.value)},null,8,["class"]))])):j("",!0),s("div",oa,[l.title?(g(),h("div",na,$(l.title),1)):j("",!0),s("div",aa,[ge(O.$slots,"default",{},()=>[me($(l.message),1)],!0)])]),i.value?(g(),h("div",ra,[l.actionText?(g(),h("button",{key:0,onClick:H,class:"toast-action-button"},$(l.actionText),1)):j("",!0),l.closable?(g(),h("button",{key:1,onClick:b,class:"toast-close-button","aria-label":l.closeLabel},[(g(),Z(Le(T.value),{class:"w-4 h-4"}))],8,sa)):j("",!0)])):j("",!0)]),l.showProgress&&l.duration>0?(g(),h("div",{key:0,class:M(["toast-progress",a.value]),style:je(d.value)},null,6)):j("",!0)],46,Xn)):j("",!0)]))}},la=le(ia,[["__scopeId","data-v-11baa49e"]]);class ca{constructor(){this.notifications=Ve([]),this.maxNotifications=w(5),this.defaultDuration=w(5e3),this.positions=Ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=Ve({enabled:!0,volume:.3})}add(t){const e=this.generateId(),o=t.position||"top-right",r={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:o,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(r),this.positions[o].push(r),this.manageQueueSize(o),!r.persistent&&r.duration>0&&setTimeout(()=>{this.remove(e)},r.duration),e}remove(t){const e=this.notifications.find(u=>u.id===t);if(!e)return;const o=this.notifications.findIndex(u=>u.id===t);o>-1&&this.notifications.splice(o,1);const r=this.positions[e.position],n=r.findIndex(u=>u.id===t);n>-1&&r.splice(n,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(o=>{this.remove(o.id)})}clearType(t){this.notifications.filter(o=>o.type===t).forEach(o=>{this.remove(o.id)})}update(t,e){const o=this.notifications.find(r=>r.id===t);o&&Object.assign(o,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const o=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:r=>{this.remove(o),e(r==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(o=>{const r=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(r),o(!0)},onClose:()=>{o(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(r=>{const n=this.notifications.findIndex(u=>u.id===r.id);n>-1&&this.notifications.splice(n,1)})}}const ae=new ca,ua={class:"notification-container"},da={__name:"NotificationContainer",setup(l,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];m(()=>ae.notifications.filter(p=>!p.component));const o=m(()=>ae.notifications.filter(p=>p.component)),r=p=>{const T="fixed z-50 pointer-events-none",x={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${T} ${x[p]||x["top-right"]}`},n=p=>ae.getByPosition(p),u=p=>p.includes("left")?"slide-left":p.includes("right")?"slide-right":p.includes("center")?"slide-center":"slide-right",f=p=>{ae.remove(p)},v=(p,T="action")=>{const x=ae.getById(p);x!=null&&x.onAction&&x.onAction(T)},k=()=>{window.notify={success:(p,T)=>ae.success(p,T),error:(p,T)=>ae.error(p,T),warning:(p,T)=>ae.warning(p,T),info:(p,T)=>ae.info(p,T),loading:(p,T)=>ae.loading(p,T),confirm:p=>ae.confirm(p),alert:(p,T)=>ae.alert(p,T),clear:()=>ae.clear(),remove:p=>ae.remove(p)}},A=()=>{window.notify&&delete window.notify};return te(()=>{k()}),re(()=>{A()}),t({notificationQueue:ae,notify:window.notify}),(p,T)=>(g(),h("div",ua,[(g(),h(de,null,ve(e,x=>s("div",{key:x,class:M(r(x))},[F(bt,{name:u(x),tag:"div",class:"space-y-2"},{default:Q(()=>[(g(!0),h(de,null,ve(n(x),P=>(g(),Z(la,Ge({key:P.id},{ref_for:!0},P,{onClose:R=>f(P.id),onAction:R=>v(P.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(g(!0),h(de,null,ve(o.value,x=>(g(),Z(Le(x.component||"NotificationModal"),Ge({key:x.id,ref_for:!0},x.props,{onClose:P=>f(x.id),onConfirm:P=>v(x.id,"confirm"),onCancel:P=>v(x.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},va=le(da,[["__scopeId","data-v-67e6c621"]]),ma={class:"floating-attendance-widget"},ga={class:"status-indicator"},ha={class:"time-info"},pa={class:"time-display"},fa={class:"time-label-mini"},ya={class:"widget-header"},ba={class:"status-info"},wa={class:"status-text"},ka={class:"timer-section"},Ea={class:"timer-value"},Ta={class:"timer-label"},xa={class:"quick-actions"},Ca=["disabled"],_a=["disabled"],Aa={class:"quick-stats"},Sa={class:"stat"},Ia={class:"stat-value"},Na={class:"stat"},Ra={class:"stat-value"},Da={__name:"FloatingAttendanceWidget",setup(l){const t=w(!1),e=w({clockedIn:!1,onBreak:!1,clockInTime:null}),o=w(!1),r=w("0h 0m 0s"),n=w(null),u=()=>{try{const N={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(N))}catch(N){console.warn("Failed to save attendance state to localStorage:",N)}},f=()=>{try{const N=localStorage.getItem("floating-attendance-state");if(N){const L=JSON.parse(N),z=new Date(L.lastUpdate);if((new Date-z)/(1e3*60)<5)return e.value.clockedIn=L.clockedIn||!1,e.value.onBreak=L.onBreak||!1,e.value.clockInTime=L.clockInTime||null,n.value=L.breakStartTime||null,!0}}catch(N){console.warn("Failed to load attendance state from localStorage:",N)}return!1};let v=null;const k=m(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),A=m(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),p=m(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),T=m(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),x=m(()=>o.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),P=m(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),R=m(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const N=new Date(e.value.clockInTime),z=new Date-N,U=Math.floor(z/(1e3*60)),O=Math.floor(U/60),_=U%60;return`${O}h ${_}m`}),B=m(()=>{if(e.value.onBreak&&n.value){const N=new Date(n.value);if(isNaN(N.getTime()))return"0h 0m 1s";{const z=Math.max(0,new Date-N),U=Math.floor(z/(1e3*60*60)),O=Math.floor(z%(1e3*60*60)/(1e3*60)),_=Math.floor(z%(1e3*60)/1e3);return`${U}h ${O}m ${_}s`}}return"0h 0m"});m(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const i=()=>{t.value=!t.value},a=()=>{if(e.value.clockedIn&&e.value.clockInTime){const N=new Date;let L;e.value.onBreak&&n.value?L=new Date(n.value):L=new Date(e.value.clockInTime);const z=N-L,U=Math.floor(z/(1e3*60*60)),O=Math.floor(z%(1e3*60*60)/(1e3*60)),_=Math.floor(z%(1e3*60)/1e3);r.value=`${U}h ${O}m ${_}s`}else r.value="0h 0m 0s"},d=async()=>{try{if(o.value=!0,e.value.clockedIn){const N=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,r.value="0h 0m 0s",u(),J()}else{const N=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=N.data.clock_in_time||new Date().toISOString(),u(),J()}}catch(N){console.error("Clock in/out failed:",N),alert("Action failed: "+N.message)}finally{o.value=!1}},c=async()=>{try{if(o.value=!0,e.value.onBreak){const N=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,u(),J()}else{n.value=new Date().toISOString(),e.value.onBreak=!0;const N=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});N.data.break_start_time&&(n.value=N.data.break_start_time),u(),J()}}catch(N){console.error("Break action failed:",N),alert("Action failed: "+N.message)}finally{o.value=!1}},b=async()=>{var N,L;try{const U=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=U.clocked_in||!1,e.value.onBreak=U.on_break||!1,e.value.clockInTime=U.clock_in_time||null,U.on_break)if(U.break_start_time)n.value=U.break_start_time;else if((N=U.current_session)!=null&&N.current_break_start)n.value=U.current_session.current_break_start;else if((L=U.current_session)!=null&&L.break_sessions&&U.current_session.break_sessions.length>0){const O=U.current_session.break_sessions[U.current_session.break_sessions.length-1];O&&!O.end&&(n.value=O.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value})}catch(z){console.error("Failed to fetch attendance status:",z)}},H=N=>{N.key==="attendance-update"&&b()},D=N=>{console.log("FloatingWidget: Received attendance state change:",N.detail);const{clockedIn:L,onBreak:z,clockInTime:U,breakStartTime:O}=N.detail;e.value.clockedIn=L,e.value.onBreak=z,e.value.clockInTime=U,z&&O?n.value=O:z||(n.value=null),u(),a(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:O})},J=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(N){console.warn("Failed to broadcast attendance update:",N)}};return te(async()=>{f()&&a(),await b(),u(),a(),v=setInterval(a,1e3),window.addEventListener("storage",H),window.addEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners registered")}),re(()=>{v&&clearInterval(v),window.removeEventListener("storage",H),window.removeEventListener("attendance-state-changed",D),console.log("FloatingWidget: Event listeners removed")}),(N,L)=>(g(),h("div",ma,[t.value?j("",!0):(g(),h("div",{key:0,onClick:i,class:M(["floating-button",T.value])},[s("div",ga,[s("div",{class:M(p.value)},null,2)]),s("div",ha,[s("div",pa,$(r.value),1),s("div",fa,$(A.value),1)]),F(I(Tt),{class:"w-4 h-4 expand-icon"})],2)),t.value?(g(),h("div",{key:1,class:"expanded-widget",onClick:L[0]||(L[0]=rt(()=>{},["stop"]))},[s("div",ya,[s("div",ba,[s("div",{class:M(p.value)},null,2),s("span",wa,$(k.value),1)]),s("button",{onClick:i,class:"minimize-btn",title:"Minimize"},[F(I(xt),{class:"w-4 h-4"})])]),s("div",ka,[s("div",Ea,$(r.value),1),s("div",Ta,$(A.value),1)]),s("div",xa,[s("button",{onClick:d,disabled:o.value,class:M(P.value)},$(x.value),11,Ca),e.value.clockedIn?(g(),h("button",{key:0,onClick:c,disabled:o.value,class:"break-action"},[(g(),Z(Le(e.value.onBreak?I(Oo):I(Bo)),{class:"w-3 h-3"})),me(" "+$(e.value.onBreak?"End":"Break"),1)],8,_a)):j("",!0)]),s("div",Aa,[s("div",Sa,[s("span",Ia,$(R.value),1),L[1]||(L[1]=s("span",{class:"stat-label"},"Today",-1))]),s("div",Na,[s("span",Ra,$(B.value),1),L[2]||(L[2]=s("span",{class:"stat-label"},"Break",-1))])])])):j("",!0),t.value?(g(),h("div",{key:2,class:"backdrop",onClick:i})):j("",!0)]))}},Ma=le(Da,[["__scopeId","data-v-421365b8"]]),La={class:"skip-links","aria-label":"Skip navigation links"},Ba=["href","onClick"],Oa={__name:"SkipLinks",setup(l){const{skipLinks:t,handleSkipLinkClick:e}=Ct();return(o,r)=>(g(),h("div",La,[(g(!0),h(de,null,ve(I(t),n=>(g(),h("a",{key:n.href,href:n.href,class:"skip-link sr-only-focusable",onClick:u=>I(e)(u,n.href)},$(n.label),9,Ba))),128))]))}},$a=le(Oa,[["__scopeId","data-v-f9a7b518"]]),Pa={class:"live-regions"},Va={__name:"LiveRegion",setup(l){const t=w(null),e=w(null),o=w(null);return te(()=>{wt.init()}),(r,n)=>(g(),h("div",Pa,[s("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),s("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),s("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:o},null,512)]))}},Fa=le(Va,[["__scopeId","data-v-94955163"]]),Oe=w("desktop"),ue=w({isCollapsed:!1,width:{expanded:256,collapsed:64}}),oe=w({isDrawerOpen:!1,headerHeight:64,bottomNavHeight:80}),ie=w({isTransitioning:!1,duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});function Ha(){const{windowWidth:l}=$e(),{isTransitioning:t}=ct(),e=m(()=>Oe.value),o=m(()=>{const i={marginLeft:ue.value.isCollapsed?ue.value.width.collapsed:ue.value.width.expanded,marginRight:0,paddingTop:0,paddingBottom:0,minHeight:"100vh"};return{...i,marginLeftPx:`${i.marginLeft}px`,transition:`margin-left ${ie.value.duration}ms ${ie.value.easing}`}}),r=m(()=>{const i=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top").replace("px",""))||0,a=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom").replace("px",""))||0,d={marginLeft:0,marginRight:0,paddingTop:oe.value.headerHeight+i,paddingBottom:oe.value.bottomNavHeight+a,minHeight:`calc(100vh - ${oe.value.headerHeight+oe.value.bottomNavHeight}px)`};return{...d,paddingTopPx:`${d.paddingTop}px`,paddingBottomPx:`${d.paddingBottom}px`,transition:`all ${ie.value.duration}ms ${ie.value.easing}`}}),n=m(()=>e.value==="desktop"?o.value:r.value),u=m(()=>{const i={"main-content-area":!0,"gpu-accelerated":!0};return i[`${e.value}-layout`]=!0,e.value==="desktop"&&(i["sidebar-collapsed"]=ue.value.isCollapsed,i["sidebar-expanded"]=!ue.value.isCollapsed),e.value==="mobile"&&(i["drawer-open"]=oe.value.isDrawerOpen,i["drawer-closed"]=!oe.value.isDrawerOpen),ie.value.isTransitioning||t.value?i.transitioning=!0:i["transition-complete"]=!0,i}),f=m(()=>{const i={"content-inner":!0,"transition-all":!0,"duration-300":!0,"ease-out":!0};return e.value==="mobile"&&oe.value.isDrawerOpen&&(i["opacity-50"]=!0,i["pointer-events-none"]=!0,i["scale-95"]=!0),i}),v=m(()=>{const i={};return e.value==="desktop"?(i["--sidebar-width"]=`${n.value.marginLeft}px`,i["--content-margin-left"]=n.value.marginLeftPx):(i["--mobile-header-height"]=`${oe.value.headerHeight}px`,i["--mobile-bottom-nav-height"]=`${oe.value.bottomNavHeight}px`,i["--content-padding-top"]=n.value.paddingTopPx,i["--content-padding-bottom"]=n.value.paddingBottomPx),i["--layout-transition-duration"]=`${ie.value.duration}ms`,i["--layout-transition-easing"]=ie.value.easing,i}),k=i=>{ue.value.isCollapsed!==i&&(ue.value.isCollapsed=i,T("sidebar-toggle"))},A=i=>{oe.value.isDrawerOpen!==i&&(oe.value.isDrawerOpen=i,i?document.body.style.overflow="hidden":document.body.style.overflow="")},p=i=>{if(Oe.value!==i){const a=Oe.value;Oe.value=i,T("layout-type-change",{from:a,to:i})}},T=async(i,a={})=>{if(ie.value.isTransitioning){console.warn("[useLayoutSpacing] Transition already in progress, skipping");return}ie.value.isTransitioning=!0;try{await Ue();const d=document.documentElement;Object.entries(v.value).forEach(([c,b])=>{d.style.setProperty(c,b)}),await new Promise(c=>setTimeout(c,ie.value.duration))}catch(d){console.error("[useLayoutSpacing] Layout transition error:",d)}finally{ie.value.isTransitioning=!1}},x=()=>{const i=l.value;i>=1440?ue.value.width.expanded=280:i>=1920?ue.value.width.expanded=320:ue.value.width.expanded=256,i<=375?(oe.value.headerHeight=56,oe.value.bottomNavHeight=72):i<=640?(oe.value.headerHeight=64,oe.value.bottomNavHeight=80):(oe.value.headerHeight=68,oe.value.bottomNavHeight=84)},P=()=>{const i=n.value,a=l.value,d=window.innerHeight;let c,b;return e.value==="desktop"?(c=a-i.marginLeft,b=d):(c=a,b=d-i.paddingTop-i.paddingBottom),{width:c,height:b,availableWidth:Math.max(c,320),availableHeight:Math.max(b,200)}},R=()=>{const i=[],a=document.querySelector('[data-navigation-type="desktop"]'),d=document.querySelector('[data-navigation-type="mobile"]');if(a&&d){const b=window.getComputedStyle(a).display!=="none",H=window.getComputedStyle(d).display!=="none";b&&H&&i.push("Both desktop and mobile navigation are visible")}const c=document.querySelector(".main-content-area");if(c){const b=window.getComputedStyle(c),H=parseInt(b.marginLeft),D=n.value.marginLeft;Math.abs(H-D)>5&&i.push(`Content margin mismatch: expected ${D}px, got ${H}px`)}return i};he(e,(i,a)=>{i!==a&&p(i)},{immediate:!0}),he(l,()=>{x()},{immediate:!0});const B=()=>{};return{layoutType:m(()=>e.value),currentSpacing:n,sidebarState:m(()=>ue.value),mobileState:m(()=>oe.value),isTransitioning:m(()=>ie.value.isTransitioning),mainContentClasses:u,contentInnerClasses:f,cssCustomProperties:v,updateSidebarState:k,updateMobileDrawerState:A,updateLayoutType:p,executeLayoutTransition:T,getContentAreaDimensions:P,detectLayoutConflicts:R,debugLayoutSpacing:B,adjustForScreenSize:x}}function za(){const{props:l}=We(),{user:t}=pe();let e;const o=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(n=>{var f;const u=((f=t.value)==null?void 0:f.name)||"Employee";n.showNotification(`Hi ${u}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},r=()=>{const n=new Date,u=new Date(l.auth.user.clock_in_time);(isNaN(u.getTime())||n.getTime()-u.getTime()>5*60*1e3)&&o()};te(()=>{r(),e=setInterval(r,5*60*1e3)}),re(()=>{clearInterval(e)})}function Ga(){const{isAuthenticated:l,user:t}=pe(),e=We();let o=null;const r=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(u=>{var v;const f=((v=t.value)==null?void 0:v.name)||"Employee";u.showNotification(`Hi ${f}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},n=()=>{if(!l.value)return;const u=e.props.auth.user.todays_attendance;if(u&&u.clock_in_time&&!u.clock_out_time){const f=new Date(u.clock_in_time);(new Date-f)/1e3/60/60>=7.5&&r()}};te(()=>{o=setInterval(n,5*60*1e3),n()}),re(()=>{o&&clearInterval(o)})}function ja(){const l=We();return he(()=>l.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:l.props.flash}}const Ua={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},Wa=["aria-hidden"],Ya={"aria-label":"User account menu"},qa=["aria-label"],tr={__name:"AuthenticatedLayout",setup(l){const t=kt(),e=w("desktop"),o=w(!1),{getUserProperty:r,getAuthError:n}=pe();$e();const{isDark:u,initializeTheme:f}=Pe();za(),Ga(),ja(),te(()=>{f()});const{mainContentClasses:v,contentInnerClasses:k,cssCustomProperties:A,updateSidebarState:p,updateMobileDrawerState:T,updateLayoutType:x,isTransitioning:P}=Ha(),R=m(()=>r("name","User")),B=m(()=>r("email","")),i=m(()=>n()),a=m(()=>!!i.value),d=m(()=>{try{return route().current()||""}catch(y){return console.warn("[LAYOUT] Route helper not available:",y),window.location.pathname.replace("/","")||"dashboard"}}),c=y=>{},b=y=>{e.value=y.to,x(y.to)},H=y=>{o.value=y,p(y)},D=y=>{y.sidebarCollapsed!==void 0&&(o.value=y.sidebarCollapsed)},J=m(()=>({"layout-container":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value,"desktop-layout":e.value==="desktop","mobile-layout":e.value==="mobile"}));m(()=>{const y=v.value,G={"has-header":_.value};return{...y,...G}});const N=m(()=>({"px-6":!0,"py-4":!0,flex:!0,"items-center":!0,"justify-between":!0,"shadow-sm":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),L=m(()=>({"px-6":!0,"py-4":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),z=m(()=>({"flex-1":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value})),U=w(!1),O=w(!1),_=m(()=>!!t.header),C=y=>{U.value=y,T(y),y?document.body.style.overflow="hidden":document.body.style.overflow=""},V=y=>{O.value=y},E=m(()=>k.value);return(y,G)=>(g(),h("div",null,[F($a),F(Fa),F(Mt),F(va),F(Ma),a.value?(g(),h("div",Ua,[G[0]||(G[0]=s("p",{class:"font-semibold"},"Authentication Error:",-1)),s("p",null,$(i.value),1),G[1]||(G[1]=s("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):j("",!0),F(Jn,{"current-route":d.value,"initially-collapsed":o.value,onNavigate:c,onCollapseChange:H,onNavigationTypeChange:b,onNavigationTransition:V,onStateChange:D,onMobileDrawerToggle:C},null,8,["current-route","initially-collapsed"]),s("div",{class:M(J.value)},[s("div",{class:M(["main-content-area","desktop-layout","gpu-accelerated",{"sidebar-collapsed":o.value,"sidebar-expanded":!o.value,transitioning:O.value||I(P),"has-header":_.value}]),style:je({marginLeft:e.value==="desktop"?o.value?"64px":"256px":"0",transition:"margin-left 300ms cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"100vh",...I(A)}),"data-layout-type":"authenticated-content","aria-hidden":O.value?"true":"false"},[e.value==="desktop"&&I(t).header?(g(),h("header",{key:0,class:M(["content-header",N.value]),role:"banner","aria-label":"Page header"},[s("div",{class:M(["text-lg font-semibold transition-colors duration-200",I(u)?"text-neutral-100":"text-neutral-900"])},[ge(y.$slots,"header")],2),s("nav",Ya,[F(st,{align:"right",width:"48"},{trigger:Q(()=>[s("button",{class:M(["flex items-center p-2 rounded-lg transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",I(u)?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"]),"aria-label":`User menu for ${R.value}`,"aria-haspopup":"true","aria-expanded":"false"},[G[2]||(G[2]=s("div",{class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),s("span",{class:M(["ml-2 text-sm font-medium",I(u)?"text-neutral-200":"text-neutral-700"])},$(R.value),3)],10,qa)]),content:Q(()=>[s("div",{class:M(["px-4 py-2 border-b",I(u)?"border-neutral-600 bg-neutral-800":"border-neutral-200 bg-white"])},[s("p",{class:M(["text-sm font-medium",I(u)?"text-neutral-100":"text-neutral-900"])},$(R.value),3),s("p",{class:M(["text-xs",I(u)?"text-neutral-400":"text-neutral-500"])},$(B.value),3)],2),F(De,{href:y.route("profile.edit")},{default:Q(()=>G[3]||(G[3]=[me(" 👤 My Profile ")])),_:1,__:[3]},8,["href"]),F(De,{href:y.route("email-preferences.show")},{default:Q(()=>G[4]||(G[4]=[me(" 📧 Email Preferences ")])),_:1,__:[4]},8,["href"]),F(De,{href:y.route("logout"),method:"post",as:"button"},{default:Q(()=>G[5]||(G[5]=[me(" Log Out ")])),_:1,__:[5]},8,["href"])]),_:1})])],2)):j("",!0),e.value==="mobile"&&I(t).header?(g(),h("header",{key:1,class:M(["content-header",L.value]),role:"banner","aria-label":"Page header"},[s("div",{class:M(["text-lg font-semibold",I(u)?"text-neutral-100":"text-neutral-900"])},[ge(y.$slots,"header")],2)],2)):j("",!0),s("main",{id:"main-content",class:M(["content-body",z.value]),role:"main","aria-label":"Main content",tabindex:"-1"},[s("div",{class:M(E.value)},[ge(y.$slots,"default")],2)],2)],14,Wa)],2)]))}};export{tr as _,Bo as a,$e as b,st as c,ae as n,Oo as r,ja as u};
