import{e as y,f as d,z as te,B as le,c as u,o as n,i as f,a as i,l as ae,t as V,k as se,n as g,g as _,s as j,h as re,d as E,w as ne,b as oe,F as ue,r as ie,A as ce,T as de,D as N}from"./app-BN2wnuQm.js";/* empty css                                                                   */import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe=["for"],ve={key:0,class:"text-error-500 ml-1"},me=["id","disabled"],ye={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},be={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},he={key:0,class:"p-2 border-b border-neutral-200"},ge=["placeholder"],xe={class:"max-h-60 overflow-auto py-1",role:"listbox"},we={key:0,class:"px-3 py-2 text-sm text-neutral-500 text-center"},ke=["aria-selected","onClick","onMouseenter"],Ve={class:"flex items-center justify-between w-full"},Ce={class:"flex items-center"},Se={class:"block truncate"},Be={key:0,class:"w-4 h-4 text-primary-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},Me={key:1,class:"mt-1"},De={key:0,class:"text-sm text-error-500",role:"alert"},Te={key:1,class:"text-sm text-neutral-500"},Ae={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Object,Array],default:null},options:{type:Array,required:!0,default:()=>[]},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},label:{type:String,default:""},placeholder:{type:String,default:"Select an option..."},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},iconLeft:{type:[String,Object],default:null},searchable:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:"Search options..."},noResultsText:{type:String,default:"No results found"},multiple:{type:Boolean,default:!1},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","change","open","close","search"],setup(s,{expose:$,emit:K}){const t=s,C=K,S=y(null),b=y(null),D=y(null),L=y(null),p=y(!1),x=y(""),r=y(-1),T=y(!1),O=d(()=>`select-${Math.random().toString(36).substr(2,9)}`),v=d(()=>t.modelValue?t.multiple?t.options.filter(e=>t.modelValue.includes(m(e))):t.options.find(e=>{const l=m(e),a=typeof t.modelValue=="object"&&t.modelValue!==null?m(t.modelValue):t.modelValue;return l===a}):null),U=d(()=>v.value?t.multiple?v.value.length===0?t.placeholder:v.value.length===1?B(v.value[0]):`${v.value.length} items selected`:B(v.value):t.placeholder),w=d(()=>{if(!t.searchable||!x.value)return t.options;const e=x.value.toLowerCase();return t.options.filter(l=>B(l).toLowerCase().includes(e))}),B=e=>typeof e=="string"?e:typeof e=="object"&&e!==null&&(e[t.optionLabel]||e.label)||String(e),m=e=>typeof e=="string"||typeof e=="number"?e:typeof e=="object"&&e!==null?e[t.optionValue]!==void 0?e[t.optionValue]:e.value!==void 0?e.value:e:e,q=e=>m(e),k=e=>{if(!t.modelValue)return!1;const l=m(e);return t.multiple?Array.isArray(t.modelValue)&&t.modelValue.includes(l):(typeof t.modelValue=="object"&&t.modelValue!==null?m(t.modelValue):t.modelValue)===l},H=d(()=>["base-select-wrapper",t.class]),I=d(()=>{const e=["relative w-full cursor-default rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset","focus:outline-none focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6","text-left transition-all duration-200"],l={sm:"px-3 py-2 text-sm h-8",md:"px-3 py-2.5 text-base h-10",lg:"px-4 py-3 text-lg h-12"},a={default:"ring-neutral-300 focus:ring-primary-600 bg-white text-neutral-900",error:"ring-error-300 focus:ring-error-600 bg-error-50 text-error-900",disabled:"ring-neutral-200 bg-neutral-50 text-neutral-500 cursor-not-allowed"},o=t.iconLeft?"pl-10":"";let c="default";return t.disabled?c="disabled":t.errorMessage&&(c="error"),[...e,l[t.size],a[c],o,"pr-10"]}),P=d(()=>["block truncate",{"text-neutral-400":!v.value,"text-neutral-900":v.value&&!t.disabled,"text-neutral-500":t.disabled}]),F=d(()=>["w-5 h-5 text-neutral-400 transition-transform duration-200",{"rotate-180":p.value}]),Q=d(()=>[{sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t.size],"flex-shrink-0",{"text-neutral-400":!t.errorMessage,"text-error-400":t.errorMessage}]),G=d(()=>["absolute z-[9999] w-full bg-white rounded-md shadow-lg","ring-1 ring-black ring-opacity-5 focus:outline-none","transform transition-all duration-200",p.value?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none",t.size==="sm"?"py-0.5 text-xs":"py-1 text-sm",t.variant==="outline"?"border border-neutral-300":"border-0",t.rounded?"rounded-full":"rounded-md",T.value?"bottom-full mb-1":"mt-1"]),J=(e,l)=>["relative cursor-default select-none text-left w-full","hover:bg-neutral-100 focus:bg-neutral-100 focus:outline-none","transition-colors duration-150","py-1.5 px-3",{"bg-primary-50 text-primary-900":k(e),"bg-neutral-100":r.value===l&&!k(e),"text-neutral-900":!k(e)}],W=()=>{t.disabled||(p.value?h():M())},M=async()=>{if(t.disabled)return;p.value=!0,r.value=-1,x.value="",T=1,await N();const e=L.value,l=b.value,a=S.value;if(!e||!l||!a)return;const o=a.getBoundingClientRect();e.style.position="absolute",e.style.width=`${o.width}px`,e.style.left="0",e.style.top="100%",e.style.marginTop="4px";const c=e.offsetHeight,z=window.innerHeight-(o.top+o.height),ee=o.top;T.value=z<c&&o.top>c,z<c&&ee>c&&(e.style.top="auto",e.style.bottom="100%",e.style.marginTop="0",e.style.marginBottom="4px"),t.searchable&&D.value&&D.value.focus(),C("open")},h=()=>{p.value=!1,r.value=-1,x.value="",C("close")},A=e=>{if(t.multiple){const l=Array.isArray(t.modelValue)?[...t.modelValue]:[],a=m(e),o=l.indexOf(a);o>-1?l.splice(o,1):l.push(a),C("update:modelValue",l)}else{const l=m(e);C("update:modelValue",l),h()}N(()=>{var l;return(l=b.value)==null?void 0:l.focus()})},X=e=>{var l;if(!t.disabled)switch(e.key){case"Enter":case" ":e.preventDefault(),p.value?r.value>=0&&A(w.value[r.value]):M();break;case"Escape":e.preventDefault(),h(),(l=b.value)==null||l.focus();break;case"ArrowDown":e.preventDefault(),p.value?r.value=Math.min(r.value+1,w.value.length-1):M();break;case"ArrowUp":e.preventDefault(),p.value&&(r.value=Math.max(r.value-1,0));break}},Y=e=>{var l;switch(e.key){case"Escape":e.preventDefault(),h(),(l=b.value)==null||l.focus();break;case"ArrowDown":e.preventDefault(),r.value=Math.min(r.value+1,w.value.length-1);break;case"ArrowUp":e.preventDefault(),r.value=Math.max(r.value-1,0);break;case"Enter":e.preventDefault(),r.value>=0&&A(w.value[r.value]);break}},Z=e=>{setTimeout(()=>{var l;(l=S.value)!=null&&l.contains(document.activeElement)||h()},100)},R=e=>{var l;(l=S.value)!=null&&l.contains(e.target)||h()};return $({focus:()=>{var e;(e=b.value)==null||e.focus()},blur:()=>{var e;(e=b.value)==null||e.blur()},open:M,close:h}),te(()=>{document.addEventListener("click",R)}),le(()=>{document.removeEventListener("click",R)}),(e,l)=>(n(),u("div",{class:g(["base-select-wrapper",H.value])},[s.label?(n(),u("label",{key:0,for:O.value,class:"block text-sm font-medium text-neutral-700 mb-1"},[ae(V(s.label)+" ",1),s.required?(n(),u("span",ve,"*")):f("",!0)],8,pe)):f("",!0),i("div",{class:"relative",ref_key:"containerRef",ref:S},[i("button",{id:O.value,ref_key:"buttonRef",ref:b,type:"button",disabled:s.disabled,class:g(I.value),onClick:W,onKeydown:X,onBlur:Z},[s.iconLeft?(n(),u("div",ye,[(n(),_(j(s.iconLeft),{class:g(Q.value)},null,8,["class"]))])):f("",!0),i("span",{class:g(P.value)},V(U.value),3),i("div",be,[(n(),u("svg",{class:g(F.value),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l[2]||(l[2]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])],42,me),se(de,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:re(()=>[p.value?(n(),u("div",{key:0,ref_key:"dropdownRef",ref:L,class:g(G.value),onClick:l[1]||(l[1]=E(()=>{},["stop"]))},[s.searchable?(n(),u("div",he,[ne(i("input",{ref_key:"searchRef",ref:D,"onUpdate:modelValue":l[0]||(l[0]=a=>x.value=a),type:"text",placeholder:s.searchPlaceholder,class:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",onKeydown:E(Y,["stop"])},null,40,ge),[[oe,x.value]])])):f("",!0),i("div",xe,[w.value.length===0?(n(),u("div",we,V(s.noResultsText),1)):f("",!0),(n(!0),u(ue,null,ie(w.value,(a,o)=>(n(),u("button",{key:q(a),type:"button",class:g(J(a,o)),role:"option","aria-selected":k(a),onClick:c=>A(a),onMouseenter:c=>r.value=o},[ce(e.$slots,"option",{option:a,index:o,selected:k(a)},()=>[i("div",Ve,[i("div",Ce,[a.icon?(n(),_(j(a.icon),{key:0,class:"w-4 h-4 mr-2 flex-shrink-0"})):f("",!0),i("span",Se,V(B(a)),1)]),k(a)?(n(),u("svg",Be,l[3]||(l[3]=[i("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):f("",!0)])],!0)],42,ke))),128))])],2)):f("",!0)]),_:3})],512),s.helpText||s.errorMessage?(n(),u("div",Me,[s.errorMessage?(n(),u("p",De,V(s.errorMessage),1)):s.helpText?(n(),u("p",Te,V(s.helpText),1)):f("",!0)])):f("",!0)],2))}},je=fe(Ae,[["__scopeId","data-v-0ecae90c"]]);export{je as B};
