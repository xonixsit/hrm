import{e as I,f as w,A as V,C as X,c as v,i as N,o as u,a as t,t as B,z as pe,F as Z,r as J,n as h,u as d,w as ce,p as de,Q as ke,g as ee,s as me,B as re,l as oe,q as we,D as xe,y as ve,k as O,h as se,N as be,O as _e,d as Ae,P as Te,S as ue,H as Ie,K as ge,R as Be}from"./app-DKS4KwsT.js";import{u as he}from"./useAuth-Ml9ee7OI.js";import{B as fe,C as Se,p as Ce}from"./icons-DRNP2aWd.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $e={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Me={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Ee={class:"flex items-start"},De={class:"ml-3 flex-1"},Ne={class:"mt-1 text-sm text-red-700"},Le={key:0,class:"mt-3"},Fe={__name:"NavigationErrorDisplay",setup(f){const o=I(!1),r=I(""),e=I(null),a=I(null),p=w(()=>r.value.includes("log in")?"Go to Login":r.value.includes("permission")?"Go to Dashboard":r.value.includes("network")?"Reload Page":"Try Again"),i=($,C=null)=>{r.value=$,e.value=C,o.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{T()},1e4)},g=async()=>{if(e.value)try{await e.value()}catch($){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",$)}T()},T=()=>{o.value=!1,r.value="",e.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return V(()=>{typeof window<"u"&&(window.showNavigationError=i)}),X(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),($,C)=>o.value?(u(),v("div",$e,[t("div",Me,[t("div",Ee,[C[2]||(C[2]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",De,[C[0]||(C[0]=t("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),t("div",Ne,B(r.value),1),e.value?(u(),v("div",Le,[t("button",{onClick:g,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},B(p.value),1)])):N("",!0)]),t("div",{class:"ml-4 flex-shrink-0"},[t("button",{onClick:T,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},C[1]||(C[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):N("",!0)}},U=I("light"),Q=I("light"),q=I(!1),te={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ye(){const f=w(()=>q.value?Q.value:U.value),o=w(()=>te[f.value]),r=w(()=>f.value==="dark"),e=w(()=>f.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(n){return console.warn("Failed to detect system theme:",n),"light"}},p=(n,l=!1)=>{try{const E={theme:M(n)?n:"light",useSystem:!!l,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(S){console.warn("Failed to save theme preference:",S);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},i=()=>{try{const n=localStorage.getItem("theme-preference");if(n){const l=JSON.parse(n);if(typeof l=="object"&&l!==null){const S=M(l.theme)?l.theme:"light",E=typeof l.useSystem=="boolean"?l.useSystem:!1;return{theme:S,useSystem:E,timestamp:l.timestamp||null,version:l.version||1}}}}catch(n){console.warn("Failed to load theme preference:",n);try{localStorage.removeItem("theme-preference")}catch(l){console.warn("Failed to clear corrupted theme preference:",l)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},g=n=>{if(!(typeof document>"u"))try{const l=document.documentElement,S=M(n)?n:"light";l.classList.remove("theme-light","theme-dark","dark","light"),l.classList.add(`theme-${S}`),S==="dark"&&l.classList.add("dark"),T(S);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:S,config:te[S]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(l){console.error("Failed to apply theme:",l);try{const S=document.documentElement;S.classList.remove("theme-light","theme-dark","dark","light"),S.classList.add("theme-light"),T("light")}catch(S){console.error("Failed to apply fallback theme:",S)}}},T=n=>{if(!(typeof document>"u"))try{const l=document.documentElement;n==="dark"?(l.style.setProperty("--color-neutral-50","#0a0a0a"),l.style.setProperty("--color-neutral-100","#111827"),l.style.setProperty("--color-neutral-200","#262626"),l.style.setProperty("--color-neutral-300","#404040"),l.style.setProperty("--color-neutral-400","#525252"),l.style.setProperty("--color-neutral-500","#6b7280"),l.style.setProperty("--color-neutral-600","#a3a3a3"),l.style.setProperty("--color-neutral-700","#d4d4d4"),l.style.setProperty("--color-neutral-800","#e5e5e5"),l.style.setProperty("--color-neutral-900","#fafafa"),l.style.setProperty("--color-neutral-950","#ffffff")):(l.style.setProperty("--color-neutral-50","#fafafa"),l.style.setProperty("--color-neutral-100","#f5f5f5"),l.style.setProperty("--color-neutral-200","#e5e5e5"),l.style.setProperty("--color-neutral-300","#d4d4d4"),l.style.setProperty("--color-neutral-400","#a3a3a3"),l.style.setProperty("--color-neutral-500","#6b7280"),l.style.setProperty("--color-neutral-600","#525252"),l.style.setProperty("--color-neutral-700","#404040"),l.style.setProperty("--color-neutral-800","#262626"),l.style.setProperty("--color-neutral-900","#111827"),l.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(l){console.warn("Failed to update theme properties:",l)}},$=n=>{g(n)},C=n=>{if(!te[n]){console.warn(`Theme "${n}" not found`);return}U.value=n,q.value=!1,p(n,!1),g(n)},m=()=>{q.value=!0;const n=a();Q.value=n,p(n,!0),g(n)},k=()=>{const n=f.value==="light"?"dark":"light";C(n)},b=()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),l=S=>{const E=S.matches?"dark":"light";Q.value=E,q.value&&($(E),p(E,!0))};return n.addEventListener("change",l),()=>{n.removeEventListener("change",l)}},M=n=>te.hasOwnProperty(n),G=()=>Object.values(te),K=()=>{},P=()=>{const n=[];if(M(U.value)||n.push(`Invalid current theme: ${U.value}`),M(Q.value)||n.push(`Invalid system theme: ${Q.value}`),M(f.value)||n.push(`Invalid active theme: ${f.value}`),typeof document<"u"){const l=document.documentElement,S=l.classList.contains("theme-light"),E=l.classList.contains("theme-dark");!S&&!E&&n.push("No theme class found on document root"),S&&E&&n.push("Multiple theme classes found on document root");const y=`theme-${f.value}`;l.classList.contains(y)||n.push(`Expected theme class ${y} not found on document root`)}return{isValid:n.length===0,issues:n}},W=()=>{if(!(typeof document>"u"))try{const n=document.documentElement;return["theme-light","theme-dark"].forEach(S=>{n.classList.remove(S)}),!0}catch(n){return console.warn("Failed to cleanup theme classes:",n),!1}},j=()=>{try{U.value="light",Q.value=a(),q.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference from localStorage:",n)}return g("light"),!0}catch(n){return console.error("Failed to reset theme to default:",n),!1}},_=()=>{console.warn("Attempting theme system recovery...");try{if(W(),j())return!0;throw new Error("Failed to reset theme to default")}catch(n){console.error("Theme system recovery failed:",n);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(l){return console.error("Last resort theme recovery failed:",l),!1}}},s=()=>{try{const n=i();return Q.value=a(),n.useSystem?(q.value=!0,U.value=Q.value):(q.value=!1,U.value=n.theme),g(f.value),b()}catch(n){console.error("Theme initialization failed:",n);try{U.value="light",Q.value="light",q.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(l){console.error("Emergency theme fallback failed:",l)}return null}};return V(()=>{s()}),pe(f,n=>{$(n)}),{currentTheme:w(()=>U.value),systemTheme:w(()=>Q.value),activeTheme:f,themeConfig:o,isDark:r,isLight:e,isSystemThemePreferred:w(()=>q.value),setTheme:C,toggleTheme:k,useSystemTheme:m,validateTheme:M,getAvailableThemes:G,debugThemeState:K,initializeTheme:s,validateThemeState:P,cleanupThemeClasses:W,resetThemeToDefault:j,recoverThemeSystem:_,cleanupAndApplyTheme:g,themes:w(()=>te)}}const ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pe={class:"flex justify-between items-center h-20"},Oe={class:"flex items-center space-x-6"},je={class:"hidden lg:flex space-x-1"},Re=["href"],He={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ve={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},We={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={class:"hidden xl:inline"},Ue={class:"relative assessment-menu"},qe={class:"p-2 space-y-1"},Ze=["href"],Je={class:"relative more-menu"},Ye={class:"p-2"},Xe={key:0,class:"space-y-1"},Ke={class:"space-y-1"},et=["href"],tt={class:"space-y-1 mt-1"},ot=["href"],at={class:"flex items-center space-x-3"},rt={class:"relative user-menu"},st={class:"hidden lg:block text-left"},nt={class:"font-medium text-sm"},it={class:"p-2"},lt={class:"py-1 space-y-1"},ct=["href"],dt={class:"space-y-1 mt-1"},ut=["href"],mt={class:"md:hidden px-4 pb-3 mobile-menu"},ht={class:"mt-3 space-y-2"},vt=["href"],ft={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(f){const o=f,{user:r,roles:e}=he(),{isDark:a}=ye(),p=I(!1),i=I(!1),g=I(!1),T=I(!1),$=w(()=>{var _;return(_=r.value)!=null&&_.name?r.value.name.split(" ").map(s=>s[0]).join("").toUpperCase():"U"}),C=w(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Applications"}]),m=w(()=>{const _=e.value||[],s=Array.isArray(_)?_:[],n=s.includes("Admin")||s.includes("Manager")||s.includes("HR"),l=[{route:"competency-assessments.my-assessments",label:"My Assessments"}];return n&&l.push({route:"competency-assessments.index",label:"All Assessments"},{route:"assessment-dashboard",label:"Assessment Dashboard"},{route:"competency-assessments.pending",label:"Pending Assessments"},{route:"assessment-cycle-manager",label:"Assessment Cycles"},{route:"competencies.index",label:"Competency Setup"}),l}),k=w(()=>{try{const _=e.value||[],s=Array.isArray(_)?_:[],n=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"employee-handbook",label:"Employee Handbook",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],l=s.includes("Admin")||s.includes("Manager")||s.includes("HR"),S=s.includes("Admin");return l&&n.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"leave-types.index",label:"Leave Policies",category:"management"},{route:"support.index",label:"Support Management",category:"management"}),S&&n.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"leave-types.index",label:"Leave Policies",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"reports.index",label:"View Reports",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),n}catch(_){return console.error("Error computing moreNavItems:",_),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),b=w(()=>k.value.filter(_=>_.category==="regular")),M=w(()=>k.value.filter(_=>_.category==="management")),G=w(()=>k.value.filter(_=>_.category==="admin")),K=w(()=>[...C.value,...k.value]),P=_=>{var s;return o.currentRoute===_||((s=o.currentRoute)==null?void 0:s.startsWith(_.split(".")[0]))},W=()=>{ke.post(route("logout"))},j=_=>{const s=_.target;s.closest(".assessment-menu")||(i.value=!1),s.closest(".more-menu")||(p.value=!1),s.closest(".user-menu")||(g.value=!1),s.closest(".mobile-menu")||(T.value=!1)};return V(()=>{document.addEventListener("click",j)}),X(()=>{document.removeEventListener("click",j)}),(_,s)=>{var n,l,S,E;return u(),v("nav",{class:h(["w-full transition-all duration-200 sticky top-0 z-50",d(a)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-600 border-b border-teal-700/60 shadow-lg shadow-teal-900/20 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[t("div",ze,[t("div",Pe,[t("div",Oe,[s[17]||(s[17]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"flex items-center bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg hover:bg-white hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-white/20"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain filter drop-shadow-sm"})])],-1)),t("div",je,[(u(!0),v(Z,null,J(C.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",P(y.route)?d(a)?"bg-teal-600/20 text-teal-300":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[y.route==="dashboard"?(u(),v("svg",He,s[4]||(s[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):y.route==="attendances.index"?(u(),v("svg",Ve,s[5]||(s[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):y.route==="leaves.index"?(u(),v("svg",Ge,s[6]||(s[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(u(),v("svg",We,s[7]||(s[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),t("span",Qe,B(y.label),1)],10,Re))),128)),t("div",Ue,[t("button",{onClick:s[0]||(s[0]=y=>i.value=!i.value),class:h(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",i.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[s[9]||(s[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),s[10]||(s[10]=t("span",{class:"hidden xl:inline"},"Assessments",-1)),(u(),v("svg",{class:h(["w-4 h-4 transition-transform duration-200",{"rotate-180":i.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[8]||(s[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:h(["absolute left-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",qe,[(u(!0),v(Z,null,J(m.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[s[11]||(s[11]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,B(y.label),1)],10,Ze))),128))])],2),[[de,i.value]])]),t("div",Je,[t("button",{onClick:s[1]||(s[1]=y=>p.value=!p.value),class:h(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",p.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[s[13]||(s[13]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),s[14]||(s[14]=t("span",{class:"hidden xl:inline"},"More",-1)),(u(),v("svg",{class:h(["w-4 h-4 transition-transform duration-200",{"rotate-180":p.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[12]||(s[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:h(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",Ye,[k.value.length>0?(u(),v("div",Xe,[t("div",Ke,[(u(!0),v(Z,null,J(b.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[s[15]||(s[15]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,B(y.label),1)],10,et))),128))]),M.value.length>0?(u(),v("div",{key:0,class:h(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:h(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",d(a)?"text-gray-400":"text-gray-500"])}," Management ",2),t("div",tt,[(u(!0),v(Z,null,J(M.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[s[16]||(s[16]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0891B2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("span",null,B(y.label),1)],10,ot))),128))])],2)):N("",!0)])):N("",!0)])],2),[[de,p.value]])])])]),t("div",at,[t("div",rt,[t("button",{onClick:s[2]||(s[2]=y=>g.value=!g.value),class:h(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",g.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[t("div",{class:h(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",d(a)?"bg-teal-600 text-white":"bg-teal-500 text-white"])},B($.value),3),t("div",st,[t("div",nt,B((n=d(r))==null?void 0:n.name),1),t("div",{class:h(["text-xs",d(a)?"text-gray-400":"text-white/70"])},B(((l=d(e))==null?void 0:l.join(", "))||"User"),3)]),(u(),v("svg",{class:h(["w-4 h-4 transition-transform duration-200",{"rotate-180":g.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[18]||(s[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:h(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",it,[t("div",{class:h(["px-3 py-2 border-b",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:h(["font-medium",d(a)?"text-white":"text-gray-900"])},B((S=d(r))==null?void 0:S.name),3),t("div",{class:h(["text-sm",d(a)?"text-gray-400":"text-gray-500"])},B((E=d(r))==null?void 0:E.email),3)],2),t("div",lt,[t("a",{href:_.route("profile.edit"),class:h(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},s[19]||(s[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",null,"Profile Settings",-1)]),10,ct),G.value.length>0?(u(),v("div",{key:0,class:h(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:h(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",d(a)?"text-red-400":"text-red-600"])},s[20]||(s[20]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",null,"Admin",-1)]),2),t("div",dt,[(u(!0),v(Z,null,J(G.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?d(a)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[s[21]||(s[21]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,B(y.label),1)],10,ut))),128))])],2)):N("",!0),t("div",{class:h(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("button",{onClick:W,class:h(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},s[22]||(s[22]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",null,"Sign Out",-1)]))],2)])])],2),[[de,g.value]])])])])]),t("div",mt,[t("button",{onClick:s[3]||(s[3]=y=>T.value=!T.value),class:h(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",d(a)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[s[24]||(s[24]=t("span",null,"Menu",-1)),(u(),v("svg",{class:h(["w-5 h-5 transition-transform duration-200",{"rotate-180":T.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[23]||(s[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",ht,[(u(!0),v(Z,null,J(K.value,y=>(u(),v("a",{key:y.route,href:_.route(y.route),class:h(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",P(y.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},B(y.label),11,vt))),128))],512),[[de,T.value]])])],2)}}};function pt(f,o){return u(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function gt(f,o){return u(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const yt=["aria-live"],wt={class:"toast-content"},bt={key:0,class:"toast-icon"},kt={class:"toast-message"},xt={key:0,class:"toast-title"},_t={class:"toast-text"},At={key:1,class:"toast-actions"},Tt=["aria-label"],It={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:f=>["success","error","warning","info","loading"].includes(f)},position:{type:String,default:"top-right",validator:f=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(f)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:f=>["low","normal","high"].includes(f)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:f=>["sm","md","lg"].includes(f)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(f,{expose:o,emit:r}){const e=f,a=r,p=I(!1),i=I(null),g=I(null),T=I(100),$=I(!1),C=I(0),m=I(0),k=w(()=>fe("x-mark")),b=w(()=>{if(e.icon)return fe(e.icon);const F={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return fe(F[e.type]||F.info)}),M=w(()=>["toast-notification",`toast-notification--${e.type}`,`toast-notification--${e.size}`,`toast-notification--${e.position}`,{"toast-notification--with-title":e.title,"toast-notification--persistent":e.persistent,"toast-notification--with-action":e.actionText}]),G=w(()=>({zIndex:e.zIndex})),K=w(()=>["w-5 h-5",{"animate-spin":e.type==="loading"}]),P=w(()=>e.closable||e.actionText),W=w(()=>[`toast-progress--${e.type}`]),j=w(()=>({width:`${T.value}%`})),_=()=>{p.value=!0,e.sound&&ie(),!e.persistent&&e.duration>0&&l()},s=()=>{p.value=!1,ae(),a("close")},n=()=>{a("action"),e.persistent||s()},l=()=>{e.duration<=0||(C.value=Date.now(),m.value=e.duration,i.value=setTimeout(()=>{s()},e.duration),S())},S=()=>{if(!e.showProgress)return;const F=Date.now(),R=()=>{if(!p.value||$.value)return;const le=Date.now()-F,c=Math.max(0,100-le/e.duration*100);T.value=c,c>0&&(g.value=requestAnimationFrame(R))};R()},E=()=>{if(!i.value||e.persistent)return;$.value=!0,clearTimeout(i.value),cancelAnimationFrame(g.value);const F=Date.now()-C.value;m.value=Math.max(0,e.duration-F)},y=()=>{!$.value||e.persistent||($.value=!1,m.value>0&&(C.value=Date.now(),i.value=setTimeout(()=>{s()},m.value),S()))},ae=()=>{i.value&&(clearTimeout(i.value),i.value=null),g.value&&(cancelAnimationFrame(g.value),g.value=null)},ie=()=>{try{const F=new Audio,R={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};F.src=R[e.type]||R.info,F.volume=.3,F.play().catch(()=>{})}catch{}};return V(()=>{_()}),X(()=>{ae()}),pe(()=>e.duration,()=>{p.value&&!e.persistent&&(ae(),l())}),o({show:_,close:s,pauseTimer:E,resumeTimer:y}),(F,R)=>(u(),ee(xe,{to:"body"},[p.value?(u(),v("div",{key:0,class:h(M.value),style:we(G.value),role:"alert","aria-live":f.priority==="high"?"assertive":"polite",onMouseenter:E,onMouseleave:y},[t("div",wt,[f.showIcon?(u(),v("div",bt,[(u(),ee(me(b.value),{class:h(K.value)},null,8,["class"]))])):N("",!0),t("div",kt,[f.title?(u(),v("div",xt,B(f.title),1)):N("",!0),t("div",_t,[re(F.$slots,"default",{},()=>[oe(B(f.message),1)],!0)])]),P.value?(u(),v("div",At,[f.actionText?(u(),v("button",{key:0,onClick:n,class:"toast-action-button"},B(f.actionText),1)):N("",!0),f.closable?(u(),v("button",{key:1,onClick:s,class:"toast-close-button","aria-label":f.closeLabel},[(u(),ee(me(k.value),{class:"w-4 h-4"}))],8,Tt)):N("",!0)])):N("",!0)]),f.showProgress&&f.duration>0?(u(),v("div",{key:0,class:h(["toast-progress",W.value]),style:we(j.value)},null,6)):N("",!0)],46,yt)):N("",!0)]))}},Bt=ne(It,[["__scopeId","data-v-11baa49e"]]);class St{constructor(){this.notifications=ve([]),this.maxNotifications=I(5),this.defaultDuration=I(5e3),this.positions=ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=ve({enabled:!0,volume:.3})}add(o){const r=this.generateId(),e=o.position||"top-right",a={id:r,message:o.message||"",title:o.title||"",type:o.type||"info",position:e,duration:o.duration!==void 0?o.duration:this.defaultDuration.value,persistent:o.persistent||!1,closable:o.closable!==!1,showIcon:o.showIcon!==!1,showProgress:o.showProgress!==!1,actionText:o.actionText||"",icon:o.icon||"",size:o.size||"md",sound:o.sound!==!1&&this.sounds.enabled,priority:o.priority||"normal",zIndex:o.zIndex||1e3,createdAt:Date.now(),onAction:o.onAction||null,onClose:o.onClose||null,component:o.component||null,props:o.props||{}};return this.notifications.push(a),this.positions[e].push(a),this.manageQueueSize(e),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(r)},a.duration),r}remove(o){const r=this.notifications.find(i=>i.id===o);if(!r)return;const e=this.notifications.findIndex(i=>i.id===o);e>-1&&this.notifications.splice(e,1);const a=this.positions[r.position],p=a.findIndex(i=>i.id===o);p>-1&&a.splice(p,1),r.onClose&&r.onClose(r)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(o=>{this.positions[o].splice(0)})}clearPosition(o){[...this.positions[o]].forEach(e=>{this.remove(e.id)})}clearType(o){this.notifications.filter(e=>e.type===o).forEach(e=>{this.remove(e.id)})}update(o,r){const e=this.notifications.find(a=>a.id===o);e&&Object.assign(e,r)}getByPosition(o){return this.positions[o]||[]}getByType(o){return this.notifications.filter(r=>r.type===o)}getById(o){return this.notifications.find(r=>r.id===o)}exists(o){return this.notifications.some(r=>r.id===o)}count(){return this.notifications.length}countByPosition(o){var r;return((r=this.positions[o])==null?void 0:r.length)||0}setMaxNotifications(o){this.maxNotifications.value=o,Object.keys(this.positions).forEach(r=>{this.manageQueueSize(r)})}setDefaultDuration(o){this.defaultDuration.value=o}setSoundsEnabled(o){this.sounds.enabled=o}setSoundVolume(o){this.sounds.volume=Math.max(0,Math.min(1,o))}pauseAll(){this.notifications.forEach(o=>{o.pauseTimer&&o.pauseTimer()})}resumeAll(){this.notifications.forEach(o=>{o.resumeTimer&&o.resumeTimer()})}success(o,r={}){return this.add({message:o,type:"success",...r})}error(o,r={}){return this.add({message:o,type:"error",persistent:r.persistent!==!1,...r})}warning(o,r={}){return this.add({message:o,type:"warning",...r})}info(o,r={}){return this.add({message:o,type:"info",...r})}loading(o,r={}){return this.add({message:o,type:"loading",persistent:!0,closable:!1,...r})}confirm(o={}){return new Promise(r=>{const e=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:o.title||"Confirm Action",description:o.message||"Are you sure you want to proceed?",confirmText:o.confirmText||"Confirm",cancelText:o.cancelText||"Cancel",...o},onAction:a=>{this.remove(e),r(a==="confirm")},onClose:()=>{r(!1)}})})}alert(o,r={}){return new Promise(e=>{const a=this.add({type:r.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:r.type||"info",title:r.title||"Alert",description:o,showCancel:!1,confirmText:r.confirmText||"OK",...r},onAction:()=>{this.remove(a),e(!0)},onClose:()=>{e(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(o){const r=this.positions[o];r.length>this.maxNotifications.value&&r.splice(0,r.length-this.maxNotifications.value).forEach(a=>{const p=this.notifications.findIndex(i=>i.id===a.id);p>-1&&this.notifications.splice(p,1)})}}const z=new St,Ct={class:"notification-container"},$t={__name:"NotificationContainer",setup(f,{expose:o}){const r=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];w(()=>z.notifications.filter(m=>!m.component));const e=w(()=>z.notifications.filter(m=>m.component)),a=m=>{const k="fixed z-50 pointer-events-none",b={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${k} ${b[m]||b["top-right"]}`},p=m=>z.getByPosition(m),i=m=>m.includes("left")?"slide-left":m.includes("right")?"slide-right":m.includes("center")?"slide-center":"slide-right",g=m=>{z.remove(m)},T=(m,k="action")=>{const b=z.getById(m);b!=null&&b.onAction&&b.onAction(k)},$=()=>{window.notify={success:(m,k)=>z.success(m,k),error:(m,k)=>z.error(m,k),warning:(m,k)=>z.warning(m,k),info:(m,k)=>z.info(m,k),loading:(m,k)=>z.loading(m,k),confirm:m=>z.confirm(m),alert:(m,k)=>z.alert(m,k),clear:()=>z.clear(),remove:m=>z.remove(m)}},C=()=>{window.notify&&delete window.notify};return V(()=>{$()}),X(()=>{C()}),o({notificationQueue:z,notify:window.notify}),(m,k)=>(u(),v("div",Ct,[(u(),v(Z,null,J(r,b=>t("div",{key:b,class:h(a(b))},[O(_e,{name:i(b),tag:"div",class:"space-y-2"},{default:se(()=>[(u(!0),v(Z,null,J(p(b),M=>(u(),ee(Bt,be({key:M.id},{ref_for:!0},M,{onClose:G=>g(M.id),onAction:G=>T(M.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(u(!0),v(Z,null,J(e.value,b=>(u(),ee(me(b.component||"NotificationModal"),be({key:b.id,ref_for:!0},b.props,{onClose:M=>g(b.id),onConfirm:M=>T(b.id,"confirm"),onCancel:M=>T(b.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Mt=ne($t,[["__scopeId","data-v-67e6c621"]]),Et={class:"floating-attendance-widget"},Dt={class:"status-indicator"},Nt={class:"time-info"},Lt={class:"time-display"},Ft={class:"time-label-mini"},zt={class:"widget-header"},Pt={class:"status-info"},Ot={class:"status-text"},jt={class:"timer-section"},Rt={class:"timer-value"},Ht={class:"timer-label"},Vt={class:"quick-actions"},Gt=["disabled"],Wt=["disabled"],Qt={class:"quick-stats"},Ut={class:"stat"},qt={class:"stat-value"},Zt={class:"stat"},Jt={class:"stat-value"},Yt={class:"stat-label"},Xt={__name:"FloatingAttendanceWidget",setup(f){const o=I(!1),r=I(!1),e=I({clockedIn:!1,onBreak:!1,clockInTime:null}),a=I(!1),p=I("0h 0m 0s"),i=I(null),g=I([]),T=()=>{try{const c={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:i.value,completedBreakSessions:g.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(c))}catch(c){console.warn("Failed to save attendance state to localStorage:",c)}},$=()=>{try{const c=localStorage.getItem("floating-attendance-state");if(c){const x=JSON.parse(c),D=new Date(x.lastUpdate);if((new Date-D)/(1e3*60)<5)return e.value.clockedIn=x.clockedIn||!1,e.value.onBreak=x.onBreak||!1,e.value.clockInTime=x.clockInTime||null,i.value=x.breakStartTime||null,g.value=x.completedBreakSessions||[],!0}}catch(c){console.warn("Failed to load attendance state from localStorage:",c)}return!1};let C=null;const m=w(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),k=w(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),b=w(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),M=w(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),G=w(()=>a.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),K=w(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),P=w(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const c=new Date(e.value.clockInTime),D=new Date-c,A=Math.floor(D/(1e3*60)),L=Math.floor(A/60),H=A%60;return`${L}h ${H}m`}),W=w(()=>{if(e.value.onBreak&&i.value){const c=new Date(i.value);if(isNaN(c.getTime()))return"0h 0m 1s";{const D=Math.max(0,new Date-c),A=Math.floor(D/(1e3*60*60)),L=Math.floor(D%(1e3*60*60)/(1e3*60)),H=Math.floor(D%(1e3*60)/1e3);return`${A}h ${L}m ${H}s`}}return"0h 0m"}),j=w(()=>{let c=0;if(g.value.forEach(A=>{if(A.start&&A.end){const L=new Date(A.start),Y=new Date(A.end)-L;c+=Math.floor(Y/(1e3*60))}}),e.value.onBreak&&i.value){const A=new Date(i.value);if(!isNaN(A.getTime())){const H=Math.max(0,new Date-A);c+=Math.floor(H/(1e3*60))}}const x=Math.floor(c/60),D=c%60;return`${x}h ${D}m`});w(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const _=()=>{o.value=!o.value,r.value=!0},s=(c=!1)=>{if(c||!r.value){const x=!e.value.clockedIn;o.value,o.value=x,c&&(r.value=!1)}},n=()=>{if(e.value.clockedIn&&e.value.clockInTime){const c=new Date;let x;e.value.onBreak&&i.value?x=new Date(i.value):x=new Date(e.value.clockInTime);const D=c-x,A=Math.floor(D/(1e3*60*60)),L=Math.floor(D%(1e3*60*60)/(1e3*60)),H=Math.floor(D%(1e3*60)/1e3);p.value=`${A}h ${L}m ${H}s`,H%10===0&&R()}else p.value="0h 0m 0s"},l=async()=>{try{if(a.value=!0,e.value.clockedIn){const c=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,i.value=null,p.value="0h 0m 0s",T(),s(!0),R()}else{const c=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=c.data.clock_in_time||new Date().toISOString(),T(),s(!0),R()}}catch(c){console.error("Clock in/out failed:",c),alert("Action failed: "+c.message)}finally{a.value=!1}},S=async()=>{try{if(a.value=!0,e.value.onBreak){if(i.value){const x={start:i.value,end:new Date().toISOString(),isOngoing:!1};g.value=[...g.value,x]}const c=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,i.value=null,T(),le("end-break")}else{const c=new Date().toISOString();i.value=c,e.value.onBreak=!0;const x=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});x.data.break_start_time&&(i.value=x.data.break_start_time),T(),le("start-break")}}catch(c){console.error("Break action failed:",c),alert("Action failed: "+c.message)}finally{a.value=!1}},E=async()=>{var c,x;try{const A=(await window.axios.get("/api/attendance/current")).data,L=A.clock_in_time,H=e.value.clockInTime;if((L!==H||!A.clocked_in)&&(g.value=[]),e.value.clockedIn=A.clocked_in||!1,e.value.onBreak=A.on_break||!1,e.value.clockInTime=A.clock_in_time||null,A.break_sessions&&Array.isArray(A.break_sessions)&&(g.value=A.break_sessions.map(Y=>({start:Y.start,end:Y.end,isOngoing:!1}))),A.on_break)if(A.break_start_time)i.value=A.break_start_time;else if((c=A.current_session)!=null&&c.current_break_start)i.value=A.current_session.current_break_start;else if((x=A.current_session)!=null&&x.break_sessions&&A.current_session.break_sessions.length>0){const Y=A.current_session.break_sessions[A.current_session.break_sessions.length-1];Y&&!Y.end&&(i.value=Y.start)}else i.value||(i.value=new Date().toISOString());else i.value=null;s()}catch(D){console.error("Failed to fetch attendance status:",D)}},y=c=>{c.key==="attendance-update"&&E()},ae=c=>{e.value.clockedIn=c.clocked_in,e.value.onBreak=c.on_break,e.value.clockInTime=c.clock_in_time,c.on_break&&c.break_start_time?i.value=c.break_start_time:c.on_break||(i.value=null),T(),n(),s()},ie=c=>{const{clockedIn:x,onBreak:D,clockInTime:A,breakStartTime:L}=c.detail;e.value.clockedIn=x,e.value.onBreak=D,e.value.clockInTime=A,D&&L?i.value=L:D||(i.value=null),T(),n(),s()},F=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(c){console.warn("Failed to broadcast attendance update:",c)}},R=()=>{try{const c=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:i.value,completedBreakSessions:g.value,totalBreakTime:j.value,currentBreakTime:W.value,todaysHours:P.value,timestamp:Date.now(),source:"floating-widget-load"}});window.dispatchEvent(c),F()}catch(c){console.warn("Failed to broadcast current status:",c)}},le=c=>{try{const x=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:i.value,completedBreakSessions:g.value,totalBreakTime:j.value,currentBreakTime:W.value,todaysHours:P.value,timestamp:Date.now(),source:"floating-widget-break",action:c}});window.dispatchEvent(x),F()}catch(x){console.warn("Failed to broadcast break status change:",x)}};return V(async()=>{var x,D;if($()&&n(),await E(),T(),n(),setTimeout(()=>{R()},100),C=setInterval(n,1e3),window.Echo)try{const L=(D=(x=(await window.axios.get("/api/user")).data)==null?void 0:x.employee)==null?void 0:D.id;L?window.Echo.private(`attendance.${L}`).listen(".attendance.updated",ae):console.warn("FloatingWidget: No employee ID found for Echo subscription")}catch(A){console.error("FloatingWidget: Failed to get user data for Echo subscription:",A)}else console.warn("FloatingWidget: Echo not available");window.addEventListener("storage",y),window.addEventListener("attendance-state-changed",ie)}),X(()=>{if(C&&clearInterval(C),window.Echo)try{window.Echo.connector.pusher.allChannels().forEach(c=>{c.name.startsWith("private-attendance.")&&window.Echo.leave(c.name.replace("private-",""))})}catch(c){console.warn("FloatingWidget: Error unsubscribing from Echo channels:",c)}window.removeEventListener("storage",y),window.removeEventListener("attendance-state-changed",ie)}),(c,x)=>(u(),v("div",Et,[o.value?N("",!0):(u(),v("div",{key:0,onClick:_,class:h(["floating-button",M.value])},[t("div",Dt,[t("div",{class:h(b.value)},null,2)]),t("div",Nt,[t("div",Lt,B(p.value),1),t("div",Ft,B(k.value),1)]),O(d(Se),{class:"w-4 h-4 expand-icon"})],2)),o.value?(u(),v("div",{key:1,class:"expanded-widget",onClick:x[0]||(x[0]=Ae(()=>{},["stop"]))},[t("div",zt,[t("div",Pt,[t("div",{class:h(b.value)},null,2),t("span",Ot,B(m.value),1)]),t("button",{onClick:_,class:"minimize-btn",title:"Minimize"},[O(d(Ce),{class:"w-4 h-4"})])]),t("div",jt,[t("div",Rt,B(p.value),1),t("div",Ht,B(k.value),1)]),t("div",Vt,[t("button",{onClick:l,disabled:a.value,class:h(K.value)},B(G.value),11,Gt),e.value.clockedIn?(u(),v("button",{key:0,onClick:S,disabled:a.value,class:"break-action"},[(u(),ee(me(e.value.onBreak?d(gt):d(pt)),{class:"w-3 h-3"})),oe(" "+B(e.value.onBreak?"End":"Break"),1)],8,Wt)):N("",!0)]),t("div",Qt,[t("div",Ut,[t("span",qt,B(P.value),1),x[1]||(x[1]=t("span",{class:"stat-label"},"Today",-1))]),t("div",Zt,[t("span",Jt,B(e.value.onBreak?W.value:j.value),1),t("span",Yt,B(e.value.onBreak?"Current":"Total"),1)])])])):N("",!0),o.value?(u(),v("div",{key:2,class:"backdrop",onClick:_})):N("",!0)]))}},Kt=ne(Xt,[["__scopeId","data-v-f4b903b2"]]),eo={class:"live-regions"},to={__name:"LiveRegion",setup(f){const o=I(null),r=I(null),e=I(null);return V(()=>{Te.init()}),(a,p)=>(u(),v("div",eo,[t("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:o},null,512),t("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:r},null,512),t("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:e},null,512)]))}},oo=ne(to,[["__scopeId","data-v-94955163"]]),ao={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ro={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},so={class:"flex items-center space-x-6"},no={__name:"AppFooter",setup(f){const{isDark:o}=ye(),r=w(()=>new Date().getFullYear());return(e,a)=>(u(),v("footer",{class:h(["mt-auto border-t transition-all duration-200",d(o)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[t("div",ao,[t("div",ro,[a[4]||(a[4]=t("div",{class:"flex items-center"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),t("div",so,[O(d(ue),{href:e.route("dashboard"),class:h(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[0]||(a[0]=[oe(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),O(d(ue),{href:e.route("support.index"),class:h(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[1]||(a[1]=[oe(" Support ")])),_:1,__:[1]},8,["href","class"]),O(d(ue),{href:e.route("legal.privacy"),class:h(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[2]||(a[2]=[oe(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),O(d(ue),{href:e.route("legal.disclaimer"),class:h(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[3]||(a[3]=[oe(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),t("div",{class:h(["text-sm",d(o)?"text-gray-400":"text-gray-500"])}," Â© "+B(r.value)+" Xonobics. All rights reserved. ",3)])])],2))}},io={class:"flex items-center space-x-4 text-sm"},lo={key:0,class:"flex items-center space-x-2"},co={class:"text-lg"},uo={class:"hidden sm:block"},mo={class:"font-medium"},ho={class:"text-xs opacity-75"},vo={class:"border-l border-gray-300 dark:border-gray-600 pl-4"},fo={class:"font-medium"},po={class:"text-xs opacity-75"},go={__name:"CompactWeatherWidget",props:{weatherApiKey:{type:String,default:"31340efcae6547a7aee150722250512"}},setup(f){const o=f,r=I(null),e=I("UTC"),a=I(""),p=I("Chicago");let i=null;const g=m=>{const k={clear:"âï¸",sunny:"âï¸",clouds:"âï¸","partly cloudy":"â",cloudy:"âï¸",overcast:"âï¸",rain:"ð§ï¸",drizzle:"ð¦ï¸",snow:"âï¸",thunderstorm:"âï¸",fog:"ð«ï¸",mist:"ð«ï¸",haze:"ð«ï¸",default:"ð¤ï¸"},b=m.toLowerCase();return k[b]||k.default},T=()=>{const m=new Date;a.value=m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},$=async()=>{var m,k;try{const b=await Ie.get("/api/admin/settings");(m=b.data)!=null&&m.company_location&&(p.value=b.data.company_location),(k=b.data)!=null&&k.company_timezone&&(e.value=b.data.company_timezone)}catch(b){console.error("Failed to fetch admin settings:",b)}},C=async()=>{if(o.weatherApiKey)try{const m=await fetch(`https://api.weatherapi.com/v1/current.json?key=${o.weatherApiKey}&q=${p.value}&aqi=no`);if(!m.ok)throw new Error("Weather API failed");const k=await m.json(),b=await fetch(`https://api.weatherapi.com/v1/timezone.json?key=${o.weatherApiKey}&q=${p.value}`);if(!b.ok)throw new Error("Timezone API failed");const M=await b.json();r.value={temperature:Math.round(k.current.temp_c),condition:k.current.condition.text},e.value=M.timezone.tz_id}catch(m){console.error("Weather fetch error:",m)}};return V(async()=>{T(),await $(),await C(),i=setInterval(T,6e4)}),X(()=>{i&&clearInterval(i)}),(m,k)=>(u(),v("div",io,[r.value?(u(),v("div",lo,[t("span",co,B(g(r.value.condition)),1),t("div",uo,[t("div",mo,B(r.value.temperature)+"Â°C",1),t("div",ho,B(r.value.condition),1)])])):N("",!0),t("div",vo,[t("div",fo,B(e.value),1),t("div",po,B(a.value),1)])]))}};function yo(){const{props:f}=ge(),{user:o}=he();let r;const e=()=>{Notification.permission==="granted"&&navigator.serviceWorker.ready.then(p=>{var g;const i=((g=o.value)==null?void 0:g.name)||"Employee";p.showNotification(`Hi ${i}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})})},a=()=>{const p=new Date,i=new Date(f.auth.user.clock_in_time);(isNaN(i.getTime())||p.getTime()-i.getTime()>5*60*1e3)&&e()};V(()=>{a(),r=setInterval(a,5*60*1e3)}),X(()=>{clearInterval(r)})}function wo(){const{isAuthenticated:f,user:o}=he(),r=ge();let e=null;const a=()=>{Notification.permission==="granted"&&navigator.serviceWorker.ready.then(i=>{var T;const g=((T=o.value)==null?void 0:T.name)||"Employee";i.showNotification(`Hi ${g}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})})},p=()=>{if(!f.value)return;const i=r.props.auth.user.todays_attendance;if(i&&i.clock_in_time&&!i.clock_out_time){const g=new Date(i.clock_in_time);(new Date-g)/1e3/60/60>=7.5&&a()}};V(()=>{e=setInterval(p,5*60*1e3),p()}),X(()=>{e&&clearInterval(e)})}function bo(){const f=ge();return pe(()=>f.props.flash,o=>{!o||!window.notify||(o.success&&window.notify.success(o.success),o.error&&window.notify.error(o.error),o.warning&&window.notify.warning(o.warning),o.info&&window.notify.info(o.info))},{immediate:!0,deep:!0}),{flash:f.props.flash}}const ko={class:"relative"},xo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},_o={class:"flex-1"},Ao={key:0,class:"flex items-center space-x-3"},To={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},Io={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Bo={__name:"AuthenticatedLayout",setup(f){const o=Be(),{hasRole:r,getAuthError:e}=he(),{isDark:a,initializeTheme:p}=ye();yo(),wo(),bo(),V(()=>{p()});const i=w(()=>e()),g=w(()=>!!i.value),T=w(()=>{try{return route().current()||""}catch($){return console.warn("[LAYOUT] Route helper not available:",$),window.location.pathname.replace("/","")||"dashboard"}});return($,C)=>(u(),v("div",{class:h(["min-h-screen transition-all duration-300 flex flex-col",d(a)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-teal-50/30"])},[O(oo),O(Fe),O(Mt),d(r)("Admin")?N("",!0):(u(),ee(Kt,{key:0})),g.value?(u(),v("div",{key:1,class:h(["p-4 border z-50 relative rounded-lg mx-4 mt-4",d(a)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[C[0]||(C[0]=t("p",{class:"font-semibold"},"Authentication Error:",-1)),t("p",null,B(i.value),1),C[1]||(C[1]=t("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):N("",!0),O(ft,{"current-route":T.value},null,8,["current-route"]),t("div",ko,[d(o).header?(u(),v("header",{key:0,class:h(["border-b transition-all duration-200 backdrop-blur-sm",d(a)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[t("div",xo,[t("div",{class:h(["flex items-center justify-between gap-4",d(a)?"text-white":"text-gray-900"])},[t("div",_o,[t("h1",{class:h(["text-2xl font-bold transition-colors duration-200",d(a)?"text-white":"text-gray-900"])},[re($.$slots,"header",{},void 0,!0)],2),d(o).subtitle?(u(),v("div",{key:0,class:h(["mt-1 text-sm",d(a)?"text-gray-300":"text-gray-600"])},[re($.$slots,"subtitle",{},void 0,!0)],2)):N("",!0)]),t("div",{class:h(["flex items-center",d(a)?"text-gray-300":"text-gray-600"])},[O(go)],2),d(o).headerActions?(u(),v("div",Ao,[re($.$slots,"headerActions",{},void 0,!0)])):N("",!0)],2)])],2)):N("",!0),t("main",To,[t("div",Io,[t("div",{class:h(["relative transition-all duration-200",d(o).contentBackground!==!1&&(d(a)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[t("div",{class:h([d(o).contentBackground!==!1?"p-6 sm:p-8":""])},[re($.$slots,"default",{},void 0,!0)],2)],2)])])]),O(no)],2))}},Eo=ne(Bo,[["__scopeId","data-v-65156a79"]]);export{Eo as A,pt as a,ye as b,z as n,gt as r,bo as u};
