import{K as j,f as u,e as H,g as h,o as n,h as f,k as m,a as s,w as P,c as l,F as g,r as p,t as a,v as S,i as D,u as c,l as y,S as x,n as I,Q as O}from"./app-D4rDfvnz.js";import{A as Q}from"./AuthenticatedLayout-BShAoAku.js";import{P as z}from"./PageLayout-DrLvJiWM.js";import{c as K,a as q,j as G,b as J,i as W}from"./icons-CphBhIXa.js";import"./useAuth-BL4E-12C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-DSuoOuTR.js";import"./Icon-BNFMu4bf.js";import"./UsersIcon-CpEfnAiH.js";const X={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6"},Y={class:"p-6"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ee=["value"],se=["value"],te={class:"bg-white rounded-lg shadow-sm border border-gray-200"},oe={class:"px-6 py-4 border-b border-gray-200"},re={class:"text-lg font-medium text-gray-900"},ne={key:0,class:"p-12 text-center"},ae={key:1,class:"divide-y divide-gray-200"},le={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-4"},de={class:"flex-shrink-0"},ce={class:"h-12 w-12 rounded-full bg-teal-100 flex items-center justify-center"},me={class:"text-sm font-medium text-teal-600"},ue={class:"flex-1 min-w-0"},fe={class:"flex items-center space-x-2"},ge={class:"text-lg font-medium text-gray-900 truncate"},pe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ye={class:"mt-1"},be={class:"text-sm text-gray-600"},he={class:"text-sm text-gray-500 mt-1"},xe={key:0},ve={class:"flex items-center space-x-3"},_e={key:1,class:"inline-flex items-center px-3 py-2 text-sm text-gray-500 italic"},we={key:2,class:"px-6 py-3 border-t border-gray-200"},Ae={class:"flex items-center justify-between"},ke={class:"text-sm text-gray-700"},Ce={class:"flex space-x-1"},Fe={__name:"Pending",props:{assessments:Object,employees:Array,competencies:Array,filters:Object},setup(i){var _,w;const v=i,N=j(),U=u(()=>{var o;return(o=N.props.auth)==null?void 0:o.user}),V=u(()=>{var t;return(((t=U.value)==null?void 0:t.roles)||[]).some(e=>["Manager","Admin","HR"].includes(e.name))}),$=u(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Pending Assessments",href:null}]),F=u(()=>{const o=[{label:"Back to Dashboard",href:route("assessment-dashboard"),icon:K,variant:"secondary"}];return V.value&&o.push({label:"New Assessment",href:route("competency-assessments.create"),icon:q,variant:"primary"}),o}),d=H({employee_id:((_=v.filters)==null?void 0:_.employee_id)||"",competency_id:((w=v.filters)==null?void 0:w.competency_id)||""}),b=()=>{O.get(route("competency-assessments.pending"),d.value,{preserveState:!0,preserveScroll:!0})},B=()=>{d.value={employee_id:"",competency_id:""},b()},E=o=>{var t;try{const r=(t=j().props.auth)==null?void 0:t.user;return r?o.assessment_type==="self"?r.id===o.employee.user_id:r.id===o.assessor_id:!1}catch(e){return console.error("Error checking assessment permissions:",e),!1}},L=o=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360Â° Feedback"})[o]||o,T=o=>{const t=new Date,e=new Date(o),r=Math.floor((t-e)/(1e3*60));return r<1?"just now":r<60?`${r} minutes ago`:r<1440?`${Math.floor(r/60)} hours ago`:`${Math.floor(r/1440)} days ago`},R=o=>o.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2);return(o,t)=>(n(),h(Q,null,{default:f(()=>[m(z,{title:"Pending Assessments",subtitle:"Assessments waiting to be completed",breadcrumbs:$.value,actions:F.value},{default:f(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("div",null,[t[3]||(t[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee",-1)),P(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.employee_id=e),onChange:b,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[t[2]||(t[2]=s("option",{value:""},"All Employees",-1)),(n(!0),l(g,null,p(i.employees,e=>{var r;return n(),l("option",{key:e.id,value:e.id},a(((r=e.user)==null?void 0:r.name)||"Unknown"),9,ee)}),128))],544),[[S,d.value.employee_id]])]),s("div",null,[t[5]||(t[5]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Competency",-1)),P(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.value.competency_id=e),onChange:b,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[t[4]||(t[4]=s("option",{value:""},"All Competencies",-1)),(n(!0),l(g,null,p(i.competencies,e=>(n(),l("option",{key:e.id,value:e.id},a(e.name),9,se))),128))],544),[[S,d.value.competency_id]])]),s("div",{class:"flex items-end"},[s("button",{onClick:B,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Clear Filters ")])])])]),s("div",te,[s("div",oe,[s("h3",re," Pending Assessments ("+a(i.assessments.total)+") ",1)]),i.assessments.data.length===0?(n(),l("div",ne,[m(c(G),{class:"w-12 h-12 text-green-500 mx-auto mb-4"}),t[6]||(t[6]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Pending Assessments",-1)),t[7]||(t[7]=s("p",{class:"text-gray-500"},"All assessments have been completed.",-1))])):(n(),l("div",ae,[(n(!0),l(g,null,p(i.assessments.data,e=>{var r,A,k,C,M;return n(),l("div",{key:e.id,class:"p-6 hover:bg-gray-50 transition-colors duration-200"},[s("div",le,[s("div",ie,[s("div",de,[s("div",ce,[s("span",me,a(R(((A=(r=e.employee)==null?void 0:r.user)==null?void 0:A.name)||"Unknown")),1)])]),s("div",ue,[s("div",fe,[s("h4",ge,a(((C=(k=e.employee)==null?void 0:k.user)==null?void 0:C.name)||"Unknown"),1),s("span",pe,a(L(e.assessment_type)),1)]),s("div",ye,[s("p",be,[t[8]||(t[8]=s("span",{class:"font-medium"},"Competency:",-1)),y(" "+a((M=e.competency)==null?void 0:M.name),1)]),s("p",he,[y(" Created "+a(T(e.created_at))+" ",1),e.assessor?(n(),l("span",xe," by "+a(e.assessor.name),1)):D("",!0)])])])]),s("div",ve,[m(c(x),{href:o.route("competency-assessments.show",e.id),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},{default:f(()=>[m(c(J),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=y(" View "))]),_:2,__:[9]},1032,["href"]),E(e)?(n(),h(c(x),{key:0,href:o.route("competency-assessments.evaluate",e.id),class:"inline-flex items-center px-3 py-2 bg-teal-500 text-white text-sm font-medium rounded-md hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},{default:f(()=>[m(c(W),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=y(" Complete Assessment "))]),_:2,__:[10]},1032,["href"])):(n(),l("span",_e,a(e.assessment_type==="self"?"Employee only":"Not assigned"),1))])])])}),128))])),i.assessments.links?(n(),l("div",we,[s("div",Ae,[s("div",ke," Showing "+a(i.assessments.from)+" to "+a(i.assessments.to)+" of "+a(i.assessments.total)+" results ",1),s("div",Ce,[(n(!0),l(g,null,p(i.assessments.links,e=>(n(),h(c(x),{key:e.label,href:e.url,class:I(["px-3 py-2 text-sm font-medium rounded-md",e.active?"bg-teal-500 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])])):D("",!0)])]),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{Fe as default};
