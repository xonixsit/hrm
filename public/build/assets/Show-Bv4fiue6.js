import{c as h,o as f,a as t,f as l,Q as w,g as p,h as u,k as r,i as P,t as a,u as x,F as W,r as F}from"./app-DvzBf2V0.js";import{u as Q}from"./useAuth-D0vh8OAs.js";import{a as D,A as q}from"./AuthenticatedLayout-BaXSQYJO.js";import{P as z}from"./PageLayout-V3qJjcA8.js";import{C as g}from"./ContentCard-CONrgGUf.js";import{S as v}from"./StatsCard-lYyV9Sj4.js";import{n as G,m as J}from"./icons-DgsAfupf.js";import{b as K}from"./UsersIcon-D05vTYlR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-DfRUNHzv.js";import"./PageHeader-4K8cpF0C.js";import"./Icon-CF33rAah.js";/* empty css                                                                   *//* empty css                                                                  */import"./ArrowTrendingUpIcon-CHltvl7B.js";import"./ArrowTrendingDownIcon-DDYHGD46.js";import"./ArrowTopRightOnSquareIcon-BGvFQH5A.js";import"./ChartBarIcon-D0L93AIm.js";function X(o,n){return f(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})])}function Y(o,n){return f(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}const Z={class:"space-y-8"},tt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6"},et={class:"text-xs text-gray-500 mt-1"},st={class:"text-xs text-gray-500 mt-1"},nt={class:"text-xs text-gray-500 mt-1"},ot={class:"text-xs text-gray-500 mt-1"},at={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8"},rt={class:"space-y-1"},it={class:"flex justify-between items-center py-3 px-4 bg-gray-50 rounded-lg"},ct={class:"flex items-center space-x-2"},dt={class:"text-sm font-semibold text-gray-900"},lt={class:"flex justify-between items-center py-3 px-4 bg-green-50 rounded-lg"},ut={class:"flex items-center space-x-2"},mt={class:"text-sm font-semibold text-green-900"},ft={class:"flex justify-between items-center py-3 px-4 bg-red-50 rounded-lg"},xt={class:"flex items-center space-x-2"},bt={class:"text-sm font-semibold text-red-900"},ht={class:"flex justify-between items-center py-3 px-4 bg-blue-50 rounded-lg border-2 border-blue-200"},kt={class:"flex items-center space-x-2"},gt={class:"text-lg font-bold text-blue-900"},vt={key:0,class:"text-center py-12"},yt={key:1,class:"space-y-3"},wt={class:"p-4 bg-gradient-to-r from-orange-100 to-orange-50 rounded-lg border-2 border-orange-300 mb-4"},_t={class:"flex justify-between items-center"},pt={class:"flex items-center space-x-2"},Dt={class:"text-lg font-bold text-orange-900"},St={class:"text-xs text-orange-700 mt-1"},Ct={class:"flex items-center space-x-3"},At={class:"w-8 h-8 bg-orange-200 rounded-full flex items-center justify-center"},$t={class:"text-xs font-bold text-orange-700"},Mt={class:"text-sm font-semibold text-orange-900"},jt={class:"text-xs text-orange-700"},Bt={class:"text-right"},Tt={class:"text-sm font-medium text-neutral-900"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},It={class:"space-y-4"},Lt={class:"flex justify-between items-center py-2 border-b border-neutral-200"},Et={class:"text-sm text-neutral-900"},Ot={class:"flex justify-between items-center py-2 border-b border-neutral-200"},Vt={class:"text-sm text-neutral-900"},Rt={class:"flex justify-between items-center py-2"},Ut={class:"text-sm text-neutral-900"},Ht={class:"space-y-4"},Pt={class:"flex justify-between items-center py-2 border-b border-neutral-200"},Wt={class:"text-sm text-neutral-900"},Ft={class:"flex justify-between items-center py-2 border-b border-neutral-200"},Qt={class:"text-sm text-neutral-900"},qt={class:"flex justify-between items-center py-2"},zt={class:"text-sm text-neutral-900"},Gt={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Jt={class:"flex items-center space-x-2"},Kt={class:"text-sm text-yellow-700"},be={__name:"Show",props:{attendance:Object,workDuration:String,breakDuration:String,totalMinutes:Number,breakSessions:Array},setup(o){const n=o,{hasRole:S,hasAnyRole:C}=Q(),A=l(()=>C(["Admin","HR"])),$=l(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Attendance Management",href:route("attendances.index")},{label:"Details",current:!0}]),M=l(()=>{const s=[];return A.value&&s.push({id:"edit",label:"Edit Record",variant:"primary",handler:()=>w.visit(route("attendances.edit",n.attendance.id))},{id:"export",label:"Export",variant:"secondary",handler:()=>window.open(route("attendances.export",n.attendance.id),"_blank")}),S("Admin")&&s.push({id:"delete",label:"Delete",variant:"danger",handler:U}),s}),_=s=>s?new Date(s).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A",m=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",y=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",j=s=>({clocked_in:"Clocked In",clocked_out:"Clocked Out",on_break:"On Break"})[s]||s,B=s=>({clocked_in:"success",clocked_out:"secondary",on_break:"warning"})[s]||"secondary",T=l(()=>{if(!n.workDuration||n.workDuration==="0h 0m")return"0 hours";if(n.workDuration&&n.workDuration.includes("h"))return n.workDuration;const s=parseInt(n.workDuration);return isNaN(s)?"0 hours":`${s}h 0m`}),N=l(()=>{if(!n.attendance.clock_in)return"No clock in recorded";const s=m(n.attendance.clock_in),e=n.attendance.clock_out?m(n.attendance.clock_out):"Still working";return`${s} - ${e}`}),I=l(()=>!n.breakDuration||n.breakDuration==="-"||n.breakDuration==="0h 0m"?"0 minutes":(n.breakDuration&&(n.breakDuration.includes("h")||n.breakDuration.includes("m")),n.breakDuration)),L=l(()=>{const s=n.breakSessions.length;return s===0?"No breaks taken":s===1?"1 break session":`${s} break sessions`}),E=l(()=>{const s=n.breakSessions.length;return s===0?"Continuous work":s===1?"Single break taken":"Multiple breaks"}),O=l(()=>{switch(n.attendance.status){case"clocked_in":return n.attendance.clock_in?`Since ${m(n.attendance.clock_in)}`:"Currently working";case"clocked_out":return n.attendance.clock_out?`At ${m(n.attendance.clock_out)}`:"Work completed";case"on_break":return"Currently on break";default:return"Status unknown"}}),V=s=>{if(!s.start||!s.end)return"—";try{const e=new Date(s.start),c=new Date(s.end)-e,i=Math.floor(c/(1e3*60)),d=Math.floor(i/60),k=i%60;return d>0?`${d}h ${k}m`:`${k}m`}catch(e){return console.error("Error calculating break duration:",e),"—"}},R=l(()=>{if(!n.breakSessions||n.breakSessions.length===0)return"0m";let s=0;n.breakSessions.forEach(c=>{if(c.start&&c.end)try{const i=new Date(c.start),k=new Date(c.end)-i,H=Math.floor(k/(1e3*60));s+=H}catch(i){console.error("Error calculating break duration for session:",c,i)}});const e=Math.floor(s/60),b=s%60;return e>0?`${e}h ${b}m`:`${b}m`}),U=()=>{confirm("Are you sure you want to delete this attendance record? This action cannot be undone.")&&w.delete(route("attendances.destroy",n.attendance.id),{onSuccess:()=>{w.visit(route("attendances.index"))}})};return(s,e)=>(f(),p(q,null,{default:u(()=>{var b,c;return[r(z,{title:"Attendance Details",subtitle:`${((c=(b=o.attendance.employee)==null?void 0:b.user)==null?void 0:c.name)||"Employee"} - ${_(o.attendance.date)}`,breadcrumbs:$.value,actions:M.value},{default:u(()=>[t("div",Z,[t("div",tt,[r(v,{label:"Work Duration",value:T.value,format:"text",icon:"ClockIcon",iconColor:"info",class:"transform hover:scale-105 transition-transform duration-200"},{default:u(()=>[t("div",et,a(N.value),1)]),_:1},8,["value"]),r(v,{label:"Break Duration",value:I.value,format:"text",icon:"PauseIcon",iconColor:"warning",class:"transform hover:scale-105 transition-transform duration-200"},{default:u(()=>[t("div",st,a(L.value),1)]),_:1},8,["value"]),r(v,{label:"Break Sessions",value:o.breakSessions.length.toString(),icon:"ListBulletIcon",iconColor:"success",class:"transform hover:scale-105 transition-transform duration-200"},{default:u(()=>[t("div",nt,a(E.value),1)]),_:1},8,["value"]),r(v,{label:"Status",value:j(o.attendance.status),icon:"CheckCircleIcon",iconColor:B(o.attendance.status),class:"transform hover:scale-105 transition-transform duration-200"},{default:u(()=>[t("div",ot,a(O.value),1)]),_:1},8,["value","iconColor"])]),t("div",at,[r(g,{title:"Time Details",class:"shadow-sm hover:shadow-md transition-shadow duration-200"},{default:u(()=>[t("div",rt,[t("div",it,[t("div",ct,[r(x(G),{class:"w-4 h-4 text-gray-500"}),e[0]||(e[0]=t("span",{class:"text-sm font-medium text-gray-700"},"Date",-1))]),t("span",dt,a(_(o.attendance.date)),1)]),t("div",lt,[t("div",ut,[r(x(Y),{class:"w-4 h-4 text-green-600"}),e[1]||(e[1]=t("span",{class:"text-sm font-medium text-green-700"},"Clock In",-1))]),t("span",mt,a(o.attendance.clock_in?m(o.attendance.clock_in):"—"),1)]),t("div",ft,[t("div",xt,[r(x(X),{class:"w-4 h-4 text-red-600"}),e[2]||(e[2]=t("span",{class:"text-sm font-medium text-red-700"},"Clock Out",-1))]),t("span",bt,a(o.attendance.clock_out?m(o.attendance.clock_out):"—"),1)]),t("div",ht,[t("div",kt,[r(x(K),{class:"w-4 h-4 text-blue-600"}),e[3]||(e[3]=t("span",{class:"text-sm font-medium text-blue-700"},"Total Work Time",-1))]),t("span",gt,a(o.workDuration||"0h 0m"),1)])])]),_:1}),r(g,{title:"Break Sessions",class:"shadow-sm hover:shadow-md transition-shadow duration-200"},{default:u(()=>[o.breakSessions.length===0?(f(),h("div",vt,[r(x(D),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e[4]||(e[4]=t("p",{class:"text-gray-500 font-medium"},"No break sessions recorded",-1)),e[5]||(e[5]=t("p",{class:"text-sm text-gray-400 mt-1"},"All work time was continuous",-1))])):(f(),h("div",yt,[t("div",wt,[t("div",_t,[t("div",pt,[r(x(D),{class:"w-5 h-5 text-orange-600"}),e[6]||(e[6]=t("span",{class:"text-sm font-semibold text-orange-900"},"Total Break Time",-1))]),t("span",Dt,a(R.value),1)]),t("p",St,a(o.breakSessions.length)+" break session"+a(o.breakSessions.length!==1?"s":""),1)]),(f(!0),h(W,null,F(o.breakSessions,(i,d)=>(f(),h("div",{key:d,class:"flex justify-between items-center p-4 bg-orange-50 rounded-lg border border-orange-200 hover:bg-orange-100 transition-colors duration-150"},[t("div",Ct,[t("div",At,[t("span",$t,a(d+1),1)]),t("div",null,[t("p",Mt,"Break "+a(d+1),1),t("p",jt,a(m(i.start))+" - "+a(i.end?m(i.end):"Ongoing"),1)])]),t("div",Bt,[t("p",Tt,a(V(i)),1)])]))),128))]))]),_:1})]),r(g,{title:"Additional Information"},{default:u(()=>{var i,d;return[t("div",Nt,[t("div",It,[t("div",Lt,[e[7]||(e[7]=t("span",{class:"text-sm font-medium text-neutral-600"},"Employee",-1)),t("span",Et,a(((d=(i=o.attendance.employee)==null?void 0:i.user)==null?void 0:d.name)||"Unknown"),1)]),t("div",Ot,[e[8]||(e[8]=t("span",{class:"text-sm font-medium text-neutral-600"},"IP Address",-1)),t("span",Vt,a(o.attendance.ip_address||"—"),1)]),t("div",Rt,[e[9]||(e[9]=t("span",{class:"text-sm font-medium text-neutral-600"},"Location",-1)),t("span",Ut,a(o.attendance.location||"—"),1)])]),t("div",Ht,[t("div",Pt,[e[10]||(e[10]=t("span",{class:"text-sm font-medium text-neutral-600"},"Created",-1)),t("span",Wt,a(y(o.attendance.created_at)),1)]),t("div",Ft,[e[11]||(e[11]=t("span",{class:"text-sm font-medium text-neutral-600"},"Last Updated",-1)),t("span",Qt,a(y(o.attendance.updated_at)),1)]),t("div",qt,[e[12]||(e[12]=t("span",{class:"text-sm font-medium text-neutral-600"},"Notes",-1)),t("span",zt,a(o.attendance.notes||"—"),1)])])])]}),_:1}),o.attendance.editor?(f(),p(g,{key:0,title:"Edit History"},{default:u(()=>[t("div",Gt,[t("div",Jt,[r(x(J),{class:"w-5 h-5 text-yellow-600"}),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-yellow-800"},"This record has been edited",-1)),t("p",Kt," Last edited by "+a(o.attendance.editor.name)+" on "+a(y(o.attendance.updated_at)),1)])])])]),_:1})):P("",!0)])]),_:1},8,["subtitle","breadcrumbs","actions"])]}),_:1}))}};export{be as default};
