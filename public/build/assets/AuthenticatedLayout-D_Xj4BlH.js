import{e as A,f as g,z as Q,B as J,c as m,i as $,o as l,a as o,t as S,y as ae,n as f,u,F as G,r as H,w as te,p as oe,Q as he,g as q,s as K,A as Y,l as ue,q as ie,C as ve,M as re,k as j,h as fe,N as ce,O as ge,d as pe,P as ye,K as ne,R as be}from"./app-BslffEpk.js";import{u as ee}from"./useAuth-Ls_euxq0.js";import{D as se,E as ke,t as we}from"./icons-DiLHOGgH.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as xe}from"./useAccessibility-BtheMhnk.js";const Ae={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},_e={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Te={class:"flex items-start"},Ie={class:"ml-3 flex-1"},Be={class:"mt-1 text-sm text-red-700"},Se={key:0,class:"mt-3"},Ce={__name:"NavigationErrorDisplay",setup(h){const r=A(!1),e=A(""),s=A(null),a=A(null),i=g(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),d=(I,_=null)=>{e.value=I,s.value=_,r.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{b()},1e4)},p=async()=>{if(s.value)try{await s.value()}catch(I){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",I)}b()},b=()=>{r.value=!1,e.value="",s.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return Q(()=>{typeof window<"u"&&(window.showNavigationError=d)}),J(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(I,_)=>r.value?(l(),m("div",Ae,[o("div",_e,[o("div",Te,[_[2]||(_[2]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",Ie,[_[0]||(_[0]=o("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),o("div",Be,S(e.value),1),s.value?(l(),m("div",Se,[o("button",{onClick:p,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},S(i.value),1)])):$("",!0)]),o("div",{class:"ml-4 flex-shrink-0"},[o("button",{onClick:b,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},_[1]||(_[1]=[o("span",{class:"sr-only"},"Close",-1),o("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):$("",!0)}},U=A("light"),V=A("light"),W=A(!1),Z={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function de(){const h=g(()=>W.value?V.value:U.value),r=g(()=>Z[h.value]),e=g(()=>h.value==="dark"),s=g(()=>h.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(t){return console.warn("Failed to detect system theme:",t),"light"}},i=(t,c=!1)=>{try{const E={theme:k(t)?t:"light",useSystem:!!c,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(T){console.warn("Failed to save theme preference:",T);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},d=t=>{if(!(typeof document>"u"))try{const c=document.documentElement,T=k(t)?t:"light";c.classList.remove("theme-light","theme-dark"),c.classList.add(`theme-${T}`),p(T);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:T,config:Z[T]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(c){console.error("Failed to apply theme:",c);try{const T=document.documentElement;T.classList.remove("theme-light","theme-dark"),T.classList.add("theme-light"),p("light")}catch(T){console.error("Failed to apply fallback theme:",T)}}},p=t=>{if(!(typeof document>"u"))try{const c=document.documentElement;t==="dark"?(c.style.setProperty("--color-neutral-50","#0a0a0a"),c.style.setProperty("--color-neutral-100","#111827"),c.style.setProperty("--color-neutral-200","#262626"),c.style.setProperty("--color-neutral-300","#404040"),c.style.setProperty("--color-neutral-400","#525252"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#a3a3a3"),c.style.setProperty("--color-neutral-700","#d4d4d4"),c.style.setProperty("--color-neutral-800","#e5e5e5"),c.style.setProperty("--color-neutral-900","#fafafa"),c.style.setProperty("--color-neutral-950","#ffffff")):(c.style.setProperty("--color-neutral-50","#fafafa"),c.style.setProperty("--color-neutral-100","#f5f5f5"),c.style.setProperty("--color-neutral-200","#e5e5e5"),c.style.setProperty("--color-neutral-300","#d4d4d4"),c.style.setProperty("--color-neutral-400","#a3a3a3"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#525252"),c.style.setProperty("--color-neutral-700","#404040"),c.style.setProperty("--color-neutral-800","#262626"),c.style.setProperty("--color-neutral-900","#111827"),c.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(c){console.warn("Failed to update theme properties:",c)}},b=t=>{d(t)},I=t=>{if(!Z[t]){console.warn(`Theme "${t}" not found`);return}U.value=t,W.value=!1,i(t,!1),b(t)},_=()=>{W.value=!0;const t=a();V.value=t,i(t,!0),b(t)},v=()=>{const t=h.value==="light"?"dark":"light";I(t)},k=t=>Z.hasOwnProperty(t),w=()=>Object.values(Z),N=()=>{},R=()=>{const t=[];if(k(U.value)||t.push(`Invalid current theme: ${U.value}`),k(V.value)||t.push(`Invalid system theme: ${V.value}`),k(h.value)||t.push(`Invalid active theme: ${h.value}`),typeof document<"u"){const c=document.documentElement,T=c.classList.contains("theme-light"),E=c.classList.contains("theme-dark");!T&&!E&&t.push("No theme class found on document root"),T&&E&&t.push("Multiple theme classes found on document root");const P=`theme-${h.value}`;c.classList.contains(P)||t.push(`Expected theme class ${P} not found on document root`)}return{isValid:t.length===0,issues:t}},D=()=>{if(!(typeof document>"u"))try{const t=document.documentElement;return["theme-light","theme-dark"].forEach(T=>{t.classList.remove(T)}),!0}catch(t){return console.warn("Failed to cleanup theme classes:",t),!1}},O=()=>{try{U.value="light",V.value=a(),W.value=!1;try{localStorage.removeItem("theme-preference")}catch(t){console.warn("Failed to clear theme preference from localStorage:",t)}return d("light"),!0}catch(t){return console.error("Failed to reset theme to default:",t),!1}},z=()=>{console.warn("Attempting theme system recovery...");try{if(D(),O())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(t){console.error("Theme system recovery failed:",t);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(c){return console.error("Last resort theme recovery failed:",c),!1}}},y=()=>{try{U.value="light",V.value="light",W.value=!1;try{localStorage.removeItem("theme-preference")}catch(t){console.warn("Failed to clear theme preference:",t)}if(typeof document<"u"){const t=document.documentElement;t.classList.remove("theme-light","theme-dark","dark","light"),t.classList.add("theme-light"),t.style.setProperty("--color-neutral-50","#fafafa"),t.style.setProperty("--color-neutral-100","#f5f5f5"),t.style.setProperty("--color-neutral-200","#e5e5e5"),t.style.setProperty("--color-neutral-300","#d4d4d4"),t.style.setProperty("--color-neutral-400","#a3a3a3"),t.style.setProperty("--color-neutral-500","#6b7280"),t.style.setProperty("--color-neutral-600","#525252"),t.style.setProperty("--color-neutral-700","#404040"),t.style.setProperty("--color-neutral-800","#262626"),t.style.setProperty("--color-neutral-900","#111827"),t.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(t){console.error("Theme initialization failed:",t);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(c){console.error("Emergency theme fallback failed:",c)}return null}};return Q(()=>{y()}),ae(h,t=>{b(t)}),{currentTheme:g(()=>U.value),systemTheme:g(()=>V.value),activeTheme:h,themeConfig:r,isDark:e,isLight:s,isSystemThemePreferred:g(()=>W.value),setTheme:I,toggleTheme:v,useSystemTheme:_,validateTheme:k,getAvailableThemes:w,debugThemeState:N,initializeTheme:y,validateThemeState:R,cleanupThemeClasses:D,resetThemeToDefault:O,recoverThemeSystem:z,cleanupAndApplyTheme:d,themes:g(()=>Z)}}const Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$e={class:"flex justify-between h-16"},Ee={class:"flex items-center space-x-8"},Ne={class:"flex-shrink-0 flex items-center"},Le={class:"hidden md:flex space-x-1"},Pe=["href"],De={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fe={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={class:"p-2"},je={key:0,class:"space-y-1"},Ge={class:"space-y-1"},He=["href"],Qe={class:"space-y-1 mt-1"},Ue=["href"],Ve={class:"space-y-1 mt-1"},We=["href"],Ze={class:"flex items-center space-x-3"},qe={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ye={class:"hidden md:block text-left"},Xe={class:"font-medium"},Ke={class:"p-2"},et={class:"py-1 space-y-1"},tt=["href"],ot={class:"md:hidden px-4 pb-3"},rt={class:"mt-3 space-y-2"},st=["href"],at={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(h){var z;const r=h,{user:e,roles:s}=ee(),{isDark:a,toggleTheme:i}=de(),d=A(!1),p=A(!1),b=A(!1);console.log("IntegratedTopNav - User:",e.value),console.log("IntegratedTopNav - Roles:",s.value),console.log("IntegratedTopNav - Is Admin:",(z=s.value)==null?void 0:z.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const I=g(()=>{var y;return(y=e.value)!=null&&y.name?e.value.name.split(" ").map(t=>t[0]).join("").toUpperCase():"U"}),_=g(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),v=g(()=>{try{const y=s.value||[],t=Array.isArray(y)?y:[],c=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"}],T=t.includes("Admin")||t.includes("Manager")||t.includes("HR"),E=t.includes("Admin");return T&&c.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"competency-assessments.index",label:"All Assessments",category:"management"}),E&&c.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"system-settings.index",label:"System Settings",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"}),c}catch(y){return console.error("Error computing moreNavItems:",y),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"}]}}),k=g(()=>v.value.filter(y=>y.category==="regular")),w=g(()=>v.value.filter(y=>y.category==="management")),N=g(()=>v.value.filter(y=>y.category==="admin")),R=g(()=>[..._.value,...v.value]),D=y=>{var t;return r.currentRoute===y||((t=r.currentRoute)==null?void 0:t.startsWith(y.split(".")[0]))},O=()=>{he.post(route("logout"))};return(y,t)=>{var c,T,E,P;return l(),m("nav",{class:f(["w-full transition-all duration-200 sticky top-0 z-50",u(a)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-white via-white to-blue-50/30 border-b border-gray-200/60 shadow-lg shadow-gray-900/10 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[o("div",Me,[o("div",$e,[o("div",Ee,[o("div",Ne,[o("div",{class:f(["flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200",u(a)?"bg-gray-800/50 border border-gray-700/50":"bg-white/80 border border-gray-200/50 shadow-sm"])},[o("div",{class:f(["w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold",u(a)?"bg-blue-600 text-white":"bg-gradient-to-br from-blue-500 to-blue-600 text-white"])}," HR ",2),o("div",null,[o("h1",{class:f(["text-lg font-bold leading-tight",u(a)?"text-white":"text-gray-900"])}," HR Management ",2),Array.isArray(u(s))&&u(s).includes("Admin")?(l(),m("span",{key:0,class:f(["text-xs px-2 py-0.5 rounded-full font-medium",u(a)?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200"])}," ADMIN ",2)):$("",!0)])],2)]),o("div",Le,[(l(!0),m(G,null,H(_.value,n=>(l(),m("a",{key:n.route,href:y.route(n.route),class:f(["px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2",D(n.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30 shadow-sm":"bg-blue-50 text-blue-700 border border-blue-200/50 shadow-sm":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50 hover:border hover:border-gray-600":"text-gray-700 hover:text-gray-900 hover:bg-white/60 hover:border hover:border-gray-200 hover:shadow-sm"])},[n.route==="dashboard"?(l(),m("svg",De,t[6]||(t[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"},null,-1)]))):n.route==="profile.edit"?(l(),m("svg",Fe,t[7]||(t[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]))):n.route==="attendances.index"?(l(),m("svg",ze,t[8]||(t[8]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(l(),m("svg",Oe,t[9]||(t[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),o("span",null,S(n.label),1)],10,Pe))),128)),o("div",{class:"relative",onMouseenter:t[0]||(t[0]=n=>d.value=!0),onMouseleave:t[1]||(t[1]=n=>d.value=!1)},[o("button",{class:f(["px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2",d.value?u(a)?"bg-gray-700/50 text-white border border-gray-600":"bg-white/60 text-gray-900 border border-gray-200 shadow-sm":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50 hover:border hover:border-gray-600":"text-gray-700 hover:text-gray-900 hover:bg-white/60 hover:border hover:border-gray-200 hover:shadow-sm"])},[t[11]||(t[11]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),t[12]||(t[12]=o("span",null,"More",-1)),(l(),m("svg",{class:f(["w-4 h-4 transition-transform duration-200",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[10]||(t[10]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(o("div",{class:f(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",u(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",Re,[v.value.length>0?(l(),m("div",je,[o("div",Ge,[(l(!0),m(G,null,H(k.value,n=>(l(),m("a",{key:n.route,href:y.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[t[13]||(t[13]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o("span",null,S(n.label),1)],10,He))),128))]),w.value.length>0?(l(),m("div",{key:0,class:f(["border-t pt-2 mt-2",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:f(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",u(a)?"text-gray-400":"text-gray-500"])}," Management ",2),o("div",Qe,[(l(!0),m(G,null,H(w.value,n=>(l(),m("a",{key:n.route,href:y.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[t[14]||(t[14]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o("span",null,S(n.label),1)],10,Ue))),128))])],2)):$("",!0),N.value.length>0?(l(),m("div",{key:1,class:f(["border-t pt-2 mt-2",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:f(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",u(a)?"text-red-400":"text-red-600"])},t[15]||(t[15]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),o("span",null,"Admin",-1)]),2),o("div",Ve,[(l(!0),m(G,null,H(N.value,n=>(l(),m("a",{key:n.route,href:y.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?u(a)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[t[16]||(t[16]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),o("span",null,S(n.label),1)],10,We))),128))])],2)):$("",!0)])):$("",!0)])],2),[[oe,d.value]])],32)])]),o("div",Ze,[o("button",{onClick:t[2]||(t[2]=(...n)=>u(i)&&u(i)(...n)),class:f(["p-2.5 rounded-lg transition-all duration-200 flex items-center justify-center",u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50 border border-transparent hover:border-gray-600":"text-gray-500 hover:text-gray-700 hover:bg-white/60 border border-transparent hover:border-gray-200 hover:shadow-sm"])},[u(a)?(l(),m("svg",qe,t[17]||(t[17]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(l(),m("svg",Je,t[18]||(t[18]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])))],2),o("div",{class:"relative",onMouseenter:t[3]||(t[3]=n=>p.value=!0),onMouseleave:t[4]||(t[4]=n=>p.value=!1)},[o("button",{class:f(["flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",p.value?u(a)?"bg-gray-700/50 text-white border border-gray-600":"bg-white/60 text-gray-900 border border-gray-200 shadow-sm":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50 hover:border hover:border-gray-600":"text-gray-700 hover:text-gray-900 hover:bg-white/60 hover:border hover:border-gray-200 hover:shadow-sm"])},[o("div",{class:f(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold shadow-sm",u(a)?"bg-gradient-to-br from-blue-600 to-blue-700 text-white":"bg-gradient-to-br from-blue-500 to-blue-600 text-white"])},S(I.value),3),o("div",Ye,[o("div",Xe,S((c=u(e))==null?void 0:c.name),1),o("div",{class:f(["text-xs",u(a)?"text-gray-400":"text-gray-500"])},S(((T=u(s))==null?void 0:T.join(", "))||"User"),3)]),(l(),m("svg",{class:f(["w-4 h-4 transition-transform duration-200",{"rotate-180":p.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[19]||(t[19]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(o("div",{class:f(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",u(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",Ke,[o("div",{class:f(["px-3 py-2 border-b",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:f(["font-medium",u(a)?"text-white":"text-gray-900"])},S((E=u(e))==null?void 0:E.name),3),o("div",{class:f(["text-sm",u(a)?"text-gray-400":"text-gray-500"])},S((P=u(e))==null?void 0:P.email),3)],2),o("div",et,[o("a",{href:y.route("profile.edit"),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},t[20]||(t[20]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),o("span",null,"Profile Settings",-1)]),10,tt),o("button",{onClick:O,class:f(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},t[21]||(t[21]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"Sign Out",-1)]))])])],2),[[oe,p.value]])],32)])])]),o("div",ot,[o("button",{onClick:t[5]||(t[5]=n=>b.value=!b.value),class:f(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",u(a)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[t[23]||(t[23]=o("span",null,"Menu",-1)),(l(),m("svg",{class:f(["w-5 h-5 transition-transform duration-200",{"rotate-180":b.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[22]||(t[22]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(o("div",rt,[(l(!0),m(G,null,H(R.value,n=>(l(),m("a",{key:n.route,href:y.route(n.route),class:f(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},S(n.label),11,st))),128))],512),[[oe,b.value]])])],2)}}};function nt(h,r){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function lt(h,r){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const it=["aria-live"],ct={class:"toast-content"},ut={key:0,class:"toast-icon"},dt={class:"toast-message"},mt={key:0,class:"toast-title"},ht={class:"toast-text"},vt={key:1,class:"toast-actions"},ft=["aria-label"],gt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:h=>["success","error","warning","info","loading"].includes(h)},position:{type:String,default:"top-right",validator:h=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(h)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:h=>["low","normal","high"].includes(h)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:h=>["sm","md","lg"].includes(h)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(h,{expose:r,emit:e}){const s=h,a=e,i=A(!1),d=A(null),p=A(null),b=A(100),I=A(!1),_=A(0),v=A(0),k=g(()=>se("x-mark")),w=g(()=>{if(s.icon)return se(s.icon);const x={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return se(x[s.type]||x.info)}),N=g(()=>["toast-notification",`toast-notification--${s.type}`,`toast-notification--${s.size}`,`toast-notification--${s.position}`,{"toast-notification--with-title":s.title,"toast-notification--persistent":s.persistent,"toast-notification--with-action":s.actionText}]),R=g(()=>({zIndex:s.zIndex})),D=g(()=>["w-5 h-5",{"animate-spin":s.type==="loading"}]),O=g(()=>s.closable||s.actionText),z=g(()=>[`toast-progress--${s.type}`]),y=g(()=>({width:`${b.value}%`})),t=()=>{i.value=!0,s.sound&&C(),!s.persistent&&s.duration>0&&E()},c=()=>{i.value=!1,M(),a("close")},T=()=>{a("action"),s.persistent||c()},E=()=>{s.duration<=0||(_.value=Date.now(),v.value=s.duration,d.value=setTimeout(()=>{c()},s.duration),P())},P=()=>{if(!s.showProgress)return;const x=Date.now(),F=()=>{if(!i.value||I.value)return;const me=Date.now()-x,le=Math.max(0,100-me/s.duration*100);b.value=le,le>0&&(p.value=requestAnimationFrame(F))};F()},n=()=>{if(!d.value||s.persistent)return;I.value=!0,clearTimeout(d.value),cancelAnimationFrame(p.value);const x=Date.now()-_.value;v.value=Math.max(0,s.duration-x)},B=()=>{!I.value||s.persistent||(I.value=!1,v.value>0&&(_.value=Date.now(),d.value=setTimeout(()=>{c()},v.value),P()))},M=()=>{d.value&&(clearTimeout(d.value),d.value=null),p.value&&(cancelAnimationFrame(p.value),p.value=null)},C=()=>{try{const x=new Audio,F={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};x.src=F[s.type]||F.info,x.volume=.3,x.play().catch(()=>{})}catch{}};return Q(()=>{t()}),J(()=>{M()}),ae(()=>s.duration,()=>{i.value&&!s.persistent&&(M(),E())}),r({show:t,close:c,pauseTimer:n,resumeTimer:B}),(x,F)=>(l(),q(ve,{to:"body"},[i.value?(l(),m("div",{key:0,class:f(N.value),style:ie(R.value),role:"alert","aria-live":h.priority==="high"?"assertive":"polite",onMouseenter:n,onMouseleave:B},[o("div",ct,[h.showIcon?(l(),m("div",ut,[(l(),q(K(w.value),{class:f(D.value)},null,8,["class"]))])):$("",!0),o("div",dt,[h.title?(l(),m("div",mt,S(h.title),1)):$("",!0),o("div",ht,[Y(x.$slots,"default",{},()=>[ue(S(h.message),1)],!0)])]),O.value?(l(),m("div",vt,[h.actionText?(l(),m("button",{key:0,onClick:T,class:"toast-action-button"},S(h.actionText),1)):$("",!0),h.closable?(l(),m("button",{key:1,onClick:c,class:"toast-close-button","aria-label":h.closeLabel},[(l(),q(K(k.value),{class:"w-4 h-4"}))],8,ft)):$("",!0)])):$("",!0)]),h.showProgress&&h.duration>0?(l(),m("div",{key:0,class:f(["toast-progress",z.value]),style:ie(y.value)},null,6)):$("",!0)],46,it)):$("",!0)]))}},pt=X(gt,[["__scopeId","data-v-11baa49e"]]);class yt{constructor(){this.notifications=re([]),this.maxNotifications=A(5),this.defaultDuration=A(5e3),this.positions=re({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=re({enabled:!0,volume:.3})}add(r){const e=this.generateId(),s=r.position||"top-right",a={id:e,message:r.message||"",title:r.title||"",type:r.type||"info",position:s,duration:r.duration!==void 0?r.duration:this.defaultDuration.value,persistent:r.persistent||!1,closable:r.closable!==!1,showIcon:r.showIcon!==!1,showProgress:r.showProgress!==!1,actionText:r.actionText||"",icon:r.icon||"",size:r.size||"md",sound:r.sound!==!1&&this.sounds.enabled,priority:r.priority||"normal",zIndex:r.zIndex||1e3,createdAt:Date.now(),onAction:r.onAction||null,onClose:r.onClose||null,component:r.component||null,props:r.props||{}};return this.notifications.push(a),this.positions[s].push(a),this.manageQueueSize(s),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(e)},a.duration),e}remove(r){const e=this.notifications.find(d=>d.id===r);if(!e)return;const s=this.notifications.findIndex(d=>d.id===r);s>-1&&this.notifications.splice(s,1);const a=this.positions[e.position],i=a.findIndex(d=>d.id===r);i>-1&&a.splice(i,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(r=>{this.positions[r].splice(0)})}clearPosition(r){[...this.positions[r]].forEach(s=>{this.remove(s.id)})}clearType(r){this.notifications.filter(s=>s.type===r).forEach(s=>{this.remove(s.id)})}update(r,e){const s=this.notifications.find(a=>a.id===r);s&&Object.assign(s,e)}getByPosition(r){return this.positions[r]||[]}getByType(r){return this.notifications.filter(e=>e.type===r)}getById(r){return this.notifications.find(e=>e.id===r)}exists(r){return this.notifications.some(e=>e.id===r)}count(){return this.notifications.length}countByPosition(r){var e;return((e=this.positions[r])==null?void 0:e.length)||0}setMaxNotifications(r){this.maxNotifications.value=r,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(r){this.defaultDuration.value=r}setSoundsEnabled(r){this.sounds.enabled=r}setSoundVolume(r){this.sounds.volume=Math.max(0,Math.min(1,r))}pauseAll(){this.notifications.forEach(r=>{r.pauseTimer&&r.pauseTimer()})}resumeAll(){this.notifications.forEach(r=>{r.resumeTimer&&r.resumeTimer()})}success(r,e={}){return this.add({message:r,type:"success",...e})}error(r,e={}){return this.add({message:r,type:"error",persistent:e.persistent!==!1,...e})}warning(r,e={}){return this.add({message:r,type:"warning",...e})}info(r,e={}){return this.add({message:r,type:"info",...e})}loading(r,e={}){return this.add({message:r,type:"loading",persistent:!0,closable:!1,...e})}confirm(r={}){return new Promise(e=>{const s=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:r.title||"Confirm Action",description:r.message||"Are you sure you want to proceed?",confirmText:r.confirmText||"Confirm",cancelText:r.cancelText||"Cancel",...r},onAction:a=>{this.remove(s),e(a==="confirm")},onClose:()=>{e(!1)}})})}alert(r,e={}){return new Promise(s=>{const a=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:r,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(a),s(!0)},onClose:()=>{s(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(r){const e=this.positions[r];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(a=>{const i=this.notifications.findIndex(d=>d.id===a.id);i>-1&&this.notifications.splice(i,1)})}}const L=new yt,bt={class:"notification-container"},kt={__name:"NotificationContainer",setup(h,{expose:r}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];g(()=>L.notifications.filter(v=>!v.component));const s=g(()=>L.notifications.filter(v=>v.component)),a=v=>{const k="fixed z-50 pointer-events-none",w={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${k} ${w[v]||w["top-right"]}`},i=v=>L.getByPosition(v),d=v=>v.includes("left")?"slide-left":v.includes("right")?"slide-right":v.includes("center")?"slide-center":"slide-right",p=v=>{L.remove(v)},b=(v,k="action")=>{const w=L.getById(v);w!=null&&w.onAction&&w.onAction(k)},I=()=>{window.notify={success:(v,k)=>L.success(v,k),error:(v,k)=>L.error(v,k),warning:(v,k)=>L.warning(v,k),info:(v,k)=>L.info(v,k),loading:(v,k)=>L.loading(v,k),confirm:v=>L.confirm(v),alert:(v,k)=>L.alert(v,k),clear:()=>L.clear(),remove:v=>L.remove(v)}},_=()=>{window.notify&&delete window.notify};return Q(()=>{I()}),J(()=>{_()}),r({notificationQueue:L,notify:window.notify}),(v,k)=>(l(),m("div",bt,[(l(),m(G,null,H(e,w=>o("div",{key:w,class:f(a(w))},[j(ge,{name:d(w),tag:"div",class:"space-y-2"},{default:fe(()=>[(l(!0),m(G,null,H(i(w),N=>(l(),q(pt,ce({key:N.id},{ref_for:!0},N,{onClose:R=>p(N.id),onAction:R=>b(N.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(l(!0),m(G,null,H(s.value,w=>(l(),q(K(w.component||"NotificationModal"),ce({key:w.id,ref_for:!0},w.props,{onClose:N=>p(w.id),onConfirm:N=>b(w.id,"confirm"),onCancel:N=>b(w.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},wt=X(kt,[["__scopeId","data-v-67e6c621"]]),xt={class:"floating-attendance-widget"},At={class:"status-indicator"},_t={class:"time-info"},Tt={class:"time-display"},It={class:"time-label-mini"},Bt={class:"widget-header"},St={class:"status-info"},Ct={class:"status-text"},Mt={class:"timer-section"},$t={class:"timer-value"},Et={class:"timer-label"},Nt={class:"quick-actions"},Lt=["disabled"],Pt=["disabled"],Dt={class:"quick-stats"},Ft={class:"stat"},zt={class:"stat-value"},Ot={class:"stat"},Rt={class:"stat-value"},jt={__name:"FloatingAttendanceWidget",setup(h){const r=A(!1),e=A({clockedIn:!1,onBreak:!1,clockInTime:null}),s=A(!1),a=A("0h 0m 0s"),i=A(null),d=()=>{try{const n={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:i.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(n))}catch(n){console.warn("Failed to save attendance state to localStorage:",n)}},p=()=>{try{const n=localStorage.getItem("floating-attendance-state");if(n){const B=JSON.parse(n),M=new Date(B.lastUpdate);if((new Date-M)/(1e3*60)<5)return e.value.clockedIn=B.clockedIn||!1,e.value.onBreak=B.onBreak||!1,e.value.clockInTime=B.clockInTime||null,i.value=B.breakStartTime||null,!0}}catch(n){console.warn("Failed to load attendance state from localStorage:",n)}return!1};let b=null;const I=g(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),_=g(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),v=g(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),k=g(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),w=g(()=>s.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),N=g(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),R=g(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const n=new Date(e.value.clockInTime),M=new Date-n,C=Math.floor(M/(1e3*60)),x=Math.floor(C/60),F=C%60;return`${x}h ${F}m`}),D=g(()=>{if(e.value.onBreak&&i.value){const n=new Date(i.value);if(isNaN(n.getTime()))return"0h 0m 1s";{const M=Math.max(0,new Date-n),C=Math.floor(M/(1e3*60*60)),x=Math.floor(M%(1e3*60*60)/(1e3*60)),F=Math.floor(M%(1e3*60)/1e3);return`${C}h ${x}m ${F}s`}}return"0h 0m"});g(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const O=()=>{r.value=!r.value},z=()=>{if(e.value.clockedIn&&e.value.clockInTime){const n=new Date;let B;e.value.onBreak&&i.value?B=new Date(i.value):B=new Date(e.value.clockInTime);const M=n-B,C=Math.floor(M/(1e3*60*60)),x=Math.floor(M%(1e3*60*60)/(1e3*60)),F=Math.floor(M%(1e3*60)/1e3);a.value=`${C}h ${x}m ${F}s`}else a.value="0h 0m 0s"},y=async()=>{try{if(s.value=!0,e.value.clockedIn){const n=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,i.value=null,a.value="0h 0m 0s",d(),P()}else{const n=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=n.data.clock_in_time||new Date().toISOString(),d(),P()}}catch(n){console.error("Clock in/out failed:",n),alert("Action failed: "+n.message)}finally{s.value=!1}},t=async()=>{try{if(s.value=!0,e.value.onBreak){const n=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,i.value=null,d(),P()}else{i.value=new Date().toISOString(),e.value.onBreak=!0;const n=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});n.data.break_start_time&&(i.value=n.data.break_start_time),d(),P()}}catch(n){console.error("Break action failed:",n),alert("Action failed: "+n.message)}finally{s.value=!1}},c=async()=>{var n,B;try{const C=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=C.clocked_in||!1,e.value.onBreak=C.on_break||!1,e.value.clockInTime=C.clock_in_time||null,C.on_break)if(C.break_start_time)i.value=C.break_start_time;else if((n=C.current_session)!=null&&n.current_break_start)i.value=C.current_session.current_break_start;else if((B=C.current_session)!=null&&B.break_sessions&&C.current_session.break_sessions.length>0){const x=C.current_session.break_sessions[C.current_session.break_sessions.length-1];x&&!x.end&&(i.value=x.start)}else i.value||(i.value=new Date().toISOString());else i.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:i.value})}catch(M){console.error("Failed to fetch attendance status:",M)}},T=n=>{n.key==="attendance-update"&&c()},E=n=>{console.log("FloatingWidget: Received attendance state change:",n.detail);const{clockedIn:B,onBreak:M,clockInTime:C,breakStartTime:x}=n.detail;e.value.clockedIn=B,e.value.onBreak=M,e.value.clockInTime=C,M&&x?i.value=x:M||(i.value=null),d(),z(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:i.value,eventBreakStartTime:x})},P=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(n){console.warn("Failed to broadcast attendance update:",n)}};return Q(async()=>{p()&&z(),await c(),d(),z(),b=setInterval(z,1e3),window.addEventListener("storage",T),window.addEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners registered")}),J(()=>{b&&clearInterval(b),window.removeEventListener("storage",T),window.removeEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners removed")}),(n,B)=>(l(),m("div",xt,[r.value?$("",!0):(l(),m("div",{key:0,onClick:O,class:f(["floating-button",k.value])},[o("div",At,[o("div",{class:f(v.value)},null,2)]),o("div",_t,[o("div",Tt,S(a.value),1),o("div",It,S(_.value),1)]),j(u(ke),{class:"w-4 h-4 expand-icon"})],2)),r.value?(l(),m("div",{key:1,class:"expanded-widget",onClick:B[0]||(B[0]=pe(()=>{},["stop"]))},[o("div",Bt,[o("div",St,[o("div",{class:f(v.value)},null,2),o("span",Ct,S(I.value),1)]),o("button",{onClick:O,class:"minimize-btn",title:"Minimize"},[j(u(we),{class:"w-4 h-4"})])]),o("div",Mt,[o("div",$t,S(a.value),1),o("div",Et,S(_.value),1)]),o("div",Nt,[o("button",{onClick:y,disabled:s.value,class:f(N.value)},S(w.value),11,Lt),e.value.clockedIn?(l(),m("button",{key:0,onClick:t,disabled:s.value,class:"break-action"},[(l(),q(K(e.value.onBreak?u(lt):u(nt)),{class:"w-3 h-3"})),ue(" "+S(e.value.onBreak?"End":"Break"),1)],8,Pt)):$("",!0)]),o("div",Dt,[o("div",Ft,[o("span",zt,S(R.value),1),B[1]||(B[1]=o("span",{class:"stat-label"},"Today",-1))]),o("div",Ot,[o("span",Rt,S(D.value),1),B[2]||(B[2]=o("span",{class:"stat-label"},"Break",-1))])])])):$("",!0),r.value?(l(),m("div",{key:2,class:"backdrop",onClick:O})):$("",!0)]))}},Gt=X(jt,[["__scopeId","data-v-421365b8"]]),Ht={class:"skip-links","aria-label":"Skip navigation links"},Qt=["href","onClick"],Ut={__name:"SkipLinks",setup(h){const{skipLinks:r,handleSkipLinkClick:e}=xe();return(s,a)=>(l(),m("div",Ht,[(l(!0),m(G,null,H(u(r),i=>(l(),m("a",{key:i.href,href:i.href,class:"skip-link sr-only-focusable",onClick:d=>u(e)(d,i.href)},S(i.label),9,Qt))),128))]))}},Vt=X(Ut,[["__scopeId","data-v-f9a7b518"]]),Wt={class:"live-regions"},Zt={__name:"LiveRegion",setup(h){const r=A(null),e=A(null),s=A(null);return Q(()=>{ye.init()}),(a,i)=>(l(),m("div",Wt,[o("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:r},null,512),o("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),o("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:s},null,512)]))}},qt=X(Zt,[["__scopeId","data-v-94955163"]]);function Jt(){const{props:h}=ne(),{user:r}=ee();let e;const s=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(i=>{var p;const d=((p=r.value)==null?void 0:p.name)||"Employee";i.showNotification(`Hi ${d}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},a=()=>{const i=new Date,d=new Date(h.auth.user.clock_in_time);(isNaN(d.getTime())||i.getTime()-d.getTime()>5*60*1e3)&&s()};Q(()=>{a(),e=setInterval(a,5*60*1e3)}),J(()=>{clearInterval(e)})}function Yt(){const{isAuthenticated:h,user:r}=ee(),e=ne();let s=null;const a=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(d=>{var b;const p=((b=r.value)==null?void 0:b.name)||"Employee";d.showNotification(`Hi ${p}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},i=()=>{if(!h.value)return;const d=e.props.auth.user.todays_attendance;if(d&&d.clock_in_time&&!d.clock_out_time){const p=new Date(d.clock_in_time);(new Date-p)/1e3/60/60>=7.5&&a()}};Q(()=>{s=setInterval(i,5*60*1e3),i()}),J(()=>{s&&clearInterval(s)})}function Xt(){const h=ne();return ae(()=>h.props.flash,r=>{!r||!window.notify||(r.success&&window.notify.success(r.success),r.error&&window.notify.error(r.error),r.warning&&window.notify.warning(r.warning),r.info&&window.notify.info(r.info))},{immediate:!0,deep:!0}),{flash:h.props.flash}}const Kt={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},eo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},to={key:0,class:"flex items-center space-x-3"},oo={id:"main-content",class:"relative",role:"main","aria-label":"Main content",tabindex:"-1"},ro={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},co={__name:"AuthenticatedLayout",setup(h){const r=be();A("desktop");const{getUserProperty:e,getAuthError:s}=ee(),{isDark:a,initializeTheme:i}=de();Jt(),Yt(),Xt(),Q(()=>{i()}),g(()=>e("name","User")),g(()=>e("email",""));const d=g(()=>s()),p=g(()=>!!d.value),b=g(()=>{try{return route().current()||""}catch(I){return console.warn("[LAYOUT] Route helper not available:",I),window.location.pathname.replace("/","")||"dashboard"}});return g(()=>!!r.header),(I,_)=>(l(),m("div",null,[j(Vt),j(qt),j(Ce),j(wt),j(Gt),p.value?(l(),m("div",Kt,[_[0]||(_[0]=o("p",{class:"font-semibold"},"Authentication Error:",-1)),o("p",null,S(d.value),1),_[1]||(_[1]=o("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):$("",!0),j(at,{"current-route":b.value},null,8,["current-route"]),o("div",{class:f(["min-h-screen transition-all duration-300",u(a)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-blue-50/30"])},[u(r).header?(l(),m("header",{key:0,class:f(["border-b transition-all duration-200 backdrop-blur-sm",u(a)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[o("div",eo,[o("div",{class:f(["flex items-center justify-between",u(a)?"text-white":"text-gray-900"])},[o("div",null,[o("h1",{class:f(["text-2xl font-bold transition-colors duration-200",u(a)?"text-white":"text-gray-900"])},[Y(I.$slots,"header")],2),u(r).subtitle?(l(),m("div",{key:0,class:f(["mt-1 text-sm",u(a)?"text-gray-300":"text-gray-600"])},[Y(I.$slots,"subtitle")],2)):$("",!0)]),u(r).headerActions?(l(),m("div",to,[Y(I.$slots,"headerActions")])):$("",!0)],2)])],2)):$("",!0),o("main",oo,[o("div",ro,[Y(I.$slots,"default")])])],2)]))}};export{co as _,nt as a,de as b,L as n,lt as r,Xt as u};
