import{e as x,f as v,z as F,B as J,c as p,i as B,o as h,a as o,t as S,K as ee,l as X,E as ue,F as V,y as ae,g as Z,s as K,n as M,A as se,q as ie,C as de,M as te,r as Y,k as D,h as me,N as le,O as fe,u as L,d as ve,P as he,R as pe}from"./app-D8Qzje7k.js";import{D as oe,E as ge,t as ye}from"./icons-CD_0OP_b.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ke}from"./useAccessibility-Cowu9s3D.js";import{u as ne}from"./useAuth-DnBXm9jN.js";const we={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},be={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},xe={class:"flex items-start"},_e={class:"ml-3 flex-1"},Ae={class:"mt-1 text-sm text-red-700"},Te={key:0,class:"mt-3"},Ie={__name:"NavigationErrorDisplay",setup(u){const t=x(!1),e=x(""),s=x(null),i=x(null),n=v(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),l=(r,I=null)=>{e.value=r,s.value=I,t.value=!0,i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{d()},1e4)},k=async()=>{if(s.value)try{await s.value()}catch(r){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",r)}d()},d=()=>{t.value=!1,e.value="",s.value=null,i.value&&(clearTimeout(i.value),i.value=null)};return F(()=>{typeof window<"u"&&(window.showNavigationError=l)}),J(()=>{typeof window<"u"&&delete window.showNavigationError,i.value&&clearTimeout(i.value)}),(r,I)=>t.value?(h(),p("div",we,[o("div",be,[o("div",xe,[I[2]||(I[2]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",_e,[I[0]||(I[0]=o("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),o("div",Ae,S(e.value),1),s.value?(h(),p("div",Te,[o("button",{onClick:k,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},S(n.value),1)])):B("",!0)]),o("div",{class:"ml-4 flex-shrink-0"},[o("button",{onClick:d,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},I[1]||(I[1]=[o("span",{class:"sr-only"},"Close",-1),o("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):B("",!0)}},Se={class:"w-full border-b bg-white border-gray-200 sticky top-0 z-50"},Be={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ce={class:"flex justify-between h-16"},Ee={class:"flex items-center space-x-8"},$e={class:"flex-shrink-0"},Ne={class:"text-xl font-bold text-gray-900"},Me={key:0,class:"ml-2 text-xs bg-red-500 text-white px-2 py-1 rounded"},Pe={class:"hidden md:flex space-x-1"},Le={class:"relative group"},De={class:"absolute left-0 mt-1 w-56 rounded-md shadow-lg bg-white border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50"},Fe={class:"py-1"},Oe={class:"flex items-center space-x-4"},Re={class:"relative group"},ze={class:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},Ge={class:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-medium"},Ue={class:"hidden md:block"},Qe={__name:"SimpleTopNav",setup(u){const t=ee(),e=v(()=>{var d;return((d=t.props.auth)==null?void 0:d.user)||null}),s=v(()=>{var d;return((d=e.value)==null?void 0:d.roles)||[]}),i=v(()=>{try{return Array.isArray(s.value)&&s.value.includes("Admin")}catch{return!1}}),n=v(()=>{try{const d=s.value;return Array.isArray(d)&&(d.includes("Admin")||d.includes("Manager")||d.includes("HR"))}catch{return!1}}),l=v(()=>{var d;return((d=e.value)==null?void 0:d.name)||"User"}),k=v(()=>{try{return l.value.split(" ").map(r=>r[0]).join("").toUpperCase()}catch{return"U"}});return console.log("SimpleTopNav - User:",e.value),console.log("SimpleTopNav - Roles:",s.value),console.log("SimpleTopNav - Is Admin:",i.value),console.log("SimpleTopNav - Is Management:",n.value),(d,r)=>(h(),p("nav",Se,[o("div",Be,[o("div",Ce,[o("div",Ee,[o("div",$e,[o("h1",Ne,[r[0]||(r[0]=X(" HR Management ")),i.value?(h(),p("span",Me," ADMIN ")):B("",!0)])]),o("div",Pe,[r[12]||(r[12]=ue('<a href="/dashboard" class="px-3 py-2 rounded-md text-sm font-medium bg-blue-100 text-blue-700"> Dashboard </a><a href="/profile" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"> My Profile </a><a href="/attendances" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"> Time Tracking </a><a href="/leaves" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"> Leave Requests </a><a href="/competency-assessments/my-assessments" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"> My Assessments </a>',5)),o("div",Le,[r[11]||(r[11]=o("button",{class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center"},[X(" More "),o("svg",{class:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),o("div",De,[o("div",Fe,[r[8]||(r[8]=o("a",{href:"/work-reports",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Work Reports",-1)),r[9]||(r[9]=o("a",{href:"/work-reports/leaderboard",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Leaderboard",-1)),r[10]||(r[10]=o("a",{href:"/feedbacks",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Feedback",-1)),n.value?(h(),p(V,{key:0},[r[1]||(r[1]=o("div",{class:"border-t border-gray-100 my-1"},null,-1)),r[2]||(r[2]=o("a",{href:"/employees",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Employee Management",-1)),r[3]||(r[3]=o("a",{href:"/competency-assessments",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"All Assessments",-1))],64)):B("",!0),i.value?(h(),p(V,{key:1},[r[4]||(r[4]=o("div",{class:"border-t border-gray-100 my-1"},null,-1)),r[5]||(r[5]=o("a",{href:"/admin/roles",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Role Management",-1)),r[6]||(r[6]=o("a",{href:"/system-settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"System Settings",-1)),r[7]||(r[7]=o("a",{href:"/organizational-analytics",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Analytics",-1))],64)):B("",!0)])])])])]),o("div",Oe,[r[15]||(r[15]=o("button",{class:"p-2 rounded-md text-gray-500 hover:bg-gray-100"},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),o("div",Re,[o("button",ze,[o("div",Ge,S(k.value),1),o("span",Ue,S(l.value),1),r[13]||(r[13]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),r[14]||(r[14]=o("div",{class:"absolute right-0 mt-1 w-48 rounded-md shadow-lg bg-white border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50"},[o("div",{class:"py-1"},[o("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Profile Settings"),o("form",{method:"POST",action:"/logout",class:"inline"},[o("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-red-50"},"Sign Out")])])],-1))])])])])]))}};function We(u,t){return h(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function je(u,t){return h(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const He=["aria-live"],Ve={class:"toast-content"},Ze={key:0,class:"toast-icon"},Je={class:"toast-message"},qe={key:0,class:"toast-title"},Ye={class:"toast-text"},Xe={key:1,class:"toast-actions"},Ke=["aria-label"],et={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:u=>["success","error","warning","info","loading"].includes(u)},position:{type:String,default:"top-right",validator:u=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(u)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:u=>["low","normal","high"].includes(u)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:u=>["sm","md","lg"].includes(u)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(u,{expose:t,emit:e}){const s=u,i=e,n=x(!1),l=x(null),k=x(null),d=x(100),r=x(!1),I=x(0),f=x(0),y=v(()=>oe("x-mark")),b=v(()=>{if(s.icon)return oe(s.icon);const g={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return oe(g[s.type]||g.info)}),$=v(()=>["toast-notification",`toast-notification--${s.type}`,`toast-notification--${s.size}`,`toast-notification--${s.position}`,{"toast-notification--with-title":s.title,"toast-notification--persistent":s.persistent,"toast-notification--with-action":s.actionText}]),z=v(()=>({zIndex:s.zIndex})),Q=v(()=>["w-5 h-5",{"animate-spin":s.type==="loading"}]),O=v(()=>s.closable||s.actionText),R=v(()=>[`toast-progress--${s.type}`]),W=v(()=>({width:`${d.value}%`})),a=()=>{n.value=!0,s.sound&&_(),!s.persistent&&s.duration>0&&E()},c=()=>{n.value=!1,T(),i("close")},A=()=>{i("action"),s.persistent||c()},E=()=>{s.duration<=0||(I.value=Date.now(),f.value=s.duration,l.value=setTimeout(()=>{c()},s.duration),P())},P=()=>{if(!s.showProgress)return;const g=Date.now(),N=()=>{if(!n.value||r.value)return;const ce=Date.now()-g,re=Math.max(0,100-ce/s.duration*100);d.value=re,re>0&&(k.value=requestAnimationFrame(N))};N()},m=()=>{if(!l.value||s.persistent)return;r.value=!0,clearTimeout(l.value),cancelAnimationFrame(k.value);const g=Date.now()-I.value;f.value=Math.max(0,s.duration-g)},w=()=>{!r.value||s.persistent||(r.value=!1,f.value>0&&(I.value=Date.now(),l.value=setTimeout(()=>{c()},f.value),P()))},T=()=>{l.value&&(clearTimeout(l.value),l.value=null),k.value&&(cancelAnimationFrame(k.value),k.value=null)},_=()=>{try{const g=new Audio,N={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};g.src=N[s.type]||N.info,g.volume=.3,g.play().catch(()=>{})}catch{}};return F(()=>{a()}),J(()=>{T()}),ae(()=>s.duration,()=>{n.value&&!s.persistent&&(T(),E())}),t({show:a,close:c,pauseTimer:m,resumeTimer:w}),(g,N)=>(h(),Z(de,{to:"body"},[n.value?(h(),p("div",{key:0,class:M($.value),style:ie(z.value),role:"alert","aria-live":u.priority==="high"?"assertive":"polite",onMouseenter:m,onMouseleave:w},[o("div",Ve,[u.showIcon?(h(),p("div",Ze,[(h(),Z(K(b.value),{class:M(Q.value)},null,8,["class"]))])):B("",!0),o("div",Je,[u.title?(h(),p("div",qe,S(u.title),1)):B("",!0),o("div",Ye,[se(g.$slots,"default",{},()=>[X(S(u.message),1)],!0)])]),O.value?(h(),p("div",Xe,[u.actionText?(h(),p("button",{key:0,onClick:A,class:"toast-action-button"},S(u.actionText),1)):B("",!0),u.closable?(h(),p("button",{key:1,onClick:c,class:"toast-close-button","aria-label":u.closeLabel},[(h(),Z(K(y.value),{class:"w-4 h-4"}))],8,Ke)):B("",!0)])):B("",!0)]),u.showProgress&&u.duration>0?(h(),p("div",{key:0,class:M(["toast-progress",R.value]),style:ie(W.value)},null,6)):B("",!0)],46,He)):B("",!0)]))}},tt=q(et,[["__scopeId","data-v-11baa49e"]]);class ot{constructor(){this.notifications=te([]),this.maxNotifications=x(5),this.defaultDuration=x(5e3),this.positions=te({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=te({enabled:!0,volume:.3})}add(t){const e=this.generateId(),s=t.position||"top-right",i={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:s,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(i),this.positions[s].push(i),this.manageQueueSize(s),!i.persistent&&i.duration>0&&setTimeout(()=>{this.remove(e)},i.duration),e}remove(t){const e=this.notifications.find(l=>l.id===t);if(!e)return;const s=this.notifications.findIndex(l=>l.id===t);s>-1&&this.notifications.splice(s,1);const i=this.positions[e.position],n=i.findIndex(l=>l.id===t);n>-1&&i.splice(n,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(s=>{this.remove(s.id)})}clearType(t){this.notifications.filter(s=>s.type===t).forEach(s=>{this.remove(s.id)})}update(t,e){const s=this.notifications.find(i=>i.id===t);s&&Object.assign(s,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const s=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:i=>{this.remove(s),e(i==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(s=>{const i=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(i),s(!0)},onClose:()=>{s(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(i=>{const n=this.notifications.findIndex(l=>l.id===i.id);n>-1&&this.notifications.splice(n,1)})}}const C=new ot,st={class:"notification-container"},at={__name:"NotificationContainer",setup(u,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];v(()=>C.notifications.filter(f=>!f.component));const s=v(()=>C.notifications.filter(f=>f.component)),i=f=>{const y="fixed z-50 pointer-events-none",b={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${y} ${b[f]||b["top-right"]}`},n=f=>C.getByPosition(f),l=f=>f.includes("left")?"slide-left":f.includes("right")?"slide-right":f.includes("center")?"slide-center":"slide-right",k=f=>{C.remove(f)},d=(f,y="action")=>{const b=C.getById(f);b!=null&&b.onAction&&b.onAction(y)},r=()=>{window.notify={success:(f,y)=>C.success(f,y),error:(f,y)=>C.error(f,y),warning:(f,y)=>C.warning(f,y),info:(f,y)=>C.info(f,y),loading:(f,y)=>C.loading(f,y),confirm:f=>C.confirm(f),alert:(f,y)=>C.alert(f,y),clear:()=>C.clear(),remove:f=>C.remove(f)}},I=()=>{window.notify&&delete window.notify};return F(()=>{r()}),J(()=>{I()}),t({notificationQueue:C,notify:window.notify}),(f,y)=>(h(),p("div",st,[(h(),p(V,null,Y(e,b=>o("div",{key:b,class:M(i(b))},[D(fe,{name:l(b),tag:"div",class:"space-y-2"},{default:me(()=>[(h(!0),p(V,null,Y(n(b),$=>(h(),Z(tt,le({key:$.id},{ref_for:!0},$,{onClose:z=>k($.id),onAction:z=>d($.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(h(!0),p(V,null,Y(s.value,b=>(h(),Z(K(b.component||"NotificationModal"),le({key:b.id,ref_for:!0},b.props,{onClose:$=>k(b.id),onConfirm:$=>d(b.id,"confirm"),onCancel:$=>d(b.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},nt=q(at,[["__scopeId","data-v-67e6c621"]]),rt={class:"floating-attendance-widget"},it={class:"status-indicator"},lt={class:"time-info"},ct={class:"time-display"},ut={class:"time-label-mini"},dt={class:"widget-header"},mt={class:"status-info"},ft={class:"status-text"},vt={class:"timer-section"},ht={class:"timer-value"},pt={class:"timer-label"},gt={class:"quick-actions"},yt=["disabled"],kt=["disabled"],wt={class:"quick-stats"},bt={class:"stat"},xt={class:"stat-value"},_t={class:"stat"},At={class:"stat-value"},Tt={__name:"FloatingAttendanceWidget",setup(u){const t=x(!1),e=x({clockedIn:!1,onBreak:!1,clockInTime:null}),s=x(!1),i=x("0h 0m 0s"),n=x(null),l=()=>{try{const m={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:n.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(m))}catch(m){console.warn("Failed to save attendance state to localStorage:",m)}},k=()=>{try{const m=localStorage.getItem("floating-attendance-state");if(m){const w=JSON.parse(m),T=new Date(w.lastUpdate);if((new Date-T)/(1e3*60)<5)return e.value.clockedIn=w.clockedIn||!1,e.value.onBreak=w.onBreak||!1,e.value.clockInTime=w.clockInTime||null,n.value=w.breakStartTime||null,!0}}catch(m){console.warn("Failed to load attendance state from localStorage:",m)}return!1};let d=null;const r=v(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),I=v(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),f=v(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),y=v(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),b=v(()=>s.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),$=v(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),z=v(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const m=new Date(e.value.clockInTime),T=new Date-m,_=Math.floor(T/(1e3*60)),g=Math.floor(_/60),N=_%60;return`${g}h ${N}m`}),Q=v(()=>{if(e.value.onBreak&&n.value){const m=new Date(n.value);if(isNaN(m.getTime()))return"0h 0m 1s";{const T=Math.max(0,new Date-m),_=Math.floor(T/(1e3*60*60)),g=Math.floor(T%(1e3*60*60)/(1e3*60)),N=Math.floor(T%(1e3*60)/1e3);return`${_}h ${g}m ${N}s`}}return"0h 0m"});v(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const O=()=>{t.value=!t.value},R=()=>{if(e.value.clockedIn&&e.value.clockInTime){const m=new Date;let w;e.value.onBreak&&n.value?w=new Date(n.value):w=new Date(e.value.clockInTime);const T=m-w,_=Math.floor(T/(1e3*60*60)),g=Math.floor(T%(1e3*60*60)/(1e3*60)),N=Math.floor(T%(1e3*60)/1e3);i.value=`${_}h ${g}m ${N}s`}else i.value="0h 0m 0s"},W=async()=>{try{if(s.value=!0,e.value.clockedIn){const m=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,n.value=null,i.value="0h 0m 0s",l(),P()}else{const m=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=m.data.clock_in_time||new Date().toISOString(),l(),P()}}catch(m){console.error("Clock in/out failed:",m),alert("Action failed: "+m.message)}finally{s.value=!1}},a=async()=>{try{if(s.value=!0,e.value.onBreak){const m=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,n.value=null,l(),P()}else{n.value=new Date().toISOString(),e.value.onBreak=!0;const m=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});m.data.break_start_time&&(n.value=m.data.break_start_time),l(),P()}}catch(m){console.error("Break action failed:",m),alert("Action failed: "+m.message)}finally{s.value=!1}},c=async()=>{var m,w;try{const _=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=_.clocked_in||!1,e.value.onBreak=_.on_break||!1,e.value.clockInTime=_.clock_in_time||null,_.on_break)if(_.break_start_time)n.value=_.break_start_time;else if((m=_.current_session)!=null&&m.current_break_start)n.value=_.current_session.current_break_start;else if((w=_.current_session)!=null&&w.break_sessions&&_.current_session.break_sessions.length>0){const g=_.current_session.break_sessions[_.current_session.break_sessions.length-1];g&&!g.end&&(n.value=g.start)}else n.value||(n.value=new Date().toISOString());else n.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value})}catch(T){console.error("Failed to fetch attendance status:",T)}},A=m=>{m.key==="attendance-update"&&c()},E=m=>{console.log("FloatingWidget: Received attendance state change:",m.detail);const{clockedIn:w,onBreak:T,clockInTime:_,breakStartTime:g}=m.detail;e.value.clockedIn=w,e.value.onBreak=T,e.value.clockInTime=_,T&&g?n.value=g:T||(n.value=null),l(),R(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:n.value,eventBreakStartTime:g})},P=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(m){console.warn("Failed to broadcast attendance update:",m)}};return F(async()=>{k()&&R(),await c(),l(),R(),d=setInterval(R,1e3),window.addEventListener("storage",A),window.addEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners registered")}),J(()=>{d&&clearInterval(d),window.removeEventListener("storage",A),window.removeEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners removed")}),(m,w)=>(h(),p("div",rt,[t.value?B("",!0):(h(),p("div",{key:0,onClick:O,class:M(["floating-button",y.value])},[o("div",it,[o("div",{class:M(f.value)},null,2)]),o("div",lt,[o("div",ct,S(i.value),1),o("div",ut,S(I.value),1)]),D(L(ge),{class:"w-4 h-4 expand-icon"})],2)),t.value?(h(),p("div",{key:1,class:"expanded-widget",onClick:w[0]||(w[0]=ve(()=>{},["stop"]))},[o("div",dt,[o("div",mt,[o("div",{class:M(f.value)},null,2),o("span",ft,S(r.value),1)]),o("button",{onClick:O,class:"minimize-btn",title:"Minimize"},[D(L(ye),{class:"w-4 h-4"})])]),o("div",vt,[o("div",ht,S(i.value),1),o("div",pt,S(I.value),1)]),o("div",gt,[o("button",{onClick:W,disabled:s.value,class:M($.value)},S(b.value),11,yt),e.value.clockedIn?(h(),p("button",{key:0,onClick:a,disabled:s.value,class:"break-action"},[(h(),Z(K(e.value.onBreak?L(je):L(We)),{class:"w-3 h-3"})),X(" "+S(e.value.onBreak?"End":"Break"),1)],8,kt)):B("",!0)]),o("div",wt,[o("div",bt,[o("span",xt,S(z.value),1),w[1]||(w[1]=o("span",{class:"stat-label"},"Today",-1))]),o("div",_t,[o("span",At,S(Q.value),1),w[2]||(w[2]=o("span",{class:"stat-label"},"Break",-1))])])])):B("",!0),t.value?(h(),p("div",{key:2,class:"backdrop",onClick:O})):B("",!0)]))}},It=q(Tt,[["__scopeId","data-v-421365b8"]]),St={class:"skip-links","aria-label":"Skip navigation links"},Bt=["href","onClick"],Ct={__name:"SkipLinks",setup(u){const{skipLinks:t,handleSkipLinkClick:e}=ke();return(s,i)=>(h(),p("div",St,[(h(!0),p(V,null,Y(L(t),n=>(h(),p("a",{key:n.href,href:n.href,class:"skip-link sr-only-focusable",onClick:l=>L(e)(l,n.href)},S(n.label),9,Bt))),128))]))}},Et=q(Ct,[["__scopeId","data-v-f9a7b518"]]),$t={class:"live-regions"},Nt={__name:"LiveRegion",setup(u){const t=x(null),e=x(null),s=x(null);return F(()=>{he.init()}),(i,n)=>(h(),p("div",$t,[o("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),o("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),o("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:s},null,512)]))}},Mt=q(Nt,[["__scopeId","data-v-94955163"]]),G=x("light"),U=x("light"),j=x(!1),H={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Pt(){const u=v(()=>j.value?U.value:G.value),t=v(()=>H[u.value]),e=v(()=>u.value==="dark"),s=v(()=>u.value==="light"),i=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(a){return console.warn("Failed to detect system theme:",a),"light"}},n=(a,c=!1)=>{try{const E={theme:y(a)?a:"light",useSystem:!!c,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(A){console.warn("Failed to save theme preference:",A);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},l=a=>{if(!(typeof document>"u"))try{const c=document.documentElement,A=y(a)?a:"light";c.classList.remove("theme-light","theme-dark"),c.classList.add(`theme-${A}`),k(A);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:A,config:H[A]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(c){console.error("Failed to apply theme:",c);try{const A=document.documentElement;A.classList.remove("theme-light","theme-dark"),A.classList.add("theme-light"),k("light")}catch(A){console.error("Failed to apply fallback theme:",A)}}},k=a=>{if(!(typeof document>"u"))try{const c=document.documentElement;a==="dark"?(c.style.setProperty("--color-neutral-50","#0a0a0a"),c.style.setProperty("--color-neutral-100","#111827"),c.style.setProperty("--color-neutral-200","#262626"),c.style.setProperty("--color-neutral-300","#404040"),c.style.setProperty("--color-neutral-400","#525252"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#a3a3a3"),c.style.setProperty("--color-neutral-700","#d4d4d4"),c.style.setProperty("--color-neutral-800","#e5e5e5"),c.style.setProperty("--color-neutral-900","#fafafa"),c.style.setProperty("--color-neutral-950","#ffffff")):(c.style.setProperty("--color-neutral-50","#fafafa"),c.style.setProperty("--color-neutral-100","#f5f5f5"),c.style.setProperty("--color-neutral-200","#e5e5e5"),c.style.setProperty("--color-neutral-300","#d4d4d4"),c.style.setProperty("--color-neutral-400","#a3a3a3"),c.style.setProperty("--color-neutral-500","#6b7280"),c.style.setProperty("--color-neutral-600","#525252"),c.style.setProperty("--color-neutral-700","#404040"),c.style.setProperty("--color-neutral-800","#262626"),c.style.setProperty("--color-neutral-900","#111827"),c.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(c){console.warn("Failed to update theme properties:",c)}},d=a=>{l(a)},r=a=>{if(!H[a]){console.warn(`Theme "${a}" not found`);return}G.value=a,j.value=!1,n(a,!1),d(a)},I=()=>{j.value=!0;const a=i();U.value=a,n(a,!0),d(a)},f=()=>{const a=u.value==="light"?"dark":"light";r(a)},y=a=>H.hasOwnProperty(a),b=()=>Object.values(H),$=()=>{},z=()=>{const a=[];if(y(G.value)||a.push(`Invalid current theme: ${G.value}`),y(U.value)||a.push(`Invalid system theme: ${U.value}`),y(u.value)||a.push(`Invalid active theme: ${u.value}`),typeof document<"u"){const c=document.documentElement,A=c.classList.contains("theme-light"),E=c.classList.contains("theme-dark");!A&&!E&&a.push("No theme class found on document root"),A&&E&&a.push("Multiple theme classes found on document root");const P=`theme-${u.value}`;c.classList.contains(P)||a.push(`Expected theme class ${P} not found on document root`)}return{isValid:a.length===0,issues:a}},Q=()=>{if(!(typeof document>"u"))try{const a=document.documentElement;return["theme-light","theme-dark"].forEach(A=>{a.classList.remove(A)}),!0}catch(a){return console.warn("Failed to cleanup theme classes:",a),!1}},O=()=>{try{G.value="light",U.value=i(),j.value=!1;try{localStorage.removeItem("theme-preference")}catch(a){console.warn("Failed to clear theme preference from localStorage:",a)}return l("light"),!0}catch(a){return console.error("Failed to reset theme to default:",a),!1}},R=()=>{console.warn("Attempting theme system recovery...");try{if(Q(),O())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(a){console.error("Theme system recovery failed:",a);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(c){return console.error("Last resort theme recovery failed:",c),!1}}},W=()=>{try{G.value="light",U.value="light",j.value=!1;try{localStorage.removeItem("theme-preference")}catch(a){console.warn("Failed to clear theme preference:",a)}if(typeof document<"u"){const a=document.documentElement;a.classList.remove("theme-light","theme-dark","dark","light"),a.classList.add("theme-light"),a.style.setProperty("--color-neutral-50","#fafafa"),a.style.setProperty("--color-neutral-100","#f5f5f5"),a.style.setProperty("--color-neutral-200","#e5e5e5"),a.style.setProperty("--color-neutral-300","#d4d4d4"),a.style.setProperty("--color-neutral-400","#a3a3a3"),a.style.setProperty("--color-neutral-500","#6b7280"),a.style.setProperty("--color-neutral-600","#525252"),a.style.setProperty("--color-neutral-700","#404040"),a.style.setProperty("--color-neutral-800","#262626"),a.style.setProperty("--color-neutral-900","#111827"),a.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(a){console.error("Theme initialization failed:",a);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(c){console.error("Emergency theme fallback failed:",c)}return null}};return F(()=>{W()}),ae(u,a=>{d(a)}),{currentTheme:v(()=>G.value),systemTheme:v(()=>U.value),activeTheme:u,themeConfig:t,isDark:e,isLight:s,isSystemThemePreferred:v(()=>j.value),setTheme:r,toggleTheme:f,useSystemTheme:I,validateTheme:y,getAvailableThemes:b,debugThemeState:$,initializeTheme:W,validateThemeState:z,cleanupThemeClasses:Q,resetThemeToDefault:O,recoverThemeSystem:R,cleanupAndApplyTheme:l,themes:v(()=>H)}}function Lt(){const{props:u}=ee(),{user:t}=ne();let e;const s=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(n=>{var k;const l=((k=t.value)==null?void 0:k.name)||"Employee";n.showNotification(`Hi ${l}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},i=()=>{const n=new Date,l=new Date(u.auth.user.clock_in_time);(isNaN(l.getTime())||n.getTime()-l.getTime()>5*60*1e3)&&s()};F(()=>{i(),e=setInterval(i,5*60*1e3)}),J(()=>{clearInterval(e)})}function Dt(){const{isAuthenticated:u,user:t}=ne(),e=ee();let s=null;const i=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(l=>{var d;const k=((d=t.value)==null?void 0:d.name)||"Employee";l.showNotification(`Hi ${k}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},n=()=>{if(!u.value)return;const l=e.props.auth.user.todays_attendance;if(l&&l.clock_in_time&&!l.clock_out_time){const k=new Date(l.clock_in_time);(new Date-k)/1e3/60/60>=7.5&&i()}};F(()=>{s=setInterval(n,5*60*1e3),n()}),J(()=>{s&&clearInterval(s)})}function Ft(){const u=ee();return ae(()=>u.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:u.props.flash}}const Ot={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},Rt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},zt={id:"main-content",class:"flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},Gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Vt={__name:"AuthenticatedLayout",setup(u){const t=pe();x("desktop");const{getUserProperty:e,getAuthError:s}=ne(),{isDark:i,initializeTheme:n}=Pt();Lt(),Dt(),Ft(),F(()=>{n()}),v(()=>e("name","User")),v(()=>e("email",""));const l=v(()=>s()),k=v(()=>!!l.value);return v(()=>{try{return route().current()||""}catch(d){return console.warn("[LAYOUT] Route helper not available:",d),window.location.pathname.replace("/","")||"dashboard"}}),v(()=>!!t.header),(d,r)=>(h(),p("div",null,[D(Et),D(Mt),D(Ie),D(nt),D(It),k.value?(h(),p("div",Ot,[r[0]||(r[0]=o("p",{class:"font-semibold"},"Authentication Error:",-1)),o("p",null,S(l.value),1),r[1]||(r[1]=o("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):B("",!0),D(Qe),o("div",{class:M(["min-h-screen transition-colors duration-200",(L(i),"bg-gray-50")])},[L(t).header?(h(),p("header",{key:0,class:M(["border-b transition-colors duration-200",(L(i),"bg-white border-gray-200")]),role:"banner","aria-label":"Page header"},[o("div",Rt,[o("div",{class:M(["text-2xl font-bold transition-colors duration-200",(L(i),"text-gray-900")])},[se(d.$slots,"header")],2)])],2)):B("",!0),o("main",zt,[o("div",Gt,[se(d.$slots,"default")])])],2)]))}};export{Vt as _,We as a,C as n,je as r,Ft as u};
