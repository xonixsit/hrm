import{c as m,o as i,a as e,i as T,m as xe,n as p,d as Be,u as l,B as de,t as o,F as W,g as L,s as Ae,G as He,f as D,Q as ae,e as P,r as K,A as pe,E as Ce,C as Ee,z as We,k as S,D as qe,q as te,l as R,h as O,w as Ke,b as Xe,H as _}from"./app-ncY6vA5p.js";import{u as Ne}from"./useAuth-EO6FNapM.js";import{b as Pe,A as Ge}from"./AuthenticatedLayout-B48czCvq.js";/* empty css                                                                  *//* empty css                                                                      */import{A as Qe}from"./ApplicationLogo-S2z6F0QR.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as Ye,j as De,F as ze,m as Te,k as ee,a as je}from"./icons-C19vy05A.js";import{r as he}from"./ChartBarIcon-BK4kB2Aq.js";import{a as Je,b as Q,c as Ve,r as Me}from"./UsersIcon-CoPHWUaN.js";import{r as Ie}from"./ArrowPathIcon-CU4rVqsw.js";import{r as fe}from"./AcademicCapIcon-Db8RnjSF.js";import{r as Ze}from"./ArrowTrendingUpIcon-DR9_1q1b.js";import{r as Re}from"./CogIcon-D74rooy7.js";const _e=["role","tabindex"],et={key:0,class:"flex items-center justify-between mb-4"},tt={class:"flex items-center space-x-3"},st={key:0,class:"flex items-center space-x-2"},at={class:"flex-1"},nt={key:2,class:p(["absolute inset-0 flex items-center justify-center rounded-2xl transition-all duration-200"])},ot={class:"flex items-center space-x-3"},se={__name:"UnifiedCard",props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:[String,Object],default:null},iconVariant:{type:String,default:null,validator:t=>["primary","success","warning","danger","info"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","elevated"].includes(t)},size:{type:String,default:"default",validator:t=>["small","default"].includes(t)},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},status:{type:String,default:null,validator:t=>["success","warning","error","info"].includes(t)},statusText:{type:String,default:null},className:{type:String,default:""}},emits:["click"],setup(t,{emit:M}){const{isDark:c}=Pe();return(x,u)=>(i(),m(W,null,[e("div",{class:p(["group relative transition-all duration-300",t.size==="small"?"rounded-lg":"rounded-2xl",t.clickable&&"cursor-pointer hover:scale-[1.02] hover:shadow-2xl",t.clickable&&(l(c)?"hover:bg-gray-700/60 hover:border-gray-600/60":"hover:bg-white/90 hover:border-gray-300/60"),t.size==="small"?"p-3":"p-4",t.className]),onClick:u[0]||(u[0]=k=>t.clickable&&x.$emit("click")),role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[u[1]||(u[1]=xe(k=>t.clickable&&x.$emit("click"),["enter"])),u[2]||(u[2]=xe(Be(k=>t.clickable&&x.$emit("click"),["prevent"]),["space"]))]},null,42,_e),x.$slots.header||t.title?(i(),m("div",et,[e("div",tt,[t.icon||x.$slots.icon?(i(),m("div",{key:0,class:p(["flex items-center justify-center rounded-xl transition-all duration-200",t.size==="small"?"w-10 h-10 p-2":"w-12 h-12 p-3",t.iconVariant==="primary"&&(l(c)?"bg-teal-600/20 text-teal-400 border border-teal-500/30":"bg-teal-50 text-teal-600 border border-teal-200/50"),t.iconVariant==="success"&&(l(c)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-600 border border-green-200/50"),t.iconVariant==="warning"&&(l(c)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-600 border border-orange-200/50"),t.iconVariant==="danger"&&(l(c)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200/50"),t.iconVariant==="info"&&(l(c)?"bg-purple-600/20 text-purple-400 border border-purple-500/30":"bg-purple-50 text-purple-600 border border-purple-200/50"),!t.iconVariant&&(l(c)?"bg-gray-700/50 text-gray-300 border border-gray-600/50":"bg-gray-100 text-gray-600 border border-gray-200/50")])},[de(x.$slots,"icon",{},()=>[t.icon?(i(),L(Ae(t.icon),{key:0,class:p(t.size==="small"?"w-4 h-4":"w-5 h-5")},null,8,["class"])):T("",!0)])],2)):T("",!0),e("div",null,[t.title?(i(),m("h3",{key:0,class:p(["font-semibold transition-colors duration-200",t.size==="small"?"text-base":"text-lg",l(c)?"text-white":"text-gray-900"])},o(t.title),3)):T("",!0),t.description?(i(),m("p",{key:1,class:p(["transition-colors duration-200",t.size==="small"?"text-xs":"text-sm",l(c)?"text-gray-400":"text-gray-600"])},o(t.description),3)):T("",!0),de(x.$slots,"header")])]),x.$slots.headerActions?(i(),m("div",st,[de(x.$slots,"headerActions")])):T("",!0)])):T("",!0),e("div",at,[de(x.$slots,"default",{},()=>[u[3]||(u[3]=He('<div class="text-center py-12"><div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Content Available</h3><p class="text-sm text-gray-500">This section will display content when data is available.</p></div>',1))])]),x.$slots.footer?(i(),m("div",{key:1,class:p(["mt-6 pt-4 border-t transition-colors duration-200",l(c)?"border-gray-700/50":"border-gray-200/50"])},[de(x.$slots,"footer")],2)):T("",!0),t.loading?(i(),m("div",nt,[e("div",ot,[e("div",{class:p(["animate-spin rounded-full border-2 border-t-transparent",t.size==="small"?"w-5 h-5":"w-6 h-6",l(c)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:p(["text-sm font-medium",l(c)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])])):T("",!0),t.status?(i(),m("div",{key:3,class:p(["absolute top-4 right-4 flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="success"&&(l(c)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-700 border border-green-200"),t.status==="warning"&&(l(c)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-700 border border-orange-200"),t.status==="error"&&(l(c)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200"),t.status==="info"&&(l(c)?"bg-teal-600/20 text-teal-400 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200")])},[e("div",{class:p(["w-1.5 h-1.5 rounded-full",t.status==="success"&&"bg-green-400",t.status==="warning"&&"bg-orange-400",t.status==="error"&&"bg-red-400",t.status==="info"&&"bg-teal-400"])},null,2),e("span",null,o(t.statusText||t.status),1)],2)):T("",!0)],64))}},rt=["role","tabindex","onKeydown"],it={class:"flex items-start justify-between mb-4"},lt={key:0,class:"flex items-center space-x-1"},dt={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ct={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ut={class:"space-y-1 mb-3"},mt={class:"flex items-center gap-2"},gt={key:2,class:"absolute z-20 -top-2 -right-2"},G={__name:"UnifiedStatsCard",props:{value:{type:[Number,String],required:!0},label:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],required:!0},variant:{type:String,default:"primary",validator:t=>["primary","success","warning","info","neutral"].includes(t)},trend:{type:Number,default:null},trendSuffix:{type:String,default:"%"},status:{type:String,default:null,validator:t=>["excellent","good","warning","critical"].includes(t)},statusText:{type:String,default:null},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},route:{type:String,default:null},urgent:{type:Boolean,default:!1},prefix:{type:String,default:""},suffix:{type:String,default:""}},emits:["click"],setup(t,{emit:M}){const c=t,x=M,{isDark:u}=Pe(),k=D(()=>{if(c.loading)return"...";let C=c.value;return typeof C=="number"&&(C=C.toLocaleString()),`${c.prefix}${C}${c.suffix}`}),E=()=>{!c.clickable||c.loading||(c.route&&ae.visit(route(c.route)),x("click"))};return(C,s)=>(i(),m("div",{class:p(["group relative transition-all duration-300",t.clickable&&"cursor-pointer",l(u)?"bg-gray-800/50 border border-gray-700/50 backdrop-blur-sm":"bg-white border border-gray-100 shadow-sm backdrop-blur-sm","hover:shadow-md hover:-translate-y-0.5","rounded-2xl p-5 sm:p-6"]),onClick:E,role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[xe(E,["enter"]),xe(Be(E,["prevent"]),["space"])]},[e("div",it,[e("div",{class:p(["flex items-center justify-center w-12 h-12 rounded-xl flex-shrink-0 shadow-sm",t.variant==="primary"&&(l(u)?"bg-teal-600/20 text-teal-400":"bg-teal-500 text-white shadow-teal-100"),t.variant==="success"&&(l(u)?"bg-green-600/20 text-green-400":"bg-green-500 text-white shadow-green-100"),t.variant==="warning"&&(l(u)?"bg-orange-600/20 text-orange-400":"bg-orange-500 text-white shadow-orange-100"),t.variant==="info"&&(l(u)?"bg-purple-600/20 text-purple-400":"bg-purple-500 text-white shadow-purple-100"),t.variant==="neutral"&&(l(u)?"bg-gray-700/50 text-gray-300":"bg-gray-500 text-white shadow-gray-100")])},[(i(),L(Ae(t.icon),{class:"w-6 h-6"}))],2),t.trend!==null&&!t.loading?(i(),m("div",lt,[t.trend>0?(i(),m("svg",dt,s[0]||(s[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):t.trend<0?(i(),m("svg",ct,s[1]||(s[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):T("",!0),e("span",{class:p(["text-sm font-medium",t.trend>0&&"text-green-600",t.trend<0&&"text-red-600",t.trend===0&&"text-gray-500"])},o(t.trend>0?"+":"")+o(t.trend)+o(t.trendSuffix),3)])):t.status&&!t.loading?(i(),m("div",{key:1,class:p(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="excellent"&&(l(u)?"bg-green-600/20 text-green-400":"bg-green-50 text-green-700 border border-green-100"),t.status==="good"&&(l(u)?"bg-teal-600/20 text-teal-400":"bg-teal-50 text-teal-700 border border-teal-100"),t.status==="warning"&&(l(u)?"bg-orange-600/20 text-orange-400":"bg-orange-50 text-orange-700 border border-orange-100"),t.status==="critical"&&(l(u)?"bg-red-600/20 text-red-400":"bg-red-50 text-red-700 border border-red-100")])},[e("span",{class:p(["w-1.5 h-1.5 rounded-full",t.status==="excellent"&&"bg-green-500",t.status==="good"&&"bg-teal-500",t.status==="warning"&&"bg-orange-500",t.status==="critical"&&"bg-red-500"])},null,2),e("span",null,o(t.statusText||t.status),1)],2)):T("",!0)]),e("div",ut,[e("div",{class:p(["text-3xl font-semibold tracking-tight transition-colors duration-200",l(u)?"text-white":"text-gray-900",t.variant==="success"&&!l(u)&&"text-green-600",t.variant==="warning"&&!l(u)&&"text-orange-600"])},o(t.loading?"...":k.value),3),e("div",{class:p(["text-sm font-medium transition-colors duration-200",l(u)?"text-gray-400":"text-gray-600"])},o(t.label),3)]),t.description?(i(),m("div",{key:0,class:p(["text-sm leading-relaxed transition-colors duration-200",(l(u),"text-gray-500")])},o(t.description),3)):T("",!0),t.loading?(i(),m("div",{key:1,class:p(["absolute inset-0 z-10 flex items-center justify-center rounded-2xl backdrop-blur-sm",l(u)?"bg-gray-800/80":"bg-white/80"])},[e("div",mt,[e("div",{class:p(["animate-spin rounded-full w-5 h-5 border-2 border-t-transparent",l(u)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:p(["text-sm font-medium",l(u)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])],2)):T("",!0),t.urgent&&!t.loading?(i(),m("div",gt,s[2]||(s[2]=[e("div",{class:"relative"},[e("div",{class:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),e("div",{class:"absolute inset-0 w-4 h-4 bg-red-500 rounded-full animate-ping opacity-75"})],-1)]))):T("",!0)],42,rt))}},bt={key:0,class:"space-y-4"},vt={key:0,class:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4"},yt={class:"space-y-2"},ft={class:"flex items-center space-x-3"},ht={class:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center"},xt={class:"text-sm font-semibold text-pink-700"},pt={class:"font-medium text-gray-900"},kt={class:"text-sm text-gray-500"},wt={class:"text-right"},$t={key:0,class:"text-xs text-gray-500"},St={key:1,class:"bg-gradient-to-r from-teal-50 to-indigo-50 border border-teal-200 rounded-lg p-4"},Tt={class:"flex items-center justify-between mb-3"},Ct={class:"space-y-2"},Bt={class:"flex items-center space-x-3"},At={class:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center"},Dt={class:"text-sm font-semibold text-teal-700"},It={class:"font-medium text-gray-900"},jt={class:"text-sm text-gray-500"},Mt={class:"text-right"},Rt={class:"text-sm font-medium text-gray-900"},Et={class:"text-xs text-gray-500"},Nt={key:2,class:"bg-gradient-to-r from-teal-50 to-indigo-50 border border-teal-200 rounded-lg p-4"},Ue={__name:"BirthdayNotifications",props:{todaysBirthdays:{type:Array,default:()=>[]},upcomingBirthdays:{type:Array,default:()=>[]},stats:{type:Object,default:null},systemTimezone:{type:String,default:"UTC"}},setup(t){const M=t,c=P(!1),x=D(()=>M.todaysBirthdays.length>0||M.upcomingBirthdays.length>0),u=D(()=>c.value?M.upcomingBirthdays:M.upcomingBirthdays.slice(0,3)),k=s=>s.split(" ").map(d=>d.charAt(0).toUpperCase()).join("").substring(0,2),E=s=>{const[d,A,h]=s.split("-").map(Number);return new Date(d,A-1,h).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:M.systemTimezone||"UTC"})},C=s=>s===0?"Today":s===1?"Tomorrow":`In ${s} days`;return(s,d)=>x.value?(i(),m("div",bt,[t.todaysBirthdays.length>0?(i(),m("div",vt,[d[2]||(d[2]=e("div",{class:"flex items-center space-x-3 mb-3"},[e("div",{class:"text-2xl"},"ðŸŽ‰"),e("div",null,[e("h3",{class:"text-lg font-semibold text-pink-800"},"Birthday Today!"),e("p",{class:"text-sm text-pink-600"},"Let's celebrate our team members")])],-1)),e("div",yt,[(i(!0),m(W,null,K(t.todaysBirthdays,A=>(i(),m("div",{key:A.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",ft,[e("div",ht,[e("span",xt,o(k(A.user.name)),1)]),e("div",null,[e("p",pt,o(A.user.name),1),e("p",kt,o(A.job_title||"Employee"),1)])]),e("div",wt,[d[1]||(d[1]=e("div",{class:"text-lg"},"ðŸŽ‚",-1)),A.age?(i(),m("p",$t,o(A.age)+" years",1)):T("",!0)])]))),128))])])):T("",!0),t.upcomingBirthdays.length>0?(i(),m("div",St,[e("div",Tt,[d[3]||(d[3]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-teal-800"},"Upcoming Birthdays"),e("p",{class:"text-sm text-teal-600"},"Don't forget to wish them well!")])],-1)),e("button",{onClick:d[0]||(d[0]=A=>c.value=!c.value),class:"text-sm text-teal-600 hover:text-teal-800 font-medium"},o(c.value?"Show Less":"Show All"),1)]),e("div",Ct,[(i(!0),m(W,null,K(u.value,(A,h)=>(i(),m("div",{key:A.employee.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",Bt,[e("div",At,[e("span",Dt,o(k(A.employee.user.name)),1)]),e("div",null,[e("p",It,o(A.employee.user.name),1),e("p",jt,o(A.employee.job_title||"Employee"),1)])]),e("div",Mt,[e("p",Rt,o(E(A.birthday_date)),1),e("p",Et,o(C(A.days_until)),1)])]))),128))])])):T("",!0),t.todaysBirthdays.length===0&&t.upcomingBirthdays.length===0&&t.stats&&t.stats.this_month===0?(i(),m("div",Nt,d[4]||(d[4]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-teal-800"},"No Birthdays This Month"),e("p",{class:"text-sm text-teal-600"},"No team birthdays to celebrate right now, but stay tuned!")])],-1)]))):T("",!0)])):T("",!0)}},Pt={class:"p-6 text-center"},zt={class:"mb-4"},Vt={class:"w-20 h-20 bg-gradient-to-br from-pink-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-3"},Ut={class:"text-2xl font-bold text-purple-700"},Ot={class:"text-xl font-semibold text-gray-900 mb-1"},Ft={class:"text-gray-600 text-sm"},Lt={class:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 mb-6"},Ht={class:"flex items-center justify-center space-x-2 text-purple-700"},Wt={class:"font-medium"},qt={class:"bg-gray-50 px-6 py-4 text-center border-t border-gray-100"},Kt={class:"flex justify-center"},Xt={__name:"BirthdayPopup",props:{show:{type:Boolean,default:!1},employee:{type:Object,required:!0}},emits:["close"],setup(t,{emit:M}){const c=t,x=M,u=P(null);let k=null;const E=A=>A.split(" ").map(h=>h.charAt(0).toUpperCase()).join("").substring(0,2),C=()=>{s()},s=()=>{x("close")};class d{constructor(h){this.canvas=h,this.ctx=h.getContext("2d"),this.particles=[],this.colors=["#ff6b9d","#c44569","#f8b500","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3"],this.isRunning=!1,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}createParticle(h,y){return{x:h||Math.random()*this.canvas.width,y:y||-10,vx:(Math.random()-.5)*8,vy:Math.random()*-8-2,gravity:.3,friction:.99,size:Math.random()*8+4,color:this.colors[Math.floor(Math.random()*this.colors.length)],rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10,life:1,decay:Math.random()*.02+.01,shape:Math.random()>.5?"circle":"square"}}burst(){const h=this.canvas.width/2,y=this.canvas.height/2;for(let U=0;U<50;U++){const N=this.createParticle(h+(Math.random()-.5)*100,y+(Math.random()-.5)*100);N.vx=(Math.random()-.5)*15,N.vy=(Math.random()-.5)*15,this.particles.push(N)}}start(){this.isRunning=!0,this.burst(),this.particleInterval=setInterval(()=>{if(this.particles.length<100)for(let h=0;h<3;h++)this.particles.push(this.createParticle())},100),this.animate()}stop(){this.isRunning=!1,this.particleInterval&&clearInterval(this.particleInterval)}animate(){if(this.isRunning){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let h=this.particles.length-1;h>=0;h--){const y=this.particles[h];if(y.vy+=y.gravity,y.vx*=y.friction,y.vy*=y.friction,y.x+=y.vx,y.y+=y.vy,y.rotation+=y.rotationSpeed,y.life-=y.decay,y.life<=0||y.y>this.canvas.height+50||y.x<-50||y.x>this.canvas.width+50){this.particles.splice(h,1);continue}this.ctx.save(),this.ctx.translate(y.x,y.y),this.ctx.rotate(y.rotation*Math.PI/180),this.ctx.globalAlpha=y.life,this.ctx.fillStyle=y.color,y.shape==="circle"?(this.ctx.beginPath(),this.ctx.arc(0,0,y.size/2,0,Math.PI*2),this.ctx.fill()):this.ctx.fillRect(-y.size/2,-y.size/2,y.size,y.size),this.ctx.restore()}requestAnimationFrame(()=>this.animate())}}}return pe(async()=>{c.show&&(await Ce(),u.value&&(k=new d(u.value),k.start()))}),Ee(()=>{k&&k.stop()}),We(()=>c.show,async A=>{A?(await Ce(),u.value&&!k?(k=new d(u.value),k.start()):k&&k.start()):k&&k.stop()}),(A,h)=>(i(),L(qe,{to:"body"},[t.show?(i(),m("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:C},[e("canvas",{ref_key:"confettiCanvas",ref:u,class:"absolute inset-0 w-full h-full pointer-events-none"},null,512),e("div",{class:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all duration-300 scale-100",onClick:h[0]||(h[0]=Be(()=>{},["stop"]))},[h[4]||(h[4]=e("div",{class:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 p-6 text-center text-white relative"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-400/20 via-purple-400/20 to-indigo-400/20"}),e("div",{class:"relative z-10"},[e("div",{class:"text-6xl mb-2 animate-bounce"},"ðŸŽ‰"),e("h2",{class:"text-2xl font-bold mb-1"},"Happy Birthday!"),e("p",{class:"text-pink-100 text-sm"},"Wishing you a wonderful day from the team")])],-1)),e("div",Pt,[e("div",zt,[e("div",Vt,[e("span",Ut,o(E(t.employee.user.name)),1)]),e("h3",Ot,o(t.employee.user.name),1),e("p",Ft,o(t.employee.job_title||"Team Member"),1)]),e("div",Lt,[e("div",Ht,[h[1]||(h[1]=e("span",{class:"text-2xl"},"ðŸŽ‚",-1)),e("span",Wt,o(t.employee.age?`Turning ${t.employee.age} today!`:"Celebrating another year!"),1)])]),h[2]||(h[2]=e("div",{class:"text-gray-600 text-sm mb-6 leading-relaxed"}," Hope your special day is filled with happiness, laughter, and all your favorite things! Thank you for being such an amazing part of our Xonobics family. ðŸŒŸ ",-1)),h[3]||(h[3]=e("div",{class:"bg-gradient-to-r from-teal-50 to-purple-50 rounded-lg p-4 mb-6 border border-teal-100"},[e("div",{class:"flex items-center justify-center space-x-2 text-teal-700 mb-2"},[e("span",{class:"text-lg"},"ðŸŽŠ"),e("span",{class:"font-semibold text-sm"},"From all of us at Xonobics")]),e("p",{class:"text-xs text-teal-600 text-center"}," May this new year of your life bring you joy, success, and wonderful memories! ")],-1)),e("div",{class:"flex justify-center"},[e("button",{onClick:s,class:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-3 rounded-lg font-medium hover:from-pink-600 hover:to-purple-600 transition-all duration-200 shadow-lg"}," Thank You! ðŸŽ‰ ")])]),e("div",qt,[e("div",Kt,[S(Qe,{class:"h-12 w-auto opacity-80"})])]),h[5]||(h[5]=e("div",{class:"absolute top-4 left-4 text-yellow-400 animate-pulse"},"âœ¨",-1)),h[6]||(h[6]=e("div",{class:"absolute top-6 right-6 text-pink-400 animate-pulse"},"ðŸŽˆ",-1)),h[7]||(h[7]=e("div",{class:"absolute bottom-4 left-6 text-purple-400 animate-pulse"},"ðŸŽ",-1)),h[8]||(h[8]=e("div",{class:"absolute bottom-6 right-4 text-indigo-400 animate-pulse"},"ðŸŒŸ",-1))])])):T("",!0)]))}},Oe=ke(Xt,[["__scopeId","data-v-0f159006"]]),Gt={class:"employee-dashboard"},Qt={class:"time-tracking-section"},Yt={class:"welcome-clock-display"},Jt={class:"welcome-section"},Zt={class:"greeting-text"},_t={class:"clock-section"},es={class:"current-time"},ts={class:"current-date"},ss={class:"work-status"},as={class:"status-text"},ns={class:"time-progress-block"},os={class:"duration-display"},rs={class:"duration-item"},is={class:"duration-item"},ls={class:"duration-item"},ds={class:"duration-value"},cs={class:"horizontal-clock-container"},us={class:"time-markers"},ms={class:"marker-time"},gs={class:"time-progress-bar"},bs={key:0,class:"current-time-indicator"},vs={class:"time-tooltip"},ys={class:"time-progress-info"},fs={class:"progress-left"},hs={class:"progress-time"},xs={class:"progress-right"},ps={class:"progress-percentage"},ks={class:"quick-actions"},ws={class:"actions-grid"},$s=["onClick"],Ss={key:0,class:"w-6 h-6",fill:"none",stroke:"#8B5CF6",viewBox:"0 0 24 24"},Ts={key:1,class:"w-6 h-6",fill:"none",stroke:"#3B82F6",viewBox:"0 0 24 24"},Cs={key:2,class:"w-6 h-6",fill:"none",stroke:"#F59E0B",viewBox:"0 0 24 24"},Bs={key:0,class:"debug-section"},As={class:"debug-content"},Ds={class:"debug-item"},Is={class:"debug-item"},js={class:"debug-item"},Ms={class:"debug-item"},Rs={class:"debug-item"},Es={class:"debug-item"},Ns={class:"debug-item"},Ps={class:"debug-item"},zs={class:"debug-item"},Vs={class:"debug-item"},Us={class:"debug-item"},Os={class:"birthday-section"},Fs={__name:"EmployeeDashboard",props:{stats:{type:Object,default:()=>({daysWithCompany:0,projectsContributed:0,performanceRank:"N/A"})},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,current_break_start:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m"}})},birthdayNotifications:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})},employeeName:{type:String,default:"Employee"}},emits:["action"],setup(t,{emit:M}){const c=t,x=M,{user:u}=Ne(),k=P(new Date),E=P(!1),C=P(!1),s=P({clockedIn:!1,onBreak:!1,clockInTime:null,breakStartTime:null,workDuration:"0h 0m",breakDuration:"0h 0m",completedBreakSessions:[],totalBreakTime:"0h 0m"});let d=null;const A=D(()=>k.value.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})),h=D(()=>k.value.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),y=D(()=>s.value.clockedIn),U=D(()=>s.value.onBreak),N=D(()=>s.value.onBreak?"On Break":s.value.clockedIn?"Working":"Not Clocked In"),ne=D(()=>s.value.onBreak?"status-break":s.value.clockedIn?"status-working":"status-out"),I=D(()=>s.value.workDuration),v=D(()=>s.value.breakDuration),$=D(()=>{let n=0;if(s.value.completedBreakSessions&&s.value.completedBreakSessions.forEach(b=>{if(b.start&&b.end){const f=new Date(b.start),V=new Date(b.end)-f;n+=Math.floor(V/(1e3*60))}}),s.value.onBreak&&s.value.breakStartTime){const b=new Date(s.value.breakStartTime),f=k.value,B=Math.max(0,f-b);n+=Math.floor(B/(1e3*60))}const a=Math.floor(n/60),g=n%60;return`${a}h ${g}m`}),q=D(()=>{const a=k.value.getHours();return a<7?"before-work":a>=19?"after-work":"during-work"}),oe=D(()=>{const n=[];return[7,8,9,10,11,12,13,14,15,16,17,18,19].forEach((g,b)=>{let f,B=!1;g===0?f="12 AM":g===12?(f="12 PM",B=!0):g<12?f=`${g} AM`:g===18?f="6 PM":g===19?f="7 PM":f=`${g-12} PM`,(g===12||g===13)&&(B=!0);const V=b/12*100;n.push({label:f,time:g,isLunch:B,position:V})}),n}),re=D(()=>{if(!y.value||!s.value.clockInTime)return 0;const n=k.value,a=new Date(s.value.clockInTime);if(n<a)return 0;const b=(n.getTime()-a.getTime())/(1e3*60*60);return Math.min(b/9*100,100)}),ce=D(()=>0),we=D(()=>{if(!y.value||!s.value.clockInTime)return 0;const n=new Date(s.value.clockInTime),a=n.getHours(),g=n.getMinutes();if(a<7)return 0;if(a>=19)return 100;{const f=(a-7)*60+g,B=12*60;return f/B*100}}),ie=D(()=>{if(!y.value||!s.value.clockInTime)return 0;const n=s.value.workDuration||"0h 0m",a=n.match(/(\d+)h/),g=n.match(/(\d+)m/),b=a?parseInt(a[1]):0,f=g?parseInt(g[1]):0,B=b*60+f,V=9*60,Z=B/V*100;return Math.min(Z,100)}),$e=D(()=>y.value?`${Math.round(re.value)}% Complete`:"Not Active"),Se=D(()=>{const n=k.value,a=n.getHours(),g=n.getMinutes();if(a<7)return 0;if(a>=19)return 100;{const f=(a-7)*60+g,B=12*60;return f/B*100}}),w=D(()=>{if(U.value)return"bg-yellow-100 text-yellow-700";if(y.value)return"bg-green-100 text-green-700";switch(q.value){case"before-work":return"bg-gray-100 text-gray-600";case"after-work":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}}),r=D(()=>{const n=[],a=(g,b)=>{if(g<7||g>=19)return null;const B=(g-7)*60+b,V=12*60;return B/V*100};if(s.value.completedBreakSessions&&s.value.completedBreakSessions.forEach(g=>{if(g.start&&g.end){const b=new Date(g.start),f=new Date(g.end),B=a(b.getHours(),b.getMinutes()),V=a(f.getHours(),f.getMinutes());B!==null&&V!==null&&V>B&&n.push({left:B,width:V-B,isOngoing:!1})}}),U.value&&s.value.breakStartTime){const g=new Date(s.value.breakStartTime),b=k.value,f=a(g.getHours(),g.getMinutes()),B=a(b.getHours(),b.getMinutes());f!==null&&B!==null&&B>f&&n.push({left:f,width:B-f,isOngoing:!0})}return n}),j=D(()=>[{id:"my-assessments",label:"My Assessments",icon:Ye,route:"competency-assessments.my-assessments"},{id:"work-reports",label:"Work Reports",icon:he,route:"work-reports.index"},{id:"leaderboard",label:"Leaderboard",icon:Je,route:"work-reports.leaderboard"}]),H=()=>{k.value=new Date,z()},z=()=>{if(s.value.clockedIn&&s.value.clockInTime){const n=new Date(s.value.clockInTime),g=k.value.getTime()-n.getTime();if(g>0){const b=Math.floor(g/36e5),f=Math.floor(g%(1e3*60*60)/(1e3*60));s.value.workDuration=`${b}h ${f}m`}}else s.value.clockedIn||(s.value.workDuration="0h 0m");if(s.value.onBreak&&s.value.breakStartTime){const n=new Date(s.value.breakStartTime),g=k.value.getTime()-n.getTime();if(g>0){const b=Math.floor(g/36e5),f=Math.floor(g%(1e3*60*60)/(1e3*60)),B=Math.floor(g%(1e3*60)/1e3);s.value.breakDuration=`${b}h ${f}m ${B}s`}}else s.value.onBreak||(s.value.breakDuration="0h 0m");s.value.completedBreakSessions.length>0},F=n=>{n.route&&(window.location.href=route(n.route)),x("action",n)},X=()=>{J(),window.dispatchEvent(new CustomEvent("dashboard-requests-sync")),window.axios&&window.axios.get("/api/attendance/current").then(n=>{var a,g;s.value={clockedIn:n.data.clocked_in||!1,onBreak:n.data.on_break||!1,clockInTime:n.data.clock_in_time||null,breakStartTime:n.data.current_break_start||null,workDuration:((a=n.data.todays_summary)==null?void 0:a.total_hours)||s.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:n.data.break_sessions||[],totalBreakTime:((g=n.data.todays_summary)==null?void 0:g.break_time)||"0h 0m"},z()}).catch(n=>{console.error("âŒ Dashboard: Failed to fetch from API:",n)})},Y=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(E.value=!E.value)},ue=()=>{var n,a,g,b,f,B,V,Z,ve;s.value={clockedIn:((n=c.currentAttendance)==null?void 0:n.clocked_in)||!1,onBreak:((a=c.currentAttendance)==null?void 0:a.on_break)||!1,clockInTime:((g=c.currentAttendance)==null?void 0:g.clock_in_time)||null,breakStartTime:((b=c.currentAttendance)==null?void 0:b.current_break_start)||null,workDuration:((B=(f=c.currentAttendance)==null?void 0:f.todays_summary)==null?void 0:B.total_hours)||"0h 0m",breakDuration:"0h 0m",completedBreakSessions:((V=c.currentAttendance)==null?void 0:V.break_sessions)||[],totalBreakTime:((ve=(Z=c.currentAttendance)==null?void 0:Z.todays_summary)==null?void 0:ve.break_time)||"0h 0m"}},J=()=>{try{const n=localStorage.getItem("floating-attendance-state");if(n){const a=JSON.parse(n),g=new Date(a.lastUpdate);if((new Date-g)/(1e3*60)<5)return s.value={clockedIn:a.clockedIn||!1,onBreak:a.onBreak||!1,clockInTime:a.clockInTime||null,breakStartTime:a.breakStartTime||null,workDuration:s.value.workDuration,breakDuration:s.value.breakDuration,completedBreakSessions:a.completedBreakSessions||a.break_sessions||[],totalBreakTime:s.value.totalBreakTime},z(),!0}}catch(n){console.warn("Dashboard: Failed to sync with FloatingWidget localStorage:",n)}return!1},me=n=>{var a,g;s.value={clockedIn:n.clocked_in||!1,onBreak:n.on_break||!1,clockInTime:n.clock_in_time||null,breakStartTime:n.current_break_start||null,workDuration:((a=n.todays_summary)==null?void 0:a.total_hours)||s.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:n.break_sessions||[],totalBreakTime:((g=n.todays_summary)==null?void 0:g.break_time)||s.value.totalBreakTime},z()},le=n=>{const{clockedIn:a,onBreak:g,clockInTime:b,breakStartTime:f,completedBreakSessions:B,todaysHours:V,currentBreakTime:Z,totalBreakTime:ve,action:Fe}=n.detail;let ye=s.value.completedBreakSessions||[];if(B&&Array.isArray(B))ye=B;else if(Fe==="end-break"&&s.value.onBreak&&s.value.breakStartTime){const Le={start:s.value.breakStartTime,end:new Date().toISOString(),isOngoing:!1};ye=[...ye,Le]}s.value={clockedIn:a||!1,onBreak:g||!1,clockInTime:b||null,breakStartTime:f||null,workDuration:V||s.value.workDuration,breakDuration:Z||"0h 0m",completedBreakSessions:ye,totalBreakTime:ve||s.value.totalBreakTime},z()},ge=()=>{var n;(n=c.birthdayNotifications)!=null&&n.currentUserBirthday?setTimeout(()=>{console.log("ðŸŽ‚ EmployeeDashboard: Showing birthday popup for:",c.birthdayNotifications.currentUserBirthday.user.name),C.value=!0},1500):console.log("ðŸŽ‚ EmployeeDashboard: No current user birthday found")},be=()=>{console.log("ðŸŽ‚ EmployeeDashboard: Closing birthday popup"),C.value=!1};return pe(async()=>{var n,a;if(H(),ue(),J(),d=setInterval(()=>{H(),k.value.getSeconds()%30===0&&J()},1e3),window.Echo&&((a=(n=u.value)==null?void 0:n.employee)!=null&&a.id)){const g=u.value.employee.id;try{window.Echo.private(`attendance.${g}`).listen(".attendance.updated",me)}catch(b){console.error("Dashboard: Failed to subscribe to Echo channel:",b)}}else console.warn("Dashboard: Echo not available or no employee ID");window.addEventListener("attendance-state-changed",le),window.addEventListener("keydown",Y),ge()}),Ee(()=>{var n,a;if(d&&clearInterval(d),window.Echo&&((a=(n=u.value)==null?void 0:n.employee)!=null&&a.id)){const g=u.value.employee.id;try{window.Echo.leave(`attendance.${g}`)}catch(b){console.warn("Dashboard: Error unsubscribing from Echo channels:",b)}}window.removeEventListener("attendance-state-changed",le),window.removeEventListener("keydown",Y)}),(n,a)=>{var g;return i(),m("div",Gt,[e("div",Qt,[e("div",Yt,[e("div",Jt,[e("h2",Zt,"Welcome back, "+o(t.employeeName)+"! ðŸ‘‹",1),a[0]||(a[0]=e("p",{class:"greeting-subtitle"},"Ready to make today productive?",-1))]),e("div",_t,[e("div",es,o(A.value),1),e("div",ts,o(h.value),1)]),e("div",ss,[e("div",{class:p(["status-indicator",ne.value])},[a[1]||(a[1]=e("div",{class:"status-dot"},null,-1)),e("span",as,o(N.value),1)],2)])]),e("div",ns,[e("div",os,[e("div",rs,[a[2]||(a[2]=e("div",{class:"duration-label"},"Work Time",-1)),e("div",{class:p(["duration-value",{"text-gray-500":U.value}])},o(I.value),3)]),e("div",is,[e("div",{class:p(["duration-label",{"text-orange-600":U.value}])},o(U.value?"Current Break":"Total Breaks"),3),e("div",{class:p(["duration-value",{"text-orange-600 font-bold":U.value}])},o(U.value?v.value:$.value),3)]),e("div",ls,[a[3]||(a[3]=e("div",{class:"duration-label"},"Progress",-1)),e("div",ds,o(Math.round(re.value))+"%",1)])]),e("div",cs,[e("div",us,[(i(!0),m(W,null,K(oe.value,(b,f)=>(i(),m("div",{key:f,class:p(["time-marker",{"start-marker":f===0,"end-marker":f===oe.value.length-1,"lunch-marker":b.isLunch,"regular-marker":!b.isLunch&&f!==0&&f!==oe.value.length-1}]),style:te({left:`${b.position}%`})},[a[4]||(a[4]=e("div",{class:"marker-line"},null,-1)),e("span",ms,o(b.label),1)],6))),128))]),e("div",gs,[a[7]||(a[7]=e("div",{class:"progress-bar-shimmer"},null,-1)),e("div",{class:"current-time-position",style:te({left:`${Se.value}%`})},a[5]||(a[5]=[e("div",{class:"time-position-dot"},null,-1)]),4),ce.value>0?(i(),m("div",{key:0,class:"pre-work-fill",style:te({width:`${ce.value}%`,transition:"width 0.5s ease-out"})},null,4)):T("",!0),y.value&&ie.value>0?(i(),m("div",{key:1,class:"work-progress-fill",style:te({left:`${we.value}%`,width:`${ie.value}%`,transition:"width 0.5s ease-out, left 0.5s ease-out"})},[y.value?(i(),m("div",bs,[a[6]||(a[6]=e("div",{class:"time-dot"},null,-1)),e("div",vs,o(A.value),1)])):T("",!0)],4)):T("",!0),(i(!0),m(W,null,K(r.value,(b,f)=>(i(),m("div",{key:`break-${f}`,class:p(["break-time-fill",{"ongoing-break":b.isOngoing}]),style:te({left:`${b.left}%`,width:`${b.width}%`})},null,6))),128))]),e("div",ys,[e("div",fs,[e("span",hs,o(A.value),1),e("span",{class:p(["progress-status",w.value])},o(N.value),3)]),e("div",xs,[e("span",ps,o($e.value),1)])])])])]),e("div",ks,[a[11]||(a[11]=e("h3",{class:"section-title"},"Quick Actions",-1)),e("div",ws,[(i(!0),m(W,null,K(j.value,b=>(i(),m("button",{key:b.id,onClick:f=>F(b),class:p(["action-button",`action-${b.id}`])},[b.id==="my-assessments"?(i(),m("svg",Ss,a[8]||(a[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))):b.id==="work-reports"?(i(),m("svg",Ts,a[9]||(a[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):b.id==="leaderboard"?(i(),m("svg",Cs,a[10]||(a[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]))):T("",!0),e("span",null,o(b.label),1)],10,$s))),128))])]),E.value?(i(),m("div",Bs,[a[23]||(a[23]=e("h3",{class:"section-title"},"Break Sessions Debug",-1)),e("div",As,[e("div",Ds,[a[12]||(a[12]=e("strong",null,"Completed Break Sessions:",-1)),R(" "+o(s.value.completedBreakSessions.length),1)]),e("div",Is,[a[13]||(a[13]=e("strong",null,"Current Break:",-1)),R(" "+o(U.value?"Yes":"No"),1)]),e("div",js,[a[14]||(a[14]=e("strong",null,"Break Start Time:",-1)),R(" "+o(s.value.breakStartTime||"None"),1)]),e("div",Ms,[a[15]||(a[15]=e("strong",null,"Current Break Duration:",-1)),R(" "+o(v.value),1)]),e("div",Rs,[a[16]||(a[16]=e("strong",null,"Total Break Time (Computed):",-1)),R(" "+o($.value),1)]),e("div",Es,[a[17]||(a[17]=e("strong",null,"Clocked In (Dashboard):",-1)),R(" "+o(s.value.clockedIn),1)]),e("div",Ns,[a[18]||(a[18]=e("strong",null,"isClockedIn Computed:",-1)),R(" "+o(y.value),1)]),e("div",Ps,[a[19]||(a[19]=e("strong",null,"Work Progress %:",-1)),R(" "+o(Math.round(re.value))+"% ",1)]),e("div",zs,[a[20]||(a[20]=e("strong",null,"Progress Width:",-1)),R(" "+o(ie.value)+"% ",1)]),e("div",Vs,[a[21]||(a[21]=e("strong",null,"Clock In Time:",-1)),R(" "+o(s.value.clockInTime||"None"),1)]),e("div",Us,[a[22]||(a[22]=e("strong",null,"Break Sessions:",-1)),e("pre",null,o(JSON.stringify(s.value.completedBreakSessions,null,2)),1)]),e("button",{onClick:X,class:"debug-button"}," Refresh from FloatingWidget ")])])):T("",!0),e("div",Os,[S(Ue,{"todays-birthdays":t.birthdayNotifications.todaysBirthdays,"upcoming-birthdays":t.birthdayNotifications.upcomingBirthdays,stats:t.birthdayNotifications.stats},null,8,["todays-birthdays","upcoming-birthdays","stats"])]),(g=t.birthdayNotifications)!=null&&g.currentUserBirthday?(i(),L(Oe,{key:1,show:C.value,employee:t.birthdayNotifications.currentUserBirthday,onClose:be},null,8,["show","employee"])):T("",!0)])}}},Ls=ke(Fs,[["__scopeId","data-v-498342ab"]]),Hs=["disabled"],Ws={class:"grid grid-cols-3 gap-4 mb-6"},qs={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},Ks={class:"text-2xl font-bold text-green-600"},Xs={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},Gs={class:"text-2xl font-bold text-red-600"},Qs={class:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100"},Ys={class:"text-2xl font-bold text-blue-600"},Js={class:"mb-6"},Zs={class:"flex justify-between items-center mb-2"},_s={class:"text-sm font-bold text-gray-900"},ea={class:"w-full bg-gray-200 rounded-full h-2"},ta={class:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1"},sa={class:"relative"},aa={key:0,class:"absolute top-0 left-0 right-0 h-6 scroll-fade-top z-10 pointer-events-none rounded-t-lg"},na={key:1,class:"absolute bottom-0 left-0 right-0 h-6 scroll-fade-bottom z-10 pointer-events-none rounded-b-lg"},oa={key:0,class:"space-y-2"},ra={key:0,class:"text-center py-8 text-gray-500"},ia={class:"flex items-center space-x-3 flex-1 min-w-0"},la={class:"min-w-0 flex-1"},da={class:"font-medium text-gray-900 truncate"},ca={class:"text-sm text-gray-600 truncate"},ua={class:"text-right flex-shrink-0 min-w-[100px]"},ma={class:"text-sm font-medium text-gray-900"},ga={class:"text-xs text-gray-600 whitespace-nowrap"},ba={key:0,class:"text-orange-600 ml-1"},va={key:1,class:"space-y-2"},ya={key:0,class:"text-center py-8 text-gray-500"},fa={class:"flex items-center space-x-3"},ha={class:"font-medium text-gray-900"},xa={class:"text-sm text-gray-600"},pa={class:"text-right"},ka={class:"text-xs text-gray-500"},wa={class:"mt-4 pt-4 border-t border-gray-200"},$a={class:"flex space-x-2"},Sa=["disabled"],Ta={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ca={__name:"AttendanceTrackingWidget",props:{attendanceData:{type:Object,required:!0,default:()=>({totalEmployeeCount:0,clockedInCount:0,missedClockInCount:0,clockedInEmployees:[],missedClockInEmployees:[],attendanceRate:0})}},setup(t){const M=t,c=P("clocked-in"),x=P(!1),u=P(null),k=P(!1),E=P(!1),C=P(!1),s=I=>I>=90?"bg-green-500":I>=75?"bg-yellow-500":"bg-red-500",d=I=>{if(!I||I==="Invalid Date")return"-";try{const v=new Date(I);return isNaN(v.getTime())?"-":v.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(v){return console.error("Error formatting time:",v),"-"}},A=()=>{x.value=!0;try{ae.reload({only:["attendanceTracking","adminStats"],preserveScroll:!0,onFinish:()=>{x.value=!1}})}catch(I){console.error("Failed to refresh attendance data:",I),x.value=!1}},h=async()=>{var I;if(!(M.attendanceData.missedClockInCount===0||C.value)){x.value=!0;try{const v=await window.axios.post("/api/attendance/send-clock-in-reminders",{},{headers:{"X-CSRF-TOKEN":(I=document.querySelector('meta[name="csrf-token"]'))==null?void 0:I.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});if(v.data.success){C.value=!0;const $=`âœ… Clock-in reminders sent to ${v.data.count} employees. Admin confirmation email sent.`,q=document.createElement("div");q.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",q.textContent=$,document.body.appendChild(q),setTimeout(()=>{q.remove()},5e3)}}catch(v){console.error("Failed to send reminder:",v);const $=document.createElement("div");$.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",$.textContent="âŒ Failed to send reminders. Please try again.",document.body.appendChild($),setTimeout(()=>{$.remove()},5e3)}finally{x.value=!1}}},y=async()=>{try{const I=await window.axios.get("/api/attendance/export-report",{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),v=window.URL.createObjectURL(new Blob([I.data])),$=document.createElement("a");$.href=v,$.setAttribute("download",`attendance-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild($),$.click(),$.remove(),window.URL.revokeObjectURL(v)}catch(I){console.error("Failed to export attendance report:",I),alert("Failed to export report. Please try again.")}},U=()=>{if(!u.value)return;const{scrollTop:I,scrollHeight:v,clientHeight:$}=u.value;k.value=I>10,E.value=I<v-$-10},N=async()=>{if(await Ce(),!u.value)return;const{scrollHeight:I,clientHeight:v}=u.value,$=I>v;E.value=$,k.value=!1},ne=async I=>{c.value=I,await N()};return pe(()=>{N()}),(I,v)=>(i(),L(se,{title:"Today's Attendance Tracking",description:"Employee clock-in status overview",icon:l(Q),iconVariant:"primary",variant:"elevated"},{headerActions:O(()=>[e("button",{onClick:A,disabled:x.value,class:"inline-flex items-center px-3 py-1.5 bg-teal-50 text-teal-700 text-sm font-medium rounded-lg hover:bg-teal-100 transition-colors"},[S(l(Ie),{class:p(["w-4 h-4 mr-1",x.value?"animate-spin":""])},null,8,["class"]),v[2]||(v[2]=R(" Refresh "))],8,Hs)]),default:O(()=>[e("div",Ws,[e("div",qs,[e("div",Ks,o(t.attendanceData.clockedInCount),1),v[3]||(v[3]=e("div",{class:"text-xs text-gray-600 mt-1"},"Clocked In",-1))]),e("div",Xs,[e("div",Gs,o(t.attendanceData.missedClockInCount),1),v[4]||(v[4]=e("div",{class:"text-xs text-gray-600 mt-1"},"Missed Clock-in",-1))]),e("div",Qs,[e("div",Ys,o(t.attendanceData.totalEmployeeCount),1),v[5]||(v[5]=e("div",{class:"text-xs text-gray-600 mt-1"},"Total Employees",-1))])]),e("div",Js,[e("div",Zs,[v[6]||(v[6]=e("span",{class:"text-sm font-medium text-gray-700"},"Attendance Rate",-1)),e("span",_s,o(t.attendanceData.attendanceRate)+"%",1)]),e("div",ea,[e("div",{class:p(["h-2 rounded-full transition-all duration-300",s(t.attendanceData.attendanceRate)]),style:te({width:t.attendanceData.attendanceRate+"%"})},null,6)])]),e("div",ta,[e("button",{onClick:v[0]||(v[0]=$=>ne("clocked-in")),class:p(["flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors",c.value==="clocked-in"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Clocked In ("+o(t.attendanceData.clockedInCount)+") ",3),e("button",{onClick:v[1]||(v[1]=$=>c.value="missed"),class:p(["flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors",c.value==="missed"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Missed ("+o(t.attendanceData.missedClockInCount)+") ",3)]),e("div",sa,[k.value?(i(),m("div",aa)):T("",!0),E.value?(i(),m("div",na)):T("",!0),e("div",{ref_key:"scrollContainer",ref:u,class:"max-h-64 overflow-y-auto custom-scrollbar",onScroll:U},[c.value==="clocked-in"?(i(),m("div",oa,[t.attendanceData.clockedInEmployees.length===0?(i(),m("div",ra,[S(l(Q),{class:"w-12 h-12 mx-auto mb-2 text-gray-300"}),v[7]||(v[7]=e("p",null,"No employees clocked in yet today",-1))])):T("",!0),(i(!0),m(W,null,K(t.attendanceData.clockedInEmployees,$=>(i(),m("div",{key:$.id,class:"employee-card flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100 gap-4"},[e("div",ia,[v[8]||(v[8]=e("div",{class:"w-2 h-2 bg-green-400 rounded-full flex-shrink-0"},null,-1)),e("div",la,[e("div",da,o($.name),1),e("div",ca,o($.job_title)+" â€¢ "+o($.department),1)])]),e("div",ua,[e("div",ma,"Clock-In : "+o(d($.clock_in_time)),1),e("div",ga,[$.on_break?(i(),m("span",ba,"(On Break)")):T("",!0)])])]))),128))])):T("",!0),c.value==="missed"?(i(),m("div",va,[t.attendanceData.missedClockInEmployees.length===0?(i(),m("div",ya,[S(l(De),{class:"w-12 h-12 mx-auto mb-2 text-green-300"}),v[9]||(v[9]=e("p",null,"All employees have clocked in today!",-1))])):T("",!0),(i(!0),m(W,null,K(t.attendanceData.missedClockInEmployees,$=>(i(),m("div",{key:$.id,class:"employee-card flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100"},[e("div",fa,[v[10]||(v[10]=e("div",{class:"w-2 h-2 bg-red-400 rounded-full"},null,-1)),e("div",null,[e("div",ha,o($.name),1),e("div",xa,o($.job_title)+" â€¢ "+o($.department),1)])]),e("div",pa,[v[11]||(v[11]=e("div",{class:"text-sm text-red-600 font-medium"},"Not clocked in",-1)),e("div",ka,o($.employee_code),1)])]))),128))])):T("",!0)],544)]),e("div",wa,[e("div",$a,[e("button",{onClick:h,disabled:t.attendanceData.missedClockInCount===0||x.value||C.value,class:p(["flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",C.value?"bg-green-50 text-green-700 border border-green-200":"bg-orange-50 text-orange-700 hover:bg-orange-100"])},[C.value?(i(),m("svg",Ta,v[12]||(v[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(i(),L(l(Ve),{key:0,class:"w-4 h-4 mr-2"})),R(" "+o(C.value?"Reminders Sent":"Send Reminder"),1)],10,Sa),e("button",{onClick:y,class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors"},[S(l(ze),{class:"w-4 h-4 mr-2"}),v[13]||(v[13]=R(" Export Report "))])])])]),_:1},8,["icon"]))}},Ba=ke(Ca,[["__scopeId","data-v-00b3faad"]]),Aa=["disabled"],Da={class:"grid grid-cols-4 gap-4 mb-6"},Ia={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},ja={class:"text-2xl font-bold text-red-600"},Ma={class:"text-center p-4 bg-yellow-50 rounded-xl border border-yellow-100"},Ra={class:"text-2xl font-bold text-yellow-600"},Ea={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},Na={class:"text-2xl font-bold text-orange-600"},Pa={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},za={class:"text-2xl font-bold text-red-600"},Va={class:"max-h-64 overflow-y-auto custom-scrollbar"},Ua={key:0,class:"text-center py-8 text-gray-500"},Oa={key:1,class:"space-y-2"},Fa={class:"flex items-center space-x-3"},La={class:"font-medium text-gray-900"},Ha={class:"text-sm text-gray-600"},Wa={class:"text-right"},qa={class:"text-xs text-gray-600"},Ka={class:"mt-4 pt-4 border-t border-gray-200"},Xa={class:"flex space-x-2"},Ga=["disabled"],Qa={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ya={__name:"BreakMonitoringWidget",props:{breakViolations:{type:Array,default:()=>[]}},setup(t){const M=t,c=P(!1),x=P(!1),u=()=>{c.value=!0;try{ae.reload({only:["breakViolations"],preserveScroll:!0,onFinish:()=>{c.value=!1}})}catch(C){console.error("Failed to refresh break data:",C),c.value=!1}},k=async()=>{var C;if(!(M.breakViolations.length===0||x.value)){c.value=!0;try{const s=await window.axios.post("/api/attendance/send-break-reminders",{violations:M.breakViolations},{headers:{"X-CSRF-TOKEN":(C=document.querySelector('meta[name="csrf-token"]'))==null?void 0:C.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});if(s.data.success){x.value=!0;const d=document.createElement("div");d.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",d.textContent=`âœ… Break reminders sent to ${s.data.count} employees. Admin confirmation email sent.`,document.body.appendChild(d),setTimeout(()=>{d.remove()},5e3)}}catch(s){console.error("Failed to send break reminders:",s);const d=document.createElement("div");d.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",d.textContent="âŒ Failed to send break reminders. Please try again.",document.body.appendChild(d),setTimeout(()=>{d.remove()},5e3)}finally{c.value=!1}}},E=async()=>{try{const C=await axios.get("/api/attendance/export-break-report",{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),s=window.URL.createObjectURL(new Blob([C.data])),d=document.createElement("a");d.href=s,d.setAttribute("download",`break-violations-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(d),d.click(),d.remove(),window.URL.revokeObjectURL(s)}catch(C){console.error("Failed to export break report:",C),alert("Failed to export report. Please try again.")}};return(C,s)=>(i(),L(se,{title:"Break Time Monitoring",description:"Employees exceeding break limits",icon:l(Q),iconVariant:"warning",variant:"elevated"},{headerActions:O(()=>[e("button",{onClick:u,disabled:c.value,class:"inline-flex items-center px-3 py-1.5 bg-orange-50 text-orange-700 text-sm font-medium rounded-lg hover:bg-orange-100 transition-colors"},[S(l(Ie),{class:p(["w-4 h-4 mr-1",c.value?"animate-spin":""])},null,8,["class"]),s[0]||(s[0]=R(" Refresh "))],8,Aa)]),default:O(()=>[e("div",Da,[e("div",Ia,[e("div",ja,o(t.breakViolations.length),1),s[1]||(s[1]=e("div",{class:"text-xs text-gray-600 mt-1"},"Break Violations",-1))]),e("div",Ma,[e("div",Ra,o(t.breakViolations.filter(d=>d.break_number===1).length),1),s[2]||(s[2]=e("div",{class:"text-xs text-gray-600 mt-1"},"1st Break (>15min)",-1))]),e("div",Ea,[e("div",Na,o(t.breakViolations.filter(d=>d.break_number===2).length),1),s[3]||(s[3]=e("div",{class:"text-xs text-gray-600 mt-1"},"2nd Break (>30min)",-1))]),e("div",Pa,[e("div",za,o(t.breakViolations.filter(d=>d.break_number===3).length),1),s[4]||(s[4]=e("div",{class:"text-xs text-gray-600 mt-1"},"3rd Break (>15min)",-1))])]),e("div",Va,[t.breakViolations.length===0?(i(),m("div",Ua,[S(l(De),{class:"w-12 h-12 mx-auto mb-2 text-green-300"}),s[5]||(s[5]=e("p",null,"All employees are within break limits!",-1))])):(i(),m("div",Oa,[(i(!0),m(W,null,K(t.breakViolations,d=>(i(),m("div",{key:`${d.employee_id}-${d.break_number}`,class:p(["employee-card flex items-center justify-between p-3 rounded-lg border",d.break_number===1&&"bg-yellow-50 border-yellow-200",d.break_number===2&&"bg-orange-50 border-orange-200",d.break_number===3&&"bg-red-50 border-red-200"])},[e("div",Fa,[e("div",{class:p(["w-3 h-3 rounded-full",d.break_number===1&&"bg-yellow-400",d.break_number===2&&"bg-orange-400",d.break_number===3&&"bg-red-400"])},null,2),e("div",null,[e("div",La,o(d.employee_name),1),e("div",Ha,o(d.job_title)+" â€¢ "+o(d.department),1)])]),e("div",Wa,[e("div",{class:p(["text-sm font-medium",d.break_number===1&&"text-yellow-700",d.break_number===2&&"text-orange-700",d.break_number===3&&"text-red-700"])}," Break "+o(d.break_number)+": "+o(d.duration),3),e("div",qa," Limit: "+o(d.limit)+" â€¢ Over by "+o(d.overtime),1)])],2))),128))]))]),e("div",Ka,[e("div",Xa,[e("button",{onClick:k,disabled:t.breakViolations.length===0||c.value||x.value,class:p(["flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",x.value?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 hover:bg-red-100"])},[x.value?(i(),m("svg",Qa,s[6]||(s[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(i(),L(l(Ve),{key:0,class:"w-4 h-4 mr-2"})),R(" "+o(x.value?"Reminders Sent":"Send Break Reminders"),1)],10,Ga),e("button",{onClick:E,class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors"},[S(l(ze),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=R(" Export Report "))])])])]),_:1},8,["icon"]))}},Ja=ke(Ya,[["__scopeId","data-v-802de418"]]),Za={class:"flex space-x-3"},_a=["onClick","disabled"],en={key:0,class:"space-y-6"},tn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},sn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},an={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},nn={class:"lg:col-span-2 space-y-4"},on={class:"grid grid-cols-3 gap-4 text-center"},rn={class:"p-4 bg-yellow-50 rounded-lg"},ln={class:"text-2xl font-bold text-yellow-600"},dn={class:"p-4 bg-teal-50 rounded-lg"},cn={class:"text-2xl font-bold text-teal-600"},un={class:"p-4 bg-purple-50 rounded-lg"},mn={class:"text-2xl font-bold text-purple-600"},gn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},bn={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},vn={class:"text-2xl font-bold text-green-600"},yn={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},fn={class:"text-2xl font-bold text-orange-600"},hn={class:"text-center p-4 bg-purple-50 rounded-xl border border-purple-100"},xn={class:"text-2xl font-bold text-purple-600"},pn={class:"text-center p-4 bg-teal-50 rounded-xl border border-teal-100"},kn={class:"text-2xl font-bold text-teal-600"},wn={class:"lg:col-span-1 space-y-4"},$n={class:"space-y-3"},Sn={class:"flex items-center"},Tn={class:"flex items-center"},Cn={class:"flex items-center"},Bn={class:"flex items-center"},An={class:"flex items-center"},Dn={class:"space-y-3"},In={class:"flex items-center justify-between"},jn={class:"text-sm font-medium text-gray-900"},Mn={key:1,class:"employee-layout"},Rn={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},En={class:"lg:col-span-3"},Nn={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},Pn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},zn={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Vn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Un={class:"sm:flex sm:items-start"},On={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},Fn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},Ln={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},Hn={class:"space-y-4"},Wn={class:"text-sm text-gray-600 mb-2"},qn={class:"text-sm text-gray-600 mb-4"},Kn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Xn=["disabled"],lo={__name:"Dashboard",props:{adminStats:{type:Object,default:()=>({})},managerStats:{type:Object,default:()=>({})},employeeStats:{type:Object,default:()=>({})},pendingApprovals:{type:Array,default:()=>[]},teamMembers:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({})},teamActivities:{type:Array,default:()=>[]},personalActivities:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},currentAttendance:{type:Object,default:null},birthdayData:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})},attendanceTracking:{type:Object,default:()=>({totalEmployeeCount:0,clockedInCount:0,missedClockInCount:0,clockedInEmployees:[],missedClockInEmployees:[],attendanceRate:0})},breakViolations:{type:Array,default:()=>[]},systemTimezone:{type:String,default:"UTC"},weatherApiKey:{type:String,default:null}},setup(t){const M=t,{user:c,roles:x}=Ne(),u=P(!1),k=P(!1),E=P(null),C=P(""),s=P(!1),d=D(()=>{const w=Array.isArray(x.value)&&x.value.includes("Admin");return console.log("ðŸ” Dashboard - User:",c.value),console.log("ðŸ” Dashboard - Roles:",x.value),console.log("ðŸ” Dashboard - Is Admin:",w),console.log("ðŸ” Dashboard - Which dashboard will show:",w?"Admin":"Employee"),w}),A=D(()=>Array.isArray(x.value)&&(x.value.includes("Manager")||x.value.includes("HR"))&&!d.value),h=D(()=>d.value?"Admin Dashboard":A.value?"Manager Dashboard":"My Dashboard"),y=D(()=>d.value?"System overview and administrative management tools":A.value?"Team management and performance overview":"Your personal workspace and activities");D(()=>new Date().toLocaleTimeString());const U=D(()=>{const w=[{id:"refresh",label:"Refresh",icon:"ArrowPathIcon",handler:I,disabled:u.value}];return d.value&&w.unshift({id:"settings",label:"System Settings",icon:"CogIcon",handler:()=>N("admin.roles.index")},{id:"analytics",label:"Analytics",icon:"ChartBarIcon",handler:()=>N("organizational-analytics.index")},{id:"reports",label:"View Reports",icon:"ChartBarIcon",handler:()=>N("reports.index"),primary:!0}),w}),N=w=>{try{ae.visit(route(w))}catch(r){console.error("Navigation error:",r)}},ne=w=>({ArrowPathIcon:Ie,CogIcon:Re,ChartBarIcon:he,ClockIcon:Q})[w]||Q,I=async()=>{u.value=!0;try{await ae.reload({only:["adminStats","managerStats","employeeStats","pendingApprovals","attendanceTracking"]})}catch(w){console.error("Refresh error:",w)}finally{u.value=!1}},v=()=>{k.value=!1,E.value=null,C.value=""},$=async()=>{var w,r,j,H;u.value=!0;try{const F=(await _.get("/api/attendance/current")).data;if(!F||typeof F!="object")throw new Error("Invalid attendance status response");let X;F.clocked_in?X="/api/attendance/clock-out":X="/api/attendance/clock-in",(await _.post(X,{},{headers:{"X-CSRF-TOKEN":(w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}})).data.success&&await q()}catch(z){console.error("Clock in/out error:",z);let F="Clock in/out failed. Please try again.";if(z.message==="Invalid attendance status response")F="Unable to get attendance status. Please ensure you have an employee profile.";else if(((r=z.response)==null?void 0:r.status)===419){window.location.reload();return}else(H=(j=z.response)==null?void 0:j.data)!=null&&H.message&&(F=z.response.data.message);alert(F)}finally{u.value=!1}},q=async()=>{try{const w=await _.get("/api/attendance/current");await ae.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0,preserveState:!0})}catch(w){console.error("Failed to update attendance status:",w),window.location.reload()}},oe=async w=>{var r,j,H;if(w.route)N(w.route);else if(w.type)try{u.value=!0,w.type==="take-break"?await _.post("/api/attendance/break-start",{},{headers:{"X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}):w.type==="end-break"&&await _.post("/api/attendance/break-end",{},{headers:{"X-CSRF-TOKEN":(j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}),await q()}catch(z){console.error("Break action failed:",z),((H=z.response)==null?void 0:H.status)===419&&window.location.reload()}finally{u.value=!1}},re=async w=>{try{await _.patch(route("tasks.toggle",w.id)),await I()}catch(r){console.error("Task toggle error:",r)}},ce=w=>{N("tasks.show",{task:w.id})},we=()=>{var w,r,j;console.log("ðŸŽ‚ Dashboard: Full birthday data:",M.birthdayData),console.log("ðŸŽ‚ Dashboard: Current user birthday:",(w=M.birthdayData)==null?void 0:w.currentUserBirthday),console.log("ðŸŽ‚ Dashboard: Today's birthdays:",(r=M.birthdayData)==null?void 0:r.todaysBirthdays),console.log("ðŸŽ‚ Dashboard: User info:",c.value),(j=M.birthdayData)!=null&&j.currentUserBirthday?setTimeout(()=>{console.log("ðŸŽ‚ Dashboard: Showing birthday popup for:",M.birthdayData.currentUserBirthday.user.name),s.value=!0},1e3):console.log("ðŸŽ‚ Dashboard: No current user birthday found")},ie=()=>{console.log("ðŸŽ‚ Dashboard: Closing birthday popup"),s.value=!1},$e=(w,r)=>{if(r===0)return"warning";const j=w/r*100;return j>=90?"excellent":j>=75?"good":"warning"},Se=(w,r)=>{if(r===0)return"No Data";const j=w/r*100;return j>=90?"Excellent":j>=75?"Good":"Needs Attention"};return pe(()=>{we()}),(w,r)=>(i(),L(Ge,null,{header:O(()=>[R(o(h.value),1)]),subtitle:O(()=>[R(o(y.value),1)]),headerActions:O(()=>[e("div",Za,[(i(!0),m(W,null,K(U.value,j=>(i(),m("button",{key:j.id,onClick:j.handler,disabled:j.disabled,class:p(["inline-flex items-center px-4 py-2 rounded-lg transition-all duration-200 text-sm font-medium",j.primary?"bg-teal-600 text-white hover:bg-teal-700 shadow-lg shadow-teal-500/25":"bg-white/60 text-gray-700 border border-gray-200 hover:bg-white hover:shadow-sm","disabled:opacity-50 disabled:cursor-not-allowed"])},[(i(),L(Ae(ne(j.icon)),{class:"w-4 h-4 mr-2"})),R(" "+o(j.label),1)],10,_a))),128))])]),default:O(()=>{var j,H,z,F,X,Y,ue,J,me,le,ge,be;return[d.value?(i(),m("div",en,[e("div",tn,[S(G,{value:t.adminStats.totalEmployees,label:"Total Employees",description:"Active workforce",icon:l(Me),variant:"primary",trend:t.adminStats.employeeTrend,route:"employees.index",loading:u.value},null,8,["value","icon","trend","loading"]),S(G,{value:`${t.adminStats.clockedInCount||0}/${t.adminStats.totalEmployeeCount||0}`,label:"Today's Attendance",description:"Clocked in employees",icon:l(Q),variant:"info",status:$e(t.adminStats.clockedInCount,t.adminStats.totalEmployeeCount),statusText:Se(t.adminStats.clockedInCount,t.adminStats.totalEmployeeCount),clickable:!1,loading:u.value},null,8,["value","icon","status","statusText","loading"]),S(G,{value:t.adminStats.pendingLeaves,label:"Pending Approvals",description:"Requires attention",icon:l(Te),variant:"warning",status:t.adminStats.pendingLeaves>10?"critical":"warning",statusText:t.adminStats.pendingLeaves>10?"High":"Normal",route:"approvals.index",urgent:t.adminStats.pendingLeaves>15,loading:u.value},null,8,["value","icon","status","statusText","urgent","loading"]),S(G,{value:t.adminStats.pendingAssessments,label:"Pending Assessments",description:"Review status",icon:l(fe),variant:"info",status:t.adminStats.pendingAssessments>5?"warning":"good",statusText:t.adminStats.pendingAssessments>5?"Review":"On Track",route:"assessment-dashboard",loading:u.value},null,8,["value","icon","status","statusText","loading"])]),e("div",sn,[S(G,{value:(t.adminStats.attendanceRate||0)+"%",label:"Attendance Rate",description:"This month",icon:l(Q),variant:"info",trend:t.adminStats.attendanceTrend||0,status:(t.adminStats.attendanceRate||0)>95?"excellent":(t.adminStats.attendanceRate||0)>85?"good":"warning",statusText:(t.adminStats.attendanceRate||0)>95?"Excellent":(t.adminStats.attendanceRate||0)>85?"Good":"Needs Attention",route:"attendance.reports",loading:u.value},null,8,["value","icon","trend","status","statusText","loading"]),S(G,{value:t.adminStats.workReportsCount||0,label:"Work Reports",description:"This month",icon:l(he),variant:"primary",trend:t.adminStats.workReportsTrend||0,status:(t.adminStats.workReportsCount||0)>50?"excellent":(t.adminStats.workReportsCount||0)>20?"good":"warning",statusText:(t.adminStats.workReportsCount||0)>50?"High Activity":(t.adminStats.workReportsCount||0)>20?"Active":"Low Activity",route:"work-reports.index",loading:u.value},null,8,["value","icon","trend","status","statusText","loading"]),S(G,{value:t.adminStats.successfulCalls||0,label:"Successful Calls",description:"This month",icon:l(Ze),variant:"success",trend:t.adminStats.successfulCallsTrend||0,status:(t.adminStats.successfulCalls||0)>100?"excellent":(t.adminStats.successfulCalls||0)>50?"good":"warning",statusText:(t.adminStats.successfulCalls||0)>100?"Excellent":(t.adminStats.successfulCalls||0)>50?"Good":"Needs Focus",route:"work-reports.leaderboard",loading:u.value},null,8,["value","icon","trend","status","statusText","loading"]),S(G,{value:(t.adminStats.avgPerformanceScore||0)+"%",label:"Avg Performance",description:"Team score",icon:l(fe),variant:"info",trend:t.adminStats.performanceTrend||0,status:(t.adminStats.avgPerformanceScore||0)>85?"excellent":(t.adminStats.avgPerformanceScore||0)>70?"good":"warning",statusText:(t.adminStats.avgPerformanceScore||0)>85?"Excellent":(t.adminStats.avgPerformanceScore||0)>70?"Good":"Needs Improvement",route:"performance.reports",loading:u.value},null,8,["value","icon","trend","status","statusText","loading"])]),e("div",an,[e("div",nn,[t.pendingApprovals.length>0?(i(),L(se,{key:0,title:"Pending Approvals Overview",description:"Items requiring your attention",icon:l(Te),iconVariant:"info",variant:"elevated"},{headerActions:O(()=>[e("button",{onClick:r[0]||(r[0]=n=>N("leaves.index")),class:"px-4 py-2 bg-teal-600 text-white text-sm rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-500/25"}," Manage All Approvals ")]),default:O(()=>[e("div",on,[e("div",rn,[e("div",ln,o(t.pendingApprovals.filter(n=>n.type==="leave").length),1),r[9]||(r[9]=e("div",{class:"text-sm text-gray-600"},"Leave Requests",-1))]),e("div",dn,[e("div",cn,o(t.pendingApprovals.filter(n=>n.type==="timesheet").length),1),r[10]||(r[10]=e("div",{class:"text-sm text-gray-600"},"Timesheets",-1))]),e("div",un,[e("div",mn,o(t.pendingApprovals.filter(n=>n.type==="competency-assessment").length),1),r[11]||(r[11]=e("div",{class:"text-sm text-gray-600"},"Assessments",-1))])])]),_:1},8,["icon"])):T("",!0),e("div",null,[r[12]||(r[12]=e("p",{class:"text-sm text-gray-500 mb-2"},"Debug: Attendance Tracking Widget",-1)),S(Ba,{"attendance-data":t.attendanceTracking},null,8,["attendance-data"])]),S(Ja,{"break-violations":t.breakViolations},null,8,["break-violations"]),S(se,{title:"Competency Management",description:"Track and manage employee competencies",icon:l(fe),iconVariant:"primary",variant:"elevated"},{headerActions:O(()=>[e("button",{onClick:r[1]||(r[1]=n=>N("assessment-dashboard")),class:"inline-flex items-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-500/25"},[r[13]||(r[13]=R(" View Details ")),S(l(ee),{class:"w-4 h-4 ml-1"})])]),default:O(()=>[e("div",gn,[e("div",bn,[e("div",vn,o(t.adminStats.completedAssessmentsThisMonth||0),1),r[14]||(r[14]=e("div",{class:"text-xs text-gray-600 mt-1"},"Completed",-1))]),e("div",yn,[e("div",fn,o(t.adminStats.pendingAssessments||0),1),r[15]||(r[15]=e("div",{class:"text-xs text-gray-600 mt-1"},"Pending",-1))]),e("div",hn,[e("div",xn,o(t.adminStats.activeAssessmentCycles||0),1),r[16]||(r[16]=e("div",{class:"text-xs text-gray-600 mt-1"},"Active Cycles",-1))]),e("div",pn,[e("div",kn,o(t.adminStats.averageRating||"-"),1),r[17]||(r[17]=e("div",{class:"text-xs text-gray-600 mt-1"},"Avg Rating",-1))])])]),_:1},8,["icon"])]),e("div",wn,[S(se,{title:"Quick Actions",description:"Common tasks",icon:l(je),iconVariant:"primary"},{default:O(()=>[e("div",$n,[e("button",{onClick:r[2]||(r[2]=n=>N("competencies.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl hover:from-teal-600 hover:to-teal-700 transition-all group shadow-lg shadow-teal-500/25"},[e("div",Sn,[S(l(fe),{class:"w-5 h-5 mr-3"}),r[18]||(r[18]=e("span",{class:"font-medium"},"Add Competency",-1))]),S(l(ee),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[3]||(r[3]=n=>N("employees.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",Tn,[S(l(Me),{class:"w-5 h-5 mr-3"}),r[19]||(r[19]=e("span",{class:"font-medium"},"Manage Employees",-1))]),S(l(ee),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[4]||(r[4]=n=>N("assessment-cycles.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",Cn,[S(l(je),{class:"w-5 h-5 mr-3"}),r[20]||(r[20]=e("span",{class:"font-medium"},"New Assessment Cycle",-1))]),S(l(ee),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[5]||(r[5]=n=>N("reports.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",Bn,[S(l(he),{class:"w-5 h-5 mr-3"}),r[21]||(r[21]=e("span",{class:"font-medium"},"View Reports",-1))]),S(l(ee),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[6]||(r[6]=n=>N("admin.roles.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",An,[S(l(Re),{class:"w-5 h-5 mr-3"}),r[22]||(r[22]=e("span",{class:"font-medium"},"Role Management",-1))]),S(l(ee),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})])])]),_:1},8,["icon"]),S(Ue,{"todays-birthdays":t.birthdayData.todaysBirthdays,"upcoming-birthdays":t.birthdayData.upcomingBirthdays,stats:t.birthdayData.stats,"system-timezone":t.systemTimezone},null,8,["todays-birthdays","upcoming-birthdays","stats","system-timezone"]),S(se,{title:"System Status",description:"All systems operational",icon:l(De),iconVariant:"success"},{default:O(()=>[e("div",Dn,[r[24]||(r[24]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"Database"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Healthy")])],-1)),r[25]||(r[25]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"API Services"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Online")])],-1)),e("div",In,[r[23]||(r[23]=e("span",{class:"text-sm text-gray-600"},"Uptime",-1)),e("span",jn,o(t.adminStats.systemUptime)+"%",1)])])]),_:1},8,["icon"])])])])):(i(),m("div",Mn,[e("div",Rn,[e("div",En,[S(Ls,{stats:t.employeeStats,"personal-activities":t.personalActivities,"my-tasks":t.myTasks,"recent-feedback":t.recentFeedback,"clocked-in":t.clockedIn,"current-attendance":t.currentAttendance,"birthday-notifications":t.birthdayData,loading:u.value,"employee-name":((j=l(c))==null?void 0:j.name)||"Employee",onClockInOut:$,onAction:oe,onToggleTask:re,onViewTask:ce},null,8,["stats","personal-activities","my-tasks","recent-feedback","clocked-in","current-attendance","birthday-notifications","loading","employee-name"])])])])),k.value?(i(),m("div",Nn,[e("div",Pn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:v}),e("div",zn,[e("div",Vn,[e("div",Un,[e("div",On,[S(l(Te),{class:"h-6 w-6 text-red-600"})]),e("div",Fn,[e("h3",Ln," Reject "+o(((H=E.value)==null?void 0:H.title)||"Request"),1),e("div",Hn,[e("div",null,[e("p",Wn,[r[26]||(r[26]=e("strong",null,"Requester:",-1)),R(" "+o((z=E.value)==null?void 0:z.requester),1)]),e("p",qn,[r[27]||(r[27]=e("strong",null,"Request:",-1)),R(" "+o((F=E.value)==null?void 0:F.description),1)])]),e("div",null,[r[28]||(r[28]=e("label",{for:"rejection-reason",class:"block text-sm font-medium text-gray-700 mb-2"},[R(" Reason for rejection "),e("span",{class:"text-red-500"},"*")],-1)),Ke(e("textarea",{id:"rejection-reason","onUpdate:modelValue":r[7]||(r[7]=n=>C.value=n),rows:"4",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a clear reason for rejecting this request...",required:""},null,512),[[Xe,C.value]]),r[29]||(r[29]=e("p",{class:"text-xs text-gray-500 mt-1"}," This reason will be sent to the employee and recorded in the system. ",-1))])])])])]),e("div",Kn,[e("button",{onClick:r[8]||(r[8]=(...n)=>w.confirmRejection&&w.confirmRejection(...n)),disabled:!C.value.trim(),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Reject Request ",8,Xn),e("button",{onClick:v,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):T("",!0),(X=t.birthdayData)!=null&&X.currentUserBirthday||s.value?(i(),L(Oe,{key:3,show:s.value,employee:((Y=t.birthdayData)==null?void 0:Y.currentUserBirthday)||{id:((J=(ue=l(c))==null?void 0:ue.employee)==null?void 0:J.id)||1,user:{name:((me=l(c))==null?void 0:me.name)||"Test User",email:((le=l(c))==null?void 0:le.email)||"test@example.com"},job_title:((be=(ge=l(c))==null?void 0:ge.employee)==null?void 0:be.job_title)||"Employee",department:null,age:25},onClose:ie},null,8,["show","employee"])):T("",!0)]}),_:1}))}};export{lo as default};
