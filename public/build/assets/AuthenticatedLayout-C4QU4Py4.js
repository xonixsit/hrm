import{e as T,f as g,z as H,B as J,c as u,i as $,o as l,a as t,t as A,y as ae,E as fe,n as f,u as i,k as z,F as G,r as Q,w as te,p as oe,Q as ve,g as q,s as K,A as X,l as ue,q as ce,C as ge,M as re,h as pe,N as de,O as ye,d as we,P as be,K as ne,R as ke}from"./app-vYWmCobb.js";import{u as ee}from"./useAuth-DKOVCbgF.js";import{D as se,E as xe,t as _e}from"./icons-CtrLp56w.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ae}from"./useAccessibility-2PKSbD3H.js";const Te={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Ie={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Be={class:"flex items-start"},Se={class:"ml-3 flex-1"},Ce={class:"mt-1 text-sm text-red-700"},Me={key:0,class:"mt-3"},$e={__name:"NavigationErrorDisplay",setup(m){const o=T(!1),e=T(""),s=T(null),a=T(null),c=g(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),h=(B,C=null)=>{e.value=B,s.value=C,o.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{p()},1e4)},y=async()=>{if(s.value)try{await s.value()}catch(B){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",B)}p()},p=()=>{o.value=!1,e.value="",s.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return H(()=>{typeof window<"u"&&(window.showNavigationError=h)}),J(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(B,C)=>o.value?(l(),u("div",Te,[t("div",Ie,[t("div",Be,[C[2]||(C[2]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",Se,[C[0]||(C[0]=t("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),t("div",Ce,A(e.value),1),s.value?(l(),u("div",Me,[t("button",{onClick:y,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},A(c.value),1)])):$("",!0)]),t("div",{class:"ml-4 flex-shrink-0"},[t("button",{onClick:p,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},C[1]||(C[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):$("",!0)}},V=T("light"),U=T("light"),W=T(!1),Z={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ie(){const m=g(()=>W.value?U.value:V.value),o=g(()=>Z[m.value]),e=g(()=>m.value==="dark"),s=g(()=>m.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(r){return console.warn("Failed to detect system theme:",r),"light"}},c=(r,d=!1)=>{try{const E={theme:b(r)?r:"light",useSystem:!!d,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(_){console.warn("Failed to save theme preference:",_);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},h=r=>{if(!(typeof document>"u"))try{const d=document.documentElement,_=b(r)?r:"light";d.classList.remove("theme-light","theme-dark"),d.classList.add(`theme-${_}`),y(_);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:_,config:Z[_]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(d){console.error("Failed to apply theme:",d);try{const _=document.documentElement;_.classList.remove("theme-light","theme-dark"),_.classList.add("theme-light"),y("light")}catch(_){console.error("Failed to apply fallback theme:",_)}}},y=r=>{if(!(typeof document>"u"))try{const d=document.documentElement;r==="dark"?(d.style.setProperty("--color-neutral-50","#0a0a0a"),d.style.setProperty("--color-neutral-100","#111827"),d.style.setProperty("--color-neutral-200","#262626"),d.style.setProperty("--color-neutral-300","#404040"),d.style.setProperty("--color-neutral-400","#525252"),d.style.setProperty("--color-neutral-500","#6b7280"),d.style.setProperty("--color-neutral-600","#a3a3a3"),d.style.setProperty("--color-neutral-700","#d4d4d4"),d.style.setProperty("--color-neutral-800","#e5e5e5"),d.style.setProperty("--color-neutral-900","#fafafa"),d.style.setProperty("--color-neutral-950","#ffffff")):(d.style.setProperty("--color-neutral-50","#fafafa"),d.style.setProperty("--color-neutral-100","#f5f5f5"),d.style.setProperty("--color-neutral-200","#e5e5e5"),d.style.setProperty("--color-neutral-300","#d4d4d4"),d.style.setProperty("--color-neutral-400","#a3a3a3"),d.style.setProperty("--color-neutral-500","#6b7280"),d.style.setProperty("--color-neutral-600","#525252"),d.style.setProperty("--color-neutral-700","#404040"),d.style.setProperty("--color-neutral-800","#262626"),d.style.setProperty("--color-neutral-900","#111827"),d.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(d){console.warn("Failed to update theme properties:",d)}},p=r=>{h(r)},B=r=>{if(!Z[r]){console.warn(`Theme "${r}" not found`);return}V.value=r,W.value=!1,c(r,!1),p(r)},C=()=>{W.value=!0;const r=a();U.value=r,c(r,!0),p(r)},v=()=>{const r=m.value==="light"?"dark":"light";B(r)},b=r=>Z.hasOwnProperty(r),k=()=>Object.values(Z),N=()=>{},j=()=>{const r=[];if(b(V.value)||r.push(`Invalid current theme: ${V.value}`),b(U.value)||r.push(`Invalid system theme: ${U.value}`),b(m.value)||r.push(`Invalid active theme: ${m.value}`),typeof document<"u"){const d=document.documentElement,_=d.classList.contains("theme-light"),E=d.classList.contains("theme-dark");!_&&!E&&r.push("No theme class found on document root"),_&&E&&r.push("Multiple theme classes found on document root");const P=`theme-${m.value}`;d.classList.contains(P)||r.push(`Expected theme class ${P} not found on document root`)}return{isValid:r.length===0,issues:r}},D=()=>{if(!(typeof document>"u"))try{const r=document.documentElement;return["theme-light","theme-dark"].forEach(_=>{r.classList.remove(_)}),!0}catch(r){return console.warn("Failed to cleanup theme classes:",r),!1}},R=()=>{try{V.value="light",U.value=a(),W.value=!1;try{localStorage.removeItem("theme-preference")}catch(r){console.warn("Failed to clear theme preference from localStorage:",r)}return h("light"),!0}catch(r){return console.error("Failed to reset theme to default:",r),!1}},O=()=>{console.warn("Attempting theme system recovery...");try{if(D(),R())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(r){console.error("Theme system recovery failed:",r);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(d){return console.error("Last resort theme recovery failed:",d),!1}}},w=()=>{try{V.value="light",U.value="light",W.value=!1;try{localStorage.removeItem("theme-preference")}catch(r){console.warn("Failed to clear theme preference:",r)}if(typeof document<"u"){const r=document.documentElement;r.classList.remove("theme-light","theme-dark","dark","light"),r.classList.add("theme-light"),r.style.setProperty("--color-neutral-50","#fafafa"),r.style.setProperty("--color-neutral-100","#f5f5f5"),r.style.setProperty("--color-neutral-200","#e5e5e5"),r.style.setProperty("--color-neutral-300","#d4d4d4"),r.style.setProperty("--color-neutral-400","#a3a3a3"),r.style.setProperty("--color-neutral-500","#6b7280"),r.style.setProperty("--color-neutral-600","#525252"),r.style.setProperty("--color-neutral-700","#404040"),r.style.setProperty("--color-neutral-800","#262626"),r.style.setProperty("--color-neutral-900","#111827"),r.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(r){console.error("Theme initialization failed:",r);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(d){console.error("Emergency theme fallback failed:",d)}return null}};return H(()=>{w()}),ae(m,r=>{p(r)}),{currentTheme:g(()=>V.value),systemTheme:g(()=>U.value),activeTheme:m,themeConfig:o,isDark:e,isLight:s,isSystemThemePreferred:g(()=>W.value),setTheme:B,toggleTheme:v,useSystemTheme:C,validateTheme:b,getAvailableThemes:k,debugThemeState:N,initializeTheme:w,validateThemeState:j,cleanupThemeClasses:D,resetThemeToDefault:R,recoverThemeSystem:O,cleanupAndApplyTheme:h,themes:g(()=>Z)}}const he={__name:"ETaxPlannerLogo",props:{className:{type:String,default:"w-auto h-12"}},setup(m){return(o,e)=>(l(),u("svg",{class:f(m.className),viewBox:"0 0 400 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e[0]||(e[0]=[fe('<rect x="20" y="30" width="60" height="70" rx="4" fill="#2563eb" stroke="#1d4ed8" stroke-width="2"></rect><rect x="28" y="38" width="12" height="3" fill="white"></rect><rect x="44" y="38" width="12" height="3" fill="white"></rect><rect x="60" y="38" width="12" height="3" fill="white"></rect><rect x="28" y="48" width="12" height="3" fill="white"></rect><rect x="44" y="48" width="12" height="3" fill="white"></rect><rect x="60" y="48" width="12" height="3" fill="white"></rect><rect x="28" y="58" width="12" height="3" fill="white"></rect><rect x="44" y="58" width="12" height="3" fill="white"></rect><rect x="60" y="58" width="12" height="3" fill="white"></rect><rect x="28" y="68" width="12" height="3" fill="white"></rect><rect x="44" y="68" width="12" height="3" fill="white"></rect><rect x="60" y="68" width="12" height="3" fill="white"></rect><rect x="28" y="78" width="12" height="3" fill="white"></rect><rect x="44" y="78" width="12" height="3" fill="white"></rect><rect x="60" y="78" width="12" height="3" fill="white"></rect><rect x="28" y="88" width="12" height="3" fill="white"></rect><rect x="44" y="88" width="12" height="3" fill="white"></rect><rect x="60" y="88" width="12" height="3" fill="white"></rect><circle cx="95" cy="65" r="25" fill="#10b981"></circle><circle cx="95" cy="58" r="8" fill="white"></circle><path d="M95 68 C85 68, 85 78, 85 78 L105 78 C105 78, 105 68, 95 68 Z" fill="white"></path><text x="140" y="55" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#2563eb">E-Tax Planner</text><text x="140" y="80" font-family="Arial, sans-serif" font-size="16" fill="#6b7280">HR Management Solution</text>',24)]),2))}},Ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ne={class:"flex justify-between h-20"},Le={class:"flex items-center space-x-8"},Pe={class:"flex-shrink-0 flex items-center"},De={class:"hidden lg:block"},Fe={class:"hidden lg:flex space-x-1"},ze=["href"],Oe={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={class:"hidden xl:inline"},He={class:"relative"},Ve={class:"p-2"},Ue={key:0,class:"space-y-1"},We={class:"space-y-1"},Ze=["href"],qe={class:"space-y-1 mt-1"},Je=["href"],Ye={class:"space-y-1 mt-1"},Xe=["href"],Ke={class:"flex items-center space-x-3"},et={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ot={class:"relative"},rt={class:"hidden lg:block text-left"},st={class:"font-medium text-sm"},at={class:"p-2"},nt={class:"py-1 space-y-1"},it=["href"],lt={class:"md:hidden px-4 pb-3"},ct={class:"mt-3 space-y-2"},dt=["href"],ut={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(m){var O;const o=m,{user:e,roles:s}=ee(),{isDark:a,toggleTheme:c}=ie(),h=T(!1),y=T(!1),p=T(!1);console.log("IntegratedTopNav - User:",e.value),console.log("IntegratedTopNav - Roles:",s.value),console.log("IntegratedTopNav - Is Admin:",(O=s.value)==null?void 0:O.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const B=g(()=>{var w;return(w=e.value)!=null&&w.name?e.value.name.split(" ").map(r=>r[0]).join("").toUpperCase():"U"}),C=g(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),v=g(()=>{try{const w=s.value||[],r=Array.isArray(w)?w:[],d=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"}],_=r.includes("Admin")||r.includes("Manager")||r.includes("HR"),E=r.includes("Admin");return _&&d.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"competency-assessments.index",label:"All Assessments",category:"management"}),E&&d.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"}),d}catch(w){return console.error("Error computing moreNavItems:",w),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"}]}}),b=g(()=>v.value.filter(w=>w.category==="regular")),k=g(()=>v.value.filter(w=>w.category==="management")),N=g(()=>v.value.filter(w=>w.category==="admin")),j=g(()=>[...C.value,...v.value]),D=w=>{var r;return o.currentRoute===w||((r=o.currentRoute)==null?void 0:r.startsWith(w.split(".")[0]))},R=()=>{ve.post(route("logout"))};return(w,r)=>{var d,_,E,P;return l(),u("nav",{class:f(["w-full transition-all duration-200 sticky top-0 z-50",i(a)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-white via-white to-blue-50/30 border-b border-gray-200/60 shadow-lg shadow-gray-900/10 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[t("div",Ee,[t("div",Ne,[t("div",Le,[t("div",Pe,[t("div",{class:f(["flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200",i(a)?"bg-gray-800/50 border border-gray-700/50":"bg-white/80 border border-gray-200/50 shadow-sm"])},[z(he,{className:"h-10 w-auto"}),t("div",De,[t("h1",{class:f(["text-xl font-bold leading-tight",i(a)?"text-white":"text-gray-900"])}," eTaxPlanner ",2),Array.isArray(i(s))&&i(s).includes("Admin")?(l(),u("span",{key:0,class:f(["text-xs px-2 py-0.5 rounded-full font-medium",i(a)?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200"])}," ADMIN ",2)):$("",!0)])],2)]),t("div",Fe,[(l(!0),u(G,null,Q(C.value,n=>(l(),u("a",{key:n.route,href:w.route(n.route),class:f(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",D(n.route)?i(a)?"bg-blue-600/20 text-blue-300":"bg-blue-50 text-blue-700":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[n.route==="dashboard"?(l(),u("svg",Oe,r[4]||(r[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):n.route==="attendances.index"?(l(),u("svg",Re,r[5]||(r[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):n.route==="leaves.index"?(l(),u("svg",je,r[6]||(r[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(l(),u("svg",Ge,r[7]||(r[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),t("span",Qe,A(n.label),1)],10,ze))),128)),t("div",He,[t("button",{onClick:r[0]||(r[0]=n=>h.value=!h.value),class:f(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",h.value?i(a)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[r[9]||(r[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),r[10]||(r[10]=t("span",{class:"hidden xl:inline"},"More",-1)),(l(),u("svg",{class:f(["w-4 h-4 transition-transform duration-200",{"rotate-180":h.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[8]||(r[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(t("div",{class:f(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",i(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",Ve,[v.value.length>0?(l(),u("div",Ue,[t("div",We,[(l(!0),u(G,null,Q(b.value,n=>(l(),u("a",{key:n.route,href:w.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?i(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[11]||(r[11]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,A(n.label),1)],10,Ze))),128))]),k.value.length>0?(l(),u("div",{key:0,class:f(["border-t pt-2 mt-2",i(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:f(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",i(a)?"text-gray-400":"text-gray-500"])}," Management ",2),t("div",qe,[(l(!0),u(G,null,Q(k.value,n=>(l(),u("a",{key:n.route,href:w.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?i(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[12]||(r[12]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("span",null,A(n.label),1)],10,Je))),128))])],2)):$("",!0),N.value.length>0?(l(),u("div",{key:1,class:f(["border-t pt-2 mt-2",i(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:f(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",i(a)?"text-red-400":"text-red-600"])},r[13]||(r[13]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",null,"Admin",-1)]),2),t("div",Ye,[(l(!0),u(G,null,Q(N.value,n=>(l(),u("a",{key:n.route,href:w.route(n.route),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?i(a)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[14]||(r[14]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,A(n.label),1)],10,Xe))),128))])],2)):$("",!0)])):$("",!0)])],2),[[oe,h.value]])])])]),t("div",Ke,[t("button",{onClick:r[1]||(r[1]=(...n)=>i(c)&&i(c)(...n)),class:f(["p-2.5 rounded-lg transition-all duration-200 flex items-center justify-center",i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50 border border-transparent hover:border-gray-600":"text-gray-500 hover:text-gray-700 hover:bg-white/60 border border-transparent hover:border-gray-200 hover:shadow-sm"])},[i(a)?(l(),u("svg",et,r[15]||(r[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(l(),u("svg",tt,r[16]||(r[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])))],2),t("div",ot,[t("button",{onClick:r[2]||(r[2]=n=>y.value=!y.value),class:f(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",y.value?i(a)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[t("div",{class:f(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",i(a)?"bg-blue-600 text-white":"bg-blue-500 text-white"])},A(B.value),3),t("div",rt,[t("div",st,A((d=i(e))==null?void 0:d.name),1),t("div",{class:f(["text-xs",i(a)?"text-gray-400":"text-gray-500"])},A(((_=i(s))==null?void 0:_.join(", "))||"User"),3)]),(l(),u("svg",{class:f(["w-4 h-4 transition-transform duration-200",{"rotate-180":y.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[17]||(r[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(t("div",{class:f(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",i(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",at,[t("div",{class:f(["px-3 py-2 border-b",i(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:f(["font-medium",i(a)?"text-white":"text-gray-900"])},A((E=i(e))==null?void 0:E.name),3),t("div",{class:f(["text-sm",i(a)?"text-gray-400":"text-gray-500"])},A((P=i(e))==null?void 0:P.email),3)],2),t("div",nt,[t("a",{href:w.route("profile.edit"),class:f(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},r[18]||(r[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",null,"Profile Settings",-1)]),10,it),t("button",{onClick:R,class:f(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},r[19]||(r[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",null,"Sign Out",-1)]))])])],2),[[oe,y.value]])])])])]),t("div",lt,[t("button",{onClick:r[3]||(r[3]=n=>p.value=!p.value),class:f(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",i(a)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[r[21]||(r[21]=t("span",null,"Menu",-1)),(l(),u("svg",{class:f(["w-5 h-5 transition-transform duration-200",{"rotate-180":p.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[20]||(r[20]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),te(t("div",ct,[(l(!0),u(G,null,Q(j.value,n=>(l(),u("a",{key:n.route,href:w.route(n.route),class:f(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",D(n.route)?i(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},A(n.label),11,dt))),128))],512),[[oe,p.value]])])],2)}}};function ht(m,o){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function mt(m,o){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const ft=["aria-live"],vt={class:"toast-content"},gt={key:0,class:"toast-icon"},pt={class:"toast-message"},yt={key:0,class:"toast-title"},wt={class:"toast-text"},bt={key:1,class:"toast-actions"},kt=["aria-label"],xt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:m=>["success","error","warning","info","loading"].includes(m)},position:{type:String,default:"top-right",validator:m=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(m)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:m=>["low","normal","high"].includes(m)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:m=>["sm","md","lg"].includes(m)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(m,{expose:o,emit:e}){const s=m,a=e,c=T(!1),h=T(null),y=T(null),p=T(100),B=T(!1),C=T(0),v=T(0),b=g(()=>se("x-mark")),k=g(()=>{if(s.icon)return se(s.icon);const x={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return se(x[s.type]||x.info)}),N=g(()=>["toast-notification",`toast-notification--${s.type}`,`toast-notification--${s.size}`,`toast-notification--${s.position}`,{"toast-notification--with-title":s.title,"toast-notification--persistent":s.persistent,"toast-notification--with-action":s.actionText}]),j=g(()=>({zIndex:s.zIndex})),D=g(()=>["w-5 h-5",{"animate-spin":s.type==="loading"}]),R=g(()=>s.closable||s.actionText),O=g(()=>[`toast-progress--${s.type}`]),w=g(()=>({width:`${p.value}%`})),r=()=>{c.value=!0,s.sound&&S(),!s.persistent&&s.duration>0&&E()},d=()=>{c.value=!1,M(),a("close")},_=()=>{a("action"),s.persistent||d()},E=()=>{s.duration<=0||(C.value=Date.now(),v.value=s.duration,h.value=setTimeout(()=>{d()},s.duration),P())},P=()=>{if(!s.showProgress)return;const x=Date.now(),F=()=>{if(!c.value||B.value)return;const me=Date.now()-x,le=Math.max(0,100-me/s.duration*100);p.value=le,le>0&&(y.value=requestAnimationFrame(F))};F()},n=()=>{if(!h.value||s.persistent)return;B.value=!0,clearTimeout(h.value),cancelAnimationFrame(y.value);const x=Date.now()-C.value;v.value=Math.max(0,s.duration-x)},I=()=>{!B.value||s.persistent||(B.value=!1,v.value>0&&(C.value=Date.now(),h.value=setTimeout(()=>{d()},v.value),P()))},M=()=>{h.value&&(clearTimeout(h.value),h.value=null),y.value&&(cancelAnimationFrame(y.value),y.value=null)},S=()=>{try{const x=new Audio,F={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};x.src=F[s.type]||F.info,x.volume=.3,x.play().catch(()=>{})}catch{}};return H(()=>{r()}),J(()=>{M()}),ae(()=>s.duration,()=>{c.value&&!s.persistent&&(M(),E())}),o({show:r,close:d,pauseTimer:n,resumeTimer:I}),(x,F)=>(l(),q(ge,{to:"body"},[c.value?(l(),u("div",{key:0,class:f(N.value),style:ce(j.value),role:"alert","aria-live":m.priority==="high"?"assertive":"polite",onMouseenter:n,onMouseleave:I},[t("div",vt,[m.showIcon?(l(),u("div",gt,[(l(),q(K(k.value),{class:f(D.value)},null,8,["class"]))])):$("",!0),t("div",pt,[m.title?(l(),u("div",yt,A(m.title),1)):$("",!0),t("div",wt,[X(x.$slots,"default",{},()=>[ue(A(m.message),1)],!0)])]),R.value?(l(),u("div",bt,[m.actionText?(l(),u("button",{key:0,onClick:_,class:"toast-action-button"},A(m.actionText),1)):$("",!0),m.closable?(l(),u("button",{key:1,onClick:d,class:"toast-close-button","aria-label":m.closeLabel},[(l(),q(K(b.value),{class:"w-4 h-4"}))],8,kt)):$("",!0)])):$("",!0)]),m.showProgress&&m.duration>0?(l(),u("div",{key:0,class:f(["toast-progress",O.value]),style:ce(w.value)},null,6)):$("",!0)],46,ft)):$("",!0)]))}},_t=Y(xt,[["__scopeId","data-v-11baa49e"]]);class At{constructor(){this.notifications=re([]),this.maxNotifications=T(5),this.defaultDuration=T(5e3),this.positions=re({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=re({enabled:!0,volume:.3})}add(o){const e=this.generateId(),s=o.position||"top-right",a={id:e,message:o.message||"",title:o.title||"",type:o.type||"info",position:s,duration:o.duration!==void 0?o.duration:this.defaultDuration.value,persistent:o.persistent||!1,closable:o.closable!==!1,showIcon:o.showIcon!==!1,showProgress:o.showProgress!==!1,actionText:o.actionText||"",icon:o.icon||"",size:o.size||"md",sound:o.sound!==!1&&this.sounds.enabled,priority:o.priority||"normal",zIndex:o.zIndex||1e3,createdAt:Date.now(),onAction:o.onAction||null,onClose:o.onClose||null,component:o.component||null,props:o.props||{}};return this.notifications.push(a),this.positions[s].push(a),this.manageQueueSize(s),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(e)},a.duration),e}remove(o){const e=this.notifications.find(h=>h.id===o);if(!e)return;const s=this.notifications.findIndex(h=>h.id===o);s>-1&&this.notifications.splice(s,1);const a=this.positions[e.position],c=a.findIndex(h=>h.id===o);c>-1&&a.splice(c,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(o=>{this.positions[o].splice(0)})}clearPosition(o){[...this.positions[o]].forEach(s=>{this.remove(s.id)})}clearType(o){this.notifications.filter(s=>s.type===o).forEach(s=>{this.remove(s.id)})}update(o,e){const s=this.notifications.find(a=>a.id===o);s&&Object.assign(s,e)}getByPosition(o){return this.positions[o]||[]}getByType(o){return this.notifications.filter(e=>e.type===o)}getById(o){return this.notifications.find(e=>e.id===o)}exists(o){return this.notifications.some(e=>e.id===o)}count(){return this.notifications.length}countByPosition(o){var e;return((e=this.positions[o])==null?void 0:e.length)||0}setMaxNotifications(o){this.maxNotifications.value=o,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(o){this.defaultDuration.value=o}setSoundsEnabled(o){this.sounds.enabled=o}setSoundVolume(o){this.sounds.volume=Math.max(0,Math.min(1,o))}pauseAll(){this.notifications.forEach(o=>{o.pauseTimer&&o.pauseTimer()})}resumeAll(){this.notifications.forEach(o=>{o.resumeTimer&&o.resumeTimer()})}success(o,e={}){return this.add({message:o,type:"success",...e})}error(o,e={}){return this.add({message:o,type:"error",persistent:e.persistent!==!1,...e})}warning(o,e={}){return this.add({message:o,type:"warning",...e})}info(o,e={}){return this.add({message:o,type:"info",...e})}loading(o,e={}){return this.add({message:o,type:"loading",persistent:!0,closable:!1,...e})}confirm(o={}){return new Promise(e=>{const s=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:o.title||"Confirm Action",description:o.message||"Are you sure you want to proceed?",confirmText:o.confirmText||"Confirm",cancelText:o.cancelText||"Cancel",...o},onAction:a=>{this.remove(s),e(a==="confirm")},onClose:()=>{e(!1)}})})}alert(o,e={}){return new Promise(s=>{const a=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:o,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(a),s(!0)},onClose:()=>{s(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(o){const e=this.positions[o];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(a=>{const c=this.notifications.findIndex(h=>h.id===a.id);c>-1&&this.notifications.splice(c,1)})}}const L=new At,Tt={class:"notification-container"},It={__name:"NotificationContainer",setup(m,{expose:o}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];g(()=>L.notifications.filter(v=>!v.component));const s=g(()=>L.notifications.filter(v=>v.component)),a=v=>{const b="fixed z-50 pointer-events-none",k={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${b} ${k[v]||k["top-right"]}`},c=v=>L.getByPosition(v),h=v=>v.includes("left")?"slide-left":v.includes("right")?"slide-right":v.includes("center")?"slide-center":"slide-right",y=v=>{L.remove(v)},p=(v,b="action")=>{const k=L.getById(v);k!=null&&k.onAction&&k.onAction(b)},B=()=>{window.notify={success:(v,b)=>L.success(v,b),error:(v,b)=>L.error(v,b),warning:(v,b)=>L.warning(v,b),info:(v,b)=>L.info(v,b),loading:(v,b)=>L.loading(v,b),confirm:v=>L.confirm(v),alert:(v,b)=>L.alert(v,b),clear:()=>L.clear(),remove:v=>L.remove(v)}},C=()=>{window.notify&&delete window.notify};return H(()=>{B()}),J(()=>{C()}),o({notificationQueue:L,notify:window.notify}),(v,b)=>(l(),u("div",Tt,[(l(),u(G,null,Q(e,k=>t("div",{key:k,class:f(a(k))},[z(ye,{name:h(k),tag:"div",class:"space-y-2"},{default:pe(()=>[(l(!0),u(G,null,Q(c(k),N=>(l(),q(_t,de({key:N.id},{ref_for:!0},N,{onClose:j=>y(N.id),onAction:j=>p(N.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(l(!0),u(G,null,Q(s.value,k=>(l(),q(K(k.component||"NotificationModal"),de({key:k.id,ref_for:!0},k.props,{onClose:N=>y(k.id),onConfirm:N=>p(k.id,"confirm"),onCancel:N=>p(k.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Bt=Y(It,[["__scopeId","data-v-67e6c621"]]),St={class:"floating-attendance-widget"},Ct={class:"status-indicator"},Mt={class:"time-info"},$t={class:"time-display"},Et={class:"time-label-mini"},Nt={class:"widget-header"},Lt={class:"status-info"},Pt={class:"status-text"},Dt={class:"timer-section"},Ft={class:"timer-value"},zt={class:"timer-label"},Ot={class:"quick-actions"},Rt=["disabled"],jt=["disabled"],Gt={class:"quick-stats"},Qt={class:"stat"},Ht={class:"stat-value"},Vt={class:"stat"},Ut={class:"stat-value"},Wt={__name:"FloatingAttendanceWidget",setup(m){const o=T(!1),e=T({clockedIn:!1,onBreak:!1,clockInTime:null}),s=T(!1),a=T("0h 0m 0s"),c=T(null),h=()=>{try{const n={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:c.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(n))}catch(n){console.warn("Failed to save attendance state to localStorage:",n)}},y=()=>{try{const n=localStorage.getItem("floating-attendance-state");if(n){const I=JSON.parse(n),M=new Date(I.lastUpdate);if((new Date-M)/(1e3*60)<5)return e.value.clockedIn=I.clockedIn||!1,e.value.onBreak=I.onBreak||!1,e.value.clockInTime=I.clockInTime||null,c.value=I.breakStartTime||null,!0}}catch(n){console.warn("Failed to load attendance state from localStorage:",n)}return!1};let p=null;const B=g(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),C=g(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),v=g(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),b=g(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),k=g(()=>s.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),N=g(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),j=g(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const n=new Date(e.value.clockInTime),M=new Date-n,S=Math.floor(M/(1e3*60)),x=Math.floor(S/60),F=S%60;return`${x}h ${F}m`}),D=g(()=>{if(e.value.onBreak&&c.value){const n=new Date(c.value);if(isNaN(n.getTime()))return"0h 0m 1s";{const M=Math.max(0,new Date-n),S=Math.floor(M/(1e3*60*60)),x=Math.floor(M%(1e3*60*60)/(1e3*60)),F=Math.floor(M%(1e3*60)/1e3);return`${S}h ${x}m ${F}s`}}return"0h 0m"});g(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const R=()=>{o.value=!o.value},O=()=>{if(e.value.clockedIn&&e.value.clockInTime){const n=new Date;let I;e.value.onBreak&&c.value?I=new Date(c.value):I=new Date(e.value.clockInTime);const M=n-I,S=Math.floor(M/(1e3*60*60)),x=Math.floor(M%(1e3*60*60)/(1e3*60)),F=Math.floor(M%(1e3*60)/1e3);a.value=`${S}h ${x}m ${F}s`}else a.value="0h 0m 0s"},w=async()=>{try{if(s.value=!0,e.value.clockedIn){const n=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,c.value=null,a.value="0h 0m 0s",h(),P()}else{const n=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=n.data.clock_in_time||new Date().toISOString(),h(),P()}}catch(n){console.error("Clock in/out failed:",n),alert("Action failed: "+n.message)}finally{s.value=!1}},r=async()=>{try{if(s.value=!0,e.value.onBreak){const n=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,c.value=null,h(),P()}else{c.value=new Date().toISOString(),e.value.onBreak=!0;const n=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});n.data.break_start_time&&(c.value=n.data.break_start_time),h(),P()}}catch(n){console.error("Break action failed:",n),alert("Action failed: "+n.message)}finally{s.value=!1}},d=async()=>{var n,I;try{const S=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=S.clocked_in||!1,e.value.onBreak=S.on_break||!1,e.value.clockInTime=S.clock_in_time||null,S.on_break)if(S.break_start_time)c.value=S.break_start_time;else if((n=S.current_session)!=null&&n.current_break_start)c.value=S.current_session.current_break_start;else if((I=S.current_session)!=null&&I.break_sessions&&S.current_session.break_sessions.length>0){const x=S.current_session.break_sessions[S.current_session.break_sessions.length-1];x&&!x.end&&(c.value=x.start)}else c.value||(c.value=new Date().toISOString());else c.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:c.value})}catch(M){console.error("Failed to fetch attendance status:",M)}},_=n=>{n.key==="attendance-update"&&d()},E=n=>{console.log("FloatingWidget: Received attendance state change:",n.detail);const{clockedIn:I,onBreak:M,clockInTime:S,breakStartTime:x}=n.detail;e.value.clockedIn=I,e.value.onBreak=M,e.value.clockInTime=S,M&&x?c.value=x:M||(c.value=null),h(),O(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:c.value,eventBreakStartTime:x})},P=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(n){console.warn("Failed to broadcast attendance update:",n)}};return H(async()=>{y()&&O(),await d(),h(),O(),p=setInterval(O,1e3),window.addEventListener("storage",_),window.addEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners registered")}),J(()=>{p&&clearInterval(p),window.removeEventListener("storage",_),window.removeEventListener("attendance-state-changed",E),console.log("FloatingWidget: Event listeners removed")}),(n,I)=>(l(),u("div",St,[o.value?$("",!0):(l(),u("div",{key:0,onClick:R,class:f(["floating-button",b.value])},[t("div",Ct,[t("div",{class:f(v.value)},null,2)]),t("div",Mt,[t("div",$t,A(a.value),1),t("div",Et,A(C.value),1)]),z(i(xe),{class:"w-4 h-4 expand-icon"})],2)),o.value?(l(),u("div",{key:1,class:"expanded-widget",onClick:I[0]||(I[0]=we(()=>{},["stop"]))},[t("div",Nt,[t("div",Lt,[t("div",{class:f(v.value)},null,2),t("span",Pt,A(B.value),1)]),t("button",{onClick:R,class:"minimize-btn",title:"Minimize"},[z(i(_e),{class:"w-4 h-4"})])]),t("div",Dt,[t("div",Ft,A(a.value),1),t("div",zt,A(C.value),1)]),t("div",Ot,[t("button",{onClick:w,disabled:s.value,class:f(N.value)},A(k.value),11,Rt),e.value.clockedIn?(l(),u("button",{key:0,onClick:r,disabled:s.value,class:"break-action"},[(l(),q(K(e.value.onBreak?i(mt):i(ht)),{class:"w-3 h-3"})),ue(" "+A(e.value.onBreak?"End":"Break"),1)],8,jt)):$("",!0)]),t("div",Gt,[t("div",Qt,[t("span",Ht,A(j.value),1),I[1]||(I[1]=t("span",{class:"stat-label"},"Today",-1))]),t("div",Vt,[t("span",Ut,A(D.value),1),I[2]||(I[2]=t("span",{class:"stat-label"},"Break",-1))])])])):$("",!0),o.value?(l(),u("div",{key:2,class:"backdrop",onClick:R})):$("",!0)]))}},Zt=Y(Wt,[["__scopeId","data-v-421365b8"]]),qt={class:"skip-links","aria-label":"Skip navigation links"},Jt=["href","onClick"],Yt={__name:"SkipLinks",setup(m){const{skipLinks:o,handleSkipLinkClick:e}=Ae();return(s,a)=>(l(),u("div",qt,[(l(!0),u(G,null,Q(i(o),c=>(l(),u("a",{key:c.href,href:c.href,class:"skip-link sr-only-focusable",onClick:h=>i(e)(h,c.href)},A(c.label),9,Jt))),128))]))}},Xt=Y(Yt,[["__scopeId","data-v-f9a7b518"]]),Kt={class:"live-regions"},eo={__name:"LiveRegion",setup(m){const o=T(null),e=T(null),s=T(null);return H(()=>{be.init()}),(a,c)=>(l(),u("div",Kt,[t("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:o},null,512),t("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),t("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:s},null,512)]))}},to=Y(eo,[["__scopeId","data-v-94955163"]]),oo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ro={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},so={class:"flex items-center space-x-3"},ao={class:"flex items-center space-x-6"},no=["href"],io={__name:"AppFooter",setup(m){const{isDark:o}=ie(),e=g(()=>new Date().getFullYear());return(s,a)=>(l(),u("footer",{class:f(["mt-auto border-t transition-all duration-200",i(o)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[t("div",oo,[t("div",ro,[t("div",so,[z(he,{className:"h-8 w-auto"})]),t("div",ao,[t("a",{href:s.route("dashboard"),class:f(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])}," Dashboard ",10,no),t("a",{href:"#",class:f(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])}," Support ",2),t("a",{href:"#",class:f(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])}," Privacy ",2)]),t("div",{class:f(["text-sm",i(o)?"text-gray-400":"text-gray-500"])}," © "+A(e.value)+" eTaxPlanner. All rights reserved. ",3)])])],2))}};function lo(){const{props:m}=ne(),{user:o}=ee();let e;const s=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(c=>{var y;const h=((y=o.value)==null?void 0:y.name)||"Employee";c.showNotification(`Hi ${h}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},a=()=>{const c=new Date,h=new Date(m.auth.user.clock_in_time);(isNaN(h.getTime())||c.getTime()-h.getTime()>5*60*1e3)&&s()};H(()=>{a(),e=setInterval(a,5*60*1e3)}),J(()=>{clearInterval(e)})}function co(){const{isAuthenticated:m,user:o}=ee(),e=ne();let s=null;const a=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(h=>{var p;const y=((p=o.value)==null?void 0:p.name)||"Employee";h.showNotification(`Hi ${y}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},c=()=>{if(!m.value)return;const h=e.props.auth.user.todays_attendance;if(h&&h.clock_in_time&&!h.clock_out_time){const y=new Date(h.clock_in_time);(new Date-y)/1e3/60/60>=7.5&&a()}};H(()=>{s=setInterval(c,5*60*1e3),c()}),J(()=>{s&&clearInterval(s)})}function uo(){const m=ne();return ae(()=>m.props.flash,o=>{!o||!window.notify||(o.success&&window.notify.success(o.success),o.error&&window.notify.error(o.error),o.warning&&window.notify.warning(o.warning),o.info&&window.notify.info(o.info))},{immediate:!0,deep:!0}),{flash:m.props.flash}}const ho={class:"relative"},mo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},fo={key:0,class:"flex items-center space-x-3"},vo={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},go={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},po={__name:"AuthenticatedLayout",setup(m){const o=ke(),{getAuthError:e}=ee(),{isDark:s,initializeTheme:a}=ie();lo(),co(),uo(),H(()=>{a()});const c=g(()=>e()),h=g(()=>!!c.value),y=g(()=>{try{return route().current()||""}catch(p){return console.warn("[LAYOUT] Route helper not available:",p),window.location.pathname.replace("/","")||"dashboard"}});return g(()=>!!o.header),(p,B)=>(l(),u("div",{class:f(["min-h-screen transition-all duration-300 flex flex-col",i(s)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-blue-50/30"])},[z(Xt),z(to),z($e),z(Bt),z(Zt),h.value?(l(),u("div",{key:0,class:f(["p-4 border z-50 relative rounded-lg mx-4 mt-4",i(s)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[B[0]||(B[0]=t("p",{class:"font-semibold"},"Authentication Error:",-1)),t("p",null,A(c.value),1),B[1]||(B[1]=t("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):$("",!0),z(ut,{"current-route":y.value},null,8,["current-route"]),t("div",ho,[i(o).header?(l(),u("header",{key:0,class:f(["border-b transition-all duration-200 backdrop-blur-sm",i(s)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[t("div",mo,[t("div",{class:f(["flex items-center justify-between",i(s)?"text-white":"text-gray-900"])},[t("div",null,[t("h1",{class:f(["text-2xl font-bold transition-colors duration-200",i(s)?"text-white":"text-gray-900"])},[X(p.$slots,"header",{},void 0,!0)],2),i(o).subtitle?(l(),u("div",{key:0,class:f(["mt-1 text-sm",i(s)?"text-gray-300":"text-gray-600"])},[X(p.$slots,"subtitle",{},void 0,!0)],2)):$("",!0)]),i(o).headerActions?(l(),u("div",fo,[X(p.$slots,"headerActions",{},void 0,!0)])):$("",!0)],2)])],2)):$("",!0),t("main",vo,[t("div",go,[t("div",{class:f(["relative transition-all duration-200",i(o).contentBackground!==!1&&(i(s)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[t("div",{class:f([i(o).contentBackground!==!1?"p-6 sm:p-8":""])},[X(p.$slots,"default",{},void 0,!0)],2)],2)])])]),z(io)],2))}},_o=Y(po,[["__scopeId","data-v-84132197"]]);export{_o as A,ht as a,ie as b,L as n,mt as r,uo as u};
