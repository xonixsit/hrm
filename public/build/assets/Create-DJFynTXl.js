import{x as J,e as z,f,A as K,g as N,o as n,h as b,k as w,a as e,n as u,d as Q,w as x,c,i as g,l as v,F as $,r as R,u as o,J as W,t as l,b as L,p as U,j as X}from"./app-D93uZ2Am.js";import{A as Z}from"./AuthenticatedLayout-DzB4tsoZ.js";import{P as ee}from"./PageLayout-sg16z6Y0.js";import{C}from"./ContentCard-CnpIEY4x.js";import"./useAuth-D_Wf1JJG.js";import"./icons-D7h1BOEU.js";import"./UsersIcon-ntbEcHPP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader-FUFpT675.js";import"./Icon-B81vyHO0.js";const te={class:"mb-8"},se={class:"flex items-center justify-between"},oe={class:"flex items-center space-x-4"},re={class:"flex items-center"},ae={class:"flex-1 h-0.5 bg-gray-200 mx-4"},le={class:"flex items-center"},ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ie={class:"lg:col-span-2"},de={class:"space-y-6"},ce={class:"space-y-3"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},me=["onClick"],fe={class:"flex items-start"},ve={class:"flex items-center h-5"},pe=["id","value"],xe={class:"ml-3 flex-1"},ge=["for"],ye={key:0,class:"text-sm text-gray-500 mt-1"},be={class:"flex items-center mt-2 text-xs text-gray-500"},_e={key:0,class:"mt-1 text-sm text-red-600"},he={class:"space-y-4"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"space-y-2"},Ce={class:"relative"},De=["min"],Le={key:0,class:"text-sm text-red-600"},Me={class:"space-y-2"},Be={class:"relative"},Ve=["min"],je={key:0,class:"text-sm text-red-600"},Se={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},Ie={class:"flex"},Te={class:"ml-3"},Ae={class:"mt-2 text-sm text-red-700"},Pe={class:"space-y-3"},ze={class:"relative"},Ne={class:"absolute bottom-3 right-3 text-xs text-gray-400"},$e={key:0,class:"text-sm text-red-600"},Re={class:"flex justify-end pt-6 border-t border-gray-200"},Ue=["disabled"],Ee={class:"space-y-6"},He={class:"bg-gray-50 rounded-lg p-6 space-y-4"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qe={class:"mt-1 text-sm text-gray-900"},Fe={class:"mt-1 text-sm text-gray-900"},Ye={class:"mt-1 text-sm text-gray-900"},Ge={class:"mt-1 text-sm text-gray-900"},Je={class:"mt-1 text-sm text-gray-900"},Ke={class:"flex items-start"},Qe={class:"flex items-center h-5"},We={class:"flex justify-between pt-6 border-t border-gray-200"},Xe=["disabled"],Ze={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},et={key:1,class:"mr-2 -ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tt={class:"lg:col-span-1 space-y-6"},st={class:"text-center"},ot={class:"mt-2 text-3xl font-bold text-teal-600"},rt={class:"mt-1 text-sm text-gray-500"},at={class:"space-y-3"},lt={class:"text-sm text-gray-600"},nt={class:"text-sm font-medium text-gray-900"},yt={__name:"Create",props:{leaveTypes:{type:Array,default:()=>[]}},setup(E){const M=E,s=J({leave_type_id:"",from_date:"",to_date:"",reason:""}),d=z(1),B=f(()=>M.leaveTypes),V=f(()=>new Date().toISOString().split("T")[0]),p=f(()=>M.leaveTypes.find(r=>r.id==s.leave_type_id)),j=f(()=>{if(!s.from_date||!s.to_date)return 0;const r=s.from_date.split("-"),t=s.to_date.split("-"),i=new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2])),y=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));if(y<i)return 0;const a=y.getTime()-i.getTime();return Math.floor(a/(1e3*60*60*24))+1}),S=f(()=>p.value&&p.value.balance!==null&&p.value.balance!==void 0?j.value>p.value.balance:!1),I=f(()=>s.leave_type_id&&s.from_date&&s.to_date&&s.reason&&s.reason.trim().length>=10&&!S.value),H=f(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Leaves",href:route("leaves.index")},{label:"Apply",current:!0}]),O=f(()=>[{id:"save-draft",label:"Save Draft",variant:"secondary",handler:G}]),h=r=>r?new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Not selected",T=()=>{if(!s.from_date||!s.to_date)return"Not calculated";const r=s.from_date.split("-"),t=s.to_date.split("-"),i=new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2])),a=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])).getTime()-i.getTime(),m=Math.floor(a/(1e3*60*60*24))+1;if(m===1)return"1 day";if(m<=7)return`${m} days`;const k=Math.floor(m/7),D=m%7;return D===0?k===1?"1 week":`${k} weeks`:`${k} week${k>1?"s":""} and ${D} day${D>1?"s":""}`},q=r=>{s.leave_type_id=r.id},A=()=>{if(s.from_date&&s.to_date){const r=new Date(s.from_date);new Date(s.to_date)<r&&(s.to_date=s.from_date)}},P=()=>{I.value&&(d.value=2)},_=z(!1),F=()=>{d.value=1,_.value=!1},Y=()=>{d.value===1?P():d.value===2&&_.value&&s.post(route("leaves.store"),{onSuccess:()=>{},onError:r=>{Object.keys(r).some(t=>["leave_type_id","from_date","to_date","reason"].includes(t))&&(d.value=1)}})},G=()=>{};return K(()=>{if(!s.from_date){const r=new Date;r.setDate(r.getDate()+1),s.from_date=r.toISOString().split("T")[0]}}),(r,t)=>(n(),N(Z,null,{default:b(()=>[w(ee,{title:"Apply for Leave",subtitle:"Submit a leave application for approval",breadcrumbs:H.value,actions:O.value},{default:b(()=>[e("div",te,[e("div",se,[e("div",oe,[e("div",re,[e("div",{class:u(["flex items-center justify-center w-8 h-8 rounded-full border-2",d.value>=1?"bg-teal-600 border-teal-600 text-white":"border-gray-300 text-gray-500"])},t[5]||(t[5]=[e("span",{class:"text-sm font-medium"},"1",-1)]),2),e("span",{class:u(["ml-2 text-sm font-medium",d.value>=1?"text-teal-600":"text-gray-500"])},"Leave Details",2)]),e("div",ae,[e("div",{class:u(["h-full transition-all duration-300",d.value>=2?"bg-teal-600":"bg-gray-200"])},null,2)]),e("div",le,[e("div",{class:u(["flex items-center justify-center w-8 h-8 rounded-full border-2",d.value>=2?"bg-teal-600 border-teal-600 text-white":"border-gray-300 text-gray-500"])},t[6]||(t[6]=[e("span",{class:"text-sm font-medium"},"2",-1)]),2),e("span",{class:u(["ml-2 text-sm font-medium",d.value>=2?"text-teal-600":"text-gray-500"])},"Review & Submit",2)])])])]),e("div",ne,[e("div",ie,[w(C,null,{default:b(()=>{var i,y;return[e("form",{onSubmit:Q(Y,["prevent"]),class:"space-y-8"},[x(e("div",de,[t[19]||(t[19]=e("div",{class:"border-b border-gray-200 pb-4"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Leave Information"),e("p",{class:"mt-1 text-sm text-gray-600"}," Please provide the details of your leave application. ")],-1)),e("div",ce,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},[v(" Leave Type "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ue,[(n(!0),c($,null,R(B.value,a=>(n(),c("div",{key:a.id,onClick:m=>q(a),class:u(["relative rounded-lg border p-4 cursor-pointer focus:outline-none transition-all duration-200",o(s).leave_type_id===a.id?"border-teal-600 ring-2 ring-teal-600 bg-teal-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"])},[e("div",fe,[e("div",ve,[x(e("input",{id:`leave-type-${a.id}`,value:a.id,"onUpdate:modelValue":t[0]||(t[0]=m=>o(s).leave_type_id=m),type:"radio",class:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300"},null,8,pe),[[W,o(s).leave_type_id]])]),e("div",xe,[e("label",{for:`leave-type-${a.id}`,class:"block text-sm font-medium text-gray-900 cursor-pointer"},l(a.name),9,ge),a.description?(n(),c("p",ye,l(a.description),1)):g("",!0),e("div",be,[t[7]||(t[7]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,l(a.balance||"N/A")+" days available",1)])])])],10,me))),128))]),o(s).errors.leave_type_id?(n(),c("div",_e,l(o(s).errors.leave_type_id),1)):g("",!0)]),e("div",he,[t[15]||(t[15]=e("h4",{class:"text-sm font-medium text-gray-900"},"Leave Period",-1)),e("div",ke,[e("div",we,[t[10]||(t[10]=e("label",{for:"from_date",class:"block text-sm font-medium text-gray-700"},[v(" Start Date "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ce,[x(e("input",{id:"from_date","onUpdate:modelValue":t[1]||(t[1]=a=>o(s).from_date=a),type:"date",min:V.value,class:u(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm pl-10",{"border-red-300 focus:border-red-500 focus:ring-red-500":o(s).errors.from_date}]),onChange:A},null,42,De),[[L,o(s).from_date]]),t[9]||(t[9]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),o(s).errors.from_date?(n(),c("div",Le,l(o(s).errors.from_date),1)):g("",!0)]),e("div",Me,[t[12]||(t[12]=e("label",{for:"to_date",class:"block text-sm font-medium text-gray-700"},[v(" End Date "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Be,[x(e("input",{id:"to_date","onUpdate:modelValue":t[2]||(t[2]=a=>o(s).to_date=a),type:"date",min:o(s).from_date||V.value,class:u(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm pl-10",{"border-red-300 focus:border-red-500 focus:ring-red-500":o(s).errors.to_date}]),onChange:A},null,42,Ve),[[L,o(s).to_date]]),t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),o(s).errors.to_date?(n(),c("div",je,l(o(s).errors.to_date),1)):g("",!0)])]),S.value?(n(),c("div",Se,[e("div",Ie,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Te,[t[13]||(t[13]=e("h3",{class:"text-sm font-medium text-red-800"}," Leave balance exceeded ",-1)),e("div",Ae,[e("p",null," You have requested "+l(j.value)+" days, but you only have "+l(p.value.balance)+" days available for "+l(p.value.name)+". ",1)])])])])):g("",!0)]),e("div",Pe,[t[16]||(t[16]=e("label",{for:"reason",class:"block text-sm font-medium text-gray-700"},[v(" Reason for Leave "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ze,[x(e("textarea",{id:"reason","onUpdate:modelValue":t[3]||(t[3]=a=>o(s).reason=a),rows:"4",maxlength:"500",placeholder:"Please provide a detailed reason for your leave application. Include any relevant information that will help your manager understand the context of your application.",class:u(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm resize-none",{"border-red-300 focus:border-red-500 focus:ring-red-500":o(s).errors.reason}])},null,2),[[L,o(s).reason]]),e("div",Ne,l(((i=o(s).reason)==null?void 0:i.length)||0)+"/500 ",1)]),o(s).errors.reason?(n(),c("div",$e,l(o(s).errors.reason),1)):g("",!0),t[17]||(t[17]=e("div",{class:"text-sm text-gray-500"},[e("svg",{class:"inline w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),v(" Be specific about your leave reason to help expedite the approval process. ")],-1))]),e("div",Re,[e("button",{type:"button",onClick:P,disabled:!I.value,class:"inline-flex items-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},t[18]||(t[18]=[v(" Review Application "),e("svg",{class:"ml-2 -mr-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,Ue)])],512),[[U,d.value===1]]),x(e("div",Ee,[t[29]||(t[29]=e("div",{class:"border-b border-gray-200 pb-4"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Review Your Application"),e("p",{class:"mt-1 text-sm text-gray-600"}," Please review your leave application details before submitting. ")],-1)),e("div",He,[e("div",Oe,[e("div",null,[t[20]||(t[20]=e("dt",{class:"text-sm font-medium text-gray-500"},"Leave Type",-1)),e("dd",qe,l(((y=p.value)==null?void 0:y.name)||"Not selected"),1)]),e("div",null,[t[21]||(t[21]=e("dt",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),e("dd",Fe,l(T()),1)]),e("div",null,[t[22]||(t[22]=e("dt",{class:"text-sm font-medium text-gray-500"},"Start Date",-1)),e("dd",Ye,l(h(o(s).from_date)),1)]),e("div",null,[t[23]||(t[23]=e("dt",{class:"text-sm font-medium text-gray-500"},"End Date",-1)),e("dd",Ge,l(h(o(s).to_date)),1)])]),e("div",null,[t[24]||(t[24]=e("dt",{class:"text-sm font-medium text-gray-500"},"Reason",-1)),e("dd",Je,l(o(s).reason),1)])]),e("div",Ke,[e("div",Qe,[x(e("input",{id:"confirmation","onUpdate:modelValue":t[4]||(t[4]=a=>_.value=a),type:"checkbox",class:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded"},null,512),[[X,_.value]])]),t[25]||(t[25]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"confirmation",class:"font-medium text-gray-700"}," I confirm that the information provided is accurate "),e("p",{class:"text-gray-500"}," By checking this box, I acknowledge that I have reviewed my leave application and confirm that all details are correct. ")],-1))]),e("div",We,[e("button",{type:"button",onClick:F,class:"inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},t[26]||(t[26]=[e("svg",{class:"mr-2 -ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),v(" Back to Details ")])),e("button",{type:"submit",disabled:o(s).processing||!_.value,class:"inline-flex items-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[o(s).processing?(n(),c("svg",Ze,t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),c("svg",et,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),v(" "+l(o(s).processing?"Submitting Application...":"Submit Application"),1)],8,Xe)])],512),[[U,d.value===2]])],32)]}),_:1})]),e("div",tt,[o(s).from_date&&o(s).to_date?(n(),N(C,{key:0},{default:b(()=>[e("div",st,[t[30]||(t[30]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-teal-100"},[e("svg",{class:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[31]||(t[31]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Leave Duration",-1)),e("p",ot,l(T()),1),e("p",rt,l(h(o(s).from_date))+" to "+l(h(o(s).to_date)),1)])]),_:1})):g("",!0),w(C,null,{default:b(()=>[t[32]||(t[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Leave Balance",-1)),e("div",at,[(n(!0),c($,null,R(B.value,i=>(n(),c("div",{key:i.id,class:"flex justify-between items-center"},[e("span",lt,l(i.name),1),e("span",nt,l(i.balance===null||i.balance===void 0?"N/A":i.balance)+" days",1)]))),128))])]),_:1,__:[32]}),w(C,null,{default:b(()=>t[33]||(t[33]=[e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Leave Guidelines",-1),e("div",{class:"space-y-3 text-sm text-gray-600"},[e("div",{class:"flex items-start"},[e("svg",{class:"flex-shrink-0 h-5 w-5 text-green-500 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Submit applications at least 2 weeks in advance")]),e("div",{class:"flex items-start"},[e("svg",{class:"flex-shrink-0 h-5 w-5 text-green-500 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Provide detailed reasons for better approval chances")]),e("div",{class:"flex items-start"},[e("svg",{class:"flex-shrink-0 h-5 w-5 text-green-500 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Check team calendar for conflicts")]),e("div",{class:"flex items-start"},[e("svg",{class:"flex-shrink-0 h-5 w-5 text-green-500 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Emergency leaves can be submitted retroactively")])],-1)])),_:1,__:[33]})])])]),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{yt as default};
