import{e as I,f as b,z as V,B as oe,c as h,i as $,o as m,a as o,t as S,y as fe,F as q,r as Y,n as g,u,w as me,p as ve,Q as we,g as K,s as ue,A as re,l as te,q as ke,C as xe,M as he,k as R,h as se,N as be,O as _e,d as Te,P as Ae,S as ce,J as pe,R as Ie}from"./app-DFYlXpMc.js";import{u as de}from"./useAuth-DnpCLsNI.js";import{B as ge,C as Be,p as Se}from"./icons-C3SrT-qm.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Ee={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Me={class:"flex items-start"},$e={class:"ml-3 flex-1"},Ne={class:"mt-1 text-sm text-red-700"},Fe={key:0,class:"mt-3"},De={__name:"NavigationErrorDisplay",setup(v){const t=I(!1),r=I(""),e=I(null),a=I(null),y=b(()=>r.value.includes("log in")?"Go to Login":r.value.includes("permission")?"Go to Dashboard":r.value.includes("network")?"Reload Page":"Try Again"),s=(B,x=null)=>{r.value=B,e.value=x,t.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{T()},1e4)},f=async()=>{if(e.value)try{await e.value()}catch(B){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",B)}T()},T=()=>{t.value=!1,r.value="",e.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return V(()=>{typeof window<"u"&&(window.showNavigationError=s)}),oe(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(B,x)=>t.value?(m(),h("div",Ce,[o("div",Ee,[o("div",Me,[x[2]||(x[2]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",$e,[x[0]||(x[0]=o("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),o("div",Ne,S(r.value),1),e.value?(m(),h("div",Fe,[o("button",{onClick:f,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},S(y.value),1)])):$("",!0)]),o("div",{class:"ml-4 flex-shrink-0"},[o("button",{onClick:T,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},x[1]||(x[1]=[o("span",{class:"sr-only"},"Close",-1),o("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):$("",!0)}},Q=I("light"),H=I("light"),U=I(!1),ee={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ye(){const v=b(()=>U.value?H.value:Q.value),t=b(()=>ee[v.value]),r=b(()=>v.value==="dark"),e=b(()=>v.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(n){return console.warn("Failed to detect system theme:",n),"light"}},y=(n,i=!1)=>{try{const N={theme:M(n)?n:"light",useSystem:!!i,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(N))}catch(d){console.warn("Failed to save theme preference:",d);try{localStorage.removeItem("theme-preference")}catch(N){console.warn("Failed to clear corrupted theme preference:",N)}}},s=()=>{try{const n=localStorage.getItem("theme-preference");if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!==null){const d=M(i.theme)?i.theme:"light",N=typeof i.useSystem=="boolean"?i.useSystem:!1;return{theme:d,useSystem:N,timestamp:i.timestamp||null,version:i.version||1}}}}catch(n){console.warn("Failed to load theme preference:",n);try{localStorage.removeItem("theme-preference")}catch(i){console.warn("Failed to clear corrupted theme preference:",i)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},f=n=>{if(!(typeof document>"u"))try{const i=document.documentElement,d=M(n)?n:"light";i.classList.remove("theme-light","theme-dark","dark","light"),i.classList.add(`theme-${d}`),d==="dark"&&i.classList.add("dark"),T(d);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:d,config:ee[d]}}))}catch(N){console.warn("Failed to dispatch theme change event:",N)}}catch(i){console.error("Failed to apply theme:",i);try{const d=document.documentElement;d.classList.remove("theme-light","theme-dark","dark","light"),d.classList.add("theme-light"),T("light")}catch(d){console.error("Failed to apply fallback theme:",d)}}},T=n=>{if(!(typeof document>"u"))try{const i=document.documentElement;n==="dark"?(i.style.setProperty("--color-neutral-50","#0a0a0a"),i.style.setProperty("--color-neutral-100","#111827"),i.style.setProperty("--color-neutral-200","#262626"),i.style.setProperty("--color-neutral-300","#404040"),i.style.setProperty("--color-neutral-400","#525252"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#a3a3a3"),i.style.setProperty("--color-neutral-700","#d4d4d4"),i.style.setProperty("--color-neutral-800","#e5e5e5"),i.style.setProperty("--color-neutral-900","#fafafa"),i.style.setProperty("--color-neutral-950","#ffffff")):(i.style.setProperty("--color-neutral-50","#fafafa"),i.style.setProperty("--color-neutral-100","#f5f5f5"),i.style.setProperty("--color-neutral-200","#e5e5e5"),i.style.setProperty("--color-neutral-300","#d4d4d4"),i.style.setProperty("--color-neutral-400","#a3a3a3"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#525252"),i.style.setProperty("--color-neutral-700","#404040"),i.style.setProperty("--color-neutral-800","#262626"),i.style.setProperty("--color-neutral-900","#111827"),i.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(i){console.warn("Failed to update theme properties:",i)}},B=n=>{f(n)},x=n=>{if(!ee[n]){console.warn(`Theme "${n}" not found`);return}Q.value=n,U.value=!1,y(n,!1),f(n)},p=()=>{U.value=!0;const n=a();H.value=n,y(n,!0),f(n)},C=()=>{const n=v.value==="light"?"dark":"light";x(n)},A=()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),i=d=>{const N=d.matches?"dark":"light";H.value=N,U.value&&(B(N),y(N,!0))};return n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},M=n=>ee.hasOwnProperty(n),z=()=>Object.values(ee),X=()=>{},G=()=>{const n=[];if(M(Q.value)||n.push(`Invalid current theme: ${Q.value}`),M(H.value)||n.push(`Invalid system theme: ${H.value}`),M(v.value)||n.push(`Invalid active theme: ${v.value}`),typeof document<"u"){const i=document.documentElement,d=i.classList.contains("theme-light"),N=i.classList.contains("theme-dark");!d&&!N&&n.push("No theme class found on document root"),d&&N&&n.push("Multiple theme classes found on document root");const J=`theme-${v.value}`;i.classList.contains(J)||n.push(`Expected theme class ${J} not found on document root`)}return{isValid:n.length===0,issues:n}},_=()=>{if(!(typeof document>"u"))try{const n=document.documentElement;return["theme-light","theme-dark"].forEach(d=>{n.classList.remove(d)}),!0}catch(n){return console.warn("Failed to cleanup theme classes:",n),!1}},c=()=>{try{Q.value="light",H.value=a(),U.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference from localStorage:",n)}return f("light"),!0}catch(n){return console.error("Failed to reset theme to default:",n),!1}},P=()=>{console.warn("Attempting theme system recovery...");try{if(_(),c())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(n){console.error("Theme system recovery failed:",n);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(i){return console.error("Last resort theme recovery failed:",i),!1}}},F=()=>{try{const n=s();return H.value=a(),n.useSystem?(U.value=!0,Q.value=H.value):(U.value=!1,Q.value=n.theme),f(v.value),A()}catch(n){console.error("Theme initialization failed:",n);try{Q.value="light",H.value="light",U.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(i){console.error("Emergency theme fallback failed:",i)}return null}};return V(()=>{F()}),fe(v,n=>{B(n)}),{currentTheme:b(()=>Q.value),systemTheme:b(()=>H.value),activeTheme:v,themeConfig:t,isDark:r,isLight:e,isSystemThemePreferred:b(()=>U.value),setTheme:x,toggleTheme:C,useSystemTheme:p,validateTheme:M,getAvailableThemes:z,debugThemeState:X,initializeTheme:F,validateThemeState:G,cleanupThemeClasses:_,resetThemeToDefault:c,recoverThemeSystem:P,cleanupAndApplyTheme:f,themes:b(()=>ee)}}const Le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pe={class:"flex justify-between items-center h-20"},Oe={class:"flex items-center space-x-6"},ze={class:"hidden lg:flex space-x-1"},Re=["href"],We={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={class:"hidden xl:inline"},Ue={class:"relative"},Ve={class:"p-2"},Je={key:0,class:"space-y-1"},Ze={class:"space-y-1"},qe=["href"],Ye={class:"space-y-1 mt-1"},Xe=["href"],Ke={class:"space-y-1 mt-1"},et=["href"],tt={class:"flex items-center space-x-3"},ot={class:"relative"},at={class:"hidden lg:block text-left"},rt={class:"font-medium text-sm"},st={class:"p-2"},nt={class:"py-1 space-y-1"},lt=["href"],it={class:"md:hidden px-4 pb-3"},ct={class:"mt-3 space-y-2"},ut=["href"],dt={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(v){var G;const t=v,{user:r,roles:e}=de(),{isDark:a}=ye(),y=I(!1),s=I(!1),f=I(!1);console.log("IntegratedTopNav - User:",r.value),console.log("IntegratedTopNav - Roles:",e.value),console.log("IntegratedTopNav - Is Admin:",(G=e.value)==null?void 0:G.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const T=b(()=>{var _;return(_=r.value)!=null&&_.name?r.value.name.split(" ").map(c=>c[0]).join("").toUpperCase():"U"}),B=b(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),x=b(()=>{try{const _=e.value||[],c=Array.isArray(_)?_:[],P=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"employee-handbook",label:"Employee Handbook",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],F=c.includes("Admin")||c.includes("Manager")||c.includes("HR"),n=c.includes("Admin");return F&&P.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"competency-assessments.index",label:"All Assessments",category:"management"}),n&&P.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),P}catch(_){return console.error("Error computing moreNavItems:",_),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),p=b(()=>x.value.filter(_=>_.category==="regular")),C=b(()=>x.value.filter(_=>_.category==="management")),A=b(()=>x.value.filter(_=>_.category==="admin")),M=b(()=>[...B.value,...x.value]),z=_=>{var c;return t.currentRoute===_||((c=t.currentRoute)==null?void 0:c.startsWith(_.split(".")[0]))},X=()=>{we.post(route("logout"))};return(_,c)=>{var P,F,n,i;return m(),h("nav",{class:g(["w-full transition-all duration-200 sticky top-0 z-50",u(a)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-white via-white to-blue-50/30 border-b border-gray-200/60 shadow-lg shadow-gray-900/10 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[o("div",Le,[o("div",Pe,[o("div",Oe,[c[14]||(c[14]=o("div",{class:"flex items-center space-x-3"},[o("div",{class:"flex items-center"},[o("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain"})])],-1)),o("div",ze,[(m(!0),h(q,null,Y(B.value,d=>(m(),h("a",{key:d.route,href:_.route(d.route),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",z(d.route)?u(a)?"bg-blue-600/20 text-blue-300":"bg-blue-50 text-blue-700":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[d.route==="dashboard"?(m(),h("svg",We,c[3]||(c[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):d.route==="attendances.index"?(m(),h("svg",je,c[4]||(c[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):d.route==="leaves.index"?(m(),h("svg",Ge,c[5]||(c[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(m(),h("svg",He,c[6]||(c[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),o("span",Qe,S(d.label),1)],10,Re))),128)),o("div",Ue,[o("button",{onClick:c[0]||(c[0]=d=>y.value=!y.value),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",y.value?u(a)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[c[8]||(c[8]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),c[9]||(c[9]=o("span",{class:"hidden xl:inline"},"More",-1)),(m(),h("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":y.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[7]||(c[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),me(o("div",{class:g(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",u(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",Ve,[x.value.length>0?(m(),h("div",Je,[o("div",Ze,[(m(!0),h(q,null,Y(p.value,d=>(m(),h("a",{key:d.route,href:_.route(d.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(d.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[10]||(c[10]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o("span",null,S(d.label),1)],10,qe))),128))]),C.value.length>0?(m(),h("div",{key:0,class:g(["border-t pt-2 mt-2",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",u(a)?"text-gray-400":"text-gray-500"])}," Management ",2),o("div",Ye,[(m(!0),h(q,null,Y(C.value,d=>(m(),h("a",{key:d.route,href:_.route(d.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(d.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[11]||(c[11]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o("span",null,S(d.label),1)],10,Xe))),128))])],2)):$("",!0),A.value.length>0?(m(),h("div",{key:1,class:g(["border-t pt-2 mt-2",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",u(a)?"text-red-400":"text-red-600"])},c[12]||(c[12]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),o("span",null,"Admin",-1)]),2),o("div",Ke,[(m(!0),h(q,null,Y(A.value,d=>(m(),h("a",{key:d.route,href:_.route(d.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(d.route)?u(a)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[13]||(c[13]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),o("span",null,S(d.label),1)],10,et))),128))])],2)):$("",!0)])):$("",!0)])],2),[[ve,y.value]])])])]),o("div",tt,[o("div",ot,[o("button",{onClick:c[1]||(c[1]=d=>s.value=!s.value),class:g(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",s.value?u(a)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[o("div",{class:g(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",u(a)?"bg-blue-600 text-white":"bg-blue-500 text-white"])},S(T.value),3),o("div",at,[o("div",rt,S((P=u(r))==null?void 0:P.name),1),o("div",{class:g(["text-xs",u(a)?"text-gray-400":"text-gray-500"])},S(((F=u(e))==null?void 0:F.join(", "))||"User"),3)]),(m(),h("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":s.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[15]||(c[15]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),me(o("div",{class:g(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",u(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",st,[o("div",{class:g(["px-3 py-2 border-b",u(a)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["font-medium",u(a)?"text-white":"text-gray-900"])},S((n=u(r))==null?void 0:n.name),3),o("div",{class:g(["text-sm",u(a)?"text-gray-400":"text-gray-500"])},S((i=u(r))==null?void 0:i.email),3)],2),o("div",nt,[o("a",{href:_.route("profile.edit"),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},c[16]||(c[16]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),o("span",null,"Profile Settings",-1)]),10,lt),o("button",{onClick:X,class:g(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},c[17]||(c[17]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"Sign Out",-1)]))])])],2),[[ve,s.value]])])])])]),o("div",it,[o("button",{onClick:c[2]||(c[2]=d=>f.value=!f.value),class:g(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",u(a)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[c[19]||(c[19]=o("span",null,"Menu",-1)),(m(),h("svg",{class:g(["w-5 h-5 transition-transform duration-200",{"rotate-180":f.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[18]||(c[18]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),me(o("div",ct,[(m(!0),h(q,null,Y(M.value,d=>(m(),h("a",{key:d.route,href:_.route(d.route),class:g(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",z(d.route)?u(a)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":u(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},S(d.label),11,ut))),128))],512),[[ve,f.value]])])],2)}}};function mt(v,t){return m(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function vt(v,t){return m(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const ht=["aria-live"],gt={class:"toast-content"},ft={key:0,class:"toast-icon"},pt={class:"toast-message"},yt={key:0,class:"toast-title"},kt={class:"toast-text"},bt={key:1,class:"toast-actions"},wt=["aria-label"],xt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:v=>["success","error","warning","info","loading"].includes(v)},position:{type:String,default:"top-right",validator:v=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(v)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:v=>["low","normal","high"].includes(v)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:v=>["sm","md","lg"].includes(v)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(v,{expose:t,emit:r}){const e=v,a=r,y=I(!1),s=I(null),f=I(null),T=I(100),B=I(!1),x=I(0),p=I(0),C=b(()=>ge("x-mark")),A=b(()=>{if(e.icon)return ge(e.icon);const L={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return ge(L[e.type]||L.info)}),M=b(()=>["toast-notification",`toast-notification--${e.type}`,`toast-notification--${e.size}`,`toast-notification--${e.position}`,{"toast-notification--with-title":e.title,"toast-notification--persistent":e.persistent,"toast-notification--with-action":e.actionText}]),z=b(()=>({zIndex:e.zIndex})),X=b(()=>["w-5 h-5",{"animate-spin":e.type==="loading"}]),G=b(()=>e.closable||e.actionText),_=b(()=>[`toast-progress--${e.type}`]),c=b(()=>({width:`${T.value}%`})),P=()=>{y.value=!0,e.sound&&le(),!e.persistent&&e.duration>0&&i()},F=()=>{y.value=!1,ae(),a("close")},n=()=>{a("action"),e.persistent||F()},i=()=>{e.duration<=0||(x.value=Date.now(),p.value=e.duration,s.value=setTimeout(()=>{F()},e.duration),d())},d=()=>{if(!e.showProgress)return;const L=Date.now(),W=()=>{if(!y.value||B.value)return;const ie=Date.now()-L,l=Math.max(0,100-ie/e.duration*100);T.value=l,l>0&&(f.value=requestAnimationFrame(W))};W()},N=()=>{if(!s.value||e.persistent)return;B.value=!0,clearTimeout(s.value),cancelAnimationFrame(f.value);const L=Date.now()-x.value;p.value=Math.max(0,e.duration-L)},J=()=>{!B.value||e.persistent||(B.value=!1,p.value>0&&(x.value=Date.now(),s.value=setTimeout(()=>{F()},p.value),d()))},ae=()=>{s.value&&(clearTimeout(s.value),s.value=null),f.value&&(cancelAnimationFrame(f.value),f.value=null)},le=()=>{try{const L=new Audio,W={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};L.src=W[e.type]||W.info,L.volume=.3,L.play().catch(()=>{})}catch{}};return V(()=>{P()}),oe(()=>{ae()}),fe(()=>e.duration,()=>{y.value&&!e.persistent&&(ae(),i())}),t({show:P,close:F,pauseTimer:N,resumeTimer:J}),(L,W)=>(m(),K(xe,{to:"body"},[y.value?(m(),h("div",{key:0,class:g(M.value),style:ke(z.value),role:"alert","aria-live":v.priority==="high"?"assertive":"polite",onMouseenter:N,onMouseleave:J},[o("div",gt,[v.showIcon?(m(),h("div",ft,[(m(),K(ue(A.value),{class:g(X.value)},null,8,["class"]))])):$("",!0),o("div",pt,[v.title?(m(),h("div",yt,S(v.title),1)):$("",!0),o("div",kt,[re(L.$slots,"default",{},()=>[te(S(v.message),1)],!0)])]),G.value?(m(),h("div",bt,[v.actionText?(m(),h("button",{key:0,onClick:n,class:"toast-action-button"},S(v.actionText),1)):$("",!0),v.closable?(m(),h("button",{key:1,onClick:F,class:"toast-close-button","aria-label":v.closeLabel},[(m(),K(ue(C.value),{class:"w-4 h-4"}))],8,wt)):$("",!0)])):$("",!0)]),v.showProgress&&v.duration>0?(m(),h("div",{key:0,class:g(["toast-progress",_.value]),style:ke(c.value)},null,6)):$("",!0)],46,ht)):$("",!0)]))}},_t=ne(xt,[["__scopeId","data-v-11baa49e"]]);class Tt{constructor(){this.notifications=he([]),this.maxNotifications=I(5),this.defaultDuration=I(5e3),this.positions=he({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=he({enabled:!0,volume:.3})}add(t){const r=this.generateId(),e=t.position||"top-right",a={id:r,message:t.message||"",title:t.title||"",type:t.type||"info",position:e,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(a),this.positions[e].push(a),this.manageQueueSize(e),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(r)},a.duration),r}remove(t){const r=this.notifications.find(s=>s.id===t);if(!r)return;const e=this.notifications.findIndex(s=>s.id===t);e>-1&&this.notifications.splice(e,1);const a=this.positions[r.position],y=a.findIndex(s=>s.id===t);y>-1&&a.splice(y,1),r.onClose&&r.onClose(r)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(e=>{this.remove(e.id)})}clearType(t){this.notifications.filter(e=>e.type===t).forEach(e=>{this.remove(e.id)})}update(t,r){const e=this.notifications.find(a=>a.id===t);e&&Object.assign(e,r)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(r=>r.type===t)}getById(t){return this.notifications.find(r=>r.id===t)}exists(t){return this.notifications.some(r=>r.id===t)}count(){return this.notifications.length}countByPosition(t){var r;return((r=this.positions[t])==null?void 0:r.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(r=>{this.manageQueueSize(r)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,r={}){return this.add({message:t,type:"success",...r})}error(t,r={}){return this.add({message:t,type:"error",persistent:r.persistent!==!1,...r})}warning(t,r={}){return this.add({message:t,type:"warning",...r})}info(t,r={}){return this.add({message:t,type:"info",...r})}loading(t,r={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...r})}confirm(t={}){return new Promise(r=>{const e=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:a=>{this.remove(e),r(a==="confirm")},onClose:()=>{r(!1)}})})}alert(t,r={}){return new Promise(e=>{const a=this.add({type:r.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:r.type||"info",title:r.title||"Alert",description:t,showCancel:!1,confirmText:r.confirmText||"OK",...r},onAction:()=>{this.remove(a),e(!0)},onClose:()=>{e(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const r=this.positions[t];r.length>this.maxNotifications.value&&r.splice(0,r.length-this.maxNotifications.value).forEach(a=>{const y=this.notifications.findIndex(s=>s.id===a.id);y>-1&&this.notifications.splice(y,1)})}}const O=new Tt,At={class:"notification-container"},It={__name:"NotificationContainer",setup(v,{expose:t}){const r=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];b(()=>O.notifications.filter(p=>!p.component));const e=b(()=>O.notifications.filter(p=>p.component)),a=p=>{const C="fixed z-50 pointer-events-none",A={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${C} ${A[p]||A["top-right"]}`},y=p=>O.getByPosition(p),s=p=>p.includes("left")?"slide-left":p.includes("right")?"slide-right":p.includes("center")?"slide-center":"slide-right",f=p=>{O.remove(p)},T=(p,C="action")=>{const A=O.getById(p);A!=null&&A.onAction&&A.onAction(C)},B=()=>{window.notify={success:(p,C)=>O.success(p,C),error:(p,C)=>O.error(p,C),warning:(p,C)=>O.warning(p,C),info:(p,C)=>O.info(p,C),loading:(p,C)=>O.loading(p,C),confirm:p=>O.confirm(p),alert:(p,C)=>O.alert(p,C),clear:()=>O.clear(),remove:p=>O.remove(p)}},x=()=>{window.notify&&delete window.notify};return V(()=>{B()}),oe(()=>{x()}),t({notificationQueue:O,notify:window.notify}),(p,C)=>(m(),h("div",At,[(m(),h(q,null,Y(r,A=>o("div",{key:A,class:g(a(A))},[R(_e,{name:s(A),tag:"div",class:"space-y-2"},{default:se(()=>[(m(!0),h(q,null,Y(y(A),M=>(m(),K(_t,be({key:M.id},{ref_for:!0},M,{onClose:z=>f(M.id),onAction:z=>T(M.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(m(!0),h(q,null,Y(e.value,A=>(m(),K(ue(A.component||"NotificationModal"),be({key:A.id,ref_for:!0},A.props,{onClose:M=>f(A.id),onConfirm:M=>T(A.id,"confirm"),onCancel:M=>T(A.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Bt=ne(It,[["__scopeId","data-v-67e6c621"]]),St={class:"floating-attendance-widget"},Ct={class:"status-indicator"},Et={class:"time-info"},Mt={class:"time-display"},$t={class:"time-label-mini"},Nt={class:"widget-header"},Ft={class:"status-info"},Dt={class:"status-text"},Lt={class:"timer-section"},Pt={class:"timer-value"},Ot={class:"timer-label"},zt={class:"quick-actions"},Rt=["disabled"],Wt=["disabled"],jt={class:"quick-stats"},Gt={class:"stat"},Ht={class:"stat-value"},Qt={class:"stat"},Ut={class:"stat-value"},Vt={class:"stat-label"},Jt={__name:"FloatingAttendanceWidget",setup(v){const t=I(!1),r=I(!1),e=I({clockedIn:!1,onBreak:!1,clockInTime:null}),a=I(!1),y=I("0h 0m 0s"),s=I(null),f=I([]),T=()=>{try{const l={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,completedBreakSessions:f.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(l))}catch(l){console.warn("Failed to save attendance state to localStorage:",l)}},B=()=>{try{const l=localStorage.getItem("floating-attendance-state");if(l){const k=JSON.parse(l),E=new Date(k.lastUpdate);if((new Date-E)/(1e3*60)<5)return e.value.clockedIn=k.clockedIn||!1,e.value.onBreak=k.onBreak||!1,e.value.clockInTime=k.clockInTime||null,s.value=k.breakStartTime||null,f.value=k.completedBreakSessions||[],!0}}catch(l){console.warn("Failed to load attendance state from localStorage:",l)}return!1};let x=null;const p=b(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),C=b(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),A=b(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),M=b(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),z=b(()=>a.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),X=b(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),G=b(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const l=new Date(e.value.clockInTime),E=new Date-l,w=Math.floor(E/(1e3*60)),D=Math.floor(w/60),j=w%60;return`${D}h ${j}m`}),_=b(()=>{if(e.value.onBreak&&s.value){const l=new Date(s.value);if(isNaN(l.getTime()))return"0h 0m 1s";{const E=Math.max(0,new Date-l),w=Math.floor(E/(1e3*60*60)),D=Math.floor(E%(1e3*60*60)/(1e3*60)),j=Math.floor(E%(1e3*60)/1e3);return`${w}h ${D}m ${j}s`}}return"0h 0m"}),c=b(()=>{let l=0;if(f.value.forEach(w=>{if(w.start&&w.end){const D=new Date(w.start),Z=new Date(w.end)-D;l+=Math.floor(Z/(1e3*60))}}),e.value.onBreak&&s.value){const w=new Date(s.value);if(!isNaN(w.getTime())){const j=Math.max(0,new Date-w);l+=Math.floor(j/(1e3*60))}}const k=Math.floor(l/60),E=l%60;return`${k}h ${E}m`});b(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const P=()=>{t.value=!t.value,r.value=!0},F=(l=!1)=>{if(l||!r.value){const k=!e.value.clockedIn,E=t.value!==k;t.value=k,l&&(r.value=!1),E&&console.log(`FloatingWidget: Auto-${k?"expanded":"collapsed"} (clockedIn: ${e.value.clockedIn}, force: ${l})`)}},n=()=>{if(e.value.clockedIn&&e.value.clockInTime){const l=new Date;let k;e.value.onBreak&&s.value?k=new Date(s.value):k=new Date(e.value.clockInTime);const E=l-k,w=Math.floor(E/(1e3*60*60)),D=Math.floor(E%(1e3*60*60)/(1e3*60)),j=Math.floor(E%(1e3*60)/1e3);y.value=`${w}h ${D}m ${j}s`,j%10===0&&W()}else y.value="0h 0m 0s"},i=async()=>{try{if(a.value=!0,e.value.clockedIn){const l=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,s.value=null,y.value="0h 0m 0s",T(),F(!0),W()}else{const l=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=l.data.clock_in_time||new Date().toISOString(),T(),F(!0),W()}}catch(l){console.error("Clock in/out failed:",l),alert("Action failed: "+l.message)}finally{a.value=!1}},d=async()=>{try{if(a.value=!0,e.value.onBreak){if(s.value){const k={start:s.value,end:new Date().toISOString(),isOngoing:!1};f.value=[...f.value,k],console.log("ðŸ’¾ FloatingWidget: Saved completed break session:",k)}const l=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,s.value=null,T(),ie("end-break")}else{const l=new Date().toISOString();s.value=l,e.value.onBreak=!0;const k=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});k.data.break_start_time&&(s.value=k.data.break_start_time),T(),ie("start-break")}}catch(l){console.error("Break action failed:",l),alert("Action failed: "+l.message)}finally{a.value=!1}},N=async()=>{var l,k;try{const w=(await window.axios.get("/api/attendance/current")).data,D=w.clock_in_time,j=e.value.clockInTime;if((D!==j||!w.clocked_in)&&(f.value=[],console.log("ðŸ”„ FloatingWidget: New session detected, cleared completed breaks")),e.value.clockedIn=w.clocked_in||!1,e.value.onBreak=w.on_break||!1,e.value.clockInTime=w.clock_in_time||null,w.break_sessions&&Array.isArray(w.break_sessions)&&(f.value=w.break_sessions.map(Z=>({start:Z.start,end:Z.end,isOngoing:!1})),console.log("ðŸ“Š FloatingWidget: Loaded break sessions from server:",{serverBreakSessions:w.break_sessions.length,localBreakSessions:f.value.length})),w.on_break)if(w.break_start_time)s.value=w.break_start_time;else if((l=w.current_session)!=null&&l.current_break_start)s.value=w.current_session.current_break_start;else if((k=w.current_session)!=null&&k.break_sessions&&w.current_session.break_sessions.length>0){const Z=w.current_session.break_sessions[w.current_session.break_sessions.length-1];Z&&!Z.end&&(s.value=Z.start)}else s.value||(s.value=new Date().toISOString());else s.value=null;F(),console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:s.value,completedBreaks:f.value.length,totalBreakTime:c.value,isExpanded:t.value})}catch(E){console.error("Failed to fetch attendance status:",E)}},J=l=>{l.key==="attendance-update"&&N()},ae=l=>{console.log("FloatingWidget: Received attendance update via Echo:",l),e.value.clockedIn=l.clocked_in,e.value.onBreak=l.on_break,e.value.clockInTime=l.clock_in_time,l.on_break&&l.break_start_time?s.value=l.break_start_time:l.on_break||(s.value=null),T(),n(),F(),console.log("FloatingWidget: State updated via Echo:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,isExpanded:t.value})},le=l=>{console.log("FloatingWidget: Received attendance state change (legacy):",l.detail);const{clockedIn:k,onBreak:E,clockInTime:w,breakStartTime:D}=l.detail;e.value.clockedIn=k,e.value.onBreak=E,e.value.clockInTime=w,E&&D?s.value=D:E||(s.value=null),T(),n(),F(),console.log("FloatingWidget: State updated (legacy):",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:s.value,eventBreakStartTime:D,isExpanded:t.value})},L=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(l){console.warn("Failed to broadcast attendance update:",l)}},W=()=>{try{const l=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,completedBreakSessions:f.value,totalBreakTime:c.value,currentBreakTime:_.value,todaysHours:G.value,timestamp:Date.now(),source:"floating-widget-load"}});window.dispatchEvent(l),L(),console.log("FloatingWidget: Broadcasted current status to dashboard:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,completedBreaks:f.value.length,totalBreakTime:c.value})}catch(l){console.warn("Failed to broadcast current status:",l)}},ie=l=>{try{const k=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,completedBreakSessions:f.value,totalBreakTime:c.value,currentBreakTime:_.value,todaysHours:G.value,timestamp:Date.now(),source:"floating-widget-break",action:l}});window.dispatchEvent(k),L(),console.log(`FloatingWidget: Broadcasted break ${l} to dashboard:`,{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:s.value,completedBreaks:f.value.length,totalBreakTime:c.value,action:l})}catch(k){console.warn("Failed to broadcast break status change:",k)}};return V(async()=>{var k,E;if(B()&&n(),await N(),T(),n(),setTimeout(()=>{W()},100),x=setInterval(n,1e3),window.Echo)try{const D=(E=(k=(await window.axios.get("/api/user")).data)==null?void 0:k.employee)==null?void 0:E.id;D?(window.Echo.private(`attendance.${D}`).listen(".attendance.updated",ae),console.log(`FloatingWidget: Subscribed to Echo channel attendance.${D}`)):console.warn("FloatingWidget: No employee ID found for Echo subscription")}catch(w){console.error("FloatingWidget: Failed to get user data for Echo subscription:",w)}else console.warn("FloatingWidget: Echo not available");window.addEventListener("storage",J),window.addEventListener("attendance-state-changed",le),console.log("FloatingWidget: Event listeners registered")}),oe(()=>{if(x&&clearInterval(x),window.Echo)try{window.Echo.connector.pusher.allChannels().forEach(l=>{l.name.startsWith("private-attendance.")&&window.Echo.leave(l.name.replace("private-",""))}),console.log("FloatingWidget: Unsubscribed from Echo channels")}catch(l){console.warn("FloatingWidget: Error unsubscribing from Echo channels:",l)}window.removeEventListener("storage",J),window.removeEventListener("attendance-state-changed",le),console.log("FloatingWidget: Event listeners removed")}),(l,k)=>(m(),h("div",St,[t.value?$("",!0):(m(),h("div",{key:0,onClick:P,class:g(["floating-button",M.value])},[o("div",Ct,[o("div",{class:g(A.value)},null,2)]),o("div",Et,[o("div",Mt,S(y.value),1),o("div",$t,S(C.value),1)]),R(u(Be),{class:"w-4 h-4 expand-icon"})],2)),t.value?(m(),h("div",{key:1,class:"expanded-widget",onClick:k[0]||(k[0]=Te(()=>{},["stop"]))},[o("div",Nt,[o("div",Ft,[o("div",{class:g(A.value)},null,2),o("span",Dt,S(p.value),1)]),o("button",{onClick:P,class:"minimize-btn",title:"Minimize"},[R(u(Se),{class:"w-4 h-4"})])]),o("div",Lt,[o("div",Pt,S(y.value),1),o("div",Ot,S(C.value),1)]),o("div",zt,[o("button",{onClick:i,disabled:a.value,class:g(X.value)},S(z.value),11,Rt),e.value.clockedIn?(m(),h("button",{key:0,onClick:d,disabled:a.value,class:"break-action"},[(m(),K(ue(e.value.onBreak?u(vt):u(mt)),{class:"w-3 h-3"})),te(" "+S(e.value.onBreak?"End":"Break"),1)],8,Wt)):$("",!0)]),o("div",jt,[o("div",Gt,[o("span",Ht,S(G.value),1),k[1]||(k[1]=o("span",{class:"stat-label"},"Today",-1))]),o("div",Qt,[o("span",Ut,S(e.value.onBreak?_.value:c.value),1),o("span",Vt,S(e.value.onBreak?"Current":"Total"),1)])])])):$("",!0),t.value?(m(),h("div",{key:2,class:"backdrop",onClick:P})):$("",!0)]))}},Zt=ne(Jt,[["__scopeId","data-v-f59da162"]]),qt={class:"live-regions"},Yt={__name:"LiveRegion",setup(v){const t=I(null),r=I(null),e=I(null);return V(()=>{Ae.init()}),(a,y)=>(m(),h("div",qt,[o("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),o("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:r},null,512),o("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:e},null,512)]))}},Xt=ne(Yt,[["__scopeId","data-v-94955163"]]),Kt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},eo={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},to={class:"flex items-center space-x-6"},oo={__name:"AppFooter",setup(v){const{isDark:t}=ye(),r=b(()=>new Date().getFullYear());return(e,a)=>(m(),h("footer",{class:g(["mt-auto border-t transition-all duration-200",u(t)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[o("div",Kt,[o("div",eo,[a[4]||(a[4]=o("div",{class:"flex items-center"},[o("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),o("div",to,[R(u(ce),{href:e.route("dashboard"),class:g(["text-sm hover:underline transition-colors",u(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[0]||(a[0]=[te(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),R(u(ce),{href:e.route("support.index"),class:g(["text-sm hover:underline transition-colors",u(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[1]||(a[1]=[te(" Support ")])),_:1,__:[1]},8,["href","class"]),R(u(ce),{href:e.route("legal.privacy"),class:g(["text-sm hover:underline transition-colors",u(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[2]||(a[2]=[te(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),R(u(ce),{href:e.route("legal.disclaimer"),class:g(["text-sm hover:underline transition-colors",u(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[3]||(a[3]=[te(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),o("div",{class:g(["text-sm",u(t)?"text-gray-400":"text-gray-500"])}," Â© "+S(r.value)+" Xonobics. All rights reserved. ",3)])])],2))}};function ao(){const{props:v}=pe(),{user:t}=de();let r;const e=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(y=>{var f;const s=((f=t.value)==null?void 0:f.name)||"Employee";y.showNotification(`Hi ${s}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},a=()=>{const y=new Date,s=new Date(v.auth.user.clock_in_time);(isNaN(s.getTime())||y.getTime()-s.getTime()>5*60*1e3)&&e()};V(()=>{a(),r=setInterval(a,5*60*1e3)}),oe(()=>{clearInterval(r)})}function ro(){const{isAuthenticated:v,user:t}=de(),r=pe();let e=null;const a=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(s=>{var T;const f=((T=t.value)==null?void 0:T.name)||"Employee";s.showNotification(`Hi ${f}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},y=()=>{if(!v.value)return;const s=r.props.auth.user.todays_attendance;if(s&&s.clock_in_time&&!s.clock_out_time){const f=new Date(s.clock_in_time);(new Date-f)/1e3/60/60>=7.5&&a()}};V(()=>{e=setInterval(y,5*60*1e3),y()}),oe(()=>{e&&clearInterval(e)})}function so(){const v=pe();return fe(()=>v.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:v.props.flash}}const no={class:"relative"},lo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},io={key:0,class:"flex items-center space-x-3"},co={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},uo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},mo={__name:"AuthenticatedLayout",setup(v){const t=Ie(),{hasRole:r,getAuthError:e}=de(),{isDark:a,initializeTheme:y}=ye();ao(),ro(),so(),V(()=>{y()});const s=b(()=>e()),f=b(()=>!!s.value),T=b(()=>{try{return route().current()||""}catch(B){return console.warn("[LAYOUT] Route helper not available:",B),window.location.pathname.replace("/","")||"dashboard"}});return b(()=>!!t.header),(B,x)=>(m(),h("div",{class:g(["min-h-screen transition-all duration-300 flex flex-col",u(a)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-blue-50/30"])},[R(Xt),R(De),R(Bt),u(r)("Admin")?$("",!0):(m(),K(Zt,{key:0})),f.value?(m(),h("div",{key:1,class:g(["p-4 border z-50 relative rounded-lg mx-4 mt-4",u(a)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[x[0]||(x[0]=o("p",{class:"font-semibold"},"Authentication Error:",-1)),o("p",null,S(s.value),1),x[1]||(x[1]=o("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):$("",!0),R(dt,{"current-route":T.value},null,8,["current-route"]),o("div",no,[u(t).header?(m(),h("header",{key:0,class:g(["border-b transition-all duration-200 backdrop-blur-sm",u(a)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[o("div",lo,[o("div",{class:g(["flex items-center justify-between",u(a)?"text-white":"text-gray-900"])},[o("div",null,[o("h1",{class:g(["text-2xl font-bold transition-colors duration-200",u(a)?"text-white":"text-gray-900"])},[re(B.$slots,"header",{},void 0,!0)],2),u(t).subtitle?(m(),h("div",{key:0,class:g(["mt-1 text-sm",u(a)?"text-gray-300":"text-gray-600"])},[re(B.$slots,"subtitle",{},void 0,!0)],2)):$("",!0)]),u(t).headerActions?(m(),h("div",io,[re(B.$slots,"headerActions",{},void 0,!0)])):$("",!0)],2)])],2)):$("",!0),o("main",co,[o("div",uo,[o("div",{class:g(["relative transition-all duration-200",u(t).contentBackground!==!1&&(u(a)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[o("div",{class:g([u(t).contentBackground!==!1?"p-6 sm:p-8":""])},[re(B.$slots,"default",{},void 0,!0)],2)],2)])])]),R(oo)],2))}},po=ne(mo,[["__scopeId","data-v-70a2c658"]]);export{po as A,mt as a,ye as b,O as n,vt as r,so as u};
