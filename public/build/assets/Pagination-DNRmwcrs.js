import{e as v,f,y as te,c as i,o as u,i as p,a as g,l as C,t as w,w as j,v as ne,F as V,r as F,k as x,n as G,b as oe,D as se,Q as z}from"./app-CAQpcq2P.js";import{I as N}from"./Icon-xLOnp-24.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={key:0,class:"pagination-info"},ue={class:"pagination-info-text"},re={class:"pagination-info-number"},ge={class:"pagination-info-number"},ce={class:"pagination-info-number"},de={key:1,class:"pagination-page-size"},pe=["disabled"],fe=["value"],ve={class:"pagination-controls"},be=["disabled"],me={key:0,class:"pagination-button-text"},Pe=["disabled"],ye={key:0,class:"pagination-button-text"},he={class:"pagination-pages",role:"group","aria-label":"Page numbers"},ke=["onClick","onKeydown","disabled","aria-label","aria-current"],we={key:1,class:"pagination-ellipsis","aria-hidden":"true"},xe=["disabled"],Ne={key:0,class:"pagination-button-text"},Be=["disabled"],Se={key:0,class:"pagination-button-text"},Ce={key:2,class:"pagination-jump"},ze=["max","disabled"],Ue=["disabled"],Ie={key:3,class:"pagination-loading"},Te={__name:"Pagination",props:{links:{type:Array,default:()=>[]},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},total:{type:Number,default:0},perPage:{type:Number,default:15},from:{type:Number,default:0},to:{type:Number,default:0},showInfo:{type:Boolean,default:!0},showPageSizeSelector:{type:Boolean,default:!0},showFirstLast:{type:Boolean,default:!0},showJumpToPage:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},pageSizeOptions:{type:Array,default:()=>[10,15,25,50,100]},maxVisiblePages:{type:Number,default:7},loading:{type:Boolean,default:!1},class:{type:[String,Array,Object],default:""}},emits:["page-change","page-size-change","update:currentPage","update:perPage"],setup(s,{expose:J,emit:$}){const n=s,B=$,L=v(null),M=v(null),A=v(null),R=v(null),q=v(null),D=v({}),y=v(n.perPage),m=v("");v(-1);const o=f(()=>{if(n.links&&n.links.length>0){const t=n.links.find(r=>r.label==="&laquo; Previous"),a=n.links.find(r=>r.label==="Next &raquo;"),e=n.links.filter(r=>r.label!=="&laquo; Previous"&&r.label!=="Next &raquo;"&&!isNaN(parseInt(r.label))),c=e.find(r=>r.active),l=c?parseInt(c.label):1,b=e.length>0?parseInt(e[e.length-1].label):1;return{currentPage:l,lastPage:b,hasPrevious:!!(t!=null&&t.url),hasNext:!!(a!=null&&a.url),previousUrl:t==null?void 0:t.url,nextUrl:a==null?void 0:a.url,total:n.total,from:n.from,to:n.to,perPage:n.perPage}}return{currentPage:n.currentPage,lastPage:n.lastPage,hasPrevious:n.currentPage>1,hasNext:n.currentPage<n.lastPage,total:n.total,from:n.from,to:n.to,perPage:n.perPage}}),P=f(()=>o.value.currentPage),h=f(()=>o.value.lastPage),E=f(()=>o.value.hasPrevious),O=f(()=>o.value.hasNext),Q=f(()=>o.value.total),H=f(()=>o.value.from),W=f(()=>o.value.to),X=f(()=>{const t=[],a=o.value.currentPage,e=o.value.lastPage,c=n.maxVisiblePages;if(e<=c)for(let l=1;l<=e;l++)t.push({type:"page",number:l,current:l===a});else{const l=Math.floor((c-3)/2);t.push({type:"page",number:1,current:a===1});let b,r;a<=l+2?(b=2,r=Math.min(c-1,e-1)):a>=e-l-1?(b=Math.max(2,e-c+2),r=e-1):(b=a-l,r=a+l),b>2&&t.push({type:"ellipsis"});for(let S=b;S<=r;S++)t.push({type:"page",number:S,current:S===a});r<e-1&&t.push({type:"ellipsis"}),e>1&&t.push({type:"page",number:e,current:a===e})}return t}),U=f(()=>{const t=parseInt(m.value);return t>=1&&t<=o.value.lastPage&&t!==o.value.currentPage}),Y=(t,a)=>{t&&(D.value[a]=t)},d=t=>{if(t<1||t>o.value.lastPage||t===o.value.currentPage)return;console.log("goToPage called with:",t),B("page-change",t),B("update:currentPage",t);let a=!1;if(n.links&&n.links.length>0){const e=n.links.find(c=>parseInt(c.label)===t);console.log("Found pageLink:",e),e!=null&&e.url&&(console.log("Strategy 1: Using Laravel link:",e.url),z.get(e.url),a=!0)}if(!a){console.log("Strategy 2: Manual URL construction");const e=window.location.pathname,c=new URLSearchParams(window.location.search);c.set("page",t);const l=`${e}?${c.toString()}`;console.log("Navigating to:",l),z.get(l)}},I=()=>{o.value.hasPrevious&&(o.value.previousUrl?z.get(o.value.previousUrl):d(o.value.currentPage-1))},T=()=>{o.value.hasNext&&(o.value.nextUrl?z.get(o.value.nextUrl):d(o.value.currentPage+1))},Z=()=>{B("page-size-change",y.value),B("update:perPage",y.value),d(1)},K=()=>{U.value&&(d(parseInt(m.value)),m.value="")},_=t=>{t.key==="Enter"&&(t.preventDefault(),K())},ee=()=>{U.value||(m.value="")},k=(t,a)=>{switch(t.key){case"Enter":case" ":t.preventDefault(),d(a);break;case"ArrowLeft":t.preventDefault(),o.value.hasPrevious&&I();break;case"ArrowRight":t.preventDefault(),o.value.hasNext&&T();break;case"Home":t.preventDefault(),d(1);break;case"End":t.preventDefault(),d(o.value.lastPage);break}},ae=t=>["pagination-page-button",{"pagination-page-button--current":t.current,"pagination-page-button--hover":!t.current}];return te(()=>n.perPage,t=>{y.value=t}),J({goToPage:d,goToPrevious:I,goToNext:T,focusCurrentPage:async()=>{await se();const t=D.value[o.value.currentPage];t&&t.focus()}}),(t,a)=>(u(),i("nav",{class:G(["pagination",n.class]),role:"navigation","aria-label":"Pagination Navigation",ref_key:"paginationNav",ref:L},[s.showInfo?(u(),i("div",ie,[g("p",ue,[a[8]||(a[8]=C(" Showing ")),g("span",re,w(H.value),1),a[9]||(a[9]=C(" to ")),g("span",ge,w(W.value),1),a[10]||(a[10]=C(" of ")),g("span",ce,w(Q.value),1),a[11]||(a[11]=C(" results "))])])):p("",!0),s.showPageSizeSelector?(u(),i("div",de,[a[12]||(a[12]=g("label",{for:"page-size-select",class:"pagination-page-size-label"}," Show: ",-1)),j(g("select",{id:"page-size-select","onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),onChange:Z,class:"pagination-page-size-select",disabled:s.loading},[(u(!0),i(V,null,F(s.pageSizeOptions,e=>(u(),i("option",{key:e,value:e},w(e),9,fe))),128))],40,pe),[[ne,y.value]]),a[13]||(a[13]=g("span",{class:"pagination-page-size-suffix"},"per page",-1))])):p("",!0),g("div",ve,[s.showFirstLast&&P.value>1?(u(),i("button",{key:0,onClick:a[1]||(a[1]=e=>d(1)),onKeydown:a[2]||(a[2]=e=>k(e,1)),class:"pagination-button pagination-button--first",disabled:s.loading||P.value===1,"aria-label":"Go to first page",ref_key:"firstButton",ref:M},[x(N,{name:"chevron-double-left",class:"pagination-icon"}),s.compact?p("",!0):(u(),i("span",me,"First"))],40,be)):p("",!0),g("button",{onClick:I,onKeydown:a[3]||(a[3]=e=>k(e,P.value-1)),class:"pagination-button pagination-button--previous",disabled:s.loading||!E.value,"aria-label":"Go to previous page",ref_key:"previousButton",ref:A},[x(N,{name:"chevron-left",class:"pagination-icon"}),s.compact?p("",!0):(u(),i("span",ye,"Previous"))],40,Pe),g("div",he,[(u(!0),i(V,null,F(X.value,(e,c)=>(u(),i(V,{key:e.label||c},[e.type==="page"?(u(),i("button",{key:0,onClick:l=>d(e.number),onKeydown:l=>k(l,e.number),class:G(ae(e)),disabled:s.loading||e.current,"aria-label":e.current?`Current page, page ${e.number}`:`Go to page ${e.number}`,"aria-current":e.current?"page":void 0,ref_for:!0,ref:l=>Y(l,e.number)},w(e.number),43,ke)):e.type==="ellipsis"?(u(),i("span",we," ... ")):p("",!0)],64))),128))]),g("button",{onClick:T,onKeydown:a[4]||(a[4]=e=>k(e,P.value+1)),class:"pagination-button pagination-button--next",disabled:s.loading||!O.value,"aria-label":"Go to next page",ref_key:"nextButton",ref:R},[s.compact?p("",!0):(u(),i("span",Ne,"Next")),x(N,{name:"chevron-right",class:"pagination-icon"})],40,xe),s.showFirstLast&&P.value<h.value?(u(),i("button",{key:1,onClick:a[5]||(a[5]=e=>d(h.value)),onKeydown:a[6]||(a[6]=e=>k(e,h.value)),class:"pagination-button pagination-button--last",disabled:s.loading||P.value===h.value,"aria-label":"Go to last page",ref_key:"lastButton",ref:q},[s.compact?p("",!0):(u(),i("span",Se,"Last")),x(N,{name:"chevron-double-right",class:"pagination-icon"})],40,Be)):p("",!0)]),s.showJumpToPage?(u(),i("div",Ce,[a[14]||(a[14]=g("label",{for:"jump-to-page",class:"pagination-jump-label"}," Go to page: ",-1)),j(g("input",{id:"jump-to-page","onUpdate:modelValue":a[7]||(a[7]=e=>m.value=e),onKeydown:_,onBlur:ee,type:"number",min:1,max:h.value,class:"pagination-jump-input",disabled:s.loading,placeholder:"Page"},null,40,ze),[[oe,m.value,void 0,{number:!0}]]),g("button",{onClick:K,class:"pagination-jump-button",disabled:s.loading||!U.value,"aria-label":"Jump to specified page"}," Go ",8,Ue)])):p("",!0),s.loading?(u(),i("div",Ie,[x(N,{name:"spinner",class:"pagination-loading-icon animate-spin"}),a[15]||(a[15]=g("span",{class:"pagination-loading-text"},"Loading...",-1))])):p("",!0)],2))}},Fe=le(Te,[["__scopeId","data-v-029fe525"]]);export{Fe as P};
