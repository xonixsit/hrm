import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{e as E,f as o,y as I,D as y,z as j,c as u,o as i,i as h,a as g,l as D,t as f,n as w}from"./app-Ck2gURmh.js";const K=["for"],$={key:0,class:"text-error-500 ml-1"},F={class:"relative"},O=["id","value","placeholder","disabled","readonly","required","rows","maxlength"],A={key:0,class:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize opacity-50 hover:opacity-75"},G={key:1,class:"mt-1 flex justify-between items-start"},J={class:"flex-1"},P={key:0,class:"text-sm text-error-500",role:"alert"},Q={key:1,class:"text-sm text-neutral-500"},U={__name:"BaseTextarea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},rows:{type:Number,default:3},minRows:{type:Number,default:2},maxRows:{type:Number,default:10},maxLength:{type:Number,default:null},showCharacterCount:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","focus","blur","keydown","resize"],setup(a,{expose:R,emit:k}){const t=a,c=k,n=E(null),z=o(()=>`textarea-${Math.random().toString(36).substr(2,9)}`),b=o(()=>t.modelValue?t.modelValue.length:0),p=o(()=>t.maxLength?b.value>t.maxLength*.8:!1),v=o(()=>t.maxLength?b.value>t.maxLength:!1),C=o(()=>{if(!t.autoResize)return t.rows;if(!n.value||!t.modelValue)return Math.max(t.minRows,t.rows);const e=24,l=16,s=n.value.scrollHeight,r=Math.ceil((s-l)/e);return Math.min(Math.max(r,t.minRows),t.maxRows)}),M=o(()=>["base-textarea-wrapper",t.class]),V=o(()=>{const e=["block w-full rounded-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset transition-all duration-200","placeholder:text-neutral-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6","disabled:cursor-not-allowed disabled:bg-neutral-50 disabled:text-neutral-500","read-only:bg-neutral-50 read-only:text-neutral-500"],l=()=>!t.resizable||t.autoResize?"resize-none":"resize-y",s={default:"ring-neutral-300 focus:ring-primary-600 bg-white text-neutral-900",error:"ring-error-300 focus:ring-error-600 bg-error-50 text-error-900",disabled:"ring-neutral-200 bg-neutral-50 text-neutral-500",readonly:"ring-neutral-200 bg-neutral-50 text-neutral-500"};let r="default";return t.disabled?r="disabled":t.readonly?r="readonly":t.errorMessage&&(r="error"),[...e,l(),s[r]]}),B=o(()=>["text-xs font-medium ml-2 flex-shrink-0",{"text-neutral-500":!p.value&&!v.value,"text-warning-600":p.value&&!v.value,"text-error-600":v.value}]),x=async()=>{if(!t.autoResize||!n.value)return;await y(),n.value.style.height="auto";const e=n.value.scrollHeight,l=24,s=16,r=t.minRows*l+s,m=t.maxRows*l+s,d=Math.min(Math.max(e,r),m);n.value.style.height=`${d}px`,c("resize",{height:d,rows:Math.ceil((d-s)/l)})},S=e=>{const l=e.target.value;t.maxLength&&l.length>t.maxLength||(c("update:modelValue",l),t.autoResize&&x())},L=e=>{c("focus",e)},H=e=>{c("blur",e)},T=e=>{if(e.key==="Tab"&&!e.shiftKey){e.preventDefault();const l=e.target.selectionStart,s=e.target.selectionEnd,r=e.target.value,m=r.substring(0,l)+"  "+r.substring(s);c("update:modelValue",m),y(()=>{e.target.selectionStart=e.target.selectionEnd=l+2})}c("keydown",e)};return R({focus:()=>{var e;(e=n.value)==null||e.focus()},blur:()=>{var e;(e=n.value)==null||e.blur()},select:()=>{var e;(e=n.value)==null||e.select()},insertText:(e,l=null)=>{if(!n.value)return;const s=n.value,r=l!==null?l:s.selectionStart,m=l!==null?l:s.selectionEnd,d=t.modelValue||"",N=d.substring(0,r)+e+d.substring(m);c("update:modelValue",N),y(()=>{s.selectionStart=s.selectionEnd=r+e.length,s.focus()})},adjustHeight:x,textareaRef:n}),I(()=>t.modelValue,()=>{t.autoResize&&y(()=>x())}),j(()=>{t.autoResize&&x()}),(e,l)=>(i(),u("div",{class:w(["base-textarea-wrapper",M.value])},[a.label?(i(),u("label",{key:0,for:z.value,class:"block text-sm font-medium text-neutral-700 mb-1"},[D(f(a.label)+" ",1),a.required?(i(),u("span",$,"*")):h("",!0)],8,K)):h("",!0),g("div",F,[g("textarea",{id:z.value,ref_key:"textareaRef",ref:n,value:a.modelValue,placeholder:a.placeholder,disabled:a.disabled,readonly:a.readonly,required:a.required,rows:C.value,maxlength:a.maxLength,class:w(V.value),onInput:S,onFocus:L,onBlur:H,onKeydown:T},null,42,O),!a.autoResize&&a.resizable?(i(),u("div",A,l[0]||(l[0]=[g("svg",{class:"w-4 h-4 text-neutral-400",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{d:"M14 18l4-4v4h-4zM10 18l4-4v4h-4zM6 18l4-4v4H6z"})],-1)]))):h("",!0)]),a.showCharacterCount||a.helpText||a.errorMessage?(i(),u("div",G,[g("div",J,[a.errorMessage?(i(),u("p",P,f(a.errorMessage),1)):a.helpText?(i(),u("p",Q,f(a.helpText),1)):h("",!0)]),a.showCharacterCount?(i(),u("div",{key:0,class:w(B.value)},f(b.value)+f(a.maxLength?`/${a.maxLength}`:""),3)):h("",!0)])):h("",!0)],2))}},te=q(U,[["__scopeId","data-v-7201d607"]]);export{te as B};
