import{x as ie,e as $,f as d,g as A,o as n,h as L,k as y,a as t,d as de,c as a,i as u,w as f,F as h,r as x,t as r,v as U,l as D,b as N,u as i,n as V,Q as B}from"./app-CcqTUaOx.js";import{_ as ce}from"./AuthenticatedLayout-BPnvssXb.js";import{P as ue}from"./PageLayout-BPEaywBZ.js";import{P as me}from"./PrimaryButton-Qs77pwNC.js";import{_ as pe}from"./SecondaryButton-COi63LvL.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as ve,g as O,e as k,f as M}from"./Icon-B93A1H9x.js";import"./useAuth-DaQRKePi.js";import"./ApplicationLogo-DhXqjtvM.js";import"./useAccessibility-Bbz5iDUU.js";import"./PageHeader-DxHDWug0.js";/* empty css                                                                   *//* empty css                                                                   */const _e={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ge={class:"p-8"},be={class:"form-section"},fe={class:"space-y-4"},he=["value"],xe={class:"relative"},ke={key:0,class:"mt-2 flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg"},Ce={class:"flex items-center space-x-3"},we={class:"flex-shrink-0"},Se={key:1,class:"w-5 h-5 bg-blue-600 rounded border-2 border-blue-600 flex items-center justify-center"},Ae={key:2,class:"w-5 h-5 border-2 border-gray-300 rounded"},De={class:"text-xs text-gray-500"},Ie={key:1,class:"mt-2 space-y-1 max-h-64 overflow-y-auto border border-gray-200 rounded-lg"},$e=["onClick"],Le={class:"flex items-center space-x-3"},Ue={class:"employee-avatar-small"},Ve={class:"flex-1"},je={class:"font-medium text-gray-900"},Ee={class:"flex items-center space-x-2 text-sm text-gray-600"},Be={key:0,class:"text-gray-400"},Te={key:1,class:"text-gray-500"},Fe={class:"flex-shrink-0"},Pe={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},Ne={key:2,class:"mt-2 text-center py-8 border border-gray-200 rounded-lg"},Oe={class:"text-sm text-gray-500"},Me={key:3,class:"mt-2 text-center py-8 border border-gray-200 rounded-lg"},Re={key:4,class:"mt-2 text-xs text-gray-500"},qe={key:0,class:"text-blue-600 font-medium"},Qe={key:0,class:"selected-employees-summary"},ze={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},Ge={class:"flex items-center space-x-2"},He={class:"text-sm font-medium text-blue-900"},Je={class:"form-section"},Ke={class:"space-y-4"},We=["value"],Xe={key:0},Ye={key:0,class:"mb-2 flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg"},Ze={class:"flex items-center space-x-3"},et={class:"flex-shrink-0"},tt={key:1,class:"w-5 h-5 bg-blue-600 rounded border-2 border-blue-600 flex items-center justify-center"},st={key:2,class:"w-5 h-5 border-2 border-gray-300 rounded"},lt={class:"text-xs text-gray-500"},ot={class:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg"},nt=["onClick"],at={class:"flex items-start justify-between"},rt={class:"flex-1"},it={class:"font-medium text-gray-900"},dt={class:"text-sm text-gray-600 mt-1"},ct={class:"ml-3 flex-shrink-0"},ut={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},mt={key:1,class:"selected-competencies-summary"},pt={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},yt={class:"flex items-center space-x-2"},vt={class:"text-sm font-medium text-blue-900"},_t={key:2,class:"border-t pt-4"},gt={class:"relative"},bt={key:0,class:"mt-2 space-y-1 max-h-48 overflow-y-auto border border-gray-200 rounded-lg"},ft=["onClick"],ht={class:"flex items-center justify-between"},xt={class:"font-medium text-gray-900"},kt={class:"text-xs text-gray-500"},Ct={class:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded"},wt={class:"form-section"},St={class:"options-grid"},At={class:"form-field"},Dt={class:"form-field"},It=["value"],$t={class:"form-actions"},Lt={__name:"Create",props:{employees:{type:Array,required:!0},competencies:{type:Array,required:!0},assessmentCycles:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},setup(j){const v=j,l=ie({employee_ids:[],competency_ids:[],assessment_type:"manager",assessment_cycle_id:null}),p=$(""),C=$(""),_=$(""),g=$(""),R=d(()=>{let o=v.employees;if(C.value&&(o=o.filter(e=>e.department&&e.department.id===C.value)),p.value&&p.value.length>=2){const e=p.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(e)||s.position&&s.position.toLowerCase().includes(e))}return o.sort((e,s)=>e.name.localeCompare(s.name))}),c=d(()=>R.value),b=d(()=>v.employees.filter(o=>l.employee_ids.includes(o.id))),q=d(()=>c.value.filter(o=>l.employee_ids.includes(o.id))),w=d(()=>c.value.length>0&&c.value.every(o=>l.employee_ids.includes(o.id))),Q=d(()=>c.value.some(o=>l.employee_ids.includes(o.id))&&!w.value),z=d(()=>[...new Set(v.competencies.map(e=>e.category))].sort()),m=d(()=>g.value?v.competencies.filter(o=>o.category===g.value).sort((o,e)=>o.name.localeCompare(e.name)):[]),E=d(()=>v.competencies.filter(o=>l.competency_ids.includes(o.id))),G=d(()=>m.value.filter(o=>l.competency_ids.includes(o.id))),S=d(()=>m.value.length>0&&m.value.every(o=>l.competency_ids.includes(o.id))),H=d(()=>m.value.some(o=>l.competency_ids.includes(o.id))&&!S.value),T=d(()=>{if(!_.value||_.value.length<2)return[];const o=_.value.toLowerCase();return v.competencies.filter(e=>e.name.toLowerCase().includes(o)||e.description&&e.description.toLowerCase().includes(o)).slice(0,5).sort((e,s)=>e.name.localeCompare(s.name))});d(()=>l.competency_id?v.competencies.find(o=>o.id===l.competency_id):null);const J=d(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Create Assessment",href:null}]),K=d(()=>[{label:"Back to Dashboard",href:route("assessment-dashboard"),icon:ve,variant:"secondary"}]),W=d(()=>l.employee_ids.length>0&&l.competency_ids.length>0&&!l.processing),F=d(()=>l.employee_ids.length*l.competency_ids.length),X=o=>o.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),Y=(o,e)=>{const s=new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric"}),I=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${s} - ${I}`},Z=()=>{l.employee_ids=[]},ee=o=>{l.employee_ids.indexOf(o.id)>-1?l.employee_ids=l.employee_ids.filter(s=>s!==o.id):l.employee_ids=[...l.employee_ids,o.id],console.log("Selected employee IDs:",l.employee_ids),console.log("Selected employees count:",b.value.length)},te=()=>{if(w.value){const o=c.value.map(e=>e.id);l.employee_ids=l.employee_ids.filter(e=>!o.includes(e))}else{const e=c.value.map(s=>s.id).filter(s=>!l.employee_ids.includes(s));l.employee_ids=[...l.employee_ids,...e]}console.log("Toggle Select All - Selected employee IDs:",l.employee_ids)},se=()=>{l.employee_ids=[],p.value="",console.log("Department changed - cleared all employee selections")},le=o=>{l.competency_ids.indexOf(o.id)>-1?l.competency_ids=l.competency_ids.filter(s=>s!==o.id):l.competency_ids=[...l.competency_ids,o.id],console.log("Selected competency IDs:",l.competency_ids)},oe=()=>{if(S.value){const o=m.value.map(e=>e.id);l.competency_ids=l.competency_ids.filter(e=>!o.includes(e))}else{const e=m.value.map(s=>s.id).filter(s=>!l.competency_ids.includes(s));l.competency_ids=[...l.competency_ids,...e]}console.log("Toggle Select All Competencies - Selected IDs:",l.competency_ids)},ne=()=>{l.competency_ids=[]},ae=o=>{l.competency_ids.includes(o.id)||(l.competency_ids=[...l.competency_ids,o.id]),g.value=o.category,_.value=""},P=()=>{if(l.employee_ids.length===0||l.competency_ids.length===0){alert("Please select at least one employee and one competency");return}if(l.employee_ids.length*l.competency_ids.length===1){const e=new URLSearchParams({employee_id:l.employee_ids[0],competency_id:l.competency_ids[0],assessment_type:l.assessment_type});l.assessment_cycle_id&&e.append("assessment_cycle_id",l.assessment_cycle_id);const s=`${route("assessment-form")}?${e.toString()}`;B.visit(s)}else l.post(route("competency-assessments.bulk-create"),{onSuccess:()=>{B.visit(route("competency-assessments.index"))}})},re=()=>{B.visit(route("assessment-dashboard"))};return(o,e)=>(n(),A(ce,null,{default:L(()=>[y(ue,{title:"Create Individual Assessment",subtitle:"Select employees and competency to create assessments (can be linked to a cycle or standalone)",breadcrumbs:J.value,actions:K.value},{default:L(()=>[t("div",_e,[t("div",ge,[t("form",{onSubmit:de(P,["prevent"]),class:"assessment-selection-form"},[t("div",be,[e[12]||(e[12]=t("h3",{class:"section-title"},"Select Employee",-1)),t("div",fe,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by Department (Optional) ",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>C.value=s),onChange:se,class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[e[7]||(e[7]=t("option",{value:""},"All Departments",-1)),(n(!0),a(h,null,x(j.departments,s=>(n(),a("option",{key:s.id,value:s.id},r(s.name),9,he))),128))],544),[[U,C.value]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[D(" Select Employees "),t("span",{class:"text-xs text-gray-500 font-normal"},"(Click multiple employees to select them)")],-1)),t("div",xe,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),type:"text",placeholder:"Search by name or position (optional)...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,p.value]]),y(i(O),{class:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"})]),c.value.length>0?(n(),a("div",ke,[t("div",Ce,[t("button",{type:"button",onClick:te,class:V(["flex items-center space-x-2 text-sm font-medium transition-colors duration-200",w.value?"text-blue-700 hover:text-blue-800":"text-gray-700 hover:text-gray-800"])},[t("div",we,[w.value?(n(),A(i(k),{key:0,class:"w-5 h-5 text-blue-600"})):Q.value?(n(),a("div",Se,e[9]||(e[9]=[t("div",{class:"w-2 h-2 bg-white rounded-sm"},null,-1)]))):(n(),a("div",Ae))]),t("span",null,r(w.value?"Deselect All":"Select All")+" ("+r(c.value.length)+" employees) ",1)],2)]),t("div",De,r(q.value.length)+" of "+r(c.value.length)+" selected ",1)])):u("",!0),c.value.length>0?(n(),a("div",Ie,[(n(!0),a(h,null,x(c.value,s=>(n(),a("div",{key:s.id,onClick:I=>ee(s),class:V(["employee-option",{selected:i(l).employee_ids.includes(s.id)}])},[t("div",Le,[t("div",Ue,r(X(s.name)),1),t("div",Ve,[t("h4",je,r(s.name),1),t("div",Ee,[t("span",null,r(s.position||"Employee"),1),s.department?(n(),a("span",Be,"•")):u("",!0),s.department?(n(),a("span",Te,r(s.department.name),1)):u("",!0)])]),t("div",Fe,[i(l).employee_ids.includes(s.id)?(n(),A(i(k),{key:0,class:"w-5 h-5 text-blue-600"})):(n(),a("div",Pe))])])],10,$e))),128))])):p.value&&p.value.length>0?(n(),a("div",Ne,[y(i(M),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),t("p",Oe,'No employees found matching "'+r(p.value)+'"',1)])):!C.value&&c.value.length===0?(n(),a("div",Me,[y(i(M),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"Select a department to see employees, or search by name",-1))])):u("",!0),c.value.length>0?(n(),a("div",Re,[D(r(c.value.length)+" employee"+r(c.value.length!==1?"s":"")+" available ",1),b.value.length>0?(n(),a("span",qe," • "+r(b.value.length)+" selected ",1)):u("",!0)])):u("",!0)]),b.value.length>0?(n(),a("div",Qe,[t("div",ze,[t("div",Ge,[y(i(k),{class:"w-5 h-5 text-blue-600"}),t("span",He,r(b.value.length)+" employee"+r(b.value.length!==1?"s":"")+" selected ",1)]),t("button",{type:"button",onClick:Z,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):u("",!0)])]),t("div",Je,[e[18]||(e[18]=t("h3",{class:"section-title"},"Select Competency",-1)),t("div",Ke,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Step 1: Choose Category ",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),onChange:e[3]||(e[3]=s=>i(l).competency_id=null),class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[e[13]||(e[13]=t("option",{value:""},"Select a competency category...",-1)),(n(!0),a(h,null,x(z.value,s=>(n(),a("option",{key:s,value:s},r(s),9,We))),128))],544),[[U,g.value]])]),g.value?(n(),a("div",Xe,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[D(" Step 2: Choose Competencies "),t("span",{class:"text-xs text-gray-500 font-normal"},"(Click multiple competencies to select them)")],-1)),m.value.length>0?(n(),a("div",Ye,[t("div",Ze,[t("button",{type:"button",onClick:oe,class:V(["flex items-center space-x-2 text-sm font-medium transition-colors duration-200",S.value?"text-blue-700 hover:text-blue-800":"text-gray-700 hover:text-gray-800"])},[t("div",et,[S.value?(n(),A(i(k),{key:0,class:"w-5 h-5 text-blue-600"})):H.value?(n(),a("div",tt,e[15]||(e[15]=[t("div",{class:"w-2 h-2 bg-white rounded-sm"},null,-1)]))):(n(),a("div",st))]),t("span",null,r(S.value?"Deselect All":"Select All")+" ("+r(m.value.length)+" competencies) ",1)],2)]),t("div",lt,r(G.value.length)+" of "+r(m.value.length)+" selected ",1)])):u("",!0),t("div",ot,[(n(!0),a(h,null,x(m.value,s=>(n(),a("div",{key:s.id,onClick:I=>le(s),class:V(["competency-option",{selected:i(l).competency_ids.includes(s.id)}])},[t("div",at,[t("div",rt,[t("h4",it,r(s.name),1),t("p",dt,r(s.description),1)]),t("div",ct,[i(l).competency_ids.includes(s.id)?(n(),A(i(k),{key:0,class:"w-5 h-5 text-blue-600"})):(n(),a("div",ut))])])],10,nt))),128))])])):u("",!0),E.value.length>0?(n(),a("div",mt,[t("div",pt,[t("div",yt,[y(i(k),{class:"w-5 h-5 text-blue-600"}),t("span",vt,r(E.value.length)+" competenc"+r(E.value.length!==1?"ies":"y")+" selected ",1)]),t("button",{type:"button",onClick:ne,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):u("",!0),g.value?u("",!0):(n(),a("div",_t,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Or search directly: ",-1)),t("div",gt,[f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>_.value=s),type:"text",placeholder:"Type competency name...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,_.value]]),y(i(O),{class:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"})]),_.value&&T.value.length>0?(n(),a("div",bt,[(n(!0),a(h,null,x(T.value,s=>(n(),a("div",{key:s.id,onClick:I=>ae(s),class:"search-result-item"},[t("div",ht,[t("div",null,[t("h4",xt,r(s.name),1),t("p",kt,r(s.category),1)]),t("span",Ct,r(s.category),1)])],8,ft))),128))])):u("",!0)]))])]),t("div",wt,[e[23]||(e[23]=t("h3",{class:"section-title"},"Assessment Options",-1)),t("div",St,[t("div",At,[e[20]||(e[20]=t("label",{class:"field-label"},"Assessment Type",-1)),f(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>i(l).assessment_type=s),class:"form-select"},e[19]||(e[19]=[t("option",{value:"manager"},"Manager Assessment",-1),t("option",{value:"self"},"Self Assessment",-1),t("option",{value:"peer"},"Peer Assessment",-1),t("option",{value:"360"},"360° Feedback",-1)]),512),[[U,i(l).assessment_type]])]),t("div",Dt,[e[22]||(e[22]=t("label",{class:"field-label"},"Assessment Cycle (Optional)",-1)),f(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>i(l).assessment_cycle_id=s),class:"form-select"},[e[21]||(e[21]=t("option",{value:""},"No specific cycle",-1)),(n(!0),a(h,null,x(j.assessmentCycles,s=>(n(),a("option",{key:s.id,value:s.id},r(s.name)+" ("+r(Y(s.start_date,s.end_date))+") ",9,It))),128))],512),[[U,i(l).assessment_cycle_id]])])])]),t("div",$t,[y(pe,{onClick:re,type:"button"},{default:L(()=>e[24]||(e[24]=[D(" Cancel ")])),_:1,__:[24]}),y(me,{type:"button",disabled:!W.value,loading:i(l).processing,onClick:P},{default:L(()=>[D(r(F.value>1?`Create ${F.value} Assessments`:"Create Assessment"),1)]),_:1},8,["disabled","loading"])])],32)])])]),_:1},8,["breadcrumbs","actions"])]),_:1}))}},Qt=ye(Lt,[["__scopeId","data-v-3a5a1b5f"]]);export{Qt as default};
