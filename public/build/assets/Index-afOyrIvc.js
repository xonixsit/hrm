import{z as K,G as W,e as A,f as b,g as y,o as r,h as m,k as z,a as t,c as n,i,w as h,u as c,b as D,l as d,t as a,F as L,r as M,v as $,n as O,S as g,Q as X}from"./app-CXqtXhOZ.js";import{l as Y}from"./lodash-BUNxLVpz.js";import{A as Z}from"./AuthenticatedLayout-B6mTw9MO.js";import{P as ee}from"./PageLayout-loWgIbgj.js";import{u as te}from"./useAuth-DIJ89o7d.js";import"./icons-C9afmu8N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-BXz6sLBv.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-C0t_aTbX.js";import"./PageHeader-DjFU61oB.js";import"./Icon-3PNuznbO.js";/* empty css                                                                   */const se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},le={class:"p-6 text-gray-900"},oe={class:"flex justify-between items-start mb-6"},re={class:"flex items-center space-x-4"},ae={class:"relative"},ne={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ue={key:0},de=["value"],me={key:0,class:"mt-4 flex flex-wrap gap-2"},ce={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},pe={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},fe={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},xe={key:3,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},ye={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ge={class:"overflow-x-auto"},ve={class:"min-w-full divide-y divide-gray-300"},be={class:"bg-gray-50"},he={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},we={class:"bg-white divide-y divide-gray-200"},ke={key:0,class:"px-6 py-4 whitespace-nowrap"},_e={class:"flex items-center"},Ce={class:"flex-shrink-0 h-8 w-8"},Le={class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},Ne={class:"text-sm font-medium text-blue-700"},Ae={class:"ml-4"},De={class:"text-sm font-medium text-gray-900"},Me={class:"text-sm text-gray-500"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Se={class:"flex items-center justify-end space-x-2"},ze={key:1,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},$e={class:"flex-1 flex justify-between sm:hidden"},Oe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ee={class:"text-sm text-gray-700"},Ue={class:"font-medium"},Re={class:"font-medium"},Ie={class:"font-medium"},qe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},lt={__name:"Index",props:{attendances:{type:Object,required:!0},filters:{type:Object,default:()=>({})},queryParams:{type:Object,default:()=>({})}},setup(u){K(()=>{new URLSearchParams(window.location.search).get("action")==="clock-in"&&W.post("/api/attendance/clock-in").then(()=>{window.location.href=route("dashboard")})});const v=u,{hasAnyRole:E}=te(),w=A(!0),j=A(!1),o=A({employee_id:v.queryParams.employee_id||"",status:v.queryParams.status||"",date_from:v.queryParams.date_from||"",date_to:v.queryParams.date_to||"",search:v.queryParams.search||""}),k=b(()=>E(["Admin","HR"])),B=b(()=>v.filters.employees||[]),U=b(()=>o.value.employee_id||o.value.status||o.value.date_from||o.value.date_to||o.value.search),R=b(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Attendance Management",current:!0}]),I=b(()=>[]),N=l=>{if(!l)return"N/A";try{const[e,s,p]=l.split("-").map(Number),x=new Date(e,s-1,p);return isNaN(x.getTime())?"N/A":x.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return console.error("Error formatting date:",e),"N/A"}},P=l=>{if(!l||l==="Invalid Date")return"-";try{let e;if(l.includes("T"))e=new Date(l);else if(l.includes(":"))e=new Date(`2000-01-01 ${l}`);else return"-";return isNaN(e.getTime())?"-":e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"-"}},q=l=>{if(!l.clock_in||!l.clock_out)return"-";try{let e,s;if(l.clock_in.includes("T")?e=new Date(l.clock_in):e=new Date(`${l.date} ${l.clock_in}`),l.clock_out.includes("T")?s=new Date(l.clock_out):s=new Date(`${l.date} ${l.clock_out}`),isNaN(e.getTime())||isNaN(s.getTime()))return"-";const p=s-e;if(p<0)return"-";const x=Math.floor(p/(1e3*60*60)),C=Math.floor(p%(1e3*60*60)/(1e3*60));return`${x}h ${C}m`}catch{return"-"}},T=l=>({clocked_in:"Clocked In",clocked_out:"Clocked Out",on_break:"On Break"})[l]||l||"N/A",H=l=>({clocked_in:"bg-green-100 text-green-800",clocked_out:"bg-blue-100 text-blue-800",on_break:"bg-yellow-100 text-yellow-800"})[l]||"bg-gray-100 text-gray-800",Q=l=>l?l.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"--",G=l=>{const e=B.value.find(s=>s.id==l);return e?e.name:"Unknown"},f=()=>{const l={...o.value};Object.keys(l).forEach(e=>{(l[e]===null||l[e]==="")&&delete l[e]}),j.value=!0,X.get(route("attendances.index"),l,{preserveState:!0,preserveScroll:!0,onFinish:()=>{j.value=!1}})},F=Y.debounce(f,300),_=l=>{o.value[l]="",f()},J=()=>{o.value={employee_id:"",status:"",date_from:"",date_to:"",search:""},f()};return(l,e)=>(r(),y(Z,null,{default:m(()=>[z(ee,{title:"Time Tracking",subtitle:"View and manage attendance records",breadcrumbs:R.value,actions:I.value},{default:m(()=>[t("div",se,[t("div",le,[t("div",oe,[e[13]||(e[13]=t("div",null,[t("h3",{class:"text-lg font-medium text-gray-900"},"Attendance Records"),t("p",{class:"mt-1 text-sm text-gray-600"}," View and manage attendance records. ")],-1)),t("div",re,[t("div",ae,[e[11]||(e[11]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.search=s),type:"text",placeholder:"Search by employee name or notes...",class:"block w-80 pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onInput:e[1]||(e[1]=(...s)=>c(F)&&c(F)(...s))},null,544),[[D,o.value.search]])]),t("button",{onClick:e[2]||(e[2]=s=>w.value=!w.value),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[e[12]||(e[12]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),d(" "+a(w.value?"Hide Filters":"Show Filters"),1)])])]),w.value?(r(),n("div",ne,[t("div",ie,[k.value?(r(),n("div",ue,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee",-1)),h(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.employee_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:f},[e[14]||(e[14]=t("option",{value:""},"All employees",-1)),(r(!0),n(L,null,M(B.value,s=>(r(),n("option",{key:s.id,value:s.id},a(s.name),9,de))),128))],544),[[$,o.value.employee_id]])])):i("",!0),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),h(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:f},e[16]||(e[16]=[t("option",{value:""},"All statuses",-1),t("option",{value:"clocked_in"},"Clocked In",-1),t("option",{value:"clocked_out"},"Clocked Out",-1),t("option",{value:"on_break"},"On Break",-1)]),544),[[$,o.value.status]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.date_from=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:f},null,544),[[D,o.value.date_from]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),h(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.date_to=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:f},null,544),[[D,o.value.date_to]])])]),U.value?(r(),n("div",me,[e[24]||(e[24]=t("span",{class:"text-sm font-medium text-gray-700"},"Active filters:",-1)),o.value.employee_id?(r(),n("span",ce,[d(" Employee: "+a(G(o.value.employee_id))+" ",1),t("button",{onClick:e[7]||(e[7]=s=>_("employee_id")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none"},e[20]||(e[20]=[t("span",{class:"sr-only"},"Remove employee filter",-1),t("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[t("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):i("",!0),o.value.status?(r(),n("span",pe,[d(" Status: "+a(T(o.value.status))+" ",1),t("button",{onClick:e[8]||(e[8]=s=>_("status")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500 focus:outline-none"},e[21]||(e[21]=[t("span",{class:"sr-only"},"Remove status filter",-1),t("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[t("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):i("",!0),o.value.date_from?(r(),n("span",fe,[d(" From: "+a(N(o.value.date_from))+" ",1),t("button",{onClick:e[9]||(e[9]=s=>_("date_from")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500 focus:outline-none"},e[22]||(e[22]=[t("span",{class:"sr-only"},"Remove date from filter",-1),t("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[t("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):i("",!0),o.value.date_to?(r(),n("span",xe,[d(" To: "+a(N(o.value.date_to))+" ",1),t("button",{onClick:e[10]||(e[10]=s=>_("date_to")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500 focus:outline-none"},e[23]||(e[23]=[t("span",{class:"sr-only"},"Remove date to filter",-1),t("svg",{class:"w-2 h-2",fill:"currentColor",viewBox:"0 0 8 8"},[t("path",{d:"M4 3.293l2.146-2.147a.5.5 0 01.708.708L4.707 4l2.147 2.146a.5.5 0 01-.708.708L4 4.707l-2.146 2.147a.5.5 0 01-.708-.708L3.293 4 1.146 1.854a.5.5 0 01.708-.708L4 3.293z"})],-1)]))])):i("",!0),t("button",{onClick:J,class:"text-sm text-blue-600 hover:text-blue-800"}," Clear all ")])):i("",!0)])):i("",!0),t("div",ye,[t("div",ge,[t("table",ve,[t("thead",be,[t("tr",null,[k.value?(r(),n("th",he," Employee ")):i("",!0),e[25]||(e[25]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),e[26]||(e[26]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Clock In ",-1)),e[27]||(e[27]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Clock Out ",-1)),e[28]||(e[28]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration ",-1)),e[29]||(e[29]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),e[30]||(e[30]=t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")],-1))])]),t("tbody",we,[(r(!0),n(L,null,M(u.attendances.data,s=>{var p,x,C,V,S;return r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[k.value?(r(),n("td",ke,[t("div",_e,[t("div",Ce,[t("div",Le,[t("span",Ne,a(Q((x=(p=s.employee)==null?void 0:p.user)==null?void 0:x.name)),1)])]),t("div",Ae,[t("div",De,a(((V=(C=s.employee)==null?void 0:C.user)==null?void 0:V.name)||"N/A"),1),t("div",Me,a(((S=s.employee)==null?void 0:S.employee_code)||""),1)])])])):i("",!0),t("td",je,a(N(s.date)),1),t("td",Be,a(P(s.clock_in)),1),t("td",Pe,a(P(s.clock_out)),1),t("td",Te,a(s.work_duration_formatted||q(s)),1),t("td",Fe,[t("span",{class:O([H(s.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},a(T(s.status)),3)]),t("td",Ve,[t("div",Se,[z(c(g),{href:l.route("attendances.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:m(()=>e[31]||(e[31]=[d(" View ")])),_:2,__:[31]},1032,["href"]),k.value?(r(),y(c(g),{key:0,href:l.route("attendances.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:m(()=>e[32]||(e[32]=[d(" Edit ")])),_:2,__:[32]},1032,["href"])):i("",!0)])])])}),128))])])])]),u.attendances.data.length>0?(r(),n("div",ze,[t("div",$e,[u.attendances.prev_page_url?(r(),y(c(g),{key:0,href:u.attendances.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:m(()=>e[33]||(e[33]=[d(" Previous ")])),_:1,__:[33]},8,["href"])):i("",!0),u.attendances.next_page_url?(r(),y(c(g),{key:1,href:u.attendances.next_page_url,class:"relative ml-3 inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:m(()=>e[34]||(e[34]=[d(" Next ")])),_:1,__:[34]},8,["href"])):i("",!0)]),t("div",Oe,[t("div",null,[t("p",Ee,[e[35]||(e[35]=d(" Showing ")),t("span",Ue,a(u.attendances.from),1),e[36]||(e[36]=d(" to ")),t("span",Re,a(u.attendances.to),1),e[37]||(e[37]=d(" of ")),t("span",Ie,a(u.attendances.total),1),e[38]||(e[38]=d(" results "))])]),t("div",null,[t("nav",qe,[u.attendances.prev_page_url?(r(),y(c(g),{key:0,href:u.attendances.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:m(()=>e[39]||(e[39]=[t("span",{class:"sr-only"},"Previous",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"})],-1)])),_:1,__:[39]},8,["href"])):i("",!0),(r(!0),n(L,null,M(u.attendances.links,s=>(r(),n(L,{key:s.label},[s.url&&!s.label.includes("Previous")&&!s.label.includes("Next")?(r(),y(c(g),{key:0,href:s.url,class:O(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},{default:m(()=>[d(a(s.label),1)]),_:2},1032,["href","class"])):i("",!0)],64))),128)),u.attendances.next_page_url?(r(),y(c(g),{key:1,href:u.attendances.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:m(()=>e[40]||(e[40]=[t("span",{class:"sr-only"},"Next",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1)])),_:1,__:[40]},8,["href"])):i("",!0)])])])])):i("",!0)])])]),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{lt as default};
