import{f as b,g as m,o as r,h as c,a as e,k as y,u,S as p,l as x,i as a,c as n,F as S,r as z,t as d,n as E,Q as f}from"./app-qqAwAE0p.js";import{A as L}from"./AuthenticatedLayout-5y8X26vD.js";import{P as D}from"./Pagination-kQWHF-Mp.js";import{u as $}from"./useAuth-BEGM_qae.js";import{a as N}from"./icons-DSw-vv7H.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-DnhReM2k.js";import"./Icon-Du5DvmhO.js";const V={class:"min-h-screen bg-gray-50"},H={class:"bg-white border-b border-gray-200"},P={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},R={class:"py-6"},T={class:"flex mb-4","aria-label":"Breadcrumb"},F={class:"flex items-center space-x-2 text-sm"},O={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Q={class:"flex items-center space-x-3"},G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"bg-white rounded-lg shadow-sm border border-gray-200"},U={class:"p-6"},q={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},J={class:"min-w-full divide-y divide-gray-300"},K={class:"bg-gray-50"},W={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},X={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={key:0,class:"px-6 py-4 whitespace-nowrap"},ee={class:"flex items-center"},te={class:"flex-shrink-0 h-8 w-8"},se={class:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center"},oe={class:"text-sm font-medium text-gray-700"},re={class:"ml-3"},ne={class:"text-sm font-medium text-gray-900"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"flex items-center"},ce=["title"],ue={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap text-center"},xe={class:"flex justify-center"},me={key:0,class:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",title:"Synced with attendance"},ye={key:1,class:"h-5 w-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",title:"Manually synced with attendance"},ge={key:2,class:"text-gray-300",title:"Not synced with attendance"},fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},he={class:"flex items-center justify-end space-x-2"},ve=["onClick"],we=["onClick"],be=["onClick"],ke={key:0,class:"text-center py-12"},_e={class:"mt-6"},Ae={key:1,class:"mt-6"},De={__name:"Index",props:{timesheets:Object},setup(l){const{hasRole:g,hasAnyRole:h}=$(),i=b(()=>h(["Admin","Manager"])),v=b(()=>g("Employee")||h(["Admin","Manager"])),k=o=>(g("Employee")&&!i.value||i.value)&&o.status==="pending",_=o=>(g("Employee")&&!i.value||i.value)&&o.status==="pending",A=o=>{confirm("Are you sure you want to delete this timesheet entry?")&&f.delete(route("timesheets.destroy",o))},C=o=>{confirm("Are you sure you want to approve this timesheet?")&&f.post(route("timesheets.approve",o),{comments:"Approved from timesheet list"})},j=o=>{const t=prompt("Please provide a reason for rejection:");t!==null&&f.post(route("timesheets.reject",o),{comments:t||"Rejected from timesheet list"})},M=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),B=o=>{const t="inline-flex px-2 py-1 text-xs font-semibold rounded-full";switch(o){case"approved":return`${t} bg-green-100 text-green-800`;case"rejected":return`${t} bg-red-100 text-red-800`;case"pending":return`${t} bg-yellow-100 text-yellow-800`;default:return`${t} bg-gray-100 text-gray-800`}};return(o,t)=>(r(),m(L,null,{default:c(()=>[e("div",V,[e("div",H,[e("div",P,[e("div",R,[e("nav",T,[e("ol",F,[e("li",null,[y(u(p),{href:o.route("dashboard"),class:"text-gray-500 hover:text-gray-700 transition-colors"},{default:c(()=>t[0]||(t[0]=[x(" Dashboard ")])),_:1,__:[0]},8,["href"])]),t[1]||(t[1]=e("li",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"text-gray-900 font-medium"},"Timesheets")],-1))])]),e("div",O,[t[3]||(t[3]=e("div",{class:"mb-4 sm:mb-0"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Timesheets"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage and track time entries for projects and tasks ")],-1)),e("div",Q,[v.value?(r(),m(u(p),{key:0,href:o.route("timesheets.create"),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 transition-colors"},{default:c(()=>[y(u(N),{class:"w-4 h-4 mr-2"}),t[2]||(t[2]=x(" Add Entry "))]),_:1,__:[2]},8,["href"])):a("",!0)])])])])]),e("div",G,[e("div",I,[e("div",U,[e("div",q,[e("table",J,[e("thead",K,[e("tr",null,[t[4]||(t[4]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),i.value?(r(),n("th",W," Employee ")):a("",!0),t[5]||(t[5]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Project ",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Task ",-1)),t[7]||(t[7]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Hours ",-1)),t[8]||(t[8]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[9]||(t[9]=e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sync ",-1)),t[10]||(t[10]=e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",X,[(r(!0),n(S,null,z(l.timesheets.data,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Y,d(M(s.date)),1),i.value?(r(),n("td",Z,[e("div",ee,[e("div",te,[e("div",se,[e("span",oe,d(s.employee.user.name.charAt(0)),1)])]),e("div",re,[e("div",ne,d(s.employee.user.name),1)])])])):a("",!0),e("td",ae,d(s.project.name),1),e("td",le,d(s.task?s.task.name:"N/A"),1),e("td",ie,[e("div",de,[e("span",null,d(s.hours)+"h",1),s.creator&&s.employee&&s.creator.id!==s.employee.user.id?(r(),n("span",{key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",title:`Created by ${s.creator.name}`}," Admin ",8,ce)):a("",!0)])]),e("td",ue,[e("span",{class:E([B(s.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},d(s.status),3)]),e("td",pe,[e("div",xe,[s.description&&s.description.includes("Auto-generated from attendance")?(r(),n("svg",me,t[11]||(t[11]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):s.description&&s.description.includes("Synced with Attendance")?(r(),n("svg",ye,t[12]||(t[12]=[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"},null,-1)]))):(r(),n("span",ge,t[13]||(t[13]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)])))])]),e("td",fe,[e("div",he,[y(u(p),{href:o.route("timesheets.show",s.id),class:"text-blue-600 hover:text-blue-900 transition-colors duration-150"},{default:c(()=>t[14]||(t[14]=[x(" View ")])),_:2,__:[14]},1032,["href"]),k(s)?(r(),m(u(p),{key:0,href:o.route("timesheets.edit",s.id),class:"text-green-600 hover:text-green-900 transition-colors duration-150"},{default:c(()=>t[15]||(t[15]=[x(" Edit ")])),_:2,__:[15]},1032,["href"])):a("",!0),_(s)?(r(),n("button",{key:1,onClick:w=>A(s.id),class:"text-red-600 hover:text-red-900 transition-colors duration-150"}," Delete ",8,ve)):a("",!0),i.value&&s.status==="pending"?(r(),n("button",{key:2,onClick:w=>C(s.id),class:"text-green-600 hover:text-green-900 transition-colors duration-150"}," Approve ",8,we)):a("",!0),i.value&&s.status==="pending"?(r(),n("button",{key:3,onClick:w=>j(s.id),class:"text-red-600 hover:text-red-900 transition-colors duration-150"}," Reject ",8,be)):a("",!0)])])]))),128))])])]),l.timesheets.data.length===0?(r(),n("div",ke,[t[17]||(t[17]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[18]||(t[18]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No timesheets",-1)),t[19]||(t[19]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new time entry.",-1)),e("div",_e,[v.value?(r(),m(u(p),{key:0,href:o.route("timesheets.create"),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:c(()=>t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add Entry ")])),_:1,__:[16]},8,["href"])):a("",!0)])])):a("",!0),l.timesheets.last_page>1?(r(),n("div",Ae,[y(D,{links:l.timesheets.links,"current-page":l.timesheets.current_page,"last-page":l.timesheets.last_page,total:l.timesheets.total,"per-page":l.timesheets.per_page,from:l.timesheets.from,to:l.timesheets.to},null,8,["links","current-page","last-page","total","per-page","from","to"])])):a("",!0)])])])])]),_:1}))}};export{De as default};
