import{e as S,f as p,z as W,B as Y,c as m,i as N,o as u,a as t,t as I,y as ie,F as H,r as V,n as g,u as i,w as se,p as ae,Q as fe,g as Z,s as oe,A as K,l as q,q as me,C as ge,M as ne,k as F,h as ee,N as he,O as pe,d as ye,P as be,S as te,K as ce,R as ke}from"./app-CmqIyj-O.js";import{u as re}from"./useAuth-CnREp10S.js";import{D as le,E as we,t as xe}from"./icons-C49sAyij.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as _e}from"./useAccessibility-CAc3hJSv.js";const Ae={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Te={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Ie={class:"flex items-start"},Se={class:"ml-3 flex-1"},Be={class:"mt-1 text-sm text-red-700"},Ce={key:0,class:"mt-3"},Me={__name:"NavigationErrorDisplay",setup(v){const o=S(!1),e=S(""),a=S(null),r=S(null),d=p(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),h=(B,_=null)=>{e.value=B,a.value=_,o.value=!0,r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{x()},1e4)},y=async()=>{if(a.value)try{await a.value()}catch(B){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",B)}x()},x=()=>{o.value=!1,e.value="",a.value=null,r.value&&(clearTimeout(r.value),r.value=null)};return W(()=>{typeof window<"u"&&(window.showNavigationError=h)}),Y(()=>{typeof window<"u"&&delete window.showNavigationError,r.value&&clearTimeout(r.value)}),(B,_)=>o.value?(u(),m("div",Ae,[t("div",Te,[t("div",Ie,[_[2]||(_[2]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",Se,[_[0]||(_[0]=t("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),t("div",Be,I(e.value),1),a.value?(u(),m("div",Ce,[t("button",{onClick:y,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},I(d.value),1)])):N("",!0)]),t("div",{class:"ml-4 flex-shrink-0"},[t("button",{onClick:x,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},_[1]||(_[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):N("",!0)}},Q=S("light"),j=S("light"),U=S(!1),J={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ue(){const v=p(()=>U.value?j.value:Q.value),o=p(()=>J[v.value]),e=p(()=>v.value==="dark"),a=p(()=>v.value==="light"),r=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(n){return console.warn("Failed to detect system theme:",n),"light"}},d=(n,l=!1)=>{try{const s={theme:$(n)?n:"light",useSystem:!!l,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(s))}catch(b){console.warn("Failed to save theme preference:",b);try{localStorage.removeItem("theme-preference")}catch(s){console.warn("Failed to clear corrupted theme preference:",s)}}},h=()=>{try{const n=localStorage.getItem("theme-preference");if(n){const l=JSON.parse(n);if(typeof l=="object"&&l!==null){const b=$(l.theme)?l.theme:"light",s=typeof l.useSystem=="boolean"?l.useSystem:!1;return{theme:b,useSystem:s,timestamp:l.timestamp||null,version:l.version||1}}}}catch(n){console.warn("Failed to load theme preference:",n);try{localStorage.removeItem("theme-preference")}catch(l){console.warn("Failed to clear corrupted theme preference:",l)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},y=n=>{if(!(typeof document>"u"))try{const l=document.documentElement,b=$(n)?n:"light";l.classList.remove("theme-light","theme-dark"),l.classList.add(`theme-${b}`),x(b);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:b,config:J[b]}}))}catch(s){console.warn("Failed to dispatch theme change event:",s)}}catch(l){console.error("Failed to apply theme:",l);try{const b=document.documentElement;b.classList.remove("theme-light","theme-dark"),b.classList.add("theme-light"),x("light")}catch(b){console.error("Failed to apply fallback theme:",b)}}},x=n=>{if(!(typeof document>"u"))try{const l=document.documentElement;n==="dark"?(l.style.setProperty("--color-neutral-50","#0a0a0a"),l.style.setProperty("--color-neutral-100","#111827"),l.style.setProperty("--color-neutral-200","#262626"),l.style.setProperty("--color-neutral-300","#404040"),l.style.setProperty("--color-neutral-400","#525252"),l.style.setProperty("--color-neutral-500","#6b7280"),l.style.setProperty("--color-neutral-600","#a3a3a3"),l.style.setProperty("--color-neutral-700","#d4d4d4"),l.style.setProperty("--color-neutral-800","#e5e5e5"),l.style.setProperty("--color-neutral-900","#fafafa"),l.style.setProperty("--color-neutral-950","#ffffff")):(l.style.setProperty("--color-neutral-50","#fafafa"),l.style.setProperty("--color-neutral-100","#f5f5f5"),l.style.setProperty("--color-neutral-200","#e5e5e5"),l.style.setProperty("--color-neutral-300","#d4d4d4"),l.style.setProperty("--color-neutral-400","#a3a3a3"),l.style.setProperty("--color-neutral-500","#6b7280"),l.style.setProperty("--color-neutral-600","#525252"),l.style.setProperty("--color-neutral-700","#404040"),l.style.setProperty("--color-neutral-800","#262626"),l.style.setProperty("--color-neutral-900","#111827"),l.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(l){console.warn("Failed to update theme properties:",l)}},B=n=>{y(n)},_=n=>{if(!J[n]){console.warn(`Theme "${n}" not found`);return}Q.value=n,U.value=!1,d(n,!1),y(n)},f=()=>{U.value=!0;const n=r();j.value=n,d(n,!0),y(n)},C=()=>{const n=v.value==="light"?"dark":"light";_(n)},A=()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),l=b=>{const s=b.matches?"dark":"light";j.value=s,U.value&&(B(s),d(s,!0))};return n.addEventListener("change",l),()=>{n.removeEventListener("change",l)}},$=n=>J.hasOwnProperty(n),R=()=>Object.values(J),O=()=>{},G=()=>{const n=[];if($(Q.value)||n.push(`Invalid current theme: ${Q.value}`),$(j.value)||n.push(`Invalid system theme: ${j.value}`),$(v.value)||n.push(`Invalid active theme: ${v.value}`),typeof document<"u"){const l=document.documentElement,b=l.classList.contains("theme-light"),s=l.classList.contains("theme-dark");!b&&!s&&n.push("No theme class found on document root"),b&&s&&n.push("Multiple theme classes found on document root");const w=`theme-${v.value}`;l.classList.contains(w)||n.push(`Expected theme class ${w} not found on document root`)}return{isValid:n.length===0,issues:n}},P=()=>{if(!(typeof document>"u"))try{const n=document.documentElement;return["theme-light","theme-dark"].forEach(b=>{n.classList.remove(b)}),!0}catch(n){return console.warn("Failed to cleanup theme classes:",n),!1}},k=()=>{try{Q.value="light",j.value=r(),U.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference from localStorage:",n)}return y("light"),!0}catch(n){return console.error("Failed to reset theme to default:",n),!1}},c=()=>{console.warn("Attempting theme system recovery...");try{if(P(),k())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(n){console.error("Theme system recovery failed:",n);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(l){return console.error("Last resort theme recovery failed:",l),!1}}},L=()=>{try{const n=h();return j.value=r(),n.useSystem?(U.value=!0,Q.value=j.value):(U.value=!1,Q.value=n.theme),y(v.value),A()}catch(n){console.error("Theme initialization failed:",n);try{Q.value="light",j.value="light",U.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(l){console.error("Emergency theme fallback failed:",l)}return null}};return W(()=>{L()}),ie(v,n=>{B(n)}),{currentTheme:p(()=>Q.value),systemTheme:p(()=>j.value),activeTheme:v,themeConfig:o,isDark:e,isLight:a,isSystemThemePreferred:p(()=>U.value),setTheme:_,toggleTheme:C,useSystemTheme:f,validateTheme:$,getAvailableThemes:R,debugThemeState:O,initializeTheme:L,validateThemeState:G,cleanupThemeClasses:P,resetThemeToDefault:k,recoverThemeSystem:c,cleanupAndApplyTheme:y,themes:p(()=>J)}}const $e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ee={class:"flex justify-between items-center h-20"},Ne={class:"flex items-center space-x-6"},Le={class:"hidden lg:flex space-x-1"},De=["href"],Fe={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={class:"hidden xl:inline"},Re={class:"relative"},Ge={class:"p-2"},Qe={key:0,class:"space-y-1"},Ue={class:"space-y-1"},He=["href"],Ve={class:"space-y-1 mt-1"},We=["href"],Ze={class:"space-y-1 mt-1"},Je=["href"],qe={class:"flex items-center space-x-3"},Ye={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xe={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ke={class:"relative"},et={class:"hidden lg:block text-left"},tt={class:"font-medium text-sm"},ot={class:"p-2"},rt={class:"py-1 space-y-1"},st=["href"],at={class:"md:hidden px-4 pb-3"},nt={class:"mt-3 space-y-2"},lt=["href"],it={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(v){var P;const o=v,{user:e,roles:a}=re(),{isDark:r,toggleTheme:d}=ue(),h=S(!1),y=S(!1),x=S(!1);console.log("IntegratedTopNav - User:",e.value),console.log("IntegratedTopNav - Roles:",a.value),console.log("IntegratedTopNav - Is Admin:",(P=a.value)==null?void 0:P.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const B=p(()=>{var k;return(k=e.value)!=null&&k.name?e.value.name.split(" ").map(c=>c[0]).join("").toUpperCase():"U"}),_=p(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),f=p(()=>{try{const k=a.value||[],c=Array.isArray(k)?k:[],L=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],n=c.includes("Admin")||c.includes("Manager")||c.includes("HR"),l=c.includes("Admin");return n&&L.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"competency-assessments.index",label:"All Assessments",category:"management"}),l&&L.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),L}catch(k){return console.error("Error computing moreNavItems:",k),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),C=p(()=>f.value.filter(k=>k.category==="regular")),A=p(()=>f.value.filter(k=>k.category==="management")),$=p(()=>f.value.filter(k=>k.category==="admin")),R=p(()=>[..._.value,...f.value]),O=k=>{var c;return o.currentRoute===k||((c=o.currentRoute)==null?void 0:c.startsWith(k.split(".")[0]))},G=()=>{fe.post(route("logout"))};return(k,c)=>{var L,n,l,b;return u(),m("nav",{class:g(["w-full transition-all duration-200 sticky top-0 z-50",i(r)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-white via-white to-blue-50/30 border-b border-gray-200/60 shadow-lg shadow-gray-900/10 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[t("div",$e,[t("div",Ee,[t("div",Ne,[c[15]||(c[15]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"flex items-center"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain"})])],-1)),t("div",Le,[(u(!0),m(H,null,V(_.value,s=>(u(),m("a",{key:s.route,href:k.route(s.route),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",O(s.route)?i(r)?"bg-blue-600/20 text-blue-300":"bg-blue-50 text-blue-700":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[s.route==="dashboard"?(u(),m("svg",Fe,c[4]||(c[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):s.route==="attendances.index"?(u(),m("svg",Pe,c[5]||(c[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):s.route==="leaves.index"?(u(),m("svg",ze,c[6]||(c[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(u(),m("svg",Oe,c[7]||(c[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),t("span",je,I(s.label),1)],10,De))),128)),t("div",Re,[t("button",{onClick:c[0]||(c[0]=s=>h.value=!h.value),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",h.value?i(r)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[c[9]||(c[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),c[10]||(c[10]=t("span",{class:"hidden xl:inline"},"More",-1)),(u(),m("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":h.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[8]||(c[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(t("div",{class:g(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",i(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",Ge,[f.value.length>0?(u(),m("div",Qe,[t("div",Ue,[(u(!0),m(H,null,V(C.value,s=>(u(),m("a",{key:s.route,href:k.route(s.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",O(s.route)?i(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[11]||(c[11]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,I(s.label),1)],10,He))),128))]),A.value.length>0?(u(),m("div",{key:0,class:g(["border-t pt-2 mt-2",i(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",i(r)?"text-gray-400":"text-gray-500"])}," Management ",2),t("div",Ve,[(u(!0),m(H,null,V(A.value,s=>(u(),m("a",{key:s.route,href:k.route(s.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",O(s.route)?i(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[12]||(c[12]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("span",null,I(s.label),1)],10,We))),128))])],2)):N("",!0),$.value.length>0?(u(),m("div",{key:1,class:g(["border-t pt-2 mt-2",i(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",i(r)?"text-red-400":"text-red-600"])},c[13]||(c[13]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",null,"Admin",-1)]),2),t("div",Ze,[(u(!0),m(H,null,V($.value,s=>(u(),m("a",{key:s.route,href:k.route(s.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",O(s.route)?i(r)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[c[14]||(c[14]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,I(s.label),1)],10,Je))),128))])],2)):N("",!0)])):N("",!0)])],2),[[ae,h.value]])])])]),t("div",qe,[t("button",{onClick:c[1]||(c[1]=(...s)=>i(d)&&i(d)(...s)),class:g(["p-2.5 rounded-lg transition-all duration-200 flex items-center justify-center",i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50 border border-transparent hover:border-gray-600":"text-gray-500 hover:text-gray-700 hover:bg-white/60 border border-transparent hover:border-gray-200 hover:shadow-sm"])},[i(r)?(u(),m("svg",Ye,c[16]||(c[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(u(),m("svg",Xe,c[17]||(c[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])))],2),t("div",Ke,[t("button",{onClick:c[2]||(c[2]=s=>y.value=!y.value),class:g(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",y.value?i(r)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[t("div",{class:g(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",i(r)?"bg-blue-600 text-white":"bg-blue-500 text-white"])},I(B.value),3),t("div",et,[t("div",tt,I((L=i(e))==null?void 0:L.name),1),t("div",{class:g(["text-xs",i(r)?"text-gray-400":"text-gray-500"])},I(((n=i(a))==null?void 0:n.join(", "))||"User"),3)]),(u(),m("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":y.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[18]||(c[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(t("div",{class:g(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",i(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",ot,[t("div",{class:g(["px-3 py-2 border-b",i(r)?"border-gray-700":"border-gray-200"])},[t("div",{class:g(["font-medium",i(r)?"text-white":"text-gray-900"])},I((l=i(e))==null?void 0:l.name),3),t("div",{class:g(["text-sm",i(r)?"text-gray-400":"text-gray-500"])},I((b=i(e))==null?void 0:b.email),3)],2),t("div",rt,[t("a",{href:k.route("profile.edit"),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},c[19]||(c[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",null,"Profile Settings",-1)]),10,st),t("button",{onClick:G,class:g(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},c[20]||(c[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",null,"Sign Out",-1)]))])])],2),[[ae,y.value]])])])])]),t("div",at,[t("button",{onClick:c[3]||(c[3]=s=>x.value=!x.value),class:g(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",i(r)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[c[22]||(c[22]=t("span",null,"Menu",-1)),(u(),m("svg",{class:g(["w-5 h-5 transition-transform duration-200",{"rotate-180":x.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[21]||(c[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(t("div",nt,[(u(!0),m(H,null,V(R.value,s=>(u(),m("a",{key:s.route,href:k.route(s.route),class:g(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",O(s.route)?i(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":i(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},I(s.label),11,lt))),128))],512),[[ae,x.value]])])],2)}}};function ct(v,o){return u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function ut(v,o){return u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const dt=["aria-live"],mt={class:"toast-content"},ht={key:0,class:"toast-icon"},vt={class:"toast-message"},ft={key:0,class:"toast-title"},gt={class:"toast-text"},pt={key:1,class:"toast-actions"},yt=["aria-label"],bt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:v=>["success","error","warning","info","loading"].includes(v)},position:{type:String,default:"top-right",validator:v=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(v)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:v=>["low","normal","high"].includes(v)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:v=>["sm","md","lg"].includes(v)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(v,{expose:o,emit:e}){const a=v,r=e,d=S(!1),h=S(null),y=S(null),x=S(100),B=S(!1),_=S(0),f=S(0),C=p(()=>le("x-mark")),A=p(()=>{if(a.icon)return le(a.icon);const T={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return le(T[a.type]||T.info)}),$=p(()=>["toast-notification",`toast-notification--${a.type}`,`toast-notification--${a.size}`,`toast-notification--${a.position}`,{"toast-notification--with-title":a.title,"toast-notification--persistent":a.persistent,"toast-notification--with-action":a.actionText}]),R=p(()=>({zIndex:a.zIndex})),O=p(()=>["w-5 h-5",{"animate-spin":a.type==="loading"}]),G=p(()=>a.closable||a.actionText),P=p(()=>[`toast-progress--${a.type}`]),k=p(()=>({width:`${x.value}%`})),c=()=>{d.value=!0,a.sound&&M(),!a.persistent&&a.duration>0&&l()},L=()=>{d.value=!1,E(),r("close")},n=()=>{r("action"),a.persistent||L()},l=()=>{a.duration<=0||(_.value=Date.now(),f.value=a.duration,h.value=setTimeout(()=>{L()},a.duration),b())},b=()=>{if(!a.showProgress)return;const T=Date.now(),z=()=>{if(!d.value||B.value)return;const ve=Date.now()-T,de=Math.max(0,100-ve/a.duration*100);x.value=de,de>0&&(y.value=requestAnimationFrame(z))};z()},s=()=>{if(!h.value||a.persistent)return;B.value=!0,clearTimeout(h.value),cancelAnimationFrame(y.value);const T=Date.now()-_.value;f.value=Math.max(0,a.duration-T)},w=()=>{!B.value||a.persistent||(B.value=!1,f.value>0&&(_.value=Date.now(),h.value=setTimeout(()=>{L()},f.value),b()))},E=()=>{h.value&&(clearTimeout(h.value),h.value=null),y.value&&(cancelAnimationFrame(y.value),y.value=null)},M=()=>{try{const T=new Audio,z={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};T.src=z[a.type]||z.info,T.volume=.3,T.play().catch(()=>{})}catch{}};return W(()=>{c()}),Y(()=>{E()}),ie(()=>a.duration,()=>{d.value&&!a.persistent&&(E(),l())}),o({show:c,close:L,pauseTimer:s,resumeTimer:w}),(T,z)=>(u(),Z(ge,{to:"body"},[d.value?(u(),m("div",{key:0,class:g($.value),style:me(R.value),role:"alert","aria-live":v.priority==="high"?"assertive":"polite",onMouseenter:s,onMouseleave:w},[t("div",mt,[v.showIcon?(u(),m("div",ht,[(u(),Z(oe(A.value),{class:g(O.value)},null,8,["class"]))])):N("",!0),t("div",vt,[v.title?(u(),m("div",ft,I(v.title),1)):N("",!0),t("div",gt,[K(T.$slots,"default",{},()=>[q(I(v.message),1)],!0)])]),G.value?(u(),m("div",pt,[v.actionText?(u(),m("button",{key:0,onClick:n,class:"toast-action-button"},I(v.actionText),1)):N("",!0),v.closable?(u(),m("button",{key:1,onClick:L,class:"toast-close-button","aria-label":v.closeLabel},[(u(),Z(oe(C.value),{class:"w-4 h-4"}))],8,yt)):N("",!0)])):N("",!0)]),v.showProgress&&v.duration>0?(u(),m("div",{key:0,class:g(["toast-progress",P.value]),style:me(k.value)},null,6)):N("",!0)],46,dt)):N("",!0)]))}},kt=X(bt,[["__scopeId","data-v-11baa49e"]]);class wt{constructor(){this.notifications=ne([]),this.maxNotifications=S(5),this.defaultDuration=S(5e3),this.positions=ne({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=ne({enabled:!0,volume:.3})}add(o){const e=this.generateId(),a=o.position||"top-right",r={id:e,message:o.message||"",title:o.title||"",type:o.type||"info",position:a,duration:o.duration!==void 0?o.duration:this.defaultDuration.value,persistent:o.persistent||!1,closable:o.closable!==!1,showIcon:o.showIcon!==!1,showProgress:o.showProgress!==!1,actionText:o.actionText||"",icon:o.icon||"",size:o.size||"md",sound:o.sound!==!1&&this.sounds.enabled,priority:o.priority||"normal",zIndex:o.zIndex||1e3,createdAt:Date.now(),onAction:o.onAction||null,onClose:o.onClose||null,component:o.component||null,props:o.props||{}};return this.notifications.push(r),this.positions[a].push(r),this.manageQueueSize(a),!r.persistent&&r.duration>0&&setTimeout(()=>{this.remove(e)},r.duration),e}remove(o){const e=this.notifications.find(h=>h.id===o);if(!e)return;const a=this.notifications.findIndex(h=>h.id===o);a>-1&&this.notifications.splice(a,1);const r=this.positions[e.position],d=r.findIndex(h=>h.id===o);d>-1&&r.splice(d,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(o=>{this.positions[o].splice(0)})}clearPosition(o){[...this.positions[o]].forEach(a=>{this.remove(a.id)})}clearType(o){this.notifications.filter(a=>a.type===o).forEach(a=>{this.remove(a.id)})}update(o,e){const a=this.notifications.find(r=>r.id===o);a&&Object.assign(a,e)}getByPosition(o){return this.positions[o]||[]}getByType(o){return this.notifications.filter(e=>e.type===o)}getById(o){return this.notifications.find(e=>e.id===o)}exists(o){return this.notifications.some(e=>e.id===o)}count(){return this.notifications.length}countByPosition(o){var e;return((e=this.positions[o])==null?void 0:e.length)||0}setMaxNotifications(o){this.maxNotifications.value=o,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(o){this.defaultDuration.value=o}setSoundsEnabled(o){this.sounds.enabled=o}setSoundVolume(o){this.sounds.volume=Math.max(0,Math.min(1,o))}pauseAll(){this.notifications.forEach(o=>{o.pauseTimer&&o.pauseTimer()})}resumeAll(){this.notifications.forEach(o=>{o.resumeTimer&&o.resumeTimer()})}success(o,e={}){return this.add({message:o,type:"success",...e})}error(o,e={}){return this.add({message:o,type:"error",persistent:e.persistent!==!1,...e})}warning(o,e={}){return this.add({message:o,type:"warning",...e})}info(o,e={}){return this.add({message:o,type:"info",...e})}loading(o,e={}){return this.add({message:o,type:"loading",persistent:!0,closable:!1,...e})}confirm(o={}){return new Promise(e=>{const a=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:o.title||"Confirm Action",description:o.message||"Are you sure you want to proceed?",confirmText:o.confirmText||"Confirm",cancelText:o.cancelText||"Cancel",...o},onAction:r=>{this.remove(a),e(r==="confirm")},onClose:()=>{e(!1)}})})}alert(o,e={}){return new Promise(a=>{const r=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:o,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(r),a(!0)},onClose:()=>{a(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(o){const e=this.positions[o];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(r=>{const d=this.notifications.findIndex(h=>h.id===r.id);d>-1&&this.notifications.splice(d,1)})}}const D=new wt,xt={class:"notification-container"},_t={__name:"NotificationContainer",setup(v,{expose:o}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];p(()=>D.notifications.filter(f=>!f.component));const a=p(()=>D.notifications.filter(f=>f.component)),r=f=>{const C="fixed z-50 pointer-events-none",A={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${C} ${A[f]||A["top-right"]}`},d=f=>D.getByPosition(f),h=f=>f.includes("left")?"slide-left":f.includes("right")?"slide-right":f.includes("center")?"slide-center":"slide-right",y=f=>{D.remove(f)},x=(f,C="action")=>{const A=D.getById(f);A!=null&&A.onAction&&A.onAction(C)},B=()=>{window.notify={success:(f,C)=>D.success(f,C),error:(f,C)=>D.error(f,C),warning:(f,C)=>D.warning(f,C),info:(f,C)=>D.info(f,C),loading:(f,C)=>D.loading(f,C),confirm:f=>D.confirm(f),alert:(f,C)=>D.alert(f,C),clear:()=>D.clear(),remove:f=>D.remove(f)}},_=()=>{window.notify&&delete window.notify};return W(()=>{B()}),Y(()=>{_()}),o({notificationQueue:D,notify:window.notify}),(f,C)=>(u(),m("div",xt,[(u(),m(H,null,V(e,A=>t("div",{key:A,class:g(r(A))},[F(pe,{name:h(A),tag:"div",class:"space-y-2"},{default:ee(()=>[(u(!0),m(H,null,V(d(A),$=>(u(),Z(kt,he({key:$.id},{ref_for:!0},$,{onClose:R=>y($.id),onAction:R=>x($.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(u(!0),m(H,null,V(a.value,A=>(u(),Z(oe(A.component||"NotificationModal"),he({key:A.id,ref_for:!0},A.props,{onClose:$=>y(A.id),onConfirm:$=>x(A.id,"confirm"),onCancel:$=>x(A.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},At=X(_t,[["__scopeId","data-v-67e6c621"]]),Tt={class:"floating-attendance-widget"},It={class:"status-indicator"},St={class:"time-info"},Bt={class:"time-display"},Ct={class:"time-label-mini"},Mt={class:"widget-header"},$t={class:"status-info"},Et={class:"status-text"},Nt={class:"timer-section"},Lt={class:"timer-value"},Dt={class:"timer-label"},Ft={class:"quick-actions"},Pt=["disabled"],zt=["disabled"],Ot={class:"quick-stats"},jt={class:"stat"},Rt={class:"stat-value"},Gt={class:"stat"},Qt={class:"stat-value"},Ut={__name:"FloatingAttendanceWidget",setup(v){const o=S(!1),e=S({clockedIn:!1,onBreak:!1,clockInTime:null}),a=S(!1),r=S("0h 0m 0s"),d=S(null),h=()=>{try{const s={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:d.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(s))}catch(s){console.warn("Failed to save attendance state to localStorage:",s)}},y=()=>{try{const s=localStorage.getItem("floating-attendance-state");if(s){const w=JSON.parse(s),E=new Date(w.lastUpdate);if((new Date-E)/(1e3*60)<5)return e.value.clockedIn=w.clockedIn||!1,e.value.onBreak=w.onBreak||!1,e.value.clockInTime=w.clockInTime||null,d.value=w.breakStartTime||null,!0}}catch(s){console.warn("Failed to load attendance state from localStorage:",s)}return!1};let x=null;const B=p(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),_=p(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),f=p(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),C=p(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),A=p(()=>a.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),$=p(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),R=p(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const s=new Date(e.value.clockInTime),E=new Date-s,M=Math.floor(E/(1e3*60)),T=Math.floor(M/60),z=M%60;return`${T}h ${z}m`}),O=p(()=>{if(e.value.onBreak&&d.value){const s=new Date(d.value);if(isNaN(s.getTime()))return"0h 0m 1s";{const E=Math.max(0,new Date-s),M=Math.floor(E/(1e3*60*60)),T=Math.floor(E%(1e3*60*60)/(1e3*60)),z=Math.floor(E%(1e3*60)/1e3);return`${M}h ${T}m ${z}s`}}return"0h 0m"});p(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const G=()=>{o.value=!o.value},P=()=>{if(e.value.clockedIn&&e.value.clockInTime){const s=new Date;let w;e.value.onBreak&&d.value?w=new Date(d.value):w=new Date(e.value.clockInTime);const E=s-w,M=Math.floor(E/(1e3*60*60)),T=Math.floor(E%(1e3*60*60)/(1e3*60)),z=Math.floor(E%(1e3*60)/1e3);r.value=`${M}h ${T}m ${z}s`}else r.value="0h 0m 0s"},k=async()=>{try{if(a.value=!0,e.value.clockedIn){const s=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,d.value=null,r.value="0h 0m 0s",h(),b()}else{const s=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=s.data.clock_in_time||new Date().toISOString(),h(),b()}}catch(s){console.error("Clock in/out failed:",s),alert("Action failed: "+s.message)}finally{a.value=!1}},c=async()=>{try{if(a.value=!0,e.value.onBreak){const s=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,d.value=null,h(),b()}else{d.value=new Date().toISOString(),e.value.onBreak=!0;const s=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});s.data.break_start_time&&(d.value=s.data.break_start_time),h(),b()}}catch(s){console.error("Break action failed:",s),alert("Action failed: "+s.message)}finally{a.value=!1}},L=async()=>{var s,w;try{const M=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=M.clocked_in||!1,e.value.onBreak=M.on_break||!1,e.value.clockInTime=M.clock_in_time||null,M.on_break)if(M.break_start_time)d.value=M.break_start_time;else if((s=M.current_session)!=null&&s.current_break_start)d.value=M.current_session.current_break_start;else if((w=M.current_session)!=null&&w.break_sessions&&M.current_session.break_sessions.length>0){const T=M.current_session.break_sessions[M.current_session.break_sessions.length-1];T&&!T.end&&(d.value=T.start)}else d.value||(d.value=new Date().toISOString());else d.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:d.value})}catch(E){console.error("Failed to fetch attendance status:",E)}},n=s=>{s.key==="attendance-update"&&L()},l=s=>{console.log("FloatingWidget: Received attendance state change:",s.detail);const{clockedIn:w,onBreak:E,clockInTime:M,breakStartTime:T}=s.detail;e.value.clockedIn=w,e.value.onBreak=E,e.value.clockInTime=M,E&&T?d.value=T:E||(d.value=null),h(),P(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:d.value,eventBreakStartTime:T})},b=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(s){console.warn("Failed to broadcast attendance update:",s)}};return W(async()=>{y()&&P(),await L(),h(),P(),x=setInterval(P,1e3),window.addEventListener("storage",n),window.addEventListener("attendance-state-changed",l),console.log("FloatingWidget: Event listeners registered")}),Y(()=>{x&&clearInterval(x),window.removeEventListener("storage",n),window.removeEventListener("attendance-state-changed",l),console.log("FloatingWidget: Event listeners removed")}),(s,w)=>(u(),m("div",Tt,[o.value?N("",!0):(u(),m("div",{key:0,onClick:G,class:g(["floating-button",C.value])},[t("div",It,[t("div",{class:g(f.value)},null,2)]),t("div",St,[t("div",Bt,I(r.value),1),t("div",Ct,I(_.value),1)]),F(i(we),{class:"w-4 h-4 expand-icon"})],2)),o.value?(u(),m("div",{key:1,class:"expanded-widget",onClick:w[0]||(w[0]=ye(()=>{},["stop"]))},[t("div",Mt,[t("div",$t,[t("div",{class:g(f.value)},null,2),t("span",Et,I(B.value),1)]),t("button",{onClick:G,class:"minimize-btn",title:"Minimize"},[F(i(xe),{class:"w-4 h-4"})])]),t("div",Nt,[t("div",Lt,I(r.value),1),t("div",Dt,I(_.value),1)]),t("div",Ft,[t("button",{onClick:k,disabled:a.value,class:g($.value)},I(A.value),11,Pt),e.value.clockedIn?(u(),m("button",{key:0,onClick:c,disabled:a.value,class:"break-action"},[(u(),Z(oe(e.value.onBreak?i(ut):i(ct)),{class:"w-3 h-3"})),q(" "+I(e.value.onBreak?"End":"Break"),1)],8,zt)):N("",!0)]),t("div",Ot,[t("div",jt,[t("span",Rt,I(R.value),1),w[1]||(w[1]=t("span",{class:"stat-label"},"Today",-1))]),t("div",Gt,[t("span",Qt,I(O.value),1),w[2]||(w[2]=t("span",{class:"stat-label"},"Break",-1))])])])):N("",!0),o.value?(u(),m("div",{key:2,class:"backdrop",onClick:G})):N("",!0)]))}},Ht=X(Ut,[["__scopeId","data-v-421365b8"]]),Vt={class:"skip-links","aria-label":"Skip navigation links"},Wt=["href","onClick"],Zt={__name:"SkipLinks",setup(v){const{skipLinks:o,handleSkipLinkClick:e}=_e();return(a,r)=>(u(),m("div",Vt,[(u(!0),m(H,null,V(i(o),d=>(u(),m("a",{key:d.href,href:d.href,class:"skip-link sr-only-focusable",onClick:h=>i(e)(h,d.href)},I(d.label),9,Wt))),128))]))}},Jt=X(Zt,[["__scopeId","data-v-f9a7b518"]]),qt={class:"live-regions"},Yt={__name:"LiveRegion",setup(v){const o=S(null),e=S(null),a=S(null);return W(()=>{be.init()}),(r,d)=>(u(),m("div",qt,[t("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:o},null,512),t("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),t("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:a},null,512)]))}},Xt=X(Yt,[["__scopeId","data-v-94955163"]]),Kt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},eo={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},to={class:"flex items-center space-x-6"},oo={__name:"AppFooter",setup(v){const{isDark:o}=ue(),e=p(()=>new Date().getFullYear());return(a,r)=>(u(),m("footer",{class:g(["mt-auto border-t transition-all duration-200",i(o)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[t("div",Kt,[t("div",eo,[r[4]||(r[4]=t("div",{class:"flex items-center"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),t("div",to,[F(i(te),{href:a.route("dashboard"),class:g(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[0]||(r[0]=[q(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),F(i(te),{href:a.route("support.index"),class:g(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[1]||(r[1]=[q(" Support ")])),_:1,__:[1]},8,["href","class"]),F(i(te),{href:a.route("legal.privacy"),class:g(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[2]||(r[2]=[q(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),F(i(te),{href:a.route("legal.disclaimer"),class:g(["text-sm hover:underline transition-colors",i(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[3]||(r[3]=[q(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),t("div",{class:g(["text-sm",i(o)?"text-gray-400":"text-gray-500"])}," © "+I(e.value)+" Xonobics. All rights reserved. ",3)])])],2))}};function ro(){const{props:v}=ce(),{user:o}=re();let e;const a=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(d=>{var y;const h=((y=o.value)==null?void 0:y.name)||"Employee";d.showNotification(`Hi ${h}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},r=()=>{const d=new Date,h=new Date(v.auth.user.clock_in_time);(isNaN(h.getTime())||d.getTime()-h.getTime()>5*60*1e3)&&a()};W(()=>{r(),e=setInterval(r,5*60*1e3)}),Y(()=>{clearInterval(e)})}function so(){const{isAuthenticated:v,user:o}=re(),e=ce();let a=null;const r=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(h=>{var x;const y=((x=o.value)==null?void 0:x.name)||"Employee";h.showNotification(`Hi ${y}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},d=()=>{if(!v.value)return;const h=e.props.auth.user.todays_attendance;if(h&&h.clock_in_time&&!h.clock_out_time){const y=new Date(h.clock_in_time);(new Date-y)/1e3/60/60>=7.5&&r()}};W(()=>{a=setInterval(d,5*60*1e3),d()}),Y(()=>{a&&clearInterval(a)})}function ao(){const v=ce();return ie(()=>v.props.flash,o=>{!o||!window.notify||(o.success&&window.notify.success(o.success),o.error&&window.notify.error(o.error),o.warning&&window.notify.warning(o.warning),o.info&&window.notify.info(o.info))},{immediate:!0,deep:!0}),{flash:v.props.flash}}const no={class:"relative"},lo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},io={key:0,class:"flex items-center space-x-3"},co={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},uo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},mo={__name:"AuthenticatedLayout",setup(v){const o=ke(),{hasRole:e,getAuthError:a}=re(),{isDark:r,initializeTheme:d}=ue();ro(),so(),ao(),W(()=>{d()});const h=p(()=>a()),y=p(()=>!!h.value),x=p(()=>{try{return route().current()||""}catch(B){return console.warn("[LAYOUT] Route helper not available:",B),window.location.pathname.replace("/","")||"dashboard"}});return p(()=>!!o.header),(B,_)=>(u(),m("div",{class:g(["min-h-screen transition-all duration-300 flex flex-col",i(r)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-blue-50/30"])},[F(Jt),F(Xt),F(Me),F(At),i(e)("Admin")?N("",!0):(u(),Z(Ht,{key:0})),y.value?(u(),m("div",{key:1,class:g(["p-4 border z-50 relative rounded-lg mx-4 mt-4",i(r)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[_[0]||(_[0]=t("p",{class:"font-semibold"},"Authentication Error:",-1)),t("p",null,I(h.value),1),_[1]||(_[1]=t("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):N("",!0),F(it,{"current-route":x.value},null,8,["current-route"]),t("div",no,[i(o).header?(u(),m("header",{key:0,class:g(["border-b transition-all duration-200 backdrop-blur-sm",i(r)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[t("div",lo,[t("div",{class:g(["flex items-center justify-between",i(r)?"text-white":"text-gray-900"])},[t("div",null,[t("h1",{class:g(["text-2xl font-bold transition-colors duration-200",i(r)?"text-white":"text-gray-900"])},[K(B.$slots,"header",{},void 0,!0)],2),i(o).subtitle?(u(),m("div",{key:0,class:g(["mt-1 text-sm",i(r)?"text-gray-300":"text-gray-600"])},[K(B.$slots,"subtitle",{},void 0,!0)],2)):N("",!0)]),i(o).headerActions?(u(),m("div",io,[K(B.$slots,"headerActions",{},void 0,!0)])):N("",!0)],2)])],2)):N("",!0),t("main",co,[t("div",uo,[t("div",{class:g(["relative transition-all duration-200",i(o).contentBackground!==!1&&(i(r)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[t("div",{class:g([i(o).contentBackground!==!1?"p-6 sm:p-8":""])},[K(B.$slots,"default",{},void 0,!0)],2)],2)])])]),F(oo)],2))}},yo=X(mo,[["__scopeId","data-v-1f1b0b6b"]]);export{yo as A,ct as a,ue as b,D as n,ut as r,ao as u};
