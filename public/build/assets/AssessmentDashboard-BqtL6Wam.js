import{e as N,f as es,z as ts,g as w,o as i,h as $,a as s,c as n,i as as,k as r,l as p,u,F as g,r as y,t as d,S as is,d as ns,n as q,q as os,s as D,Q as v,K as T}from"./app-B1o__mF5.js";import{_ as rs}from"./AuthenticatedLayout-CBd7j7Vk.js";import{S as b}from"./StatsCard-dssPFgeB.js";import{_ as cs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as ls}from"./ArrowPathIcon-BWC3ZIoH.js";import{a as ds,q as k,m as f,n as S,h as P,i as R,p as us}from"./Icon-SP8TbVNl.js";import{r as vs}from"./DocumentPlusIcon-BpeUWv_9.js";import{r as ms}from"./ChartBarIcon-WG2U8QWo.js";import{r as gs}from"./CogIcon-yOnDjRKo.js";import"./useAuth-CmAUiV72.js";import"./ApplicationLogo-fdeTBbSm.js";import"./useAccessibility-E63r6ldn.js";import"./ArrowTrendingUpIcon-UYd__rm-.js";import"./ArrowTrendingDownIcon-CHocjtSd.js";import"./ArrowTopRightOnSquareIcon-fPKOaMMM.js";const ys={class:"dashboard-header"},hs={class:"header-container"},ps={class:"header-content"},fs={class:"header-actions"},_s=["disabled"],bs={class:"dashboard-container"},ks={class:"primary-stats-section"},ws={class:"stats-grid-primary"},xs={class:"secondary-content-section"},Cs={class:"content-grid-secondary"},As={class:"pending-assessments-card priority-high"},Ns={class:"widget-content"},$s={key:0,class:"loading-state"},qs={class:"animate-pulse space-y-3"},Ds={key:1,class:"empty-state"},Ts={key:2,class:"assessment-list"},Ss=["onClick"],Ps={class:"assessment-avatar"},Rs={class:"avatar-circle"},Ms={class:"assessment-details"},zs={class:"assessment-title"},Is={class:"assessment-meta"},Us={class:"assessment-type"},Vs={class:"assessment-due"},Bs={class:"assessment-actions"},Es=["onClick"],Ls={key:1,class:"text-xs text-gray-500 italic"},js={class:"assessment-cycles-card priority-medium"},Fs={class:"widget-content"},Qs={key:0,class:"loading-state"},Os={class:"animate-pulse space-y-3"},Js={key:1,class:"empty-state"},Ks={key:2,class:"cycle-list"},Ys=["onClick"],Gs={class:"cycle-details"},Hs={class:"cycle-title"},Ws={class:"cycle-meta"},Xs={class:"cycle-period"},Zs={class:"cycle-status"},se={class:"cycle-progress"},ee={class:"progress-bar"},te={class:"progress-text"},ae={class:"tertiary-content-section"},ie={class:"content-grid-tertiary"},ne={class:"quick-actions-card"},oe={class:"widget-content"},re={class:"quick-actions-grid"},ce={class:"quick-action-icon bg-blue-100 text-blue-600"},le={class:"quick-action-icon bg-green-100 text-green-600"},de={class:"quick-action-icon bg-purple-100 text-purple-600"},ue={class:"quick-action-icon bg-orange-100 text-orange-600"},ve={class:"recent-activity-card"},me={class:"widget-content"},ge={key:0,class:"loading-state"},ye={class:"animate-pulse space-y-3"},he={key:1,class:"empty-state"},pe={key:2,class:"activity-list"},fe={class:"activity-icon"},_e={class:"activity-details"},be={class:"activity-text"},ke={class:"activity-time"},we={key:0,class:"notification-overlay"},xe={class:"notification-center"},Ce={class:"notification-icon"},Ae={class:"notification-text"},Ne={class:"notification-message"},$e=["onClick"],qe={__name:"AssessmentDashboard",props:{stats:{type:Object,default:()=>({totalAssessments:0,pendingAssessments:0,activeCycles:0,completionRate:0,assessmentTrend:0})},pendingAssessments:{type:Array,default:()=>[]},assessmentCycles:{type:Array,default:()=>[]},recentActivity:{type:Array,default:()=>[]}},setup(l){const x=l,m=N(!1),h=N([]);es(()=>({...x.stats,completionRate:Math.round(x.stats.completionRate||0)}));const M=async()=>{m.value=!0;try{v.reload({only:["stats","pendingAssessments","assessmentCycles","recentActivity"],preserveScroll:!0}),c("Dashboard refreshed successfully","success")}finally{setTimeout(()=>{m.value=!1},1e3)}},z=()=>{try{v.visit(route("competency-assessments.index"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},C=()=>{try{v.visit(route("competency-assessments.pending"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},_=()=>{try{v.visit(route("assessment-cycle-manager"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},I=()=>{try{v.visit(route("competency-assessments.create"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},U=()=>{try{v.visit(route("competency-assessments.create"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},V=()=>{try{v.visit(route("competency-analytics.index"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},B=()=>{try{v.visit(route("competencies.index"))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},E=a=>{try{v.visit(route("competency-assessments.show",a.id))}catch(e){console.error("Navigation error:",e),c("Navigation failed. Please try again.","error")}},L=a=>{try{v.visit(route("assessment-cycles.show",a.id))}catch(e){console.error("Navigation error:",e),c("Navigation failed. Please try again.","error")}},j=a=>{var e;try{const o=(e=T().props.auth)==null?void 0:e.user;if(a.assessment_type==="self"){if(o.id!==a.employee.user_id){c("Self-assessments can only be completed by the employee themselves.","error");return}}else if(o.id!==a.assessor_id){c("You are not authorized to complete this assessment.","error");return}v.visit(route("competency-assessments.evaluate",a.id))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},F=a=>{var e;try{const o=(e=T().props.auth)==null?void 0:e.user;return o?a.assessment_type==="self"?o.id===a.employee.user_id:o.id===a.assessor_id:!1}catch(t){return console.error("Error checking assessment permissions:",t),!1}},Q=a=>a.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),O=a=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360° Feedback"})[a]||a,J=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date",K=(a,e)=>{const t=new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${t} - ${o}`},Y=a=>({planned:"Planned",active:"Active",completed:"Completed",cancelled:"Cancelled"})[a]||a,G=a=>({planned:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",H=a=>{const e=new Date,t=new Date(a),o=Math.floor((e-t)/(1e3*60));return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:`${Math.floor(o/1440)}d ago`},W=a=>({assessment_submitted:f,assessment_approved:f,cycle_started:k,cycle_completed:f})[a]||S,c=(a,e="info",t=4e3)=>{const o=Date.now(),ss={id:o,message:a,type:e,visible:!0};h.value.push(ss),setTimeout(()=>{A(o)},t)},A=a=>{const e=h.value.findIndex(t=>t.id===a);e>-1&&h.value.splice(e,1)},X=a=>{const e="notification-toast",t={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${e} ${t[a]||t.info}`},Z=a=>({success:f,error:P,warning:us,info:R})[a]||R;return ts(()=>{typeof route>"u"?(console.error("Route helper is not available. This will cause navigation issues."),c("Navigation system not properly initialized. Please refresh the page.","error")):console.log("Route helper is available. Navigation should work properly.");try{["competency-assessments.index","assessment-cycle-manager","competency-analytics.index"].forEach(e=>{try{const t=route(e);console.log(`✓ Route ${e} is available: ${t}`)}catch(t){console.error(`✗ Route ${e} failed:`,t)}})}catch(a){console.error("Route testing failed:",a)}}),(a,e)=>(i(),w(rs,null,{default:$(()=>[s("div",ys,[s("div",hs,[s("div",ps,[e[3]||(e[3]=s("div",{class:"title-section"},[s("h1",{class:"dashboard-title"},"Assessment Dashboard"),s("p",{class:"dashboard-subtitle"},"Overview of competency assessments and cycles")],-1)),s("div",fs,[s("button",{onClick:M,disabled:m.value,class:"action-button secondary"},[r(u(ls),{class:"w-4 h-4"}),e[0]||(e[0]=p(" Refresh "))],8,_s),s("button",{onClick:U,class:"action-button secondary"},[r(u(ds),{class:"w-4 h-4"}),e[1]||(e[1]=p(" New Assessment "))]),s("button",{onClick:_,class:"action-button primary"},[r(u(k),{class:"w-4 h-4"}),e[2]||(e[2]=p(" Assessment Cycles "))])])])])]),s("div",bs,[s("div",ks,[s("div",ws,[r(b,{value:l.stats.totalAssessments,label:"Total Assessments",icon:"chart-bar",variant:"primary",trend:l.stats.assessmentTrend,loading:m.value,size:"large",clickable:!0,onClick:z},null,8,["value","trend","loading"]),r(b,{value:l.stats.pendingAssessments,label:"Pending Assessments",icon:"clock",variant:"warning",loading:m.value,size:"large",urgent:l.stats.pendingAssessments>10,clickable:!0,onClick:C},null,8,["value","loading","urgent"]),r(b,{value:l.stats.activeCycles,label:"Active Cycles",icon:"calendar",variant:"success",loading:m.value,size:"large",clickable:!0,onClick:_},null,8,["value","loading"]),r(b,{value:l.stats.completionRate,label:"Completion Rate",icon:"check-circle",variant:"info",suffix:"%",loading:m.value,size:"large"},null,8,["value","loading"])])]),s("div",xs,[s("div",Cs,[s("div",As,[s("div",{class:"widget-header"},[e[4]||(e[4]=s("h3",{class:"widget-title"},"Pending Assessments",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:C,class:"text-sm text-blue-600 hover:text-blue-800"}," View All ")])]),s("div",Ns,[m.value?(i(),n("div",$s,[s("div",qs,[(i(),n(g,null,y(3,t=>s("div",{key:t,class:"flex items-center space-x-3"},e[5]||(e[5]=[s("div",{class:"w-10 h-10 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):l.pendingAssessments.length===0?(i(),n("div",Ds,[r(u(f),{class:"w-12 h-12 text-green-500 mx-auto mb-3"}),e[6]||(e[6]=s("p",{class:"text-gray-500 text-center"},"No pending assessments",-1))])):(i(),n("div",Ts,[(i(!0),n(g,null,y(l.pendingAssessments.slice(0,5),t=>(i(),n("div",{key:t.id,class:"assessment-item",onClick:o=>E(t)},[s("div",Ps,[s("div",Rs,d(Q(t.employee.name)),1)]),s("div",Ms,[s("div",zs,[r(u(is),{href:a.route("competency-assessments.by-employee",t.employee.id),class:"text-blue-600 hover:text-blue-800 hover:underline"},{default:$(()=>[p(d(t.employee.name),1)]),_:2},1032,["href"]),p(" - "+d(t.competency.name),1)]),s("div",Is,[s("span",Us,d(O(t.assessment_type)),1),s("span",Vs,"Due: "+d(J(t.due_date)),1)])]),s("div",Bs,[F(t)?(i(),n("button",{key:0,onClick:ns(o=>j(t),["stop"]),class:"btn-sm btn-primary"}," Assess ",8,Es)):(i(),n("span",Ls,d(t.assessment_type==="self"?"Employee only":"Not assigned"),1))])],8,Ss))),128))]))])]),s("div",js,[s("div",{class:"widget-header"},[e[7]||(e[7]=s("h3",{class:"widget-title"},"Assessment Cycles",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:_,class:"text-sm text-blue-600 hover:text-blue-800"}," Manage Cycles ")])]),s("div",Fs,[m.value?(i(),n("div",Qs,[s("div",Os,[(i(),n(g,null,y(3,t=>s("div",{key:t,class:"flex items-center justify-between"},e[8]||(e[8]=[s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1),s("div",{class:"w-16 h-6 bg-gray-200 rounded"},null,-1)]))),64))])])):l.assessmentCycles.length===0?(i(),n("div",Js,[r(u(k),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[9]||(e[9]=s("p",{class:"text-gray-500 text-center"},"No active cycles",-1))])):(i(),n("div",Ks,[(i(!0),n(g,null,y(l.assessmentCycles.slice(0,5),t=>(i(),n("div",{key:t.id,class:"cycle-item",onClick:o=>L(t)},[s("div",Gs,[s("div",Hs,d(t.name),1),s("div",Ws,[s("span",Xs,d(K(t.start_date,t.end_date)),1)])]),s("div",Zs,[s("span",{class:q([G(t.status),"status-badge"])},d(Y(t.status)),3)]),s("div",se,[s("div",ee,[s("div",{class:"progress-fill",style:os({width:`${t.completion_percentage}%`})},null,4)]),s("span",te,d(t.completion_percentage)+"%",1)])],8,Ys))),128))]))])])])]),s("div",ae,[s("div",ie,[s("div",ne,[e[14]||(e[14]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Quick Actions")],-1)),s("div",oe,[s("div",re,[s("button",{onClick:I,class:"quick-action-item"},[s("div",ce,[r(u(vs),{class:"w-6 h-6"})]),e[10]||(e[10]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"New Assessment"),s("div",{class:"quick-action-subtitle"},"Create individual assessment")],-1))]),s("button",{onClick:_,class:"quick-action-item"},[s("div",le,[r(u(k),{class:"w-6 h-6"})]),e[11]||(e[11]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Assessment Cycle"),s("div",{class:"quick-action-subtitle"},"Manage assessment cycles")],-1))]),s("button",{onClick:V,class:"quick-action-item"},[s("div",de,[r(u(ms),{class:"w-6 h-6"})]),e[12]||(e[12]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Analytics"),s("div",{class:"quick-action-subtitle"},"View reports and insights")],-1))]),s("button",{onClick:B,class:"quick-action-item"},[s("div",ue,[r(u(gs),{class:"w-6 h-6"})]),e[13]||(e[13]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Competencies"),s("div",{class:"quick-action-subtitle"},"Manage competency framework")],-1))])])])]),s("div",ve,[e[17]||(e[17]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Recent Activity")],-1)),s("div",me,[m.value?(i(),n("div",ge,[s("div",ye,[(i(),n(g,null,y(4,t=>s("div",{key:t,class:"flex items-start space-x-3"},e[15]||(e[15]=[s("div",{class:"w-8 h-8 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-full h-3 bg-gray-200 rounded mb-2"}),s("div",{class:"w-2/3 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):l.recentActivity.length===0?(i(),n("div",he,[r(u(S),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[16]||(e[16]=s("p",{class:"text-gray-500 text-center"},"No recent activity",-1))])):(i(),n("div",pe,[(i(!0),n(g,null,y(l.recentActivity.slice(0,6),t=>(i(),n("div",{key:t.id,class:"activity-item"},[s("div",fe,[(i(),w(D(W(t.type)),{class:"w-4 h-4"}))]),s("div",_e,[s("div",be,d(t.description),1),s("div",ke,d(H(t.created_at)),1)])]))),128))]))])])])])]),h.value.length>0?(i(),n("div",we,[s("div",xe,[(i(!0),n(g,null,y(h.value,t=>(i(),n("div",{key:t.id,class:q([X(t.type),"notification-card"])},[s("div",Ce,[(i(),w(D(Z(t.type)),{class:"w-5 h-5"}))]),s("div",Ae,[s("p",Ne,d(t.message),1)]),s("button",{onClick:o=>A(t.id),class:"notification-close"},[r(u(P),{class:"w-4 h-4"})],8,$e)],2))),128))])])):as("",!0)]),_:1}))}},Qe=cs(qe,[["__scopeId","data-v-34ed4385"]]);export{Qe as default};
