import{c as u,o as r,a as e,i as B,m as we,n as w,d as Ae,u as d,B as ce,t as a,F as X,g as H,s as De,G as We,f as M,Q as oe,e as N,l as R,r as G,A as ue,E as Be,C as Ie,z as He,k as C,D as qe,q as ne,h as F,w as Ke,b as _e,H as se}from"./app-Dtqsdvuv.js";import{u as Ue}from"./useAuth-C3mLAt9O.js";import{b as ze,A as Xe}from"./AuthenticatedLayout-CSY40NB0.js";/* empty css                                                                  *//* empty css                                                                      */import{A as Ge}from"./ApplicationLogo-Drn0v5_M.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as Qe,j as je,F as Ne,m as pe,k as ae,a as Me}from"./icons-DrlDVf8p.js";import{r as ke}from"./ChartBarIcon-DkFAUDi4.js";import{a as Ye,b as Z,c as Pe,r as Re}from"./UsersIcon-CQ1JbND-.js";import{r as $e}from"./ArrowPathIcon-milW2BXi.js";import{r as xe}from"./AcademicCapIcon-DXqs-MZ7.js";import{r as Ze}from"./ArrowTrendingUpIcon-BlugmsUX.js";import{r as Ee}from"./CogIcon-Ezez5Hh3.js";function Je(t,I){return r(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}const et=["role","tabindex"],tt={key:0,class:"flex items-center justify-between mb-4"},st={class:"flex items-center space-x-3"},at={key:0,class:"flex items-center space-x-2"},nt={class:"flex-1"},ot={key:2,class:w(["absolute inset-0 flex items-center justify-center rounded-2xl transition-all duration-200"])},rt={class:"flex items-center space-x-3"},J={__name:"UnifiedCard",props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:[String,Object],default:null},iconVariant:{type:String,default:null,validator:t=>["primary","success","warning","danger","info"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","elevated"].includes(t)},size:{type:String,default:"default",validator:t=>["small","default"].includes(t)},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},status:{type:String,default:null,validator:t=>["success","warning","error","info"].includes(t)},statusText:{type:String,default:null},className:{type:String,default:""}},emits:["click"],setup(t,{emit:I}){const{isDark:c}=ze();return(x,m)=>(r(),u(X,null,[e("div",{class:w(["group relative transition-all duration-300",t.size==="small"?"rounded-lg":"rounded-2xl",t.clickable&&"cursor-pointer hover:scale-[1.02] hover:shadow-2xl",t.clickable&&(d(c)?"hover:bg-gray-700/60 hover:border-gray-600/60":"hover:bg-white/90 hover:border-gray-300/60"),t.size==="small"?"p-3":"p-4",t.className]),onClick:m[0]||(m[0]=p=>t.clickable&&x.$emit("click")),role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[m[1]||(m[1]=we(p=>t.clickable&&x.$emit("click"),["enter"])),m[2]||(m[2]=we(Ae(p=>t.clickable&&x.$emit("click"),["prevent"]),["space"]))]},null,42,et),x.$slots.header||t.title?(r(),u("div",tt,[e("div",st,[t.icon||x.$slots.icon?(r(),u("div",{key:0,class:w(["flex items-center justify-center rounded-xl transition-all duration-200",t.size==="small"?"w-10 h-10 p-2":"w-12 h-12 p-3",t.iconVariant==="primary"&&(d(c)?"bg-teal-600/20 text-teal-400 border border-teal-500/30":"bg-teal-50 text-teal-600 border border-teal-200/50"),t.iconVariant==="success"&&(d(c)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-600 border border-green-200/50"),t.iconVariant==="warning"&&(d(c)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-600 border border-orange-200/50"),t.iconVariant==="danger"&&(d(c)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200/50"),t.iconVariant==="info"&&(d(c)?"bg-purple-600/20 text-purple-400 border border-purple-500/30":"bg-purple-50 text-purple-600 border border-purple-200/50"),!t.iconVariant&&(d(c)?"bg-gray-700/50 text-gray-300 border border-gray-600/50":"bg-gray-100 text-gray-600 border border-gray-200/50")])},[ce(x.$slots,"icon",{},()=>[t.icon?(r(),H(De(t.icon),{key:0,class:w(t.size==="small"?"w-4 h-4":"w-5 h-5")},null,8,["class"])):B("",!0)])],2)):B("",!0),e("div",null,[t.title?(r(),u("h3",{key:0,class:w(["font-semibold transition-colors duration-200",t.size==="small"?"text-base":"text-lg",d(c)?"text-white":"text-gray-900"])},a(t.title),3)):B("",!0),t.description?(r(),u("p",{key:1,class:w(["transition-colors duration-200",t.size==="small"?"text-xs":"text-sm",d(c)?"text-gray-400":"text-gray-600"])},a(t.description),3)):B("",!0),ce(x.$slots,"header")])]),x.$slots.headerActions?(r(),u("div",at,[ce(x.$slots,"headerActions")])):B("",!0)])):B("",!0),e("div",nt,[ce(x.$slots,"default",{},()=>[m[3]||(m[3]=We('<div class="text-center py-12"><div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Content Available</h3><p class="text-sm text-gray-500">This section will display content when data is available.</p></div>',1))])]),x.$slots.footer?(r(),u("div",{key:1,class:w(["mt-6 pt-4 border-t transition-colors duration-200",d(c)?"border-gray-700/50":"border-gray-200/50"])},[ce(x.$slots,"footer")],2)):B("",!0),t.loading?(r(),u("div",ot,[e("div",rt,[e("div",{class:w(["animate-spin rounded-full border-2 border-t-transparent",t.size==="small"?"w-5 h-5":"w-6 h-6",d(c)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:w(["text-sm font-medium",d(c)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])])):B("",!0),t.status?(r(),u("div",{key:3,class:w(["absolute top-4 right-4 flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="success"&&(d(c)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-700 border border-green-200"),t.status==="warning"&&(d(c)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-700 border border-orange-200"),t.status==="error"&&(d(c)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200"),t.status==="info"&&(d(c)?"bg-teal-600/20 text-teal-400 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200")])},[e("div",{class:w(["w-1.5 h-1.5 rounded-full",t.status==="success"&&"bg-green-400",t.status==="warning"&&"bg-orange-400",t.status==="error"&&"bg-red-400",t.status==="info"&&"bg-teal-400"])},null,2),e("span",null,a(t.statusText||t.status),1)],2)):B("",!0)],64))}},it=["role","tabindex","onKeydown"],lt={class:"flex items-start justify-between mb-4"},dt={key:0,class:"flex items-center space-x-1"},ct={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ut={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mt={class:"space-y-1 mb-3"},gt={class:"flex items-center gap-2"},ht={key:2,class:"absolute z-20 -top-2 -right-2"},Y={__name:"UnifiedStatsCard",props:{value:{type:[Number,String],required:!0},label:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],required:!0},variant:{type:String,default:"primary",validator:t=>["primary","success","warning","info","neutral"].includes(t)},trend:{type:Number,default:null},trendSuffix:{type:String,default:"%"},status:{type:String,default:null,validator:t=>["excellent","good","warning","critical"].includes(t)},statusText:{type:String,default:null},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},route:{type:String,default:null},urgent:{type:Boolean,default:!1},prefix:{type:String,default:""},suffix:{type:String,default:""}},emits:["click"],setup(t,{emit:I}){const c=t,x=I,{isDark:m}=ze(),p=M(()=>{if(c.loading)return"...";let f=c.value;return typeof f=="number"&&(f=f.toLocaleString()),`${c.prefix}${f}${c.suffix}`}),E=()=>{!c.clickable||c.loading||(c.route&&oe.visit(route(c.route)),x("click"))};return(f,s)=>(r(),u("div",{class:w(["group relative transition-all duration-300",t.clickable&&"cursor-pointer",d(m)?"bg-gray-800/50 border border-gray-700/50 backdrop-blur-sm":"bg-white border border-gray-100 shadow-sm backdrop-blur-sm","hover:shadow-md hover:-translate-y-0.5","rounded-2xl p-5 sm:p-6"]),onClick:E,role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[we(E,["enter"]),we(Ae(E,["prevent"]),["space"])]},[e("div",lt,[e("div",{class:w(["flex items-center justify-center w-12 h-12 rounded-xl flex-shrink-0 shadow-sm",t.variant==="primary"&&(d(m)?"bg-teal-600/20 text-teal-400":"bg-teal-500 text-white shadow-teal-100"),t.variant==="success"&&(d(m)?"bg-green-600/20 text-green-400":"bg-green-500 text-white shadow-green-100"),t.variant==="warning"&&(d(m)?"bg-orange-600/20 text-orange-400":"bg-orange-500 text-white shadow-orange-100"),t.variant==="info"&&(d(m)?"bg-purple-600/20 text-purple-400":"bg-purple-500 text-white shadow-purple-100"),t.variant==="neutral"&&(d(m)?"bg-gray-700/50 text-gray-300":"bg-gray-500 text-white shadow-gray-100")])},[(r(),H(De(t.icon),{class:"w-6 h-6"}))],2),t.trend!==null&&!t.loading?(r(),u("div",dt,[t.trend>0?(r(),u("svg",ct,s[0]||(s[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):t.trend<0?(r(),u("svg",ut,s[1]||(s[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):B("",!0),e("span",{class:w(["text-sm font-medium",t.trend>0&&"text-green-600",t.trend<0&&"text-red-600",t.trend===0&&"text-gray-500"])},a(t.trend>0?"+":"")+a(t.trend)+a(t.trendSuffix),3)])):t.status&&!t.loading?(r(),u("div",{key:1,class:w(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="excellent"&&(d(m)?"bg-green-600/20 text-green-400":"bg-green-50 text-green-700 border border-green-100"),t.status==="good"&&(d(m)?"bg-teal-600/20 text-teal-400":"bg-teal-50 text-teal-700 border border-teal-100"),t.status==="warning"&&(d(m)?"bg-orange-600/20 text-orange-400":"bg-orange-50 text-orange-700 border border-orange-100"),t.status==="critical"&&(d(m)?"bg-red-600/20 text-red-400":"bg-red-50 text-red-700 border border-red-100")])},[e("span",{class:w(["w-1.5 h-1.5 rounded-full",t.status==="excellent"&&"bg-green-500",t.status==="good"&&"bg-teal-500",t.status==="warning"&&"bg-orange-500",t.status==="critical"&&"bg-red-500"])},null,2),e("span",null,a(t.statusText||t.status),1)],2)):B("",!0)]),e("div",mt,[e("div",{class:w(["text-3xl font-semibold tracking-tight transition-colors duration-200",d(m)?"text-white":"text-gray-900",t.variant==="success"&&!d(m)&&"text-green-600",t.variant==="warning"&&!d(m)&&"text-orange-600"])},a(t.loading?"...":p.value),3),e("div",{class:w(["text-sm font-medium transition-colors duration-200",d(m)?"text-gray-400":"text-gray-600"])},a(t.label),3)]),t.description?(r(),u("div",{key:0,class:w(["text-sm leading-relaxed transition-colors duration-200",(d(m),"text-gray-500")])},a(t.description),3)):B("",!0),t.loading?(r(),u("div",{key:1,class:w(["absolute inset-0 z-10 flex items-center justify-center rounded-2xl backdrop-blur-sm",d(m)?"bg-gray-800/80":"bg-white/80"])},[e("div",gt,[e("div",{class:w(["animate-spin rounded-full w-5 h-5 border-2 border-t-transparent",d(m)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:w(["text-sm font-medium",d(m)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])],2)):B("",!0),t.urgent&&!t.loading?(r(),u("div",ht,s[2]||(s[2]=[e("div",{class:"relative"},[e("div",{class:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),e("div",{class:"absolute inset-0 w-4 h-4 bg-red-500 rounded-full animate-ping opacity-75"})],-1)]))):B("",!0)],42,it))}},yt={key:0,class:"space-y-4"},bt={class:"text-xs text-gray-500 p-2 bg-gray-100 rounded mb-2"},vt={key:0,class:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4"},ft={class:"space-y-2"},xt={key:0,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm border-2 border-pink-300"},pt={class:"flex items-center space-x-3"},kt={class:"w-10 h-10 bg-pink-200 rounded-full flex items-center justify-center"},wt={class:"text-sm font-semibold text-pink-700"},$t={class:"font-medium text-gray-900"},St={class:"text-sm text-gray-500"},Tt={class:"text-right"},Ct={key:0,class:"text-xs text-gray-500"},Bt={class:"flex items-center space-x-3"},At={class:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center"},Dt={class:"text-sm font-semibold text-pink-700"},It={class:"font-medium text-gray-900"},jt={class:"text-sm text-gray-500"},Mt={class:"text-right"},Rt={key:0,class:"text-xs text-gray-500"},Et={key:1,class:"bg-gradient-to-r from-teal-50 to-indigo-50 border border-teal-200 rounded-lg p-4"},Ut={class:"flex items-center justify-between mb-3"},zt={class:"space-y-2"},Nt={class:"flex items-center space-x-3"},Pt={class:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center"},Vt={class:"text-sm font-semibold text-teal-700"},Ot={class:"font-medium text-gray-900"},Lt={class:"text-sm text-gray-500"},Ft={class:"text-right"},Wt={class:"text-sm font-medium text-gray-900"},Ht={class:"text-xs text-gray-500"},qt={key:2,class:"bg-gradient-to-r from-teal-50 to-indigo-50 border border-teal-200 rounded-lg p-4"},Ve={__name:"BirthdayNotifications",props:{todaysBirthdays:{type:Array,default:()=>[]},upcomingBirthdays:{type:Array,default:()=>[]},stats:{type:Object,default:null},systemTimezone:{type:String,default:"UTC"},currentUserBirthday:{type:Object,default:null}},setup(t){const I=t,c=N(!1),x=M(()=>{var l,U;const s=((l=I.todaysBirthdays)==null?void 0:l.length)>0||((U=I.upcomingBirthdays)==null?void 0:U.length)>0||I.currentUserBirthday;return console.log("ðŸŽ‚ BirthdayNotifications: Props received:",{todaysBirthdays:I.todaysBirthdays,upcomingBirthdays:I.upcomingBirthdays,currentUserBirthday:I.currentUserBirthday,stats:I.stats,hasData:s}),!0}),m=M(()=>c.value?I.upcomingBirthdays:I.upcomingBirthdays.slice(0,3)),p=s=>s?s.split(" ").map(l=>l.charAt(0).toUpperCase()).join("").substring(0,2):"U",E=s=>{const[l,U,v]=s.split("-").map(Number);return new Date(l,U-1,v).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:I.systemTimezone||"UTC"})},f=s=>s===0?"Today":s===1?"Tomorrow":`In ${s} days`;return(s,l)=>{var U,v,y,V,A,j;return x.value?(r(),u("div",yt,[e("div",bt," Debug: todaysBirthdays="+a(((U=t.todaysBirthdays)==null?void 0:U.length)||0)+", currentUser="+a(((y=(v=t.currentUserBirthday)==null?void 0:v.user)==null?void 0:y.name)||"none")+", upcoming="+a(((V=t.upcomingBirthdays)==null?void 0:V.length)||0),1),t.todaysBirthdays&&t.todaysBirthdays.length>0||t.currentUserBirthday?(r(),u("div",vt,[l[4]||(l[4]=e("div",{class:"flex items-center space-x-3 mb-3"},[e("div",{class:"text-2xl"},"ðŸŽ‰"),e("div",null,[e("h3",{class:"text-lg font-semibold text-pink-800"},"Birthday Today!"),e("p",{class:"text-sm text-pink-600"},"Let's celebrate our team members")])],-1)),e("div",ft,[t.currentUserBirthday&&t.currentUserBirthday.user?(r(),u("div",xt,[e("div",pt,[e("div",kt,[e("span",wt,a(p(((A=t.currentUserBirthday.user)==null?void 0:A.name)||"U")),1)]),e("div",null,[e("p",$t,[R(a((j=t.currentUserBirthday.user)==null?void 0:j.name)+" ",1),l[1]||(l[1]=e("span",{class:"text-pink-600 font-bold"},"(You!)",-1))]),e("p",St,a(t.currentUserBirthday.job_title||"Employee"),1)])]),e("div",Tt,[l[2]||(l[2]=e("div",{class:"text-lg"},"ðŸŽ‚",-1)),t.currentUserBirthday.age?(r(),u("p",Ct,a(t.currentUserBirthday.age)+" years",1)):B("",!0)])])):B("",!0),(r(!0),u(X,null,G(t.todaysBirthdays,b=>(r(),u("div",{key:b.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",Bt,[e("div",At,[e("span",Dt,a(p(b.user.name)),1)]),e("div",null,[e("p",It,a(b.user.name),1),e("p",jt,a(b.job_title||"Employee"),1)])]),e("div",Mt,[l[3]||(l[3]=e("div",{class:"text-lg"},"ðŸŽ‚",-1)),b.age?(r(),u("p",Rt,a(b.age)+" years",1)):B("",!0)])]))),128))])])):B("",!0),t.upcomingBirthdays.length>0?(r(),u("div",Et,[e("div",Ut,[l[5]||(l[5]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-teal-800"},"Upcoming Birthdays"),e("p",{class:"text-sm text-teal-600"},"Don't forget to wish them well!")])],-1)),e("button",{onClick:l[0]||(l[0]=b=>c.value=!c.value),class:"text-sm text-teal-600 hover:text-teal-800 font-medium"},a(c.value?"Show Less":"Show All"),1)]),e("div",zt,[(r(!0),u(X,null,G(m.value,(b,h)=>(r(),u("div",{key:b.employee.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",Nt,[e("div",Pt,[e("span",Vt,a(p(b.employee.user.name)),1)]),e("div",null,[e("p",Ot,a(b.employee.user.name),1),e("p",Lt,a(b.employee.job_title||"Employee"),1)])]),e("div",Ft,[e("p",Wt,a(E(b.birthday_date)),1),e("p",Ht,a(f(b.days_until)),1)])]))),128))])])):B("",!0),t.todaysBirthdays.length===0&&!t.currentUserBirthday&&t.upcomingBirthdays.length===0?(r(),u("div",qt,l[6]||(l[6]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-teal-800"},"No Birthdays This Month"),e("p",{class:"text-sm text-teal-600"},"No team birthdays to celebrate right now, but stay tuned!")])],-1)]))):B("",!0)])):B("",!0)}}},Kt={class:"p-6 text-center"},_t={class:"mb-4"},Xt={class:"w-20 h-20 bg-gradient-to-br from-pink-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-3"},Gt={class:"text-2xl font-bold text-purple-700"},Qt={class:"text-xl font-semibold text-gray-900 mb-1"},Yt={class:"text-gray-600 text-sm"},Zt={class:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 mb-6"},Jt={class:"flex items-center justify-center space-x-2 text-purple-700"},es={class:"font-medium"},ts={class:"bg-gray-50 px-6 py-4 text-center border-t border-gray-100"},ss={class:"flex justify-center"},as={__name:"BirthdayPopup",props:{show:{type:Boolean,default:!1},employee:{type:Object,required:!0}},emits:["close"],setup(t,{emit:I}){const c=t,x=I,m=N(null);let p=null;const E=U=>U.split(" ").map(v=>v.charAt(0).toUpperCase()).join("").substring(0,2),f=()=>{s()},s=()=>{x("close")};class l{constructor(v){this.canvas=v,this.ctx=v.getContext("2d"),this.particles=[],this.colors=["#ff6b9d","#c44569","#f8b500","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3"],this.isRunning=!1,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}createParticle(v,y){return{x:v||Math.random()*this.canvas.width,y:y||-10,vx:(Math.random()-.5)*8,vy:Math.random()*-8-2,gravity:.3,friction:.99,size:Math.random()*8+4,color:this.colors[Math.floor(Math.random()*this.colors.length)],rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10,life:1,decay:Math.random()*.02+.01,shape:Math.random()>.5?"circle":"square"}}burst(){const v=this.canvas.width/2,y=this.canvas.height/2;for(let V=0;V<50;V++){const A=this.createParticle(v+(Math.random()-.5)*100,y+(Math.random()-.5)*100);A.vx=(Math.random()-.5)*15,A.vy=(Math.random()-.5)*15,this.particles.push(A)}}start(){this.isRunning=!0,this.burst(),this.particleInterval=setInterval(()=>{if(this.particles.length<100)for(let v=0;v<3;v++)this.particles.push(this.createParticle())},100),this.animate()}stop(){this.isRunning=!1,this.particleInterval&&clearInterval(this.particleInterval)}animate(){if(this.isRunning){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let v=this.particles.length-1;v>=0;v--){const y=this.particles[v];if(y.vy+=y.gravity,y.vx*=y.friction,y.vy*=y.friction,y.x+=y.vx,y.y+=y.vy,y.rotation+=y.rotationSpeed,y.life-=y.decay,y.life<=0||y.y>this.canvas.height+50||y.x<-50||y.x>this.canvas.width+50){this.particles.splice(v,1);continue}this.ctx.save(),this.ctx.translate(y.x,y.y),this.ctx.rotate(y.rotation*Math.PI/180),this.ctx.globalAlpha=y.life,this.ctx.fillStyle=y.color,y.shape==="circle"?(this.ctx.beginPath(),this.ctx.arc(0,0,y.size/2,0,Math.PI*2),this.ctx.fill()):this.ctx.fillRect(-y.size/2,-y.size/2,y.size,y.size),this.ctx.restore()}requestAnimationFrame(()=>this.animate())}}}return ue(async()=>{c.show&&(await Be(),m.value&&(p=new l(m.value),p.start()))}),Ie(()=>{p&&p.stop()}),He(()=>c.show,async U=>{U?(await Be(),m.value&&!p?(p=new l(m.value),p.start()):p&&p.start()):p&&p.stop()}),(U,v)=>(r(),H(qe,{to:"body"},[t.show?(r(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:f},[e("canvas",{ref_key:"confettiCanvas",ref:m,class:"absolute inset-0 w-full h-full pointer-events-none"},null,512),e("div",{class:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all duration-300 scale-100",onClick:v[0]||(v[0]=Ae(()=>{},["stop"]))},[v[4]||(v[4]=e("div",{class:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 p-6 text-center text-white relative"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-400/20 via-purple-400/20 to-indigo-400/20"}),e("div",{class:"relative z-10"},[e("div",{class:"text-6xl mb-2 animate-bounce"},"ðŸŽ‰"),e("h2",{class:"text-2xl font-bold mb-1"},"Happy Birthday!"),e("p",{class:"text-pink-100 text-sm"},"Wishing you a wonderful day from the team")])],-1)),e("div",Kt,[e("div",_t,[e("div",Xt,[e("span",Gt,a(E(t.employee.user.name)),1)]),e("h3",Qt,a(t.employee.user.name),1),e("p",Yt,a(t.employee.job_title||"Team Member"),1)]),e("div",Zt,[e("div",Jt,[v[1]||(v[1]=e("span",{class:"text-2xl"},"ðŸŽ‚",-1)),e("span",es,a(t.employee.age?`Turning ${t.employee.age} today!`:"Celebrating another year!"),1)])]),v[2]||(v[2]=e("div",{class:"text-gray-600 text-sm mb-6 leading-relaxed"}," Hope your special day is filled with happiness, laughter, and all your favorite things! Thank you for being such an amazing part of our Xonobics family. ðŸŒŸ ",-1)),v[3]||(v[3]=e("div",{class:"bg-gradient-to-r from-teal-50 to-purple-50 rounded-lg p-4 mb-6 border border-teal-100"},[e("div",{class:"flex items-center justify-center space-x-2 text-teal-700 mb-2"},[e("span",{class:"text-lg"},"ðŸŽŠ"),e("span",{class:"font-semibold text-sm"},"From all of us at Xonobics")]),e("p",{class:"text-xs text-teal-600 text-center"}," May this new year of your life bring you joy, success, and wonderful memories! ")],-1)),e("div",{class:"flex justify-center"},[e("button",{onClick:s,class:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-3 rounded-lg font-medium hover:from-pink-600 hover:to-purple-600 transition-all duration-200 shadow-lg"}," Thank You! ðŸŽ‰ ")])]),e("div",ts,[e("div",ss,[C(Ge,{class:"h-12 w-auto opacity-80"})])]),v[5]||(v[5]=e("div",{class:"absolute top-4 left-4 text-yellow-400 animate-pulse"},"âœ¨",-1)),v[6]||(v[6]=e("div",{class:"absolute top-6 right-6 text-pink-400 animate-pulse"},"ðŸŽˆ",-1)),v[7]||(v[7]=e("div",{class:"absolute bottom-4 left-6 text-purple-400 animate-pulse"},"ðŸŽ",-1)),v[8]||(v[8]=e("div",{class:"absolute bottom-6 right-4 text-indigo-400 animate-pulse"},"ðŸŒŸ",-1))])])):B("",!0)]))}},Oe=me(as,[["__scopeId","data-v-0f159006"]]),ns={class:"employee-dashboard"},os={class:"time-tracking-section"},rs={class:"welcome-clock-display"},is={class:"welcome-section"},ls={class:"greeting-text"},ds={class:"clock-section"},cs={class:"current-time"},us={class:"current-date"},ms={class:"work-status"},gs={class:"status-text"},hs={class:"time-progress-block"},ys={class:"duration-display"},bs={class:"duration-item"},vs={class:"duration-item"},fs={class:"duration-item"},xs={class:"duration-value"},ps={class:"horizontal-clock-container"},ks={class:"time-markers"},ws={class:"marker-time"},$s={class:"time-progress-bar"},Ss={key:0,class:"current-time-indicator"},Ts={class:"time-tooltip"},Cs={class:"time-progress-info"},Bs={class:"progress-left"},As={class:"progress-time"},Ds={class:"progress-right"},Is={class:"progress-percentage"},js={class:"quick-actions"},Ms={class:"actions-grid"},Rs=["onClick"],Es={key:0,class:"w-6 h-6",fill:"none",stroke:"#8B5CF6",viewBox:"0 0 24 24"},Us={key:1,class:"w-6 h-6",fill:"none",stroke:"#3B82F6",viewBox:"0 0 24 24"},zs={key:2,class:"w-6 h-6",fill:"none",stroke:"#F59E0B",viewBox:"0 0 24 24"},Ns={key:0,class:"debug-section"},Ps={class:"debug-content"},Vs={class:"debug-item"},Os={class:"debug-item"},Ls={class:"debug-item"},Fs={class:"debug-item"},Ws={class:"debug-item"},Hs={class:"debug-item"},qs={class:"debug-item"},Ks={class:"debug-item"},_s={class:"debug-item"},Xs={class:"debug-item"},Gs={class:"debug-item"},Qs={class:"birthday-section"},Ys={__name:"EmployeeDashboard",props:{stats:{type:Object,default:()=>({daysWithCompany:0,projectsContributed:0,performanceRank:"N/A"})},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,current_break_start:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m"}})},birthdayNotifications:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})},employeeName:{type:String,default:"Employee"}},emits:["action"],setup(t,{emit:I}){const c=t,x=I,{user:m}=Ue(),p=N(new Date),E=N(!1),f=N(!1),s=N({clockedIn:!1,onBreak:!1,clockInTime:null,breakStartTime:null,workDuration:"0h 0m",breakDuration:"0h 0m",completedBreakSessions:[],totalBreakTime:"0h 0m"});let l=null;const U=M(()=>p.value.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})),v=M(()=>p.value.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),y=M(()=>s.value.clockedIn),V=M(()=>s.value.onBreak),A=M(()=>s.value.onBreak?"On Break":s.value.clockedIn?"Working":"Not Clocked In"),j=M(()=>s.value.onBreak?"status-break":s.value.clockedIn?"status-working":"status-out"),b=M(()=>s.value.workDuration),h=M(()=>s.value.breakDuration),$=M(()=>{let o=0;if(s.value.completedBreakSessions&&s.value.completedBreakSessions.forEach(T=>{if(T.start&&T.end){const k=new Date(T.start),O=new Date(T.end)-k;o+=Math.floor(O/(1e3*60))}}),s.value.onBreak&&s.value.breakStartTime){const T=new Date(s.value.breakStartTime),k=p.value,D=Math.max(0,k-T);o+=Math.floor(D/(1e3*60))}const n=Math.floor(o/60),g=o%60;return`${n}h ${g}m`}),K=M(()=>{const n=p.value.getHours();return n<7?"before-work":n>=19?"after-work":"during-work"}),re=M(()=>{const o=[];return[7,8,9,10,11,12,13,14,15,16,17,18,19].forEach((g,T)=>{let k,D=!1;g===0?k="12 AM":g===12?(k="12 PM",D=!0):g<12?k=`${g} AM`:g===18?k="6 PM":g===19?k="7 PM":k=`${g-12} PM`,(g===12||g===13)&&(D=!0);const O=T/12*100;o.push({label:k,time:g,isLunch:D,position:O})}),o}),ie=M(()=>{if(!y.value||!s.value.clockInTime)return 0;const o=p.value,n=new Date(s.value.clockInTime);if(o<n)return 0;const T=(o.getTime()-n.getTime())/(1e3*60*60);return Math.min(T/9*100,100)}),ge=M(()=>0),Se=M(()=>{if(!y.value||!s.value.clockInTime)return 0;const o=new Date(s.value.clockInTime),n=o.getHours(),g=o.getMinutes();if(n<7)return 0;if(n>=19)return 100;{const k=(n-7)*60+g,D=12*60;return k/D*100}}),le=M(()=>{if(!y.value||!s.value.clockInTime)return 0;const o=s.value.workDuration||"0h 0m",n=o.match(/(\d+)h/),g=o.match(/(\d+)m/),T=n?parseInt(n[1]):0,k=g?parseInt(g[1]):0,D=T*60+k,O=9*60,P=D/O*100;return Math.min(P,100)}),Te=M(()=>y.value?`${Math.round(ie.value)}% Complete`:"Not Active"),Ce=M(()=>{const o=p.value,n=o.getHours(),g=o.getMinutes();if(n<7)return 0;if(n>=19)return 100;{const k=(n-7)*60+g,D=12*60;return k/D*100}}),S=M(()=>{if(V.value)return"bg-yellow-100 text-yellow-700";if(y.value)return"bg-green-100 text-green-700";switch(K.value){case"before-work":return"bg-gray-100 text-gray-600";case"after-work":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}}),i=M(()=>{const o=[],n=(g,T)=>{if(g<7||g>=19)return null;const D=(g-7)*60+T,O=12*60;return D/O*100};if(s.value.completedBreakSessions&&s.value.completedBreakSessions.forEach(g=>{if(g.start&&g.end){const T=new Date(g.start),k=new Date(g.end),D=n(T.getHours(),T.getMinutes()),O=n(k.getHours(),k.getMinutes());D!==null&&O!==null&&O>D&&o.push({left:D,width:O-D,isOngoing:!1})}}),V.value&&s.value.breakStartTime){const g=new Date(s.value.breakStartTime),T=p.value,k=n(g.getHours(),g.getMinutes()),D=n(T.getHours(),T.getMinutes());k!==null&&D!==null&&D>k&&o.push({left:k,width:D-k,isOngoing:!0})}return o}),z=M(()=>[{id:"my-assessments",label:"My Assessments",icon:Qe,route:"competency-assessments.my-assessments"},{id:"work-reports",label:"Work Reports",icon:ke,route:"work-reports.index"},{id:"leaderboard",label:"Leaderboard",icon:Ye,route:"work-reports.leaderboard"}]),_=()=>{p.value=new Date,L()},L=()=>{if(s.value.clockedIn&&s.value.clockInTime){const o=new Date(s.value.clockInTime),g=p.value.getTime()-o.getTime();if(g>0){const T=Math.floor(g/36e5),k=Math.floor(g%(1e3*60*60)/(1e3*60));s.value.workDuration=`${T}h ${k}m`}}else s.value.clockedIn||(s.value.workDuration="0h 0m");if(s.value.onBreak&&s.value.breakStartTime){const o=new Date(s.value.breakStartTime),g=p.value.getTime()-o.getTime();if(g>0){const T=Math.floor(g/36e5),k=Math.floor(g%(1e3*60*60)/(1e3*60)),D=Math.floor(g%(1e3*60)/1e3);s.value.breakDuration=`${T}h ${k}m ${D}s`}}else s.value.onBreak||(s.value.breakDuration="0h 0m");s.value.completedBreakSessions.length>0},q=o=>{o.route&&(window.location.href=route(o.route)),x("action",o)},Q=()=>{te(),window.dispatchEvent(new CustomEvent("dashboard-requests-sync")),window.axios&&window.axios.get("/api/attendance/current").then(o=>{var n,g;s.value={clockedIn:o.data.clocked_in||!1,onBreak:o.data.on_break||!1,clockInTime:o.data.clock_in_time||null,breakStartTime:o.data.current_break_start||null,workDuration:((n=o.data.todays_summary)==null?void 0:n.total_hours)||s.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:o.data.break_sessions||[],totalBreakTime:((g=o.data.todays_summary)==null?void 0:g.break_time)||"0h 0m"},L()}).catch(o=>{console.error("âŒ Dashboard: Failed to fetch from API:",o)})},ee=o=>{o.ctrlKey&&o.shiftKey&&o.key==="D"&&(E.value=!E.value)},he=()=>{var o,n,g,T,k,D,O,P,W;s.value={clockedIn:((o=c.currentAttendance)==null?void 0:o.clocked_in)||!1,onBreak:((n=c.currentAttendance)==null?void 0:n.on_break)||!1,clockInTime:((g=c.currentAttendance)==null?void 0:g.clock_in_time)||null,breakStartTime:((T=c.currentAttendance)==null?void 0:T.current_break_start)||null,workDuration:((D=(k=c.currentAttendance)==null?void 0:k.todays_summary)==null?void 0:D.total_hours)||"0h 0m",breakDuration:"0h 0m",completedBreakSessions:((O=c.currentAttendance)==null?void 0:O.break_sessions)||[],totalBreakTime:((W=(P=c.currentAttendance)==null?void 0:P.todays_summary)==null?void 0:W.break_time)||"0h 0m"}},te=()=>{try{const o=localStorage.getItem("floating-attendance-state");if(o){const n=JSON.parse(o),g=new Date(n.lastUpdate);if((new Date-g)/(1e3*60)<5)return s.value={clockedIn:n.clockedIn||!1,onBreak:n.onBreak||!1,clockInTime:n.clockInTime||null,breakStartTime:n.breakStartTime||null,workDuration:s.value.workDuration,breakDuration:s.value.breakDuration,completedBreakSessions:n.completedBreakSessions||n.break_sessions||[],totalBreakTime:s.value.totalBreakTime},L(),!0}}catch(o){console.warn("Dashboard: Failed to sync with FloatingWidget localStorage:",o)}return!1},ye=o=>{var n,g;s.value={clockedIn:o.clocked_in||!1,onBreak:o.on_break||!1,clockInTime:o.clock_in_time||null,breakStartTime:o.current_break_start||null,workDuration:((n=o.todays_summary)==null?void 0:n.total_hours)||s.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:o.break_sessions||[],totalBreakTime:((g=o.todays_summary)==null?void 0:g.break_time)||s.value.totalBreakTime},L()},de=o=>{const{clockedIn:n,onBreak:g,clockInTime:T,breakStartTime:k,completedBreakSessions:D,todaysHours:O,currentBreakTime:P,totalBreakTime:W,action:Le}=o.detail;let fe=s.value.completedBreakSessions||[];if(D&&Array.isArray(D))fe=D;else if(Le==="end-break"&&s.value.onBreak&&s.value.breakStartTime){const Fe={start:s.value.breakStartTime,end:new Date().toISOString(),isOngoing:!1};fe=[...fe,Fe]}s.value={clockedIn:n||!1,onBreak:g||!1,clockInTime:T||null,breakStartTime:k||null,workDuration:O||s.value.workDuration,breakDuration:P||"0h 0m",completedBreakSessions:fe,totalBreakTime:W||s.value.totalBreakTime},L()},be=()=>{var o;(o=c.birthdayNotifications)!=null&&o.currentUserBirthday?setTimeout(()=>{console.log("ðŸŽ‚ EmployeeDashboard: Showing birthday popup for:",c.birthdayNotifications.currentUserBirthday.user.name),f.value=!0},1500):console.log("ðŸŽ‚ EmployeeDashboard: No current user birthday found")},ve=()=>{console.log("ðŸŽ‚ EmployeeDashboard: Closing birthday popup"),f.value=!1};return ue(async()=>{var o,n,g,T;if(_(),he(),te(),l=setInterval(()=>{_(),p.value.getSeconds()%30===0&&te()},1e3),window.Echo&&((n=(o=m.value)==null?void 0:o.employee)!=null&&n.id)){const k=m.value.employee.id;try{window.Echo.private(`attendance.${k}`).listen(".attendance.updated",ye)}catch(D){console.error("Dashboard: Failed to subscribe to Echo channel:",D)}}else console.warn("Dashboard: Echo not available or no employee ID");window.addEventListener("attendance-state-changed",de),window.addEventListener("keydown",ee),be(),console.log("ðŸŽ‚ EmployeeDashboard: Birthday notifications data:",c.birthdayNotifications),console.log("ðŸŽ‚ EmployeeDashboard: Today's birthdays:",(g=c.birthdayNotifications)==null?void 0:g.todaysBirthdays),console.log("ðŸŽ‚ EmployeeDashboard: Upcoming birthdays:",(T=c.birthdayNotifications)==null?void 0:T.upcomingBirthdays)}),Ie(()=>{var o,n;if(l&&clearInterval(l),window.Echo&&((n=(o=m.value)==null?void 0:o.employee)!=null&&n.id)){const g=m.value.employee.id;try{window.Echo.leave(`attendance.${g}`)}catch(T){console.warn("Dashboard: Error unsubscribing from Echo channels:",T)}}window.removeEventListener("attendance-state-changed",de),window.removeEventListener("keydown",ee)}),(o,n)=>{var g,T,k,D,O;return r(),u("div",ns,[e("div",os,[e("div",rs,[e("div",is,[e("h2",ls,"Welcome back, "+a(t.employeeName)+"! ðŸ‘‹",1),n[0]||(n[0]=e("p",{class:"greeting-subtitle"},"Ready to make today productive?",-1))]),e("div",ds,[e("div",cs,a(U.value),1),e("div",us,a(v.value),1)]),e("div",ms,[e("div",{class:w(["status-indicator",j.value])},[n[1]||(n[1]=e("div",{class:"status-dot"},null,-1)),e("span",gs,a(A.value),1)],2)])]),e("div",hs,[e("div",ys,[e("div",bs,[n[2]||(n[2]=e("div",{class:"duration-label"},"Work Time",-1)),e("div",{class:w(["duration-value",{"text-gray-500":V.value}])},a(b.value),3)]),e("div",vs,[e("div",{class:w(["duration-label",{"text-orange-600":V.value}])},a(V.value?"Current Break":"Total Breaks"),3),e("div",{class:w(["duration-value",{"text-orange-600 font-bold":V.value}])},a(V.value?h.value:$.value),3)]),e("div",fs,[n[3]||(n[3]=e("div",{class:"duration-label"},"Progress",-1)),e("div",xs,a(Math.round(ie.value))+"%",1)])]),e("div",ps,[e("div",ks,[(r(!0),u(X,null,G(re.value,(P,W)=>(r(),u("div",{key:W,class:w(["time-marker",{"start-marker":W===0,"end-marker":W===re.value.length-1,"lunch-marker":P.isLunch,"regular-marker":!P.isLunch&&W!==0&&W!==re.value.length-1}]),style:ne({left:`${P.position}%`})},[n[4]||(n[4]=e("div",{class:"marker-line"},null,-1)),e("span",ws,a(P.label),1)],6))),128))]),e("div",$s,[n[7]||(n[7]=e("div",{class:"progress-bar-shimmer"},null,-1)),e("div",{class:"current-time-position",style:ne({left:`${Ce.value}%`})},n[5]||(n[5]=[e("div",{class:"time-position-dot"},null,-1)]),4),ge.value>0?(r(),u("div",{key:0,class:"pre-work-fill",style:ne({width:`${ge.value}%`,transition:"width 0.5s ease-out"})},null,4)):B("",!0),y.value&&le.value>0?(r(),u("div",{key:1,class:"work-progress-fill",style:ne({left:`${Se.value}%`,width:`${le.value}%`,transition:"width 0.5s ease-out, left 0.5s ease-out"})},[y.value?(r(),u("div",Ss,[n[6]||(n[6]=e("div",{class:"time-dot"},null,-1)),e("div",Ts,a(U.value),1)])):B("",!0)],4)):B("",!0),(r(!0),u(X,null,G(i.value,(P,W)=>(r(),u("div",{key:`break-${W}`,class:w(["break-time-fill",{"ongoing-break":P.isOngoing}]),style:ne({left:`${P.left}%`,width:`${P.width}%`})},null,6))),128))]),e("div",Cs,[e("div",Bs,[e("span",As,a(U.value),1),e("span",{class:w(["progress-status",S.value])},a(A.value),3)]),e("div",Ds,[e("span",Is,a(Te.value),1)])])])])]),e("div",js,[n[11]||(n[11]=e("h3",{class:"section-title"},"Quick Actions",-1)),e("div",Ms,[(r(!0),u(X,null,G(z.value,P=>(r(),u("button",{key:P.id,onClick:W=>q(P),class:w(["action-button",`action-${P.id}`])},[P.id==="my-assessments"?(r(),u("svg",Es,n[8]||(n[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))):P.id==="work-reports"?(r(),u("svg",Us,n[9]||(n[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):P.id==="leaderboard"?(r(),u("svg",zs,n[10]||(n[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]))):B("",!0),e("span",null,a(P.label),1)],10,Rs))),128))])]),E.value?(r(),u("div",Ns,[n[23]||(n[23]=e("h3",{class:"section-title"},"Break Sessions Debug",-1)),e("div",Ps,[e("div",Vs,[n[12]||(n[12]=e("strong",null,"Completed Break Sessions:",-1)),R(" "+a(s.value.completedBreakSessions.length),1)]),e("div",Os,[n[13]||(n[13]=e("strong",null,"Current Break:",-1)),R(" "+a(V.value?"Yes":"No"),1)]),e("div",Ls,[n[14]||(n[14]=e("strong",null,"Break Start Time:",-1)),R(" "+a(s.value.breakStartTime||"None"),1)]),e("div",Fs,[n[15]||(n[15]=e("strong",null,"Current Break Duration:",-1)),R(" "+a(h.value),1)]),e("div",Ws,[n[16]||(n[16]=e("strong",null,"Total Break Time (Computed):",-1)),R(" "+a($.value),1)]),e("div",Hs,[n[17]||(n[17]=e("strong",null,"Clocked In (Dashboard):",-1)),R(" "+a(s.value.clockedIn),1)]),e("div",qs,[n[18]||(n[18]=e("strong",null,"isClockedIn Computed:",-1)),R(" "+a(y.value),1)]),e("div",Ks,[n[19]||(n[19]=e("strong",null,"Work Progress %:",-1)),R(" "+a(Math.round(ie.value))+"% ",1)]),e("div",_s,[n[20]||(n[20]=e("strong",null,"Progress Width:",-1)),R(" "+a(le.value)+"% ",1)]),e("div",Xs,[n[21]||(n[21]=e("strong",null,"Clock In Time:",-1)),R(" "+a(s.value.clockInTime||"None"),1)]),e("div",Gs,[n[22]||(n[22]=e("strong",null,"Break Sessions:",-1)),e("pre",null,a(JSON.stringify(s.value.completedBreakSessions,null,2)),1)]),e("button",{onClick:Q,class:"debug-button"}," Refresh from FloatingWidget ")])])):B("",!0),e("div",Qs,[C(Ve,{"todays-birthdays":((g=t.birthdayNotifications)==null?void 0:g.todaysBirthdays)||[],"upcoming-birthdays":((T=t.birthdayNotifications)==null?void 0:T.upcomingBirthdays)||[],stats:((k=t.birthdayNotifications)==null?void 0:k.stats)||{},"current-user-birthday":((D=t.birthdayNotifications)==null?void 0:D.currentUserBirthday)||null},null,8,["todays-birthdays","upcoming-birthdays","stats","current-user-birthday"])]),(O=t.birthdayNotifications)!=null&&O.currentUserBirthday?(r(),H(Oe,{key:1,show:f.value,employee:t.birthdayNotifications.currentUserBirthday,onClose:ve},null,8,["show","employee"])):B("",!0)])}}},Zs=me(Ys,[["__scopeId","data-v-63c107c2"]]),Js=["disabled"],ea={class:"grid grid-cols-3 gap-4 mb-6"},ta={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},sa={class:"text-2xl font-bold text-green-600"},aa={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},na={class:"text-2xl font-bold text-red-600"},oa={class:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100"},ra={class:"text-2xl font-bold text-blue-600"},ia={class:"mb-6"},la={class:"flex justify-between items-center mb-2"},da={class:"text-sm font-bold text-gray-900"},ca={class:"w-full bg-gray-200 rounded-full h-2"},ua={class:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1"},ma={class:"relative"},ga={key:0,class:"absolute top-0 left-0 right-0 h-6 scroll-fade-top z-10 pointer-events-none rounded-t-lg"},ha={key:1,class:"absolute bottom-0 left-0 right-0 h-6 scroll-fade-bottom z-10 pointer-events-none rounded-b-lg"},ya={key:0,class:"space-y-2"},ba={key:0,class:"text-center py-8 text-gray-500"},va={class:"flex items-center space-x-3 flex-1 min-w-0"},fa={class:"min-w-0 flex-1"},xa={class:"font-medium text-gray-900 truncate"},pa={class:"text-sm text-gray-600 truncate"},ka={class:"text-right flex-shrink-0 min-w-[100px]"},wa={class:"text-sm font-medium text-gray-900"},$a={class:"text-xs text-gray-600 whitespace-nowrap"},Sa={key:0,class:"text-orange-600 ml-1"},Ta={key:1,class:"space-y-2"},Ca={key:0,class:"text-center py-8 text-gray-500"},Ba={class:"flex items-center space-x-3"},Aa={class:"font-medium text-gray-900"},Da={class:"text-sm text-gray-600"},Ia={class:"text-right"},ja={class:"text-xs text-gray-500"},Ma={class:"mt-4 pt-4 border-t border-gray-200"},Ra={class:"flex space-x-2"},Ea=["disabled"],Ua={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},za={__name:"AttendanceTrackingWidget",props:{attendanceData:{type:Object,required:!0,default:()=>({totalEmployeeCount:0,clockedInCount:0,missedClockInCount:0,clockedInEmployees:[],missedClockInEmployees:[],attendanceRate:0})}},setup(t){const I=t,c=N("clocked-in"),x=N(!1),m=N(null),p=N(!1),E=N(!1),f=N(!1),s=b=>b>=90?"bg-green-500":b>=75?"bg-yellow-500":"bg-red-500",l=b=>{if(!b||b==="Invalid Date")return"-";try{const h=new Date(b);return isNaN(h.getTime())?"-":h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(h){return console.error("Error formatting time:",h),"-"}},U=()=>{x.value=!0;try{oe.reload({only:["attendanceTracking","adminStats"],preserveScroll:!0,onFinish:()=>{x.value=!1}})}catch(b){console.error("Failed to refresh attendance data:",b),x.value=!1}},v=async()=>{var b;if(!(I.attendanceData.missedClockInCount===0||f.value)){x.value=!0;try{const h=await window.axios.post("/api/attendance/send-clock-in-reminders",{},{headers:{"X-CSRF-TOKEN":(b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});if(h.data.success){f.value=!0;const $=`âœ… Clock-in reminders sent to ${h.data.count} employees. Admin confirmation email sent.`,K=document.createElement("div");K.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",K.textContent=$,document.body.appendChild(K),setTimeout(()=>{K.remove()},5e3)}}catch(h){console.error("Failed to send reminder:",h);const $=document.createElement("div");$.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",$.textContent="âŒ Failed to send reminders. Please try again.",document.body.appendChild($),setTimeout(()=>{$.remove()},5e3)}finally{x.value=!1}}},y=async()=>{try{const b=await window.axios.get("/api/attendance/export-report",{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),h=window.URL.createObjectURL(new Blob([b.data])),$=document.createElement("a");$.href=h,$.setAttribute("download",`attendance-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild($),$.click(),$.remove(),window.URL.revokeObjectURL(h)}catch(b){console.error("Failed to export attendance report:",b),alert("Failed to export report. Please try again.")}},V=()=>{if(!m.value)return;const{scrollTop:b,scrollHeight:h,clientHeight:$}=m.value;p.value=b>10,E.value=b<h-$-10},A=async()=>{if(await Be(),!m.value)return;const{scrollHeight:b,clientHeight:h}=m.value,$=b>h;E.value=$,p.value=!1},j=async b=>{c.value=b,await A()};return ue(()=>{A()}),(b,h)=>(r(),H(J,{title:"Today's Attendance Tracking",description:"Employee clock-in status overview",icon:d(Z),iconVariant:"primary",variant:"elevated"},{headerActions:F(()=>[e("button",{onClick:U,disabled:x.value,class:"inline-flex items-center px-3 py-1.5 bg-teal-50 text-teal-700 text-sm font-medium rounded-lg hover:bg-teal-100 transition-colors"},[C(d($e),{class:w(["w-4 h-4 mr-1",x.value?"animate-spin":""])},null,8,["class"]),h[2]||(h[2]=R(" Refresh "))],8,Js)]),default:F(()=>[e("div",ea,[e("div",ta,[e("div",sa,a(t.attendanceData.clockedInCount),1),h[3]||(h[3]=e("div",{class:"text-xs text-gray-600 mt-1"},"Clocked In",-1))]),e("div",aa,[e("div",na,a(t.attendanceData.missedClockInCount),1),h[4]||(h[4]=e("div",{class:"text-xs text-gray-600 mt-1"},"Missed Clock-in",-1))]),e("div",oa,[e("div",ra,a(t.attendanceData.totalEmployeeCount),1),h[5]||(h[5]=e("div",{class:"text-xs text-gray-600 mt-1"},"Total Employees",-1))])]),e("div",ia,[e("div",la,[h[6]||(h[6]=e("span",{class:"text-sm font-medium text-gray-700"},"Attendance Rate",-1)),e("span",da,a(t.attendanceData.attendanceRate)+"%",1)]),e("div",ca,[e("div",{class:w(["h-2 rounded-full transition-all duration-300",s(t.attendanceData.attendanceRate)]),style:ne({width:t.attendanceData.attendanceRate+"%"})},null,6)])]),e("div",ua,[e("button",{onClick:h[0]||(h[0]=$=>j("clocked-in")),class:w(["flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors",c.value==="clocked-in"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Clocked In ("+a(t.attendanceData.clockedInCount)+") ",3),e("button",{onClick:h[1]||(h[1]=$=>c.value="missed"),class:w(["flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors",c.value==="missed"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Missed ("+a(t.attendanceData.missedClockInCount)+") ",3)]),e("div",ma,[p.value?(r(),u("div",ga)):B("",!0),E.value?(r(),u("div",ha)):B("",!0),e("div",{ref_key:"scrollContainer",ref:m,class:"max-h-64 overflow-y-auto custom-scrollbar",onScroll:V},[c.value==="clocked-in"?(r(),u("div",ya,[t.attendanceData.clockedInEmployees.length===0?(r(),u("div",ba,[C(d(Z),{class:"w-12 h-12 mx-auto mb-2 text-gray-300"}),h[7]||(h[7]=e("p",null,"No employees clocked in yet today",-1))])):B("",!0),(r(!0),u(X,null,G(t.attendanceData.clockedInEmployees,$=>(r(),u("div",{key:$.id,class:"employee-card flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100 gap-4"},[e("div",va,[h[8]||(h[8]=e("div",{class:"w-2 h-2 bg-green-400 rounded-full flex-shrink-0"},null,-1)),e("div",fa,[e("div",xa,a($.name),1),e("div",pa,a($.job_title)+" â€¢ "+a($.department),1)])]),e("div",ka,[e("div",wa,"Clock-In : "+a(l($.clock_in_time)),1),e("div",$a,[$.on_break?(r(),u("span",Sa,"(On Break)")):B("",!0)])])]))),128))])):B("",!0),c.value==="missed"?(r(),u("div",Ta,[t.attendanceData.missedClockInEmployees.length===0?(r(),u("div",Ca,[C(d(je),{class:"w-12 h-12 mx-auto mb-2 text-green-300"}),h[9]||(h[9]=e("p",null,"All employees have clocked in today!",-1))])):B("",!0),(r(!0),u(X,null,G(t.attendanceData.missedClockInEmployees,$=>(r(),u("div",{key:$.id,class:"employee-card flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100"},[e("div",Ba,[h[10]||(h[10]=e("div",{class:"w-2 h-2 bg-red-400 rounded-full"},null,-1)),e("div",null,[e("div",Aa,a($.name),1),e("div",Da,a($.job_title)+" â€¢ "+a($.department),1)])]),e("div",Ia,[h[11]||(h[11]=e("div",{class:"text-sm text-red-600 font-medium"},"Not clocked in",-1)),e("div",ja,a($.employee_code),1)])]))),128))])):B("",!0)],544)]),e("div",Ma,[e("div",Ra,[e("button",{onClick:v,disabled:t.attendanceData.missedClockInCount===0||x.value||f.value,class:w(["flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",f.value?"bg-green-50 text-green-700 border border-green-200":"bg-orange-50 text-orange-700 hover:bg-orange-100"])},[f.value?(r(),u("svg",Ua,h[12]||(h[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(r(),H(d(Pe),{key:0,class:"w-4 h-4 mr-2"})),R(" "+a(f.value?"Reminders Sent":"Send Reminder"),1)],10,Ea),e("button",{onClick:y,class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors"},[C(d(Ne),{class:"w-4 h-4 mr-2"}),h[13]||(h[13]=R(" Export Report "))])])])]),_:1},8,["icon"]))}},Na=me(za,[["__scopeId","data-v-00b3faad"]]),Pa=["disabled"],Va={class:"grid grid-cols-4 gap-4 mb-6"},Oa={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},La={class:"text-2xl font-bold text-red-600"},Fa={class:"text-center p-4 bg-yellow-50 rounded-xl border border-yellow-100"},Wa={class:"text-2xl font-bold text-yellow-600"},Ha={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},qa={class:"text-2xl font-bold text-orange-600"},Ka={class:"text-center p-4 bg-red-50 rounded-xl border border-red-100"},_a={class:"text-2xl font-bold text-red-600"},Xa={class:"max-h-64 overflow-y-auto custom-scrollbar"},Ga={key:0,class:"text-center py-8 text-gray-500"},Qa={key:1,class:"space-y-2"},Ya={class:"flex items-center space-x-3"},Za={class:"font-medium text-gray-900"},Ja={class:"text-sm text-gray-600"},en={class:"text-right"},tn={class:"text-xs text-gray-600"},sn={class:"mt-4 pt-4 border-t border-gray-200"},an={class:"flex space-x-2"},nn=["disabled"],on={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rn={__name:"BreakMonitoringWidget",props:{breakViolations:{type:Array,default:()=>[]}},setup(t){const I=t,c=N(!1),x=N(!1),m=()=>{c.value=!0;try{oe.reload({only:["breakViolations"],preserveScroll:!0,onFinish:()=>{c.value=!1}})}catch(f){console.error("Failed to refresh break data:",f),c.value=!1}},p=async()=>{var f;if(!(I.breakViolations.length===0||x.value)){c.value=!0;try{const s=await window.axios.post("/api/attendance/send-break-reminders",{violations:I.breakViolations},{headers:{"X-CSRF-TOKEN":(f=document.querySelector('meta[name="csrf-token"]'))==null?void 0:f.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});if(s.data.success){x.value=!0;const l=document.createElement("div");l.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",l.textContent=`âœ… Break reminders sent to ${s.data.count} employees. Admin confirmation email sent.`,document.body.appendChild(l),setTimeout(()=>{l.remove()},5e3)}}catch(s){console.error("Failed to send break reminders:",s);const l=document.createElement("div");l.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300",l.textContent="âŒ Failed to send break reminders. Please try again.",document.body.appendChild(l),setTimeout(()=>{l.remove()},5e3)}finally{c.value=!1}}},E=async()=>{try{const f=await axios.get("/api/attendance/export-break-report",{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),s=window.URL.createObjectURL(new Blob([f.data])),l=document.createElement("a");l.href=s,l.setAttribute("download",`break-violations-report-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}catch(f){console.error("Failed to export break report:",f),alert("Failed to export report. Please try again.")}};return(f,s)=>(r(),H(J,{title:"Break Time Monitoring",description:"Employees exceeding break limits",icon:d(Z),iconVariant:"warning",variant:"elevated"},{headerActions:F(()=>[e("button",{onClick:m,disabled:c.value,class:"inline-flex items-center px-3 py-1.5 bg-orange-50 text-orange-700 text-sm font-medium rounded-lg hover:bg-orange-100 transition-colors"},[C(d($e),{class:w(["w-4 h-4 mr-1",c.value?"animate-spin":""])},null,8,["class"]),s[0]||(s[0]=R(" Refresh "))],8,Pa)]),default:F(()=>[e("div",Va,[e("div",Oa,[e("div",La,a(t.breakViolations.length),1),s[1]||(s[1]=e("div",{class:"text-xs text-gray-600 mt-1"},"Break Violations",-1))]),e("div",Fa,[e("div",Wa,a(t.breakViolations.filter(l=>l.break_number===1).length),1),s[2]||(s[2]=e("div",{class:"text-xs text-gray-600 mt-1"},"1st Break (>15min)",-1))]),e("div",Ha,[e("div",qa,a(t.breakViolations.filter(l=>l.break_number===2).length),1),s[3]||(s[3]=e("div",{class:"text-xs text-gray-600 mt-1"},"2nd Break (>30min)",-1))]),e("div",Ka,[e("div",_a,a(t.breakViolations.filter(l=>l.break_number===3).length),1),s[4]||(s[4]=e("div",{class:"text-xs text-gray-600 mt-1"},"3rd Break (>15min)",-1))])]),e("div",Xa,[t.breakViolations.length===0?(r(),u("div",Ga,[C(d(je),{class:"w-12 h-12 mx-auto mb-2 text-green-300"}),s[5]||(s[5]=e("p",null,"All employees are within break limits!",-1))])):(r(),u("div",Qa,[(r(!0),u(X,null,G(t.breakViolations,l=>(r(),u("div",{key:`${l.employee_id}-${l.break_number}`,class:w(["employee-card flex items-center justify-between p-3 rounded-lg border",l.break_number===1&&"bg-yellow-50 border-yellow-200",l.break_number===2&&"bg-orange-50 border-orange-200",l.break_number===3&&"bg-red-50 border-red-200"])},[e("div",Ya,[e("div",{class:w(["w-3 h-3 rounded-full",l.break_number===1&&"bg-yellow-400",l.break_number===2&&"bg-orange-400",l.break_number===3&&"bg-red-400"])},null,2),e("div",null,[e("div",Za,a(l.employee_name),1),e("div",Ja,a(l.job_title)+" â€¢ "+a(l.department),1)])]),e("div",en,[e("div",{class:w(["text-sm font-medium",l.break_number===1&&"text-yellow-700",l.break_number===2&&"text-orange-700",l.break_number===3&&"text-red-700"])}," Break "+a(l.break_number)+": "+a(l.duration),3),e("div",tn," Limit: "+a(l.limit)+" â€¢ Over by "+a(l.overtime),1)])],2))),128))]))]),e("div",sn,[e("div",an,[e("button",{onClick:p,disabled:t.breakViolations.length===0||c.value||x.value,class:w(["flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",x.value?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 hover:bg-red-100"])},[x.value?(r(),u("svg",on,s[6]||(s[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(r(),H(d(Pe),{key:0,class:"w-4 h-4 mr-2"})),R(" "+a(x.value?"Reminders Sent":"Send Break Reminders"),1)],10,nn),e("button",{onClick:E,class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors"},[C(d(Ne),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=R(" Export Report "))])])])]),_:1},8,["icon"]))}},ln=me(rn,[["__scopeId","data-v-802de418"]]),dn=["disabled"],cn={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-4"},un={class:"flex items-center justify-between"},mn={class:"text-2xl font-bold text-gray-900"},gn={class:"text-sm text-gray-600"},hn={class:"text-right"},yn={class:"text-sm font-medium text-blue-700"},bn={class:"text-xs text-gray-500"},vn={key:0,class:"bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-4"},fn={class:"flex items-center justify-between"},xn={class:"flex items-center space-x-3"},pn={class:"text-3xl"},kn={class:"text-lg font-semibold text-gray-900"},wn={class:"text-sm text-gray-600"},$n={class:"text-right text-sm text-gray-600"},Sn={key:0,class:"mt-3 pt-3 border-t border-gray-200"},Tn={class:"flex items-center text-sm text-gray-500"},Cn={key:1,class:"bg-yellow-50 rounded-xl p-4 text-center"},Bn={class:"text-yellow-600 text-sm"},An={key:2,class:"bg-gray-50 rounded-xl p-4 text-center"},Dn={__name:"TimezoneWeatherWidget",props:{systemTimezone:{type:String,default:"UTC"},weatherApiKey:{type:String,default:"31340efcae6547a7aee150722250512"},location:{type:String,default:"Chicago"}},setup(t){const I=t,c=N(!1),x=N(""),m=N(""),p=N(""),E=N(""),f=N(null),s=N(!1);let l=null;const U=()=>{const A=new Date;x.value=A.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),m.value=A.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),p.value=I.systemTimezone||"UTC";const j=A.getTimezoneOffset(),b=Math.floor(Math.abs(j)/60),h=Math.abs(j)%60,$=j<=0?"+":"-";E.value=`UTC${$}${b.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`},v=A=>{const j={clear:"â˜€ï¸",sunny:"â˜€ï¸",clouds:"â˜ï¸","partly cloudy":"â›…",cloudy:"â˜ï¸",overcast:"â˜ï¸",rain:"ðŸŒ§ï¸",drizzle:"ðŸŒ¦ï¸",snow:"â„ï¸",thunderstorm:"â›ˆï¸",fog:"ðŸŒ«ï¸",mist:"ðŸŒ«ï¸",haze:"ðŸŒ«ï¸",default:"ðŸŒ¤ï¸"},b=A.toLowerCase();return j[b]||j.default},y=async()=>{if(!I.weatherApiKey){s.value=!0;return}try{const A=await fetch(`https://api.weatherapi.com/v1/current.json?key=${I.weatherApiKey}&q=${I.location}&aqi=no`);if(!A.ok)throw new Error("Weather API request failed");const j=await A.json(),b=await fetch(`https://api.weatherapi.com/v1/timezone.json?key=${I.weatherApiKey}&q=${I.location}`);if(!b.ok)throw new Error("Timezone API request failed");const h=await b.json();f.value={temperature:Math.round(j.current.temp_c),unit:"C",condition:j.current.condition.text,humidity:j.current.humidity,windSpeed:Math.round(j.current.wind_kph),windUnit:"km/h",location:`${j.location.name}, ${j.location.country}`},p.value=h.timezone.tz_id;const $=h.timezone.utc_offset_hours,K=$>=0?"+":"";E.value=`UTC${K}${$}`,s.value=!1}catch(A){console.error("Weather/Timezone fetch error:",A),s.value=!0}},V=async()=>{c.value=!0,U(),await y(),c.value=!1};return ue(()=>{U(),y(),l=setInterval(U,1e3)}),Ie(()=>{l&&clearInterval(l)}),(A,j)=>(r(),H(J,{title:"Current Time & Weather",description:"System timezone and weather information",icon:d(Z),iconVariant:"info",variant:"elevated"},{headerActions:F(()=>[e("button",{onClick:V,disabled:c.value,class:"inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors"},[C(d($e),{class:w(["w-4 h-4 mr-1",c.value?"animate-spin":""])},null,8,["class"]),j[0]||(j[0]=R(" Refresh "))],8,dn)]),default:F(()=>[e("div",cn,[e("div",un,[e("div",null,[e("div",mn,a(x.value),1),e("div",gn,a(m.value),1)]),e("div",hn,[e("div",yn,a(p.value),1),e("div",bn,a(E.value),1)])])]),f.value?(r(),u("div",vn,[e("div",fn,[e("div",xn,[e("div",pn,a(v(f.value.condition)),1),e("div",null,[e("div",kn,a(f.value.temperature)+"Â°"+a(f.value.unit),1),e("div",wn,a(f.value.condition),1)])]),e("div",$n,[e("div",null,"Humidity: "+a(f.value.humidity)+"%",1),e("div",null,"Wind: "+a(f.value.windSpeed)+" "+a(f.value.windUnit),1)])]),f.value.location?(r(),u("div",Sn,[e("div",Tn,[C(d(Je),{class:"w-4 h-4 mr-1"}),R(" "+a(f.value.location),1)])])):B("",!0)])):s.value?(r(),u("div",Cn,[e("div",Bn,[C(d(pe),{class:"w-5 h-5 mx-auto mb-2"}),j[1]||(j[1]=R(" Weather data unavailable "))])])):(r(),u("div",An,j[2]||(j[2]=[e("div",{class:"text-gray-500 text-sm"},[e("div",{class:"animate-pulse"},"Loading weather...")],-1)])))]),_:1},8,["icon"]))}},In=me(Dn,[["__scopeId","data-v-cfd1762c"]]),jn={class:"flex space-x-3"},Mn=["onClick","disabled"],Rn={key:0,class:"space-y-6"},En={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Un={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},zn={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Nn={class:"lg:col-span-2 space-y-4"},Pn={class:"grid grid-cols-3 gap-4 text-center"},Vn={class:"p-4 bg-yellow-50 rounded-lg"},On={class:"text-2xl font-bold text-yellow-600"},Ln={class:"p-4 bg-teal-50 rounded-lg"},Fn={class:"text-2xl font-bold text-teal-600"},Wn={class:"p-4 bg-purple-50 rounded-lg"},Hn={class:"text-2xl font-bold text-purple-600"},qn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Kn={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},_n={class:"text-2xl font-bold text-green-600"},Xn={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},Gn={class:"text-2xl font-bold text-orange-600"},Qn={class:"text-center p-4 bg-purple-50 rounded-xl border border-purple-100"},Yn={class:"text-2xl font-bold text-purple-600"},Zn={class:"text-center p-4 bg-teal-50 rounded-xl border border-teal-100"},Jn={class:"text-2xl font-bold text-teal-600"},eo={class:"lg:col-span-1 space-y-4"},to={class:"space-y-3"},so={class:"flex items-center"},ao={class:"flex items-center"},no={class:"flex items-center"},oo={class:"flex items-center"},ro={class:"flex items-center"},io={class:"space-y-3"},lo={class:"flex items-center justify-between"},co={class:"text-sm font-medium text-gray-900"},uo={key:1,class:"employee-layout"},mo={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},go={class:"lg:col-span-3"},ho={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},yo={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},bo={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},vo={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fo={class:"sm:flex sm:items-start"},xo={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},po={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},ko={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},wo={class:"space-y-4"},$o={class:"text-sm text-gray-600 mb-2"},So={class:"text-sm text-gray-600 mb-4"},To={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Co=["disabled"],Lo={__name:"Dashboard",props:{adminStats:{type:Object,default:()=>({})},managerStats:{type:Object,default:()=>({})},employeeStats:{type:Object,default:()=>({})},pendingApprovals:{type:Array,default:()=>[]},teamMembers:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({})},teamActivities:{type:Array,default:()=>[]},personalActivities:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},currentAttendance:{type:Object,default:null},birthdayData:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{},currentUserBirthday:null})},attendanceTracking:{type:Object,default:()=>({totalEmployeeCount:0,clockedInCount:0,missedClockInCount:0,clockedInEmployees:[],missedClockInEmployees:[],attendanceRate:0})},breakViolations:{type:Array,default:()=>[]},systemTimezone:{type:String,default:"UTC"},weatherApiKey:{type:String,default:null}},setup(t){const I=t,{user:c,roles:x}=Ue(),m=N(!1),p=N(!1),E=N(null),f=N(""),s=N(!1),l=M(()=>{const S=Array.isArray(x.value)&&x.value.includes("Admin");return console.log("ðŸ” Dashboard - User:",c.value),console.log("ðŸ” Dashboard - Roles:",x.value),console.log("ðŸ” Dashboard - Is Admin:",S),console.log("ðŸ” Dashboard - Which dashboard will show:",S?"Admin":"Employee"),S}),U=M(()=>Array.isArray(x.value)&&(x.value.includes("Manager")||x.value.includes("HR"))&&!l.value),v=M(()=>l.value?"Admin Dashboard":U.value?"Manager Dashboard":"My Dashboard"),y=M(()=>l.value?"System overview and administrative management tools":U.value?"Team management and performance overview":"Your personal workspace and activities");M(()=>new Date().toLocaleTimeString());const V=M(()=>{const S=[{id:"refresh",label:"Refresh",icon:"ArrowPathIcon",handler:b,disabled:m.value}];return l.value&&S.unshift({id:"settings",label:"System Settings",icon:"CogIcon",handler:()=>A("admin.roles.index")},{id:"analytics",label:"Analytics",icon:"ChartBarIcon",handler:()=>A("organizational-analytics.index")},{id:"reports",label:"View Reports",icon:"ChartBarIcon",handler:()=>A("reports.index"),primary:!0}),S}),A=S=>{try{oe.visit(route(S))}catch(i){console.error("Navigation error:",i)}},j=S=>({ArrowPathIcon:$e,CogIcon:Ee,ChartBarIcon:ke,ClockIcon:Z})[S]||Z,b=async()=>{m.value=!0;try{await oe.reload({only:["adminStats","managerStats","employeeStats","pendingApprovals","attendanceTracking"]})}catch(S){console.error("Refresh error:",S)}finally{m.value=!1}},h=()=>{p.value=!1,E.value=null,f.value=""},$=async()=>{var S,i,z,_;m.value=!0;try{const q=(await se.get("/api/attendance/current")).data;if(!q||typeof q!="object")throw new Error("Invalid attendance status response");let Q;q.clocked_in?Q="/api/attendance/clock-out":Q="/api/attendance/clock-in",(await se.post(Q,{},{headers:{"X-CSRF-TOKEN":(S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}})).data.success&&await K()}catch(L){console.error("Clock in/out error:",L);let q="Clock in/out failed. Please try again.";if(L.message==="Invalid attendance status response")q="Unable to get attendance status. Please ensure you have an employee profile.";else if(((i=L.response)==null?void 0:i.status)===419){window.location.reload();return}else(_=(z=L.response)==null?void 0:z.data)!=null&&_.message&&(q=L.response.data.message);alert(q)}finally{m.value=!1}},K=async()=>{try{const S=await se.get("/api/attendance/current");await oe.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0,preserveState:!0})}catch(S){console.error("Failed to update attendance status:",S),window.location.reload()}},re=async S=>{var i,z,_;if(S.route)A(S.route);else if(S.type)try{m.value=!0,S.type==="take-break"?await se.post("/api/attendance/break-start",{},{headers:{"X-CSRF-TOKEN":(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}):S.type==="end-break"&&await se.post("/api/attendance/break-end",{},{headers:{"X-CSRF-TOKEN":(z=document.querySelector('meta[name="csrf-token"]'))==null?void 0:z.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}),await K()}catch(L){console.error("Break action failed:",L),((_=L.response)==null?void 0:_.status)===419&&window.location.reload()}finally{m.value=!1}},ie=async S=>{try{await se.patch(route("tasks.toggle",S.id)),await b()}catch(i){console.error("Task toggle error:",i)}},ge=S=>{A("tasks.show",{task:S.id})},Se=()=>{var S,i,z;console.log("ðŸŽ‚ Dashboard: Full birthday data:",I.birthdayData),console.log("ðŸŽ‚ Dashboard: Current user birthday:",(S=I.birthdayData)==null?void 0:S.currentUserBirthday),console.log("ðŸŽ‚ Dashboard: Today's birthdays:",(i=I.birthdayData)==null?void 0:i.todaysBirthdays),console.log("ðŸŽ‚ Dashboard: User info:",c.value),(z=I.birthdayData)!=null&&z.currentUserBirthday?setTimeout(()=>{console.log("ðŸŽ‚ Dashboard: Showing birthday popup for:",I.birthdayData.currentUserBirthday.user.name),s.value=!0},1e3):console.log("ðŸŽ‚ Dashboard: No current user birthday found")},le=()=>{console.log("ðŸŽ‚ Dashboard: Closing birthday popup"),s.value=!1},Te=(S,i)=>{if(i===0)return"warning";const z=S/i*100;return z>=90?"excellent":z>=75?"good":"warning"},Ce=(S,i)=>{if(i===0)return"No Data";const z=S/i*100;return z>=90?"Excellent":z>=75?"Good":"Needs Attention"};return ue(()=>{Se()}),(S,i)=>(r(),H(Xe,null,{header:F(()=>[R(a(v.value),1)]),subtitle:F(()=>[R(a(y.value),1)]),headerActions:F(()=>[e("div",jn,[(r(!0),u(X,null,G(V.value,z=>(r(),u("button",{key:z.id,onClick:z.handler,disabled:z.disabled,class:w(["inline-flex items-center px-4 py-2 rounded-lg transition-all duration-200 text-sm font-medium",z.primary?"bg-teal-600 text-white hover:bg-teal-700 shadow-lg shadow-teal-500/25":"bg-white/60 text-gray-700 border border-gray-200 hover:bg-white hover:shadow-sm","disabled:opacity-50 disabled:cursor-not-allowed"])},[(r(),H(De(j(z.icon)),{class:"w-4 h-4 mr-2"})),R(" "+a(z.label),1)],10,Mn))),128))])]),default:F(()=>{var z,_,L,q,Q,ee,he,te,ye,de,be,ve;return[l.value?(r(),u("div",Rn,[e("div",En,[C(Y,{value:t.adminStats.totalEmployees,label:"Total Employees",description:"Active workforce",icon:d(Re),variant:"primary",trend:t.adminStats.employeeTrend,route:"employees.index",loading:m.value},null,8,["value","icon","trend","loading"]),C(Y,{value:`${t.adminStats.clockedInCount||0}/${t.adminStats.totalEmployeeCount||0}`,label:"Today's Attendance",description:"Clocked in employees",icon:d(Z),variant:"info",status:Te(t.adminStats.clockedInCount,t.adminStats.totalEmployeeCount),statusText:Ce(t.adminStats.clockedInCount,t.adminStats.totalEmployeeCount),clickable:!1,loading:m.value},null,8,["value","icon","status","statusText","loading"]),C(Y,{value:t.adminStats.pendingLeaves,label:"Pending Approvals",description:"Requires attention",icon:d(pe),variant:"warning",status:t.adminStats.pendingLeaves>10?"critical":"warning",statusText:t.adminStats.pendingLeaves>10?"High":"Normal",route:"approvals.index",urgent:t.adminStats.pendingLeaves>15,loading:m.value},null,8,["value","icon","status","statusText","urgent","loading"]),C(Y,{value:t.adminStats.pendingAssessments,label:"Pending Assessments",description:"Review status",icon:d(xe),variant:"info",status:t.adminStats.pendingAssessments>5?"warning":"good",statusText:t.adminStats.pendingAssessments>5?"Review":"On Track",route:"assessment-dashboard",loading:m.value},null,8,["value","icon","status","statusText","loading"])]),e("div",Un,[C(Y,{value:(t.adminStats.attendanceRate||0)+"%",label:"Attendance Rate",description:"This month",icon:d(Z),variant:"info",trend:t.adminStats.attendanceTrend||0,status:(t.adminStats.attendanceRate||0)>95?"excellent":(t.adminStats.attendanceRate||0)>85?"good":"warning",statusText:(t.adminStats.attendanceRate||0)>95?"Excellent":(t.adminStats.attendanceRate||0)>85?"Good":"Needs Attention",route:"attendance.reports",loading:m.value},null,8,["value","icon","trend","status","statusText","loading"]),C(Y,{value:t.adminStats.workReportsCount||0,label:"Work Reports",description:"This month",icon:d(ke),variant:"primary",trend:t.adminStats.workReportsTrend||0,status:(t.adminStats.workReportsCount||0)>50?"excellent":(t.adminStats.workReportsCount||0)>20?"good":"warning",statusText:(t.adminStats.workReportsCount||0)>50?"High Activity":(t.adminStats.workReportsCount||0)>20?"Active":"Low Activity",route:"work-reports.index",loading:m.value},null,8,["value","icon","trend","status","statusText","loading"]),C(Y,{value:t.adminStats.successfulCalls||0,label:"Successful Calls",description:"This month",icon:d(Ze),variant:"success",trend:t.adminStats.successfulCallsTrend||0,status:(t.adminStats.successfulCalls||0)>100?"excellent":(t.adminStats.successfulCalls||0)>50?"good":"warning",statusText:(t.adminStats.successfulCalls||0)>100?"Excellent":(t.adminStats.successfulCalls||0)>50?"Good":"Needs Focus",route:"work-reports.leaderboard",loading:m.value},null,8,["value","icon","trend","status","statusText","loading"]),C(Y,{value:(t.adminStats.avgPerformanceScore||0)+"%",label:"Avg Performance",description:"Team score",icon:d(xe),variant:"info",trend:t.adminStats.performanceTrend||0,status:(t.adminStats.avgPerformanceScore||0)>85?"excellent":(t.adminStats.avgPerformanceScore||0)>70?"good":"warning",statusText:(t.adminStats.avgPerformanceScore||0)>85?"Excellent":(t.adminStats.avgPerformanceScore||0)>70?"Good":"Needs Improvement",route:"performance.reports",loading:m.value},null,8,["value","icon","trend","status","statusText","loading"])]),e("div",zn,[e("div",Nn,[t.pendingApprovals.length>0?(r(),H(J,{key:0,title:"Pending Approvals Overview",description:"Items requiring your attention",icon:d(pe),iconVariant:"info",variant:"elevated"},{headerActions:F(()=>[e("button",{onClick:i[0]||(i[0]=o=>A("leaves.index")),class:"px-4 py-2 bg-teal-600 text-white text-sm rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-500/25"}," Manage All Approvals ")]),default:F(()=>[e("div",Pn,[e("div",Vn,[e("div",On,a(t.pendingApprovals.filter(o=>o.type==="leave").length),1),i[9]||(i[9]=e("div",{class:"text-sm text-gray-600"},"Leave Requests",-1))]),e("div",Ln,[e("div",Fn,a(t.pendingApprovals.filter(o=>o.type==="timesheet").length),1),i[10]||(i[10]=e("div",{class:"text-sm text-gray-600"},"Timesheets",-1))]),e("div",Wn,[e("div",Hn,a(t.pendingApprovals.filter(o=>o.type==="competency-assessment").length),1),i[11]||(i[11]=e("div",{class:"text-sm text-gray-600"},"Assessments",-1))])])]),_:1},8,["icon"])):B("",!0),e("div",null,[i[12]||(i[12]=e("p",{class:"text-sm text-gray-500 mb-2"},"Debug: Attendance Tracking Widget",-1)),C(Na,{"attendance-data":t.attendanceTracking},null,8,["attendance-data"])]),C(ln,{"break-violations":t.breakViolations},null,8,["break-violations"]),C(In,{location:"Chicago"}),C(J,{title:"Competency Management",description:"Track and manage employee competencies",icon:d(xe),iconVariant:"primary",variant:"elevated"},{headerActions:F(()=>[e("button",{onClick:i[1]||(i[1]=o=>A("assessment-dashboard")),class:"inline-flex items-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-500/25"},[i[13]||(i[13]=R(" View Details ")),C(d(ae),{class:"w-4 h-4 ml-1"})])]),default:F(()=>[e("div",qn,[e("div",Kn,[e("div",_n,a(t.adminStats.completedAssessmentsThisMonth||0),1),i[14]||(i[14]=e("div",{class:"text-xs text-gray-600 mt-1"},"Completed",-1))]),e("div",Xn,[e("div",Gn,a(t.adminStats.pendingAssessments||0),1),i[15]||(i[15]=e("div",{class:"text-xs text-gray-600 mt-1"},"Pending",-1))]),e("div",Qn,[e("div",Yn,a(t.adminStats.activeAssessmentCycles||0),1),i[16]||(i[16]=e("div",{class:"text-xs text-gray-600 mt-1"},"Active Cycles",-1))]),e("div",Zn,[e("div",Jn,a(t.adminStats.averageRating||"-"),1),i[17]||(i[17]=e("div",{class:"text-xs text-gray-600 mt-1"},"Avg Rating",-1))])])]),_:1},8,["icon"])]),e("div",eo,[C(J,{title:"Quick Actions",description:"Common tasks",icon:d(Me),iconVariant:"primary"},{default:F(()=>[e("div",to,[e("button",{onClick:i[2]||(i[2]=o=>A("competencies.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl hover:from-teal-600 hover:to-teal-700 transition-all group shadow-lg shadow-teal-500/25"},[e("div",so,[C(d(xe),{class:"w-5 h-5 mr-3"}),i[18]||(i[18]=e("span",{class:"font-medium"},"Add Competency",-1))]),C(d(ae),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:i[3]||(i[3]=o=>A("employees.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ao,[C(d(Re),{class:"w-5 h-5 mr-3"}),i[19]||(i[19]=e("span",{class:"font-medium"},"Manage Employees",-1))]),C(d(ae),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:i[4]||(i[4]=o=>A("assessment-cycles.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",no,[C(d(Me),{class:"w-5 h-5 mr-3"}),i[20]||(i[20]=e("span",{class:"font-medium"},"New Assessment Cycle",-1))]),C(d(ae),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:i[5]||(i[5]=o=>A("reports.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",oo,[C(d(ke),{class:"w-5 h-5 mr-3"}),i[21]||(i[21]=e("span",{class:"font-medium"},"View Reports",-1))]),C(d(ae),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:i[6]||(i[6]=o=>A("admin.roles.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ro,[C(d(Ee),{class:"w-5 h-5 mr-3"}),i[22]||(i[22]=e("span",{class:"font-medium"},"Role Management",-1))]),C(d(ae),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})])])]),_:1},8,["icon"]),C(Ve,{"todays-birthdays":t.birthdayData.todaysBirthdays,"upcoming-birthdays":t.birthdayData.upcomingBirthdays,stats:t.birthdayData.stats,"current-user-birthday":t.birthdayData.currentUserBirthday,"system-timezone":t.systemTimezone},null,8,["todays-birthdays","upcoming-birthdays","stats","current-user-birthday","system-timezone"]),C(J,{title:"System Status",description:"All systems operational",icon:d(je),iconVariant:"success"},{default:F(()=>[e("div",io,[i[24]||(i[24]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"Database"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Healthy")])],-1)),i[25]||(i[25]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"API Services"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Online")])],-1)),e("div",lo,[i[23]||(i[23]=e("span",{class:"text-sm text-gray-600"},"Uptime",-1)),e("span",co,a(t.adminStats.systemUptime)+"%",1)])])]),_:1},8,["icon"])])])])):(r(),u("div",uo,[e("div",mo,[e("div",go,[C(Zs,{stats:t.employeeStats,"personal-activities":t.personalActivities,"my-tasks":t.myTasks,"recent-feedback":t.recentFeedback,"clocked-in":t.clockedIn,"current-attendance":t.currentAttendance,"birthday-notifications":t.birthdayData,loading:m.value,"employee-name":((z=d(c))==null?void 0:z.name)||"Employee",onClockInOut:$,onAction:re,onToggleTask:ie,onViewTask:ge},null,8,["stats","personal-activities","my-tasks","recent-feedback","clocked-in","current-attendance","birthday-notifications","loading","employee-name"])])])])),p.value?(r(),u("div",ho,[e("div",yo,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:h}),e("div",bo,[e("div",vo,[e("div",fo,[e("div",xo,[C(d(pe),{class:"h-6 w-6 text-red-600"})]),e("div",po,[e("h3",ko," Reject "+a(((_=E.value)==null?void 0:_.title)||"Request"),1),e("div",wo,[e("div",null,[e("p",$o,[i[26]||(i[26]=e("strong",null,"Requester:",-1)),R(" "+a((L=E.value)==null?void 0:L.requester),1)]),e("p",So,[i[27]||(i[27]=e("strong",null,"Request:",-1)),R(" "+a((q=E.value)==null?void 0:q.description),1)])]),e("div",null,[i[28]||(i[28]=e("label",{for:"rejection-reason",class:"block text-sm font-medium text-gray-700 mb-2"},[R(" Reason for rejection "),e("span",{class:"text-red-500"},"*")],-1)),Ke(e("textarea",{id:"rejection-reason","onUpdate:modelValue":i[7]||(i[7]=o=>f.value=o),rows:"4",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a clear reason for rejecting this request...",required:""},null,512),[[_e,f.value]]),i[29]||(i[29]=e("p",{class:"text-xs text-gray-500 mt-1"}," This reason will be sent to the employee and recorded in the system. ",-1))])])])])]),e("div",To,[e("button",{onClick:i[8]||(i[8]=(...o)=>S.confirmRejection&&S.confirmRejection(...o)),disabled:!f.value.trim(),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Reject Request ",8,Co),e("button",{onClick:h,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):B("",!0),(Q=t.birthdayData)!=null&&Q.currentUserBirthday||s.value?(r(),H(Oe,{key:3,show:s.value,employee:((ee=t.birthdayData)==null?void 0:ee.currentUserBirthday)||{id:((te=(he=d(c))==null?void 0:he.employee)==null?void 0:te.id)||1,user:{name:((ye=d(c))==null?void 0:ye.name)||"Test User",email:((de=d(c))==null?void 0:de.email)||"test@example.com"},job_title:((ve=(be=d(c))==null?void 0:be.employee)==null?void 0:ve.job_title)||"Employee",department:null,age:25},onClose:le},null,8,["show","employee"])):B("",!0)]}),_:1}))}};export{Lo as default};
