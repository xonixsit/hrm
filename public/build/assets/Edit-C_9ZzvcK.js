import{x as Q,f as p,Q as C,g as E,o as c,h as d,k as l,c as m,i as _,a as t,t as u,u as s,F as G,r as J,n as M,s as K,w as v,b,j as U}from"./app-DR_ix-lY.js";import{A as W}from"./AuthenticatedLayout-B1DzlXOA.js";import{u as X}from"./useAuth-Cy_oA2y9.js";import{P as Z}from"./PageLayout-1MlLNOda.js";import{H as ee}from"./HorizontalCalendar-BUMYCa3D.js";import{F as te}from"./FormLayout-DGSDdCiK.js";import{F as h}from"./FormSection-UZK3hJRW.js";import{F as g}from"./FormField-Db3A077x.js";import{m as ae,p as re,A as se,U as oe,q as T}from"./icons-CnAyzum_.js";import{r as ne}from"./AcademicCapIcon-Xwp95Tb9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-CCvE4M3l.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-DpfWg3-c.js";import"./PageHeader-vwKMuHmu.js";import"./Icon-BMBCFm9E.js";/* empty css                                                                   */const le={key:0,class:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4"},de={class:"flex items-center"},ie={class:"text-sm text-blue-700 mt-1"},ue={key:1,class:"mb-6 bg-white shadow-sm rounded-lg border border-neutral-200"},ce={class:"p-6"},pe={class:"flex items-center space-x-4"},me={class:"flex-shrink-0"},ve={class:"h-16 w-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center"},fe={class:"text-xl font-bold text-white"},ye={class:"flex-1"},_e={class:"text-lg font-medium text-gray-900"},ge={class:"text-sm text-gray-600"},be={class:"flex items-center mt-2 space-x-4"},he={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},xe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},we={class:"bg-white shadow-sm rounded-lg border border-neutral-200"},Le={class:"space-y-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ae=["onClick"],De={class:"flex items-center space-x-3"},Se={class:"flex-1"},qe={class:"text-sm font-medium text-neutral-900"},Ce={class:"text-xs text-neutral-500 mt-1"},Ee={key:0,class:"flex-shrink-0"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ue=["min"],Te=["min"],Fe={key:0,class:"mt-4"},$e={class:"text-xs text-neutral-500 mt-1"},Pe={class:"space-y-4 mt-4"},Ne={class:"flex items-center"},Re={class:"flex items-center"},tt={__name:"Edit",props:{leave:{type:Object,required:!0},leaveTypes:{type:Array,default:()=>[]}},setup(x){const o=x,{hasAnyRole:w}=X(),L=r=>{if(!r)return"";const e=new Date(r);if(isNaN(e.getTime()))return"";const i=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),y=String(e.getDate()).padStart(2,"0");return`${i}-${f}-${y}`},a=Q({leave_type_id:o.leave.leave_type_id,from_date:L(o.leave.from_date),to_date:L(o.leave.to_date),reason:o.leave.reason,is_emergency:o.leave.is_emergency||!1,is_half_day:o.leave.is_half_day||!1}),F=p(()=>w(["Admin","HR","Manager"])),k=p(()=>{var r;return w(["Admin","HR"])&&((r=o.leave.employee)==null?void 0:r.user)}),$=p(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Leave Management",href:route("leaves.index")},{label:`Request #${o.leave.id}`,href:route("leaves.show",o.leave.id)},{label:"Edit",current:!0}]),P=p(()=>[{id:"back-to-details",label:"Back to Details",icon:"arrow-left",variant:"secondary",handler:()=>C.visit(route("leaves.show",o.leave.id))}]),A=p(()=>new Date().toISOString().split("T")[0]),N=p(()=>{const r=[{id:"cancel",label:"Cancel",variant:"secondary",type:"button"},{id:"submit",label:"Update Request",variant:"primary",type:"submit",loadingLabel:"Updating..."}];return F.value&&o.leave.status==="pending"&&r.push({id:"update-and-approve",label:"Update & Approve",variant:"success",type:"button",loadingLabel:"Updating & Approving..."}),r}),R=r=>({"Annual Leave":T,"Sick Leave":oe,"Personal Leave":se,"Study Leave":ne,"Emergency Leave":re})[r]||T,V=r=>({"Annual Leave":"w-8 h-8 p-1.5 bg-blue-100 text-blue-600 rounded-lg","Sick Leave":"w-8 h-8 p-1.5 bg-red-100 text-red-600 rounded-lg","Personal Leave":"w-8 h-8 p-1.5 bg-green-100 text-green-600 rounded-lg","Study Leave":"w-8 h-8 p-1.5 bg-purple-100 text-purple-600 rounded-lg","Emergency Leave":"w-8 h-8 p-1.5 bg-orange-100 text-orange-600 rounded-lg"})[r]||"w-8 h-8 p-1.5 bg-neutral-100 text-neutral-600 rounded-lg",I=r=>({"Annual Leave":"Planned vacation or personal time off","Sick Leave":"Medical leave for illness or health issues","Personal Leave":"Personal matters and family obligations","Study Leave":"Educational purposes and training","Emergency Leave":"Urgent and unexpected situations"})[r]||"Standard leave request",j=r=>{const e="p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md",i=a.leave_type_id===r.id?"border-primary-500 bg-primary-50":"border-neutral-200 bg-white hover:border-neutral-300";return`${e} ${i}`},B=r=>!r||typeof r!="string"?"--":r.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),H=()=>{if(!a.leave_type_id)return"Leave";const r=o.leaveTypes.find(e=>e.id===a.leave_type_id);return(r==null?void 0:r.name)||"Leave"},z=r=>{a.leave_type_id=r.id},D=()=>{if(a.from_date&&a.to_date){const r=new Date(a.from_date);new Date(a.to_date)<r&&(a.to_date=a.from_date)}},O=r=>{switch(r.id){case"cancel":window.history.back();break;case"submit":S();break;case"update-and-approve":Y();break}},S=()=>{a.put(route("leaves.update",o.leave.id),{onSuccess:()=>{}})},Y=()=>{if(confirm("Are you sure you want to update and approve this leave request?")){const r={...a.data(),comments:"Updated and approved by admin"};C.put(route("leaves.update-and-approve",o.leave.id),r,{onSuccess:()=>{},onError:e=>{Object.keys(e).forEach(i=>{a.setError(i,e[i])})}})}};return(r,e)=>(c(),E(W,null,{default:d(()=>[l(Z,{title:"Edit Leave Request",subtitle:"Update your leave request details",breadcrumbs:$.value,actions:P.value},{default:d(()=>{var i,f,y;return[k.value?(c(),m("div",le,[t("div",de,[e[6]||(e[6]=t("svg",{class:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[5]||(e[5]=t("h3",{class:"text-sm font-medium text-blue-800"},"Admin Edit Mode",-1)),t("p",ie," You are editing "+u(((f=(i=o.leave.employee)==null?void 0:i.user)==null?void 0:f.name)||"an employee")+"'s leave request. You can modify the details and approve it in one action. ",1)])])])):_("",!0),k.value&&((y=o.leave.employee)!=null&&y.user)?(c(),m("div",ue,[t("div",ce,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Employee Information",-1)),t("div",pe,[t("div",me,[t("div",ve,[t("span",fe,u(B(o.leave.employee.user.name)),1)])]),t("div",ye,[t("h4",_e,u(o.leave.employee.user.name),1),t("p",ge,u(o.leave.employee.user.email),1),t("div",be,[t("span",he," Employee ID: "+u(o.leave.employee.employee_code||"N/A"),1),t("span",xe," Department: "+u(o.leave.employee.department||"N/A"),1)])])])])])):_("",!0),t("div",we,[l(te,{title:"Update Leave Request",description:"Modify the details of your leave request",errors:s(a).errors,"is-submitting":s(a).processing,actions:N.value,variant:"card",onSubmit:S,onAction:O},{default:d(()=>[t("div",Le,[l(h,{title:"Leave Type",description:"Select the type of leave you want to request"},{default:d(()=>[l(g,{label:"Leave Type",error:s(a).errors.leave_type_id,required:""},{default:d(()=>[t("div",ke,[(c(!0),m(G,null,J(x.leaveTypes,n=>(c(),m("div",{key:n.id,class:M(j(n)),onClick:q=>z(n)},[t("div",De,[t("div",{class:M(V(n.name))},[(c(),E(K(R(n.name)),{class:"w-5 h-5"}))],2),t("div",Se,[t("h3",qe,u(n.name),1),t("p",Ce,u(I(n.name)),1)]),s(a).leave_type_id===n.id?(c(),m("div",Ee,[l(s(ae),{class:"w-5 h-5 text-primary-600"})])):_("",!0)])],10,Ae))),128))])]),_:1},8,["error"])]),_:1}),l(h,{title:"Leave Dates",description:"Choose your leave start and end dates"},{default:d(()=>[t("div",Me,[l(g,{label:"Start Date",error:s(a).errors.from_date,required:""},{default:d(()=>[v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s(a).from_date=n),type:"date",min:A.value,class:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onChange:D},null,40,Ue),[[b,s(a).from_date]])]),_:1},8,["error"]),l(g,{label:"End Date",error:s(a).errors.to_date,required:""},{default:d(()=>[v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>s(a).to_date=n),type:"date",min:s(a).from_date||A.value,class:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onChange:D},null,40,Te),[[b,s(a).to_date]])]),_:1},8,["error"])]),s(a).from_date&&s(a).to_date?(c(),m("div",Fe,[l(ee,{"start-date":s(a).from_date,"end-date":s(a).to_date,"leave-type":H(),status:o.leave.status||"pending"},null,8,["start-date","end-date","leave-type","status"])])):_("",!0)]),_:1}),l(h,{title:"Leave Details",description:"Provide a reason for your leave request"},{default:d(()=>[l(g,{label:"Reason for Leave",error:s(a).errors.reason,required:""},{default:d(()=>{var n;return[v(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=q=>s(a).reason=q),rows:"4",placeholder:"Please provide a detailed reason for your leave request...",class:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none"},null,512),[[b,s(a).reason]]),t("p",$e,u(((n=s(a).reason)==null?void 0:n.length)||0)+"/500 characters ",1)]}),_:1},8,["error"]),t("div",Pe,[t("div",Ne,[v(t("input",{id:"emergency","onUpdate:modelValue":e[3]||(e[3]=n=>s(a).is_emergency=n),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"},null,512),[[U,s(a).is_emergency]]),e[8]||(e[8]=t("label",{for:"emergency",class:"ml-2 block text-sm text-neutral-900"}," This is an emergency leave request ",-1))]),t("div",Re,[v(t("input",{id:"half-day","onUpdate:modelValue":e[4]||(e[4]=n=>s(a).is_half_day=n),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"},null,512),[[U,s(a).is_half_day]]),e[9]||(e[9]=t("label",{for:"half-day",class:"ml-2 block text-sm text-neutral-900"}," Half day leave ",-1))])])]),_:1})])]),_:1},8,["errors","is-submitting","actions"])])]}),_:1},8,["breadcrumbs","actions"])]),_:1}))}};export{tt as default};
