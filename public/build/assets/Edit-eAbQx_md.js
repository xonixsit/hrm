import{x as V,f as n,Q as p,g as B,o as b,h as l,k as o,a as s,u as r,c as U,F as A,r as S,n as L,t as f}from"./app-CUmIJloT.js";import{u as E}from"./useNotifications-BgX1bcQP.js";import{A as C}from"./AuthenticatedLayout-CN8yW47C.js";import{P as q}from"./PageHeader-BtI9uEpt.js";import{F as N}from"./FormLayout-jVn87LeC.js";import{F as P}from"./FormSection-B8hNqOJ_.js";import{F as c}from"./FormField-C831YVMX.js";import{B as h}from"./BaseInput-DElv0A9l.js";import{B as R}from"./BaseTextarea-dFyYoOJL.js";import{B as $}from"./BaseSelect-BLbp7veE.js";import"./useAuth-PJAy4uSq.js";import"./icons-jZvIvXHt.js";import"./UsersIcon-D4lZiVrG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DrIt1t-N.js";/* empty css                                                                  *//* empty css                                                                   */const D={class:"max-w-4xl mx-auto"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={class:"space-y-3"},z={class:"flex items-center space-x-2"},H={class:"flex space-x-1"},I=["onClick","disabled"],O={class:"text-sm text-neutral-600 ml-2"},j={class:"text-xs text-neutral-500 mt-1"},ne={__name:"Edit",props:{feedback:{type:Object,required:!0},users:{type:Array,default:()=>[]}},setup(g){const i=g,{showNotification:m}=E(),e=V({reviewee_id:i.feedback.reviewee_id,period:i.feedback.period||"",comments:i.feedback.comments||"",rating:i.feedback.rating||null}),k=n(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Feedbacks",href:route("feedbacks.index")},{label:`Feedback #${i.feedback.id}`,href:route("feedbacks.show",i.feedback.id)},{label:"Edit",current:!0}]),v=n(()=>[{id:"view",label:"View Feedback",icon:"eye",variant:"secondary",handler:()=>p.visit(route("feedbacks.show",i.feedback.id))}]),x=n(()=>[{id:"cancel",label:"Cancel",variant:"secondary",handler:()=>p.visit(route("feedbacks.show",i.feedback.id))},{id:"save",label:"Update Feedback",type:"submit",variant:"primary",loadingLabel:"Updating...",disabled:!e.reviewee_id||!e.period}]),w=n(()=>i.users.map(d=>({value:d.id,label:d.name,description:d.email}))),y=d=>{d.handler&&d.handler()},_=d=>{d.handler&&d.handler()},F=()=>{e.put(route("feedbacks.update",i.feedback.id),{onSuccess:()=>{m({type:"success",title:"Feedback Updated",message:"The feedback has been successfully updated."})},onError:()=>{m({type:"error",title:"Update Failed",message:"Please check the form for errors and try again."})}})};return(d,t)=>(b(),B(C,null,{header:l(()=>t[4]||(t[4]=[s("h2",{class:"font-semibold text-xl text-neutral-800 leading-tight"}," Edit Feedback ",-1)])),default:l(()=>[o(q,{title:"Edit Feedback",subtitle:"Update feedback details",breadcrumbs:k.value,actions:v.value,onAction:y},null,8,["breadcrumbs","actions"]),s("div",D,[o(N,{title:"Feedback Information",description:"Update the feedback details and rating",actions:x.value,errors:r(e).errors,"is-submitting":r(e).processing,variant:"card",onSubmit:F,onAction:_},{default:l(()=>[o(P,{title:"Feedback Details",description:"Essential feedback information"},{default:l(()=>[s("div",Q,[o(c,{label:"Reviewee",required:"",error:r(e).errors.reviewee_id,description:"Select the person this feedback is about"},{default:l(()=>[o($,{modelValue:r(e).reviewee_id,"onUpdate:modelValue":t[0]||(t[0]=a=>r(e).reviewee_id=a),options:w.value,placeholder:"Select reviewee",error:!!r(e).errors.reviewee_id,disabled:r(e).processing,required:"",searchable:""},null,8,["modelValue","options","error","disabled"])]),_:1},8,["error"]),o(c,{label:"Period",required:"",error:r(e).errors.period,description:"The time period this feedback covers"},{default:l(()=>[o(h,{modelValue:r(e).period,"onUpdate:modelValue":t[1]||(t[1]=a=>r(e).period=a),type:"text",placeholder:"e.g., Q1 2024, January 2024",error:!!r(e).errors.period,disabled:r(e).processing,required:""},null,8,["modelValue","error","disabled"])]),_:1},8,["error"])]),o(c,{label:"Rating",error:r(e).errors.rating,description:"Rate the performance (1-5 stars)"},{default:l(()=>[s("div",T,[s("div",z,[s("div",H,[(b(),U(A,null,S(5,a=>s("button",{key:a,type:"button",onClick:u=>r(e).rating=a,class:L(["w-8 h-8 transition-colors duration-200",a<=(r(e).rating||0)?"text-yellow-400 hover:text-yellow-500":"text-neutral-300 hover:text-yellow-300"]),disabled:r(e).processing},t[5]||(t[5]=[s("svg",{class:"w-full h-full fill-current",viewBox:"0 0 24 24"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)]),10,I)),64))]),s("span",O,f(r(e).rating?`${r(e).rating} star${r(e).rating!==1?"s":""}`:"No rating"),1)]),o(h,{modelValue:r(e).rating,"onUpdate:modelValue":t[2]||(t[2]=a=>r(e).rating=a),type:"number",min:"1",max:"5",placeholder:"Rating (1-5)",error:!!r(e).errors.rating,disabled:r(e).processing,class:"w-32"},null,8,["modelValue","error","disabled"])])]),_:1},8,["error"]),o(c,{label:"Comments",error:r(e).errors.comments,description:"Provide detailed feedback and observations"},{default:l(()=>{var a;return[o(R,{modelValue:r(e).comments,"onUpdate:modelValue":t[3]||(t[3]=u=>r(e).comments=u),placeholder:"Share your feedback, observations, and suggestions for improvement...",rows:"6",error:!!r(e).errors.comments,disabled:r(e).processing},null,8,["modelValue","error","disabled"]),s("p",j,f(((a=r(e).comments)==null?void 0:a.length)||0)+"/1000 characters ",1)]}),_:1},8,["error"])]),_:1})]),_:1},8,["actions","errors","is-submitting"])])]),_:1}))}};export{ne as default};
