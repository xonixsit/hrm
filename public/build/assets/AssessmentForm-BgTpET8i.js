import{c as o,o as a,a as e,e as k,f as w,i as y,n as D,l as se,t as u,F as N,r as H,g as ae,u as h,k as f,y as he,z as fe,s as de,B as Se,h as V,w as xe,p as _e,T as we,A as Re,d as ve,q as Ae,x as Le,L as Ve,S as Ee,Q as Ie}from"./app-BuLCAOIN.js";import{A as Ue}from"./AuthenticatedLayout-C1eC7qg2.js";import{F as me}from"./FormField-BrVEDZvc.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as $e,p as ce,v as je,h as pe,b as ze,r as Oe,z as Pe,w as Ce,t as qe,m as Ne,e as ue,n as Fe,k as He,A as We,q as Ge,i as ye}from"./icons-8pvN06gq.js";import{r as Ke}from"./ArrowDownTrayIcon-BzudLCqV.js";import{r as Me}from"./DocumentIcon-_8y_avM-.js";import{R as Te}from"./RatingDisplay-DXA1e9Uk.js";import{B as Ze}from"./BaseTextarea-pMAOhNAt.js";import{P as Be}from"./PrimaryButton-BNASrEkI.js";import{_ as be}from"./SecondaryButton-DxVXLYFr.js";import{r as De}from"./ChartBarIcon-n9W1mTkT.js";import{_ as Ye}from"./ConfirmationModal-CqeAU7-K.js";import{Y as Je,h as ke,G as Qe,V as Xe,S as et}from"./transition-7h20nJE_.js";import{r as tt}from"./ArrowPathIcon-Umq0Oh6_.js";import"./useAuth-BogRjwOj.js";import"./useAccessibility-SnrjGO_f.js";import"./Icon-BJDHKV82.js";function st(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linejoin":"round",d:"M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z"})])}function at(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function nt(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function ot(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.248 20.246H9.05m0 0h3.696m-3.696 0 5.893-16.502m0 0h-3.697m3.697 0h3.803"})])}function lt(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.242 5.992h12m-12 6.003H20.24m-12 5.999h12M4.117 7.495v-3.75H2.99m1.125 3.75H2.99m1.125 0H5.24m-1.92 2.577a1.125 1.125 0 1 1 1.591 1.59l-1.83 1.83h2.16M2.99 15.745h1.125a1.125 1.125 0 0 1 0 2.25H3.74m0-.002h.375a1.125 1.125 0 0 1 0 2.25H2.99"})])}function rt(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function it(s,T){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.995 3.744v7.5a6 6 0 1 1-12 0v-7.5m-2.25 16.502h16.5"})])}const ct=["for"],dt={key:0,class:"text-error-500 ml-1"},ut={key:1,class:"rating-guidelines mb-4"},mt={class:"bg-neutral-50 rounded-lg p-4 border border-neutral-200"},vt={class:"space-y-2"},pt={class:"flex-shrink-0"},ht={class:"flex-1"},ft={class:"text-sm font-medium text-neutral-900"},gt={key:0,class:"text-xs text-neutral-600 mt-1"},yt={class:"rating-options"},bt=["id","name","value","checked","disabled","required","aria-describedby","aria-invalid","onChange"],xt=["for","title","onMouseenter"],_t={class:"rating-text"},wt={key:0,class:"rating-value"},$t={key:0,class:"selected-rating-display mt-4"},Ct={class:"flex items-center justify-center space-x-2 p-3 bg-primary-50 rounded-lg border border-primary-200"},kt={class:"text-sm font-medium text-primary-900"},St={key:2,class:"comments-notice mt-3"},At={class:"flex items-start space-x-2 p-3 bg-amber-50 rounded-lg border border-amber-200"},Ft={class:"flex-1"},Mt={class:"text-xs text-amber-700 mt-1"},Tt={key:3,class:"mt-2"},Bt=["id"],Dt={key:4,class:"mt-2"},Rt=["id"],Lt={__name:"RatingInput",props:{modelValue:{type:[Number,String],default:null},label:{type:String,default:""},guidelines:{type:[Object,Array],default:null},showGuidelines:{type:Boolean,default:!0},displayType:{type:String,default:"stars",validator:s=>["stars","numbers","both"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},orientation:{type:String,default:"horizontal",validator:s=>["horizontal","vertical"].includes(s)},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},showValues:{type:Boolean,default:!1},showSelectedRating:{type:Boolean,default:!1},requireCommentsForExtremes:{type:Boolean,default:!0},customRatingOptions:{type:Array,default:null},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","change","focus","blur","hover"],setup(s,{expose:T,emit:B}){const t=s,$=B,p=k([]),g=k(null),F=k(!1),S=w(()=>`rating-input-${Math.random().toString(36).substr(2,9)}`),i=[{value:1,label:"Poor",description:"Performance significantly below expectations"},{value:2,label:"Needs Improvement",description:"Performance below expectations, requires development"},{value:3,label:"Meets Expectations",description:"Performance meets job requirements and standards"},{value:4,label:"Exceeds Expectations",description:"Performance consistently above expectations"},{value:5,label:"Outstanding",description:"Exceptional performance, significantly exceeds expectations"}],M=w(()=>t.customRatingOptions||i),G=w(()=>t.guidelines?Array.isArray(t.guidelines)?t.guidelines:Object.entries(t.guidelines).map(([v,_])=>({rating:parseInt(v),label:_.label||_,description:_.description||null})).sort((v,_)=>v.rating-_.rating):[]),E=w(()=>{if(!t.requireCommentsForExtremes||!t.modelValue)return!1;const v=parseInt(t.modelValue);return v<=2||v>=4}),L=w(()=>!!t.errorMessage),Y=w(()=>{const v=[];return L.value&&v.push(`${S.value}-error`),t.helpText&&!L.value&&v.push(`${S.value}-help`),v.length>0?v.join(" "):null}),I=w(()=>["rating-input-wrapper",`rating-input--${t.size}`,`rating-input--${t.orientation}`,{"rating-input--disabled":t.disabled,"rating-input--error":L.value,"rating-input--focused":F.value},t.class]),W=w(()=>["block text-sm font-medium mb-2",{"text-neutral-700":!L.value&&!t.disabled,"text-error-500":L.value,"text-neutral-500":t.disabled}]),ne=w(()=>["rating-scale",{"rating-scale--horizontal":t.orientation==="horizontal","rating-scale--vertical":t.orientation==="vertical"}]),oe=v=>["rating-option",{"rating-option--selected":t.modelValue===v,"rating-option--hovered":g.value===v,"rating-option--disabled":t.disabled}],le=v=>{const _=["rating-button","flex items-center justify-center rounded-full transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"],d={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},m=()=>{if(t.disabled)return["bg-neutral-100 cursor-not-allowed"];const c=t.modelValue===v,C=g.value===v;return c?["bg-primary-100 border-2 border-primary-500 text-primary-700"]:C?["bg-primary-50 border-2 border-primary-300 text-primary-600"]:["bg-white border-2 border-neutral-300 text-neutral-600 hover:border-neutral-400 hover:bg-neutral-50"]};return[..._,d[t.size],...m()]},re=v=>{const _={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d=t.modelValue===v,m=g.value===v;return[_[t.size],"transition-colors duration-200",{"text-primary-600":d||m,"text-neutral-400":!d&&!m&&!t.disabled,"text-neutral-300":t.disabled}]},U=v=>["font-semibold transition-colors duration-200",{"text-primary-700":t.modelValue===v,"text-primary-600":g.value===v,"text-neutral-600":t.modelValue!==v&&g.value!==v&&!t.disabled,"text-neutral-400":t.disabled}],J=v=>["rating-label","text-center mt-2",{"text-primary-700 font-medium":t.modelValue===v,"text-neutral-600":t.modelValue!==v&&!t.disabled,"text-neutral-400":t.disabled}],K=v=>`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-semibold ${{1:"bg-red-100 text-red-800",2:"bg-orange-100 text-orange-800",3:"bg-yellow-100 text-yellow-800",4:"bg-green-100 text-green-800",5:"bg-emerald-100 text-emerald-800"}[v]||"bg-neutral-100 text-neutral-800"}`,Q=()=>{const v=M.value.find(_=>_.value===t.modelValue);return v?`${v.value} - ${v.label}`:""},j=()=>{const v=parseInt(t.modelValue);return v<=2?"Please provide detailed comments explaining areas for improvement and specific examples.":v>=4?"Please provide detailed comments highlighting exceptional performance and specific achievements.":"Please provide detailed comments to support this rating."},z=v=>{if(t.disabled)return;const _=parseInt(v);$("update:modelValue",_),$("change",_)},X=v=>{t.disabled||(g.value=v,$("hover",v))},O=()=>{g.value=null,$("hover",null)},ee=()=>{F.value=!0,$("focus")},te=()=>{F.value=!1,$("blur")};return T({focus:()=>{var _;const v=(_=p.value)==null?void 0:_[0];v&&v.focus()},blur:()=>{var _;const v=(_=p.value)==null?void 0:_.find(d=>d===document.activeElement);v&&v.blur()},requiresComments:E}),(v,_)=>(a(),o("div",{class:D(["rating-input-wrapper",I.value])},[s.label?(a(),o("label",{key:0,for:S.value,class:D(W.value)},[se(u(s.label)+" ",1),s.required?(a(),o("span",dt,"*")):y("",!0)],10,ct)):y("",!0),s.guidelines&&s.showGuidelines?(a(),o("div",ut,[e("div",mt,[_[0]||(_[0]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Rating Guidelines",-1)),e("div",vt,[(a(!0),o(N,null,H(G.value,(d,m)=>(a(),o("div",{key:m,class:"flex items-start space-x-3"},[e("div",pt,[e("span",{class:D([K(d.rating),"rating-badge"])},u(d.rating),3)]),e("div",ht,[e("div",ft,u(d.label),1),d.description?(a(),o("div",gt,u(d.description),1)):y("",!0)])]))),128))])])])):y("",!0),e("div",{class:D(["rating-scale",ne.value])},[e("div",yt,[(a(!0),o(N,null,H(M.value,d=>(a(),o("div",{key:d.value,class:D(["rating-option",oe(d.value)])},[e("input",{id:`${S.value}-${d.value}`,ref_for:!0,ref_key:"inputRefs",ref:p,type:"radio",name:S.value,value:d.value,checked:s.modelValue===d.value,disabled:s.disabled,required:s.required,"aria-describedby":Y.value,"aria-invalid":L.value,class:"sr-only",onChange:m=>z(d.value),onFocus:ee,onBlur:te},null,40,bt),e("label",{for:`${S.value}-${d.value}`,class:D(["rating-button",le(d.value)]),title:d.label,onMouseenter:m=>X(d.value),onMouseleave:O},[s.displayType==="stars"?(a(),ae(h($e),{key:0,class:D([re(d.value),"rating-icon"])},null,8,["class"])):(a(),o("span",{key:1,class:D(["rating-number",U(d.value)])},u(d.value),3))],42,xt),e("div",{class:D(["rating-label",J(d.value)])},[e("span",_t,u(d.label),1),s.showValues?(a(),o("span",wt,"("+u(d.value)+")",1)):y("",!0)],2)],2))),128))]),s.modelValue&&s.showSelectedRating?(a(),o("div",$t,[e("div",Ct,[f(h($e),{class:"w-5 h-5 text-primary-600"}),e("span",kt," Selected: "+u(Q()),1)])])):y("",!0)],2),E.value&&s.modelValue?(a(),o("div",St,[e("div",At,[f(h(ce),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e("div",Ft,[_[1]||(_[1]=e("p",{class:"text-sm font-medium text-amber-900"},"Comments Required",-1)),e("p",Mt,u(j()),1)])])])):y("",!0),s.errorMessage?(a(),o("div",Tt,[e("p",{id:`${S.value}-error`,class:"text-sm text-error-500",role:"alert","aria-live":"polite"},u(s.errorMessage),9,Bt)])):y("",!0),s.helpText&&!s.errorMessage?(a(),o("div",Dt,[e("p",{id:`${S.value}-help`,class:"text-sm text-neutral-500"},u(s.helpText),9,Rt)])):y("",!0)],2))}},Vt=ge(Lt,[["__scopeId","data-v-7eb4cdf7"]]),Et={key:0,class:"editor-toolbar"},It={class:"toolbar-group"},Ut=["onClick","title"],jt={class:"toolbar-group"},zt=["onClick","title"],Ot={class:"toolbar-group"},Pt=["contenteditable","aria-label","aria-describedby","aria-invalid"],qt={key:1,class:"editor-footer"},Nt={class:"footer-left"},Ht={key:0,class:"text-sm text-error-500",role:"alert"},Wt={key:1,class:"text-sm text-neutral-500"},Gt={__name:"RichTextEditor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:"Enter text..."},minLength:{type:Number,default:0},maxLength:{type:Number,default:null},showCharacterCount:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},allowedFormats:{type:Array,default:()=>["bold","italic","underline","bulletList","orderedList"]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","focus","blur","change"],setup(s,{expose:T,emit:B}){const t=s,$=B,p=k(null),g=k(!1),F=w(()=>`rich-editor-${Math.random().toString(36).substr(2,9)}`),S=w(()=>[{command:"bold",icon:st,title:"Bold",value:null},{command:"italic",icon:ot,title:"Italic",value:null},{command:"underline",icon:it,title:"Underline",value:null}].filter(c=>t.allowedFormats.includes(c.command))),i=w(()=>[{command:"insertUnorderedList",icon:je,title:"Bullet List"},{command:"insertOrderedList",icon:lt,title:"Numbered List"}].filter(c=>c.command==="insertUnorderedList"&&t.allowedFormats.includes("bulletList")||c.command==="insertOrderedList"&&t.allowedFormats.includes("orderedList"))),M=w(()=>p.value&&p.value.textContent||""),G=w(()=>M.value.length),E=w(()=>t.maxLength?G.value>t.maxLength*.8:!1),L=w(()=>t.maxLength?G.value>t.maxLength:!1),Y=w(()=>!g.value&&(!t.modelValue||t.modelValue.trim()==="")),I=w(()=>!!t.errorMessage),W=w(()=>{const c=[];return I.value&&c.push(`${F.value}-error`),t.helpText&&!I.value&&c.push(`${F.value}-help`),c.length>0?c.join(" "):null}),ne=w(()=>["rich-text-editor-wrapper",`rich-text-editor--${t.size}`,{"rich-text-editor--disabled":t.disabled,"rich-text-editor--readonly":t.readonly,"rich-text-editor--error":I.value,"rich-text-editor--focused":g.value},t.class]),oe=w(()=>["editor-container",{"editor-container--focused":g.value,"editor-container--error":I.value}]),le=w(()=>{const c=["editor-content","block w-full min-h-[120px] p-3 text-sm leading-6","focus:outline-none"],C={sm:"min-h-[80px] p-2 text-xs",md:"min-h-[120px] p-3 text-sm",lg:"min-h-[160px] p-4 text-base"};return[...c,C[t.size]]}),re=w(()=>["text-xs font-medium flex-shrink-0",{"text-neutral-500":!E.value&&!L.value,"text-warning-600":E.value&&!L.value,"text-error-600":L.value}]),U=(c,C=null)=>{var b;t.disabled||t.readonly||(document.execCommand(c,!1,C),(b=p.value)==null||b.focus(),O())},J=()=>{var c;t.disabled||t.readonly||(document.execCommand("removeFormat",!1,null),(c=p.value)==null||c.focus(),O())},K=c=>{const C=["toolbar-button","flex items-center justify-center w-8 h-8 rounded transition-colors","hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-primary-500"],b=document.queryCommandState&&document.queryCommandState(c);return[...C,{"bg-primary-100 text-primary-700":b,"text-neutral-600":!b}]},Q=()=>{var c;(c=p.value)==null||c.focus()},j=()=>{var c;return((c=p.value)==null?void 0:c.innerHTML)||""},z=c=>{p.value&&(p.value.innerHTML=c)},X=()=>{var c;return((c=p.value)==null?void 0:c.textContent)||""},O=()=>{const c=j(),C=X();t.maxLength&&C.length>t.maxLength||($("update:modelValue",c),$("change",{html:c,text:C}))},ee=()=>{g.value=!0,$("focus")},te=()=>{g.value=!1,$("blur")},Z=c=>{if(c.ctrlKey||c.metaKey)switch(c.key){case"b":c.preventDefault(),U("bold");break;case"i":c.preventDefault(),U("italic");break;case"u":c.preventDefault(),U("underline");break}t.maxLength&&M.value.length>=t.maxLength&&!["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(c.key)&&!c.ctrlKey&&!c.metaKey&&c.preventDefault()},P=c=>{if(t.disabled||t.readonly){c.preventDefault();return}const C=(c.clipboardData||window.clipboardData).getData("text/plain");if(t.maxLength){const b=M.value.length,ie=C.length;if(b+ie>t.maxLength){c.preventDefault();const r=t.maxLength-b;if(r>0){const l=C.substring(0,r);document.execCommand("insertText",!1,l)}return}}c.preventDefault(),document.execCommand("insertText",!1,C)};return T({focus:()=>{Q()},blur:()=>{var c;(c=p.value)==null||c.blur()},insertText:c=>{t.disabled||t.readonly||(document.execCommand("insertText",!1,c),O())},selectAll:()=>{if(p.value){const c=document.createRange();c.selectNodeContents(p.value);const C=window.getSelection();C.removeAllRanges(),C.addRange(c)}},getHtmlContent:j,setHtmlContent:z,getTextContent:X,editorRef:p}),he(()=>t.modelValue,c=>{p.value&&j()!==c&&z(c||"")}),fe(()=>{t.modelValue&&z(t.modelValue)}),(c,C)=>(a(),o("div",{class:D(["rich-text-editor-wrapper",ne.value])},[s.showToolbar?(a(),o("div",Et,[e("div",It,[(a(!0),o(N,null,H(S.value,b=>(a(),o("button",{key:b.command,onClick:ie=>U(b.command,b.value),class:D(K(b.command)),title:b.title,type:"button",tabindex:"-1"},[(a(),ae(de(b.icon),{class:"w-4 h-4"}))],10,Ut))),128))]),C[0]||(C[0]=e("div",{class:"toolbar-divider"},null,-1)),e("div",jt,[(a(!0),o(N,null,H(i.value,b=>(a(),o("button",{key:b.command,onClick:ie=>U(b.command),class:D(K(b.command)),title:b.title,type:"button",tabindex:"-1"},[(a(),ae(de(b.icon),{class:"w-4 h-4"}))],10,zt))),128))]),C[1]||(C[1]=e("div",{class:"toolbar-divider"},null,-1)),e("div",Ot,[e("button",{onClick:J,class:"toolbar-button",title:"Clear Formatting",type:"button",tabindex:"-1"},[f(h(pe),{class:"w-4 h-4"})])])])):y("",!0),e("div",{class:D(["editor-container",oe.value])},[e("div",{ref_key:"editorRef",ref:p,contenteditable:!s.disabled&&!s.readonly,class:D(le.value),onInput:O,onFocus:ee,onBlur:te,onKeydown:Z,onPaste:P,"aria-label":s.label||"Rich text editor","aria-describedby":W.value,"aria-invalid":I.value,role:"textbox","aria-multiline":"true"},null,42,Pt),Y.value?(a(),o("div",{key:0,class:"editor-placeholder",onClick:Q},u(s.placeholder),1)):y("",!0)],2),s.showCharacterCount||s.helpText||s.errorMessage?(a(),o("div",qt,[e("div",Nt,[s.errorMessage?(a(),o("p",Ht,u(s.errorMessage),1)):s.helpText?(a(),o("p",Wt,u(s.helpText),1)):y("",!0)]),s.showCharacterCount?(a(),o("div",{key:0,class:D(re.value)},u(G.value)+u(s.maxLength?`/${s.maxLength}`:""),3)):y("",!0)])):y("",!0)],2))}},Kt=ge(Gt,[["__scopeId","data-v-339be779"]]),Zt={class:"fixed inset-0 z-50 overflow-y-auto px-4 py-6 sm:px-0","scroll-region":""},Yt={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(s,{emit:T}){const B=s,t=T,$=k(),p=k(B.show);he(()=>B.show,()=>{var i;B.show?(document.body.style.overflow="hidden",p.value=!0,(i=$.value)==null||i.showModal()):(document.body.style.overflow="",setTimeout(()=>{var M;(M=$.value)==null||M.close(),p.value=!1},200))});const g=()=>{B.closeable&&t("close")},F=i=>{i.key==="Escape"&&(i.preventDefault(),B.show&&g())};fe(()=>document.addEventListener("keydown",F)),Se(()=>{document.removeEventListener("keydown",F),document.body.style.overflow=""});const S=w(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[B.maxWidth]);return(i,M)=>(a(),o("dialog",{class:"z-50 m-0 min-h-full min-w-full overflow-y-auto bg-transparent backdrop:bg-transparent",ref_key:"dialog",ref:$},[e("div",Zt,[f(we,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:V(()=>[xe(e("div",{class:"fixed inset-0 transform transition-all",onClick:g},M[0]||(M[0]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)]),512),[[_e,s.show]])]),_:1}),f(we,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:V(()=>[xe(e("div",{class:D(["mb-6 transform overflow-hidden rounded-lg bg-white shadow-xl transition-all sm:mx-auto sm:w-full",S.value])},[p.value?Re(i.$slots,"default",{key:0}):y("",!0)],2),[[_e,s.show]])]),_:3})])],512))}},Jt=["multiple","accept","disabled"],Qt={class:"upload-content"},Xt={class:"upload-icon"},es={class:"upload-text"},ts={class:"upload-primary-text"},ss={key:0},as={class:"upload-secondary-text"},ns={key:0,class:"file-list"},os={class:"file-list-header"},ls={class:"file-list-title"},rs={class:"file-items"},is={class:"file-icon"},cs={class:"file-info"},ds=["title"],us={class:"file-meta"},ms={class:"file-size"},vs={class:"file-actions"},ps=["onClick"],hs=["onClick"],fs=["onClick"],gs={key:0,class:"file-progress"},ys={class:"progress-bar"},bs={class:"progress-text"},xs={key:1,class:"upload-errors"},_s={class:"error-header"},ws={class:"error-list"},$s={key:2,class:"upload-footer"},Cs={key:0,class:"text-sm text-error-500",role:"alert"},ks={key:1,class:"text-sm text-neutral-500"},Ss={class:"preview-modal"},As={class:"preview-header"},Fs={class:"preview-title"},Ms={class:"preview-content"},Ts=["src","alt"],Bs={__name:"FileUpload",props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},maxFiles:{type:Number,default:null},maxFileSize:{type:Number,default:10},acceptedTypes:{type:Array,default:()=>["image/*","application/pdf",".doc",".docx",".txt"]},autoUpload:{type:Boolean,default:!1},uploadUrl:{type:String,default:""},disabled:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helpText:{type:String,default:""},class:{type:[String,Array,Object],default:""}},emits:["update:modelValue","files-added","file-removed","upload-progress","upload-complete","upload-error"],setup(s,{expose:T,emit:B}){const t=s,$=B,p=k([...t.modelValue]),g=k(!1),F=k([]),S=k(null),i=k(!1),M=k(null),G=k(null),E=w(()=>t.acceptedTypes.join(",")),L=w(()=>t.maxFiles?p.value.length<t.maxFiles:!0),Y=w(()=>["file-upload-wrapper",{"file-upload--disabled":t.disabled,"file-upload--error":t.errorMessage},t.class]),I=w(()=>["upload-area","border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",{"border-neutral-300 hover:border-neutral-400":!g.value&&!t.disabled&&!t.errorMessage,"border-primary-400 bg-primary-50":g.value&&!t.disabled,"border-error-300 bg-error-50":t.errorMessage,"border-neutral-200 bg-neutral-50 cursor-not-allowed":t.disabled,"opacity-50":!L.value}]),W=()=>{const r=[];if(t.acceptedTypes.length>0){const l=t.acceptedTypes.map(n=>n==="image/*"?"Images":n==="application/pdf"?"PDF":n.startsWith(".")?n.toUpperCase().slice(1):n).join(", ");r.push(l)}return t.maxFileSize&&r.push(`up to ${t.maxFileSize}MB each`),t.maxFiles&&r.push(`maximum ${t.maxFiles} files`),r.join(" • ")},ne=r=>{if(r===0)return"0 Bytes";const l=1024,n=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(r)/Math.log(l));return parseFloat((r/Math.pow(l,x)).toFixed(2))+" "+n[x]},oe=r=>{const l=r.type||"";return l.startsWith("image/")?Pe:l.startsWith("video/")?nt:l==="application/pdf"?Ce:l.includes("text/")?Ce:Me},le=r=>["file-item",{"file-item--uploading":r.status==="uploading","file-item--error":r.status==="error","file-item--success":r.status==="success"}],re=r=>["file-status",{"text-blue-600":r==="uploading","text-error-600":r==="error","text-success-600":r==="success"}],U=r=>({uploading:"Uploading...",error:"Failed",success:"Uploaded"})[r]||"",J=r=>{var l;return(l=r.type)==null?void 0:l.startsWith("image/")},K=r=>J(r),Q=r=>r.url?r.url:r instanceof File?URL.createObjectURL(r):"",j=r=>{const l=[];return t.maxFileSize&&r.size>t.maxFileSize*1024*1024&&l.push(`${r.name} is too large (max ${t.maxFileSize}MB)`),t.acceptedTypes.length>0&&(t.acceptedTypes.some(x=>x==="image/*"?r.type.startsWith("image/"):x==="video/*"?r.type.startsWith("video/"):x==="audio/*"?r.type.startsWith("audio/"):x.startsWith(".")?r.name.toLowerCase().endsWith(x.toLowerCase()):r.type===x)||l.push(`${r.name} is not an accepted file type`)),l},z=()=>{var r;t.disabled||!L.value||(r=M.value)==null||r.click()},X=r=>{const l=Array.from(r.target.files||[]);Z(l),M.value&&(M.value.value="")},O=r=>{t.disabled||!L.value||(g.value=!0)},ee=r=>{g.value=!1},te=r=>{if(g.value=!1,t.disabled||!L.value)return;const l=Array.from(r.dataTransfer.files||[]);Z(l)},Z=r=>{F.value=[];const l=t.maxFiles?t.maxFiles-p.value.length:r.length,n=r.slice(0,l);r.length>n.length&&F.value.push(`Only ${l} more files can be added`);const x=[];n.forEach(R=>{const A=j(R);if(A.length>0)F.value.push(...A);else{const q={...R,id:Date.now()+Math.random(),status:t.autoUpload?"uploading":null,progress:0};x.push(q)}}),x.length>0&&(p.value.push(...x),c(),$("files-added",x),t.autoUpload&&t.uploadUrl&&x.forEach(R=>m(R)))},P=r=>{const l=p.value[r];p.value.splice(r,1),c(),$("file-removed",l),l.url&&l.url.startsWith("blob:")&&URL.revokeObjectURL(l.url)},v=()=>{p.value.forEach(r=>{r.url&&r.url.startsWith("blob:")&&URL.revokeObjectURL(r.url)}),p.value=[],F.value=[],c()},_=()=>{i.value=!1,S.value=null},d=r=>{if(!r.url)return;const l=document.createElement("a");l.href=r.url,l.download=r.name,document.body.appendChild(l),l.click(),document.body.removeChild(l)},m=async r=>{var n;if(!t.uploadUrl)return;const l=new FormData;l.append("file",r);try{const x=await fetch(t.uploadUrl,{method:"POST",body:l,headers:{"X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}});if(x.ok){const R=await x.json(),A=p.value.findIndex(q=>q.id===r.id);A!==-1&&(p.value[A]={...p.value[A],status:"success",progress:100,url:R.url,id:R.id},c(),$("upload-complete",p.value[A]))}else throw new Error("Upload failed")}catch(x){const R=p.value.findIndex(A=>A.id===r.id);R!==-1&&(p.value[R].status="error",c()),$("upload-error",{file:r,error:x}),F.value.push(`Failed to upload ${r.name}`)}},c=()=>{$("update:modelValue",[...p.value])};return T({addFile:r=>{Z([r])},removeFileById:r=>{const l=p.value.findIndex(n=>n.id===r);l!==-1&&P(l)},clearFiles:()=>{v()},triggerFileInput:z}),he(()=>t.modelValue,r=>{JSON.stringify(r)!==JSON.stringify(p.value)&&(p.value=[...r])},{deep:!0}),(r,l)=>(a(),o("div",{class:D(["file-upload-wrapper",Y.value])},[e("div",{ref_key:"dropZoneRef",ref:G,class:D(I.value),onClick:z,onDragover:ve(O,["prevent"]),onDragleave:ve(ee,["prevent"]),onDrop:ve(te,["prevent"])},[e("input",{ref_key:"fileInputRef",ref:M,type:"file",multiple:s.multiple,accept:E.value,disabled:s.disabled,class:"sr-only",onChange:X},null,40,Jt),e("div",Qt,[e("div",Xt,[f(h(at),{class:"w-8 h-8 text-neutral-400"})]),e("div",es,[e("p",ts,[l[0]||(l[0]=e("span",{class:"upload-link"},"Click to upload",-1)),s.disabled?y("",!0):(a(),o("span",ss," or drag and drop"))]),e("p",as,u(W()),1)])])],34),p.value.length>0?(a(),o("div",ns,[e("div",os,[e("h4",ls,"Uploaded Files ("+u(p.value.length)+u(s.maxFiles?`/${s.maxFiles}`:"")+")",1),p.value.length>0&&!s.disabled?(a(),o("button",{key:0,onClick:v,class:"clear-all-button",type:"button"},[f(h(pe),{class:"w-4 h-4"}),l[1]||(l[1]=se(" Clear All "))])):y("",!0)]),e("div",rs,[(a(!0),o(N,null,H(p.value,(n,x)=>(a(),o("div",{key:n.id||x,class:D(["file-item",le(n)])},[e("div",is,[(a(),ae(de(oe(n)),{class:"w-5 h-5"}))]),e("div",cs,[e("div",{class:"file-name",title:n.name},u(n.name),9,ds),e("div",us,[e("span",ms,u(ne(n.size)),1),n.status?(a(),o("span",{key:0,class:D(["file-status",re(n.status)])},u(U(n.status)),3)):y("",!0)])]),e("div",vs,[K(n)?(a(),o("button",{key:0,onClick:R=>S.value(n),class:"file-action-button",type:"button",title:"Preview"},[f(h(ze),{class:"w-4 h-4"})],8,ps)):y("",!0),n.url?(a(),o("button",{key:1,onClick:R=>d(n),class:"file-action-button",type:"button",title:"Download"},[f(h(Ke),{class:"w-4 h-4"})],8,hs)):y("",!0),s.disabled?y("",!0):(a(),o("button",{key:2,onClick:R=>P(x),class:"file-action-button file-action-button--danger",type:"button",title:"Remove"},[f(h(Oe),{class:"w-4 h-4"})],8,fs))]),n.status==="uploading"?(a(),o("div",gs,[e("div",ys,[e("div",{class:"progress-fill",style:Ae({width:`${n.progress||0}%`})},null,4)]),e("span",bs,u(n.progress||0)+"%",1)])):y("",!0)],2))),128))])])):y("",!0),F.value.length>0?(a(),o("div",xs,[e("div",_s,[f(h(ce),{class:"w-4 h-4 text-error-500"}),l[2]||(l[2]=e("span",{class:"error-title"},"Upload Errors",-1))]),e("ul",ws,[(a(!0),o(N,null,H(F.value,(n,x)=>(a(),o("li",{key:x,class:"error-item"},u(n),1))),128))])])):y("",!0),s.helpText||s.errorMessage?(a(),o("div",$s,[s.errorMessage?(a(),o("p",Cs,u(s.errorMessage),1)):s.helpText?(a(),o("p",ks,u(s.helpText),1)):y("",!0)])):y("",!0),S.value?(a(),ae(Yt,{key:3,show:i.value,onClose:_},{default:V(()=>{var n;return[e("div",Ss,[e("div",As,[e("h3",Fs,u((n=S.value)==null?void 0:n.name),1),e("button",{onClick:_,class:"preview-close"},[f(h(pe),{class:"w-5 h-5"})])]),e("div",Ms,[S.value&&J(S.value)?(a(),o("img",{key:0,src:Q(S.value),alt:S.value.name,class:"preview-image"},null,8,Ts)):y("",!0)])])]}),_:1},8,["show"])):y("",!0)],2))}},Ds=ge(Bs,[["__scopeId","data-v-539f458a"]]),Rs={class:"assessment-form-wrapper"},Ls={class:"assessment-header"},Vs={class:"employee-context"},Es={class:"employee-info"},Is={class:"employee-avatar"},Us={class:"avatar-placeholder"},js={class:"employee-details"},zs={class:"employee-name"},Os={class:"employee-role"},Ps={key:0,class:"employee-department"},qs={key:0,class:"previous-assessments"},Ns={key:0,class:"history-content"},Hs={class:"history-timeline"},Ws={class:"history-date"},Gs={class:"history-rating"},Ks={class:"history-assessor"},Zs={class:"competency-context"},Ys={class:"competency-header"},Js={class:"competency-info"},Qs={class:"competency-name"},Xs={class:"competency-meta"},ea={class:"competency-category"},ta={key:0,class:"competency-weight"},sa={class:"competency-description"},aa={key:0,class:"measurement-indicators"},na={class:"indicators-list"},oa={class:"form-actions"},la={class:"action-buttons"},ra={key:0,class:"flex items-center"},ia={key:1,class:"flex items-center"},ca={key:0,class:"progress-indicator"},da={class:"progress-bar"},ua={class:"progress-text"},ma={class:"flex items-center space-x-2"},va={class:"text-sm"},pa={__name:"AssessmentForm",props:{employee:{type:Object,required:!0},competency:{type:Object,required:!0},assessmentType:{type:String,default:"manager",validator:s=>["self","manager","peer","360"].includes(s)},assessmentCycle:{type:Object,default:null},existingAssessment:{type:Object,default:null},previousAssessments:{type:Array,default:()=>[]},showProgress:{type:Boolean,default:!0},autoSave:{type:Boolean,default:!0},autoSaveInterval:{type:Number,default:3e4}},emits:["submit","cancel","draft-saved","rating-changed","validation-error"],setup(s,{expose:T,emit:B}){var O,ee,te,Z,P,v,_;const t=s,$=B,p=k(!1),g=k(""),F=k(null),S=k(null),i=Le({employee_id:(O=t.employee)==null?void 0:O.id,competency_id:(ee=t.competency)==null?void 0:ee.id,assessment_cycle_id:((te=t.assessmentCycle)==null?void 0:te.id)||null,rating:((Z=t.existingAssessment)==null?void 0:Z.rating)||null,comments:((P=t.existingAssessment)==null?void 0:P.comments)||"",evidence_files:((v=t.existingAssessment)==null?void 0:v.evidence_files)||[],development_notes:((_=t.existingAssessment)==null?void 0:_.development_notes)||"",assessment_type:t.assessmentType,status:"draft"}),M=w(()=>{if(!i.rating)return!1;const d=parseInt(i.rating);return d<=2||d>=4}),G=w(()=>i.rating&&(!M.value||i.comments&&i.comments.length>=50)&&!i.processing),E=w(()=>{let d=0,m=2;return i.rating&&d++,i.comments&&(!M.value||i.comments.length>=50)&&d++,Math.round(d/m*100)}),L=d=>d.split(" ").map(m=>m.charAt(0)).join("").toUpperCase().slice(0,2),Y=()=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360° Feedback"})[t.assessmentType]||"Assessment",I=()=>{const d="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m={self:"bg-blue-100 text-blue-800",manager:"bg-green-100 text-green-800",peer:"bg-purple-100 text-purple-800",360:"bg-orange-100 text-orange-800"};return`${d} ${m[t.assessmentType]||m.manager}`},W=()=>{if(!i.rating)return"Comments will be required based on your rating selection";const d=parseInt(i.rating);return d<=2?"Detailed comments are required for ratings of 2 or below. Please explain areas for improvement and provide specific examples.":d>=4?"Detailed comments are required for ratings of 4 or above. Please highlight exceptional performance and specific achievements.":"Comments are optional for this rating, but encouraged to provide context."},ne=()=>{if(!i.rating)return"Provide detailed feedback about the employee's performance in this competency...";const d=parseInt(i.rating);return d<=2?"Describe specific areas where improvement is needed, provide examples of performance gaps, and suggest actionable steps for development...":d>=4?"Highlight specific examples of exceptional performance, describe how the employee exceeded expectations, and note any leadership or innovation demonstrated...":"Provide context for your rating, specific examples of performance, and any observations that support your assessment..."},oe=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=()=>{const d="fixed bottom-4 right-4 bg-white border rounded-lg px-3 py-2 shadow-lg z-50";return g.value.includes("Error")?`${d} border-error-200 text-error-700`:g.value.includes("Saved")?`${d} border-success-200 text-success-700`:`${d} border-neutral-200 text-neutral-600`},re=()=>g.value.includes("Error")?ce:g.value.includes("Saved")?ue:Fe,U=d=>{$("rating-changed",d),!M.value&&i.comments.length<50,t.autoSave&&z()},J=()=>{if(!i.rating){$("validation-error",{field:"rating",message:"Rating is required"});return}if(M.value&&(!i.comments||i.comments.length<50)){$("validation-error",{field:"comments",message:"Detailed comments are required for this rating"});return}i.status="submitted";const d={...i.data(),evidence_files:i.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};i.post(route("competency-assessments.store"),{data:d,onSuccess:()=>{$("submit",d)},onError:m=>{$("validation-error",m)}})},K=()=>{i.status="draft";const d={...i.data(),evidence_files:i.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};i.post(route("competency-assessments.store"),{data:d,onSuccess:()=>{$("draft-saved",i.data()),g.value="Draft saved",setTimeout(()=>{g.value=""},3e3)},onError:()=>{g.value="Error saving draft",setTimeout(()=>{g.value=""},5e3)}})},Q=()=>{j()?confirm("You have unsaved changes. Are you sure you want to cancel?")&&$("cancel"):$("cancel")},j=()=>S.value?JSON.stringify(i.data())!==JSON.stringify(S.value):!0,z=()=>{F.value&&clearTimeout(F.value),F.value=setTimeout(()=>{j()&&(i.rating||i.comments)&&X()},t.autoSaveInterval)},X=()=>{if(i.processing)return;g.value="Saving...",i.status="draft";const d={...i.data(),evidence_files:i.evidence_files.map(m=>typeof m=="string"?m:m.name||m.filename||m.originalName).filter(Boolean)};i.post(route("competency-assessments.store"),{data:d,preserveScroll:!0,onSuccess:()=>{S.value={...d},g.value="Auto-saved",setTimeout(()=>{g.value=""},3e3)},onError:()=>{g.value="Auto-save failed",setTimeout(()=>{g.value=""},5e3)}})};return he([()=>i.rating,()=>i.comments,()=>i.development_notes],()=>{t.autoSave&&z()},{deep:!0}),fe(()=>{S.value={...i.data()}}),Se(()=>{F.value&&clearTimeout(F.value)}),T({saveDraft:K,hasUnsavedChanges:j,form:i}),(d,m)=>{var c,C;return a(),o("div",Rs,[e("div",Ls,[e("div",Vs,[e("div",Es,[e("div",Is,[e("div",Us,u(L(s.employee.name)),1)]),e("div",js,[e("h3",zs,u(s.employee.name),1),e("p",Os,u(s.employee.position||"Employee"),1),s.employee.department?(a(),o("p",Ps,u(s.employee.department.name),1)):y("",!0)])]),e("div",{class:D(["assessment-type-badge",I()])},u(Y()),3)]),(c=s.previousAssessments)!=null&&c.length?(a(),o("div",qs,[e("button",{onClick:m[0]||(m[0]=b=>p.value=!p.value),class:"history-toggle",type:"button"},[f(h(De),{class:"w-4 h-4"}),m[5]||(m[5]=e("span",null,"Assessment History",-1)),f(h(qe),{class:D(["w-4 h-4 transition-transform duration-200",{"rotate-180":p.value}])},null,8,["class"])]),p.value?(a(),o("div",Ns,[e("div",Hs,[(a(!0),o(N,null,H(s.previousAssessments.slice(0,3),b=>(a(),o("div",{key:b.id,class:"history-item"},[e("div",Ws,u(oe(b.submitted_at)),1),e("div",Gs,[f(Te,{rating:b.rating,max:5,size:"sm"},null,8,["rating"])]),e("div",Ks,"by "+u(b.assessor.name),1)]))),128))])])):y("",!0)])):y("",!0)]),e("div",Zs,[e("div",Ys,[e("div",Js,[e("h2",Qs,u(s.competency.name),1),e("div",Xs,[e("span",ea,u(s.competency.category),1),s.competency.weight?(a(),o("span",ta," Weight: "+u(s.competency.weight),1)):y("",!0)])])]),e("div",sa,[e("p",null,u(s.competency.description),1)]),(C=s.competency.measurement_indicators)!=null&&C.length?(a(),o("div",aa,[m[6]||(m[6]=e("h4",{class:"indicators-title"},"Key Performance Indicators",-1)),e("ul",na,[(a(!0),o(N,null,H(s.competency.measurement_indicators,(b,ie)=>(a(),o("li",{key:ie,class:"indicator-item"},[f(h(Ne),{class:"indicator-icon"}),e("span",null,u(b),1)]))),128))])])):y("",!0)]),e("form",{onSubmit:ve(J,["prevent"]),class:"assessment-form"},[f(me,{label:"Rating",required:!0,"error-message":h(i).errors.rating,"help-text":"Select a rating based on the employee's performance in this competency"},{default:V(()=>[f(Vt,{modelValue:h(i).rating,"onUpdate:modelValue":m[1]||(m[1]=b=>h(i).rating=b),guidelines:s.competency.rating_guidelines,"show-guidelines":!0,"require-comments-for-extremes":!0,"error-message":h(i).errors.rating,size:"lg",onChange:U},null,8,["modelValue","guidelines","error-message"])]),_:1},8,["error-message"]),f(me,{label:"Comments",required:M.value,"error-message":h(i).errors.comments,"help-text":W()},{default:V(()=>[f(Kt,{modelValue:h(i).comments,"onUpdate:modelValue":m[2]||(m[2]=b=>h(i).comments=b),placeholder:ne(),required:M.value,"min-length":M.value?50:0,"max-length":2e3,"show-character-count":!0,"error-message":h(i).errors.comments},null,8,["modelValue","placeholder","required","min-length","error-message"])]),_:1},8,["required","error-message","help-text"]),f(me,{label:"Supporting Evidence","error-message":h(i).errors.evidence_files,"help-text":"Upload documents, images, or other files that support your assessment (optional)"},{default:V(()=>[f(Ds,{modelValue:h(i).evidence_files,"onUpdate:modelValue":m[3]||(m[3]=b=>h(i).evidence_files=b),multiple:!0,"max-files":5,"max-file-size":10,"accepted-types":["image/*","application/pdf",".doc",".docx",".txt"],"error-message":h(i).errors.evidence_files},null,8,["modelValue","error-message"])]),_:1},8,["error-message"]),f(me,{label:"Development Recommendations","error-message":h(i).errors.development_notes,"help-text":"Suggest specific actions or resources for improvement (optional)"},{default:V(()=>[f(Ze,{modelValue:h(i).development_notes,"onUpdate:modelValue":m[4]||(m[4]=b=>h(i).development_notes=b),placeholder:"Provide specific recommendations for skill development, training opportunities, or areas of focus...",rows:4,"max-length":1e3,"show-character-count":!0,"error-message":h(i).errors.development_notes},null,8,["modelValue","error-message"])]),_:1},8,["error-message"]),e("div",oa,[e("div",la,[f(be,{onClick:K,disabled:h(i).processing,type:"button"},{default:V(()=>[f(h(Me),{class:"w-4 h-4 mr-2"}),m[7]||(m[7]=se(" Save Draft "))]),_:1,__:[7]},8,["disabled"]),f(be,{onClick:Q,disabled:h(i).processing,type:"button"},{default:V(()=>m[8]||(m[8]=[se(" Cancel ")])),_:1,__:[8]},8,["disabled"]),f(Be,{type:"submit",disabled:!G.value||h(i).processing,class:D({"opacity-50":h(i).processing})},{default:V(()=>[h(i).processing?(a(),o("span",ra,m[9]||(m[9]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),se(" Submitting... ")]))):(a(),o("span",ia,[f(h(ue),{class:"w-4 h-4 mr-2"}),m[10]||(m[10]=se(" Submit Assessment "))]))]),_:1},8,["disabled","class"])]),s.showProgress?(a(),o("div",ca,[e("div",da,[e("div",{class:"progress-fill",style:Ae({width:`${E.value}%`})},null,4)]),e("span",ua,u(E.value)+"% Complete",1)])):y("",!0)])],32),g.value?(a(),o("div",{key:0,class:D(["auto-save-indicator",le()])},[e("div",ma,[(a(),ae(de(re()),{class:"w-4 h-4"})),e("span",va,u(g.value),1)])],2)):y("",!0)])}}},ha={class:"fixed inset-0 z-10 overflow-y-auto"},fa={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ga={class:"sm:flex sm:items-start"},ya={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},ba={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},xa={class:"mt-2"},_a={class:"text-sm text-gray-500"},wa={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},$a={__name:"SuccessModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Success"},message:{type:String,default:"Operation completed successfully."},closeText:{type:String,default:"Close"}},emits:["close"],setup(s){return(T,B)=>(a(),ae(h(et),{as:"template",show:s.show},{default:V(()=>[f(h(Je),{as:"div",class:"relative z-50",onClose:B[1]||(B[1]=t=>T.$emit("close"))},{default:V(()=>[f(h(ke),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:V(()=>B[2]||(B[2]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[2]}),e("div",ha,[e("div",fa,[f(h(ke),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:V(()=>[f(h(Qe),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:V(()=>[e("div",ga,[e("div",ya,[f(h(ue),{class:"h-6 w-6 text-green-600","aria-hidden":"true"})]),e("div",ba,[f(h(Xe),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:V(()=>[se(u(s.title),1)]),_:1}),e("div",xa,[e("p",_a,u(s.message),1)])])]),e("div",wa,[e("button",{type:"button",class:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto",onClick:B[0]||(B[0]=t=>T.$emit("close"))},u(s.closeText),1)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},Ca={class:"assessment-page-header"},ka={class:"header-container"},Sa={class:"header-content"},Aa={class:"breadcrumb-section"},Fa={class:"breadcrumb-nav"},Ma={class:"breadcrumb-current"},Ta={class:"title-section"},Ba={class:"page-title"},Da={class:"page-subtitle"},Ra={class:"assessment-page-container"},La={key:0,class:"progress-steps"},Va={class:"steps-container"},Ea={class:"steps-list"},Ia={class:"step-indicator"},Ua={class:"step-number"},ja={class:"step-content"},za={class:"step-title"},Oa={class:"step-description"},Pa={class:"form-container"},qa={class:"form-wrapper"},Na={key:0,class:"loading-container"},Ha={key:1,class:"error-container"},Wa={class:"error-content"},Ga={class:"error-message"},Ka={class:"error-actions"},Za={key:2,class:"assessment-form-container"},Ya={class:"form-header"},Ja={class:"context-cards"},Qa={class:"context-card employee-card"},Xa={class:"card-header"},en={class:"card-content"},tn={class:"employee-summary"},sn={class:"employee-avatar"},an={class:"avatar-circle"},nn={class:"employee-info"},on={class:"employee-name"},ln={class:"employee-details"},rn={key:0,class:"employee-position"},cn={key:1,class:"employee-department"},dn={class:"context-card competency-card"},un={class:"card-header"},mn={class:"card-content"},vn={class:"competency-summary"},pn={class:"competency-name"},hn={class:"competency-meta"},fn={class:"competency-category"},gn={key:0,class:"competency-weight"},yn={key:0,class:"context-card cycle-card"},bn={class:"card-header"},xn={class:"card-content"},_n={class:"cycle-summary"},wn={class:"cycle-name"},$n={class:"cycle-period"},Cn={class:"main-form"},kn={class:"sidebar"},Sn={class:"sidebar-card guidelines-card"},An={class:"card-header"},Fn={class:"card-content"},Mn={class:"guidelines-content"},Tn={class:"guideline-item"},Bn={class:"rating-scale"},Dn={class:"rating-number"},Rn={class:"rating-label"},Ln={key:0,class:"guideline-item"},Vn={class:"guidelines-list"},En={key:0,class:"sidebar-card history-card"},In={class:"card-header"},Un={class:"card-content"},jn={class:"history-summary"},zn={class:"history-stats"},On={class:"stat-item"},Pn={class:"stat-value"},qn={class:"stat-item"},Nn={class:"stat-value"},Hn={class:"recent-assessments"},Wn={class:"recent-list"},Gn={class:"recent-date"},Kn={class:"recent-rating"},Zn={class:"recent-assessor"},Yn={class:"sidebar-card help-card"},Jn={class:"card-header"},Qn={key:0,class:"notification-overlay"},Xn={class:"notification-center"},eo={class:"notification-icon"},to={class:"notification-text"},so={class:"notification-message"},ao=["onClick"],no={__name:"AssessmentForm",props:{employee:{type:Object,required:!0},competency:{type:Object,required:!0},assessmentType:{type:String,default:"manager"},assessmentCycle:{type:Object,default:null},existingAssessment:{type:Object,default:null},previousAssessments:{type:Array,default:()=>[]},showSteps:{type:Boolean,default:!0}},setup(s){const T=s,B=k(!1),t=k(null),$=k(null),p=k(0),g=k([]),F=k(!1),S=k(""),i=k(""),M=k("Confirm"),G=k("Cancel"),E=k(null),L=k(!1),Y=k(""),I=k(""),W=w(()=>!!T.existingAssessment),ne=w(()=>[{id:"context",title:"Review Context",description:"Review employee and competency information"},{id:"rating",title:"Provide Rating",description:"Rate the employee's performance"},{id:"feedback",title:"Add Feedback",description:"Provide detailed comments and evidence"},{id:"submit",title:"Submit Assessment",description:"Review and submit your assessment"}]),oe=w(()=>["Poor","Needs Improvement","Meets Expectations","Exceeds Expectations","Outstanding"]),le=w(()=>{var n;return(n=T.previousAssessments)!=null&&n.length?(T.previousAssessments.reduce((x,R)=>x+R.rating,0)/T.previousAssessments.length).toFixed(1):"N/A"}),re=()=>W.value?`Editing assessment for ${T.employee.name} - ${T.competency.name}`:`Assessing ${T.employee.name} on ${T.competency.name}`,U=l=>l.split(" ").map(n=>n.charAt(0)).join("").toUpperCase().slice(0,2),J=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),K=(l,n)=>{const x=new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"}),R=new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${x} - ${R}`},Q=l=>{const n="step-item";return l<p.value?`${n} completed`:l===p.value?`${n} active`:`${n} pending`},j=l=>l<p.value?ue:"div",z=l=>{S.value="Submit Assessment",i.value="Are you sure you want to submit this assessment? Once submitted, it cannot be edited.",M.value="Submit Assessment",E.value=()=>{X()},F.value=!0},X=l=>{B.value=!0,setTimeout(()=>{B.value=!1,Y.value="Assessment Submitted",I.value="The assessment has been successfully submitted and the employee will be notified.",L.value=!0},1e3)},O=()=>{var l;(l=$.value)!=null&&l.hasUnsavedChanges()?(S.value="Cancel Assessment",i.value="You have unsaved changes. Are you sure you want to cancel?",M.value="Yes, Cancel",E.value=()=>{P()},F.value=!0):P()},ee=l=>{C("Draft saved successfully","success")},te=l=>{l&&p.value<1&&(p.value=1)},Z=l=>{typeof l=="object"&&l.field?C(`${l.field}: ${l.message}`,"error"):C("Please check the form for errors","error")},P=()=>{Ie.visit(route("assessment-dashboard"))},v=()=>{t.value=null,B.value=!0,setTimeout(()=>{B.value=!1},1e3)},_=()=>{C("Support contact feature coming soon","info")},d=()=>{F.value=!1,E.value&&(E.value(),E.value=null)},m=()=>{F.value=!1,E.value=null},c=()=>{L.value=!1,P()},C=(l,n="info",x=4e3)=>{const R=Date.now(),A={id:R,message:l,type:n,visible:!0};g.value.push(A),setTimeout(()=>{b(R)},x)},b=l=>{const n=g.value.findIndex(x=>x.id===l);n>-1&&g.value.splice(n,1)},ie=l=>{const n="notification-toast",x={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${n} ${x[l]||x.info}`},r=l=>({success:ue,error:ce,warning:ce,info:ye})[l]||ye;return fe(()=>{}),Ve(()=>{}),(l,n)=>(a(),ae(Ue,null,{default:V(()=>{var x,R;return[e("div",Ca,[e("div",ka,[e("div",Sa,[e("div",Aa,[e("nav",Fa,[f(h(Ee),{href:l.route("assessment-dashboard"),class:"breadcrumb-link"},{default:V(()=>n[0]||(n[0]=[se(" Assessment Dashboard ")])),_:1,__:[0]},8,["href"]),f(h(He),{class:"breadcrumb-separator"}),e("span",Ma,u(W.value?"Edit Assessment":"New Assessment"),1)])]),e("div",Ta,[e("h1",Ba,u(W.value?"Edit Assessment":"Create Assessment"),1),e("p",Da,u(re()),1)])])])]),e("div",Ra,[!W.value&&s.showSteps?(a(),o("div",La,[e("div",Va,[e("div",Ea,[(a(!0),o(N,null,H(ne.value,(A,q)=>(a(),o("div",{key:A.id,class:D(["step-item",Q(q)])},[e("div",Ia,[(a(),ae(de(j(q)),{class:"step-icon"})),e("span",Ua,u(q+1),1)]),e("div",ja,[e("div",za,u(A.title),1),e("div",Oa,u(A.description),1)])],2))),128))])])])):y("",!0),e("div",Pa,[e("div",qa,[B.value?(a(),o("div",Na,n[1]||(n[1]=[e("div",{class:"loading-spinner"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})],-1),e("p",{class:"loading-text"},"Loading assessment data...",-1)]))):t.value?(a(),o("div",Ha,[e("div",Wa,[f(h(ce),{class:"error-icon"}),n[4]||(n[4]=e("h3",{class:"error-title"},"Unable to Load Assessment",-1)),e("p",Ga,u(t.value),1),e("div",Ka,[f(be,{onClick:v},{default:V(()=>[f(h(tt),{class:"w-4 h-4 mr-2"}),n[2]||(n[2]=se(" Retry "))]),_:1,__:[2]}),f(Be,{onClick:P},{default:V(()=>n[3]||(n[3]=[se(" Go Back ")])),_:1,__:[3]})])])])):(a(),o("div",Za,[e("div",Ya,[e("div",Ja,[e("div",Qa,[e("div",Xa,[f(h(We),{class:"card-icon"}),n[5]||(n[5]=e("h3",{class:"card-title"},"Employee",-1))]),e("div",en,[e("div",tn,[e("div",sn,[e("div",an,u(U(s.employee.name)),1)]),e("div",nn,[e("div",on,u(s.employee.name),1),e("div",ln,[s.employee.position?(a(),o("span",rn,u(s.employee.position),1)):y("",!0),s.employee.department?(a(),o("span",cn,u(s.employee.department.name),1)):y("",!0)])])])])]),e("div",dn,[e("div",un,[f(h(De),{class:"card-icon"}),n[6]||(n[6]=e("h3",{class:"card-title"},"Competency",-1))]),e("div",mn,[e("div",vn,[e("div",pn,u(s.competency.name),1),e("div",hn,[e("span",fn,u(s.competency.category),1),s.competency.weight?(a(),o("span",gn," Weight: "+u(s.competency.weight),1)):y("",!0)])])])]),s.assessmentCycle?(a(),o("div",yn,[e("div",bn,[f(h(Ge),{class:"card-icon"}),n[7]||(n[7]=e("h3",{class:"card-title"},"Assessment Cycle",-1))]),e("div",xn,[e("div",_n,[e("div",wn,u(s.assessmentCycle.name),1),e("div",$n,u(K(s.assessmentCycle.start_date,s.assessmentCycle.end_date)),1)])])])):y("",!0)])]),e("div",Cn,[f(pa,{ref_key:"assessmentFormRef",ref:$,employee:s.employee,competency:s.competency,"assessment-type":s.assessmentType,"assessment-cycle":s.assessmentCycle,"existing-assessment":s.existingAssessment,"previous-assessments":s.previousAssessments,"show-progress":!0,"auto-save":!0,onSubmit:z,onCancel:O,onDraftSaved:ee,onRatingChanged:te,onValidationError:Z},null,8,["employee","competency","assessment-type","assessment-cycle","existing-assessment","previous-assessments"])])]))]),e("div",kn,[e("div",Sn,[e("div",An,[f(h(ye),{class:"card-icon"}),n[8]||(n[8]=e("h3",{class:"card-title"},"Assessment Guidelines",-1))]),e("div",Fn,[e("div",Mn,[e("div",Tn,[n[9]||(n[9]=e("div",{class:"guideline-title"},"Rating Scale",-1)),e("div",Bn,[(a(!0),o(N,null,H(oe.value,(A,q)=>(a(),o("div",{key:q,class:"rating-level"},[e("div",Dn,u(q+1),1),e("div",Rn,u(A),1)]))),128))])]),(x=s.competency.rating_guidelines)!=null&&x.length?(a(),o("div",Ln,[n[10]||(n[10]=e("div",{class:"guideline-title"},"Specific Guidelines",-1)),e("ul",Vn,[(a(!0),o(N,null,H(s.competency.rating_guidelines,(A,q)=>(a(),o("li",{key:q,class:"guideline-point"},u(A),1))),128))])])):y("",!0)])])]),(R=s.previousAssessments)!=null&&R.length?(a(),o("div",En,[e("div",In,[f(h(Fe),{class:"card-icon"}),n[11]||(n[11]=e("h3",{class:"card-title"},"Assessment History",-1))]),e("div",Un,[e("div",jn,[e("div",zn,[e("div",On,[e("div",Pn,u(s.previousAssessments.length),1),n[12]||(n[12]=e("div",{class:"stat-label"},"Previous Assessments",-1))]),e("div",qn,[e("div",Nn,u(le.value),1),n[13]||(n[13]=e("div",{class:"stat-label"},"Average Rating",-1))])]),e("div",Hn,[n[14]||(n[14]=e("div",{class:"recent-title"},"Recent Assessments",-1)),e("div",Wn,[(a(!0),o(N,null,H(s.previousAssessments.slice(0,3),A=>(a(),o("div",{key:A.id,class:"recent-item"},[e("div",Gn,u(J(A.submitted_at)),1),e("div",Kn,[f(Te,{rating:A.rating,max:5,size:"sm"},null,8,["rating"])]),e("div",Zn,u(A.assessor.name),1)]))),128))])])])])])):y("",!0),e("div",Yn,[e("div",Jn,[f(h(rt),{class:"card-icon"}),n[15]||(n[15]=e("h3",{class:"card-title"},"Need Help?",-1))]),e("div",{class:"card-content"},[e("div",{class:"help-content"},[n[16]||(n[16]=e("p",{class:"help-text"}," If you need assistance with this assessment, you can: ",-1)),e("ul",{class:"help-actions"},[e("li",null,[e("button",{onClick:_,class:"help-link"}," Contact Support ")])])])])])])])]),f(Ye,{show:F.value,title:S.value,message:i.value,"confirm-text":M.value,"cancel-text":G.value,onConfirm:d,onCancel:m},null,8,["show","title","message","confirm-text","cancel-text"]),f($a,{show:L.value,title:Y.value,message:I.value,onClose:c},null,8,["show","title","message"]),g.value.length>0?(a(),o("div",Qn,[e("div",Xn,[(a(!0),o(N,null,H(g.value,A=>(a(),o("div",{key:A.id,class:D([ie(A.type),"notification-card"])},[e("div",eo,[(a(),ae(de(r(A.type)),{class:"w-5 h-5"}))]),e("div",to,[e("p",so,u(A.message),1)]),e("button",{onClick:q=>b(A.id),class:"notification-close"},[f(h(pe),{class:"w-4 h-4"})],8,ao)],2))),128))])])):y("",!0)]}),_:1}))}},Co=ge(no,[["__scopeId","data-v-72c24f24"]]);export{Co as default};
