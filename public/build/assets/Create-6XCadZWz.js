import{x as M,e as w,f as d,g as C,o as n,h as g,k as p,a as e,d as ee,c as r,i as c,w as f,u as i,F as x,r as _,t as a,v as A,l as m,b as se,n as N,Q as S}from"./app-B1sa791o.js";import{_ as te}from"./AuthenticatedLayout-B9GStfkv.js";import{P as oe}from"./PageLayout-AzmkcH9Q.js";import{P as le}from"./PrimaryButton-DBVbWX_0.js";import{_ as F}from"./SecondaryButton-DUL-xtID.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as re,e as j}from"./Icon-CoiWY0Yd.js";import"./useAuth-CQTLyy7w.js";import"./ApplicationLogo-DS4V43YA.js";import"./useAccessibility-Pc4HPDKB.js";import"./PageHeader-BKlBKnO5.js";/* empty css                                                                   *//* empty css                                                                   */const ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ie={class:"p-6 text-gray-900"},de={class:"space-y-4"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"space-y-2"},ue=["value"],pe={class:"space-y-2"},ye={key:0,class:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},be={class:"flex items-center space-x-2 mb-2"},ge={class:"text-sm font-medium text-blue-900"},fe={class:"text-sm text-blue-700 grid grid-cols-2 gap-4"},xe={class:"space-y-4"},_e=["value"],ve={class:"relative mb-2"},he={key:0,class:"space-y-2 max-h-64 overflow-y-auto"},ke={class:"flex items-center justify-between"},we=["onClick"],Ce={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-medium text-sm flex-shrink-0"},Ae={class:"flex-1"},Se={class:"font-medium text-gray-900"},je={class:"flex items-center space-x-2 text-sm text-gray-600"},De={key:0,class:"text-gray-400"},Ee={key:1,class:"text-gray-500"},Pe={class:"flex-shrink-0"},Be={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},$e={key:1,class:"mt-3"},Le={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},Ue={class:"flex items-center space-x-2"},Ve={class:"text-sm font-medium text-blue-900"},Me={class:"space-y-4"},Ne=["value"],Fe={key:0},Te={class:"space-y-2 max-h-64 overflow-y-auto"},ze={class:"flex items-start justify-between"},Ie=["onClick"],Oe={class:"font-medium text-gray-900"},qe={class:"text-sm text-gray-600 mt-1"},Qe={class:"flex items-center mt-2"},Re={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ge={class:"ml-3 flex-shrink-0"},He={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},Je={key:1,class:"mt-3"},Ke={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},We={class:"flex items-center space-x-2"},Xe={class:"text-sm font-medium text-blue-900"},Ye={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},Ze={class:"flex items-center justify-between pt-6 border-t border-gray-200"},es={class:"flex items-center space-x-3"},ss={__name:"Create",props:{employees:{type:Array,required:!0},competencies:{type:Array,required:!0},assessmentCycles:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},setup(D){const u=D,o=M({employee_ids:[],competency_ids:[],assessment_type:"manager",assessment_cycle_id:null}),y=w(""),v=w("");w("");const b=w(""),T=d(()=>{let l=u.employees;if(v.value&&(l=l.filter(s=>s.department&&s.department.id===v.value)),y.value&&y.value.length>=2){const s=y.value.toLowerCase();l=l.filter(t=>t.name.toLowerCase().includes(s)||t.position&&t.position.toLowerCase().includes(s))}return l.sort((s,t)=>s.name.localeCompare(t.name))}),L=d(()=>T.value),E=d(()=>u.employees.filter(l=>o.employee_ids.includes(l.id))),z=d(()=>[...new Set(u.competencies.map(s=>s.category))].sort()),I=d(()=>b.value?u.competencies.filter(l=>l.category===b.value).sort((l,s)=>l.name.localeCompare(s.name)):[]),P=d(()=>u.competencies.filter(l=>o.competency_ids.includes(l.id))),h=d(()=>o.assessment_cycle_id?u.assessmentCycles.find(l=>l.id===o.assessment_cycle_id):null),B=d(()=>o.employee_ids.length>0&&o.competency_ids.length>0&&!o.processing),k=d(()=>o.employee_ids.length*o.competency_ids.length),O=d(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Create Assessment",current:!0}]),q=d(()=>[{label:"Back to Dashboard",href:route("assessment-dashboard"),variant:"secondary",icon:"ArrowLeftIcon"}]),Q=l=>l.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),U=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",R=l=>{o.employee_ids.indexOf(l.id)>-1?o.employee_ids=o.employee_ids.filter(t=>t!==l.id):o.employee_ids=[...o.employee_ids,l.id]},G=l=>{o.competency_ids.indexOf(l.id)>-1?o.competency_ids=o.competency_ids.filter(t=>t!==l.id):o.competency_ids=[...o.competency_ids,l.id]},H=()=>{o.employee_ids=[]},J=()=>{o.competency_ids=[]},V=()=>{if(o.employee_ids.length===0||o.competency_ids.length===0){alert("Please select at least one employee and one competency");return}if(o.employee_ids.length*o.competency_ids.length===1){const s=new URLSearchParams({employee_id:o.employee_ids[0],competency_id:o.competency_ids[0],assessment_type:o.assessment_type});o.assessment_cycle_id&&s.append("assessment_cycle_id",o.assessment_cycle_id);const t=`${route("assessment-form")}?${s.toString()}`;S.visit(t)}else{const s=o.competency_ids.map(t=>{const $=M({employee_ids:o.employee_ids,competency_id:t,assessment_type:o.assessment_type,assessment_cycle_id:o.assessment_cycle_id});return new Promise((X,Y)=>{$.post(route("competency-assessments.bulk-create"),{onSuccess:()=>X(),onError:Z=>Y(Z)})})});o.processing=!0,Promise.all(s).then(()=>{S.visit(route("competency-assessments.index"))}).catch(t=>{console.error("Error creating bulk assessments:",t),o.processing=!1})}},K=()=>{if(o.employee_ids.length===0||o.competency_ids.length===0){alert("Please select at least one employee and one competency");return}const l=new URLSearchParams({employee_id:o.employee_ids[0],competency_id:o.competency_ids[0],assessment_type:o.assessment_type});o.assessment_cycle_id&&l.append("assessment_cycle_id",o.assessment_cycle_id);const s=`${route("assessment-form")}?${l.toString()}`;S.visit(s)},W=()=>{S.visit(route("assessment-dashboard"))};return(l,s)=>(n(),C(te,null,{default:g(()=>[p(oe,{title:"Create Assessment",subtitle:"Set up assessment context, select employees and competencies to evaluate",breadcrumbs:O.value,actions:q.value},{default:g(()=>[s[26]||(s[26]=e("div",{class:"bg-gray-50 rounded-lg border border-gray-200 mb-6"},[e("div",{class:"p-6"},[e("div",{class:"flex items-center justify-between"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full text-sm font-medium"}," 1 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Assessment Context"),e("p",{class:"text-xs text-gray-500"},"Set cycle and assessment type")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 2 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Select Participants"),e("p",{class:"text-xs text-gray-400"},"Choose employees and competencies")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 3 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Create Assessments"),e("p",{class:"text-xs text-gray-400"},"Generate assessment records")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 4 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Begin Evaluation"),e("p",{class:"text-xs text-gray-400"},"Start rating and providing feedback")])])])])],-1)),e("div",ae,[e("div",ie,[e("form",{onSubmit:ee(V,["prevent"]),class:"space-y-8"},[e("div",de,[s[14]||(s[14]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Assessment Context",-1)),e("div",ce,[e("div",me,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Assessment Cycle",-1)),f(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i(o).assessment_cycle_id=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[s[5]||(s[5]=e("option",{value:""},"No specific cycle",-1)),(n(!0),r(x,null,_(D.assessmentCycles,t=>(n(),r("option",{key:t.id,value:t.id},a(t.name),9,ue))),128))],512),[[A,i(o).assessment_cycle_id]]),s[7]||(s[7]=e("p",{class:"text-xs text-gray-500"},"Select an assessment cycle to organize assessments by period or campaign",-1))]),e("div",pe,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Assessment Type",-1)),f(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i(o).assessment_type=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},s[8]||(s[8]=[e("option",{value:"manager"},"Manager Assessment",-1),e("option",{value:"self"},"Self Assessment",-1),e("option",{value:"peer"},"Peer Assessment",-1),e("option",{value:"360"},"360° Feedback",-1)]),512),[[A,i(o).assessment_type]]),s[10]||(s[10]=e("p",{class:"text-xs text-gray-500"},"Choose the type of assessment to be conducted",-1))])]),h.value?(n(),r("div",ye,[e("div",be,[s[11]||(s[11]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("h4",ge,a(h.value.name),1)]),e("div",fe,[e("div",null,[s[12]||(s[12]=e("span",{class:"font-medium"},"Start Date:",-1)),m(" "+a(U(h.value.start_date)),1)]),e("div",null,[s[13]||(s[13]=e("span",{class:"font-medium"},"End Date:",-1)),m(" "+a(U(h.value.end_date)),1)])])])):c("",!0)]),e("div",xe,[s[18]||(s[18]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Select Employees",-1)),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by Department (Optional) ",-1)),f(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[s[15]||(s[15]=e("option",{value:""},"All Departments",-1)),(n(!0),r(x,null,_(D.departments,t=>(n(),r("option",{key:t.id,value:t.id},a(t.name),9,_e))),128))],512),[[A,v.value]])]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Employees ",-1)),e("div",ve,[f(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>y.value=t),type:"text",placeholder:"Search by name or position...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[se,y.value]]),p(i(re),{class:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"})]),L.value.length>0?(n(),r("div",he,[(n(!0),r(x,null,_(L.value,t=>(n(),r("div",{key:t.id,class:N(["bg-white border border-gray-200 rounded-lg p-4 transition-all duration-200 hover:shadow-md",{"ring-2 ring-blue-500 border-blue-200 bg-blue-50":i(o).employee_ids.includes(t.id)}])},[e("div",ke,[e("div",{class:"flex items-center space-x-3 flex-1 cursor-pointer",onClick:$=>R(t)},[e("div",Ce,a(Q(t.name)),1),e("div",Ae,[e("h4",Se,a(t.name),1),e("div",je,[e("span",null,a(t.position||"Employee"),1),t.department?(n(),r("span",De,"•")):c("",!0),t.department?(n(),r("span",Ee,a(t.department.name),1)):c("",!0)])]),e("div",Pe,[i(o).employee_ids.includes(t.id)?(n(),C(i(j),{key:0,class:"w-5 h-5 text-blue-600"})):(n(),r("div",Be))])],8,we)])],2))),128))])):c("",!0),E.value.length>0?(n(),r("div",$e,[e("div",Le,[e("div",Ue,[p(i(j),{class:"w-5 h-5 text-blue-600"}),e("span",Ve,a(E.value.length)+" employee"+a(E.value.length!==1?"s":"")+" selected ",1)]),e("button",{type:"button",onClick:H,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):c("",!0)])]),e("div",Me,[s[22]||(s[22]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Select Competencies",-1)),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Choose Category ",-1)),f(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>b.value=t),class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[s[19]||(s[19]=e("option",{value:""},"Select a competency category...",-1)),(n(!0),r(x,null,_(z.value,t=>(n(),r("option",{key:t,value:t},a(t),9,Ne))),128))],512),[[A,b.value]])]),b.value?(n(),r("div",Fe,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Choose Competencies ",-1)),e("div",Te,[(n(!0),r(x,null,_(I.value,t=>(n(),r("div",{key:t.id,class:N(["bg-white border border-gray-200 rounded-lg p-4 transition-all duration-200 hover:shadow-md",{"ring-2 ring-blue-500 border-blue-200 bg-blue-50":i(o).competency_ids.includes(t.id)}])},[e("div",ze,[e("div",{class:"flex-1 cursor-pointer",onClick:$=>G(t)},[e("h4",Oe,a(t.name),1),e("p",qe,a(t.description),1),e("div",Qe,[e("span",Re,a(t.category),1)])],8,Ie),e("div",Ge,[i(o).competency_ids.includes(t.id)?(n(),C(i(j),{key:0,class:"w-5 h-5 text-blue-600"})):(n(),r("div",He))])])],2))),128))])])):c("",!0),P.value.length>0?(n(),r("div",Je,[e("div",Ke,[e("div",We,[p(i(j),{class:"w-5 h-5 text-blue-600"}),e("span",Xe,a(P.value.length)+" competenc"+a(P.value.length!==1?"ies":"y")+" selected ",1)]),e("button",{type:"button",onClick:J,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):c("",!0)]),B.value&&k.value===1?(n(),r("div",Ye,s[23]||(s[23]=[e("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Choose how to proceed:",-1),e("div",{class:"text-sm text-blue-700 space-y-1"},[e("p",null,[e("strong",null,"Add Assessment:"),m(" Navigate directly to the assessment form to start rating")]),e("p",null,[e("strong",null,"Create & Complete Assessment:"),m(" Create the assessment record first, then proceed to rating")])],-1)]))):c("",!0),e("div",Ze,[e("div",es,[p(F,{onClick:W,type:"button"},{default:g(()=>s[24]||(s[24]=[m(" Cancel ")])),_:1,__:[24]}),B.value&&k.value===1?(n(),C(F,{key:0,onClick:K,type:"button",class:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"},{default:g(()=>s[25]||(s[25]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Add Assessment ")])),_:1,__:[25]})):c("",!0)]),p(le,{type:"button",disabled:!B.value,loading:i(o).processing,onClick:V},{default:g(()=>[m(a(k.value>1?`Create ${k.value} Assessments`:"Create & Complete Assessment"),1)]),_:1},8,["disabled","loading"])])],32)])])]),_:1,__:[26]},8,["breadcrumbs","actions"])]),_:1}))}},bs=ne(ss,[["__scopeId","data-v-6878ae25"]]);export{bs as default};
