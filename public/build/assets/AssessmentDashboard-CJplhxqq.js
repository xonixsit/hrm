import{e as R,K as w,f as x,z as os,g as A,o as i,h as T,a as s,c as n,i as C,k as r,l as p,u,F as g,r as y,t as d,S as rs,d as cs,n as S,q as ls,s as P,Q as v}from"./app-e1NLHSuN.js";import{A as ds}from"./AuthenticatedLayout-CgNxW2Cw.js";import{S as b}from"./StatsCard-BJg445VL.js";import{_ as us}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as vs}from"./ArrowPathIcon-Dl5wQYMo.js";import{a as ms,q as k,m as f,n as M,h as z,i as I,p as gs}from"./icons-CNgSFObo.js";import{r as ys}from"./DocumentPlusIcon-CeJgi9jz.js";import{r as hs}from"./ChartBarIcon-Cl-eGObk.js";import{r as ps}from"./CogIcon-DN92FccI.js";import"./useAuth-FjNojmms.js";/* empty css                                                                  */import"./ArrowTrendingUpIcon-6HH8tfn5.js";import"./ArrowTrendingDownIcon-Bg5qJCPG.js";import"./ArrowTopRightOnSquareIcon-SPhsZVEt.js";const fs={class:"dashboard-header"},_s={class:"header-container"},bs={class:"header-content"},ks={class:"header-actions"},ws=["disabled"],xs={class:"dashboard-container"},As={class:"primary-stats-section"},Cs={class:"stats-grid-primary"},Ns={class:"secondary-content-section"},$s={class:"content-grid-secondary"},qs={class:"pending-assessments-card priority-high"},Ds={class:"widget-content"},Rs={key:0,class:"loading-state"},Ts={class:"animate-pulse space-y-3"},Ss={key:1,class:"empty-state"},Ps={key:2,class:"assessment-list"},Ms=["onClick"],zs={class:"assessment-avatar"},Is={class:"avatar-circle"},Us={class:"assessment-details"},Vs={class:"assessment-title"},Ls={class:"assessment-meta"},Bs={class:"assessment-type"},Es={class:"assessment-due"},js={class:"assessment-actions"},Fs=["onClick"],Qs={key:1,class:"text-xs text-gray-500 italic"},Os={class:"assessment-cycles-card priority-medium"},Hs={class:"widget-content"},Js={key:0,class:"loading-state"},Ks={class:"animate-pulse space-y-3"},Ys={key:1,class:"empty-state"},Gs={key:2,class:"cycle-list"},Ws=["onClick"],Xs={class:"cycle-details"},Zs={class:"cycle-title"},se={class:"cycle-meta"},ee={class:"cycle-period"},te={class:"cycle-status"},ae={class:"cycle-progress"},ie={class:"progress-bar"},ne={class:"progress-text"},oe={class:"tertiary-content-section"},re={class:"content-grid-tertiary"},ce={class:"quick-actions-card"},le={class:"widget-content"},de={class:"quick-actions-grid"},ue={class:"quick-action-icon bg-blue-100 text-blue-600"},ve={class:"quick-action-icon bg-green-100 text-green-600"},me={class:"quick-action-icon bg-purple-100 text-purple-600"},ge={class:"quick-action-icon bg-orange-100 text-orange-600"},ye={class:"recent-activity-card"},he={class:"widget-content"},pe={key:0,class:"loading-state"},fe={class:"animate-pulse space-y-3"},_e={key:1,class:"empty-state"},be={key:2,class:"activity-list"},ke={class:"activity-icon"},we={class:"activity-details"},xe={class:"activity-text"},Ae={class:"activity-time"},Ce={key:0,class:"notification-overlay"},Ne={class:"notification-center"},$e={class:"notification-icon"},qe={class:"notification-text"},De={class:"notification-message"},Re=["onClick"],Te={__name:"AssessmentDashboard",props:{stats:{type:Object,default:()=>({totalAssessments:0,pendingAssessments:0,activeCycles:0,completionRate:0,assessmentTrend:0})},pendingAssessments:{type:Array,default:()=>[]},assessmentCycles:{type:Array,default:()=>[]},recentActivity:{type:Array,default:()=>[]}},setup(l){const N=l,m=R(!1),h=R([]),U=w(),V=x(()=>{var t;return(t=U.props.auth)==null?void 0:t.user}),$=x(()=>{var e;return(((e=V.value)==null?void 0:e.roles)||[]).some(a=>["Manager","Admin","HR"].includes(a.name))});x(()=>({...N.stats,completionRate:Math.round(N.stats.completionRate||0)}));const L=async()=>{m.value=!0;try{v.reload({only:["stats","pendingAssessments","assessmentCycles","recentActivity"],preserveScroll:!0}),c("Dashboard refreshed successfully","success")}finally{setTimeout(()=>{m.value=!1},1e3)}},B=()=>{try{v.visit(route("competency-assessments.index"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},q=()=>{try{v.visit(route("competency-assessments.pending"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},_=()=>{try{v.visit(route("assessment-cycle-manager"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},E=()=>{try{v.visit(route("competency-assessments.create"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},j=()=>{try{v.visit(route("competency-assessments.create"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},F=()=>{try{v.visit(route("competency-analytics.index"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},Q=()=>{try{v.visit(route("competencies.index"))}catch(t){console.error("Navigation error:",t),c("Navigation failed. Please try again.","error")}},O=t=>{try{v.visit(route("competency-assessments.show",t.id))}catch(e){console.error("Navigation error:",e),c("Navigation failed. Please try again.","error")}},H=t=>{try{v.visit(route("assessment-cycles.show",t.id))}catch(e){console.error("Navigation error:",e),c("Navigation failed. Please try again.","error")}},J=t=>{var e;try{const o=(e=w().props.auth)==null?void 0:e.user;if(t.assessment_type==="self"){if(o.id!==t.employee.user_id){c("Self-assessments can only be completed by the employee themselves.","error");return}}else if(o.id!==t.assessor_id){c("You are not authorized to complete this assessment.","error");return}v.visit(route("competency-assessments.evaluate",t.id))}catch(a){console.error("Navigation error:",a),c("Navigation failed. Please try again.","error")}},K=t=>{var e;try{const o=(e=w().props.auth)==null?void 0:e.user;return o?t.assessment_type==="self"?o.id===t.employee.user_id:o.id===t.assessor_id:!1}catch(a){return console.error("Error checking assessment permissions:",a),!1}},Y=t=>t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),G=t=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360° Feedback"})[t]||t,W=t=>t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date",X=(t,e)=>{const a=new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${a} - ${o}`},Z=t=>({planned:"Planned",active:"Active",completed:"Completed",cancelled:"Cancelled"})[t]||t,ss=t=>({planned:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",es=t=>{const e=new Date,a=new Date(t),o=Math.floor((e-a)/(1e3*60));return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:`${Math.floor(o/1440)}d ago`},ts=t=>({assessment_submitted:f,assessment_approved:f,cycle_started:k,cycle_completed:f})[t]||M,c=(t,e="info",a=4e3)=>{const o=Date.now(),ns={id:o,message:t,type:e,visible:!0};h.value.push(ns),setTimeout(()=>{D(o)},a)},D=t=>{const e=h.value.findIndex(a=>a.id===t);e>-1&&h.value.splice(e,1)},as=t=>{const e="notification-toast",a={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${e} ${a[t]||a.info}`},is=t=>({success:f,error:z,warning:gs,info:I})[t]||I;return os(()=>{typeof route>"u"?(console.error("Route helper is not available. This will cause navigation issues."),c("Navigation system not properly initialized. Please refresh the page.","error")):console.log("Route helper is available. Navigation should work properly.");try{["competency-assessments.index","assessment-cycle-manager","competency-analytics.index"].forEach(e=>{try{const a=route(e);console.log(`✓ Route ${e} is available: ${a}`)}catch(a){console.error(`✗ Route ${e} failed:`,a)}})}catch(t){console.error("Route testing failed:",t)}}),(t,e)=>(i(),A(ds,null,{default:T(()=>[s("div",fs,[s("div",_s,[s("div",bs,[e[3]||(e[3]=s("div",{class:"title-section"},[s("h1",{class:"dashboard-title"},"Assessment Dashboard"),s("p",{class:"dashboard-subtitle"},"Overview of competency assessments and cycles")],-1)),s("div",ks,[s("button",{onClick:L,disabled:m.value,class:"action-button secondary"},[r(u(vs),{class:"w-4 h-4"}),e[0]||(e[0]=p(" Refresh "))],8,ws),$.value?(i(),n("button",{key:0,onClick:j,class:"action-button secondary"},[r(u(ms),{class:"w-4 h-4"}),e[1]||(e[1]=p(" New Assessment "))])):C("",!0),s("button",{onClick:_,class:"action-button primary"},[r(u(k),{class:"w-4 h-4"}),e[2]||(e[2]=p(" Assessment Cycles "))])])])])]),s("div",xs,[s("div",As,[s("div",Cs,[r(b,{value:l.stats.totalAssessments,label:"Total Assessments",icon:"chart-bar",variant:"primary",trend:l.stats.assessmentTrend,loading:m.value,size:"large",clickable:!0,onClick:B},null,8,["value","trend","loading"]),r(b,{value:l.stats.pendingAssessments,label:"Pending Assessments",icon:"clock",variant:"warning",loading:m.value,size:"large",urgent:l.stats.pendingAssessments>10,clickable:!0,onClick:q},null,8,["value","loading","urgent"]),r(b,{value:l.stats.activeCycles,label:"Active Cycles",icon:"calendar",variant:"success",loading:m.value,size:"large",clickable:!0,onClick:_},null,8,["value","loading"]),r(b,{value:l.stats.completionRate,label:"Completion Rate",icon:"check-circle",variant:"info",suffix:"%",loading:m.value,size:"large"},null,8,["value","loading"])])]),s("div",Ns,[s("div",$s,[s("div",qs,[s("div",{class:"widget-header"},[e[4]||(e[4]=s("h3",{class:"widget-title"},"Pending Assessments",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:q,class:"text-sm text-blue-600 hover:text-blue-800"}," View All ")])]),s("div",Ds,[m.value?(i(),n("div",Rs,[s("div",Ts,[(i(),n(g,null,y(3,a=>s("div",{key:a,class:"flex items-center space-x-3"},e[5]||(e[5]=[s("div",{class:"w-10 h-10 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):l.pendingAssessments.length===0?(i(),n("div",Ss,[r(u(f),{class:"w-12 h-12 text-green-500 mx-auto mb-3"}),e[6]||(e[6]=s("p",{class:"text-gray-500 text-center"},"No pending assessments",-1))])):(i(),n("div",Ps,[(i(!0),n(g,null,y(l.pendingAssessments.slice(0,5),a=>(i(),n("div",{key:a.id,class:"assessment-item",onClick:o=>O(a)},[s("div",zs,[s("div",Is,d(Y(a.employee.name)),1)]),s("div",Us,[s("div",Vs,[r(u(rs),{href:t.route("competency-assessments.by-employee",a.employee.id),class:"text-blue-600 hover:text-blue-800 hover:underline"},{default:T(()=>[p(d(a.employee.name),1)]),_:2},1032,["href"]),p(" - "+d(a.competency.name),1)]),s("div",Ls,[s("span",Bs,d(G(a.assessment_type)),1),s("span",Es,"Due: "+d(W(a.due_date)),1)])]),s("div",js,[K(a)?(i(),n("button",{key:0,onClick:cs(o=>J(a),["stop"]),class:"btn-sm btn-primary"}," Assess ",8,Fs)):(i(),n("span",Qs,d(a.assessment_type==="self"?"Employee only":"Not assigned"),1))])],8,Ms))),128))]))])]),s("div",Os,[s("div",{class:"widget-header"},[e[7]||(e[7]=s("h3",{class:"widget-title"},"Assessment Cycles",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:_,class:"text-sm text-blue-600 hover:text-blue-800"}," Manage Cycles ")])]),s("div",Hs,[m.value?(i(),n("div",Js,[s("div",Ks,[(i(),n(g,null,y(3,a=>s("div",{key:a,class:"flex items-center justify-between"},e[8]||(e[8]=[s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1),s("div",{class:"w-16 h-6 bg-gray-200 rounded"},null,-1)]))),64))])])):l.assessmentCycles.length===0?(i(),n("div",Ys,[r(u(k),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[9]||(e[9]=s("p",{class:"text-gray-500 text-center"},"No active cycles",-1))])):(i(),n("div",Gs,[(i(!0),n(g,null,y(l.assessmentCycles.slice(0,5),a=>(i(),n("div",{key:a.id,class:"cycle-item",onClick:o=>H(a)},[s("div",Xs,[s("div",Zs,d(a.name),1),s("div",se,[s("span",ee,d(X(a.start_date,a.end_date)),1)])]),s("div",te,[s("span",{class:S([ss(a.status),"status-badge"])},d(Z(a.status)),3)]),s("div",ae,[s("div",ie,[s("div",{class:"progress-fill",style:ls({width:`${a.completion_percentage}%`})},null,4)]),s("span",ne,d(a.completion_percentage)+"%",1)])],8,Ws))),128))]))])])])]),s("div",oe,[s("div",re,[s("div",ce,[e[14]||(e[14]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Quick Actions")],-1)),s("div",le,[s("div",de,[$.value?(i(),n("button",{key:0,onClick:E,class:"quick-action-item"},[s("div",ue,[r(u(ys),{class:"w-6 h-6"})]),e[10]||(e[10]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"New Assessment"),s("div",{class:"quick-action-subtitle"},"Create individual assessment")],-1))])):C("",!0),s("button",{onClick:_,class:"quick-action-item"},[s("div",ve,[r(u(k),{class:"w-6 h-6"})]),e[11]||(e[11]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Assessment Cycle"),s("div",{class:"quick-action-subtitle"},"Manage assessment cycles")],-1))]),s("button",{onClick:F,class:"quick-action-item"},[s("div",me,[r(u(hs),{class:"w-6 h-6"})]),e[12]||(e[12]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Analytics"),s("div",{class:"quick-action-subtitle"},"View reports and insights")],-1))]),s("button",{onClick:Q,class:"quick-action-item"},[s("div",ge,[r(u(ps),{class:"w-6 h-6"})]),e[13]||(e[13]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Competencies"),s("div",{class:"quick-action-subtitle"},"Manage competency framework")],-1))])])])]),s("div",ye,[e[17]||(e[17]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Recent Activity")],-1)),s("div",he,[m.value?(i(),n("div",pe,[s("div",fe,[(i(),n(g,null,y(4,a=>s("div",{key:a,class:"flex items-start space-x-3"},e[15]||(e[15]=[s("div",{class:"w-8 h-8 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-full h-3 bg-gray-200 rounded mb-2"}),s("div",{class:"w-2/3 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):l.recentActivity.length===0?(i(),n("div",_e,[r(u(M),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[16]||(e[16]=s("p",{class:"text-gray-500 text-center"},"No recent activity",-1))])):(i(),n("div",be,[(i(!0),n(g,null,y(l.recentActivity.slice(0,6),a=>(i(),n("div",{key:a.id,class:"activity-item"},[s("div",ke,[(i(),A(P(ts(a.type)),{class:"w-4 h-4"}))]),s("div",we,[s("div",xe,d(a.description),1),s("div",Ae,d(es(a.created_at)),1)])]))),128))]))])])])])]),h.value.length>0?(i(),n("div",Ce,[s("div",Ne,[(i(!0),n(g,null,y(h.value,a=>(i(),n("div",{key:a.id,class:S([as(a.type),"notification-card"])},[s("div",$e,[(i(),A(P(is(a.type)),{class:"w-5 h-5"}))]),s("div",qe,[s("p",De,d(a.message),1)]),s("button",{onClick:o=>D(a.id),class:"notification-close"},[r(u(z),{class:"w-4 h-4"})],8,Re)],2))),128))])])):C("",!0)]),_:1}))}},He=us(Te,[["__scopeId","data-v-ca3e29a2"]]);export{He as default};
