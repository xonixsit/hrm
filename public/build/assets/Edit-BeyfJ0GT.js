import{x as Q,f as p,Q as b,g as z,o as W,h as d,k as l,u as r,a as s,t as c,n as j}from"./app-5uPMuJ2B.js";import{A as G}from"./AuthenticatedLayout-Z8WslhXM.js";import{P as J}from"./PageLayout-BzejLHjw.js";import{F as K}from"./FormLayout-DIGF-j0l.js";import{F as g}from"./FormSection-DuDd1i2s.js";import{F as m}from"./FormField-Dbbq7sY1.js";import{B as P}from"./BaseInput-DWpRwvwK.js";import{B as f}from"./BaseSelect-Cj3tPAje.js";import{B as X}from"./BaseTextarea-DZWPMv44.js";import{I as Y}from"./Icon-A4MscuWz.js";import{e as Z,b as ee,r as te,n as h,p as S}from"./icons-DPdWNsHR.js";import"./useAuth-Cb7gcZlj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-DGkCLM35.js";import"./PageHeader-Ba7VCxYK.js";/* empty css                                                                   *//* empty css                                                                  *//* empty css                                                                   */const re={class:"bg-neutral-50 rounded-lg p-4 mb-6"},ae={class:"flex items-center space-x-4"},se={class:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center"},oe={class:"text-lg font-semibold text-neutral-900"},le={class:"text-sm text-neutral-600"},ne={class:"flex items-center space-x-4 mt-1"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ue={class:"bg-neutral-50 rounded-lg p-4"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},me={class:"text-neutral-600"},pe={class:"text-neutral-600"},be={class:"text-neutral-600"},Fe={__name:"Edit",props:{task:{type:Object,required:!0},projects:{type:Array,default:()=>[]}},setup(i){var v,x,w,_,D,V;const o=i,t=Q({project_id:((v=o.task)==null?void 0:v.project_id)||"",name:((x=o.task)==null?void 0:x.name)||"",description:((w=o.task)==null?void 0:w.description)||"",priority:((_=o.task)==null?void 0:_.priority)||"medium",status:((D=o.task)==null?void 0:D.status)||"todo",due_date:((V=o.task)==null?void 0:V.due_date)||""}),T=p(()=>o.projects.map(a=>({value:a.id,label:a.name}))),$=[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"urgent",label:"Urgent"}],U=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"review",label:"In Review"},{value:"done",label:"Done"}],I=[{label:"Dashboard",href:route("dashboard")},{label:"Project Management",href:"#"},{label:"Tasks",href:route("tasks.index")},{label:o.task.name,href:route("tasks.show",o.task.id)},{label:"Edit",current:!0}],C=[{id:"view-task",label:"View Details",icon:ee,variant:"secondary",handler:()=>b.visit(route("tasks.show",o.task.id))},{id:"delete-task",label:"Delete Task",icon:te,variant:"danger",handler:()=>H()}],F=p(()=>[{id:"cancel",label:"Cancel",variant:"secondary",handler:()=>b.visit(route("tasks.show",o.task.id))},{id:"reset",label:"Reset Changes",variant:"ghost",handler:()=>R(),disabled:!k.value},{id:"update",label:"Update Task",type:"submit",variant:"primary",icon:Z,loadingLabel:"Updating Task...",disabled:!M.value||!k.value}]),M=p(()=>t.name&&t.name.trim().length>0&&t.project_id),k=p(()=>t.name!==o.task.name||t.project_id!==o.task.project_id||t.description!==o.task.description||t.priority!==o.task.priority||t.status!==o.task.status||t.due_date!==o.task.due_date),A=a=>({urgent:S,high:S,medium:h,low:h})[a]||h,B=a=>({todo:"To Do",in_progress:"In Progress",review:"In Review",done:"Done"})[a]||a,L=a=>{const e="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium";switch(a){case"todo":return`${e} bg-neutral-100 text-neutral-800`;case"in_progress":return`${e} bg-yellow-100 text-yellow-800`;case"review":return`${e} bg-blue-100 text-blue-800`;case"done":return`${e} bg-green-100 text-green-800`;default:return`${e} bg-neutral-100 text-neutral-800`}},E=a=>({low:"Low Priority",medium:"Medium Priority",high:"High Priority",urgent:"Urgent"})[a]||a,q=a=>{const e="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium";switch(a){case"low":return`${e} bg-green-100 text-green-800`;case"medium":return`${e} bg-yellow-100 text-yellow-800`;case"high":return`${e} bg-orange-100 text-orange-800`;case"urgent":return`${e} bg-red-100 text-red-800`;default:return`${e} bg-neutral-100 text-neutral-800`}},y=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",N=a=>{if(!a)return 0;const e=new Date(a),n=Math.abs(new Date-e);return Math.ceil(n/(1e3*60*60*24))},O=()=>{t.put(route("tasks.update",o.task.id),{onSuccess:()=>{},onError:a=>{console.error("Form submission errors:",a);const e=Object.keys(a)[0];if(e){const u=document.querySelector(`[name="${e}"]`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.focus())}}})},R=()=>{confirm("Are you sure you want to reset all changes? This action cannot be undone.")&&(t.reset(),t.clearErrors())},H=()=>{confirm(`Are you sure you want to delete the task "${o.task.name}"? This action cannot be undone.`)&&b.delete(route("tasks.destroy",o.task.id),{onSuccess:()=>{b.visit(route("tasks.index"))},onError:()=>{alert("Failed to delete task. Please try again.")}})};return(a,e)=>(W(),z(G,null,{default:d(()=>[l(J,{title:`Edit Task: ${i.task.name}`,subtitle:"Update task information and details",breadcrumbs:I,actions:C},{default:d(()=>[l(K,{title:"Task Information",description:"Update the task's information below",actions:F.value,errors:r(t).errors,"is-submitting":r(t).processing,variant:"card",onSubmit:O},{default:d(()=>{var u;return[s("div",re,[s("div",ae,[s("div",se,[l(Y,{name:A(i.task.priority),class:"w-6 h-6 text-primary-600"},null,8,["name"])]),s("div",null,[s("h3",oe,c(i.task.name),1),s("p",le,c(((u=i.task.project)==null?void 0:u.name)||"No project assigned"),1),s("div",ne,[s("span",{class:j(L(i.task.status))},c(B(i.task.status)),3),s("span",{class:j(q(i.task.priority))},c(E(i.task.priority)),3)])])])]),l(g,{title:"Basic Information",description:"Essential details about the task"},{default:d(()=>[s("div",ie,[l(m,{label:"Task Name",required:"",error:r(t).errors.name,help:"Enter a clear, descriptive name for the task"},{default:d(()=>[l(P,{modelValue:r(t).name,"onUpdate:modelValue":e[0]||(e[0]=n=>r(t).name=n),type:"text",placeholder:"e.g., Implement user authentication",error:!!r(t).errors.name,required:""},null,8,["modelValue","error"])]),_:1},8,["error"]),l(m,{label:"Project",required:"",error:r(t).errors.project_id,help:"Select the project this task belongs to"},{default:d(()=>[l(f,{modelValue:r(t).project_id,"onUpdate:modelValue":e[1]||(e[1]=n=>r(t).project_id=n),options:T.value,"option-label":"label","option-value":"value",error:!!r(t).errors.project_id,placeholder:"Select a project"},null,8,["modelValue","options","error"])]),_:1},8,["error"]),l(m,{label:"Description",error:r(t).errors.description,help:"Provide detailed information about the task",class:"md:col-span-2"},{default:d(()=>[l(X,{modelValue:r(t).description,"onUpdate:modelValue":e[2]||(e[2]=n=>r(t).description=n),placeholder:"Describe what needs to be done, acceptance criteria, and any important notes...",error:!!r(t).errors.description,rows:"4"},null,8,["modelValue","error"])]),_:1},8,["error"])])]),_:1}),l(g,{title:"Task Details",description:"Additional task configuration and settings"},{default:d(()=>[s("div",de,[l(m,{label:"Priority",error:r(t).errors.priority,help:"Set the task priority level"},{default:d(()=>[l(f,{modelValue:r(t).priority,"onUpdate:modelValue":e[3]||(e[3]=n=>r(t).priority=n),options:$,"option-label":"label","option-value":"value",error:!!r(t).errors.priority,placeholder:"Select priority"},null,8,["modelValue","error"])]),_:1},8,["error"]),l(m,{label:"Status",error:r(t).errors.status,help:"Current status of the task"},{default:d(()=>[l(f,{modelValue:r(t).status,"onUpdate:modelValue":e[4]||(e[4]=n=>r(t).status=n),options:U,"option-label":"label","option-value":"value",error:!!r(t).errors.status,placeholder:"Select status"},null,8,["modelValue","error"])]),_:1},8,["error"]),l(m,{label:"Due Date",error:r(t).errors.due_date,help:"When should this task be completed"},{default:d(()=>[l(P,{modelValue:r(t).due_date,"onUpdate:modelValue":e[5]||(e[5]=n=>r(t).due_date=n),type:"date",error:!!r(t).errors.due_date},null,8,["modelValue","error"])]),_:1},8,["error"])])]),_:1}),l(g,{title:"Task History",description:"Track changes and important dates"},{default:d(()=>[s("div",ue,[s("div",ce,[s("div",null,[e[6]||(e[6]=s("span",{class:"font-medium text-neutral-700"},"Created:",-1)),s("p",me,c(y(i.task.created_at)),1)]),s("div",null,[e[7]||(e[7]=s("span",{class:"font-medium text-neutral-700"},"Last Updated:",-1)),s("p",pe,c(y(i.task.updated_at)),1)]),s("div",null,[e[8]||(e[8]=s("span",{class:"font-medium text-neutral-700"},"Days Active:",-1)),s("p",be,c(N(i.task.created_at))+" days",1)])])])]),_:1})]}),_:1},8,["actions","errors","is-submitting"])]),_:1},8,["title"])]),_:1}))}};export{Fe as default};
