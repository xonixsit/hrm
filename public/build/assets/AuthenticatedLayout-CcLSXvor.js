import{z as Z,B as K,f as r,e as h,c as k,o as g,a,w as he,k as j,A as oe,p as ge,h as X,n as x,T as We,g as ne,u as _,S as Ue,i as W,t as O,y as de,F as ae,r as se,l as re,Q as Ge,s as xe,q as Ie,C as Ve,M as Ae,N as Ee,O as je,d as Qe,P as qe,D as Oe,K as $e,R as Ze}from"./app-DQp60Kc9.js";import{u as Te}from"./useAuth-D8d4bJvx.js";import{D as Se,E as Je,t as Ye}from"./icons-BYjoUwtB.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ke}from"./useAccessibility-B8I8zccY.js";const Xe={class:"relative"},et={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(i){const t=i,e=u=>{l.value&&u.key==="Escape"&&(l.value=!1)};Z(()=>document.addEventListener("keydown",e)),K(()=>document.removeEventListener("keydown",e));const s=r(()=>({48:"w-48"})[t.width.toString()]),c=r(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),l=h(!1);return(u,y)=>(g(),k("div",Xe,[a("div",{onClick:y[0]||(y[0]=w=>l.value=!l.value)},[oe(u.$slots,"trigger")]),he(a("div",{class:"fixed inset-0 z-40",onClick:y[1]||(y[1]=w=>l.value=!1)},null,512),[[ge,l.value]]),j(We,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:X(()=>[he(a("div",{class:x(["absolute z-50 mt-2 rounded-md shadow-lg",[s.value,c.value]]),style:{display:"none"},onClick:y[2]||(y[2]=w=>l.value=!1)},[a("div",{class:x(["rounded-md ring-1 ring-black ring-opacity-5",i.contentClasses])},[oe(u.$slots,"content")],2)],2),[[ge,l.value]])]),_:3})]))}},Ce={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(i){return(t,e)=>(g(),ne(_(Ue),{href:i.href,method:i.method,as:i.as,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:X(()=>[oe(t.$slots,"default")]),_:3},8,["href","method","as"]))}},tt={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},ot={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},nt={class:"flex items-start"},at={class:"ml-3 flex-1"},st={class:"mt-1 text-sm text-red-700"},rt={key:0,class:"mt-3"},it={__name:"NavigationErrorDisplay",setup(i){const t=h(!1),e=h(""),s=h(null),c=h(null),l=r(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),u=(C,B=null)=>{e.value=C,s.value=B,t.value=!0,c.value&&clearTimeout(c.value),c.value=setTimeout(()=>{w()},1e4)},y=async()=>{if(s.value)try{await s.value()}catch(C){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",C)}w()},w=()=>{t.value=!1,e.value="",s.value=null,c.value&&(clearTimeout(c.value),c.value=null)};return Z(()=>{typeof window<"u"&&(window.showNavigationError=u)}),K(()=>{typeof window<"u"&&delete window.showNavigationError,c.value&&clearTimeout(c.value)}),(C,B)=>t.value?(g(),k("div",tt,[a("div",ot,[a("div",nt,[B[2]||(B[2]=a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),a("div",at,[B[0]||(B[0]=a("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),a("div",st,O(e.value),1),s.value?(g(),k("div",rt,[a("button",{onClick:y,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},O(l.value),1)])):W("",!0)]),a("div",{class:"ml-4 flex-shrink-0"},[a("button",{onClick:w,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},B[1]||(B[1]=[a("span",{class:"sr-only"},"Close",-1),a("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):W("",!0)}},ee=h("light"),te=h("light"),le=h(!1),ce={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function Fe(){const i=r(()=>le.value?te.value:ee.value),t=r(()=>ce[i.value]),e=r(()=>i.value==="dark"),s=r(()=>i.value==="light"),c=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(n){return console.warn("Failed to detect system theme:",n),"light"}},l=(n,d=!1)=>{try{const R={theme:b(n)?n:"light",useSystem:!!d,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(R))}catch(S){console.warn("Failed to save theme preference:",S);try{localStorage.removeItem("theme-preference")}catch(R){console.warn("Failed to clear corrupted theme preference:",R)}}},u=n=>{if(!(typeof document>"u"))try{const d=document.documentElement,S=b(n)?n:"light";d.classList.remove("theme-light","theme-dark"),d.classList.add(`theme-${S}`),y(S);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:S,config:ce[S]}}))}catch(R){console.warn("Failed to dispatch theme change event:",R)}}catch(d){console.error("Failed to apply theme:",d);try{const S=document.documentElement;S.classList.remove("theme-light","theme-dark"),S.classList.add("theme-light"),y("light")}catch(S){console.error("Failed to apply fallback theme:",S)}}},y=n=>{if(!(typeof document>"u"))try{const d=document.documentElement;n==="dark"?(d.style.setProperty("--color-neutral-50","#0a0a0a"),d.style.setProperty("--color-neutral-100","#111827"),d.style.setProperty("--color-neutral-200","#262626"),d.style.setProperty("--color-neutral-300","#404040"),d.style.setProperty("--color-neutral-400","#525252"),d.style.setProperty("--color-neutral-500","#6b7280"),d.style.setProperty("--color-neutral-600","#a3a3a3"),d.style.setProperty("--color-neutral-700","#d4d4d4"),d.style.setProperty("--color-neutral-800","#e5e5e5"),d.style.setProperty("--color-neutral-900","#fafafa"),d.style.setProperty("--color-neutral-950","#ffffff")):(d.style.setProperty("--color-neutral-50","#fafafa"),d.style.setProperty("--color-neutral-100","#f5f5f5"),d.style.setProperty("--color-neutral-200","#e5e5e5"),d.style.setProperty("--color-neutral-300","#d4d4d4"),d.style.setProperty("--color-neutral-400","#a3a3a3"),d.style.setProperty("--color-neutral-500","#6b7280"),d.style.setProperty("--color-neutral-600","#525252"),d.style.setProperty("--color-neutral-700","#404040"),d.style.setProperty("--color-neutral-800","#262626"),d.style.setProperty("--color-neutral-900","#111827"),d.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(d){console.warn("Failed to update theme properties:",d)}},w=n=>{u(n)},C=n=>{if(!ce[n]){console.warn(`Theme "${n}" not found`);return}ee.value=n,le.value=!1,l(n,!1),w(n)},B=()=>{le.value=!0;const n=c();te.value=n,l(n,!0),w(n)},f=()=>{const n=i.value==="light"?"dark":"light";C(n)},b=n=>ce.hasOwnProperty(n),T=()=>Object.values(ce),L=()=>{},z=()=>{const n=[];if(b(ee.value)||n.push(`Invalid current theme: ${ee.value}`),b(te.value)||n.push(`Invalid system theme: ${te.value}`),b(i.value)||n.push(`Invalid active theme: ${i.value}`),typeof document<"u"){const d=document.documentElement,S=d.classList.contains("theme-light"),R=d.classList.contains("theme-dark");!S&&!R&&n.push("No theme class found on document root"),S&&R&&n.push("Multiple theme classes found on document root");const N=`theme-${i.value}`;d.classList.contains(N)||n.push(`Expected theme class ${N} not found on document root`)}return{isValid:n.length===0,issues:n}},A=()=>{if(!(typeof document>"u"))try{const n=document.documentElement;return["theme-light","theme-dark"].forEach(S=>{n.classList.remove(S)}),!0}catch(n){return console.warn("Failed to cleanup theme classes:",n),!1}},o=()=>{try{ee.value="light",te.value=c(),le.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference from localStorage:",n)}return u("light"),!0}catch(n){return console.error("Failed to reset theme to default:",n),!1}},p=()=>{console.warn("Attempting theme system recovery...");try{if(A(),o())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(n){console.error("Theme system recovery failed:",n);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(d){return console.error("Last resort theme recovery failed:",d),!1}}},v=()=>{try{ee.value="light",te.value="light",le.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference:",n)}if(typeof document<"u"){const n=document.documentElement;n.classList.remove("theme-light","theme-dark","dark","light"),n.classList.add("theme-light"),n.style.setProperty("--color-neutral-50","#fafafa"),n.style.setProperty("--color-neutral-100","#f5f5f5"),n.style.setProperty("--color-neutral-200","#e5e5e5"),n.style.setProperty("--color-neutral-300","#d4d4d4"),n.style.setProperty("--color-neutral-400","#a3a3a3"),n.style.setProperty("--color-neutral-500","#6b7280"),n.style.setProperty("--color-neutral-600","#525252"),n.style.setProperty("--color-neutral-700","#404040"),n.style.setProperty("--color-neutral-800","#262626"),n.style.setProperty("--color-neutral-900","#111827"),n.style.setProperty("--color-neutral-950","#0a0a0a")}return null}catch(n){console.error("Theme initialization failed:",n);try{typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(d){console.error("Emergency theme fallback failed:",d)}return null}};return Z(()=>{v()}),de(i,n=>{w(n)}),{currentTheme:r(()=>ee.value),systemTheme:r(()=>te.value),activeTheme:i,themeConfig:t,isDark:e,isLight:s,isSystemThemePreferred:r(()=>le.value),setTheme:C,toggleTheme:f,useSystemTheme:B,validateTheme:b,getAvailableThemes:T,debugThemeState:L,initializeTheme:v,validateThemeState:z,cleanupThemeClasses:A,resetThemeToDefault:o,recoverThemeSystem:p,cleanupAndApplyTheme:u,themes:r(()=>ce)}}const lt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ct={class:"flex justify-between h-16"},ut={class:"flex items-center space-x-8"},dt={class:"flex-shrink-0"},vt={class:"hidden md:flex space-x-1"},mt=["href"],ft={class:"py-1"},pt=["href"],ht={class:"flex items-center space-x-4"},gt={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},yt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wt={class:"hidden md:block"},bt={class:"py-1"},kt=["href"],xt={class:"md:hidden px-4 pb-3"},Tt={class:"mt-2 space-y-1"},_t=["href"],At={__name:"QuickTopNav",props:{currentRoute:{type:String,required:!0}},setup(i){const t=i,{user:e,roles:s}=Te(),{isDark:c,toggleTheme:l}=Fe(),u=h(!1),y=h(!1),w=h(!1),C=r(()=>{var A;return(A=e.value)!=null&&A.name?e.value.name.split(" ").map(o=>o[0]).join("").toUpperCase():"U"}),B=r(()=>[{route:"dashboard",label:"Dashboard"},{route:"profile.edit",label:"My Profile"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),f=r(()=>{const A=s.value,o=[{route:"work-reports.index",label:"Work Reports"},{route:"work-reports.leaderboard",label:"Leaderboard"},{route:"feedbacks.index",label:"Feedback"}];return(A.includes("Admin")||A.includes("Manager")||A.includes("HR"))&&o.push({route:"employees.index",label:"Employee Management"},{route:"competency-assessments.index",label:"All Assessments"}),A.includes("Admin")&&o.push({route:"admin.roles.index",label:"Role Management"},{route:"system-settings.index",label:"System Settings"},{route:"organizational-analytics.index",label:"Analytics"}),o}),b=r(()=>[...B.value,...f.value]),T=r(()=>["block px-4 py-2 text-sm transition-colors",c.value?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"]),L=A=>{var o;return t.currentRoute===A||((o=t.currentRoute)==null?void 0:o.startsWith(A.split(".")[0]))},z=()=>{Ge.post(route("logout"))};return(A,o)=>{var p;return g(),k("nav",{class:x(["w-full border-b transition-colors duration-200 sticky top-0 z-50",_(c)?"bg-gray-900 border-gray-700":"bg-white border-gray-200"])},[a("div",lt,[a("div",ct,[a("div",ut,[a("div",dt,[a("h1",{class:x(["text-xl font-bold",_(c)?"text-white":"text-gray-900"])}," HR Management ",2)]),a("div",vt,[(g(!0),k(ae,null,se(B.value,v=>(g(),k("a",{key:v.route,href:A.route(v.route),class:x(["px-3 py-2 rounded-md text-sm font-medium transition-colors",L(v.route)?_(c)?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-700":_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"])},O(v.label),11,mt))),128)),a("div",{class:"relative",onMouseenter:o[0]||(o[0]=v=>u.value=!0),onMouseleave:o[1]||(o[1]=v=>u.value=!1)},[a("button",{class:x(["px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center",_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"])},o[6]||(o[6]=[re(" More "),a("svg",{class:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),2),he(a("div",{class:x(["absolute left-0 mt-1 w-56 rounded-md shadow-lg z-50",_(c)?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"])},[a("div",ft,[(g(!0),k(ae,null,se(f.value,v=>(g(),k("a",{key:v.route,href:A.route(v.route),class:x(["block px-4 py-2 text-sm transition-colors",L(v.route)?_(c)?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-700":_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"])},O(v.label),11,pt))),128))])],2),[[ge,u.value]])],32)])]),a("div",ht,[a("button",{onClick:o[2]||(o[2]=(...v)=>_(l)&&_(l)(...v)),class:x(["p-2 rounded-md transition-colors",_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"])},[_(c)?(g(),k("svg",gt,o[7]||(o[7]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(g(),k("svg",yt,o[8]||(o[8]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])))],2),a("div",{class:"relative",onMouseenter:o[3]||(o[3]=v=>y.value=!0),onMouseleave:o[4]||(o[4]=v=>y.value=!1)},[a("button",{class:x(["flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"])},[a("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",_(c)?"bg-blue-600 text-white":"bg-blue-500 text-white"])},O(C.value),3),a("span",wt,O((p=_(e))==null?void 0:p.name),1),o[9]||(o[9]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2),he(a("div",{class:x(["absolute right-0 mt-1 w-48 rounded-md shadow-lg z-50",_(c)?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"])},[a("div",bt,[a("a",{href:A.route("profile.edit"),class:x(T.value)},"Profile Settings",10,kt),a("button",{onClick:z,class:x([T.value,"w-full text-left text-red-600 hover:text-red-700 hover:bg-red-50"])}," Sign Out ",2)])],2),[[ge,y.value]])],32)])])]),a("div",xt,[a("button",{onClick:o[5]||(o[5]=v=>w.value=!w.value),class:x(["w-full flex items-center justify-between px-3 py-2 rounded-md text-sm font-medium",_(c)?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"])},[o[11]||(o[11]=re(" Menu ")),(g(),k("svg",{class:x(["w-4 h-4 transition-transform",{"rotate-180":w.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[10]||(o[10]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),he(a("div",Tt,[(g(!0),k(ae,null,se(b.value,v=>(g(),k("a",{key:v.route,href:A.route(v.route),class:x(["block px-3 py-2 rounded-md text-sm font-medium transition-colors",L(v.route)?_(c)?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-700":_(c)?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"])},O(v.label),11,_t))),128))],512),[[ge,w.value]])])],2)}}};function St(i,t){return g(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function Ct(i,t){return g(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const Bt=["aria-live"],It={class:"toast-content"},$t={key:0,class:"toast-icon"},Et={class:"toast-message"},Lt={key:0,class:"toast-title"},Mt={class:"toast-text"},Pt={key:1,class:"toast-actions"},Dt=["aria-label"],Nt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:i=>["success","error","warning","info","loading"].includes(i)},position:{type:String,default:"top-right",validator:i=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(i)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:i=>["low","normal","high"].includes(i)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:i=>["sm","md","lg"].includes(i)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(i,{expose:t,emit:e}){const s=i,c=e,l=h(!1),u=h(null),y=h(null),w=h(100),C=h(!1),B=h(0),f=h(0),b=r(()=>Se("x-mark")),T=r(()=>{if(s.icon)return Se(s.icon);const $={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return Se($[s.type]||$.info)}),L=r(()=>["toast-notification",`toast-notification--${s.type}`,`toast-notification--${s.size}`,`toast-notification--${s.position}`,{"toast-notification--with-title":s.title,"toast-notification--persistent":s.persistent,"toast-notification--with-action":s.actionText}]),z=r(()=>({zIndex:s.zIndex})),A=r(()=>["w-5 h-5",{"animate-spin":s.type==="loading"}]),o=r(()=>s.closable||s.actionText),p=r(()=>[`toast-progress--${s.type}`]),v=r(()=>({width:`${w.value}%`})),n=()=>{l.value=!0,s.sound&&P(),!s.persistent&&s.duration>0&&R()},d=()=>{l.value=!1,D(),c("close")},S=()=>{c("action"),s.persistent||d()},R=()=>{s.duration<=0||(B.value=Date.now(),f.value=s.duration,u.value=setTimeout(()=>{d()},s.duration),N())},N=()=>{if(!s.showProgress)return;const $=Date.now(),V=()=>{if(!l.value||C.value)return;const M=Date.now()-$,Y=Math.max(0,100-M/s.duration*100);w.value=Y,Y>0&&(y.value=requestAnimationFrame(V))};V()},m=()=>{if(!u.value||s.persistent)return;C.value=!0,clearTimeout(u.value),cancelAnimationFrame(y.value);const $=Date.now()-B.value;f.value=Math.max(0,s.duration-$)},I=()=>{!C.value||s.persistent||(C.value=!1,f.value>0&&(B.value=Date.now(),u.value=setTimeout(()=>{d()},f.value),N()))},D=()=>{u.value&&(clearTimeout(u.value),u.value=null),y.value&&(cancelAnimationFrame(y.value),y.value=null)},P=()=>{try{const $=new Audio,V={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};$.src=V[s.type]||V.info,$.volume=.3,$.play().catch(()=>{})}catch{}};return Z(()=>{n()}),K(()=>{D()}),de(()=>s.duration,()=>{l.value&&!s.persistent&&(D(),R())}),t({show:n,close:d,pauseTimer:m,resumeTimer:I}),($,V)=>(g(),ne(Ve,{to:"body"},[l.value?(g(),k("div",{key:0,class:x(L.value),style:Ie(z.value),role:"alert","aria-live":i.priority==="high"?"assertive":"polite",onMouseenter:m,onMouseleave:I},[a("div",It,[i.showIcon?(g(),k("div",$t,[(g(),ne(xe(T.value),{class:x(A.value)},null,8,["class"]))])):W("",!0),a("div",Et,[i.title?(g(),k("div",Lt,O(i.title),1)):W("",!0),a("div",Mt,[oe($.$slots,"default",{},()=>[re(O(i.message),1)],!0)])]),o.value?(g(),k("div",Pt,[i.actionText?(g(),k("button",{key:0,onClick:S,class:"toast-action-button"},O(i.actionText),1)):W("",!0),i.closable?(g(),k("button",{key:1,onClick:d,class:"toast-close-button","aria-label":i.closeLabel},[(g(),ne(xe(b.value),{class:"w-4 h-4"}))],8,Dt)):W("",!0)])):W("",!0)]),i.showProgress&&i.duration>0?(g(),k("div",{key:0,class:x(["toast-progress",p.value]),style:Ie(v.value)},null,6)):W("",!0)],46,Bt)):W("",!0)]))}},Ot=ye(Nt,[["__scopeId","data-v-11baa49e"]]);class Ft{constructor(){this.notifications=Ae([]),this.maxNotifications=h(5),this.defaultDuration=h(5e3),this.positions=Ae({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=Ae({enabled:!0,volume:.3})}add(t){const e=this.generateId(),s=t.position||"top-right",c={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:s,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(c),this.positions[s].push(c),this.manageQueueSize(s),!c.persistent&&c.duration>0&&setTimeout(()=>{this.remove(e)},c.duration),e}remove(t){const e=this.notifications.find(u=>u.id===t);if(!e)return;const s=this.notifications.findIndex(u=>u.id===t);s>-1&&this.notifications.splice(s,1);const c=this.positions[e.position],l=c.findIndex(u=>u.id===t);l>-1&&c.splice(l,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(s=>{this.remove(s.id)})}clearType(t){this.notifications.filter(s=>s.type===t).forEach(s=>{this.remove(s.id)})}update(t,e){const s=this.notifications.find(c=>c.id===t);s&&Object.assign(s,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const s=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:c=>{this.remove(s),e(c==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(s=>{const c=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(c),s(!0)},onClose:()=>{s(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(c=>{const l=this.notifications.findIndex(u=>u.id===c.id);l>-1&&this.notifications.splice(l,1)})}}const G=new Ft,Rt={class:"notification-container"},zt={__name:"NotificationContainer",setup(i,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];r(()=>G.notifications.filter(f=>!f.component));const s=r(()=>G.notifications.filter(f=>f.component)),c=f=>{const b="fixed z-50 pointer-events-none",T={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${b} ${T[f]||T["top-right"]}`},l=f=>G.getByPosition(f),u=f=>f.includes("left")?"slide-left":f.includes("right")?"slide-right":f.includes("center")?"slide-center":"slide-right",y=f=>{G.remove(f)},w=(f,b="action")=>{const T=G.getById(f);T!=null&&T.onAction&&T.onAction(b)},C=()=>{window.notify={success:(f,b)=>G.success(f,b),error:(f,b)=>G.error(f,b),warning:(f,b)=>G.warning(f,b),info:(f,b)=>G.info(f,b),loading:(f,b)=>G.loading(f,b),confirm:f=>G.confirm(f),alert:(f,b)=>G.alert(f,b),clear:()=>G.clear(),remove:f=>G.remove(f)}},B=()=>{window.notify&&delete window.notify};return Z(()=>{C()}),K(()=>{B()}),t({notificationQueue:G,notify:window.notify}),(f,b)=>(g(),k("div",Rt,[(g(),k(ae,null,se(e,T=>a("div",{key:T,class:x(c(T))},[j(je,{name:u(T),tag:"div",class:"space-y-2"},{default:X(()=>[(g(!0),k(ae,null,se(l(T),L=>(g(),ne(Ot,Ee({key:L.id},{ref_for:!0},L,{onClose:z=>y(L.id),onAction:z=>w(L.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(g(!0),k(ae,null,se(s.value,T=>(g(),ne(xe(T.component||"NotificationModal"),Ee({key:T.id,ref_for:!0},T.props,{onClose:L=>y(T.id),onConfirm:L=>w(T.id,"confirm"),onCancel:L=>w(T.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Ht=ye(zt,[["__scopeId","data-v-67e6c621"]]),Wt={class:"floating-attendance-widget"},Ut={class:"status-indicator"},Gt={class:"time-info"},Vt={class:"time-display"},jt={class:"time-label-mini"},Qt={class:"widget-header"},qt={class:"status-info"},Zt={class:"status-text"},Jt={class:"timer-section"},Yt={class:"timer-value"},Kt={class:"timer-label"},Xt={class:"quick-actions"},eo=["disabled"],to=["disabled"],oo={class:"quick-stats"},no={class:"stat"},ao={class:"stat-value"},so={class:"stat"},ro={class:"stat-value"},io={__name:"FloatingAttendanceWidget",setup(i){const t=h(!1),e=h({clockedIn:!1,onBreak:!1,clockInTime:null}),s=h(!1),c=h("0h 0m 0s"),l=h(null),u=()=>{try{const m={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:l.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(m))}catch(m){console.warn("Failed to save attendance state to localStorage:",m)}},y=()=>{try{const m=localStorage.getItem("floating-attendance-state");if(m){const I=JSON.parse(m),D=new Date(I.lastUpdate);if((new Date-D)/(1e3*60)<5)return e.value.clockedIn=I.clockedIn||!1,e.value.onBreak=I.onBreak||!1,e.value.clockInTime=I.clockInTime||null,l.value=I.breakStartTime||null,!0}}catch(m){console.warn("Failed to load attendance state from localStorage:",m)}return!1};let w=null;const C=r(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),B=r(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),f=r(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),b=r(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),T=r(()=>s.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),L=r(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),z=r(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const m=new Date(e.value.clockInTime),D=new Date-m,P=Math.floor(D/(1e3*60)),$=Math.floor(P/60),V=P%60;return`${$}h ${V}m`}),A=r(()=>{if(e.value.onBreak&&l.value){const m=new Date(l.value);if(isNaN(m.getTime()))return"0h 0m 1s";{const D=Math.max(0,new Date-m),P=Math.floor(D/(1e3*60*60)),$=Math.floor(D%(1e3*60*60)/(1e3*60)),V=Math.floor(D%(1e3*60)/1e3);return`${P}h ${$}m ${V}s`}}return"0h 0m"});r(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const o=()=>{t.value=!t.value},p=()=>{if(e.value.clockedIn&&e.value.clockInTime){const m=new Date;let I;e.value.onBreak&&l.value?I=new Date(l.value):I=new Date(e.value.clockInTime);const D=m-I,P=Math.floor(D/(1e3*60*60)),$=Math.floor(D%(1e3*60*60)/(1e3*60)),V=Math.floor(D%(1e3*60)/1e3);c.value=`${P}h ${$}m ${V}s`}else c.value="0h 0m 0s"},v=async()=>{try{if(s.value=!0,e.value.clockedIn){const m=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,l.value=null,c.value="0h 0m 0s",u(),N()}else{const m=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=m.data.clock_in_time||new Date().toISOString(),u(),N()}}catch(m){console.error("Clock in/out failed:",m),alert("Action failed: "+m.message)}finally{s.value=!1}},n=async()=>{try{if(s.value=!0,e.value.onBreak){const m=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,l.value=null,u(),N()}else{l.value=new Date().toISOString(),e.value.onBreak=!0;const m=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});m.data.break_start_time&&(l.value=m.data.break_start_time),u(),N()}}catch(m){console.error("Break action failed:",m),alert("Action failed: "+m.message)}finally{s.value=!1}},d=async()=>{var m,I;try{const P=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=P.clocked_in||!1,e.value.onBreak=P.on_break||!1,e.value.clockInTime=P.clock_in_time||null,P.on_break)if(P.break_start_time)l.value=P.break_start_time;else if((m=P.current_session)!=null&&m.current_break_start)l.value=P.current_session.current_break_start;else if((I=P.current_session)!=null&&I.break_sessions&&P.current_session.break_sessions.length>0){const $=P.current_session.break_sessions[P.current_session.break_sessions.length-1];$&&!$.end&&(l.value=$.start)}else l.value||(l.value=new Date().toISOString());else l.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:l.value})}catch(D){console.error("Failed to fetch attendance status:",D)}},S=m=>{m.key==="attendance-update"&&d()},R=m=>{console.log("FloatingWidget: Received attendance state change:",m.detail);const{clockedIn:I,onBreak:D,clockInTime:P,breakStartTime:$}=m.detail;e.value.clockedIn=I,e.value.onBreak=D,e.value.clockInTime=P,D&&$?l.value=$:D||(l.value=null),u(),p(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:l.value,eventBreakStartTime:$})},N=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(m){console.warn("Failed to broadcast attendance update:",m)}};return Z(async()=>{y()&&p(),await d(),u(),p(),w=setInterval(p,1e3),window.addEventListener("storage",S),window.addEventListener("attendance-state-changed",R),console.log("FloatingWidget: Event listeners registered")}),K(()=>{w&&clearInterval(w),window.removeEventListener("storage",S),window.removeEventListener("attendance-state-changed",R),console.log("FloatingWidget: Event listeners removed")}),(m,I)=>(g(),k("div",Wt,[t.value?W("",!0):(g(),k("div",{key:0,onClick:o,class:x(["floating-button",b.value])},[a("div",Ut,[a("div",{class:x(f.value)},null,2)]),a("div",Gt,[a("div",Vt,O(c.value),1),a("div",jt,O(B.value),1)]),j(_(Je),{class:"w-4 h-4 expand-icon"})],2)),t.value?(g(),k("div",{key:1,class:"expanded-widget",onClick:I[0]||(I[0]=Qe(()=>{},["stop"]))},[a("div",Qt,[a("div",qt,[a("div",{class:x(f.value)},null,2),a("span",Zt,O(C.value),1)]),a("button",{onClick:o,class:"minimize-btn",title:"Minimize"},[j(_(Ye),{class:"w-4 h-4"})])]),a("div",Jt,[a("div",Yt,O(c.value),1),a("div",Kt,O(B.value),1)]),a("div",Xt,[a("button",{onClick:v,disabled:s.value,class:x(L.value)},O(T.value),11,eo),e.value.clockedIn?(g(),k("button",{key:0,onClick:n,disabled:s.value,class:"break-action"},[(g(),ne(xe(e.value.onBreak?_(Ct):_(St)),{class:"w-3 h-3"})),re(" "+O(e.value.onBreak?"End":"Break"),1)],8,to)):W("",!0)]),a("div",oo,[a("div",no,[a("span",ao,O(z.value),1),I[1]||(I[1]=a("span",{class:"stat-label"},"Today",-1))]),a("div",so,[a("span",ro,O(A.value),1),I[2]||(I[2]=a("span",{class:"stat-label"},"Break",-1))])])])):W("",!0),t.value?(g(),k("div",{key:2,class:"backdrop",onClick:o})):W("",!0)]))}},lo=ye(io,[["__scopeId","data-v-421365b8"]]),co={class:"skip-links","aria-label":"Skip navigation links"},uo=["href","onClick"],vo={__name:"SkipLinks",setup(i){const{skipLinks:t,handleSkipLinkClick:e}=Ke();return(s,c)=>(g(),k("div",co,[(g(!0),k(ae,null,se(_(t),l=>(g(),k("a",{key:l.href,href:l.href,class:"skip-link sr-only-focusable",onClick:u=>_(e)(u,l.href)},O(l.label),9,uo))),128))]))}},mo=ye(vo,[["__scopeId","data-v-f9a7b518"]]),fo={class:"live-regions"},po={__name:"LiveRegion",setup(i){const t=h(null),e=h(null),s=h(null);return Z(()=>{qe.init()}),(c,l)=>(g(),k("div",fo,[a("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),a("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),a("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:s},null,512)]))}},ho=ye(po,[["__scopeId","data-v-94955163"]]),E={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920},Le={tablet:{min:768},desktop:{min:1024}},Be={minimum:44,comfortable:48,large:56};function go(i){return i===void 0&&(i=typeof window<"u"&&window.innerWidth||1024),i<Le.tablet.min?"mobile":i<Le.desktop.min?"tablet":"desktop"}function Re(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function yo(i="comfortable"){const t=go(),e=Be[i]||Be.comfortable;return t==="mobile"?Math.max(e,Be.minimum):e}function ze(i,t){let e;return function(...c){const l=()=>{clearTimeout(e),i(...c)};clearTimeout(e),e=setTimeout(l,t)}}function wo(i,t){let e;return function(...c){e||(i.apply(this,c),e=!0,setTimeout(()=>e=!1,t))}}function bo(){if(typeof window>"u")return{top:0,right:0,bottom:0,left:0};const i=getComputedStyle(document.documentElement);return{top:parseInt(i.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(i.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(i.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(i.getPropertyValue("env(safe-area-inset-left)"))||0}}function ko(){if(!Re())return;let i=window.innerHeight;const t=()=>{const e=window.innerHeight;i-e>150?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")};return window.addEventListener("resize",ze(t,100)),()=>{window.removeEventListener("resize",t),document.body.classList.remove("keyboard-visible")}}const F=h(0),Me=h(0),Pe=h("portrait");function He(){const i=()=>{typeof window<"u"&&(F.value=window.innerWidth,Me.value=window.innerHeight,Pe.value=window.innerWidth>window.innerHeight?"landscape":"portrait")};i();const t=r(()=>F.value>=E.sm),e=r(()=>F.value>=E.md),s=r(()=>F.value>=E.lg),c=r(()=>F.value>=E.xl),l=r(()=>F.value>=E["2xl"]),u=r(()=>F.value<E.sm),y=r(()=>F.value>=E.sm&&F.value<E.lg),w=r(()=>F.value>=E.lg),C=r(()=>F.value>=E["2xl"]?"2xl":F.value>=E.xl?"xl":F.value>=E.lg?"lg":F.value>=E.md?"md":F.value>=E.sm?"sm":"xs"),B=r(()=>u.value?"mobile":y.value?"tablet":"desktop"),f=r(()=>Re()),b=r(()=>typeof window>"u"?1:window.devicePixelRatio||1),T=r(()=>b.value>1),L=r(()=>bo()),z=h(!1);let A=null,o=null;const p=M=>F.value>=E[M],v=M=>{const Y=Object.keys(E),U=Y.indexOf(M);if(U===-1)return!1;const ie=E[M],we=Y[U+1],_e=we?E[we]-1:1/0;return F.value>=ie&&F.value<=_e},n=M=>F.value<E[M],d=M=>{const Y=Object.keys(E).sort((U,ie)=>E[ie]-E[U]);for(const U of Y)if(F.value>=E[U]&&M[U]!==void 0)return M[U];return M.xs||M[Object.keys(M)[0]]},S=M=>d(M),R=()=>({sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"})[C.value]||"100%",N=M=>d(M),m=(M,Y="up")=>{const U=E[M];if(!U)return"";switch(Y){case"up":return`(min-width: ${U}px)`;case"down":return`(max-width: ${U-1}px)`;case"only":const ie=Object.keys(E).find(_e=>E[_e]>U),we=ie?E[ie]-1:9999;return`(min-width: ${U}px) and (max-width: ${we}px)`;default:return`(min-width: ${U}px)`}};let I;const D=()=>{clearTimeout(I),I=setTimeout(i,100)},P=(M="comfortable")=>yo(M),$=M=>d(M,F.value);Z(()=>{if(i(),typeof window<"u"){window.addEventListener("resize",D),window.addEventListener("orientationchange",i),A=ko();const M=()=>{z.value=document.body.classList.contains("keyboard-visible")};o=new MutationObserver(M),o.observe(document.body,{attributes:!0,attributeFilter:["class"]})}}),K(()=>{typeof window<"u"&&(window.removeEventListener("resize",D),window.removeEventListener("orientationchange",i)),clearTimeout(I),A&&typeof A=="function"&&A(),o&&o.disconnect()});const V=()=>{};return{windowWidth:r(()=>F.value),windowHeight:r(()=>Me.value),orientation:r(()=>Pe.value),isSmUp:t,isMdUp:e,isLgUp:s,isXlUp:c,is2XlUp:l,isMobile:u,isTablet:y,isDesktop:w,isTouchDevice:f,isHighDensity:T,currentBreakpoint:C,deviceType:B,pixelRatio:b,safeAreaInsets:L,isKeyboardVisible:r(()=>z.value),isBreakpoint:p,isBreakpointOnly:v,isBreakpointDown:n,getResponsiveValue:d,getGridColumns:S,getContainerMaxWidth:R,getResponsiveSpacing:N,createMediaQuery:m,getOptimalTouchSize:P,getResponsiveValueFromConfig:$,debugResponsive:V,breakpoints:r(()=>E)}}const ue=1024,De=150,Ne=200,Q=h(0),ve=h(0),me=h(!1),be=h(null),fe=h([]),pe=h("portrait"),xo=r(()=>pe.value==="landscape");function To(){const i=r(()=>Q.value>=ue),t=r(()=>Q.value<ue),e=r(()=>i.value?"desktop":"mobile"),s=r(()=>be.value?be.value.mode!==e.value:!1),c=h({currentRoute:null,userPreferences:{},navigationState:{},scrollPosition:0,timestamp:null}),l=()=>{if(typeof window>"u")return;const p=window.innerWidth,v=window.innerHeight,n=p>v?"landscape":"portrait";Q.value!==0&&(be.value={width:Q.value,height:ve.value,mode:e.value,orientation:pe.value,timestamp:Date.now()}),Q.value=p,ve.value=v,pe.value=n};l();const u=ze(()=>{l()},De),y=wo(()=>{typeof window<"u"&&(Q.value=window.innerWidth,ve.value=window.innerHeight)},16),w=(p={})=>{const v={currentRoute:window.location.pathname,scrollPosition:window.scrollY||0,timestamp:Date.now(),breakpoint:Q.value,navigationMode:e.value,...p};return c.value=v,fe.value.unshift(v),fe.value.length>5&&(fe.value=fe.value.slice(0,5)),v},C=()=>{if(!c.value.timestamp)return null;try{return c.value.scrollPosition&&window.scrollTo(0,c.value.scrollPosition),c.value}catch(p){return console.error("[BreakpointManager] Error restoring state:",p),null}},B=async(p,v)=>{if(me.value){console.warn("[BreakpointManager] Transition already in progress, skipping");return}me.value=!0;try{const n=w({fromMode:p,toMode:v,transitionReason:"breakpoint_change"});return await Oe(),await new Promise(d=>setTimeout(d,Ne)),C(),n}catch(n){throw console.error("[BreakpointManager] Transition error:",n),n}finally{me.value=!1}},f=()=>{w({reason:"device_rotation"}),setTimeout(()=>{l(),C()},100)},b=()=>{w({reason:"browser_zoom"}),l()},T=()=>{if(typeof window>"u")return!1;const p=window.innerWidth,v=Q.value,n=Math.abs(p-v);return n>10?(console.warn("[BreakpointManager] Breakpoint conflict detected:",{actual:p,reported:v,difference:n}),l(),!0):!1},L=(p=Q.value)=>Math.abs(p-ue)<5,z=(p=Q.value)=>p-ue,A=()=>({currentWidth:Q.value,currentHeight:ve.value,navigationBreakpoint:ue,navigationMode:e.value,isTransitioning:me.value,orientation:pe.value,isExactBreakpoint:L(),breakpointDistance:z(),hasChanged:s.value,previousState:be.value}),o=()=>{};return de(e,async(p,v)=>{if(v&&p!==v)try{await B(v,p)}catch(n){console.error("[BreakpointManager] Failed to execute transition:",n)}},{immediate:!1}),Z(()=>{if(l(),typeof window<"u"){window.addEventListener("resize",u),window.addEventListener("resize",y),window.addEventListener("orientationchange",f);let p=window.devicePixelRatio;const v=setInterval(()=>{window.devicePixelRatio!==p&&(p=window.devicePixelRatio,b())},500);K(()=>{window.removeEventListener("resize",u),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",f),clearInterval(v)})}}),{windowWidth:r(()=>Q.value),windowHeight:r(()=>ve.value),navigationMode:e,isDesktopBreakpoint:i,isMobileBreakpoint:t,isTransitioning:r(()=>me.value),hasBreakpointChanged:s,orientation:r(()=>pe.value),isLandscape:xo,preservedState:r(()=>c.value),stateHistory:r(()=>fe.value),preserveCurrentState:w,restorePreservedState:C,isExactBreakpoint:L,getBreakpointDistance:z,getBreakpointInfo:A,detectBreakpointConflicts:T,debugBreakpointManager:o,NAVIGATION_BREAKPOINT:ue,DEBOUNCE_DELAY:De,TRANSITION_DELAY:Ne}}const ke=h("desktop"),J=h({isCollapsed:!1,width:{expanded:256,collapsed:64}}),H=h({isDrawerOpen:!1,headerHeight:64,bottomNavHeight:80}),q=h({isTransitioning:!1,duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});function _o(){const{windowWidth:i}=He(),{isTransitioning:t}=To(),e=r(()=>ke.value),s=r(()=>{const o={marginLeft:J.value.isCollapsed?J.value.width.collapsed:J.value.width.expanded,marginRight:0,paddingTop:0,paddingBottom:0,minHeight:"100vh"};return{...o,marginLeftPx:`${o.marginLeft}px`,transition:`margin-left ${q.value.duration}ms ${q.value.easing}`}}),c=r(()=>{const o=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top").replace("px",""))||0,p=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom").replace("px",""))||0,v={marginLeft:0,marginRight:0,paddingTop:H.value.headerHeight+o,paddingBottom:H.value.bottomNavHeight+p,minHeight:`calc(100vh - ${H.value.headerHeight+H.value.bottomNavHeight}px)`};return{...v,paddingTopPx:`${v.paddingTop}px`,paddingBottomPx:`${v.paddingBottom}px`,transition:`all ${q.value.duration}ms ${q.value.easing}`}}),l=r(()=>e.value==="desktop"?s.value:c.value),u=r(()=>{const o={"main-content-area":!0,"gpu-accelerated":!0};return o[`${e.value}-layout`]=!0,e.value==="desktop"&&(o["sidebar-collapsed"]=J.value.isCollapsed,o["sidebar-expanded"]=!J.value.isCollapsed),e.value==="mobile"&&(o["drawer-open"]=H.value.isDrawerOpen,o["drawer-closed"]=!H.value.isDrawerOpen),q.value.isTransitioning||t.value?o.transitioning=!0:o["transition-complete"]=!0,o}),y=r(()=>{const o={"content-inner":!0,"transition-all":!0,"duration-300":!0,"ease-out":!0};return e.value==="mobile"&&H.value.isDrawerOpen&&(o["opacity-50"]=!0,o["pointer-events-none"]=!0,o["scale-95"]=!0),o}),w=r(()=>{const o={};return e.value==="desktop"?(o["--sidebar-width"]=`${l.value.marginLeft}px`,o["--content-margin-left"]=l.value.marginLeftPx):(o["--mobile-header-height"]=`${H.value.headerHeight}px`,o["--mobile-bottom-nav-height"]=`${H.value.bottomNavHeight}px`,o["--content-padding-top"]=l.value.paddingTopPx,o["--content-padding-bottom"]=l.value.paddingBottomPx),o["--layout-transition-duration"]=`${q.value.duration}ms`,o["--layout-transition-easing"]=q.value.easing,o}),C=o=>{J.value.isCollapsed!==o&&(J.value.isCollapsed=o,b("sidebar-toggle"))},B=o=>{H.value.isDrawerOpen!==o&&(H.value.isDrawerOpen=o,o?document.body.style.overflow="hidden":document.body.style.overflow="")},f=o=>{if(ke.value!==o){const p=ke.value;ke.value=o,b("layout-type-change",{from:p,to:o})}},b=async(o,p={})=>{if(q.value.isTransitioning){console.warn("[useLayoutSpacing] Transition already in progress, skipping");return}q.value.isTransitioning=!0;try{await Oe();const v=document.documentElement;Object.entries(w.value).forEach(([n,d])=>{v.style.setProperty(n,d)}),await new Promise(n=>setTimeout(n,q.value.duration))}catch(v){console.error("[useLayoutSpacing] Layout transition error:",v)}finally{q.value.isTransitioning=!1}},T=()=>{const o=i.value;o>=1440?J.value.width.expanded=280:o>=1920?J.value.width.expanded=320:J.value.width.expanded=256,o<=375?(H.value.headerHeight=56,H.value.bottomNavHeight=72):o<=640?(H.value.headerHeight=64,H.value.bottomNavHeight=80):(H.value.headerHeight=68,H.value.bottomNavHeight=84)},L=()=>{const o=l.value,p=i.value,v=window.innerHeight;let n,d;return e.value==="desktop"?(n=p-o.marginLeft,d=v):(n=p,d=v-o.paddingTop-o.paddingBottom),{width:n,height:d,availableWidth:Math.max(n,320),availableHeight:Math.max(d,200)}},z=()=>{const o=[],p=document.querySelector('[data-navigation-type="desktop"]'),v=document.querySelector('[data-navigation-type="mobile"]');if(p&&v){const d=window.getComputedStyle(p).display!=="none",S=window.getComputedStyle(v).display!=="none";d&&S&&o.push("Both desktop and mobile navigation are visible")}const n=document.querySelector(".main-content-area");if(n){const d=window.getComputedStyle(n),S=parseInt(d.marginLeft),R=l.value.marginLeft;Math.abs(S-R)>5&&o.push(`Content margin mismatch: expected ${R}px, got ${S}px`)}return o};de(e,(o,p)=>{o!==p&&f(o)},{immediate:!0}),de(i,()=>{T()},{immediate:!0});const A=()=>{};return{layoutType:r(()=>e.value),currentSpacing:l,sidebarState:r(()=>J.value),mobileState:r(()=>H.value),isTransitioning:r(()=>q.value.isTransitioning),mainContentClasses:u,contentInnerClasses:y,cssCustomProperties:w,updateSidebarState:C,updateMobileDrawerState:B,updateLayoutType:f,executeLayoutTransition:b,getContentAreaDimensions:L,detectLayoutConflicts:z,debugLayoutSpacing:A,adjustForScreenSize:T}}function Ao(){const{props:i}=$e(),{user:t}=Te();let e;const s=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(l=>{var y;const u=((y=t.value)==null?void 0:y.name)||"Employee";l.showNotification(`Hi ${u}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},c=()=>{const l=new Date,u=new Date(i.auth.user.clock_in_time);(isNaN(u.getTime())||l.getTime()-u.getTime()>5*60*1e3)&&s()};Z(()=>{c(),e=setInterval(c,5*60*1e3)}),K(()=>{clearInterval(e)})}function So(){const{isAuthenticated:i,user:t}=Te(),e=$e();let s=null;const c=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(u=>{var w;const y=((w=t.value)==null?void 0:w.name)||"Employee";u.showNotification(`Hi ${y}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},l=()=>{if(!i.value)return;const u=e.props.auth.user.todays_attendance;if(u&&u.clock_in_time&&!u.clock_out_time){const y=new Date(u.clock_in_time);(new Date-y)/1e3/60/60>=7.5&&c()}};Z(()=>{s=setInterval(l,5*60*1e3),l()}),K(()=>{s&&clearInterval(s)})}function Co(){const i=$e();return de(()=>i.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:i.props.flash}}const Bo={key:0,class:"p-4 bg-red-100 border border-red-400 text-red-700 z-50 relative"},Io=["aria-hidden"],$o={"aria-label":"User account menu"},Eo=["aria-label"],Oo={__name:"AuthenticatedLayout",setup(i){const t=Ze(),e=h("desktop"),s=h(!1),{getUserProperty:c,getAuthError:l}=Te();He();const{isDark:u,initializeTheme:y}=Fe();Ao(),So(),Co(),Z(()=>{y()});const{mainContentClasses:w,contentInnerClasses:C,cssCustomProperties:B,isTransitioning:f}=_o(),b=r(()=>c("name","User")),T=r(()=>c("email","")),L=r(()=>l()),z=r(()=>!!L.value),A=r(()=>{try{return route().current()||""}catch(N){return console.warn("[LAYOUT] Route helper not available:",N),window.location.pathname.replace("/","")||"dashboard"}}),o=r(()=>({"layout-container":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value,"desktop-layout":e.value==="desktop","mobile-layout":e.value==="mobile"}));r(()=>{const N=w.value,m={"has-header":S.value};return{...N,...m}});const p=r(()=>({"px-6":!0,"py-4":!0,flex:!0,"items-center":!0,"justify-between":!0,"shadow-sm":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),v=r(()=>({"px-6":!0,"py-4":!0,"transition-colors":!0,"duration-200":!0,"border-b":!0,"bg-white":!u.value,"border-neutral-200":!u.value,"bg-neutral-900":u.value,"border-neutral-700":u.value})),n=r(()=>({"flex-1":!0,"transition-colors":!0,"duration-200":!0,"bg-neutral-50":!u.value,"bg-neutral-900":u.value}));h(!1);const d=h(!1),S=r(()=>!!t.header),R=r(()=>C.value);return(N,m)=>(g(),k("div",null,[j(mo),j(ho),j(it),j(Ht),j(lo),z.value?(g(),k("div",Bo,[m[0]||(m[0]=a("p",{class:"font-semibold"},"Authentication Error:",-1)),a("p",null,O(L.value),1),m[1]||(m[1]=a("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))])):W("",!0),j(At,{"current-route":A.value},null,8,["current-route"]),a("div",{class:x(o.value)},[a("div",{class:x(["main-content-area","desktop-layout","gpu-accelerated",{"sidebar-collapsed":s.value,"sidebar-expanded":!s.value,transitioning:d.value||_(f),"has-header":S.value}]),style:Ie({marginLeft:"0",minHeight:"100vh",paddingTop:"0",..._(B)}),"data-layout-type":"authenticated-content","aria-hidden":d.value?"true":"false"},[e.value==="desktop"&&_(t).header?(g(),k("header",{key:0,class:x(["content-header",p.value]),role:"banner","aria-label":"Page header"},[a("div",{class:x(["text-lg font-semibold transition-colors duration-200",_(u)?"text-neutral-100":"text-neutral-900"])},[oe(N.$slots,"header")],2),a("nav",$o,[j(et,{align:"right",width:"48"},{trigger:X(()=>[a("button",{class:x(["flex items-center p-2 rounded-lg transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",_(u)?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"]),"aria-label":`User menu for ${b.value}`,"aria-haspopup":"true","aria-expanded":"false"},[m[2]||(m[2]=a("div",{class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},[a("svg",{class:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),a("span",{class:x(["ml-2 text-sm font-medium",_(u)?"text-neutral-200":"text-neutral-700"])},O(b.value),3)],10,Eo)]),content:X(()=>[a("div",{class:x(["px-4 py-2 border-b",_(u)?"border-neutral-600 bg-neutral-800":"border-neutral-200 bg-white"])},[a("p",{class:x(["text-sm font-medium",_(u)?"text-neutral-100":"text-neutral-900"])},O(b.value),3),a("p",{class:x(["text-xs",_(u)?"text-neutral-400":"text-neutral-500"])},O(T.value),3)],2),j(Ce,{href:N.route("profile.edit")},{default:X(()=>m[3]||(m[3]=[re(" 👤 My Profile ")])),_:1,__:[3]},8,["href"]),j(Ce,{href:N.route("email-preferences.show")},{default:X(()=>m[4]||(m[4]=[re(" 📧 Email Preferences ")])),_:1,__:[4]},8,["href"]),j(Ce,{href:N.route("logout"),method:"post",as:"button"},{default:X(()=>m[5]||(m[5]=[re(" Log Out ")])),_:1,__:[5]},8,["href"])]),_:1})])],2)):W("",!0),e.value==="mobile"&&_(t).header?(g(),k("header",{key:1,class:x(["content-header",v.value]),role:"banner","aria-label":"Page header"},[a("div",{class:x(["text-lg font-semibold",_(u)?"text-neutral-100":"text-neutral-900"])},[oe(N.$slots,"header")],2)],2)):W("",!0),a("main",{id:"main-content",class:x(["content-body",n.value]),role:"main","aria-label":"Main content",tabindex:"-1"},[a("div",{class:x(R.value)},[oe(N.$slots,"default")],2)],2)],14,Io)],2)]))}};export{Oo as _,St as a,He as b,et as c,G as n,Ct as r,Co as u};
