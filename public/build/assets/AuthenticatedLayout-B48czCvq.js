import{e as T,f as b,A as U,C as ee,c as h,i as N,o as u,a as t,t as C,z as ge,F as J,r as q,n as m,u as d,w as ce,p as de,Q as ke,g as K,s as me,B as re,l as oe,q as be,D as xe,y as ve,k as O,h as se,N as we,O as _e,d as Ae,P as Te,S as ue,K as pe,R as Ie}from"./app-ncY6vA5p.js";import{u as he}from"./useAuth-EO6FNapM.js";import{B as fe,C as Be,p as Se}from"./icons-C19vy05A.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Me={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Ee={class:"flex items-start"},$e={class:"ml-3 flex-1"},De={class:"mt-1 text-sm text-red-700"},Ne={key:0,class:"mt-3"},Le={__name:"NavigationErrorDisplay",setup(v){const o=T(!1),s=T(""),e=T(null),a=T(null),y=b(()=>s.value.includes("log in")?"Go to Login":s.value.includes("permission")?"Go to Dashboard":s.value.includes("network")?"Reload Page":"Try Again"),l=(M,I=null)=>{s.value=M,e.value=I,o.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{_()},1e4)},g=async()=>{if(e.value)try{await e.value()}catch(M){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",M)}_()},_=()=>{o.value=!1,s.value="",e.value=null,a.value&&(clearTimeout(a.value),a.value=null)};return U(()=>{typeof window<"u"&&(window.showNavigationError=l)}),ee(()=>{typeof window<"u"&&delete window.showNavigationError,a.value&&clearTimeout(a.value)}),(M,I)=>o.value?(u(),h("div",Ce,[t("div",Me,[t("div",Ee,[I[2]||(I[2]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",$e,[I[0]||(I[0]=t("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),t("div",De,C(s.value),1),e.value?(u(),h("div",Ne,[t("button",{onClick:g,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},C(y.value),1)])):N("",!0)]),t("div",{class:"ml-4 flex-shrink-0"},[t("button",{onClick:_,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},I[1]||(I[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):N("",!0)}},W=T("light"),Q=T("light"),Z=T(!1),te={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ye(){const v=b(()=>Z.value?Q.value:W.value),o=b(()=>te[v.value]),s=b(()=>v.value==="dark"),e=b(()=>v.value==="light"),a=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(n){return console.warn("Failed to detect system theme:",n),"light"}},y=(n,i=!1)=>{try{const E={theme:D(n)?n:"light",useSystem:!!i,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(E))}catch(A){console.warn("Failed to save theme preference:",A);try{localStorage.removeItem("theme-preference")}catch(E){console.warn("Failed to clear corrupted theme preference:",E)}}},l=()=>{try{const n=localStorage.getItem("theme-preference");if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!==null){const A=D(i.theme)?i.theme:"light",E=typeof i.useSystem=="boolean"?i.useSystem:!1;return{theme:A,useSystem:E,timestamp:i.timestamp||null,version:i.version||1}}}}catch(n){console.warn("Failed to load theme preference:",n);try{localStorage.removeItem("theme-preference")}catch(i){console.warn("Failed to clear corrupted theme preference:",i)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},g=n=>{if(!(typeof document>"u"))try{const i=document.documentElement,A=D(n)?n:"light";i.classList.remove("theme-light","theme-dark","dark","light"),i.classList.add(`theme-${A}`),A==="dark"&&i.classList.add("dark"),_(A);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:A,config:te[A]}}))}catch(E){console.warn("Failed to dispatch theme change event:",E)}}catch(i){console.error("Failed to apply theme:",i);try{const A=document.documentElement;A.classList.remove("theme-light","theme-dark","dark","light"),A.classList.add("theme-light"),_("light")}catch(A){console.error("Failed to apply fallback theme:",A)}}},_=n=>{if(!(typeof document>"u"))try{const i=document.documentElement;n==="dark"?(i.style.setProperty("--color-neutral-50","#0a0a0a"),i.style.setProperty("--color-neutral-100","#111827"),i.style.setProperty("--color-neutral-200","#262626"),i.style.setProperty("--color-neutral-300","#404040"),i.style.setProperty("--color-neutral-400","#525252"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#a3a3a3"),i.style.setProperty("--color-neutral-700","#d4d4d4"),i.style.setProperty("--color-neutral-800","#e5e5e5"),i.style.setProperty("--color-neutral-900","#fafafa"),i.style.setProperty("--color-neutral-950","#ffffff")):(i.style.setProperty("--color-neutral-50","#fafafa"),i.style.setProperty("--color-neutral-100","#f5f5f5"),i.style.setProperty("--color-neutral-200","#e5e5e5"),i.style.setProperty("--color-neutral-300","#d4d4d4"),i.style.setProperty("--color-neutral-400","#a3a3a3"),i.style.setProperty("--color-neutral-500","#6b7280"),i.style.setProperty("--color-neutral-600","#525252"),i.style.setProperty("--color-neutral-700","#404040"),i.style.setProperty("--color-neutral-800","#262626"),i.style.setProperty("--color-neutral-900","#111827"),i.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(i){console.warn("Failed to update theme properties:",i)}},M=n=>{g(n)},I=n=>{if(!te[n]){console.warn(`Theme "${n}" not found`);return}W.value=n,Z.value=!1,y(n,!1),g(n)},p=()=>{Z.value=!0;const n=a();Q.value=n,y(n,!0),g(n)},B=()=>{const n=v.value==="light"?"dark":"light";I(n)},S=()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),i=A=>{const E=A.matches?"dark":"light";Q.value=E,Z.value&&(M(E),y(E,!0))};return n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},D=n=>te.hasOwnProperty(n),V=()=>Object.values(te),X=()=>{},z=()=>{const n=[];if(D(W.value)||n.push(`Invalid current theme: ${W.value}`),D(Q.value)||n.push(`Invalid system theme: ${Q.value}`),D(v.value)||n.push(`Invalid active theme: ${v.value}`),typeof document<"u"){const i=document.documentElement,A=i.classList.contains("theme-light"),E=i.classList.contains("theme-dark");!A&&!E&&n.push("No theme class found on document root"),A&&E&&n.push("Multiple theme classes found on document root");const f=`theme-${v.value}`;i.classList.contains(f)||n.push(`Expected theme class ${f} not found on document root`)}return{isValid:n.length===0,issues:n}},G=()=>{if(!(typeof document>"u"))try{const n=document.documentElement;return["theme-light","theme-dark"].forEach(A=>{n.classList.remove(A)}),!0}catch(n){return console.warn("Failed to cleanup theme classes:",n),!1}},R=()=>{try{W.value="light",Q.value=a(),Z.value=!1;try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear theme preference from localStorage:",n)}return g("light"),!0}catch(n){return console.error("Failed to reset theme to default:",n),!1}},k=()=>{console.warn("Attempting theme system recovery...");try{if(G(),R())return!0;throw new Error("Failed to reset theme to default")}catch(n){console.error("Theme system recovery failed:",n);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(i){return console.error("Last resort theme recovery failed:",i),!1}}},r=()=>{try{const n=l();return Q.value=a(),n.useSystem?(Z.value=!0,W.value=Q.value):(Z.value=!1,W.value=n.theme),g(v.value),S()}catch(n){console.error("Theme initialization failed:",n);try{W.value="light",Q.value="light",Z.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(i){console.error("Emergency theme fallback failed:",i)}return null}};return U(()=>{r()}),ge(v,n=>{M(n)}),{currentTheme:b(()=>W.value),systemTheme:b(()=>Q.value),activeTheme:v,themeConfig:o,isDark:s,isLight:e,isSystemThemePreferred:b(()=>Z.value),setTheme:I,toggleTheme:B,useSystemTheme:p,validateTheme:D,getAvailableThemes:V,debugThemeState:X,initializeTheme:r,validateThemeState:z,cleanupThemeClasses:G,resetThemeToDefault:R,recoverThemeSystem:k,cleanupAndApplyTheme:g,themes:b(()=>te)}}const Fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pe={class:"flex justify-between items-center h-20"},ze={class:"flex items-center space-x-6"},Oe={class:"hidden lg:flex space-x-1"},Re=["href"],je={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ve={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={class:"hidden xl:inline"},Ue={class:"relative assessment-menu"},We={class:"p-2 space-y-1"},Ze=["href"],Je={class:"relative more-menu"},qe={class:"p-2"},Ye={key:0,class:"space-y-1"},Xe={class:"space-y-1"},Ke=["href"],et={class:"space-y-1 mt-1"},tt=["href"],ot={class:"flex items-center space-x-3"},at={class:"relative user-menu"},rt={class:"hidden lg:block text-left"},st={class:"font-medium text-sm"},nt={class:"p-2"},lt={class:"py-1 space-y-1"},it=["href"],ct={class:"space-y-1 mt-1"},dt=["href"],ut={class:"md:hidden px-4 pb-3 mobile-menu"},mt={class:"mt-3 space-y-2"},ht=["href"],vt={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(v){const o=v,{user:s,roles:e}=he(),{isDark:a}=ye(),y=T(!1),l=T(!1),g=T(!1),_=T(!1),M=b(()=>{var k;return(k=s.value)!=null&&k.name?s.value.name.split(" ").map(r=>r[0]).join("").toUpperCase():"U"}),I=b(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Applications"}]),p=b(()=>{const k=e.value||[],r=Array.isArray(k)?k:[],n=r.includes("Admin")||r.includes("Manager")||r.includes("HR"),i=[{route:"competency-assessments.my-assessments",label:"My Assessments"}];return n&&i.push({route:"competency-assessments.index",label:"All Assessments"},{route:"assessment-dashboard",label:"Assessment Dashboard"},{route:"competency-assessments.pending",label:"Pending Assessments"},{route:"assessment-cycle-manager",label:"Assessment Cycles"},{route:"competencies.index",label:"Competency Setup"}),i}),B=b(()=>{try{const k=e.value||[],r=Array.isArray(k)?k:[],n=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"employee-handbook",label:"Employee Handbook",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],i=r.includes("Admin")||r.includes("Manager")||r.includes("HR"),A=r.includes("Admin");return i&&n.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"leave-types.index",label:"Leave Policies",category:"management"},{route:"support.index",label:"Support Management",category:"management"}),A&&n.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"leave-types.index",label:"Leave Policies",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"reports.index",label:"View Reports",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),n}catch(k){return console.error("Error computing moreNavItems:",k),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),S=b(()=>B.value.filter(k=>k.category==="regular")),D=b(()=>B.value.filter(k=>k.category==="management")),V=b(()=>B.value.filter(k=>k.category==="admin")),X=b(()=>[...I.value,...B.value]),z=k=>{var r;return o.currentRoute===k||((r=o.currentRoute)==null?void 0:r.startsWith(k.split(".")[0]))},G=()=>{ke.post(route("logout"))},R=k=>{const r=k.target;r.closest(".assessment-menu")||(l.value=!1),r.closest(".more-menu")||(y.value=!1),r.closest(".user-menu")||(g.value=!1),r.closest(".mobile-menu")||(_.value=!1)};return U(()=>{document.addEventListener("click",R)}),ee(()=>{document.removeEventListener("click",R)}),(k,r)=>{var n,i,A,E;return u(),h("nav",{class:m(["w-full transition-all duration-200 sticky top-0 z-50",d(a)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-600 border-b border-teal-700/60 shadow-lg shadow-teal-900/20 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[t("div",Fe,[t("div",Pe,[t("div",ze,[r[17]||(r[17]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"flex items-center bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg hover:bg-white hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-white/20"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain filter drop-shadow-sm"})])],-1)),t("div",Oe,[(u(!0),h(J,null,q(I.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",z(f.route)?d(a)?"bg-teal-600/20 text-teal-300":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[f.route==="dashboard"?(u(),h("svg",je,r[4]||(r[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):f.route==="attendances.index"?(u(),h("svg",He,r[5]||(r[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):f.route==="leaves.index"?(u(),h("svg",Ve,r[6]||(r[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(u(),h("svg",Ge,r[7]||(r[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),t("span",Qe,C(f.label),1)],10,Re))),128)),t("div",Ue,[t("button",{onClick:r[0]||(r[0]=f=>l.value=!l.value),class:m(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",l.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[r[9]||(r[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),r[10]||(r[10]=t("span",{class:"hidden xl:inline"},"Assessments",-1)),(u(),h("svg",{class:m(["w-4 h-4 transition-transform duration-200",{"rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[8]||(r[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:m(["absolute left-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",We,[(u(!0),h(J,null,q(p.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(f.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[11]||(r[11]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,C(f.label),1)],10,Ze))),128))])],2),[[de,l.value]])]),t("div",Je,[t("button",{onClick:r[1]||(r[1]=f=>y.value=!y.value),class:m(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",y.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[r[13]||(r[13]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),r[14]||(r[14]=t("span",{class:"hidden xl:inline"},"More",-1)),(u(),h("svg",{class:m(["w-4 h-4 transition-transform duration-200",{"rotate-180":y.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[12]||(r[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:m(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",qe,[B.value.length>0?(u(),h("div",Ye,[t("div",Xe,[(u(!0),h(J,null,q(S.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(f.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[15]||(r[15]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",null,C(f.label),1)],10,Ke))),128))]),D.value.length>0?(u(),h("div",{key:0,class:m(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:m(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",d(a)?"text-gray-400":"text-gray-500"])}," Management ",2),t("div",et,[(u(!0),h(J,null,q(D.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(f.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[16]||(r[16]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#0891B2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("span",null,C(f.label),1)],10,tt))),128))])],2)):N("",!0)])):N("",!0)])],2),[[de,y.value]])])])]),t("div",ot,[t("div",at,[t("button",{onClick:r[2]||(r[2]=f=>g.value=!g.value),class:m(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",g.value?d(a)?"bg-gray-700/50 text-white":"bg-white/25 text-white border border-white/40 shadow-lg backdrop-blur-sm font-semibold":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/90 hover:text-white hover:bg-white/15 backdrop-blur-sm hover:shadow-md"])},[t("div",{class:m(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",d(a)?"bg-teal-600 text-white":"bg-teal-500 text-white"])},C(M.value),3),t("div",rt,[t("div",st,C((n=d(s))==null?void 0:n.name),1),t("div",{class:m(["text-xs",d(a)?"text-gray-400":"text-white/70"])},C(((i=d(e))==null?void 0:i.join(", "))||"User"),3)]),(u(),h("svg",{class:m(["w-4 h-4 transition-transform duration-200",{"rotate-180":g.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[18]||(r[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",{class:m(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",d(a)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[t("div",nt,[t("div",{class:m(["px-3 py-2 border-b",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:m(["font-medium",d(a)?"text-white":"text-gray-900"])},C((A=d(s))==null?void 0:A.name),3),t("div",{class:m(["text-sm",d(a)?"text-gray-400":"text-gray-500"])},C((E=d(s))==null?void 0:E.email),3)],2),t("div",lt,[t("a",{href:k.route("profile.edit"),class:m(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},r[19]||(r[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#0D9488",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",null,"Profile Settings",-1)]),10,it),V.value.length>0?(u(),h("div",{key:0,class:m(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("div",{class:m(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",d(a)?"text-red-400":"text-red-600"])},r[20]||(r[20]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",null,"Admin",-1)]),2),t("div",ct,[(u(!0),h(J,null,q(V.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z(f.route)?d(a)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[r[21]||(r[21]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,C(f.label),1)],10,dt))),128))])],2)):N("",!0),t("div",{class:m(["border-t pt-2 mt-2",d(a)?"border-gray-700":"border-gray-200"])},[t("button",{onClick:G,class:m(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},r[22]||(r[22]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"#DC2626",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),t("span",null,"Sign Out",-1)]))],2)])])],2),[[de,g.value]])])])])]),t("div",ut,[t("button",{onClick:r[3]||(r[3]=f=>_.value=!_.value),class:m(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",d(a)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[r[24]||(r[24]=t("span",null,"Menu",-1)),(u(),h("svg",{class:m(["w-5 h-5 transition-transform duration-200",{"rotate-180":_.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[23]||(r[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),ce(t("div",mt,[(u(!0),h(J,null,q(X.value,f=>(u(),h("a",{key:f.route,href:k.route(f.route),class:m(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",z(f.route)?d(a)?"bg-teal-600/20 text-teal-300 border border-teal-500/30":"bg-teal-50 text-teal-700 border border-teal-200/50":d(a)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},C(f.label),11,ht))),128))],512),[[de,_.value]])])],2)}}};function ft(v,o){return u(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function gt(v,o){return u(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const pt=["aria-live"],yt={class:"toast-content"},bt={key:0,class:"toast-icon"},wt={class:"toast-message"},kt={key:0,class:"toast-title"},xt={class:"toast-text"},_t={key:1,class:"toast-actions"},At=["aria-label"],Tt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:v=>["success","error","warning","info","loading"].includes(v)},position:{type:String,default:"top-right",validator:v=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(v)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:v=>["low","normal","high"].includes(v)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:v=>["sm","md","lg"].includes(v)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(v,{expose:o,emit:s}){const e=v,a=s,y=T(!1),l=T(null),g=T(null),_=T(100),M=T(!1),I=T(0),p=T(0),B=b(()=>fe("x-mark")),S=b(()=>{if(e.icon)return fe(e.icon);const F={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return fe(F[e.type]||F.info)}),D=b(()=>["toast-notification",`toast-notification--${e.type}`,`toast-notification--${e.size}`,`toast-notification--${e.position}`,{"toast-notification--with-title":e.title,"toast-notification--persistent":e.persistent,"toast-notification--with-action":e.actionText}]),V=b(()=>({zIndex:e.zIndex})),X=b(()=>["w-5 h-5",{"animate-spin":e.type==="loading"}]),z=b(()=>e.closable||e.actionText),G=b(()=>[`toast-progress--${e.type}`]),R=b(()=>({width:`${_.value}%`})),k=()=>{y.value=!0,e.sound&&le(),!e.persistent&&e.duration>0&&i()},r=()=>{y.value=!1,ae(),a("close")},n=()=>{a("action"),e.persistent||r()},i=()=>{e.duration<=0||(I.value=Date.now(),p.value=e.duration,l.value=setTimeout(()=>{r()},e.duration),A())},A=()=>{if(!e.showProgress)return;const F=Date.now(),j=()=>{if(!y.value||M.value)return;const ie=Date.now()-F,c=Math.max(0,100-ie/e.duration*100);_.value=c,c>0&&(g.value=requestAnimationFrame(j))};j()},E=()=>{if(!l.value||e.persistent)return;M.value=!0,clearTimeout(l.value),cancelAnimationFrame(g.value);const F=Date.now()-I.value;p.value=Math.max(0,e.duration-F)},f=()=>{!M.value||e.persistent||(M.value=!1,p.value>0&&(I.value=Date.now(),l.value=setTimeout(()=>{r()},p.value),A()))},ae=()=>{l.value&&(clearTimeout(l.value),l.value=null),g.value&&(cancelAnimationFrame(g.value),g.value=null)},le=()=>{try{const F=new Audio,j={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};F.src=j[e.type]||j.info,F.volume=.3,F.play().catch(()=>{})}catch{}};return U(()=>{k()}),ee(()=>{ae()}),ge(()=>e.duration,()=>{y.value&&!e.persistent&&(ae(),i())}),o({show:k,close:r,pauseTimer:E,resumeTimer:f}),(F,j)=>(u(),K(xe,{to:"body"},[y.value?(u(),h("div",{key:0,class:m(D.value),style:be(V.value),role:"alert","aria-live":v.priority==="high"?"assertive":"polite",onMouseenter:E,onMouseleave:f},[t("div",yt,[v.showIcon?(u(),h("div",bt,[(u(),K(me(S.value),{class:m(X.value)},null,8,["class"]))])):N("",!0),t("div",wt,[v.title?(u(),h("div",kt,C(v.title),1)):N("",!0),t("div",xt,[re(F.$slots,"default",{},()=>[oe(C(v.message),1)],!0)])]),z.value?(u(),h("div",_t,[v.actionText?(u(),h("button",{key:0,onClick:n,class:"toast-action-button"},C(v.actionText),1)):N("",!0),v.closable?(u(),h("button",{key:1,onClick:r,class:"toast-close-button","aria-label":v.closeLabel},[(u(),K(me(B.value),{class:"w-4 h-4"}))],8,At)):N("",!0)])):N("",!0)]),v.showProgress&&v.duration>0?(u(),h("div",{key:0,class:m(["toast-progress",G.value]),style:be(R.value)},null,6)):N("",!0)],46,pt)):N("",!0)]))}},It=ne(Tt,[["__scopeId","data-v-11baa49e"]]);class Bt{constructor(){this.notifications=ve([]),this.maxNotifications=T(5),this.defaultDuration=T(5e3),this.positions=ve({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=ve({enabled:!0,volume:.3})}add(o){const s=this.generateId(),e=o.position||"top-right",a={id:s,message:o.message||"",title:o.title||"",type:o.type||"info",position:e,duration:o.duration!==void 0?o.duration:this.defaultDuration.value,persistent:o.persistent||!1,closable:o.closable!==!1,showIcon:o.showIcon!==!1,showProgress:o.showProgress!==!1,actionText:o.actionText||"",icon:o.icon||"",size:o.size||"md",sound:o.sound!==!1&&this.sounds.enabled,priority:o.priority||"normal",zIndex:o.zIndex||1e3,createdAt:Date.now(),onAction:o.onAction||null,onClose:o.onClose||null,component:o.component||null,props:o.props||{}};return this.notifications.push(a),this.positions[e].push(a),this.manageQueueSize(e),!a.persistent&&a.duration>0&&setTimeout(()=>{this.remove(s)},a.duration),s}remove(o){const s=this.notifications.find(l=>l.id===o);if(!s)return;const e=this.notifications.findIndex(l=>l.id===o);e>-1&&this.notifications.splice(e,1);const a=this.positions[s.position],y=a.findIndex(l=>l.id===o);y>-1&&a.splice(y,1),s.onClose&&s.onClose(s)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(o=>{this.positions[o].splice(0)})}clearPosition(o){[...this.positions[o]].forEach(e=>{this.remove(e.id)})}clearType(o){this.notifications.filter(e=>e.type===o).forEach(e=>{this.remove(e.id)})}update(o,s){const e=this.notifications.find(a=>a.id===o);e&&Object.assign(e,s)}getByPosition(o){return this.positions[o]||[]}getByType(o){return this.notifications.filter(s=>s.type===o)}getById(o){return this.notifications.find(s=>s.id===o)}exists(o){return this.notifications.some(s=>s.id===o)}count(){return this.notifications.length}countByPosition(o){var s;return((s=this.positions[o])==null?void 0:s.length)||0}setMaxNotifications(o){this.maxNotifications.value=o,Object.keys(this.positions).forEach(s=>{this.manageQueueSize(s)})}setDefaultDuration(o){this.defaultDuration.value=o}setSoundsEnabled(o){this.sounds.enabled=o}setSoundVolume(o){this.sounds.volume=Math.max(0,Math.min(1,o))}pauseAll(){this.notifications.forEach(o=>{o.pauseTimer&&o.pauseTimer()})}resumeAll(){this.notifications.forEach(o=>{o.resumeTimer&&o.resumeTimer()})}success(o,s={}){return this.add({message:o,type:"success",...s})}error(o,s={}){return this.add({message:o,type:"error",persistent:s.persistent!==!1,...s})}warning(o,s={}){return this.add({message:o,type:"warning",...s})}info(o,s={}){return this.add({message:o,type:"info",...s})}loading(o,s={}){return this.add({message:o,type:"loading",persistent:!0,closable:!1,...s})}confirm(o={}){return new Promise(s=>{const e=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:o.title||"Confirm Action",description:o.message||"Are you sure you want to proceed?",confirmText:o.confirmText||"Confirm",cancelText:o.cancelText||"Cancel",...o},onAction:a=>{this.remove(e),s(a==="confirm")},onClose:()=>{s(!1)}})})}alert(o,s={}){return new Promise(e=>{const a=this.add({type:s.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:s.type||"info",title:s.title||"Alert",description:o,showCancel:!1,confirmText:s.confirmText||"OK",...s},onAction:()=>{this.remove(a),e(!0)},onClose:()=>{e(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(o){const s=this.positions[o];s.length>this.maxNotifications.value&&s.splice(0,s.length-this.maxNotifications.value).forEach(a=>{const y=this.notifications.findIndex(l=>l.id===a.id);y>-1&&this.notifications.splice(y,1)})}}const P=new Bt,St={class:"notification-container"},Ct={__name:"NotificationContainer",setup(v,{expose:o}){const s=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];b(()=>P.notifications.filter(p=>!p.component));const e=b(()=>P.notifications.filter(p=>p.component)),a=p=>{const B="fixed z-50 pointer-events-none",S={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${B} ${S[p]||S["top-right"]}`},y=p=>P.getByPosition(p),l=p=>p.includes("left")?"slide-left":p.includes("right")?"slide-right":p.includes("center")?"slide-center":"slide-right",g=p=>{P.remove(p)},_=(p,B="action")=>{const S=P.getById(p);S!=null&&S.onAction&&S.onAction(B)},M=()=>{window.notify={success:(p,B)=>P.success(p,B),error:(p,B)=>P.error(p,B),warning:(p,B)=>P.warning(p,B),info:(p,B)=>P.info(p,B),loading:(p,B)=>P.loading(p,B),confirm:p=>P.confirm(p),alert:(p,B)=>P.alert(p,B),clear:()=>P.clear(),remove:p=>P.remove(p)}},I=()=>{window.notify&&delete window.notify};return U(()=>{M()}),ee(()=>{I()}),o({notificationQueue:P,notify:window.notify}),(p,B)=>(u(),h("div",St,[(u(),h(J,null,q(s,S=>t("div",{key:S,class:m(a(S))},[O(_e,{name:l(S),tag:"div",class:"space-y-2"},{default:se(()=>[(u(!0),h(J,null,q(y(S),D=>(u(),K(It,we({key:D.id},{ref_for:!0},D,{onClose:V=>g(D.id),onAction:V=>_(D.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(u(!0),h(J,null,q(e.value,S=>(u(),K(me(S.component||"NotificationModal"),we({key:S.id,ref_for:!0},S.props,{onClose:D=>g(S.id),onConfirm:D=>_(S.id,"confirm"),onCancel:D=>_(S.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},Mt=ne(Ct,[["__scopeId","data-v-67e6c621"]]),Et={class:"floating-attendance-widget"},$t={class:"status-indicator"},Dt={class:"time-info"},Nt={class:"time-display"},Lt={class:"time-label-mini"},Ft={class:"widget-header"},Pt={class:"status-info"},zt={class:"status-text"},Ot={class:"timer-section"},Rt={class:"timer-value"},jt={class:"timer-label"},Ht={class:"quick-actions"},Vt=["disabled"],Gt=["disabled"],Qt={class:"quick-stats"},Ut={class:"stat"},Wt={class:"stat-value"},Zt={class:"stat"},Jt={class:"stat-value"},qt={class:"stat-label"},Yt={__name:"FloatingAttendanceWidget",setup(v){const o=T(!1),s=T(!1),e=T({clockedIn:!1,onBreak:!1,clockInTime:null}),a=T(!1),y=T("0h 0m 0s"),l=T(null),g=T([]),_=()=>{try{const c={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:l.value,completedBreakSessions:g.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(c))}catch(c){console.warn("Failed to save attendance state to localStorage:",c)}},M=()=>{try{const c=localStorage.getItem("floating-attendance-state");if(c){const w=JSON.parse(c),$=new Date(w.lastUpdate);if((new Date-$)/(1e3*60)<5)return e.value.clockedIn=w.clockedIn||!1,e.value.onBreak=w.onBreak||!1,e.value.clockInTime=w.clockInTime||null,l.value=w.breakStartTime||null,g.value=w.completedBreakSessions||[],!0}}catch(c){console.warn("Failed to load attendance state from localStorage:",c)}return!1};let I=null;const p=b(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),B=b(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),S=b(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),D=b(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),V=b(()=>a.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),X=b(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),z=b(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const c=new Date(e.value.clockInTime),$=new Date-c,x=Math.floor($/(1e3*60)),L=Math.floor(x/60),H=x%60;return`${L}h ${H}m`}),G=b(()=>{if(e.value.onBreak&&l.value){const c=new Date(l.value);if(isNaN(c.getTime()))return"0h 0m 1s";{const $=Math.max(0,new Date-c),x=Math.floor($/(1e3*60*60)),L=Math.floor($%(1e3*60*60)/(1e3*60)),H=Math.floor($%(1e3*60)/1e3);return`${x}h ${L}m ${H}s`}}return"0h 0m"}),R=b(()=>{let c=0;if(g.value.forEach(x=>{if(x.start&&x.end){const L=new Date(x.start),Y=new Date(x.end)-L;c+=Math.floor(Y/(1e3*60))}}),e.value.onBreak&&l.value){const x=new Date(l.value);if(!isNaN(x.getTime())){const H=Math.max(0,new Date-x);c+=Math.floor(H/(1e3*60))}}const w=Math.floor(c/60),$=c%60;return`${w}h ${$}m`});b(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const k=()=>{o.value=!o.value,s.value=!0},r=(c=!1)=>{if(c||!s.value){const w=!e.value.clockedIn;o.value,o.value=w,c&&(s.value=!1)}},n=()=>{if(e.value.clockedIn&&e.value.clockInTime){const c=new Date;let w;e.value.onBreak&&l.value?w=new Date(l.value):w=new Date(e.value.clockInTime);const $=c-w,x=Math.floor($/(1e3*60*60)),L=Math.floor($%(1e3*60*60)/(1e3*60)),H=Math.floor($%(1e3*60)/1e3);y.value=`${x}h ${L}m ${H}s`,H%10===0&&j()}else y.value="0h 0m 0s"},i=async()=>{try{if(a.value=!0,e.value.clockedIn){const c=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,l.value=null,y.value="0h 0m 0s",_(),r(!0),j()}else{const c=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=c.data.clock_in_time||new Date().toISOString(),_(),r(!0),j()}}catch(c){console.error("Clock in/out failed:",c),alert("Action failed: "+c.message)}finally{a.value=!1}},A=async()=>{try{if(a.value=!0,e.value.onBreak){if(l.value){const w={start:l.value,end:new Date().toISOString(),isOngoing:!1};g.value=[...g.value,w]}const c=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,l.value=null,_(),ie("end-break")}else{const c=new Date().toISOString();l.value=c,e.value.onBreak=!0;const w=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});w.data.break_start_time&&(l.value=w.data.break_start_time),_(),ie("start-break")}}catch(c){console.error("Break action failed:",c),alert("Action failed: "+c.message)}finally{a.value=!1}},E=async()=>{var c,w;try{const x=(await window.axios.get("/api/attendance/current")).data,L=x.clock_in_time,H=e.value.clockInTime;if((L!==H||!x.clocked_in)&&(g.value=[]),e.value.clockedIn=x.clocked_in||!1,e.value.onBreak=x.on_break||!1,e.value.clockInTime=x.clock_in_time||null,x.break_sessions&&Array.isArray(x.break_sessions)&&(g.value=x.break_sessions.map(Y=>({start:Y.start,end:Y.end,isOngoing:!1}))),x.on_break)if(x.break_start_time)l.value=x.break_start_time;else if((c=x.current_session)!=null&&c.current_break_start)l.value=x.current_session.current_break_start;else if((w=x.current_session)!=null&&w.break_sessions&&x.current_session.break_sessions.length>0){const Y=x.current_session.break_sessions[x.current_session.break_sessions.length-1];Y&&!Y.end&&(l.value=Y.start)}else l.value||(l.value=new Date().toISOString());else l.value=null;r()}catch($){console.error("Failed to fetch attendance status:",$)}},f=c=>{c.key==="attendance-update"&&E()},ae=c=>{e.value.clockedIn=c.clocked_in,e.value.onBreak=c.on_break,e.value.clockInTime=c.clock_in_time,c.on_break&&c.break_start_time?l.value=c.break_start_time:c.on_break||(l.value=null),_(),n(),r()},le=c=>{const{clockedIn:w,onBreak:$,clockInTime:x,breakStartTime:L}=c.detail;e.value.clockedIn=w,e.value.onBreak=$,e.value.clockInTime=x,$&&L?l.value=L:$||(l.value=null),_(),n(),r()},F=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(c){console.warn("Failed to broadcast attendance update:",c)}},j=()=>{try{const c=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:l.value,completedBreakSessions:g.value,totalBreakTime:R.value,currentBreakTime:G.value,todaysHours:z.value,timestamp:Date.now(),source:"floating-widget-load"}});window.dispatchEvent(c),F()}catch(c){console.warn("Failed to broadcast current status:",c)}},ie=c=>{try{const w=new CustomEvent("attendance-state-changed",{detail:{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:l.value,completedBreakSessions:g.value,totalBreakTime:R.value,currentBreakTime:G.value,todaysHours:z.value,timestamp:Date.now(),source:"floating-widget-break",action:c}});window.dispatchEvent(w),F()}catch(w){console.warn("Failed to broadcast break status change:",w)}};return U(async()=>{var w,$;if(M()&&n(),await E(),_(),n(),setTimeout(()=>{j()},100),I=setInterval(n,1e3),window.Echo)try{const L=($=(w=(await window.axios.get("/api/user")).data)==null?void 0:w.employee)==null?void 0:$.id;L?window.Echo.private(`attendance.${L}`).listen(".attendance.updated",ae):console.warn("FloatingWidget: No employee ID found for Echo subscription")}catch(x){console.error("FloatingWidget: Failed to get user data for Echo subscription:",x)}else console.warn("FloatingWidget: Echo not available");window.addEventListener("storage",f),window.addEventListener("attendance-state-changed",le)}),ee(()=>{if(I&&clearInterval(I),window.Echo)try{window.Echo.connector.pusher.allChannels().forEach(c=>{c.name.startsWith("private-attendance.")&&window.Echo.leave(c.name.replace("private-",""))})}catch(c){console.warn("FloatingWidget: Error unsubscribing from Echo channels:",c)}window.removeEventListener("storage",f),window.removeEventListener("attendance-state-changed",le)}),(c,w)=>(u(),h("div",Et,[o.value?N("",!0):(u(),h("div",{key:0,onClick:k,class:m(["floating-button",D.value])},[t("div",$t,[t("div",{class:m(S.value)},null,2)]),t("div",Dt,[t("div",Nt,C(y.value),1),t("div",Lt,C(B.value),1)]),O(d(Be),{class:"w-4 h-4 expand-icon"})],2)),o.value?(u(),h("div",{key:1,class:"expanded-widget",onClick:w[0]||(w[0]=Ae(()=>{},["stop"]))},[t("div",Ft,[t("div",Pt,[t("div",{class:m(S.value)},null,2),t("span",zt,C(p.value),1)]),t("button",{onClick:k,class:"minimize-btn",title:"Minimize"},[O(d(Se),{class:"w-4 h-4"})])]),t("div",Ot,[t("div",Rt,C(y.value),1),t("div",jt,C(B.value),1)]),t("div",Ht,[t("button",{onClick:i,disabled:a.value,class:m(X.value)},C(V.value),11,Vt),e.value.clockedIn?(u(),h("button",{key:0,onClick:A,disabled:a.value,class:"break-action"},[(u(),K(me(e.value.onBreak?d(gt):d(ft)),{class:"w-3 h-3"})),oe(" "+C(e.value.onBreak?"End":"Break"),1)],8,Gt)):N("",!0)]),t("div",Qt,[t("div",Ut,[t("span",Wt,C(z.value),1),w[1]||(w[1]=t("span",{class:"stat-label"},"Today",-1))]),t("div",Zt,[t("span",Jt,C(e.value.onBreak?G.value:R.value),1),t("span",qt,C(e.value.onBreak?"Current":"Total"),1)])])])):N("",!0),o.value?(u(),h("div",{key:2,class:"backdrop",onClick:k})):N("",!0)]))}},Xt=ne(Yt,[["__scopeId","data-v-f4b903b2"]]),Kt={class:"live-regions"},eo={__name:"LiveRegion",setup(v){const o=T(null),s=T(null),e=T(null);return U(()=>{Te.init()}),(a,y)=>(u(),h("div",Kt,[t("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:o},null,512),t("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:s},null,512),t("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:e},null,512)]))}},to=ne(eo,[["__scopeId","data-v-94955163"]]),oo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ao={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},ro={class:"flex items-center space-x-6"},so={__name:"AppFooter",setup(v){const{isDark:o}=ye(),s=b(()=>new Date().getFullYear());return(e,a)=>(u(),h("footer",{class:m(["mt-auto border-t transition-all duration-200",d(o)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[t("div",oo,[t("div",ao,[a[4]||(a[4]=t("div",{class:"flex items-center"},[t("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),t("div",ro,[O(d(ue),{href:e.route("dashboard"),class:m(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[0]||(a[0]=[oe(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),O(d(ue),{href:e.route("support.index"),class:m(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[1]||(a[1]=[oe(" Support ")])),_:1,__:[1]},8,["href","class"]),O(d(ue),{href:e.route("legal.privacy"),class:m(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[2]||(a[2]=[oe(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),O(d(ue),{href:e.route("legal.disclaimer"),class:m(["text-sm hover:underline transition-colors",d(o)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:se(()=>a[3]||(a[3]=[oe(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),t("div",{class:m(["text-sm",d(o)?"text-gray-400":"text-gray-500"])}," Â© "+C(s.value)+" Xonobics. All rights reserved. ",3)])])],2))}};function no(){const{props:v}=pe(),{user:o}=he();let s;const e=()=>{Notification.permission==="granted"&&navigator.serviceWorker.ready.then(y=>{var g;const l=((g=o.value)==null?void 0:g.name)||"Employee";y.showNotification(`Hi ${l}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})})},a=()=>{const y=new Date,l=new Date(v.auth.user.clock_in_time);(isNaN(l.getTime())||y.getTime()-l.getTime()>5*60*1e3)&&e()};U(()=>{a(),s=setInterval(a,5*60*1e3)}),ee(()=>{clearInterval(s)})}function lo(){const{isAuthenticated:v,user:o}=he(),s=pe();let e=null;const a=()=>{Notification.permission==="granted"&&navigator.serviceWorker.ready.then(l=>{var _;const g=((_=o.value)==null?void 0:_.name)||"Employee";l.showNotification(`Hi ${g}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})})},y=()=>{if(!v.value)return;const l=s.props.auth.user.todays_attendance;if(l&&l.clock_in_time&&!l.clock_out_time){const g=new Date(l.clock_in_time);(new Date-g)/1e3/60/60>=7.5&&a()}};U(()=>{e=setInterval(y,5*60*1e3),y()}),ee(()=>{e&&clearInterval(e)})}function io(){const v=pe();return ge(()=>v.props.flash,o=>{!o||!window.notify||(o.success&&window.notify.success(o.success),o.error&&window.notify.error(o.error),o.warning&&window.notify.warning(o.warning),o.info&&window.notify.info(o.info))},{immediate:!0,deep:!0}),{flash:v.props.flash}}const co={class:"relative"},uo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},mo={key:0,class:"flex items-center space-x-3"},ho={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},vo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},fo={__name:"AuthenticatedLayout",setup(v){const o=Ie(),{hasRole:s,getAuthError:e}=he(),{isDark:a,initializeTheme:y}=ye();no(),lo(),io(),U(()=>{y()});const l=b(()=>e()),g=b(()=>!!l.value),_=b(()=>{try{return route().current()||""}catch(M){return console.warn("[LAYOUT] Route helper not available:",M),window.location.pathname.replace("/","")||"dashboard"}});return b(()=>!!o.header),(M,I)=>(u(),h("div",{class:m(["min-h-screen transition-all duration-300 flex flex-col",d(a)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-teal-50/30"])},[O(to),O(Le),O(Mt),d(s)("Admin")?N("",!0):(u(),K(Xt,{key:0})),g.value?(u(),h("div",{key:1,class:m(["p-4 border z-50 relative rounded-lg mx-4 mt-4",d(a)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[I[0]||(I[0]=t("p",{class:"font-semibold"},"Authentication Error:",-1)),t("p",null,C(l.value),1),I[1]||(I[1]=t("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):N("",!0),O(vt,{"current-route":_.value},null,8,["current-route"]),t("div",co,[d(o).header?(u(),h("header",{key:0,class:m(["border-b transition-all duration-200 backdrop-blur-sm",d(a)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[t("div",uo,[t("div",{class:m(["flex items-center justify-between",d(a)?"text-white":"text-gray-900"])},[t("div",null,[t("h1",{class:m(["text-2xl font-bold transition-colors duration-200",d(a)?"text-white":"text-gray-900"])},[re(M.$slots,"header",{},void 0,!0)],2),d(o).subtitle?(u(),h("div",{key:0,class:m(["mt-1 text-sm",d(a)?"text-gray-300":"text-gray-600"])},[re(M.$slots,"subtitle",{},void 0,!0)],2)):N("",!0)]),d(o).headerActions?(u(),h("div",mo,[re(M.$slots,"headerActions",{},void 0,!0)])):N("",!0)],2)])],2)):N("",!0),t("main",ho,[t("div",vo,[t("div",{class:m(["relative transition-all duration-200",d(o).contentBackground!==!1&&(d(a)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[t("div",{class:m([d(o).contentBackground!==!1?"p-6 sm:p-8":""])},[re(M.$slots,"default",{},void 0,!0)],2)],2)])])]),O(so)],2))}},wo=ne(fo,[["__scopeId","data-v-edbead4a"]]);export{wo as A,ft as a,ye as b,P as n,gt as r,io as u};
