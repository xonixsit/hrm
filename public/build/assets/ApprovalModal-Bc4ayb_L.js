import{e as S,y as U,c as r,i as d,o as i,a as t,d as $,t as o,l as v,w as O,b as E,n as L}from"./app-B_m6gyVW.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"flex items-center justify-center min-h-screen px-4 py-6"},I={class:"text-lg font-medium text-gray-900 mb-4"},P={class:"space-y-4"},F={class:"bg-gray-50 p-4 rounded-lg"},G={class:"text-sm"},J={class:"font-medium text-gray-900"},K={key:0,class:"text-gray-600"},Q={key:0},X={key:1,class:"text-gray-600"},Y={key:0,class:"bg-blue-50 p-4 rounded-lg"},Z={class:"grid grid-cols-3 gap-4 text-xs"},_={key:1,class:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg"},ee={class:"flex items-start"},te={class:"text-sm text-yellow-700 mt-1"},ae={class:"block text-sm font-medium text-gray-700 mb-1"},oe=["required","placeholder"],le={class:"flex justify-end space-x-3 mt-6"},se=["disabled"],re={__name:"ApprovalModal",props:{show:{type:Boolean,default:!1},approval:{type:Object,default:null},action:{type:String,default:"approve"}},emits:["close","submit"],setup(e,{emit:R}){const n=e,u=R,s=S("");U(()=>n.show,l=>{l&&(s.value="")});const T=l=>{l.target===l.currentTarget&&u("close")},V=()=>{n.action==="reject"&&!s.value.trim()||u("submit",{approval:n.approval,action:n.action,comments:s.value.trim()})},c=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(l,a)=>{var m,p,y,g,x,b,f,h,w,k,j,C,A,D,M,B,q,z;return e.show?(i(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:T},[t("div",H,[t("div",{class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",onClick:a[2]||(a[2]=$(()=>{},["stop"]))},[t("h3",I,o(e.action==="approve"?"Approve":"Reject")+" "+o((m=e.approval)!=null&&m.leave_type?"Leave Request":"Timesheet"),1),t("div",P,[t("div",F,[t("div",G,[t("div",J,o(((g=(y=(p=e.approval)==null?void 0:p.employee)==null?void 0:y.user)==null?void 0:g.name)||((x=e.approval)==null?void 0:x.requester)||"Unknown User"),1),(b=e.approval)!=null&&b.leave_type?(i(),r("div",K,[t("div",null,o(e.approval.leave_type.name),1),t("div",null,o(c(e.approval.from_date))+" - "+o(c(e.approval.to_date)),1),e.approval.reason?(i(),r("div",Q,o(e.approval.reason),1)):d("",!0)])):(i(),r("div",X,[t("div",null,o(c(((f=e.approval)==null?void 0:f.date)||((h=e.approval)==null?void 0:h.created_at)))+o((w=e.approval)!=null&&w.hours?` - ${e.approval.hours}h`:(j=(k=e.approval)==null?void 0:k.stats)!=null&&j.total_hours?` - ${e.approval.stats.total_hours}`:""),1),t("div",null,o(((A=(C=e.approval)==null?void 0:C.project)==null?void 0:A.name)||((D=e.approval)==null?void 0:D.title)||"No project"),1)]))])]),(M=e.approval)!=null&&M.work_report&&!((B=e.approval)!=null&&B.leave_type)?(i(),r("div",Y,[a[6]||(a[6]=t("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Work Report Context",-1)),t("div",Z,[t("div",null,[a[3]||(a[3]=t("span",{class:"text-blue-700"},"Calls:",-1)),v(" "+o(e.approval.work_report.successful_calls)+"/"+o(e.approval.work_report.calls),1)]),t("div",null,[a[4]||(a[4]=t("span",{class:"text-blue-700"},"Emails:",-1)),v(" "+o(e.approval.work_report.emails),1)]),t("div",null,[a[5]||(a[5]=t("span",{class:"text-blue-700"},"WhatsApp:",-1)),v(" "+o(e.approval.work_report.whatsapp),1)])])])):d("",!0),(q=e.approval)!=null&&q.has_discrepancy&&!((z=e.approval)!=null&&z.leave_type)?(i(),r("div",_,[t("div",ee,[a[8]||(a[8]=t("svg",{class:"w-5 h-5 text-yellow-400 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("div",null,[a[7]||(a[7]=t("h4",{class:"text-sm font-medium text-yellow-800"},"Time Discrepancy Detected",-1)),t("p",te,o(e.approval.has_discrepancy.message),1)])])])):d("",!0),t("div",null,[t("label",ae," Comments "+o(e.action==="reject"?"(Required)":"(Optional)"),1),O(t("textarea",{"onUpdate:modelValue":a[0]||(a[0]=N=>s.value=N),rows:"3",required:e.action==="reject",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:e.action==="approve"?"Add approval comments...":"Please provide reason for rejection..."},null,8,oe),[[E,s.value]])])]),t("div",le,[t("button",{onClick:a[1]||(a[1]=N=>l.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),t("button",{onClick:V,disabled:e.action==="reject"&&!s.value.trim(),class:L(["px-4 py-2 text-sm font-medium text-white rounded-lg",e.action==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",e.action==="reject"&&!s.value.trim()?"opacity-50 cursor-not-allowed":""])},o(e.action==="approve"?"Approve":"Reject"),11,se)])])])])):d("",!0)}}},de=W(re,[["__scopeId","data-v-74e4d106"]]);export{de as A};
