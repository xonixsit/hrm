import{e as N,f as W,Q as S,g as F,o as l,h as f,k as i,a as e,c as a,i as c,w as x,u,b as V,t as o,F as w,r as _,v as y,l as h,q as X,S as k}from"./app-CYiCHHtl.js";import{l as Y}from"./lodash-BoM9SElg.js";import{A as Z}from"./AuthenticatedLayout-OJ8nbzut.js";import{P as ee}from"./PageLayout-KxHPiCfK.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-UyUnwZtN.js";/* empty css                                                                   *//* empty css                                                                  *//* empty css                                                                   *//* empty css                                                                        *//* empty css                                                                  */import{I as C}from"./Icon-DYyT9S_N.js";/* empty css                                                                     */import{C as L}from"./ContentCard-DAjw3DAq.js";import{a as T,J as te,q as se,b as re,j as ne,r as le}from"./icons-DqfuWBCr.js";import{r as oe}from"./ChartBarIcon-BBbJB7X9.js";import"./useAuth-mpSMW43X.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-DR5DXCtK.js";import"./PageHeader-DgqVtpv4.js";/* empty css                                                                   */const ae={class:"flex justify-between items-start mb-6"},ie={class:"flex items-center space-x-3"},de={class:"relative flex-1 max-w-md"},ue={class:"hidden sm:inline"},me={key:0,class:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-blue-100 bg-blue-600 rounded-full"},ce={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg"},pe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fe=["value"],xe=["value"],ge=["value"],be={key:0,class:"mt-4 flex flex-wrap gap-2"},ve={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ye={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},he={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},we={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},_e={class:"min-w-full divide-y divide-neutral-300"},ke={class:"bg-white divide-y divide-neutral-200"},Ce={class:"px-6 py-4"},De={class:"flex items-center space-x-3"},Se={class:"flex-shrink-0"},je={class:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"},Me={class:"min-w-0 flex-1"},Ae={class:"text-sm font-semibold text-neutral-900 truncate"},Ne={class:"text-xs text-neutral-500 truncate"},Fe={class:"px-6 py-4"},Ve={class:"flex items-center space-x-2"},$e={class:"flex -space-x-1"},Ue={key:0,class:"w-6 h-6 bg-neutral-300 rounded-full border-2 border-white flex items-center justify-center text-xs font-medium text-neutral-600"},Oe={class:"text-sm"},Ee={class:"font-medium text-neutral-900"},Le={class:"text-xs text-neutral-500"},Te={class:"px-6 py-4"},ze={key:0,class:"flex items-center space-x-2"},Pe={class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},Be={class:"text-sm font-medium text-green-700"},Ie={class:"min-w-0 flex-1"},qe={class:"text-sm font-medium text-neutral-900 truncate"},He={class:"text-xs text-neutral-500 truncate"},Qe={key:1,class:"flex items-center space-x-2"},Re={class:"px-6 py-4"},Ge={class:"text-sm"},Je={class:"flex items-center space-x-1 text-neutral-900"},Ke={class:"text-xs text-neutral-500 mt-1"},We={class:"px-6 py-4 text-right"},Xe={class:"flex items-center justify-end space-x-1"},Ye=["onClick","disabled"],Ze={key:0,class:"text-center py-12"},et={class:"mt-6"},tt={key:0,class:"mt-6"},st={class:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0"},rt={class:"-mt-px flex w-0 flex-1"},nt={class:"hidden md:-mt-px md:flex"},lt={class:"inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-gray-500"},ot={class:"-mt-px flex w-0 flex-1 justify-end"},jt={__name:"Index",props:{departments:{type:Object,required:!0},filterOptions:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(d){const p=d,$=N(!1),D=N(!1),r=N({search:p.filters.search||"",status:p.filters.status||"",manager:p.filters.manager||"",parent:p.filters.parent||"",employee_count:p.filters.employee_count||"",date_from:p.filters.date_from||"",date_to:p.filters.date_to||"",sort_by:p.filters.sort_by||"name",sort_order:p.filters.sort_order||"asc"}),z=[{label:"Dashboard",href:route("dashboard")},{label:"People Management",href:"#"},{label:"Departments",current:!0}],P=[{id:"add-department",label:"Add Department",icon:T,variant:"primary",handler:()=>S.visit(route("departments.create"))},{id:"org-chart",label:"Organization Chart",icon:oe,variant:"secondary",handler:()=>S.visit(route("departments.org-chart"))},{id:"export",label:"Export",icon:te,variant:"secondary",handler:()=>R()}],U=n=>n.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),B=n=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[n]||"building-office",I=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",q=n=>{if(!n)return"";const t=new Date(n),v=Math.abs(new Date-t),g=Math.ceil(v/(1e3*60*60*24));if(g<30)return`${g} days ago`;if(g<365){const b=Math.floor(g/30);return`${b} month${b>1?"s":""} ago`}else{const b=Math.floor(g/365);return`${b} year${b>1?"s":""} ago`}},H=n=>n===0?"No staff assigned":n===1?"Single member":n<=5?"Small team":n<=15?"Medium team":"Large team",Q=n=>{confirm("Are you sure you want to delete this department? This action cannot be undone.")&&($.value=!0,S.delete(route("departments.destroy",n),{onFinish:()=>{$.value=!1},onError:()=>{alert("Failed to delete department. Please try again.")}}))},R=()=>{window.location.href=route("departments.export")},j=W(()=>{let n=0;return r.value.search&&n++,r.value.status&&n++,r.value.manager&&n++,r.value.parent&&n++,r.value.employee_count&&n++,r.value.date_from&&n++,r.value.date_to&&n++,n}),O=Y.debounce(()=>{m()},300),m=()=>{S.get(route("departments.index"),r.value,{preserveState:!0,preserveScroll:!0,replace:!0})},M=n=>{r.value[n]="",m()},G=()=>{r.value={search:"",status:"",manager:"",parent:"",employee_count:"",date_from:"",date_to:"",sort_by:"name",sort_order:"asc"},m()},J=n=>{var s;const t=(s=p.filterOptions.managers)==null?void 0:s.find(v=>v.id.toString()===n.toString());return t?t.name:"Unknown"};return(n,t)=>(l(),F(Z,null,{default:f(()=>[i(ee,{title:"Departments",subtitle:"Manage organizational departments and structure",breadcrumbs:z,actions:P},{default:f(()=>[i(L,{class:"mb-6"},{default:f(()=>[e("div",ae,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Department List")],-1)),e("div",ie,[e("div",de,[t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.search=s),type:"text",placeholder:"Name, code, manager...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onInput:t[1]||(t[1]=(...s)=>u(O)&&u(O)(...s))},null,544),[[V,r.value.search]])]),e("button",{onClick:t[2]||(t[2]=s=>D.value=!D.value),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 whitespace-nowrap"},[t[15]||(t[15]=e("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),e("span",ue,o(D.value?"Hide Filters":"Show Filters"),1),t[16]||(t[16]=e("span",{class:"sm:hidden"},"Filters",-1)),j.value>0?(l(),a("span",me,o(j.value),1)):c("",!0)])])]),D.value?(l(),a("div",ce,[e("div",pe,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.status=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[t[18]||(t[18]=e("option",{value:""},"All statuses",-1)),(l(!0),a(w,null,_(d.filterOptions.statuses,s=>(l(),a("option",{key:s,value:s},o(s),9,fe))),128))],544),[[y,r.value.status]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Manager",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.manager=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[t[20]||(t[20]=e("option",{value:""},"All managers",-1)),(l(!0),a(w,null,_(d.filterOptions.managers,s=>(l(),a("option",{key:s.id,value:s.id},o(s.name),9,xe))),128))],544),[[y,r.value.manager]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Parent Department",-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.parent=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[t[22]||(t[22]=e("option",{value:""},"All departments",-1)),t[23]||(t[23]=e("option",{value:"none"},"Top-level only",-1)),(l(!0),a(w,null,_(d.filterOptions.parents,s=>(l(),a("option",{key:s.id,value:s.id},o(s.name),9,ge))),128))],544),[[y,r.value.parent]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Team Size",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.employee_count=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},t[25]||(t[25]=[e("option",{value:""},"All sizes",-1),e("option",{value:"none"},"No employees",-1),e("option",{value:"small"},"Small (1-5)",-1),e("option",{value:"medium"},"Medium (6-15)",-1),e("option",{value:"large"},"Large (16+)",-1)]),544),[[y,r.value.employee_count]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.date_from=s),type:"date",onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,544),[[V,r.value.date_from]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.date_to=s),type:"date",onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,544),[[V,r.value.date_to]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sort By",-1)),x(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.sort_by=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},t[29]||(t[29]=[e("option",{value:"name"},"Name",-1),e("option",{value:"employees_count"},"Employee Count",-1),e("option",{value:"manager"},"Manager",-1),e("option",{value:"created_at"},"Created Date",-1),e("option",{value:"status"},"Status",-1)]),544),[[y,r.value.sort_by]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sort Order",-1)),x(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.sort_order=s),onChange:m,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},t[31]||(t[31]=[e("option",{value:"asc"},"Ascending",-1),e("option",{value:"desc"},"Descending",-1)]),544),[[y,r.value.sort_order]])])]),j.value>0?(l(),a("div",be,[t[33]||(t[33]=e("span",{class:"text-sm font-medium text-gray-700"},"Active filters:",-1)),r.value.search?(l(),a("span",ve,[h(' Search: "'+o(r.value.search)+'" ',1),e("button",{onClick:t[11]||(t[11]=s=>M("search")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-500"},[i(C,{name:"x-mark",class:"w-2 h-2"})])])):c("",!0),r.value.status?(l(),a("span",ye,[h(" Status: "+o(r.value.status)+" ",1),e("button",{onClick:t[12]||(t[12]=s=>M("status")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500"},[i(C,{name:"x-mark",class:"w-2 h-2"})])])):c("",!0),r.value.manager?(l(),a("span",he,[h(" Manager: "+o(J(r.value.manager))+" ",1),e("button",{onClick:t[13]||(t[13]=s=>M("manager")),class:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500"},[i(C,{name:"x-mark",class:"w-2 h-2"})])])):c("",!0),e("button",{onClick:G,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," Clear all ")])):c("",!0)])):c("",!0)]),_:1}),i(L,null,{default:f(()=>[e("div",we,[e("table",_e,[t[35]||(t[35]=e("thead",{class:"bg-neutral-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Department "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Employees "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Manager "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Created "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ke,[(l(!0),a(w,null,_(d.departments.data,s=>{var v,g,b;return l(),a("tr",{key:s.id,class:"hover:bg-neutral-50"},[e("td",Ce,[e("div",De,[e("div",Se,[e("div",je,[i(C,{name:B(s.name),class:"w-5 h-5 text-primary-600"},null,8,["name"])])]),e("div",Me,[e("div",Ae,o(s.name),1),e("div",Ne,o(s.code||"No department code"),1)])])]),e("td",Fe,[e("div",Ve,[e("div",$e,[(l(!0),a(w,null,_((v=s.employees)==null?void 0:v.slice(0,3),(A,K)=>{var E;return l(),a("div",{key:A.id,class:"w-6 h-6 bg-neutral-200 rounded-full border-2 border-white flex items-center justify-center text-xs font-medium text-neutral-600",style:X({zIndex:3-K})},o(U(((E=A.user)==null?void 0:E.name)||"N/A")),5)}),128)),(s.employees_count||0)>3?(l(),a("div",Ue," +"+o((s.employees_count||0)-3),1)):c("",!0)]),e("div",Oe,[e("div",Ee,o(s.employees_count||0)+" "+o((s.employees_count||0)===1?"employee":"employees"),1),e("div",Le,o(H(s.employees_count||0)),1)])])]),e("td",Te,[s.manager?(l(),a("div",ze,[e("div",Pe,[e("span",Be,o(U(((g=s.manager.user)==null?void 0:g.name)||"N/A")),1)]),e("div",Ie,[e("div",qe,o(((b=s.manager.user)==null?void 0:b.name)||"Unknown"),1),e("div",He,o(s.manager.job_title||"Manager"),1)])])):(l(),a("div",Qe,t[34]||(t[34]=[e("div",{class:"w-8 h-8 bg-neutral-100 rounded-full flex items-center justify-center"},[e("span",{class:"text-sm font-medium text-neutral-400"}," -- ")],-1),e("div",{class:"min-w-0 flex-1"},[e("div",{class:"text-sm text-neutral-400 italic truncate"}," No manager assigned "),e("div",{class:"text-xs text-neutral-400 truncate"}," Requires assignment ")],-1)])))]),e("td",Re,[e("div",Ge,[e("div",Je,[i(u(se),{class:"w-4 h-4 text-neutral-400"}),e("span",null,o(I(s.created_at)),1)]),e("div",Ke,o(q(s.created_at)),1)])]),e("td",We,[e("div",Xe,[i(u(k),{href:n.route("departments.show",s.id),class:"inline-flex items-center p-2 text-neutral-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"View Department"},{default:f(()=>[i(u(re),{class:"h-4 w-4"})]),_:2},1032,["href"]),i(u(k),{href:n.route("departments.edit",s.id),class:"inline-flex items-center p-2 text-neutral-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit Department"},{default:f(()=>[i(u(ne),{class:"h-4 w-4"})]),_:2},1032,["href"]),e("button",{onClick:A=>Q(s.id),class:"inline-flex items-center p-2 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:text-neutral-400 disabled:hover:bg-transparent",title:"Delete Department",disabled:(s.employees_count||0)>0},[i(u(le),{class:"h-4 w-4"})],8,Ye)])])])}),128))])]),!d.departments.data||d.departments.data.length===0?(l(),a("div",Ze,[i(C,{name:"building-office",class:"mx-auto h-12 w-12 text-gray-400"}),t[37]||(t[37]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No departments",-1)),t[38]||(t[38]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new department.",-1)),e("div",et,[i(u(k),{href:n.route("departments.create"),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:f(()=>[i(u(T),{class:"-ml-1 mr-2 h-5 w-5"}),t[36]||(t[36]=h(" New Department "))]),_:1,__:[36]},8,["href"])])])):c("",!0)]),d.departments.data&&d.departments.data.length>0?(l(),a("div",tt,[e("nav",st,[e("div",rt,[d.departments.prev_page_url?(l(),F(u(k),{key:0,href:d.departments.prev_page_url,class:"inline-flex items-center border-t-2 border-transparent pt-4 pr-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"},{default:f(()=>t[39]||(t[39]=[h(" Previous ")])),_:1,__:[39]},8,["href"])):c("",!0)]),e("div",nt,[e("span",lt," Page "+o(d.departments.current_page)+" of "+o(d.departments.last_page),1)]),e("div",ot,[d.departments.next_page_url?(l(),F(u(k),{key:0,href:d.departments.next_page_url,class:"inline-flex items-center border-t-2 border-transparent pt-4 pl-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"},{default:f(()=>t[40]||(t[40]=[h(" Next ")])),_:1,__:[40]},8,["href"])):c("",!0)])])])):c("",!0)]),_:1})]),_:1})]),_:1}))}};export{jt as default};
