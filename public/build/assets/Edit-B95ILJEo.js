import{x as O,f,Q as D,y as W,g as E,o as p,h as c,k as m,c as B,i as j,a as e,l as g,t as l,n as h,u as s,w as k,b as v,S as q}from"./app-CEXzEMMR.js";import{u as P}from"./useNotifications-NL6mdyHd.js";import{_ as R}from"./AuthenticatedLayout-l7Wkq27O.js";import{P as Q}from"./PageLayout-DhnLVcf6.js";import{F as Y,a as S}from"./FormSection-DE21ZkTt.js";import{F as w}from"./FormField-CSUClFqo.js";import"./useAuth-DHcx6i2v.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CWVa1HTx.js";import"./Icon-D_evevV6.js";import"./useAccessibility-Bb-oRnMb.js";import"./PageHeader-CD1dYa7w.js";/* empty css                                                                   *//* empty css                                                                   */const G={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},J={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto"},K={key:0,class:"mb-8"},X={class:"bg-white shadow-xl rounded-2xl border border-gray-200 overflow-hidden"},Z={class:"p-6"},ee={class:"flex items-center space-x-6"},te={class:"flex-shrink-0"},oe={class:"h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"},re={class:"text-2xl font-bold text-white"},ne={class:"flex-1"},se={class:"text-2xl font-bold text-gray-900"},ae={class:"text-lg text-gray-600 mt-1"},ie={class:"flex flex-wrap items-center mt-4 gap-3"},le={class:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border border-gray-300"},de={class:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 border border-blue-300"},ce={class:"mb-8"},ue={class:"bg-white shadow-xl rounded-2xl border border-gray-200 overflow-hidden"},me={class:"p-6"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ge={class:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl border border-blue-200 transform hover:scale-105 transition-transform duration-200"},be={class:"text-2xl font-bold text-blue-600"},xe={class:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-2xl border border-green-200 transform hover:scale-105 transition-transform duration-200"},he={class:"text-2xl font-bold text-green-600"},pe={class:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl border border-purple-200 transform hover:scale-105 transition-transform duration-200"},ke={class:"text-2xl font-bold text-purple-600"},ve={class:"text-center p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl border border-orange-200 transform hover:scale-105 transition-transform duration-200"},we={class:"text-2xl font-bold text-orange-600"},ye={class:"bg-white shadow-xl rounded-2xl border border-gray-200 overflow-hidden"},_e={class:"space-y-6"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce=["min"],De={key:0,class:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},Be={class:"flex items-start"},je={class:"text-sm text-yellow-700 mt-1"},Se={class:"text-xs text-neutral-500 mt-1"},qe={__name:"Edit",props:{attendance:{type:Object,required:!0}},setup(d){const n=d,{showNotification:y}=P();console.log("Attendance data received:",n.attendance);const _=o=>{if(!o)return"";const t=new Date(o);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0"),x=String(t.getHours()).padStart(2,"0"),b=String(t.getMinutes()).padStart(2,"0");return`${a}-${i}-${u}T${x}:${b}`},z=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",A=o=>({clocked_in:"Clocked In",clocked_out:"Clocked Out",on_break:"On Break"})[o]||o,N=o=>`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${{clocked_in:"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border-green-300",clocked_out:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border-gray-300",on_break:"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 border-yellow-300"}[o]||"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border-gray-300"}`,V=o=>!o||typeof o!="string"?"--":o.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),r=O({clock_in:_(n.attendance.clock_in),clock_out:_(n.attendance.clock_out),notes:n.attendance.notes||""}),T=()=>{if(!n.attendance.clock_in)return"0h 0m";const o=new Date(n.attendance.clock_in),t=n.attendance.clock_out?new Date(n.attendance.clock_out):null;if(isNaN(o.getTime()))return"0h 0m";if(!t)return"Still Working";if(isNaN(t.getTime()))return"0h 0m";const a=Math.floor((t-o)/(1e3*60)),i=n.attendance.total_break_minutes||0,u=Math.max(0,a-i),x=Math.floor(u/60),b=u%60;return`${x}h ${b}m`},$=()=>{let t=n.attendance.total_break_minutes||0;if(n.attendance.on_break&&n.attendance.current_break_start){const u=new Date(n.attendance.current_break_start),b=Math.floor((new Date-u)/(1e3*60));t+=b}const a=Math.floor(t/60),i=t%60;return`${a}h ${i}m`},U=f(()=>n.attendance.work_duration_formatted||T()),I=f(()=>n.attendance.break_duration_formatted||$()),F=f(()=>n.attendance.break_sessions_count||(n.attendance.break_sessions||[]).length);f(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Attendances",href:route("attendances.index")},{label:`Record #${n.attendance.id}`,href:route("attendances.show",n.attendance.id)},{label:"Edit",current:!0}]),f(()=>[{id:"back-to-details",label:"Back to Details",icon:"arrow-left",variant:"secondary",handler:()=>D.visit(route("attendances.show",n.attendance.id))}]);const H=f(()=>[{id:"cancel",label:"Cancel",variant:"secondary",type:"button"},{id:"submit",label:"Update Attendance",variant:"primary",type:"submit",loadingLabel:"Updating..."}]),M=f(()=>{if(!r.clock_in)return null;const o=new Date(r.clock_in),t=r.clock_out?new Date(r.clock_out):null;if(t&&t<=o)return"Clock out time must be after clock in time.";if(t){const a=(t-o)/36e5;if(a>24)return"Work duration exceeds 24 hours. Please verify the times are correct.";if(a>12)return"Work duration exceeds 12 hours. This may require manager approval."}return null}),L=o=>{switch(o.id){case"cancel":D.visit(route("attendances.show",n.attendance.id));break;case"submit":C();break}},C=()=>{r.put(route("attendances.update",n.attendance.id),{onSuccess:()=>{y({type:"success",title:"Attendance Updated",message:"The attendance record has been successfully updated."})},onError:()=>{y({type:"error",title:"Update Failed",message:"Please check the form for errors and try again."})}})};return W(()=>r.clock_out,o=>{if(o&&r.clock_in){const t=new Date(r.clock_in);new Date(o)<=t&&(r.clock_out="")}}),(o,t)=>(p(),E(R,null,{default:c(()=>[m(Q,null,{header:c(()=>[e("div",G,[t[4]||(t[4]=e("div",{class:"flex items-center space-x-4"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-xl"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])])]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Attendance Record"),e("p",{class:"mt-1 text-sm text-gray-600"},"Update attendance record details and timing information")])],-1)),e("div",J,[m(s(q),{href:o.route("attendances.show",d.attendance.id),class:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 border border-transparent rounded-xl font-semibold text-sm text-white uppercase tracking-wide hover:from-gray-700 hover:to-gray-800 active:from-gray-800 active:to-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-25 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},{default:c(()=>t[3]||(t[3]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" Back to Details ")])),_:1,__:[3]},8,["href"])])])]),default:c(()=>{var a;return[(a=d.attendance.employee)!=null&&a.user?(p(),B("div",K,[e("div",X,[t[8]||(t[8]=e("div",{class:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-xl font-semibold text-gray-900 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),g(" Employee Information ")])],-1)),e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[e("span",re,l(V(d.attendance.employee.user.name)),1)])]),e("div",ne,[e("h4",se,l(d.attendance.employee.user.name),1),e("p",ae,l(d.attendance.employee.user.email),1),e("div",ie,[e("span",le,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 011-1h2a2 2 0 011 1v2m-4 0a2 2 0 01-2 2h-2a2 2 0 01-2-2m0 0h4v2m-4-2v2m4-2v2"})],-1)),g(" ID: "+l(d.attendance.employee.employee_code||"N/A"),1)]),e("span",de,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),g(" "+l(z(d.attendance.date)),1)]),e("span",{class:h(N(d.attendance.status))},[t[7]||(t[7]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+l(A(d.attendance.status)),1)],2)])])])])])])):j("",!0),e("div",ce,[e("div",ue,[t[17]||(t[17]=e("div",{class:"bg-gradient-to-r from-emerald-50 to-teal-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-xl font-semibold text-gray-900 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),g(" Current Record Summary ")])],-1)),e("div",me,[e("div",fe,[e("div",ge,[t[9]||(t[9]=e("div",{class:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mx-auto mb-3"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",be,l(U.value),1),t[10]||(t[10]=e("div",{class:"text-sm font-medium text-blue-800 mt-1"},"Work Duration",-1))]),e("div",xe,[t[11]||(t[11]=e("div",{class:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center mx-auto mb-3"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",he,l(I.value),1),t[12]||(t[12]=e("div",{class:"text-sm font-medium text-green-800 mt-1"},"Break Duration",-1))]),e("div",pe,[t[13]||(t[13]=e("div",{class:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mx-auto mb-3"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})])],-1)),e("div",ke,l(F.value),1),t[14]||(t[14]=e("div",{class:"text-sm font-medium text-purple-800 mt-1"},"Break Sessions",-1))]),e("div",ve,[t[15]||(t[15]=e("div",{class:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mx-auto mb-3"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",we,l(d.attendance.location?"Yes":"No"),1),t[16]||(t[16]=e("div",{class:"text-sm font-medium text-orange-800 mt-1"},"Location Tracked",-1))])])])])]),e("div",ye,[m(Y,{title:"Update Attendance Record",description:"Modify the attendance timing and additional information",errors:s(r).errors,"is-submitting":s(r).processing,actions:H.value,variant:"card",onSubmit:C,onAction:L},{default:c(()=>[e("div",_e,[m(S,{title:"Time Information",description:"Update clock in/out times"},{default:c(()=>[e("div",Me,[m(w,{label:"Clock In Time",error:s(r).errors.clock_in,required:""},{default:c(()=>[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s(r).clock_in=i),type:"datetime-local",class:h(["w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":s(r).errors.clock_in}]),required:""},null,2),[[v,s(r).clock_in]])]),_:1},8,["error"]),m(w,{label:"Clock Out Time",error:s(r).errors.clock_out,description:"Leave empty if still clocked in"},{default:c(()=>[k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s(r).clock_out=i),type:"datetime-local",class:h(["w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":s(r).errors.clock_out}]),min:s(r).clock_in},null,10,Ce),[[v,s(r).clock_out]])]),_:1},8,["error"])]),M.value?(p(),B("div",De,[e("div",Be,[t[19]||(t[19]=e("svg",{class:"w-5 h-5 text-yellow-400 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[t[18]||(t[18]=e("h4",{class:"text-sm font-medium text-yellow-800"},"Time Validation Warning",-1)),e("p",je,l(M.value),1)])])])):j("",!0)]),_:1}),m(S,{title:"Additional Information",description:"Add notes or comments about this attendance record"},{default:c(()=>[m(w,{label:"Notes",error:s(r).errors.notes,description:"Add any relevant notes about this attendance record"},{default:c(()=>{var i;return[k(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>s(r).notes=u),rows:"4",class:h(["w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",{"border-red-500":s(r).errors.notes}]),placeholder:"Add any notes about this attendance record..."},null,2),[[v,s(r).notes]]),e("p",Se,l(((i=s(r).notes)==null?void 0:i.length)||0)+"/500 characters ",1)]}),_:1},8,["error"])]),_:1})])]),_:1},8,["errors","is-submitting","actions"])])]}),_:1})]),_:1}))}};export{qe as default};
