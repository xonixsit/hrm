import{x as N,e as A,f as d,g as S,o as l,h as x,k as p,a as e,d as L,c as r,i as m,w as _,u as i,F as v,r as h,t as a,v as $,l as u,b as ne,n as F,Q as b}from"./app-DflEEY0f.js";import{_ as le}from"./AuthenticatedLayout-BDF3O316.js";import{P as re}from"./PageLayout-Cj4sH2Vd.js";import{P as ae}from"./PrimaryButton-vi-iDuHG.js";import{_ as I}from"./SecondaryButton-Be4kCNBW.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as de,e as P,a as T}from"./Icon-O_I9VnJf.js";import"./useAuth-Dwdd_FLp.js";import"./ApplicationLogo-DMHJTmdG.js";import"./useAccessibility-XqjwgVe8.js";import"./PageHeader-Df09ntfd.js";/* empty css                                                                   *//* empty css                                                                   */const ce={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},me={class:"p-6 text-gray-900"},ue={class:"space-y-4"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye={class:"space-y-2"},be=["value"],ge={class:"space-y-2"},fe={key:0,class:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},xe={class:"flex items-center space-x-2 mb-2"},_e={class:"text-sm font-medium text-blue-900"},ve={class:"text-sm text-blue-700 grid grid-cols-2 gap-4"},he={class:"space-y-4"},ke=["value"],Ce={class:"relative mb-2"},we={key:0,class:"space-y-2 max-h-64 overflow-y-auto"},Ae={class:"flex items-center justify-between"},Se=["onClick"],$e={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-medium text-sm flex-shrink-0"},Pe={class:"flex-1"},je={class:"font-medium text-gray-900"},De={class:"flex items-center space-x-2 text-sm text-gray-600"},Ee={key:0,class:"text-gray-400"},Be={key:1,class:"text-gray-500"},Le={class:"flex-shrink-0"},Ue={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},Ve={class:"ml-4 flex items-center space-x-2"},Me=["onClick"],Ne={key:1,class:"mt-3"},Fe={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},Ie={class:"flex items-center space-x-2"},Te={class:"text-sm font-medium text-blue-900"},qe={class:"space-y-4"},Qe=["value"],Re={key:0},ze={class:"space-y-2 max-h-64 overflow-y-auto"},Oe={class:"flex items-start justify-between"},Ge=["onClick"],He={class:"font-medium text-gray-900"},Je={class:"text-sm text-gray-600 mt-1"},Ke={class:"flex items-center mt-2"},We={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Xe={class:"ml-3 flex items-start space-x-2"},Ye={class:"flex-shrink-0"},Ze={key:1,class:"w-5 h-5 border-2 border-gray-300 rounded"},es=["onClick"],ss={key:1,class:"mt-3"},ts={class:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg"},os={class:"flex items-center space-x-2"},ns={class:"text-sm font-medium text-blue-900"},ls={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},rs={class:"flex items-center justify-between pt-6 border-t border-gray-200"},as={class:"flex items-center space-x-3"},is={__name:"Create",props:{employees:{type:Array,required:!0},competencies:{type:Array,required:!0},assessmentCycles:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},setup(j){const y=j,o=N({employee_ids:[],competency_ids:[],assessment_type:"manager",assessment_cycle_id:null}),g=A(""),k=A("");A("");const f=A(""),q=d(()=>{let n=y.employees;if(k.value&&(n=n.filter(s=>s.department&&s.department.id===k.value)),g.value&&g.value.length>=2){const s=g.value.toLowerCase();n=n.filter(t=>t.name.toLowerCase().includes(s)||t.position&&t.position.toLowerCase().includes(s))}return n.sort((s,t)=>s.name.localeCompare(t.name))}),U=d(()=>q.value),D=d(()=>y.employees.filter(n=>o.employee_ids.includes(n.id))),Q=d(()=>[...new Set(y.competencies.map(s=>s.category))].sort()),R=d(()=>f.value?y.competencies.filter(n=>n.category===f.value).sort((n,s)=>n.name.localeCompare(s.name)):[]),E=d(()=>y.competencies.filter(n=>o.competency_ids.includes(n.id))),C=d(()=>o.assessment_cycle_id?y.assessmentCycles.find(n=>n.id===o.assessment_cycle_id):null),B=d(()=>o.employee_ids.length>0&&o.competency_ids.length>0&&!o.processing),w=d(()=>o.employee_ids.length*o.competency_ids.length),z=d(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Create Assessment",current:!0}]),O=d(()=>[{label:"Back to Dashboard",href:route("assessment-dashboard"),variant:"secondary",icon:"ArrowLeftIcon"}]),G=n=>n.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),V=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",H=n=>{o.employee_ids.indexOf(n.id)>-1?o.employee_ids=o.employee_ids.filter(t=>t!==n.id):o.employee_ids=[...o.employee_ids,n.id]},J=n=>{o.competency_ids.indexOf(n.id)>-1?o.competency_ids=o.competency_ids.filter(t=>t!==n.id):o.competency_ids=[...o.competency_ids,n.id]},K=()=>{o.employee_ids=[]},W=()=>{o.competency_ids=[]},M=()=>{if(o.employee_ids.length===0||o.competency_ids.length===0){alert("Please select at least one employee and one competency");return}if(o.employee_ids.length*o.competency_ids.length===1){const s=new URLSearchParams({employee_id:o.employee_ids[0],competency_id:o.competency_ids[0],assessment_type:o.assessment_type});o.assessment_cycle_id&&s.append("assessment_cycle_id",o.assessment_cycle_id);const t=`${route("assessment-form")}?${s.toString()}`;b.visit(t)}else{const s=o.competency_ids.map(t=>{const c=N({employee_ids:o.employee_ids,competency_id:t,assessment_type:o.assessment_type,assessment_cycle_id:o.assessment_cycle_id});return new Promise((se,te)=>{c.post(route("competency-assessments.bulk-create"),{onSuccess:()=>se(),onError:oe=>te(oe)})})});o.processing=!0,Promise.all(s).then(()=>{b.visit(route("competency-assessments.index"))}).catch(t=>{console.error("Error creating bulk assessments:",t),o.processing=!1})}},X=()=>{if(o.employee_ids.length===0||o.competency_ids.length===0){alert("Please select at least one employee and one competency");return}const n=new URLSearchParams({employee_id:o.employee_ids[0],competency_id:o.competency_ids[0],assessment_type:o.assessment_type});o.assessment_cycle_id&&n.append("assessment_cycle_id",o.assessment_cycle_id);const s=`${route("assessment-form")}?${n.toString()}`;b.visit(s)},Y=n=>{if(o.competency_ids.length===0){alert("Please select at least one competency first");return}const s=o.competency_ids[0],t=new URLSearchParams({employee_id:n.id,competency_id:s,assessment_type:o.assessment_type});o.assessment_cycle_id&&t.append("assessment_cycle_id",o.assessment_cycle_id);const c=`${route("assessment-form")}?${t.toString()}`;b.visit(c)},Z=n=>{if(o.employee_ids.length===0){alert("Please select at least one employee first");return}const s=o.employee_ids[0],t=new URLSearchParams({employee_id:s,competency_id:n.id,assessment_type:o.assessment_type});o.assessment_cycle_id&&t.append("assessment_cycle_id",o.assessment_cycle_id);const c=`${route("assessment-form")}?${t.toString()}`;b.visit(c)},ee=()=>{b.visit(route("assessment-dashboard"))};return(n,s)=>(l(),S(le,null,{default:x(()=>[p(re,{title:"Create Assessment",subtitle:"Set up assessment context, select employees and competencies to evaluate",breadcrumbs:z.value,actions:O.value},{default:x(()=>[s[28]||(s[28]=e("div",{class:"bg-gray-50 rounded-lg border border-gray-200 mb-6"},[e("div",{class:"p-6"},[e("div",{class:"flex items-center justify-between"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full text-sm font-medium"}," 1 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Assessment Context"),e("p",{class:"text-xs text-gray-500"},"Set cycle and assessment type")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 2 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Select Participants"),e("p",{class:"text-xs text-gray-400"},"Choose employees and competencies")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 3 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Create Assessments"),e("p",{class:"text-xs text-gray-400"},"Generate assessment records")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 text-gray-600 rounded-full text-sm font-medium"}," 4 "),e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Begin Evaluation"),e("p",{class:"text-xs text-gray-400"},"Start rating and providing feedback")])])])])],-1)),e("div",ce,[e("div",me,[e("form",{onSubmit:L(M,["prevent"]),class:"space-y-8"},[e("div",ue,[s[14]||(s[14]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Assessment Context",-1)),e("div",pe,[e("div",ye,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Assessment Cycle",-1)),_(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i(o).assessment_cycle_id=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[s[5]||(s[5]=e("option",{value:""},"No specific cycle",-1)),(l(!0),r(v,null,h(j.assessmentCycles,t=>(l(),r("option",{key:t.id,value:t.id},a(t.name),9,be))),128))],512),[[$,i(o).assessment_cycle_id]]),s[7]||(s[7]=e("p",{class:"text-xs text-gray-500"},"Select an assessment cycle to organize assessments by period or campaign",-1))]),e("div",ge,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Assessment Type",-1)),_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i(o).assessment_type=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},s[8]||(s[8]=[e("option",{value:"manager"},"Manager Assessment",-1),e("option",{value:"self"},"Self Assessment",-1),e("option",{value:"peer"},"Peer Assessment",-1),e("option",{value:"360"},"360° Feedback",-1)]),512),[[$,i(o).assessment_type]]),s[10]||(s[10]=e("p",{class:"text-xs text-gray-500"},"Choose the type of assessment to be conducted",-1))])]),C.value?(l(),r("div",fe,[e("div",xe,[s[11]||(s[11]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("h4",_e,a(C.value.name),1)]),e("div",ve,[e("div",null,[s[12]||(s[12]=e("span",{class:"font-medium"},"Start Date:",-1)),u(" "+a(V(C.value.start_date)),1)]),e("div",null,[s[13]||(s[13]=e("span",{class:"font-medium"},"End Date:",-1)),u(" "+a(V(C.value.end_date)),1)])])])):m("",!0)]),e("div",he,[s[19]||(s[19]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Select Employees",-1)),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by Department (Optional) ",-1)),_(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>k.value=t),class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[s[15]||(s[15]=e("option",{value:""},"All Departments",-1)),(l(!0),r(v,null,h(j.departments,t=>(l(),r("option",{key:t.id,value:t.id},a(t.name),9,ke))),128))],512),[[$,k.value]])]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Employees ",-1)),e("div",Ce,[_(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),type:"text",placeholder:"Search by name or position...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[ne,g.value]]),p(i(de),{class:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"})]),U.value.length>0?(l(),r("div",we,[(l(!0),r(v,null,h(U.value,t=>(l(),r("div",{key:t.id,class:F(["bg-white border border-gray-200 rounded-lg p-4 transition-all duration-200 hover:shadow-md",{"ring-2 ring-blue-500 border-blue-200 bg-blue-50":i(o).employee_ids.includes(t.id)}])},[e("div",Ae,[e("div",{class:"flex items-center space-x-3 flex-1 cursor-pointer",onClick:c=>H(t)},[e("div",$e,a(G(t.name)),1),e("div",Pe,[e("h4",je,a(t.name),1),e("div",De,[e("span",null,a(t.position||"Employee"),1),t.department?(l(),r("span",Ee,"•")):m("",!0),t.department?(l(),r("span",Be,a(t.department.name),1)):m("",!0)])]),e("div",Le,[i(o).employee_ids.includes(t.id)?(l(),S(i(P),{key:0,class:"w-5 h-5 text-blue-600"})):(l(),r("div",Ue))])],8,Se),e("div",Ve,[e("button",{onClick:L(c=>Y(t),["stop"]),class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-100 border border-blue-200 rounded-md hover:bg-blue-200 transition-colors",title:"Quick create assessment for this employee"},[p(i(T),{class:"w-3 h-3 mr-1"}),s[17]||(s[17]=u(" Assess "))],8,Me)])])],2))),128))])):m("",!0),D.value.length>0?(l(),r("div",Ne,[e("div",Fe,[e("div",Ie,[p(i(P),{class:"w-5 h-5 text-blue-600"}),e("span",Te,a(D.value.length)+" employee"+a(D.value.length!==1?"s":"")+" selected ",1)]),e("button",{type:"button",onClick:K,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):m("",!0)])]),e("div",qe,[s[24]||(s[24]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Select Competencies",-1)),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Choose Category ",-1)),_(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>f.value=t),class:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[s[20]||(s[20]=e("option",{value:""},"Select a competency category...",-1)),(l(!0),r(v,null,h(Q.value,t=>(l(),r("option",{key:t,value:t},a(t),9,Qe))),128))],512),[[$,f.value]])]),f.value?(l(),r("div",Re,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Choose Competencies ",-1)),e("div",ze,[(l(!0),r(v,null,h(R.value,t=>(l(),r("div",{key:t.id,class:F(["bg-white border border-gray-200 rounded-lg p-4 transition-all duration-200 hover:shadow-md",{"ring-2 ring-blue-500 border-blue-200 bg-blue-50":i(o).competency_ids.includes(t.id)}])},[e("div",Oe,[e("div",{class:"flex-1 cursor-pointer",onClick:c=>J(t)},[e("h4",He,a(t.name),1),e("p",Je,a(t.description),1),e("div",Ke,[e("span",We,a(t.category),1)])],8,Ge),e("div",Xe,[e("div",Ye,[i(o).competency_ids.includes(t.id)?(l(),S(i(P),{key:0,class:"w-5 h-5 text-blue-600"})):(l(),r("div",Ze))]),e("button",{onClick:L(c=>Z(t),["stop"]),class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 bg-green-100 border border-green-200 rounded-md hover:bg-green-200 transition-colors",title:"Quick create assessment for this competency"},[p(i(T),{class:"w-3 h-3 mr-1"}),s[22]||(s[22]=u(" Assess "))],8,es)])])],2))),128))])])):m("",!0),E.value.length>0?(l(),r("div",ss,[e("div",ts,[e("div",os,[p(i(P),{class:"w-5 h-5 text-blue-600"}),e("span",ns,a(E.value.length)+" competenc"+a(E.value.length!==1?"ies":"y")+" selected ",1)]),e("button",{type:"button",onClick:W,class:"text-sm text-blue-700 hover:text-blue-900 font-medium"}," Clear All ")])])):m("",!0)]),B.value&&w.value===1?(l(),r("div",ls,s[25]||(s[25]=[e("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Choose how to proceed:",-1),e("div",{class:"text-sm text-blue-700 space-y-1"},[e("p",null,[e("strong",null,"Add Assessment:"),u(" Navigate directly to the assessment form to start rating")]),e("p",null,[e("strong",null,"Create & Complete Assessment:"),u(" Create the assessment record first, then proceed to rating")])],-1)]))):m("",!0),e("div",rs,[e("div",as,[p(I,{onClick:ee,type:"button"},{default:x(()=>s[26]||(s[26]=[u(" Cancel ")])),_:1,__:[26]}),B.value&&w.value===1?(l(),S(I,{key:0,onClick:X,type:"button",class:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100"},{default:x(()=>s[27]||(s[27]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" Add Assessment ")])),_:1,__:[27]})):m("",!0)]),p(ae,{type:"button",disabled:!B.value,loading:i(o).processing,onClick:M},{default:x(()=>[u(a(w.value>1?`Create ${w.value} Assessments`:"Create & Complete Assessment"),1)]),_:1},8,["disabled","loading"])])],32)])])]),_:1,__:[28]},8,["breadcrumbs","actions"])]),_:1}))}},ks=ie(is,[["__scopeId","data-v-edd242b0"]]);export{ks as default};
