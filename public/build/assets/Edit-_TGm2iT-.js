import{e as M,f as p,g as O,o as t,h as f,k as v,c as o,i as m,a as e,t as i,d as I,F as B,r as E,n as Q,u as S,w as V,l as j,b as $,S as R,Q as F}from"./app-D67KtESJ.js";import{_ as Y}from"./AuthenticatedLayout-CpbHWSvu.js";import{P as G}from"./PageLayout-DQ-3wcua.js";import{c as J,l as K}from"./Icon-Dd-6lDoU.js";import"./useAuth-CLfMmoyK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CyvfW2EW.js";import"./useAccessibility-BOF5R5qI.js";import"./PageHeader-D9eRQrIJ.js";/* empty css                                                                   *//* empty css                                                                   */const W={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md"},X={class:"flex items-center"},Z={class:"text-sm text-green-800"},ee={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},se={class:"flex items-center"},te={class:"text-sm text-red-800"},oe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-900"},le={class:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-900"},ae={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},ie={class:"flex items-center space-x-3 p-3 bg-white border border-gray-200 rounded-md"},de={class:"flex-shrink-0"},me={class:"text-lg"},ue={class:"flex-1"},ce={class:"text-sm font-medium text-gray-900"},pe={class:"text-xs text-gray-600"},ge={class:"flex items-center space-x-4"},fe={class:"flex space-x-1"},ve=["onClick"],be={key:0,class:"text-lg font-medium text-gray-900"},ye={key:0,class:"mt-1 text-sm text-red-600"},xe={class:"block text-sm font-medium text-gray-700 mb-2"},he={key:0,class:"text-red-500"},ke=["required"],we={key:0,class:"mt-1 text-sm text-red-600"},_e={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:0,class:"mt-2"},Ae={class:"text-sm text-gray-600 space-y-1"},Me={class:"flex items-center justify-between pt-6 border-t border-gray-200"},Be={class:"flex items-center space-x-3"},Ee=["disabled"],Se={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ve={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:2},$e={key:3},Fe=["disabled"],ze={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Le={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Te={key:2},De={key:3},Ne={key:1,class:"text-sm text-gray-600"},We={__name:"Edit",props:{assessment:Object,employees:Array,competencies:Array,assessmentCycles:Array,assessmentTypes:Array,errors:Object},setup(l){const u=l,n=M({assessment_type:u.assessment.assessment_type,rating:u.assessment.rating||0,comments:u.assessment.comments||"",development_notes:u.assessment.development_notes||"",evidence_files:u.assessment.evidence_files||[]}),a=M(!1),z=p(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessments",href:route("competency-assessments.index")},{label:"Assessment Details",href:route("competency-assessments.show",u.assessment.id)},{label:"Edit Assessment",href:null}]),L=p(()=>[{label:"Back to Assessment",href:route("competency-assessments.show",u.assessment.id),icon:J,variant:"secondary"}]),g=p(()=>n.value.rating&&(n.value.rating<=2||n.value.rating>=4)),b=p(()=>n.value.rating&&(!g.value||n.value.comments.trim())),T=()=>{a.value=!0,F.put(route("competency-assessments.update",u.assessment.id),n.value,{onSuccess:r=>{console.log("Assessment updated successfully")},onError:r=>{console.error("Failed to update assessment:",r),a.value=!1},onFinish:()=>{a.value=!1}})},D=()=>{if(!b.value){alert("Please provide a rating and required comments before submitting.");return}confirm("Are you sure you want to submit this assessment? You will not be able to edit it after submission.")&&(a.value=!0,F.post(route("competency-assessments.submit",u.assessment.id),n.value,{onSuccess:()=>{},onError:()=>{a.value=!1},onFinish:()=>{a.value=!1}}))},N=r=>{const s=Array.from(r.target.files);n.value.evidence_files=s.map(c=>c.name)},P=r=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360Â° Feedback"})[r]||r,q=r=>({1:"Needs Improvement",2:"Below Expectations",3:"Meets Expectations",4:"Exceeds Expectations",5:"Outstanding"})[r]||"",U=r=>({self:"ðŸ‘¤",manager:"ðŸ‘”",peer:"ðŸ‘¥",360:"ðŸ”„"})[r]||"",H=r=>({self:"Employee self-evaluation",manager:"Manager evaluation of employee",peer:"Peer evaluation",360:"Multi-perspective feedback"})[r]||"";return(r,s)=>(t(),O(Y,null,{default:f(()=>{var c,y,x;return[v(G,{title:"Edit Assessment",subtitle:`${(y=(c=l.assessment.employee)==null?void 0:c.user)==null?void 0:y.name} - ${(x=l.assessment.competency)==null?void 0:x.name}`,breadcrumbs:z.value,actions:L.value},{default:f(()=>{var h,k,w,_,C,A;return[(h=r.$page.props.flash)!=null&&h.success?(t(),o("div",W,[e("div",X,[s[2]||(s[2]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("p",Z,i(r.$page.props.flash.success),1)])])):m("",!0),(k=r.$page.props.flash)!=null&&k.error?(t(),o("div",ee,[e("div",se,[s[3]||(s[3]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),e("p",te,i(r.$page.props.flash.error),1)])])):m("",!0),e("div",oe,[e("form",{onSubmit:I(T,["prevent"]),class:"p-6 space-y-6"},[e("div",ne,[e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Employee",-1)),e("div",re,i((_=(w=l.assessment.employee)==null?void 0:w.user)==null?void 0:_.name),1)]),e("div",null,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Competency",-1)),e("div",le,i((C=l.assessment.competency)==null?void 0:C.name),1)])]),e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Assessment Type",-1)),e("div",ae,[s[6]||(s[6]=e("div",{class:"flex items-center mb-2"},[e("svg",{class:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),e("span",{class:"text-sm text-gray-600"},"Assessment type cannot be changed after creation")],-1)),e("div",ie,[e("div",de,[e("span",me,i(U(l.assessment.assessment_type)),1)]),e("div",ue,[e("h4",ce,i(P(l.assessment.assessment_type)),1),e("p",pe,i(H(l.assessment.assessment_type)),1)])])])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rating",-1)),e("div",ge,[e("div",fe,[(t(),o(B,null,E(5,d=>e("button",{key:d,type:"button",onClick:Pe=>n.value.rating=d,class:Q(["p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",d<=n.value.rating?"text-yellow-400":"text-gray-300 hover:text-yellow-300"])},[v(S(K),{class:"h-8 w-8"})],10,ve)),64))]),n.value.rating?(t(),o("span",be,i(n.value.rating)+"/5 - "+i(q(n.value.rating)),1)):m("",!0)]),l.errors.rating?(t(),o("div",ye,i(l.errors.rating),1)):m("",!0)]),e("div",null,[e("label",xe,[s[9]||(s[9]=j(" Comments ")),g.value?(t(),o("span",he,"*")):m("",!0)]),V(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=d=>n.value.comments=d),required:g.value,rows:"4",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Provide detailed feedback and observations..."},null,8,ke),[[$,n.value.comments]]),s[10]||(s[10]=e("p",{class:"mt-1 text-sm text-gray-500"}," Comments are required for ratings of 1-2 (needs improvement) or 4-5 (exceeds expectations). ",-1)),l.errors.comments?(t(),o("div",we,i(l.errors.comments),1)):m("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Development Notes",-1)),V(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=d=>n.value.development_notes=d),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Suggestions for improvement or development opportunities..."},null,512),[[$,n.value.development_notes]]),l.errors.development_notes?(t(),o("div",_e,i(l.errors.development_notes),1)):m("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Evidence Files",-1)),e("input",{type:"file",multiple:"",onChange:N,class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),s[14]||(s[14]=e("p",{class:"mt-1 text-sm text-gray-500"}," Upload supporting documents or evidence (optional). ",-1)),(A=n.value.evidence_files)!=null&&A.length?(t(),o("div",Ce,[s[12]||(s[12]=e("div",{class:"text-sm text-gray-700 mb-1"},"Current files:",-1)),e("ul",Ae,[(t(!0),o(B,null,E(n.value.evidence_files,d=>(t(),o("li",{key:d},i(d),1))),128))])])):m("",!0)]),e("div",Me,[e("div",Be,[e("button",{type:"submit",disabled:a.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-200"},[a.value?(t(),o("svg",Se,s[15]||(s[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(t(),o("svg",Ve,s[16]||(s[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),a.value?(t(),o("span",je,"Saving Changes...")):(t(),o("span",$e,"Save Changes"))],8,Ee),l.assessment.status==="draft"&&n.value.rating?(t(),o("button",{key:0,type:"button",onClick:D,disabled:a.value||!b.value,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition-all duration-200"},[a.value?(t(),o("svg",ze,s[17]||(s[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(t(),o("svg",Le,s[18]||(s[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10l2 2m0 0l2-2m-2 2V6m0 6l-2-2"},null,-1)]))),a.value?(t(),o("span",Te,"Submitting...")):(t(),o("span",De,"Submit Assessment"))],8,Fe)):m("",!0),a.value?(t(),o("div",Ne,i(a.value?"Updating assessment...":""),1)):m("",!0)]),v(S(R),{href:r.route("competency-assessments.show",l.assessment.id),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},{default:f(()=>s[19]||(s[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),j(" Cancel ")])),_:1,__:[19]},8,["href"])])],32)])]}),_:1},8,["subtitle","breadcrumbs","actions"])]}),_:1}))}};export{We as default};
