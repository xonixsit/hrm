import{e as S,f as y,z as H,B as Y,c as v,i as N,o as d,a as o,t as I,y as ie,F as U,r as V,n as g,u as c,w as se,p as ae,Q as fe,g as Z,s as oe,A as K,l as q,q as me,C as ge,M as ne,k as z,h as ee,N as he,O as pe,d as ye,P as be,S as te,K as ce,R as ke}from"./app-Bj8W9CoF.js";import{u as re}from"./useAuth-DI08NYi3.js";import{D as le,E as we,t as xe}from"./icons-CyONBCp-.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as _e}from"./useAccessibility-DGe0ya_-.js";const Ae={key:0,class:"fixed top-4 right-4 z-50 max-w-md"},Te={class:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg"},Ie={class:"flex items-start"},Se={class:"ml-3 flex-1"},Be={class:"mt-1 text-sm text-red-700"},Ce={key:0,class:"mt-3"},$e={__name:"NavigationErrorDisplay",setup(f){const t=S(!1),e=S(""),s=S(null),r=S(null),l=y(()=>e.value.includes("log in")?"Go to Login":e.value.includes("permission")?"Go to Dashboard":e.value.includes("network")?"Reload Page":"Try Again"),h=(T,w=null)=>{e.value=T,s.value=w,t.value=!0,r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{B()},1e4)},b=async()=>{if(s.value)try{await s.value()}catch(T){console.error("[NAVIGATION ERROR DISPLAY] Fallback action failed:",T)}B()},B=()=>{t.value=!1,e.value="",s.value=null,r.value&&(clearTimeout(r.value),r.value=null)};return H(()=>{typeof window<"u"&&(window.showNavigationError=h)}),Y(()=>{typeof window<"u"&&delete window.showNavigationError,r.value&&clearTimeout(r.value)}),(T,w)=>t.value?(d(),v("div",Ae,[o("div",Te,[o("div",Ie,[w[2]||(w[2]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",Se,[w[0]||(w[0]=o("h3",{class:"text-sm font-medium text-red-800"}," Navigation Error ",-1)),o("div",Be,I(e.value),1),s.value?(d(),v("div",Ce,[o("button",{onClick:b,class:"bg-red-100 hover:bg-red-200 text-red-800 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"},I(l.value),1)])):N("",!0)]),o("div",{class:"ml-4 flex-shrink-0"},[o("button",{onClick:B,class:"bg-red-50 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},w[1]||(w[1]=[o("span",{class:"sr-only"},"Close",-1),o("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):N("",!0)}},G=S("light"),j=S("light"),Q=S(!1),J={light:{name:"Light",key:"light",colors:{background:"#fafafa",surface:"#ffffff",text:"#111827",textSecondary:"#6b7280",border:"#e5e5e5"}},dark:{name:"Dark",key:"dark",colors:{background:"#0a0a0a",surface:"#111827",text:"#fafafa",textSecondary:"#d4d4d4",border:"#404040"}}};function ue(){const f=y(()=>Q.value?j.value:G.value),t=y(()=>J[f.value]),e=y(()=>f.value==="dark"),s=y(()=>f.value==="light"),r=()=>{if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(a){return console.warn("Failed to detect system theme:",a),"light"}},l=(a,n=!1)=>{try{const u={theme:E(a)?a:"light",useSystem:!!n,timestamp:new Date().toISOString(),version:1};localStorage.setItem("theme-preference",JSON.stringify(u))}catch(i){console.warn("Failed to save theme preference:",i);try{localStorage.removeItem("theme-preference")}catch(u){console.warn("Failed to clear corrupted theme preference:",u)}}},h=()=>{try{const a=localStorage.getItem("theme-preference");if(a){const n=JSON.parse(a);if(typeof n=="object"&&n!==null){const i=E(n.theme)?n.theme:"light",u=typeof n.useSystem=="boolean"?n.useSystem:!1;return{theme:i,useSystem:u,timestamp:n.timestamp||null,version:n.version||1}}}}catch(a){console.warn("Failed to load theme preference:",a);try{localStorage.removeItem("theme-preference")}catch(n){console.warn("Failed to clear corrupted theme preference:",n)}}return{theme:"light",useSystem:!1,timestamp:null,version:1}},b=a=>{if(!(typeof document>"u"))try{const n=document.documentElement,i=E(a)?a:"light";n.classList.remove("theme-light","theme-dark","dark","light"),n.classList.add(`theme-${i}`),i==="dark"&&n.classList.add("dark"),B(i);try{window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:i,config:J[i]}}))}catch(u){console.warn("Failed to dispatch theme change event:",u)}}catch(n){console.error("Failed to apply theme:",n);try{const i=document.documentElement;i.classList.remove("theme-light","theme-dark","dark","light"),i.classList.add("theme-light"),B("light")}catch(i){console.error("Failed to apply fallback theme:",i)}}},B=a=>{if(!(typeof document>"u"))try{const n=document.documentElement;a==="dark"?(n.style.setProperty("--color-neutral-50","#0a0a0a"),n.style.setProperty("--color-neutral-100","#111827"),n.style.setProperty("--color-neutral-200","#262626"),n.style.setProperty("--color-neutral-300","#404040"),n.style.setProperty("--color-neutral-400","#525252"),n.style.setProperty("--color-neutral-500","#6b7280"),n.style.setProperty("--color-neutral-600","#a3a3a3"),n.style.setProperty("--color-neutral-700","#d4d4d4"),n.style.setProperty("--color-neutral-800","#e5e5e5"),n.style.setProperty("--color-neutral-900","#fafafa"),n.style.setProperty("--color-neutral-950","#ffffff")):(n.style.setProperty("--color-neutral-50","#fafafa"),n.style.setProperty("--color-neutral-100","#f5f5f5"),n.style.setProperty("--color-neutral-200","#e5e5e5"),n.style.setProperty("--color-neutral-300","#d4d4d4"),n.style.setProperty("--color-neutral-400","#a3a3a3"),n.style.setProperty("--color-neutral-500","#6b7280"),n.style.setProperty("--color-neutral-600","#525252"),n.style.setProperty("--color-neutral-700","#404040"),n.style.setProperty("--color-neutral-800","#262626"),n.style.setProperty("--color-neutral-900","#111827"),n.style.setProperty("--color-neutral-950","#0a0a0a"))}catch(n){console.warn("Failed to update theme properties:",n)}},T=a=>{b(a)},w=a=>{if(!J[a]){console.warn(`Theme "${a}" not found`);return}G.value=a,Q.value=!1,l(a,!1),b(a)},p=()=>{Q.value=!0;const a=r();j.value=a,l(a,!0),b(a)},C=()=>{const a=f.value==="light"?"dark":"light";w(a)},_=()=>{if(typeof window>"u")return;const a=window.matchMedia("(prefers-color-scheme: dark)"),n=i=>{const u=i.matches?"dark":"light";j.value=u,Q.value&&(T(u),l(u,!0))};return a.addEventListener("change",n),()=>{a.removeEventListener("change",n)}},E=a=>J.hasOwnProperty(a),F=()=>Object.values(J),W=()=>{},R=()=>{const a=[];if(E(G.value)||a.push(`Invalid current theme: ${G.value}`),E(j.value)||a.push(`Invalid system theme: ${j.value}`),E(f.value)||a.push(`Invalid active theme: ${f.value}`),typeof document<"u"){const n=document.documentElement,i=n.classList.contains("theme-light"),u=n.classList.contains("theme-dark");!i&&!u&&a.push("No theme class found on document root"),i&&u&&a.push("Multiple theme classes found on document root");const x=`theme-${f.value}`;n.classList.contains(x)||a.push(`Expected theme class ${x} not found on document root`)}return{isValid:a.length===0,issues:a}},k=()=>{if(!(typeof document>"u"))try{const a=document.documentElement;return["theme-light","theme-dark"].forEach(i=>{a.classList.remove(i)}),!0}catch(a){return console.warn("Failed to cleanup theme classes:",a),!1}},m=()=>{try{G.value="light",j.value=r(),Q.value=!1;try{localStorage.removeItem("theme-preference")}catch(a){console.warn("Failed to clear theme preference from localStorage:",a)}return b("light"),!0}catch(a){return console.error("Failed to reset theme to default:",a),!1}},P=()=>{console.warn("Attempting theme system recovery...");try{if(k(),m())return console.log("Theme system recovery successful"),!0;throw new Error("Failed to reset theme to default")}catch(a){console.error("Theme system recovery failed:",a);try{return typeof document<"u"&&document.documentElement.classList.add("theme-light"),!1}catch(n){return console.error("Last resort theme recovery failed:",n),!1}}},L=()=>{try{const a=h();return j.value=r(),a.useSystem?(Q.value=!0,G.value=j.value):(Q.value=!1,G.value=a.theme),b(f.value),_()}catch(a){console.error("Theme initialization failed:",a);try{G.value="light",j.value="light",Q.value=!1,typeof document<"u"&&(document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark","dark"))}catch(n){console.error("Emergency theme fallback failed:",n)}return null}};return H(()=>{L()}),ie(f,a=>{T(a)}),{currentTheme:y(()=>G.value),systemTheme:y(()=>j.value),activeTheme:f,themeConfig:t,isDark:e,isLight:s,isSystemThemePreferred:y(()=>Q.value),setTheme:w,toggleTheme:C,useSystemTheme:p,validateTheme:E,getAvailableThemes:F,debugThemeState:W,initializeTheme:L,validateThemeState:R,cleanupThemeClasses:k,resetThemeToDefault:m,recoverThemeSystem:P,cleanupAndApplyTheme:b,themes:y(()=>J)}}const Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ee={class:"flex justify-between items-center h-20"},Ne={class:"flex items-center space-x-6"},Le={class:"hidden lg:flex space-x-1"},De=["href"],Fe={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={key:3,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={class:"hidden xl:inline"},je={class:"relative"},Ge={class:"p-2"},Qe={key:0,class:"space-y-1"},Ue={class:"space-y-1"},Ve=["href"],He={class:"space-y-1 mt-1"},We=["href"],Ze={class:"space-y-1 mt-1"},Je=["href"],qe={class:"flex items-center space-x-3"},Ye={class:"relative"},Xe={class:"hidden lg:block text-left"},Ke={class:"font-medium text-sm"},et={class:"p-2"},tt={class:"py-1 space-y-1"},ot=["href"],rt={class:"md:hidden px-4 pb-3"},st={class:"mt-3 space-y-2"},at=["href"],nt={__name:"IntegratedTopNav",props:{currentRoute:{type:String,required:!0}},setup(f){var R;const t=f,{user:e,roles:s}=re(),{isDark:r}=ue(),l=S(!1),h=S(!1),b=S(!1);console.log("IntegratedTopNav - User:",e.value),console.log("IntegratedTopNav - Roles:",s.value),console.log("IntegratedTopNav - Is Admin:",(R=s.value)==null?void 0:R.includes("Admin")),console.log("IntegratedTopNav - Component Loaded Successfully");const B=y(()=>{var k;return(k=e.value)!=null&&k.name?e.value.name.split(" ").map(m=>m[0]).join("").toUpperCase():"U"}),T=y(()=>[{route:"dashboard",label:"Dashboard"},{route:"attendances.index",label:"Time Tracking"},{route:"leaves.index",label:"Leave Requests"},{route:"competency-assessments.my-assessments",label:"My Assessments"}]),w=y(()=>{try{const k=s.value||[],m=Array.isArray(k)?k:[],P=[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}],L=m.includes("Admin")||m.includes("Manager")||m.includes("HR"),a=m.includes("Admin");return L&&P.push({route:"employees.index",label:"Employee Management",category:"management"},{route:"competency-assessments.index",label:"All Assessments",category:"management"}),a&&P.push({route:"admin.roles.index",label:"Role Management",category:"admin"},{route:"admin.system-settings.index",label:"System Settings",category:"admin"},{route:"organizational-analytics.index",label:"Analytics",category:"admin"},{route:"support.index",label:"Support Management",category:"admin"}),P}catch(k){return console.error("Error computing moreNavItems:",k),[{route:"work-reports.index",label:"Work Reports",category:"regular"},{route:"work-reports.leaderboard",label:"Leaderboard",category:"regular"},{route:"feedbacks.index",label:"Feedback",category:"regular"},{route:"support.index",label:"Support",category:"regular"}]}}),p=y(()=>w.value.filter(k=>k.category==="regular")),C=y(()=>w.value.filter(k=>k.category==="management")),_=y(()=>w.value.filter(k=>k.category==="admin")),E=y(()=>[...T.value,...w.value]),F=k=>{var m;return t.currentRoute===k||((m=t.currentRoute)==null?void 0:m.startsWith(k.split(".")[0]))},W=()=>{fe.post(route("logout"))};return(k,m)=>{var P,L,a,n;return d(),v("nav",{class:g(["w-full transition-all duration-200 sticky top-0 z-50",c(r)?"bg-gradient-to-r from-gray-900 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg shadow-gray-900/20":"bg-gradient-to-r from-white via-white to-blue-50/30 border-b border-gray-200/60 shadow-lg shadow-gray-900/10 backdrop-blur-sm"]),style:{display:"block !important",visibility:"visible !important"},"data-testid":"integrated-top-navigation"},[o("div",Me,[o("div",Ee,[o("div",Ne,[m[14]||(m[14]=o("div",{class:"flex items-center space-x-3"},[o("div",{class:"flex items-center"},[o("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-8 w-auto object-contain"})])],-1)),o("div",Le,[(d(!0),v(U,null,V(T.value,i=>(d(),v("a",{key:i.route,href:k.route(i.route),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5 whitespace-nowrap",F(i.route)?c(r)?"bg-blue-600/20 text-blue-300":"bg-blue-50 text-blue-700":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[i.route==="dashboard"?(d(),v("svg",Fe,m[3]||(m[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},null,-1)]))):i.route==="attendances.index"?(d(),v("svg",Pe,m[4]||(m[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):i.route==="leaves.index"?(d(),v("svg",ze,m[5]||(m[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):(d(),v("svg",Oe,m[6]||(m[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),o("span",Re,I(i.label),1)],10,De))),128)),o("div",je,[o("button",{onClick:m[0]||(m[0]=i=>l.value=!l.value),class:g(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5",l.value?c(r)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[m[8]||(m[8]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)),m[9]||(m[9]=o("span",{class:"hidden xl:inline"},"More",-1)),(d(),v("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[7]||(m[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(o("div",{class:g(["absolute left-0 mt-2 w-64 rounded-xl shadow-xl z-50 transition-all duration-200",c(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",Ge,[w.value.length>0?(d(),v("div",Qe,[o("div",Ue,[(d(!0),v(U,null,V(p.value,i=>(d(),v("a",{key:i.route,href:k.route(i.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",F(i.route)?c(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[m[10]||(m[10]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o("span",null,I(i.label),1)],10,Ve))),128))]),C.value.length>0?(d(),v("div",{key:0,class:g(["border-t pt-2 mt-2",c(r)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider",c(r)?"text-gray-400":"text-gray-500"])}," Management ",2),o("div",He,[(d(!0),v(U,null,V(C.value,i=>(d(),v("a",{key:i.route,href:k.route(i.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",F(i.route)?c(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[m[11]||(m[11]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o("span",null,I(i.label),1)],10,We))),128))])],2)):N("",!0),_.value.length>0?(d(),v("div",{key:1,class:g(["border-t pt-2 mt-2",c(r)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["px-3 py-1 text-xs font-semibold uppercase tracking-wider flex items-center space-x-1",c(r)?"text-red-400":"text-red-600"])},m[12]||(m[12]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),o("span",null,"Admin",-1)]),2),o("div",Ze,[(d(!0),v(U,null,V(_.value,i=>(d(),v("a",{key:i.route,href:k.route(i.route),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",F(i.route)?c(r)?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},[m[13]||(m[13]=o("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),o("span",null,I(i.label),1)],10,Je))),128))])],2)):N("",!0)])):N("",!0)])],2),[[ae,l.value]])])])]),o("div",qe,[o("div",Ye,[o("button",{onClick:m[1]||(m[1]=i=>h.value=!h.value),class:g(["flex items-center space-x-2 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",h.value?c(r)?"bg-gray-700/50 text-white":"bg-white/60 text-gray-900":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},[o("div",{class:g(["w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold",c(r)?"bg-blue-600 text-white":"bg-blue-500 text-white"])},I(B.value),3),o("div",Xe,[o("div",Ke,I((P=c(e))==null?void 0:P.name),1),o("div",{class:g(["text-xs",c(r)?"text-gray-400":"text-gray-500"])},I(((L=c(s))==null?void 0:L.join(", "))||"User"),3)]),(d(),v("svg",{class:g(["w-4 h-4 transition-transform duration-200",{"rotate-180":h.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[15]||(m[15]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(o("div",{class:g(["absolute right-0 mt-2 w-56 rounded-xl shadow-xl z-50 transition-all duration-200",c(r)?"bg-gray-800 border border-gray-700 shadow-gray-900/50":"bg-white border border-gray-200/60 shadow-gray-900/20 backdrop-blur-sm"])},[o("div",et,[o("div",{class:g(["px-3 py-2 border-b",c(r)?"border-gray-700":"border-gray-200"])},[o("div",{class:g(["font-medium",c(r)?"text-white":"text-gray-900"])},I((a=c(e))==null?void 0:a.name),3),o("div",{class:g(["text-sm",c(r)?"text-gray-400":"text-gray-500"])},I((n=c(e))==null?void 0:n.email),3)],2),o("div",tt,[o("a",{href:k.route("profile.edit"),class:g(["flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"])},m[16]||(m[16]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),o("span",null,"Profile Settings",-1)]),10,ot),o("button",{onClick:W,class:g(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200","text-red-600 hover:text-red-700 hover:bg-red-50"])},m[17]||(m[17]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"Sign Out",-1)]))])])],2),[[ae,h.value]])])])])]),o("div",rt,[o("button",{onClick:m[2]||(m[2]=i=>b.value=!b.value),class:g(["w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",c(r)?"text-gray-300 hover:bg-gray-700/50 border border-gray-700":"text-gray-700 hover:bg-white/60 border border-gray-200"])},[m[19]||(m[19]=o("span",null,"Menu",-1)),(d(),v("svg",{class:g(["w-5 h-5 transition-transform duration-200",{"rotate-180":b.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[18]||(m[18]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),se(o("div",st,[(d(!0),v(U,null,V(E.value,i=>(d(),v("a",{key:i.route,href:k.route(i.route),class:g(["block px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",F(i.route)?c(r)?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200/50":c(r)?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-white/60"])},I(i.label),11,at))),128))],512),[[ae,b.value]])])],2)}}};function lt(f,t){return d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function it(f,t){return d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const ct=["aria-live"],ut={class:"toast-content"},dt={key:0,class:"toast-icon"},mt={class:"toast-message"},ht={key:0,class:"toast-title"},vt={class:"toast-text"},ft={key:1,class:"toast-actions"},gt=["aria-label"],pt={__name:"ToastNotification",props:{message:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"info",validator:f=>["success","error","warning","info","loading"].includes(f)},position:{type:String,default:"top-right",validator:f=>["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].includes(f)},duration:{type:Number,default:5e3},priority:{type:String,default:"normal",validator:f=>["low","normal","high"].includes(f)},closable:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},actionText:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"md",validator:f=>["sm","md","lg"].includes(f)},sound:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},closeLabel:{type:String,default:"Close notification"}},emits:["close","action"],setup(f,{expose:t,emit:e}){const s=f,r=e,l=S(!1),h=S(null),b=S(null),B=S(100),T=S(!1),w=S(0),p=S(0),C=y(()=>le("x-mark")),_=y(()=>{if(s.icon)return le(s.icon);const A={success:"check-circle",error:"x-circle",warning:"exclamation-triangle",info:"information-circle",loading:"loading"};return le(A[s.type]||A.info)}),E=y(()=>["toast-notification",`toast-notification--${s.type}`,`toast-notification--${s.size}`,`toast-notification--${s.position}`,{"toast-notification--with-title":s.title,"toast-notification--persistent":s.persistent,"toast-notification--with-action":s.actionText}]),F=y(()=>({zIndex:s.zIndex})),W=y(()=>["w-5 h-5",{"animate-spin":s.type==="loading"}]),R=y(()=>s.closable||s.actionText),k=y(()=>[`toast-progress--${s.type}`]),m=y(()=>({width:`${B.value}%`})),P=()=>{l.value=!0,s.sound&&$(),!s.persistent&&s.duration>0&&n()},L=()=>{l.value=!1,M(),r("close")},a=()=>{r("action"),s.persistent||L()},n=()=>{s.duration<=0||(w.value=Date.now(),p.value=s.duration,h.value=setTimeout(()=>{L()},s.duration),i())},i=()=>{if(!s.showProgress)return;const A=Date.now(),O=()=>{if(!l.value||T.value)return;const ve=Date.now()-A,de=Math.max(0,100-ve/s.duration*100);B.value=de,de>0&&(b.value=requestAnimationFrame(O))};O()},u=()=>{if(!h.value||s.persistent)return;T.value=!0,clearTimeout(h.value),cancelAnimationFrame(b.value);const A=Date.now()-w.value;p.value=Math.max(0,s.duration-A)},x=()=>{!T.value||s.persistent||(T.value=!1,p.value>0&&(w.value=Date.now(),h.value=setTimeout(()=>{L()},p.value),i()))},M=()=>{h.value&&(clearTimeout(h.value),h.value=null),b.value&&(cancelAnimationFrame(b.value),b.value=null)},$=()=>{try{const A=new Audio,O={success:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",error:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",warning:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",info:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"};A.src=O[s.type]||O.info,A.volume=.3,A.play().catch(()=>{})}catch{}};return H(()=>{P()}),Y(()=>{M()}),ie(()=>s.duration,()=>{l.value&&!s.persistent&&(M(),n())}),t({show:P,close:L,pauseTimer:u,resumeTimer:x}),(A,O)=>(d(),Z(ge,{to:"body"},[l.value?(d(),v("div",{key:0,class:g(E.value),style:me(F.value),role:"alert","aria-live":f.priority==="high"?"assertive":"polite",onMouseenter:u,onMouseleave:x},[o("div",ut,[f.showIcon?(d(),v("div",dt,[(d(),Z(oe(_.value),{class:g(W.value)},null,8,["class"]))])):N("",!0),o("div",mt,[f.title?(d(),v("div",ht,I(f.title),1)):N("",!0),o("div",vt,[K(A.$slots,"default",{},()=>[q(I(f.message),1)],!0)])]),R.value?(d(),v("div",ft,[f.actionText?(d(),v("button",{key:0,onClick:a,class:"toast-action-button"},I(f.actionText),1)):N("",!0),f.closable?(d(),v("button",{key:1,onClick:L,class:"toast-close-button","aria-label":f.closeLabel},[(d(),Z(oe(C.value),{class:"w-4 h-4"}))],8,gt)):N("",!0)])):N("",!0)]),f.showProgress&&f.duration>0?(d(),v("div",{key:0,class:g(["toast-progress",k.value]),style:me(m.value)},null,6)):N("",!0)],46,ct)):N("",!0)]))}},yt=X(pt,[["__scopeId","data-v-11baa49e"]]);class bt{constructor(){this.notifications=ne([]),this.maxNotifications=S(5),this.defaultDuration=S(5e3),this.positions=ne({"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]}),this.idCounter=0,this.sounds=ne({enabled:!0,volume:.3})}add(t){const e=this.generateId(),s=t.position||"top-right",r={id:e,message:t.message||"",title:t.title||"",type:t.type||"info",position:s,duration:t.duration!==void 0?t.duration:this.defaultDuration.value,persistent:t.persistent||!1,closable:t.closable!==!1,showIcon:t.showIcon!==!1,showProgress:t.showProgress!==!1,actionText:t.actionText||"",icon:t.icon||"",size:t.size||"md",sound:t.sound!==!1&&this.sounds.enabled,priority:t.priority||"normal",zIndex:t.zIndex||1e3,createdAt:Date.now(),onAction:t.onAction||null,onClose:t.onClose||null,component:t.component||null,props:t.props||{}};return this.notifications.push(r),this.positions[s].push(r),this.manageQueueSize(s),!r.persistent&&r.duration>0&&setTimeout(()=>{this.remove(e)},r.duration),e}remove(t){const e=this.notifications.find(h=>h.id===t);if(!e)return;const s=this.notifications.findIndex(h=>h.id===t);s>-1&&this.notifications.splice(s,1);const r=this.positions[e.position],l=r.findIndex(h=>h.id===t);l>-1&&r.splice(l,1),e.onClose&&e.onClose(e)}clear(){this.notifications.splice(0),Object.keys(this.positions).forEach(t=>{this.positions[t].splice(0)})}clearPosition(t){[...this.positions[t]].forEach(s=>{this.remove(s.id)})}clearType(t){this.notifications.filter(s=>s.type===t).forEach(s=>{this.remove(s.id)})}update(t,e){const s=this.notifications.find(r=>r.id===t);s&&Object.assign(s,e)}getByPosition(t){return this.positions[t]||[]}getByType(t){return this.notifications.filter(e=>e.type===t)}getById(t){return this.notifications.find(e=>e.id===t)}exists(t){return this.notifications.some(e=>e.id===t)}count(){return this.notifications.length}countByPosition(t){var e;return((e=this.positions[t])==null?void 0:e.length)||0}setMaxNotifications(t){this.maxNotifications.value=t,Object.keys(this.positions).forEach(e=>{this.manageQueueSize(e)})}setDefaultDuration(t){this.defaultDuration.value=t}setSoundsEnabled(t){this.sounds.enabled=t}setSoundVolume(t){this.sounds.volume=Math.max(0,Math.min(1,t))}pauseAll(){this.notifications.forEach(t=>{t.pauseTimer&&t.pauseTimer()})}resumeAll(){this.notifications.forEach(t=>{t.resumeTimer&&t.resumeTimer()})}success(t,e={}){return this.add({message:t,type:"success",...e})}error(t,e={}){return this.add({message:t,type:"error",persistent:e.persistent!==!1,...e})}warning(t,e={}){return this.add({message:t,type:"warning",...e})}info(t,e={}){return this.add({message:t,type:"info",...e})}loading(t,e={}){return this.add({message:t,type:"loading",persistent:!0,closable:!1,...e})}confirm(t={}){return new Promise(e=>{const s=this.add({type:"confirm",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:"confirm",title:t.title||"Confirm Action",description:t.message||"Are you sure you want to proceed?",confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",...t},onAction:r=>{this.remove(s),e(r==="confirm")},onClose:()=>{e(!1)}})})}alert(t,e={}){return new Promise(s=>{const r=this.add({type:e.type||"info",persistent:!0,closable:!1,component:"NotificationModal",props:{visible:!0,type:e.type||"info",title:e.title||"Alert",description:t,showCancel:!1,confirmText:e.confirmText||"OK",...e},onAction:()=>{this.remove(r),s(!0)},onClose:()=>{s(!0)}})})}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}manageQueueSize(t){const e=this.positions[t];e.length>this.maxNotifications.value&&e.splice(0,e.length-this.maxNotifications.value).forEach(r=>{const l=this.notifications.findIndex(h=>h.id===r.id);l>-1&&this.notifications.splice(l,1)})}}const D=new bt,kt={class:"notification-container"},wt={__name:"NotificationContainer",setup(f,{expose:t}){const e=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];y(()=>D.notifications.filter(p=>!p.component));const s=y(()=>D.notifications.filter(p=>p.component)),r=p=>{const C="fixed z-50 pointer-events-none",_={"top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4"};return`${C} ${_[p]||_["top-right"]}`},l=p=>D.getByPosition(p),h=p=>p.includes("left")?"slide-left":p.includes("right")?"slide-right":p.includes("center")?"slide-center":"slide-right",b=p=>{D.remove(p)},B=(p,C="action")=>{const _=D.getById(p);_!=null&&_.onAction&&_.onAction(C)},T=()=>{window.notify={success:(p,C)=>D.success(p,C),error:(p,C)=>D.error(p,C),warning:(p,C)=>D.warning(p,C),info:(p,C)=>D.info(p,C),loading:(p,C)=>D.loading(p,C),confirm:p=>D.confirm(p),alert:(p,C)=>D.alert(p,C),clear:()=>D.clear(),remove:p=>D.remove(p)}},w=()=>{window.notify&&delete window.notify};return H(()=>{T()}),Y(()=>{w()}),t({notificationQueue:D,notify:window.notify}),(p,C)=>(d(),v("div",kt,[(d(),v(U,null,V(e,_=>o("div",{key:_,class:g(r(_))},[z(pe,{name:h(_),tag:"div",class:"space-y-2"},{default:ee(()=>[(d(!0),v(U,null,V(l(_),E=>(d(),Z(yt,he({key:E.id},{ref_for:!0},E,{onClose:F=>b(E.id),onAction:F=>B(E.id)}),null,16,["onClose","onAction"]))),128))]),_:2},1032,["name"])],2)),64)),(d(!0),v(U,null,V(s.value,_=>(d(),Z(oe(_.component||"NotificationModal"),he({key:_.id,ref_for:!0},_.props,{onClose:E=>b(_.id),onConfirm:E=>B(_.id,"confirm"),onCancel:E=>B(_.id,"cancel")}),null,16,["onClose","onConfirm","onCancel"]))),128))]))}},xt=X(wt,[["__scopeId","data-v-67e6c621"]]),_t={class:"floating-attendance-widget"},At={class:"status-indicator"},Tt={class:"time-info"},It={class:"time-display"},St={class:"time-label-mini"},Bt={class:"widget-header"},Ct={class:"status-info"},$t={class:"status-text"},Mt={class:"timer-section"},Et={class:"timer-value"},Nt={class:"timer-label"},Lt={class:"quick-actions"},Dt=["disabled"],Ft=["disabled"],Pt={class:"quick-stats"},zt={class:"stat"},Ot={class:"stat-value"},Rt={class:"stat"},jt={class:"stat-value"},Gt={__name:"FloatingAttendanceWidget",setup(f){const t=S(!1),e=S({clockedIn:!1,onBreak:!1,clockInTime:null}),s=S(!1),r=S("0h 0m 0s"),l=S(null),h=()=>{try{const u={clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,clockInTime:e.value.clockInTime,breakStartTime:l.value,lastUpdate:new Date().toISOString()};localStorage.setItem("floating-attendance-state",JSON.stringify(u))}catch(u){console.warn("Failed to save attendance state to localStorage:",u)}},b=()=>{try{const u=localStorage.getItem("floating-attendance-state");if(u){const x=JSON.parse(u),M=new Date(x.lastUpdate);if((new Date-M)/(1e3*60)<5)return e.value.clockedIn=x.clockedIn||!1,e.value.onBreak=x.onBreak||!1,e.value.clockInTime=x.clockInTime||null,l.value=x.breakStartTime||null,!0}}catch(u){console.warn("Failed to load attendance state from localStorage:",u)}return!1};let B=null;const T=y(()=>e.value.onBreak?"On Break":e.value.clockedIn?"Working":"Clocked Out"),w=y(()=>e.value.onBreak?"BREAK TIME":e.value.clockedIn?"WORK TIME":"NOT ACTIVE"),p=y(()=>["status-dot",{"status-dot--working":e.value.clockedIn&&!e.value.onBreak,"status-dot--break":e.value.onBreak,"status-dot--out":!e.value.clockedIn}]),C=y(()=>[{"floating-button--working":e.value.clockedIn&&!e.value.onBreak,"floating-button--break":e.value.onBreak,"floating-button--out":!e.value.clockedIn}]),_=y(()=>s.value?"...":e.value.clockedIn?"Clock Out":"Clock In"),E=y(()=>["primary-action",e.value.clockedIn?"primary-action--danger":"primary-action--success"]),F=y(()=>{if(!e.value.clockedIn||!e.value.clockInTime)return"0h 0m";const u=new Date(e.value.clockInTime),M=new Date-u,$=Math.floor(M/(1e3*60)),A=Math.floor($/60),O=$%60;return`${A}h ${O}m`}),W=y(()=>{if(e.value.onBreak&&l.value){const u=new Date(l.value);if(isNaN(u.getTime()))return"0h 0m 1s";{const M=Math.max(0,new Date-u),$=Math.floor(M/(1e3*60*60)),A=Math.floor(M%(1e3*60*60)/(1e3*60)),O=Math.floor(M%(1e3*60)/1e3);return`${$}h ${A}m ${O}s`}}return"0h 0m"});y(()=>["clock",{"clock--working":e.value.clockedIn&&!e.value.onBreak,"clock--break":e.value.onBreak,"clock--out":!e.value.clockedIn}]);const R=()=>{t.value=!t.value},k=()=>{if(e.value.clockedIn&&e.value.clockInTime){const u=new Date;let x;e.value.onBreak&&l.value?x=new Date(l.value):x=new Date(e.value.clockInTime);const M=u-x,$=Math.floor(M/(1e3*60*60)),A=Math.floor(M%(1e3*60*60)/(1e3*60)),O=Math.floor(M%(1e3*60)/1e3);r.value=`${$}h ${A}m ${O}s`}else r.value="0h 0m 0s"},m=async()=>{try{if(s.value=!0,e.value.clockedIn){const u=await window.axios.post("/api/attendance/clock-out",{timestamp:new Date().toISOString()});e.value.clockedIn=!1,e.value.onBreak=!1,e.value.clockInTime=null,l.value=null,r.value="0h 0m 0s",h(),i()}else{const u=await window.axios.post("/api/attendance/clock-in",{timestamp:new Date().toISOString()});e.value.clockedIn=!0,e.value.onBreak=!1,e.value.clockInTime=u.data.clock_in_time||new Date().toISOString(),h(),i()}}catch(u){console.error("Clock in/out failed:",u),alert("Action failed: "+u.message)}finally{s.value=!1}},P=async()=>{try{if(s.value=!0,e.value.onBreak){const u=await window.axios.post("/api/attendance/break-end",{timestamp:new Date().toISOString()});e.value.onBreak=!1,l.value=null,h(),i()}else{l.value=new Date().toISOString(),e.value.onBreak=!0;const u=await window.axios.post("/api/attendance/break-start",{timestamp:new Date().toISOString()});u.data.break_start_time&&(l.value=u.data.break_start_time),h(),i()}}catch(u){console.error("Break action failed:",u),alert("Action failed: "+u.message)}finally{s.value=!1}},L=async()=>{var u,x;try{const $=(await window.axios.get("/api/attendance/current")).data;if(e.value.clockedIn=$.clocked_in||!1,e.value.onBreak=$.on_break||!1,e.value.clockInTime=$.clock_in_time||null,$.on_break)if($.break_start_time)l.value=$.break_start_time;else if((u=$.current_session)!=null&&u.current_break_start)l.value=$.current_session.current_break_start;else if((x=$.current_session)!=null&&x.break_sessions&&$.current_session.break_sessions.length>0){const A=$.current_session.break_sessions[$.current_session.break_sessions.length-1];A&&!A.end&&(l.value=A.start)}else l.value||(l.value=new Date().toISOString());else l.value=null;console.log("FloatingWidget: Fetched status:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:l.value})}catch(M){console.error("Failed to fetch attendance status:",M)}},a=u=>{u.key==="attendance-update"&&L()},n=u=>{console.log("FloatingWidget: Received attendance state change:",u.detail);const{clockedIn:x,onBreak:M,clockInTime:$,breakStartTime:A}=u.detail;e.value.clockedIn=x,e.value.onBreak=M,e.value.clockInTime=$,M&&A?l.value=A:M||(l.value=null),h(),k(),console.log("FloatingWidget: State updated to:",{clockedIn:e.value.clockedIn,onBreak:e.value.onBreak,breakStartTime:l.value,eventBreakStartTime:A})},i=()=>{try{localStorage.setItem("attendance-update",Date.now().toString()),localStorage.removeItem("attendance-update")}catch(u){console.warn("Failed to broadcast attendance update:",u)}};return H(async()=>{b()&&k(),await L(),h(),k(),B=setInterval(k,1e3),window.addEventListener("storage",a),window.addEventListener("attendance-state-changed",n),console.log("FloatingWidget: Event listeners registered")}),Y(()=>{B&&clearInterval(B),window.removeEventListener("storage",a),window.removeEventListener("attendance-state-changed",n),console.log("FloatingWidget: Event listeners removed")}),(u,x)=>(d(),v("div",_t,[t.value?N("",!0):(d(),v("div",{key:0,onClick:R,class:g(["floating-button",C.value])},[o("div",At,[o("div",{class:g(p.value)},null,2)]),o("div",Tt,[o("div",It,I(r.value),1),o("div",St,I(w.value),1)]),z(c(we),{class:"w-4 h-4 expand-icon"})],2)),t.value?(d(),v("div",{key:1,class:"expanded-widget",onClick:x[0]||(x[0]=ye(()=>{},["stop"]))},[o("div",Bt,[o("div",Ct,[o("div",{class:g(p.value)},null,2),o("span",$t,I(T.value),1)]),o("button",{onClick:R,class:"minimize-btn",title:"Minimize"},[z(c(xe),{class:"w-4 h-4"})])]),o("div",Mt,[o("div",Et,I(r.value),1),o("div",Nt,I(w.value),1)]),o("div",Lt,[o("button",{onClick:m,disabled:s.value,class:g(E.value)},I(_.value),11,Dt),e.value.clockedIn?(d(),v("button",{key:0,onClick:P,disabled:s.value,class:"break-action"},[(d(),Z(oe(e.value.onBreak?c(it):c(lt)),{class:"w-3 h-3"})),q(" "+I(e.value.onBreak?"End":"Break"),1)],8,Ft)):N("",!0)]),o("div",Pt,[o("div",zt,[o("span",Ot,I(F.value),1),x[1]||(x[1]=o("span",{class:"stat-label"},"Today",-1))]),o("div",Rt,[o("span",jt,I(W.value),1),x[2]||(x[2]=o("span",{class:"stat-label"},"Break",-1))])])])):N("",!0),t.value?(d(),v("div",{key:2,class:"backdrop",onClick:R})):N("",!0)]))}},Qt=X(Gt,[["__scopeId","data-v-421365b8"]]),Ut={class:"skip-links","aria-label":"Skip navigation links"},Vt=["href","onClick"],Ht={__name:"SkipLinks",setup(f){const{skipLinks:t,handleSkipLinkClick:e}=_e();return(s,r)=>(d(),v("div",Ut,[(d(!0),v(U,null,V(c(t),l=>(d(),v("a",{key:l.href,href:l.href,class:"skip-link sr-only-focusable",onClick:h=>c(e)(h,l.href)},I(l.label),9,Vt))),128))]))}},Wt=X(Ht,[["__scopeId","data-v-f9a7b518"]]),Zt={class:"live-regions"},Jt={__name:"LiveRegion",setup(f){const t=S(null),e=S(null),s=S(null);return H(()=>{be.init()}),(r,l)=>(d(),v("div",Zt,[o("div",{id:"aria-live-polite","aria-live":"polite","aria-atomic":"true",class:"sr-only",ref_key:"politeRegion",ref:t},null,512),o("div",{id:"aria-live-assertive","aria-live":"assertive","aria-atomic":"true",class:"sr-only",ref_key:"assertiveRegion",ref:e},null,512),o("div",{id:"aria-live-status","aria-live":"polite","aria-atomic":"true",role:"status",class:"sr-only",ref_key:"statusRegion",ref:s},null,512)]))}},qt=X(Jt,[["__scopeId","data-v-94955163"]]),Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Xt={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},Kt={class:"flex items-center space-x-6"},eo={__name:"AppFooter",setup(f){const{isDark:t}=ue(),e=y(()=>new Date().getFullYear());return(s,r)=>(d(),v("footer",{class:g(["mt-auto border-t transition-all duration-200",c(t)?"bg-gray-800/50 border-gray-700/50":"bg-white/80 border-gray-200/60"])},[o("div",Yt,[o("div",Xt,[r[4]||(r[4]=o("div",{class:"flex items-center"},[o("img",{src:"/images/xonobics_logo.png",alt:"Xonobics",class:"h-6 w-auto object-contain"})],-1)),o("div",Kt,[z(c(te),{href:s.route("dashboard"),class:g(["text-sm hover:underline transition-colors",c(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[0]||(r[0]=[q(" Dashboard ")])),_:1,__:[0]},8,["href","class"]),z(c(te),{href:s.route("support.index"),class:g(["text-sm hover:underline transition-colors",c(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[1]||(r[1]=[q(" Support ")])),_:1,__:[1]},8,["href","class"]),z(c(te),{href:s.route("legal.privacy"),class:g(["text-sm hover:underline transition-colors",c(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[2]||(r[2]=[q(" Privacy Policy ")])),_:1,__:[2]},8,["href","class"]),z(c(te),{href:s.route("legal.disclaimer"),class:g(["text-sm hover:underline transition-colors",c(t)?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"])},{default:ee(()=>r[3]||(r[3]=[q(" Disclaimer ")])),_:1,__:[3]},8,["href","class"])]),o("div",{class:g(["text-sm",c(t)?"text-gray-400":"text-gray-500"])}," © "+I(e.value)+" Xonobics. All rights reserved. ",3)])])],2))}};function to(){const{props:f}=ce(),{user:t}=re();let e;const s=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(l=>{var b;const h=((b=t.value)==null?void 0:b.name)||"Employee";l.showNotification(`Hi ${h}, Ready to Clock In?`,{body:"A new day of productivity awaits! Click here to start your timer.",icon:"/favicon.ico",tag:"clock-in-reminder",actions:[{action:"clock-in",title:"Clock In"}]})}):console.log("notification permission not granted")},r=()=>{const l=new Date,h=new Date(f.auth.user.clock_in_time);(isNaN(h.getTime())||l.getTime()-h.getTime()>5*60*1e3)&&s()};H(()=>{r(),e=setInterval(r,5*60*1e3)}),Y(()=>{clearInterval(e)})}function oo(){const{isAuthenticated:f,user:t}=re(),e=ce();let s=null;const r=()=>{Notification.permission==="granted"?navigator.serviceWorker.ready.then(h=>{var B;const b=((B=t.value)==null?void 0:B.name)||"Employee";h.showNotification(`Hi ${b}, Gentle Reminder to Submit Your Work Report`,{body:"Please submit your work report for today.",icon:"/favicon.ico",tag:"work-report-reminder",actions:[{action:"submit-work-report",title:"Submit Now"}]})}):console.log("notification permission not granted")},l=()=>{if(!f.value)return;const h=e.props.auth.user.todays_attendance;if(h&&h.clock_in_time&&!h.clock_out_time){const b=new Date(h.clock_in_time);(new Date-b)/1e3/60/60>=7.5&&r()}};H(()=>{s=setInterval(l,5*60*1e3),l()}),Y(()=>{s&&clearInterval(s)})}function ro(){const f=ce();return ie(()=>f.props.flash,t=>{!t||!window.notify||(t.success&&window.notify.success(t.success),t.error&&window.notify.error(t.error),t.warning&&window.notify.warning(t.warning),t.info&&window.notify.info(t.info))},{immediate:!0,deep:!0}),{flash:f.props.flash}}const so={class:"relative"},ao={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},no={key:0,class:"flex items-center space-x-3"},lo={id:"main-content",class:"relative flex-1",role:"main","aria-label":"Main content",tabindex:"-1"},io={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},co={__name:"AuthenticatedLayout",setup(f){const t=ke(),{hasRole:e,getAuthError:s}=re(),{isDark:r,initializeTheme:l}=ue();to(),oo(),ro(),H(()=>{l()});const h=y(()=>s()),b=y(()=>!!h.value),B=y(()=>{try{return route().current()||""}catch(T){return console.warn("[LAYOUT] Route helper not available:",T),window.location.pathname.replace("/","")||"dashboard"}});return y(()=>!!t.header),(T,w)=>(d(),v("div",{class:g(["min-h-screen transition-all duration-300 flex flex-col",c(r)?"bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-white to-blue-50/30"])},[z(Wt),z(qt),z($e),z(xt),c(e)("Admin")?N("",!0):(d(),Z(Qt,{key:0})),b.value?(d(),v("div",{key:1,class:g(["p-4 border z-50 relative rounded-lg mx-4 mt-4",c(r)?"bg-red-900/20 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-700"])},[w[0]||(w[0]=o("p",{class:"font-semibold"},"Authentication Error:",-1)),o("p",null,I(h.value),1),w[1]||(w[1]=o("p",{class:"text-sm mt-1"},"Please refresh the page or contact support if the issue persists.",-1))],2)):N("",!0),z(nt,{"current-route":B.value},null,8,["current-route"]),o("div",so,[c(t).header?(d(),v("header",{key:0,class:g(["border-b transition-all duration-200 backdrop-blur-sm",c(r)?"bg-gray-800/50 border-gray-700/50 shadow-lg shadow-gray-900/20":"bg-white/80 border-gray-200/60 shadow-lg shadow-gray-900/10"]),role:"banner","aria-label":"Page header"},[o("div",ao,[o("div",{class:g(["flex items-center justify-between",c(r)?"text-white":"text-gray-900"])},[o("div",null,[o("h1",{class:g(["text-2xl font-bold transition-colors duration-200",c(r)?"text-white":"text-gray-900"])},[K(T.$slots,"header",{},void 0,!0)],2),c(t).subtitle?(d(),v("div",{key:0,class:g(["mt-1 text-sm",c(r)?"text-gray-300":"text-gray-600"])},[K(T.$slots,"subtitle",{},void 0,!0)],2)):N("",!0)]),c(t).headerActions?(d(),v("div",no,[K(T.$slots,"headerActions",{},void 0,!0)])):N("",!0)],2)])],2)):N("",!0),o("main",lo,[o("div",io,[o("div",{class:g(["relative transition-all duration-200",c(t).contentBackground!==!1&&(c(r)?"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-xl shadow-gray-900/20":"bg-white/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 shadow-xl shadow-gray-900/10")])},[o("div",{class:g([c(t).contentBackground!==!1?"p-6 sm:p-8":""])},[K(T.$slots,"default",{},void 0,!0)],2)],2)])])]),z(eo)],2))}},go=X(co,[["__scopeId","data-v-1f1b0b6b"]]);export{go as A,lt as a,ue as b,D as n,it as r,ro as u};
