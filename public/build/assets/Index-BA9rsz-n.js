import{f as x,g as c,o as r,h as d,k as f,a as t,c as a,F as u,r as m,t as l,i as g,n as h,l as S,Q as _}from"./app-D5UtYYdV.js";import{_ as E}from"./AuthenticatedLayout-Dt-IPS8E.js";import{P as U}from"./PageLayout-BhKFugs4.js";import{_ as M}from"./SimpleInfoCard-BvbHlbaP.js";import{B as N}from"./BaseSelect-Cz02247Z.js";import{B as V}from"./BaseButton-CDVOHPDV.js";import"./useAuth-C13rMu-k.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-D9dZDp1S.js";import"./Icon-lHjNYnIS.js";import"./useAccessibility-Bu3vdPU1.js";import"./PageHeader-CJvcmqw5.js";/* empty css                                                                   *//* empty css                                                                   */import"./ChartBarIcon-Bl1vupHS.js";import"./UserGroupIcon-D0TT-wZF.js";/* empty css                                                                   *//* empty css                                                                   */const $={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},j={class:"bg-white rounded-lg shadow-sm border border-neutral-200"},z={class:"overflow-x-auto"},D={class:"min-w-full divide-y divide-neutral-200"},H={class:"bg-white divide-y divide-neutral-200"},F={class:"px-6 py-4 whitespace-nowrap"},L={class:"flex items-center"},P={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},Q={class:"text-sm font-semibold text-primary-700"},T={class:"ml-4"},G={class:"text-sm font-medium text-neutral-900"},J={class:"text-sm text-neutral-500"},O={class:"text-xs text-neutral-400"},q={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex flex-wrap gap-1"},W={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-800"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-900"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ee={class:"flex items-center space-x-2"},be={__name:"Index",props:{users:Array,availableRoles:Array},setup(p){const i=p,b=[{name:"Dashboard",href:route("dashboard")},{name:"Administration",href:"#"},{name:"Role Management",href:route("admin.roles.index")}],y=x(()=>i.availableRoles.map(o=>({value:o,label:o}))),v=x(()=>{const o=i.availableRoles.map(e=>{const n=i.users.filter(I=>I.roles.includes(e)).length;return{name:e,count:n,icon:R(e),color:k(e)}}),s=i.users.filter(e=>e.roles.length===0).length;return s>0&&o.push({name:"No Role",count:s,icon:"UserIcon",color:"neutral"}),o});function w(o){return o.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2)}function R(o){return{Admin:"ShieldCheckIcon",HR:"UserGroupIcon",Manager:"BriefcaseIcon",Employee:"UserIcon"}[o]||"UserIcon"}function k(o){return{Admin:"red",HR:"blue",Manager:"green",Employee:"yellow"}[o]||"neutral"}function A(o){return{Admin:"bg-red-100 text-red-800",HR:"bg-blue-100 text-blue-800",Manager:"bg-green-100 text-green-800",Employee:"bg-yellow-100 text-yellow-800"}[o]||"bg-neutral-100 text-neutral-800"}function B(o,s){s&&_.post(route("admin.roles.assign",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error("Error assigning role:",e)}})}function C(o,s){s&&confirm(`Are you sure you want to remove the ${s} role from this user?`)&&_.post(route("admin.roles.remove",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error("Error removing role:",e)}})}return(o,s)=>(r(),c(E,null,{default:d(()=>[f(U,{title:"Role Management",subtitle:"Assign and manage user roles in the system",breadcrumbs:b},{default:d(()=>[t("div",$,[(r(!0),a(u,null,m(v.value,e=>(r(),c(M,{key:e.name,title:e.name,value:e.count,subtitle:`${e.count===1?"user":"users"} with this role`,icon:e.icon,color:e.color},null,8,["title","value","subtitle","icon","color"]))),128))]),t("div",j,[s[2]||(s[2]=t("div",{class:"px-6 py-4 border-b border-neutral-200"},[t("h3",{class:"text-lg font-semibold text-neutral-900"},"User Role Assignments"),t("p",{class:"text-sm text-neutral-600 mt-1"},"Manage roles for all employees in the system")],-1)),t("div",z,[t("table",D,[s[1]||(s[1]=t("thead",{class:"bg-neutral-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Employee "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Current Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Job Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",H,[(r(!0),a(u,null,m(p.users,e=>(r(),a("tr",{key:e.id,class:"hover:bg-neutral-50"},[t("td",F,[t("div",L,[t("div",P,[t("span",Q,l(w(e.name)),1)]),t("div",T,[t("div",G,l(e.name),1),t("div",J,l(e.email),1),t("div",O,"ID: "+l(e.employee_code),1)])])]),t("td",q,[t("div",K,[e.roles.length===0?(r(),a("span",W," No Role ")):g("",!0),(r(!0),a(u,null,m(e.roles,n=>(r(),a("span",{key:n,class:h([A(n),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},l(n),3))),128))])]),t("td",X,l(e.job_title),1),t("td",Y,[t("span",{class:h([e.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},l(e.status),3)]),t("td",Z,[t("div",ee,[f(N,{"model-value":e.roles[0]||"",options:y.value,placeholder:"Select role",class:"w-32","onUpdate:modelValue":n=>B(e.id,n)},null,8,["model-value","options","onUpdate:modelValue"]),e.roles.length>0?(r(),c(V,{key:0,variant:"outline",size:"sm",onClick:n=>C(e.id,e.roles[0]),class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300"},{default:d(()=>s[0]||(s[0]=[S(" Remove ")])),_:2,__:[0]},1032,["onClick"])):g("",!0)])])]))),128))])])])])]),_:1})]),_:1}))}};export{be as default};
