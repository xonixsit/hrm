import{e as N,f as Z,z as ss,g as w,o as i,h as $,a as s,c as n,i as es,k as o,l as p,u as d,F as g,r as y,t as u,S as ts,d as as,n as q,q as is,s as D,Q as v}from"./app-BTCP-fGH.js";import{_ as ns}from"./AuthenticatedLayout-CaWo9b-g.js";import{S as b}from"./StatsCard-zYlXvr1B.js";import{_ as os}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as cs}from"./ArrowPathIcon-BIts9jy8.js";import{a as rs,q as k,m as f,n as T,h as P,i as R,p as ls}from"./Icon-DaUMKFie.js";import{r as ds}from"./DocumentPlusIcon-B_SAdORp.js";import{r as us}from"./ChartBarIcon-Cy4hPaz2.js";import{r as vs}from"./CogIcon-DxgBQDTM.js";import"./useAuth-BE-eWF12.js";import"./ApplicationLogo-Rkj5-7oC.js";import"./useAccessibility-BuPbUhuW.js";import"./ArrowTrendingUpIcon-gXBQsVI5.js";import"./ArrowTrendingDownIcon-BYS7zRs4.js";import"./ArrowTopRightOnSquareIcon-B4ZojI8M.js";const ms={class:"dashboard-header"},gs={class:"header-container"},ys={class:"header-content"},hs={class:"header-actions"},ps=["disabled"],fs={class:"dashboard-container"},_s={class:"primary-stats-section"},bs={class:"stats-grid-primary"},ks={class:"secondary-content-section"},ws={class:"content-grid-secondary"},xs={class:"pending-assessments-card priority-high"},Cs={class:"widget-content"},As={key:0,class:"loading-state"},Ns={class:"animate-pulse space-y-3"},$s={key:1,class:"empty-state"},qs={key:2,class:"assessment-list"},Ds=["onClick"],Ts={class:"assessment-avatar"},Ps={class:"avatar-circle"},Rs={class:"assessment-details"},Ss={class:"assessment-title"},Ms={class:"assessment-meta"},zs={class:"assessment-type"},Is={class:"assessment-due"},Vs={class:"assessment-actions"},Bs=["onClick"],Ls={class:"assessment-cycles-card priority-medium"},Us={class:"widget-content"},js={key:0,class:"loading-state"},Fs={class:"animate-pulse space-y-3"},Qs={key:1,class:"empty-state"},Es={key:2,class:"cycle-list"},Os=["onClick"],Js={class:"cycle-details"},Gs={class:"cycle-title"},Hs={class:"cycle-meta"},Ks={class:"cycle-period"},Ws={class:"cycle-status"},Xs={class:"cycle-progress"},Ys={class:"progress-bar"},Zs={class:"progress-text"},se={class:"tertiary-content-section"},ee={class:"content-grid-tertiary"},te={class:"quick-actions-card"},ae={class:"widget-content"},ie={class:"quick-actions-grid"},ne={class:"quick-action-icon bg-blue-100 text-blue-600"},oe={class:"quick-action-icon bg-green-100 text-green-600"},ce={class:"quick-action-icon bg-purple-100 text-purple-600"},re={class:"quick-action-icon bg-orange-100 text-orange-600"},le={class:"recent-activity-card"},de={class:"widget-content"},ue={key:0,class:"loading-state"},ve={class:"animate-pulse space-y-3"},me={key:1,class:"empty-state"},ge={key:2,class:"activity-list"},ye={class:"activity-icon"},he={class:"activity-details"},pe={class:"activity-text"},fe={class:"activity-time"},_e={key:0,class:"notification-overlay"},be={class:"notification-center"},ke={class:"notification-icon"},we={class:"notification-text"},xe={class:"notification-message"},Ce=["onClick"],Ae={__name:"AssessmentDashboard",props:{stats:{type:Object,default:()=>({totalAssessments:0,pendingAssessments:0,activeCycles:0,completionRate:0,assessmentTrend:0})},pendingAssessments:{type:Array,default:()=>[]},assessmentCycles:{type:Array,default:()=>[]},recentActivity:{type:Array,default:()=>[]}},setup(r){const x=r,m=N(!1),h=N([]);Z(()=>({...x.stats,completionRate:Math.round(x.stats.completionRate||0)}));const S=async()=>{m.value=!0;try{v.reload({only:["stats","pendingAssessments","assessmentCycles","recentActivity"],preserveScroll:!0}),l("Dashboard refreshed successfully","success")}finally{setTimeout(()=>{m.value=!1},1e3)}},M=()=>{try{v.visit(route("competency-assessments.index"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},C=()=>{try{v.visit(route("competency-assessments.pending"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},_=()=>{try{v.visit(route("assessment-cycle-manager"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},z=()=>{try{v.visit(route("competency-assessments.create"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},I=()=>{try{v.visit(route("competency-assessments.create"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},V=()=>{try{v.visit(route("competency-analytics.index"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},B=()=>{try{v.visit(route("competencies.index"))}catch(t){console.error("Navigation error:",t),l("Navigation failed. Please try again.","error")}},L=t=>{try{v.visit(route("competency-assessments.show",t.id))}catch(e){console.error("Navigation error:",e),l("Navigation failed. Please try again.","error")}},U=t=>{try{v.visit(route("assessment-cycles.show",t.id))}catch(e){console.error("Navigation error:",e),l("Navigation failed. Please try again.","error")}},j=t=>{try{v.visit(route("competency-assessments.evaluate",t.id))}catch(e){console.error("Navigation error:",e),l("Navigation failed. Please try again.","error")}},F=t=>t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),Q=t=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360° Feedback"})[t]||t,E=t=>t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date",O=(t,e)=>{const a=new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),c=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${a} - ${c}`},J=t=>({planned:"Planned",active:"Active",completed:"Completed",cancelled:"Cancelled"})[t]||t,G=t=>({planned:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",H=t=>{const e=new Date,a=new Date(t),c=Math.floor((e-a)/(1e3*60));return c<1?"Just now":c<60?`${c}m ago`:c<1440?`${Math.floor(c/60)}h ago`:`${Math.floor(c/1440)}d ago`},K=t=>({assessment_submitted:f,assessment_approved:f,cycle_started:k,cycle_completed:f})[t]||T,l=(t,e="info",a=4e3)=>{const c=Date.now(),Y={id:c,message:t,type:e,visible:!0};h.value.push(Y),setTimeout(()=>{A(c)},a)},A=t=>{const e=h.value.findIndex(a=>a.id===t);e>-1&&h.value.splice(e,1)},W=t=>{const e="notification-toast",a={success:"notification-success",error:"notification-error",warning:"notification-warning",info:"notification-info"};return`${e} ${a[t]||a.info}`},X=t=>({success:f,error:P,warning:ls,info:R})[t]||R;return ss(()=>{typeof route>"u"?(console.error("Route helper is not available. This will cause navigation issues."),l("Navigation system not properly initialized. Please refresh the page.","error")):console.log("Route helper is available. Navigation should work properly.");try{["competency-assessments.index","assessment-cycle-manager","competency-analytics.index"].forEach(e=>{try{const a=route(e);console.log(`✓ Route ${e} is available: ${a}`)}catch(a){console.error(`✗ Route ${e} failed:`,a)}})}catch(t){console.error("Route testing failed:",t)}}),(t,e)=>(i(),w(ns,null,{default:$(()=>[s("div",ms,[s("div",gs,[s("div",ys,[e[3]||(e[3]=s("div",{class:"title-section"},[s("h1",{class:"dashboard-title"},"Assessment Dashboard"),s("p",{class:"dashboard-subtitle"},"Overview of competency assessments and cycles")],-1)),s("div",hs,[s("button",{onClick:S,disabled:m.value,class:"action-button secondary"},[o(d(cs),{class:"w-4 h-4"}),e[0]||(e[0]=p(" Refresh "))],8,ps),s("button",{onClick:I,class:"action-button secondary"},[o(d(rs),{class:"w-4 h-4"}),e[1]||(e[1]=p(" New Assessment "))]),s("button",{onClick:_,class:"action-button primary"},[o(d(k),{class:"w-4 h-4"}),e[2]||(e[2]=p(" Assessment Cycles "))])])])])]),s("div",fs,[s("div",_s,[s("div",bs,[o(b,{value:r.stats.totalAssessments,label:"Total Assessments",icon:"chart-bar",variant:"primary",trend:r.stats.assessmentTrend,loading:m.value,size:"large",clickable:!0,onClick:M},null,8,["value","trend","loading"]),o(b,{value:r.stats.pendingAssessments,label:"Pending Assessments",icon:"clock",variant:"warning",loading:m.value,size:"large",urgent:r.stats.pendingAssessments>10,clickable:!0,onClick:C},null,8,["value","loading","urgent"]),o(b,{value:r.stats.activeCycles,label:"Active Cycles",icon:"calendar",variant:"success",loading:m.value,size:"large",clickable:!0,onClick:_},null,8,["value","loading"]),o(b,{value:r.stats.completionRate,label:"Completion Rate",icon:"check-circle",variant:"info",suffix:"%",loading:m.value,size:"large"},null,8,["value","loading"])])]),s("div",ks,[s("div",ws,[s("div",xs,[s("div",{class:"widget-header"},[e[4]||(e[4]=s("h3",{class:"widget-title"},"Pending Assessments",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:C,class:"text-sm text-blue-600 hover:text-blue-800"}," View All ")])]),s("div",Cs,[m.value?(i(),n("div",As,[s("div",Ns,[(i(),n(g,null,y(3,a=>s("div",{key:a,class:"flex items-center space-x-3"},e[5]||(e[5]=[s("div",{class:"w-10 h-10 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):r.pendingAssessments.length===0?(i(),n("div",$s,[o(d(f),{class:"w-12 h-12 text-green-500 mx-auto mb-3"}),e[6]||(e[6]=s("p",{class:"text-gray-500 text-center"},"No pending assessments",-1))])):(i(),n("div",qs,[(i(!0),n(g,null,y(r.pendingAssessments.slice(0,5),a=>(i(),n("div",{key:a.id,class:"assessment-item",onClick:c=>L(a)},[s("div",Ts,[s("div",Ps,u(F(a.employee.name)),1)]),s("div",Rs,[s("div",Ss,[o(d(ts),{href:t.route("competency-assessments.by-employee",a.employee.id),class:"text-blue-600 hover:text-blue-800 hover:underline"},{default:$(()=>[p(u(a.employee.name),1)]),_:2},1032,["href"]),p(" - "+u(a.competency.name),1)]),s("div",Ms,[s("span",zs,u(Q(a.assessment_type)),1),s("span",Is,"Due: "+u(E(a.due_date)),1)])]),s("div",Vs,[s("button",{onClick:as(c=>j(a),["stop"]),class:"btn-sm btn-primary"}," Assess ",8,Bs)])],8,Ds))),128))]))])]),s("div",Ls,[s("div",{class:"widget-header"},[e[7]||(e[7]=s("h3",{class:"widget-title"},"Assessment Cycles",-1)),s("div",{class:"widget-actions"},[s("button",{onClick:_,class:"text-sm text-blue-600 hover:text-blue-800"}," Manage Cycles ")])]),s("div",Us,[m.value?(i(),n("div",js,[s("div",Fs,[(i(),n(g,null,y(3,a=>s("div",{key:a,class:"flex items-center justify-between"},e[8]||(e[8]=[s("div",{class:"flex-1"},[s("div",{class:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),s("div",{class:"w-1/2 h-3 bg-gray-200 rounded"})],-1),s("div",{class:"w-16 h-6 bg-gray-200 rounded"},null,-1)]))),64))])])):r.assessmentCycles.length===0?(i(),n("div",Qs,[o(d(k),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[9]||(e[9]=s("p",{class:"text-gray-500 text-center"},"No active cycles",-1))])):(i(),n("div",Es,[(i(!0),n(g,null,y(r.assessmentCycles.slice(0,5),a=>(i(),n("div",{key:a.id,class:"cycle-item",onClick:c=>U(a)},[s("div",Js,[s("div",Gs,u(a.name),1),s("div",Hs,[s("span",Ks,u(O(a.start_date,a.end_date)),1)])]),s("div",Ws,[s("span",{class:q([G(a.status),"status-badge"])},u(J(a.status)),3)]),s("div",Xs,[s("div",Ys,[s("div",{class:"progress-fill",style:is({width:`${a.completion_percentage}%`})},null,4)]),s("span",Zs,u(a.completion_percentage)+"%",1)])],8,Os))),128))]))])])])]),s("div",se,[s("div",ee,[s("div",te,[e[14]||(e[14]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Quick Actions")],-1)),s("div",ae,[s("div",ie,[s("button",{onClick:z,class:"quick-action-item"},[s("div",ne,[o(d(ds),{class:"w-6 h-6"})]),e[10]||(e[10]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"New Assessment"),s("div",{class:"quick-action-subtitle"},"Create individual assessment")],-1))]),s("button",{onClick:_,class:"quick-action-item"},[s("div",oe,[o(d(k),{class:"w-6 h-6"})]),e[11]||(e[11]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Assessment Cycle"),s("div",{class:"quick-action-subtitle"},"Manage assessment cycles")],-1))]),s("button",{onClick:V,class:"quick-action-item"},[s("div",ce,[o(d(us),{class:"w-6 h-6"})]),e[12]||(e[12]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Analytics"),s("div",{class:"quick-action-subtitle"},"View reports and insights")],-1))]),s("button",{onClick:B,class:"quick-action-item"},[s("div",re,[o(d(vs),{class:"w-6 h-6"})]),e[13]||(e[13]=s("div",{class:"quick-action-text"},[s("div",{class:"quick-action-title"},"Competencies"),s("div",{class:"quick-action-subtitle"},"Manage competency framework")],-1))])])])]),s("div",le,[e[17]||(e[17]=s("div",{class:"widget-header"},[s("h3",{class:"widget-title"},"Recent Activity")],-1)),s("div",de,[m.value?(i(),n("div",ue,[s("div",ve,[(i(),n(g,null,y(4,a=>s("div",{key:a,class:"flex items-start space-x-3"},e[15]||(e[15]=[s("div",{class:"w-8 h-8 bg-gray-200 rounded-full"},null,-1),s("div",{class:"flex-1"},[s("div",{class:"w-full h-3 bg-gray-200 rounded mb-2"}),s("div",{class:"w-2/3 h-3 bg-gray-200 rounded"})],-1)]))),64))])])):r.recentActivity.length===0?(i(),n("div",me,[o(d(T),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e[16]||(e[16]=s("p",{class:"text-gray-500 text-center"},"No recent activity",-1))])):(i(),n("div",ge,[(i(!0),n(g,null,y(r.recentActivity.slice(0,6),a=>(i(),n("div",{key:a.id,class:"activity-item"},[s("div",ye,[(i(),w(D(K(a.type)),{class:"w-4 h-4"}))]),s("div",he,[s("div",pe,u(a.description),1),s("div",fe,u(H(a.created_at)),1)])]))),128))]))])])])])]),h.value.length>0?(i(),n("div",_e,[s("div",be,[(i(!0),n(g,null,y(h.value,a=>(i(),n("div",{key:a.id,class:q([W(a.type),"notification-card"])},[s("div",ke,[(i(),w(D(X(a.type)),{class:"w-5 h-5"}))]),s("div",we,[s("p",xe,u(a.message),1)]),s("button",{onClick:c=>A(a.id),class:"notification-close"},[o(d(P),{class:"w-4 h-4"})],8,Ce)],2))),128))])])):es("",!0)]),_:1}))}},je=os(Ae,[["__scopeId","data-v-07668cad"]]);export{je as default};
