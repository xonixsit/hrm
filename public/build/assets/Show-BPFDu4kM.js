import{c as u,a as v,b as o,w as R,p as e,f as m,g,e as y,y as r,u as a,n as f,F as A,t as C,s as w,Q as U}from"./app-C1Dfh5gO.js";import{_ as Y}from"./AuthenticatedLayout-BgwxtLr1.js";import{p as V,x as I,c as Q,a as z,h as _,i as b,k as N,q as O,z as G}from"./Icon-BVsF8xbi.js";import"./useAuth-Dgf_DhjY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CCyNLUJR.js";import"./useAccessibility-PJ3RomC5.js";const H={class:"flex items-center justify-between"},J={class:"flex items-center space-x-4"},K={class:"font-semibold text-xl text-gray-800 leading-tight"},W={class:"flex items-center space-x-3"},X={class:"py-12"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},ee={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se={class:"p-6"},ne={class:"flex items-center"},ie={class:"flex-shrink-0"},ae={class:"ml-4"},oe={class:"text-2xl font-semibold text-gray-900"},le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},de={class:"p-6"},re={class:"flex items-center"},ce={class:"flex-shrink-0"},me={class:"ml-4"},ue={class:"text-2xl font-semibold text-gray-900"},xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ye={class:"p-6"},ve={class:"flex items-center"},ge={class:"flex-shrink-0"},fe={class:"ml-4"},pe={class:"text-2xl font-semibold text-gray-900"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},we={class:"p-6"},_e={class:"flex items-center"},be={class:"flex-shrink-0"},Te={class:"ml-4"},ke={class:"text-2xl font-semibold text-gray-900"},De={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},qe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},je={class:"p-6"},$e={class:"space-y-6"},Me={class:"space-y-3"},Re={class:"flex justify-between"},Ae={class:"text-sm font-medium text-gray-900"},Ce={class:"flex justify-between"},Ne={class:"text-sm font-medium text-gray-900"},Ee={key:0,class:"border-t pt-3"},Le={class:"text-sm text-gray-900 mt-1"},Se={class:"border-t pt-6"},Be={class:"space-y-3"},Fe={class:"flex items-center justify-between"},Pe={class:"inline-flex items-center"},Ue={class:"flex items-center justify-between"},Ye={class:"inline-flex items-center"},Ve={class:"flex items-center justify-between"},Ie={class:"inline-flex items-center"},Qe={class:"border-t pt-6"},ze={class:"space-y-3"},Oe={class:"flex justify-between"},Ge={class:"text-sm font-medium text-gray-900"},He={class:"flex justify-between"},Je={class:"text-sm font-medium text-gray-900"},Ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},We={class:"p-6"},Xe={class:"mb-6"},Ze={class:"space-y-3"},et={class:"flex items-center justify-between"},tt={class:"text-sm font-medium text-gray-900"},st={class:"flex items-center justify-between"},nt={class:"text-sm font-medium text-gray-900"},it={class:"flex items-center justify-between"},at={class:"text-sm font-medium text-gray-900"},ot={class:"border-t pt-6"},lt={class:"space-y-3"},dt={class:"flex justify-between"},rt={class:"text-sm font-medium text-gray-900"},ct={class:"flex justify-between"},mt={class:"text-sm font-medium text-gray-900"},ut={class:"flex justify-between"},xt={class:"text-sm font-medium text-gray-900"},yt={key:0,class:"border-t pt-6"},vt={class:"space-y-2"},gt={class:"text-sm text-gray-600"},ft={class:"text-sm font-medium text-gray-900"},pt={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ht={class:"p-6"},wt={class:"flex items-center justify-between mb-6"},_t={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},Tt={class:"bg-white divide-y divide-gray-200"},kt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm font-medium text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap"},jt={class:"text-sm text-gray-900"},$t={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ct={key:1,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Nt={class:"p-6"},Et={class:"flex items-center space-x-4"},Lt={key:2,class:"text-sm text-gray-500"},It={__name:"Show",props:{leaveType:Object,canEdit:Boolean,canDelete:Boolean},setup(i){const c=i,p=u(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.length)||0}),T=u(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="approved").length)||0}),k=u(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="pending").length)||0}),E=u(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.filter(t=>t.status==="rejected").length)||0}),D=u(()=>{var s;return((s=c.leaveType.leaves)==null?void 0:s.slice(0,10))||[]}),L=u(()=>{var n;const s=new Date().getMonth(),t=new Date().getFullYear();return((n=c.leaveType.leaves)==null?void 0:n.filter(d=>{const l=new Date(d.created_at);return l.getMonth()===s&&l.getFullYear()===t}).length)||0}),S=u(()=>{var d;const s=new Date().getMonth()-1,t=s<0?new Date().getFullYear()-1:new Date().getFullYear(),n=s<0?11:s;return((d=c.leaveType.leaves)==null?void 0:d.filter(l=>{const x=new Date(l.created_at);return x.getMonth()===n&&x.getFullYear()===t}).length)||0}),B=u(()=>{var n;if(!((n=c.leaveType.leaves)!=null&&n.length))return 0;const s=c.leaveType.leaves.reduce((d,l)=>new Date(l.created_at)<new Date(d.created_at)?l:d),t=Math.max(1,Math.ceil((new Date-new Date(s.created_at))/(1e3*60*60*24*30)));return Math.round(p.value/t)}),q=u(()=>{var t;if(!((t=c.leaveType.leaves)!=null&&t.length))return[];const s={};return c.leaveType.leaves.forEach(n=>{var x,j,$,M;const d=((j=(x=n.employee)==null?void 0:x.user)==null?void 0:j.name)||"Unknown",l=((M=($=n.employee)==null?void 0:$.user)==null?void 0:M.id)||"unknown";s[l]||(s[l]={id:l,name:d,requests_count:0}),s[l].requests_count++}),Object.values(s).sort((n,d)=>d.requests_count-n.requests_count)}),h=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=(s,t)=>{const n=new Date(s),d=new Date(t),l=Math.abs(d-n),x=Math.ceil(l/(1e3*60*60*24))+1;return`${x} day${x!==1?"s":""}`},P=()=>{confirm(`Are you sure you want to delete "${c.leaveType.name}"? This action cannot be undone.`)&&U.delete(route("leave-types.destroy",c.leaveType.id))};return(s,t)=>(o(),v(Y,null,{header:R(()=>[e("div",H,[e("div",J,[e("button",{onClick:t[0]||(t[0]=n=>s.$inertia.visit(s.route("leave-types.index"))),class:"text-gray-500 hover:text-gray-700"},[y(r(G),{class:"w-5 h-5"})]),e("div",null,[e("h2",K,a(i.leaveType.name),1),t[4]||(t[4]=e("p",{class:"text-sm text-gray-600 mt-1"}," Leave policy details and usage statistics ",-1))])]),e("div",W,[e("span",{class:f([{"bg-green-100 text-green-800":i.leaveType.is_active,"bg-red-100 text-red-800":!i.leaveType.is_active},"inline-flex px-3 py-1 text-sm font-semibold rounded-full"])},a(i.leaveType.is_active?"Active":"Inactive"),3),i.canEdit?(o(),m("button",{key:0,onClick:t[1]||(t[1]=n=>s.$inertia.visit(s.route("leave-types.edit",i.leaveType.id))),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[y(r(N),{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=w(" Edit Policy "))])):g("",!0)])])]),default:R(()=>[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ne,[e("div",ie,[y(r(V),{class:"h-8 w-8 text-blue-500"})]),e("div",ae,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Annual Quota",-1)),e("p",oe,a(i.leaveType.quota)+" days",1)])])])]),e("div",le,[e("div",de,[e("div",re,[e("div",ce,[y(r(I),{class:"h-8 w-8 text-green-500"})]),e("div",me,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Requests",-1)),e("p",ue,a(p.value),1)])])])]),e("div",xe,[e("div",ye,[e("div",ve,[e("div",ge,[y(r(Q),{class:"h-8 w-8 text-purple-500"})]),e("div",fe,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),e("p",pe,a(T.value),1)])])])]),e("div",he,[e("div",we,[e("div",_e,[e("div",be,[y(r(z),{class:"h-8 w-8 text-orange-500"})]),e("div",Te,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",ke,a(k.value),1)])])])])]),e("div",De,[e("div",qe,[e("div",je,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-6"},"Policy Configuration",-1)),e("div",$e,[e("div",null,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Basic Information",-1)),e("div",Me,[e("div",Re,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600"},"Leave Type Name:",-1)),e("span",Ae,a(i.leaveType.name),1)]),e("div",Ce,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600"},"Annual Quota:",-1)),e("span",Ne,a(i.leaveType.quota)+" days",1)]),i.leaveType.description?(o(),m("div",Ee,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600"},"Description:",-1)),e("p",Le,a(i.leaveType.description),1)])):g("",!0)])]),e("div",Se,[t[17]||(t[17]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Policy Settings",-1)),e("div",Be,[e("div",Fe,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-600"},"Requires Approval:",-1)),e("span",Pe,[i.leaveType.requires_approval?(o(),v(r(_),{key:0,class:"w-4 h-4 text-green-500 mr-1"})):(o(),v(r(b),{key:1,class:"w-4 h-4 text-red-500 mr-1"})),e("span",{class:f(["text-sm font-medium",i.leaveType.requires_approval?"text-green-700":"text-red-700"])},a(i.leaveType.requires_approval?"Yes":"No"),3)])]),e("div",Ue,[t[15]||(t[15]=e("span",{class:"text-sm text-gray-600"},"Carry Forward:",-1)),e("span",Ye,[i.leaveType.carry_forward?(o(),v(r(_),{key:0,class:"w-4 h-4 text-green-500 mr-1"})):(o(),v(r(b),{key:1,class:"w-4 h-4 text-red-500 mr-1"})),e("span",{class:f(["text-sm font-medium",i.leaveType.carry_forward?"text-green-700":"text-red-700"])},a(i.leaveType.carry_forward?"Allowed":"Not Allowed"),3)])]),e("div",Ve,[t[16]||(t[16]=e("span",{class:"text-sm text-gray-600"},"Status:",-1)),e("span",Ie,[i.leaveType.is_active?(o(),v(r(_),{key:0,class:"w-4 h-4 text-green-500 mr-1"})):(o(),v(r(b),{key:1,class:"w-4 h-4 text-red-500 mr-1"})),e("span",{class:f(["text-sm font-medium",i.leaveType.is_active?"text-green-700":"text-red-700"])},a(i.leaveType.is_active?"Active":"Inactive"),3)])])])]),e("div",Qe,[t[20]||(t[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Restrictions",-1)),e("div",ze,[e("div",Oe,[t[18]||(t[18]=e("span",{class:"text-sm text-gray-600"},"Max Consecutive Days:",-1)),e("span",Ge,a(i.leaveType.max_consecutive_days||"No limit"),1)]),e("div",He,[t[19]||(t[19]=e("span",{class:"text-sm text-gray-600"},"Minimum Notice:",-1)),e("span",Je,a(i.leaveType.min_notice_days?`${i.leaveType.min_notice_days} days`:"No requirement"),1)])])])])])]),e("div",Ke,[e("div",We,[t[31]||(t[31]=e("h3",{class:"text-lg font-medium text-gray-900 mb-6"},"Usage Statistics",-1)),e("div",Xe,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Request Status Breakdown",-1)),e("div",Ze,[e("div",et,[t[22]||(t[22]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e("span",{class:"text-sm text-gray-600"},"Approved")],-1)),e("span",tt,a(T.value),1)]),e("div",st,[t[23]||(t[23]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),e("span",{class:"text-sm text-gray-600"},"Pending")],-1)),e("span",nt,a(k.value),1)]),e("div",it,[t[24]||(t[24]=e("div",{class:"flex items-center"},[e("div",{class:"w-3 h-3 bg-red-500 rounded-full mr-2"}),e("span",{class:"text-sm text-gray-600"},"Rejected")],-1)),e("span",at,a(E.value),1)])])]),e("div",ot,[t[29]||(t[29]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Usage Trends",-1)),e("div",lt,[e("div",dt,[t[26]||(t[26]=e("span",{class:"text-sm text-gray-600"},"This Month:",-1)),e("span",rt,a(L.value)+" requests",1)]),e("div",ct,[t[27]||(t[27]=e("span",{class:"text-sm text-gray-600"},"Last Month:",-1)),e("span",mt,a(S.value)+" requests",1)]),e("div",ut,[t[28]||(t[28]=e("span",{class:"text-sm text-gray-600"},"Average per Month:",-1)),e("span",xt,a(B.value)+" requests",1)])])]),q.value.length>0?(o(),m("div",yt,[t[30]||(t[30]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Most Active Users",-1)),e("div",vt,[(o(!0),m(A,null,C(q.value.slice(0,5),n=>(o(),m("div",{key:n.id,class:"flex justify-between items-center"},[e("span",gt,a(n.name),1),e("span",ft,a(n.requests_count)+" requests",1)]))),128))])])):g("",!0)])])]),D.value.length>0?(o(),m("div",pt,[e("div",ht,[e("div",wt,[t[32]||(t[32]=e("h3",{class:"text-lg font-medium text-gray-900"},"Recent Leave Requests",-1)),e("button",{onClick:t[2]||(t[2]=n=>s.$inertia.visit(s.route("leaves.index",{type:i.leaveType.name}))),class:"text-sm text-indigo-600 hover:text-indigo-500"}," View All → ")]),e("div",_t,[e("table",bt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dates "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Days "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Requested ")])],-1)),e("tbody",Tt,[(o(!0),m(A,null,C(D.value,n=>{var d,l;return o(),m("tr",{key:n.id,class:"hover:bg-gray-50"},[e("td",kt,[e("div",Dt,a(((l=(d=n.employee)==null?void 0:d.user)==null?void 0:l.name)||"Unknown"),1)]),e("td",qt,[e("div",jt,a(h(n.from_date))+" - "+a(h(n.to_date)),1)]),e("td",$t,[e("div",Mt,a(F(n.from_date,n.to_date)),1)]),e("td",Rt,[e("span",{class:f([{"bg-green-100 text-green-800":n.status==="approved","bg-yellow-100 text-yellow-800":n.status==="pending","bg-red-100 text-red-800":n.status==="rejected"},"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},a(n.status),3)]),e("td",At,a(h(n.created_at)),1)])}),128))])])])])])):g("",!0),i.canEdit||i.canDelete?(o(),m("div",Ct,[e("div",Nt,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Actions",-1)),e("div",Et,[i.canEdit?(o(),m("button",{key:0,onClick:t[3]||(t[3]=n=>s.$inertia.visit(s.route("leave-types.edit",i.leaveType.id))),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[y(r(N),{class:"w-4 h-4 mr-2"}),t[34]||(t[34]=w(" Edit Policy "))])):g("",!0),i.canDelete&&p.value===0?(o(),m("button",{key:1,onClick:P,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"},[y(r(O),{class:"w-4 h-4 mr-2"}),t[35]||(t[35]=w(" Delete Policy "))])):i.canDelete?(o(),m("div",Lt," Cannot delete: "+a(p.value)+" leave requests exist for this type ",1)):g("",!0)])])])):g("",!0)])])]),_:1}))}};export{It as default};
