import{c as g,o as c,a as e,i as w,m as de,n as x,d as he,u as i,A as ee,t as l,F as q,g as U,s as ye,E as He,f as p,Q as le,e as W,r as J,z as ke,B as Ae,q as te,l as j,k as $,D as Se,y as Ne,C as ze,h as z,w as We,b as Oe,G as Q}from"./app-KGUu5sDi.js";import{u as Ce}from"./useAuth-DNW-xFgm.js";import{b as Ie,A as Ve}from"./AuthenticatedLayout-D7y5iMcE.js";/* empty css                                                                  *//* empty css                                                                      */import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as Le,m as ve,k as $e,j as Y,a as Te}from"./icons-BM5aRCYy.js";import{r as ie}from"./ChartBarIcon-Dd1NGXrr.js";import{a as Fe,r as Be,b as fe}from"./UsersIcon--c-Uhi0K.js";import{A as Ue}from"./ApplicationLogo-D924GuY_.js";import{r as oe}from"./AcademicCapIcon-DxLFpySu.js";import{r as qe}from"./ArrowTrendingUpIcon-CFJSTV7G.js";import{r as De}from"./CogIcon-CxMmP6Ie.js";import{r as Ke}from"./ArrowPathIcon-BDyf7aYx.js";const Xe=["role","tabindex"],Ge={key:0,class:"flex items-center justify-between mb-4"},Qe={class:"flex items-center space-x-3"},Ye={key:0,class:"flex items-center space-x-2"},Je={class:"flex-1"},Ze={key:2,class:x(["absolute inset-0 flex items-center justify-center rounded-2xl transition-all duration-200"])},_e={class:"flex items-center space-x-3"},re={__name:"UnifiedCard",props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:[String,Object],default:null},iconVariant:{type:String,default:null,validator:t=>["primary","success","warning","danger","info"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","elevated"].includes(t)},size:{type:String,default:"default",validator:t=>["small","default"].includes(t)},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},status:{type:String,default:null,validator:t=>["success","warning","error","info"].includes(t)},statusText:{type:String,default:null},className:{type:String,default:""}},emits:["click"],setup(t,{emit:H}){const{isDark:v}=Ie();return(S,d)=>(c(),g(q,null,[e("div",{class:x(["group relative transition-all duration-300",t.size==="small"?"rounded-lg":"rounded-2xl",t.clickable&&"cursor-pointer hover:scale-[1.02] hover:shadow-2xl",t.clickable&&(i(v)?"hover:bg-gray-700/60 hover:border-gray-600/60":"hover:bg-white/90 hover:border-gray-300/60"),t.size==="small"?"p-3":"p-4",t.className]),onClick:d[0]||(d[0]=y=>t.clickable&&S.$emit("click")),role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[d[1]||(d[1]=de(y=>t.clickable&&S.$emit("click"),["enter"])),d[2]||(d[2]=de(he(y=>t.clickable&&S.$emit("click"),["prevent"]),["space"]))]},null,42,Xe),S.$slots.header||t.title?(c(),g("div",Ge,[e("div",Qe,[t.icon||S.$slots.icon?(c(),g("div",{key:0,class:x(["flex items-center justify-center rounded-xl transition-all duration-200",t.size==="small"?"w-10 h-10 p-2":"w-12 h-12 p-3",t.iconVariant==="primary"&&(i(v)?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-600 border border-blue-200/50"),t.iconVariant==="success"&&(i(v)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-600 border border-green-200/50"),t.iconVariant==="warning"&&(i(v)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-600 border border-orange-200/50"),t.iconVariant==="danger"&&(i(v)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-600 border border-red-200/50"),t.iconVariant==="info"&&(i(v)?"bg-purple-600/20 text-purple-400 border border-purple-500/30":"bg-purple-50 text-purple-600 border border-purple-200/50"),!t.iconVariant&&(i(v)?"bg-gray-700/50 text-gray-300 border border-gray-600/50":"bg-gray-100 text-gray-600 border border-gray-200/50")])},[ee(S.$slots,"icon",{},()=>[t.icon?(c(),U(ye(t.icon),{key:0,class:x(t.size==="small"?"w-4 h-4":"w-5 h-5")},null,8,["class"])):w("",!0)])],2)):w("",!0),e("div",null,[t.title?(c(),g("h3",{key:0,class:x(["font-semibold transition-colors duration-200",t.size==="small"?"text-base":"text-lg",i(v)?"text-white":"text-gray-900"])},l(t.title),3)):w("",!0),t.description?(c(),g("p",{key:1,class:x(["transition-colors duration-200",t.size==="small"?"text-xs":"text-sm",i(v)?"text-gray-400":"text-gray-600"])},l(t.description),3)):w("",!0),ee(S.$slots,"header")])]),S.$slots.headerActions?(c(),g("div",Ye,[ee(S.$slots,"headerActions")])):w("",!0)])):w("",!0),e("div",Je,[ee(S.$slots,"default",{},()=>[d[3]||(d[3]=He('<div class="text-center py-12"><div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Content Available</h3><p class="text-sm text-gray-500">This section will display content when data is available.</p></div>',1))])]),S.$slots.footer?(c(),g("div",{key:1,class:x(["mt-6 pt-4 border-t transition-colors duration-200",i(v)?"border-gray-700/50":"border-gray-200/50"])},[ee(S.$slots,"footer")],2)):w("",!0),t.loading?(c(),g("div",Ze,[e("div",_e,[e("div",{class:x(["animate-spin rounded-full border-2 border-t-transparent",t.size==="small"?"w-5 h-5":"w-6 h-6",i(v)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:x(["text-sm font-medium",i(v)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])])):w("",!0),t.status?(c(),g("div",{key:3,class:x(["absolute top-4 right-4 flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="success"&&(i(v)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-green-50 text-green-700 border border-green-200"),t.status==="warning"&&(i(v)?"bg-orange-600/20 text-orange-400 border border-orange-500/30":"bg-orange-50 text-orange-700 border border-orange-200"),t.status==="error"&&(i(v)?"bg-red-600/20 text-red-400 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200"),t.status==="info"&&(i(v)?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200")])},[e("div",{class:x(["w-1.5 h-1.5 rounded-full",t.status==="success"&&"bg-green-400",t.status==="warning"&&"bg-orange-400",t.status==="error"&&"bg-red-400",t.status==="info"&&"bg-blue-400"])},null,2),e("span",null,l(t.statusText||t.status),1)],2)):w("",!0)],64))}},et=["role","tabindex","onKeydown"],tt={class:"flex items-start justify-between mb-4"},st={key:0,class:"flex items-center space-x-1"},at={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nt={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ot={class:"space-y-1 mb-3"},rt={class:"flex items-center gap-2"},lt={key:2,class:"absolute z-20 -top-2 -right-2"},L={__name:"UnifiedStatsCard",props:{value:{type:[Number,String],required:!0},label:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],required:!0},variant:{type:String,default:"primary",validator:t=>["primary","success","warning","info","neutral"].includes(t)},trend:{type:Number,default:null},trendSuffix:{type:String,default:"%"},status:{type:String,default:null,validator:t=>["excellent","good","warning","critical"].includes(t)},statusText:{type:String,default:null},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},route:{type:String,default:null},urgent:{type:Boolean,default:!1},prefix:{type:String,default:""},suffix:{type:String,default:""}},emits:["click"],setup(t,{emit:H}){const v=t,S=H,{isDark:d}=Ie(),y=p(()=>{if(v.loading)return"...";let a=v.value;return typeof a=="number"&&(a=a.toLocaleString()),`${v.prefix}${a}${v.suffix}`}),C=()=>{!v.clickable||v.loading||(v.route&&le.visit(route(v.route)),S("click"))};return(a,T)=>(c(),g("div",{class:x(["group relative transition-all duration-300",t.clickable&&"cursor-pointer",i(d)?"bg-gray-800/50 border border-gray-700/50 backdrop-blur-sm":"bg-white border border-gray-100 shadow-sm backdrop-blur-sm","hover:shadow-md hover:-translate-y-0.5","rounded-2xl p-5 sm:p-6"]),onClick:C,role:t.clickable?"button":void 0,tabindex:t.clickable?"0":void 0,onKeydown:[de(C,["enter"]),de(he(C,["prevent"]),["space"])]},[e("div",tt,[e("div",{class:x(["flex items-center justify-center w-12 h-12 rounded-xl flex-shrink-0 shadow-sm",t.variant==="primary"&&(i(d)?"bg-blue-600/20 text-blue-400":"bg-blue-500 text-white shadow-blue-100"),t.variant==="success"&&(i(d)?"bg-green-600/20 text-green-400":"bg-green-500 text-white shadow-green-100"),t.variant==="warning"&&(i(d)?"bg-orange-600/20 text-orange-400":"bg-orange-500 text-white shadow-orange-100"),t.variant==="info"&&(i(d)?"bg-purple-600/20 text-purple-400":"bg-purple-500 text-white shadow-purple-100"),t.variant==="neutral"&&(i(d)?"bg-gray-700/50 text-gray-300":"bg-gray-500 text-white shadow-gray-100")])},[(c(),U(ye(t.icon),{class:"w-6 h-6"}))],2),t.trend!==null&&!t.loading?(c(),g("div",st,[t.trend>0?(c(),g("svg",at,T[0]||(T[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):t.trend<0?(c(),g("svg",nt,T[1]||(T[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):w("",!0),e("span",{class:x(["text-sm font-medium",t.trend>0&&"text-green-600",t.trend<0&&"text-red-600",t.trend===0&&"text-gray-500"])},l(t.trend>0?"+":"")+l(t.trend)+l(t.trendSuffix),3)])):t.status&&!t.loading?(c(),g("div",{key:1,class:x(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",t.status==="excellent"&&(i(d)?"bg-green-600/20 text-green-400":"bg-green-50 text-green-700 border border-green-100"),t.status==="good"&&(i(d)?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-700 border border-blue-100"),t.status==="warning"&&(i(d)?"bg-orange-600/20 text-orange-400":"bg-orange-50 text-orange-700 border border-orange-100"),t.status==="critical"&&(i(d)?"bg-red-600/20 text-red-400":"bg-red-50 text-red-700 border border-red-100")])},[e("span",{class:x(["w-1.5 h-1.5 rounded-full",t.status==="excellent"&&"bg-green-500",t.status==="good"&&"bg-blue-500",t.status==="warning"&&"bg-orange-500",t.status==="critical"&&"bg-red-500"])},null,2),e("span",null,l(t.statusText||t.status),1)],2)):w("",!0)]),e("div",ot,[e("div",{class:x(["text-3xl font-semibold tracking-tight transition-colors duration-200",i(d)?"text-white":"text-gray-900",t.variant==="success"&&!i(d)&&"text-green-600",t.variant==="warning"&&!i(d)&&"text-orange-600"])},l(t.loading?"...":y.value),3),e("div",{class:x(["text-sm font-medium transition-colors duration-200",i(d)?"text-gray-400":"text-gray-600"])},l(t.label),3)]),t.description?(c(),g("div",{key:0,class:x(["text-sm leading-relaxed transition-colors duration-200",(i(d),"text-gray-500")])},l(t.description),3)):w("",!0),t.loading?(c(),g("div",{key:1,class:x(["absolute inset-0 z-10 flex items-center justify-center rounded-2xl backdrop-blur-sm",i(d)?"bg-gray-800/80":"bg-white/80"])},[e("div",rt,[e("div",{class:x(["animate-spin rounded-full w-5 h-5 border-2 border-t-transparent",i(d)?"border-gray-400":"border-gray-600"])},null,2),e("span",{class:x(["text-sm font-medium",i(d)?"text-gray-300":"text-gray-600"])}," Loading... ",2)])],2)):w("",!0),t.urgent&&!t.loading?(c(),g("div",lt,T[2]||(T[2]=[e("div",{class:"relative"},[e("div",{class:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),e("div",{class:"absolute inset-0 w-4 h-4 bg-red-500 rounded-full animate-ping opacity-75"})],-1)]))):w("",!0)],42,et))}},it={key:0,class:"space-y-4"},dt={key:0,class:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4"},ct={class:"space-y-2"},ut={class:"flex items-center space-x-3"},mt={class:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center"},gt={class:"text-sm font-semibold text-pink-700"},bt={class:"font-medium text-gray-900"},vt={class:"text-sm text-gray-500"},ft={class:"text-right"},ht={key:0,class:"text-xs text-gray-500"},yt={key:1,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},kt={class:"flex items-center justify-between mb-3"},xt={class:"space-y-2"},pt={class:"flex items-center space-x-3"},wt={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},St={class:"text-sm font-semibold text-blue-700"},$t={class:"font-medium text-gray-900"},Tt={class:"text-sm text-gray-500"},Bt={class:"text-right"},Dt={class:"text-sm font-medium text-gray-900"},At={class:"text-xs text-gray-500"},Ct={key:2,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},je={__name:"BirthdayNotifications",props:{todaysBirthdays:{type:Array,default:()=>[]},upcomingBirthdays:{type:Array,default:()=>[]},stats:{type:Object,default:null}},setup(t){const H=t,v=W(!1),S=p(()=>H.todaysBirthdays.length>0||H.upcomingBirthdays.length>0),d=p(()=>v.value?H.upcomingBirthdays:H.upcomingBirthdays.slice(0,3)),y=T=>T.split(" ").map(B=>B.charAt(0).toUpperCase()).join("").substring(0,2),C=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric"}),a=T=>T===0?"Today":T===1?"Tomorrow":`In ${T} days`;return(T,B)=>S.value?(c(),g("div",it,[t.todaysBirthdays.length>0?(c(),g("div",dt,[B[2]||(B[2]=e("div",{class:"flex items-center space-x-3 mb-3"},[e("div",{class:"text-2xl"},"ðŸŽ‰"),e("div",null,[e("h3",{class:"text-lg font-semibold text-pink-800"},"Birthday Today!"),e("p",{class:"text-sm text-pink-600"},"Let's celebrate our team members")])],-1)),e("div",ct,[(c(!0),g(q,null,J(t.todaysBirthdays,D=>(c(),g("div",{key:D.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",ut,[e("div",mt,[e("span",gt,l(y(D.user.name)),1)]),e("div",null,[e("p",bt,l(D.user.name),1),e("p",vt,l(D.job_title||"Employee"),1)])]),e("div",ft,[B[1]||(B[1]=e("div",{class:"text-lg"},"ðŸŽ‚",-1)),D.age?(c(),g("p",ht,l(D.age)+" years",1)):w("",!0)])]))),128))])])):w("",!0),t.upcomingBirthdays.length>0?(c(),g("div",yt,[e("div",kt,[B[3]||(B[3]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800"},"Upcoming Birthdays"),e("p",{class:"text-sm text-blue-600"},"Don't forget to wish them well!")])],-1)),e("button",{onClick:B[0]||(B[0]=D=>v.value=!v.value),class:"text-sm text-blue-600 hover:text-blue-800 font-medium"},l(v.value?"Show Less":"Show All"),1)]),e("div",xt,[(c(!0),g(q,null,J(d.value,(D,u)=>(c(),g("div",{key:D.employee.id,class:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm"},[e("div",pt,[e("div",wt,[e("span",St,l(y(D.employee.user.name)),1)]),e("div",null,[e("p",$t,l(D.employee.user.name),1),e("p",Tt,l(D.employee.job_title||"Employee"),1)])]),e("div",Bt,[e("p",Dt,l(C(D.birthday_date)),1),e("p",At,l(a(D.days_until)),1)])]))),128))])])):w("",!0),t.todaysBirthdays.length===0&&t.upcomingBirthdays.length===0&&t.stats&&t.stats.this_month===0?(c(),g("div",Ct,B[4]||(B[4]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"text-2xl"},"ðŸŽ‚"),e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800"},"No Birthdays This Month"),e("p",{class:"text-sm text-blue-600"},"No team birthdays to celebrate right now, but stay tuned!")])],-1)]))):w("",!0)])):w("",!0)}},It={class:"employee-dashboard"},Mt={class:"time-tracking-section"},jt={class:"real-time-clock"},Rt={class:"clock-display"},Pt={class:"current-time"},Et={class:"current-date"},Ht={class:"work-status"},Nt={class:"status-text"},zt={class:"time-progress-block"},Wt={class:"duration-display"},Ot={class:"duration-item"},Vt={class:"duration-item"},Lt={class:"duration-item"},Ft={class:"duration-value"},Ut={class:"horizontal-clock-container"},qt={class:"time-markers"},Kt={class:"marker-time"},Xt={class:"time-progress-bar"},Gt={key:0,class:"current-time-indicator"},Qt={class:"time-tooltip"},Yt={class:"time-progress-info"},Jt={class:"progress-left"},Zt={class:"progress-time"},_t={class:"progress-right"},es={class:"progress-percentage"},ts={class:"quick-actions"},ss={class:"actions-grid"},as=["onClick"],ns={key:0,class:"w-6 h-6",fill:"none",stroke:"#8B5CF6",viewBox:"0 0 24 24"},os={key:1,class:"w-6 h-6",fill:"none",stroke:"#3B82F6",viewBox:"0 0 24 24"},rs={key:2,class:"w-6 h-6",fill:"none",stroke:"#F59E0B",viewBox:"0 0 24 24"},ls={key:0,class:"debug-section"},is={class:"debug-content"},ds={class:"debug-item"},cs={class:"debug-item"},us={class:"debug-item"},ms={class:"debug-item"},gs={class:"debug-item"},bs={class:"debug-item"},vs={class:"debug-item"},fs={class:"debug-item"},hs={class:"debug-item"},ys={class:"debug-item"},ks={class:"debug-item"},xs={class:"birthday-section"},ps={__name:"EmployeeDashboard",props:{stats:{type:Object,default:()=>({daysWithCompany:0,projectsContributed:0,performanceRank:"N/A"})},currentAttendance:{type:Object,default:()=>({clocked_in:!1,on_break:!1,clock_in_time:null,current_break_start:null,todays_summary:{total_hours:"0h 0m",break_time:"0h 0m"}})},birthdayNotifications:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})}},emits:["action"],setup(t,{emit:H}){const v=t,S=H,{user:d}=Ce(),y=W(new Date),C=W(!1),a=W({clockedIn:!1,onBreak:!1,clockInTime:null,breakStartTime:null,workDuration:"0h 0m",breakDuration:"0h 0m",completedBreakSessions:[],totalBreakTime:"0h 0m"});let T=null;const B=p(()=>y.value.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})),D=p(()=>y.value.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),u=p(()=>a.value.clockedIn),b=p(()=>a.value.onBreak),F=p(()=>a.value.onBreak?"On Break":a.value.clockedIn?"Working":"Not Clocked In"),I=p(()=>a.value.onBreak?"status-break":a.value.clockedIn?"status-working":"status-out"),ce=p(()=>a.value.workDuration),Z=p(()=>a.value.breakDuration),K=p(()=>{let o=0;if(a.value.completedBreakSessions&&a.value.completedBreakSessions.forEach(m=>{if(m.start&&m.end){const f=new Date(m.start),P=new Date(m.end)-f;o+=Math.floor(P/(1e3*60))}}),a.value.onBreak&&a.value.breakStartTime){const m=new Date(a.value.breakStartTime),f=y.value,k=Math.max(0,f-m);o+=Math.floor(k/(1e3*60))}const s=Math.floor(o/60),n=o%60;return`${s}h ${n}m`}),ue=p(()=>{const s=y.value.getHours();return s<6?"before-work":s>=18?"after-work":"during-work"}),X=p(()=>{const o=[];return[6,7,8,9,10,11,12,13,14,15,16,17,18].forEach((n,m)=>{let f,k=!1;n===0?f="12 AM":n===12?(f="12 PM",k=!0):n<12?f=`${n} AM`:n===18?f="6 PM":f=`${n-12} PM`,(n===12||n===13)&&(k=!0);const P=m/12*100;o.push({label:f,time:n,isLunch:k,position:P})}),o}),O=p(()=>{if(!u.value||!a.value.clockInTime)return 0;const o=y.value,s=new Date(a.value.clockInTime);if(o<s)return 0;const m=(o.getTime()-s.getTime())/(1e3*60*60);return Math.min(m/12*100,100)}),se=p(()=>0),me=p(()=>{if(!u.value||!a.value.clockInTime)return 0;const o=new Date(a.value.clockInTime),s=o.getHours(),n=o.getMinutes();if(s<6)return 0;if(s>=18)return 100;{const f=(s-6)*60+n,k=12*60;return f/k*100}}),V=p(()=>{if(!u.value||!a.value.clockInTime)return 0;const o=a.value.workDuration||"0h 0m",s=o.match(/(\d+)h/),n=o.match(/(\d+)m/),m=s?parseInt(s[1]):0,f=n?parseInt(n[1]):0,k=m*60+f,P=12*60,G=k/P*100;return Math.min(G,100)}),ge=p(()=>u.value?`${Math.round(O.value)}% Complete`:"Not Active"),h=p(()=>{const o=y.value,s=o.getHours(),n=o.getMinutes();if(s<6)return 0;if(s>=18)return 100;{const f=(s-6)*60+n,k=12*60;return f/k*100}}),r=p(()=>{if(b.value)return"bg-yellow-100 text-yellow-700";if(u.value)return"bg-green-100 text-green-700";switch(ue.value){case"before-work":return"bg-gray-100 text-gray-600";case"after-work":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}}),M=p(()=>{const o=[],s=(n,m)=>{if(n<6||n>=18)return null;const k=(n-6)*60+m,P=12*60;return k/P*100};if(a.value.completedBreakSessions&&a.value.completedBreakSessions.forEach(n=>{if(n.start&&n.end){const m=new Date(n.start),f=new Date(n.end),k=s(m.getHours(),m.getMinutes()),P=s(f.getHours(),f.getMinutes());k!==null&&P!==null&&P>k&&o.push({left:k,width:P-k,isOngoing:!1})}}),b.value&&a.value.breakStartTime){const n=new Date(a.value.breakStartTime),m=y.value,f=s(n.getHours(),n.getMinutes()),k=s(m.getHours(),m.getMinutes());f!==null&&k!==null&&k>f&&o.push({left:f,width:k-f,isOngoing:!0})}return o}),N=p(()=>[{id:"my-assessments",label:"My Assessments",icon:Le,route:"competency-assessments.my-assessments"},{id:"work-reports",label:"Work Reports",icon:ie,route:"work-reports.index"},{id:"leaderboard",label:"Leaderboard",icon:Fe,route:"work-reports.leaderboard"}]),E=()=>{y.value=new Date,R()},R=()=>{if(a.value.clockedIn&&a.value.clockInTime){const o=new Date(a.value.clockInTime),n=y.value.getTime()-o.getTime();if(n>0){const m=Math.floor(n/36e5),f=Math.floor(n%(1e3*60*60)/(1e3*60));a.value.workDuration=`${m}h ${f}m`}}else a.value.clockedIn||(a.value.workDuration="0h 0m");if(a.value.onBreak&&a.value.breakStartTime){const o=new Date(a.value.breakStartTime),n=y.value.getTime()-o.getTime();if(n>0){const m=Math.floor(n/36e5),f=Math.floor(n%(1e3*60*60)/(1e3*60)),k=Math.floor(n%(1e3*60)/1e3);a.value.breakDuration=`${m}h ${f}m ${k}s`}}else a.value.onBreak||(a.value.breakDuration="0h 0m");a.value.completedBreakSessions.length>0&&console.log("ðŸ” Dashboard: Break sessions debug:",{completedSessions:a.value.completedBreakSessions.length,currentBreak:a.value.onBreak,breakStartTime:a.value.breakStartTime,currentBreakDuration:a.value.breakDuration,totalBreakTimeComputed:K.value})},A=o=>{o.route&&(window.location.href=route(o.route)),S("action",o)},ae=()=>{console.log("ðŸ”„ Dashboard: Manual refresh requested"),be(),console.log("ðŸ“¡ Dashboard: Requesting fresh data from FloatingWidget..."),window.dispatchEvent(new CustomEvent("dashboard-requests-sync")),window.axios&&window.axios.get("/api/attendance/current").then(o=>{var s,n;console.log("ðŸ“¡ Dashboard: Received fresh data from API:",o.data),a.value={clockedIn:o.data.clocked_in||!1,onBreak:o.data.on_break||!1,clockInTime:o.data.clock_in_time||null,breakStartTime:o.data.current_break_start||null,workDuration:((s=o.data.todays_summary)==null?void 0:s.total_hours)||a.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:o.data.break_sessions||[],totalBreakTime:((n=o.data.todays_summary)==null?void 0:n.break_time)||"0h 0m"},R(),console.log("âœ… Dashboard: Updated from API:",{clockedIn:a.value.clockedIn,isClockedInComputed:u.value,workProgressPercentage:O.value,progressWidth:V.value})}).catch(o=>{console.error("âŒ Dashboard: Failed to fetch from API:",o)})},xe=o=>{o.ctrlKey&&o.shiftKey&&o.key==="D"&&(C.value=!C.value,console.log("ðŸ› Dashboard: Debug mode",C.value?"enabled":"disabled"))},Re=()=>{var o,s,n,m,f,k,P,G,_;a.value={clockedIn:((o=v.currentAttendance)==null?void 0:o.clocked_in)||!1,onBreak:((s=v.currentAttendance)==null?void 0:s.on_break)||!1,clockInTime:((n=v.currentAttendance)==null?void 0:n.clock_in_time)||null,breakStartTime:((m=v.currentAttendance)==null?void 0:m.current_break_start)||null,workDuration:((k=(f=v.currentAttendance)==null?void 0:f.todays_summary)==null?void 0:k.total_hours)||"0h 0m",breakDuration:"0h 0m",completedBreakSessions:((P=v.currentAttendance)==null?void 0:P.break_sessions)||[],totalBreakTime:((_=(G=v.currentAttendance)==null?void 0:G.todays_summary)==null?void 0:_.break_time)||"0h 0m"},console.log("ðŸ”„ Dashboard: Initialized attendance state:",a.value)},be=()=>{try{const o=localStorage.getItem("floating-attendance-state");if(o){const s=JSON.parse(o),n=new Date(s.lastUpdate);if((new Date-n)/(1e3*60)<5)return a.value={clockedIn:s.clockedIn||!1,onBreak:s.onBreak||!1,clockInTime:s.clockInTime||null,breakStartTime:s.breakStartTime||null,workDuration:a.value.workDuration,breakDuration:a.value.breakDuration,completedBreakSessions:s.completedBreakSessions||s.break_sessions||[],totalBreakTime:a.value.totalBreakTime},R(),console.log("ðŸ”„ Dashboard: Synced with FloatingWidget localStorage:",a.value),!0}}catch(o){console.warn("Dashboard: Failed to sync with FloatingWidget localStorage:",o)}return!1},Pe=o=>{var s,n;console.log("ðŸ“¡ Dashboard: Received attendance update via Echo:",o),a.value={clockedIn:o.clocked_in||!1,onBreak:o.on_break||!1,clockInTime:o.clock_in_time||null,breakStartTime:o.current_break_start||null,workDuration:((s=o.todays_summary)==null?void 0:s.total_hours)||a.value.workDuration,breakDuration:"0h 0m",completedBreakSessions:o.break_sessions||[],totalBreakTime:((n=o.todays_summary)==null?void 0:n.break_time)||a.value.totalBreakTime},R()},pe=o=>{console.log("ðŸ“¡ Dashboard: Received attendance state change (legacy):",o.detail),console.log("ðŸ” Dashboard: Current state before update:",{clockedIn:a.value.clockedIn,onBreak:a.value.onBreak,clockInTime:a.value.clockInTime});const{clockedIn:s,onBreak:n,clockInTime:m,breakStartTime:f,completedBreakSessions:k,todaysHours:P,currentBreakTime:G,totalBreakTime:_,action:Ee}=o.detail;let ne=a.value.completedBreakSessions||[];if(k&&Array.isArray(k))ne=k;else if(Ee==="end-break"&&a.value.onBreak&&a.value.breakStartTime){const we={start:a.value.breakStartTime,end:new Date().toISOString(),isOngoing:!1};ne=[...ne,we],console.log("ðŸ’¾ Dashboard: Saved completed break session locally:",we)}a.value={clockedIn:s||!1,onBreak:n||!1,clockInTime:m||null,breakStartTime:f||null,workDuration:P||a.value.workDuration,breakDuration:G||"0h 0m",completedBreakSessions:ne,totalBreakTime:_||a.value.totalBreakTime},R(),console.log("âœ… Dashboard: Updated attendance state from FloatingWidget:",{clockedIn:a.value.clockedIn,onBreak:a.value.onBreak,clockInTime:a.value.clockInTime,workDuration:a.value.workDuration,breakDuration:a.value.breakDuration,completedBreaks:a.value.completedBreakSessions.length,totalBreakTime:_,isClockedInComputed:u.value,workProgressPercentage:O.value,progressWidth:V.value})};return ke(async()=>{var s,n;E(),Re();const o=be();if(console.log(o?"âœ… Dashboard: Successfully synced with FloatingWidget":"âš ï¸ Dashboard: No recent FloatingWidget data found"),console.log("ðŸ” Dashboard: Initial state after sync:",{clockedIn:a.value.clockedIn,onBreak:a.value.onBreak,clockInTime:a.value.clockInTime,isClockedInComputed:u.value,workProgressPercentage:O.value,progressWidth:V.value}),T=setInterval(()=>{E(),y.value.getSeconds()%30===0&&be()},1e3),window.Echo&&((n=(s=d.value)==null?void 0:s.employee)!=null&&n.id)){const m=d.value.employee.id;try{window.Echo.private(`attendance.${m}`).listen(".attendance.updated",Pe),console.log(`ðŸ“¡ Dashboard: Subscribed to Echo channel attendance.${m}`)}catch(f){console.error("Dashboard: Failed to subscribe to Echo channel:",f)}}else console.warn("Dashboard: Echo not available or no employee ID");window.addEventListener("attendance-state-changed",pe),window.addEventListener("keydown",xe),console.log("ðŸš€ Dashboard: Initialized with Echo and legacy event listeners (Press Ctrl+Shift+D for debug)")}),Ae(()=>{var o,s;if(T&&clearInterval(T),window.Echo&&((s=(o=d.value)==null?void 0:o.employee)!=null&&s.id)){const n=d.value.employee.id;try{window.Echo.leave(`attendance.${n}`),console.log("ðŸ“¡ Dashboard: Unsubscribed from Echo channels")}catch(m){console.warn("Dashboard: Error unsubscribing from Echo channels:",m)}}window.removeEventListener("attendance-state-changed",pe),window.removeEventListener("keydown",xe),console.log("ðŸ”„ Dashboard: Cleanup completed")}),(o,s)=>(c(),g("div",It,[e("div",Mt,[e("div",jt,[e("div",Rt,[e("div",Pt,l(B.value),1),e("div",Et,l(D.value),1)]),e("div",Ht,[e("div",{class:x(["status-indicator",I.value])},[s[0]||(s[0]=e("div",{class:"status-dot"},null,-1)),e("span",Nt,l(F.value),1)],2)])]),e("div",zt,[e("div",Wt,[e("div",Ot,[s[1]||(s[1]=e("div",{class:"duration-label"},"Work Time",-1)),e("div",{class:x(["duration-value",{"text-gray-500":b.value}])},l(ce.value),3)]),e("div",Vt,[e("div",{class:x(["duration-label",{"text-orange-600":b.value}])},l(b.value?"Current Break":"Total Breaks"),3),e("div",{class:x(["duration-value",{"text-orange-600 font-bold":b.value}])},l(b.value?Z.value:K.value),3)]),e("div",Lt,[s[2]||(s[2]=e("div",{class:"duration-label"},"Progress",-1)),e("div",Ft,l(Math.round(O.value))+"%",1)])]),e("div",Ut,[e("div",qt,[(c(!0),g(q,null,J(X.value,(n,m)=>(c(),g("div",{key:m,class:x(["time-marker",{"start-marker":m===0,"end-marker":m===X.value.length-1,"lunch-marker":n.isLunch,"regular-marker":!n.isLunch&&m!==0&&m!==X.value.length-1}]),style:te({left:`${n.position}%`})},[s[3]||(s[3]=e("div",{class:"marker-line"},null,-1)),e("span",Kt,l(n.label),1)],6))),128))]),e("div",Xt,[s[6]||(s[6]=e("div",{class:"progress-bar-shimmer"},null,-1)),e("div",{class:"current-time-position",style:te({left:`${h.value}%`})},s[4]||(s[4]=[e("div",{class:"time-position-dot"},null,-1)]),4),se.value>0?(c(),g("div",{key:0,class:"pre-work-fill",style:te({width:`${se.value}%`,transition:"width 0.5s ease-out"})},null,4)):w("",!0),u.value&&V.value>0?(c(),g("div",{key:1,class:"work-progress-fill",style:te({left:`${me.value}%`,width:`${V.value}%`,transition:"width 0.5s ease-out, left 0.5s ease-out"})},[u.value?(c(),g("div",Gt,[s[5]||(s[5]=e("div",{class:"time-dot"},null,-1)),e("div",Qt,l(B.value),1)])):w("",!0)],4)):w("",!0),(c(!0),g(q,null,J(M.value,(n,m)=>(c(),g("div",{key:`break-${m}`,class:x(["break-time-fill",{"ongoing-break":n.isOngoing}]),style:te({left:`${n.left}%`,width:`${n.width}%`})},null,6))),128))]),e("div",Yt,[e("div",Jt,[e("span",Zt,l(B.value),1),e("span",{class:x(["progress-status",r.value])},l(F.value),3)]),e("div",_t,[e("span",es,l(ge.value),1)])])])])]),e("div",ts,[s[10]||(s[10]=e("h3",{class:"section-title"},"Quick Actions",-1)),e("div",ss,[(c(!0),g(q,null,J(N.value,n=>(c(),g("button",{key:n.id,onClick:m=>A(n),class:x(["action-button",`action-${n.id}`])},[n.id==="my-assessments"?(c(),g("svg",ns,s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))):n.id==="work-reports"?(c(),g("svg",os,s[8]||(s[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):n.id==="leaderboard"?(c(),g("svg",rs,s[9]||(s[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]))):w("",!0),e("span",null,l(n.label),1)],10,as))),128))])]),C.value?(c(),g("div",ls,[s[22]||(s[22]=e("h3",{class:"section-title"},"Break Sessions Debug",-1)),e("div",is,[e("div",ds,[s[11]||(s[11]=e("strong",null,"Completed Break Sessions:",-1)),j(" "+l(a.value.completedBreakSessions.length),1)]),e("div",cs,[s[12]||(s[12]=e("strong",null,"Current Break:",-1)),j(" "+l(b.value?"Yes":"No"),1)]),e("div",us,[s[13]||(s[13]=e("strong",null,"Break Start Time:",-1)),j(" "+l(a.value.breakStartTime||"None"),1)]),e("div",ms,[s[14]||(s[14]=e("strong",null,"Current Break Duration:",-1)),j(" "+l(Z.value),1)]),e("div",gs,[s[15]||(s[15]=e("strong",null,"Total Break Time (Computed):",-1)),j(" "+l(K.value),1)]),e("div",bs,[s[16]||(s[16]=e("strong",null,"Clocked In (Dashboard):",-1)),j(" "+l(a.value.clockedIn),1)]),e("div",vs,[s[17]||(s[17]=e("strong",null,"isClockedIn Computed:",-1)),j(" "+l(u.value),1)]),e("div",fs,[s[18]||(s[18]=e("strong",null,"Work Progress %:",-1)),j(" "+l(Math.round(O.value))+"% ",1)]),e("div",hs,[s[19]||(s[19]=e("strong",null,"Progress Width:",-1)),j(" "+l(V.value)+"% ",1)]),e("div",ys,[s[20]||(s[20]=e("strong",null,"Clock In Time:",-1)),j(" "+l(a.value.clockInTime||"None"),1)]),e("div",ks,[s[21]||(s[21]=e("strong",null,"Break Sessions:",-1)),e("pre",null,l(JSON.stringify(a.value.completedBreakSessions,null,2)),1)]),e("button",{onClick:ae,class:"debug-button"}," Refresh from FloatingWidget ")])])):w("",!0),e("div",xs,[$(je,{"todays-birthdays":t.birthdayNotifications.todaysBirthdays,"upcoming-birthdays":t.birthdayNotifications.upcomingBirthdays,stats:t.birthdayNotifications.stats},null,8,["todays-birthdays","upcoming-birthdays","stats"])])]))}},ws=Me(ps,[["__scopeId","data-v-1df7de1b"]]),Ss={class:"p-6 text-center"},$s={class:"mb-4"},Ts={class:"w-20 h-20 bg-gradient-to-br from-pink-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-3"},Bs={class:"text-2xl font-bold text-purple-700"},Ds={class:"text-xl font-semibold text-gray-900 mb-1"},As={class:"text-gray-600 text-sm"},Cs={class:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 mb-6"},Is={class:"flex items-center justify-center space-x-2 text-purple-700"},Ms={class:"font-medium"},js={class:"bg-gray-50 px-6 py-4 text-center border-t border-gray-100"},Rs={class:"flex justify-center"},Ps={__name:"BirthdayPopup",props:{show:{type:Boolean,default:!1},employee:{type:Object,required:!0}},emits:["close"],setup(t,{emit:H}){const v=t,S=H,d=W(null);let y=null;const C=D=>D.split(" ").map(u=>u.charAt(0).toUpperCase()).join("").substring(0,2),a=()=>{T()},T=()=>{S("close")};class B{constructor(u){this.canvas=u,this.ctx=u.getContext("2d"),this.particles=[],this.colors=["#ff6b9d","#c44569","#f8b500","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3"],this.isRunning=!1,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}createParticle(u,b){return{x:u||Math.random()*this.canvas.width,y:b||-10,vx:(Math.random()-.5)*8,vy:Math.random()*-8-2,gravity:.3,friction:.99,size:Math.random()*8+4,color:this.colors[Math.floor(Math.random()*this.colors.length)],rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10,life:1,decay:Math.random()*.02+.01,shape:Math.random()>.5?"circle":"square"}}burst(){const u=this.canvas.width/2,b=this.canvas.height/2;for(let F=0;F<50;F++){const I=this.createParticle(u+(Math.random()-.5)*100,b+(Math.random()-.5)*100);I.vx=(Math.random()-.5)*15,I.vy=(Math.random()-.5)*15,this.particles.push(I)}}start(){this.isRunning=!0,this.burst(),this.particleInterval=setInterval(()=>{if(this.particles.length<100)for(let u=0;u<3;u++)this.particles.push(this.createParticle())},100),this.animate()}stop(){this.isRunning=!1,this.particleInterval&&clearInterval(this.particleInterval)}animate(){if(this.isRunning){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let u=this.particles.length-1;u>=0;u--){const b=this.particles[u];if(b.vy+=b.gravity,b.vx*=b.friction,b.vy*=b.friction,b.x+=b.vx,b.y+=b.vy,b.rotation+=b.rotationSpeed,b.life-=b.decay,b.life<=0||b.y>this.canvas.height+50||b.x<-50||b.x>this.canvas.width+50){this.particles.splice(u,1);continue}this.ctx.save(),this.ctx.translate(b.x,b.y),this.ctx.rotate(b.rotation*Math.PI/180),this.ctx.globalAlpha=b.life,this.ctx.fillStyle=b.color,b.shape==="circle"?(this.ctx.beginPath(),this.ctx.arc(0,0,b.size/2,0,Math.PI*2),this.ctx.fill()):this.ctx.fillRect(-b.size/2,-b.size/2,b.size,b.size),this.ctx.restore()}requestAnimationFrame(()=>this.animate())}}}return ke(async()=>{v.show&&(await Se(),d.value&&(y=new B(d.value),y.start()))}),Ae(()=>{y&&y.stop()}),Ne(()=>v.show,async D=>{D?(await Se(),d.value&&!y?(y=new B(d.value),y.start()):y&&y.start()):y&&y.stop()}),(D,u)=>(c(),U(ze,{to:"body"},[t.show?(c(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:a},[e("canvas",{ref_key:"confettiCanvas",ref:d,class:"absolute inset-0 w-full h-full pointer-events-none"},null,512),e("div",{class:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all duration-300 scale-100",onClick:u[0]||(u[0]=he(()=>{},["stop"]))},[u[4]||(u[4]=e("div",{class:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 p-6 text-center text-white relative"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-400/20 via-purple-400/20 to-indigo-400/20"}),e("div",{class:"relative z-10"},[e("div",{class:"text-6xl mb-2 animate-bounce"},"ðŸŽ‰"),e("h2",{class:"text-2xl font-bold mb-1"},"Happy Birthday!"),e("p",{class:"text-pink-100 text-sm"},"Wishing you a wonderful day from the team")])],-1)),e("div",Ss,[e("div",$s,[e("div",Ts,[e("span",Bs,l(C(t.employee.user.name)),1)]),e("h3",Ds,l(t.employee.user.name),1),e("p",As,l(t.employee.job_title||"Team Member"),1)]),e("div",Cs,[e("div",Is,[u[1]||(u[1]=e("span",{class:"text-2xl"},"ðŸŽ‚",-1)),e("span",Ms,l(t.employee.age?`Turning ${t.employee.age} today!`:"Celebrating another year!"),1)])]),u[2]||(u[2]=e("div",{class:"text-gray-600 text-sm mb-6 leading-relaxed"}," Hope your special day is filled with happiness, laughter, and all your favorite things! Thank you for being such an amazing part of our Xonobics family. ðŸŒŸ ",-1)),u[3]||(u[3]=e("div",{class:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-6 border border-blue-100"},[e("div",{class:"flex items-center justify-center space-x-2 text-blue-700 mb-2"},[e("span",{class:"text-lg"},"ðŸŽŠ"),e("span",{class:"font-semibold text-sm"},"From all of us at Xonobics")]),e("p",{class:"text-xs text-blue-600 text-center"}," May this new year of your life bring you joy, success, and wonderful memories! ")],-1)),e("div",{class:"flex justify-center"},[e("button",{onClick:T,class:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-3 rounded-lg font-medium hover:from-pink-600 hover:to-purple-600 transition-all duration-200 shadow-lg"}," Thank You! ðŸŽ‰ ")])]),e("div",js,[e("div",Rs,[$(Ue,{class:"h-12 w-auto opacity-80"})])]),u[5]||(u[5]=e("div",{class:"absolute top-4 left-4 text-yellow-400 animate-pulse"},"âœ¨",-1)),u[6]||(u[6]=e("div",{class:"absolute top-6 right-6 text-pink-400 animate-pulse"},"ðŸŽˆ",-1)),u[7]||(u[7]=e("div",{class:"absolute bottom-4 left-6 text-purple-400 animate-pulse"},"ðŸŽ",-1)),u[8]||(u[8]=e("div",{class:"absolute bottom-6 right-4 text-indigo-400 animate-pulse"},"ðŸŒŸ",-1))])])):w("",!0)]))}},Es=Me(Ps,[["__scopeId","data-v-fbfd257d"]]),Hs={class:"flex space-x-3"},Ns=["onClick","disabled"],zs={key:0,class:"space-y-6"},Ws={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Os={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Vs={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ls={class:"lg:col-span-2 space-y-4"},Fs={class:"grid grid-cols-3 gap-4 text-center"},Us={class:"p-4 bg-yellow-50 rounded-lg"},qs={class:"text-2xl font-bold text-yellow-600"},Ks={class:"p-4 bg-blue-50 rounded-lg"},Xs={class:"text-2xl font-bold text-blue-600"},Gs={class:"p-4 bg-purple-50 rounded-lg"},Qs={class:"text-2xl font-bold text-purple-600"},Ys={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Js={class:"text-center p-4 bg-green-50 rounded-xl border border-green-100"},Zs={class:"text-2xl font-bold text-green-600"},_s={class:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100"},ea={class:"text-2xl font-bold text-orange-600"},ta={class:"text-center p-4 bg-purple-50 rounded-xl border border-purple-100"},sa={class:"text-2xl font-bold text-purple-600"},aa={class:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100"},na={class:"text-2xl font-bold text-blue-600"},oa={class:"lg:col-span-1 space-y-4"},ra={class:"space-y-3"},la={class:"flex items-center"},ia={class:"flex items-center"},da={class:"flex items-center"},ca={class:"flex items-center"},ua={class:"flex items-center"},ma={class:"space-y-3"},ga={class:"flex items-center justify-between"},ba={class:"text-sm font-medium text-gray-900"},va={key:1,class:"employee-layout"},fa={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ha={class:"lg:col-span-3"},ya={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},ka={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xa={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},pa={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},wa={class:"sm:flex sm:items-start"},Sa={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},$a={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},Ta={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},Ba={class:"space-y-4"},Da={class:"text-sm text-gray-600 mb-2"},Aa={class:"text-sm text-gray-600 mb-4"},Ca={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ia=["disabled"],qa={__name:"Dashboard",props:{adminStats:{type:Object,default:()=>({})},managerStats:{type:Object,default:()=>({})},employeeStats:{type:Object,default:()=>({})},pendingApprovals:{type:Array,default:()=>[]},teamMembers:{type:Array,default:()=>[]},teamPerformance:{type:Object,default:()=>({})},teamActivities:{type:Array,default:()=>[]},personalActivities:{type:Array,default:()=>[]},myTasks:{type:Array,default:()=>[]},recentFeedback:{type:Array,default:()=>[]},clockedIn:{type:Boolean,default:!1},currentAttendance:{type:Object,default:null},birthdayData:{type:Object,default:()=>({todaysBirthdays:[],upcomingBirthdays:[],stats:{}})}},setup(t){const H=t,{user:v,roles:S}=Ce(),d=W(!1),y=W(!1),C=W(null),a=W(""),T=W(!1),B=p(()=>{const h=Array.isArray(S.value)&&S.value.includes("Admin");return console.log("Dashboard - User:",v.value),console.log("Dashboard - Roles:",S.value),console.log("Dashboard - Is Admin:",h),h}),D=p(()=>Array.isArray(S.value)&&(S.value.includes("Manager")||S.value.includes("HR"))&&!B.value),u=p(()=>B.value?"Admin Dashboard":D.value?"Manager Dashboard":"My Dashboard"),b=p(()=>B.value?"System overview and administrative management tools":D.value?"Team management and performance overview":"Your personal workspace and activities");p(()=>new Date().toLocaleTimeString());const F=p(()=>{const h=[{id:"refresh",label:"Refresh",icon:"ArrowPathIcon",handler:Z,disabled:d.value}];return B.value&&h.unshift({id:"settings",label:"System Settings",icon:"CogIcon",handler:()=>I("admin.roles.index")},{id:"reports",label:"View Reports",icon:"ChartBarIcon",handler:()=>I("reports.index"),primary:!0}),h}),I=h=>{try{le.visit(route(h))}catch(r){console.error("Navigation error:",r)}},ce=h=>({ArrowPathIcon:Ke,CogIcon:De,ChartBarIcon:ie,ClockIcon:fe})[h]||fe,Z=async()=>{d.value=!0;try{await le.reload({only:["adminStats","managerStats","employeeStats","pendingApprovals"]})}catch(h){console.error("Refresh error:",h)}finally{d.value=!1}},K=()=>{y.value=!1,C.value=null,a.value=""},ue=async()=>{var h,r,M,N;d.value=!0;try{const R=(await Q.get("/api/attendance/current")).data;if(!R||typeof R!="object")throw new Error("Invalid attendance status response");let A;R.clocked_in?A="/api/attendance/clock-out":A="/api/attendance/clock-in";const ae=await Q.post(A,{},{headers:{"X-CSRF-TOKEN":(h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});ae.data.success&&(console.log("ðŸŽ¯ Clock in/out successful, response:",ae.data),await X())}catch(E){console.error("Clock in/out error:",E);let R="Clock in/out failed. Please try again.";if(E.message==="Invalid attendance status response")R="Unable to get attendance status. Please ensure you have an employee profile.";else if(((r=E.response)==null?void 0:r.status)===419){window.location.reload();return}else(N=(M=E.response)==null?void 0:M.data)!=null&&N.message&&(R=E.response.data.message);alert(R)}finally{d.value=!1}},X=async()=>{try{const h=await Q.get("/api/attendance/current");console.log("ðŸ” API status check before reload:",h.data),await le.reload({only:["currentAttendance","clockedIn","employeeStats"],preserveScroll:!0,preserveState:!0}),console.log("âœ… Attendance status updated via Inertia reload")}catch(h){console.error("Failed to update attendance status:",h),window.location.reload()}},O=async h=>{var r,M,N;if(h.route)I(h.route);else if(h.type)try{d.value=!0,h.type==="take-break"?await Q.post("/api/attendance/break-start",{},{headers:{"X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}):h.type==="end-break"&&await Q.post("/api/attendance/break-end",{},{headers:{"X-CSRF-TOKEN":(M=document.querySelector('meta[name="csrf-token"]'))==null?void 0:M.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}}),await X()}catch(E){console.error("Break action failed:",E),((N=E.response)==null?void 0:N.status)===419&&window.location.reload()}finally{d.value=!1}},se=async h=>{try{await Q.patch(route("tasks.toggle",h.id)),await Z()}catch(r){console.error("Task toggle error:",r)}},me=h=>{I("tasks.show",{task:h.id})},V=()=>{var h;(h=H.birthdayData)!=null&&h.currentUserBirthday&&setTimeout(()=>{T.value=!0},1e3)},ge=()=>{T.value=!1};return ke(()=>{V()}),(h,r)=>(c(),U(Ve,null,{header:z(()=>[j(l(u.value),1)]),subtitle:z(()=>[j(l(b.value),1)]),headerActions:z(()=>[e("div",Hs,[(c(!0),g(q,null,J(F.value,M=>(c(),g("button",{key:M.id,onClick:M.handler,disabled:M.disabled,class:x(["inline-flex items-center px-4 py-2 rounded-lg transition-all duration-200 text-sm font-medium",M.primary?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/25":"bg-white/60 text-gray-700 border border-gray-200 hover:bg-white hover:shadow-sm","disabled:opacity-50 disabled:cursor-not-allowed"])},[(c(),U(ye(ce(M.icon)),{class:"w-4 h-4 mr-2"})),j(" "+l(M.label),1)],10,Ns))),128))])]),default:z(()=>{var M,N,E,R;return[B.value?(c(),g("div",zs,[e("div",Ws,[$(L,{value:t.adminStats.totalEmployees,label:"Total Employees",description:"Active workforce",icon:i(Be),variant:"primary",trend:t.adminStats.employeeTrend,route:"employees.index",loading:d.value},null,8,["value","icon","trend","loading"]),$(L,{value:t.adminStats.pendingLeaves,label:"Pending Approvals",description:"Requires attention",icon:i(ve),variant:"warning",status:t.adminStats.pendingLeaves>10?"critical":"warning",statusText:t.adminStats.pendingLeaves>10?"High":"Normal",route:"approvals.index",urgent:t.adminStats.pendingLeaves>15,loading:d.value},null,8,["value","icon","status","statusText","urgent","loading"]),$(L,{value:t.adminStats.pendingAssessments,label:"Pending Assessments",description:"Review status",icon:i(oe),variant:"info",status:t.adminStats.pendingAssessments>5?"warning":"good",statusText:t.adminStats.pendingAssessments>5?"Review":"On Track",route:"assessment-dashboard",loading:d.value},null,8,["value","icon","status","statusText","loading"]),$(L,{value:t.adminStats.systemHealth+"%",label:"System Health",description:"Uptime",icon:i($e),variant:"success",status:t.adminStats.systemHealth>95?"excellent":t.adminStats.systemHealth>85?"good":"warning",statusText:t.adminStats.systemHealth>95?"Excellent":t.adminStats.systemHealth>85?"Good":"Needs Attention",clickable:!1,loading:d.value},null,8,["value","icon","status","statusText","loading"])]),e("div",Os,[$(L,{value:(t.adminStats.attendanceRate||0)+"%",label:"Attendance Rate",description:"This month",icon:i(fe),variant:"info",trend:t.adminStats.attendanceTrend||0,status:(t.adminStats.attendanceRate||0)>95?"excellent":(t.adminStats.attendanceRate||0)>85?"good":"warning",statusText:(t.adminStats.attendanceRate||0)>95?"Excellent":(t.adminStats.attendanceRate||0)>85?"Good":"Needs Attention",route:"attendance.reports",loading:d.value},null,8,["value","icon","trend","status","statusText","loading"]),$(L,{value:t.adminStats.workReportsCount||0,label:"Work Reports",description:"This month",icon:i(ie),variant:"primary",trend:t.adminStats.workReportsTrend||0,status:(t.adminStats.workReportsCount||0)>50?"excellent":(t.adminStats.workReportsCount||0)>20?"good":"warning",statusText:(t.adminStats.workReportsCount||0)>50?"High Activity":(t.adminStats.workReportsCount||0)>20?"Active":"Low Activity",route:"work-reports.index",loading:d.value},null,8,["value","icon","trend","status","statusText","loading"]),$(L,{value:t.adminStats.successfulCalls||0,label:"Successful Calls",description:"This month",icon:i(qe),variant:"success",trend:t.adminStats.successfulCallsTrend||0,status:(t.adminStats.successfulCalls||0)>100?"excellent":(t.adminStats.successfulCalls||0)>50?"good":"warning",statusText:(t.adminStats.successfulCalls||0)>100?"Excellent":(t.adminStats.successfulCalls||0)>50?"Good":"Needs Focus",route:"work-reports.leaderboard",loading:d.value},null,8,["value","icon","trend","status","statusText","loading"]),$(L,{value:(t.adminStats.avgPerformanceScore||0)+"%",label:"Avg Performance",description:"Team score",icon:i(oe),variant:"info",trend:t.adminStats.performanceTrend||0,status:(t.adminStats.avgPerformanceScore||0)>85?"excellent":(t.adminStats.avgPerformanceScore||0)>70?"good":"warning",statusText:(t.adminStats.avgPerformanceScore||0)>85?"Excellent":(t.adminStats.avgPerformanceScore||0)>70?"Good":"Needs Improvement",route:"performance.reports",loading:d.value},null,8,["value","icon","trend","status","statusText","loading"])]),e("div",Vs,[e("div",Ls,[t.pendingApprovals.length>0?(c(),U(re,{key:0,title:"Pending Approvals Overview",description:"Items requiring your attention",icon:i(ve),iconVariant:"info",variant:"elevated"},{headerActions:z(()=>[e("button",{onClick:r[0]||(r[0]=A=>I("leaves.index")),class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700"}," Manage All Approvals ")]),default:z(()=>[e("div",Fs,[e("div",Us,[e("div",qs,l(t.pendingApprovals.filter(A=>A.type==="leave").length),1),r[9]||(r[9]=e("div",{class:"text-sm text-gray-600"},"Leave Requests",-1))]),e("div",Ks,[e("div",Xs,l(t.pendingApprovals.filter(A=>A.type==="timesheet").length),1),r[10]||(r[10]=e("div",{class:"text-sm text-gray-600"},"Timesheets",-1))]),e("div",Gs,[e("div",Qs,l(t.pendingApprovals.filter(A=>A.type==="competency-assessment").length),1),r[11]||(r[11]=e("div",{class:"text-sm text-gray-600"},"Assessments",-1))])])]),_:1},8,["icon"])):w("",!0),$(re,{title:"Competency Management",description:"Track and manage employee competencies",icon:i(oe),iconVariant:"primary",variant:"elevated"},{headerActions:z(()=>[e("button",{onClick:r[1]||(r[1]=A=>I("assessment-dashboard")),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/25"},[r[12]||(r[12]=j(" View Details ")),$(i(Y),{class:"w-4 h-4 ml-1"})])]),default:z(()=>[e("div",Ys,[e("div",Js,[e("div",Zs,l(t.adminStats.completedAssessmentsThisMonth||0),1),r[13]||(r[13]=e("div",{class:"text-xs text-gray-600 mt-1"},"Completed",-1))]),e("div",_s,[e("div",ea,l(t.adminStats.pendingAssessments||0),1),r[14]||(r[14]=e("div",{class:"text-xs text-gray-600 mt-1"},"Pending",-1))]),e("div",ta,[e("div",sa,l(t.adminStats.activeAssessmentCycles||0),1),r[15]||(r[15]=e("div",{class:"text-xs text-gray-600 mt-1"},"Active Cycles",-1))]),e("div",aa,[e("div",na,l(t.adminStats.averageRating||"-"),1),r[16]||(r[16]=e("div",{class:"text-xs text-gray-600 mt-1"},"Avg Rating",-1))])])]),_:1},8,["icon"])]),e("div",oa,[$(re,{title:"Quick Actions",description:"Common tasks",icon:i(Te),iconVariant:"primary"},{default:z(()=>[e("div",ra,[e("button",{onClick:r[2]||(r[2]=A=>I("competencies.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all group shadow-lg shadow-blue-500/25"},[e("div",la,[$(i(oe),{class:"w-5 h-5 mr-3"}),r[17]||(r[17]=e("span",{class:"font-medium"},"Add Competency",-1))]),$(i(Y),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[3]||(r[3]=A=>I("employees.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ia,[$(i(Be),{class:"w-5 h-5 mr-3"}),r[18]||(r[18]=e("span",{class:"font-medium"},"Manage Employees",-1))]),$(i(Y),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[4]||(r[4]=A=>I("assessment-cycles.create")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",da,[$(i(Te),{class:"w-5 h-5 mr-3"}),r[19]||(r[19]=e("span",{class:"font-medium"},"New Assessment Cycle",-1))]),$(i(Y),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[5]||(r[5]=A=>I("reports.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ca,[$(i(ie),{class:"w-5 h-5 mr-3"}),r[20]||(r[20]=e("span",{class:"font-medium"},"View Reports",-1))]),$(i(Y),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]),e("button",{onClick:r[6]||(r[6]=A=>I("admin.roles.index")),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-gray-100 transition-all group"},[e("div",ua,[$(i(De),{class:"w-5 h-5 mr-3"}),r[21]||(r[21]=e("span",{class:"font-medium"},"Role Management",-1))]),$(i(Y),{class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})])])]),_:1},8,["icon"]),$(je,{"todays-birthdays":t.birthdayData.todaysBirthdays,"upcoming-birthdays":t.birthdayData.upcomingBirthdays,stats:t.birthdayData.stats},null,8,["todays-birthdays","upcoming-birthdays","stats"]),$(re,{title:"System Status",description:"All systems operational",icon:i($e),iconVariant:"success"},{default:z(()=>[e("div",ma,[r[23]||(r[23]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"Database"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Healthy")])],-1)),r[24]||(r[24]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-600"},"API Services"),e("div",{class:"flex items-center"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e("span",{class:"text-sm font-medium text-green-600"},"Online")])],-1)),e("div",ga,[r[22]||(r[22]=e("span",{class:"text-sm text-gray-600"},"Uptime",-1)),e("span",ba,l(t.adminStats.systemUptime)+"%",1)])])]),_:1},8,["icon"])])])])):(c(),g("div",va,[e("div",fa,[e("div",ha,[$(ws,{stats:t.employeeStats,"personal-activities":t.personalActivities,"my-tasks":t.myTasks,"recent-feedback":t.recentFeedback,"clocked-in":t.clockedIn,"current-attendance":t.currentAttendance,"birthday-notifications":t.birthdayData,loading:d.value,onClockInOut:ue,onAction:O,onToggleTask:se,onViewTask:me},null,8,["stats","personal-activities","my-tasks","recent-feedback","clocked-in","current-attendance","birthday-notifications","loading"])])])])),y.value?(c(),g("div",ya,[e("div",ka,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:K}),e("div",xa,[e("div",pa,[e("div",wa,[e("div",Sa,[$(i(ve),{class:"h-6 w-6 text-red-600"})]),e("div",$a,[e("h3",Ta," Reject "+l(((M=C.value)==null?void 0:M.title)||"Request"),1),e("div",Ba,[e("div",null,[e("p",Da,[r[25]||(r[25]=e("strong",null,"Requester:",-1)),j(" "+l((N=C.value)==null?void 0:N.requester),1)]),e("p",Aa,[r[26]||(r[26]=e("strong",null,"Request:",-1)),j(" "+l((E=C.value)==null?void 0:E.description),1)])]),e("div",null,[r[27]||(r[27]=e("label",{for:"rejection-reason",class:"block text-sm font-medium text-gray-700 mb-2"},[j(" Reason for rejection "),e("span",{class:"text-red-500"},"*")],-1)),We(e("textarea",{id:"rejection-reason","onUpdate:modelValue":r[7]||(r[7]=A=>a.value=A),rows:"4",class:"w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a clear reason for rejecting this request...",required:""},null,512),[[Oe,a.value]]),r[28]||(r[28]=e("p",{class:"text-xs text-gray-500 mt-1"}," This reason will be sent to the employee and recorded in the system. ",-1))])])])])]),e("div",Ca,[e("button",{onClick:r[8]||(r[8]=(...A)=>h.confirmRejection&&h.confirmRejection(...A)),disabled:!a.value.trim(),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Reject Request ",8,Ia),e("button",{onClick:K,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0),(R=t.birthdayData)!=null&&R.currentUserBirthday?(c(),U(Es,{key:3,show:T.value,employee:t.birthdayData.currentUserBirthday,onClose:ge},null,8,["show","employee"])):w("",!0)]}),_:1}))}};export{qa as default};
