import{e as z,f as l,Q as s,g as O,o as y,h as b,k as p,u as o,c as v,a as n,F as Q,r as R,t as g,n as q}from"./app-s1Cn4Y4P.js";import{A as H}from"./AuthenticatedLayout-B8gYf7ZU.js";import{u as G,D as J}from"./DetailPage-BUvtdZH2.js";import{I as u}from"./InfoCard-CWDtfRd8.js";import{j as h,a as C,r as A,C as E,f,i as K,n as W}from"./icons-BlpasLIP.js";import{r as X}from"./ChartBarIcon-CPgtCILb.js";import{r as Y}from"./UserGroupIcon-DJFgqAa9.js";import"./useAuth-B_rkd0rr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-D8Z_bNye.js";/* empty css                                                                 */const Z={key:0},ee={class:"h-80 overflow-y-auto border border-neutral-200 rounded-lg bg-white"},te={class:"divide-y divide-neutral-100"},ae={class:"flex items-center space-x-3"},re={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},ne={class:"text-sm font-medium text-primary-700"},ie={class:"font-medium text-neutral-900"},le={class:"text-sm text-neutral-500"},se={class:"flex items-center space-x-2"},de=["onClick"],oe={key:1,class:"text-center py-8"},De={__name:"Show",props:{department:{type:Object,required:!0}},setup(d){const e=d,{hasPermission:N}=G(),c=z(!1),x=l(()=>N("department.edit")),k=l(()=>[{label:"Dashboard",href:route("dashboard")},{label:"People Management",href:"#"},{label:"Departments",href:route("departments.index")},{label:e.department.name,current:!0}]),F=l(()=>{var t;return[{id:"edit-department",label:"Edit Department",icon:h,variant:"primary",priority:"primary",handler:()=>s.visit(route("departments.edit",e.department.id)),permissions:["department.edit"]},{id:"add-employee",label:"Add Employee",icon:C,variant:"secondary",priority:"secondary",handler:()=>s.visit(route("employees.create",{department_id:e.department.id})),permissions:["employee.create"]},{id:"delete-department",label:"Delete Department",icon:A,variant:"error",priority:"secondary",handler:w,permissions:["department.delete"],disabled:(((t=e.department.employees)==null?void 0:t.length)||0)>0}]}),S=l(()=>({name:{label:"Department Name",value:e.department.name,type:"text",editable:!0},code:{label:"Department Code",value:e.department.code,type:"text",editable:!0,emptyText:"No code assigned"},description:{label:"Description",value:e.department.description,type:"textarea",editable:!0,emptyText:"No description provided"},location:{label:"Location",value:e.department.location,type:"text",editable:!0,emptyText:"No location specified"},status:{label:"Status",value:e.department.status||"Active",type:"badge",badgeVariant:_(e.department.status),editable:!0}})),P=l(()=>{var t,a,i,m;return{manager:{label:"Department Manager",value:(a=(t=e.department.manager)==null?void 0:t.user)==null?void 0:a.name,type:"text",emptyText:"No manager assigned"},manager_title:{label:"Manager Title",value:(i=e.department.manager)==null?void 0:i.job_title,type:"text",emptyText:"No title specified"},parent_department:{label:"Parent Department",value:(m=e.department.parent)==null?void 0:m.name,type:"text",emptyText:"No parent department"},budget:{label:"Annual Budget",value:e.department.budget?`$${Number(e.department.budget).toLocaleString()}`:null,type:"text",emptyText:"No budget specified"},established_date:{label:"Established Date",value:e.department.established_date,type:"date"}}}),T=l(()=>{var t,a,i,m;return{total_employees:{label:"Total Employees",value:((t=e.department.employees)==null?void 0:t.length)||0,type:"number"},full_time_employees:{label:"Full-time Employees",value:((a=e.department.employees)==null?void 0:a.filter(r=>r.contract_type==="Full-time").length)||0,type:"number"},part_time_employees:{label:"Part-time Employees",value:((i=e.department.employees)==null?void 0:i.filter(r=>r.contract_type==="Part-time").length)||0,type:"number"},contract_employees:{label:"Contract Employees",value:((m=e.department.employees)==null?void 0:m.filter(r=>r.contract_type==="Contract").length)||0,type:"number"}}}),I=l(()=>[{label:"Department created",value:D(e.department.created_at),icon:E,description:"Initial department record"},{label:"Last updated",value:D(e.department.updated_at),icon:h,description:"Most recent modification"}]),L=l(()=>({id:{label:"Department ID",value:e.department.id,type:"text"},created_at:{label:"Created",value:e.department.created_at,type:"datetime"},updated_at:{label:"Last Modified",value:e.department.updated_at,type:"datetime"}})),M=l(()=>[{id:"view-all-employees",label:"View All",icon:f,variant:"secondary",handler:U,tooltip:`View all employees in ${e.department.name}`}]);l(()=>{var t;return[{id:"edit",label:"Edit Department",icon:h,variant:"primary",handler:()=>s.visit(route("departments.edit",e.department.id)),permissions:["department.edit"]},{id:"add-employee",label:"Add Employee",icon:C,variant:"secondary",handler:()=>s.visit(route("employees.create",{department_id:e.department.id})),permissions:["employee.create"]},{id:"delete",label:"Delete Department",icon:A,variant:"error",handler:w,permissions:["department.delete"],disabled:(((t=e.department.employees)==null?void 0:t.length)||0)>0}]});const V=t=>t.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),j=t=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[t]||"building-office",_=t=>{switch(t==null?void 0:t.toLowerCase()){case"active":return"success";case"inactive":return"error";case"restructuring":return"warning";default:return"success"}},B=t=>{const a="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium";switch(t){case"Full-time":return`${a} bg-green-100 text-green-800`;case"Part-time":return`${a} bg-yellow-100 text-yellow-800`;case"Contract":return`${a} bg-blue-100 text-blue-800`;default:return`${a} bg-neutral-100 text-neutral-800`}},D=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",w=()=>{var t;if((((t=e.department.employees)==null?void 0:t.length)||0)>0){alert("Cannot delete department with employees. Please reassign employees first.");return}confirm(`Are you sure you want to delete ${e.department.name}? This action cannot be undone.`)&&(c.value=!0,s.delete(route("departments.destroy",e.department.id),{onSuccess:()=>{s.visit(route("departments.index"))},onError:()=>{alert("Failed to delete department. Please try again."),c.value=!1},onFinish:()=>{c.value=!1}}))},$=t=>{c.value=!0;const a={[t.field]:t.newValue};s.patch(route("departments.update",e.department.id),a,{preserveScroll:!0,onSuccess:()=>{},onError:i=>{console.error("Failed to update field:",i),alert("Failed to update field. Please try again.")},onFinish:()=>{c.value=!1}})},U=()=>{s.visit(route("employees.index",{filter_department:e.department.id,page:1,per_page:10}))};return(t,a)=>(y(),O(H,null,{default:b(()=>[p(J,{title:d.department.name,subtitle:"Department details and organizational structure",breadcrumbs:k.value,actions:F.value,avatar:{icon:j(d.department.name)},status:{label:d.department.status||"Active",variant:_(d.department.status)},"back-url":t.route("departments.index"),loading:c.value},{primary:b(()=>{var i;return[p(u,{title:"Department Information",description:"Basic details and organizational structure",icon:o(E),data:S.value,"enable-edit-mode":x.value,onFieldUpdate:$,class:"mb-6"},null,8,["icon","data","enable-edit-mode"]),p(u,{title:"Management Structure",description:"Leadership and organizational hierarchy",icon:o(Y),data:P.value,"enable-edit-mode":x.value,onFieldUpdate:$,class:"mb-6"},null,8,["icon","data","enable-edit-mode"]),p(u,{title:"Department Employees",description:`${((i=d.department.employees)==null?void 0:i.length)||0} employees in this department`,icon:o(f),"display-mode":"custom",actions:M.value,class:"mb-6"},{default:b(()=>{var m;return[((m=d.department.employees)==null?void 0:m.length)>0?(y(),v("div",Z,[n("div",ee,[n("div",te,[(y(!0),v(Q,null,R(d.department.employees,r=>(y(),v("div",{key:r.id,class:"flex items-center justify-between p-4 hover:bg-neutral-50 transition-colors"},[n("div",ae,[n("div",re,[n("span",ne,g(V(r.user.name)),1)]),n("div",null,[n("div",ie,g(r.user.name),1),n("div",le,g(r.job_title||"No title"),1)])]),n("div",se,[n("span",{class:q(B(r.contract_type))},g(r.contract_type||"N/A"),3),n("button",{onClick:me=>o(s).visit(t.route("employees.show",r.id)),class:"text-primary-600 hover:text-primary-700 text-sm font-medium"}," View ",8,de)])]))),128))])])])):(y(),v("div",oe,[p(o(f),{class:"w-12 h-12 text-neutral-400 mx-auto mb-3"}),a[1]||(a[1]=n("p",{class:"text-neutral-500"},"No employees assigned to this department",-1)),n("button",{onClick:a[0]||(a[0]=r=>o(s).visit(t.route("employees.create",{department_id:d.department.id}))),class:"mt-4 text-primary-600 hover:text-primary-700 text-sm font-medium"}," Add Employee ")]))]}),_:1},8,["description","icon","actions"]),p(u,{title:"Recent Activity",description:"Latest updates and changes",icon:o(W),data:I.value,"display-mode":"list"},null,8,["icon","data"])]}),secondary:b(()=>[p(u,{title:"Department Statistics",icon:o(X),data:T.value,class:"mb-6"},null,8,["icon","data"]),p(u,{title:"System Information",icon:o(K),data:L.value},null,8,["icon","data"])]),_:1},8,["title","breadcrumbs","actions","avatar","status","back-url","loading"])]),_:1}))}};export{De as default};
