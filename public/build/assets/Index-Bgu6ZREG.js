import{f,g as c,o as n,h as d,k as g,a as t,c as i,F as u,r as m,t as a,i as h,n as _,l as E,Q as y}from"./app-DixlHZOX.js";import{_ as M}from"./AuthenticatedLayout-BEusGIUE.js";import{P as N}from"./PageLayout-CkpU7DKH.js";import{_ as V}from"./SimpleInfoCard-B6VSdKkQ.js";import{B as $}from"./BaseSelect-DulkbxTI.js";import{B as j}from"./BaseButton-DCdbA6e5.js";import"./useAuth-DxZnZv8D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-8qB1uFu8.js";import"./Icon-BrpKIVMT.js";import"./useAccessibility-Cx4wiD28.js";import"./PageHeader-BJBKVBio.js";/* empty css                                                                   *//* empty css                                                                   */import"./ChartBarIcon-60exmwIW.js";import"./UserGroupIcon-d64OVbdC.js";/* empty css                                                                   *//* empty css                                                                   */const z={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},D={class:"bg-white rounded-lg shadow-sm border border-neutral-200"},H={class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-neutral-200"},L={class:"bg-white divide-y divide-neutral-200"},P={class:"px-6 py-4 whitespace-nowrap"},Q={class:"flex items-center"},T={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},Y={class:"text-sm font-semibold text-primary-700"},G={class:"ml-4"},J={class:"text-sm font-medium text-neutral-900"},O={class:"text-sm text-neutral-500"},q={class:"text-xs text-neutral-400"},K={class:"px-6 py-4 whitespace-nowrap"},W={class:"flex flex-wrap gap-1"},X={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-800"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-900"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},oe={class:"flex flex-col space-y-2"},se={key:1,class:"text-xs text-gray-500 italic"},we={__name:"Index",props:{users:Array,availableRoles:Array,currentUserId:Number},setup(p){const l=p,v=[{name:"Dashboard",href:route("dashboard")},{name:"Administration",href:"#"},{name:"Role Management",href:route("admin.roles.index")}],b=f(()=>l.availableRoles.map(o=>({value:o,label:o}))),w=f(()=>{const o=l.availableRoles.map(e=>{const r=l.users.filter(S=>S.roles.includes(e)).length;return{name:e,count:r,icon:k(e),color:A(e)}}),s=l.users.filter(e=>e.roles.length===0).length;return s>0&&o.push({name:"No Role",count:s,icon:"UserIcon",color:"neutral"}),o});function R(o){return o.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2)}function k(o){return{Admin:"ShieldCheckIcon",HR:"UserGroupIcon",Manager:"BriefcaseIcon",Employee:"UserIcon"}[o]||"UserIcon"}function A(o){return{Admin:"red",HR:"blue",Manager:"green",Employee:"yellow"}[o]||"neutral"}function U(o){return{Admin:"bg-red-100 text-red-800",HR:"bg-blue-100 text-blue-800",Manager:"bg-green-100 text-green-800",Employee:"bg-yellow-100 text-yellow-800"}[o]||"bg-neutral-100 text-neutral-800"}function x(o){return!(o.id===l.currentUserId&&o.roles.includes("Admin"))}function C(o){return o.id===l.currentUserId&&o.roles.includes("Admin")?"Cannot remove your own Admin role":""}function I(o,s){if(!s)return;const e=l.users.find(r=>r.id===o);if(o===l.currentUserId&&(e!=null&&e.roles.includes("Admin"))&&s!=="Admin"){alert("You cannot remove your own Admin role.");return}y.post(route("admin.roles.assign",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:r=>{console.error("Error assigning role:",r)}})}function B(o,s){if(s){if(o===l.currentUserId&&s==="Admin"){alert("You cannot remove your own Admin role.");return}confirm(`Are you sure you want to remove the ${s} role from this user?`)&&y.post(route("admin.roles.remove",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error("Error removing role:",e)}})}}return(o,s)=>(n(),c(M,null,{default:d(()=>[g(N,{title:"Role Management",subtitle:"Assign and manage user roles in the system",breadcrumbs:v},{default:d(()=>[t("div",z,[(n(!0),i(u,null,m(w.value,e=>(n(),c(V,{key:e.name,title:e.name,value:e.count,subtitle:`${e.count===1?"user":"users"} with this role`,icon:e.icon,color:e.color},null,8,["title","value","subtitle","icon","color"]))),128))]),t("div",D,[s[1]||(s[1]=t("div",{class:"px-6 py-4 border-b border-neutral-200"},[t("h3",{class:"text-lg font-semibold text-neutral-900"},"User Role Assignments"),t("p",{class:"text-sm text-neutral-600 mt-1"},"Manage roles for all employees in the system")],-1)),t("div",H,[t("table",F,[s[0]||(s[0]=t("thead",{class:"bg-neutral-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Employee "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Current Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Job Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Role Management ")])],-1)),t("tbody",L,[(n(!0),i(u,null,m(p.users,e=>(n(),i("tr",{key:e.id,class:"hover:bg-neutral-50"},[t("td",P,[t("div",Q,[t("div",T,[t("span",Y,a(R(e.name)),1)]),t("div",G,[t("div",J,a(e.name),1),t("div",O,a(e.email),1),t("div",q,"ID: "+a(e.employee_code),1)])])]),t("td",K,[t("div",W,[e.roles.length===0?(n(),i("span",X," No Role ")):h("",!0),(n(!0),i(u,null,m(e.roles,r=>(n(),i("span",{key:r,class:_([U(r),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(r),3))),128))])]),t("td",Z,a(e.job_title),1),t("td",ee,[t("span",{class:_([e.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},a(e.status),3)]),t("td",te,[t("div",oe,[g($,{"model-value":e.roles[0]||"",options:b.value,placeholder:"Select role",class:"w-full min-w-[140px]","onUpdate:modelValue":r=>I(e.id,r)},null,8,["model-value","options","onUpdate:modelValue"]),e.roles.length>0&&x(e)?(n(),c(j,{key:0,variant:"outline",size:"sm",onClick:r=>B(e.id,e.roles[0]),class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 w-full"},{default:d(()=>[E(" Remove "+a(e.roles[0]),1)]),_:2},1032,["onClick"])):e.roles.length>0&&!x(e)?(n(),i("div",se,a(C(e)),1)):h("",!0)])])]))),128))])])])])]),_:1})]),_:1}))}};export{we as default};
