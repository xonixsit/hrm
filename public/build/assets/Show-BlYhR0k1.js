import{f as _,e as z,Q as k,g,o as l,h as x,k as i,c as n,i as u,a as e,t as a,u as d,S as f,l as y,n as p,q as H,F as b,r as h}from"./app-P3ai_FPP.js";import{r as P,A as Q}from"./AuthenticatedLayout-57wb5fHe.js";import{P as q}from"./PageLayout-CZrubBMb.js";import{c as I,j as S,l as G,p as J,a as K,e as W}from"./icons-CxJp_YTO.js";import"./useAuth-DqgVkOBX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAccessibility-Ca6U3cUX.js";import"./PageHeader.vue_vue_type_style_index_0_scoped_cac8c3e5_lang-D7i-RT8Q.js";import"./PageHeader-Cs2QLtnN.js";import"./Icon-JKWk0IGl.js";/* empty css                                                                   */const X={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md"},Y={class:"text-sm text-green-800"},Z={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},ee={class:"text-sm text-red-800"},te={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},se={class:"lg:col-span-2 space-y-6"},re={class:"bg-white rounded-lg shadow-sm border border-gray-200"},oe={class:"p-6"},le={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ae={class:"mt-1"},ne={class:"mt-1"},ce={class:"flex items-center"},de={class:"flex-1 bg-gray-200 rounded-full h-2 mr-3"},ie={class:"text-sm font-medium text-gray-900"},ue={class:"mt-1 text-sm text-gray-900"},me={class:"mt-1 text-sm text-gray-900"},ye={class:"mt-1 text-sm text-gray-900"},ge={class:"mt-1 text-sm text-gray-900"},xe={key:0,class:"mt-6"},fe={class:"mt-1 text-sm text-gray-700"},pe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},be={class:"overflow-x-auto"},he={class:"min-w-full divide-y divide-gray-200"},ve={class:"bg-white divide-y divide-gray-200"},we={class:"px-6 py-4 whitespace-nowrap"},_e={class:"text-sm font-medium text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Se={class:"text-sm text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},$e={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap"},je={key:0,class:"flex items-center"},Ee={class:"flex"},Te={class:"ml-2 text-sm text-gray-600"},Le={key:1,class:"text-sm text-gray-400"},Pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Fe={class:"flex items-center justify-end space-x-2"},Be={key:0,class:"px-6 py-3 border-t border-gray-200"},Ne={class:"flex items-center justify-between"},Ve={class:"text-sm text-gray-700"},Me={class:"flex space-x-1"},Oe={class:"space-y-6"},Re={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ue={class:"p-6 space-y-3"},ze={key:0,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-md"},He={class:"flex"},Qe={class:"text-sm text-yellow-800"},qe=["disabled"],Ie={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ge={class:"p-6 space-y-3"},Je=["disabled"],Ke={class:"bg-white rounded-lg shadow-sm border border-gray-200"},We={class:"p-6"},Xe={class:"space-y-2"},dt={__name:"Show",props:{cycle:Object,assessments:Object},setup(r){const c=r,F=_(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Assessment Dashboard",href:route("assessment-dashboard")},{label:"Assessment Cycles",href:route("assessment-cycle-manager")},{label:c.cycle.name,href:null}]),B=_(()=>{const s=[{label:"Back to Cycles",href:route("assessment-cycle-manager"),icon:I,variant:"secondary"}];return(c.cycle.status==="planned"||c.cycle.status==="draft")&&s.push({label:"Edit Cycle",href:route("assessment-cycles.edit",c.cycle.id),icon:S,variant:"secondary"}),c.cycle.status==="planned"&&!v.value&&s.push({label:"Start Cycle",onClick:C,icon:P,variant:"primary",disabled:m.value}),s}),m=z(!1),v=_(()=>new Date(c.cycle.start_date)>new Date),C=()=>{console.log("Start cycle clicked for:",c.cycle.name),confirm(`Are you sure you want to start the "${c.cycle.name}" assessment cycle?`)&&(console.log("Starting cycle..."),m.value=!0,k.post(route("assessment-cycles.start",c.cycle.id),{},{onSuccess:s=>{console.log("Start cycle success:",s)},onError:s=>{console.error("Start cycle error:",s)},onFinish:()=>{console.log("Start cycle finished"),m.value=!1}}))},N=()=>{console.log("Complete cycle clicked for:",c.cycle.name),confirm(`Are you sure you want to complete the "${c.cycle.name}" assessment cycle?`)&&(console.log("Completing cycle..."),m.value=!0,k.post(route("assessment-cycles.complete",c.cycle.id),{},{onSuccess:s=>{console.log("Complete cycle success:",s)},onError:s=>{console.error("Complete cycle error:",s)},onFinish:()=>{console.log("Complete cycle finished"),m.value=!1}}))},V=()=>{const s=new URLSearchParams({assessment_cycle_id:c.cycle.id,assessment_type:"manager"}),t=`${route("competency-assessments.create")}?${s.toString()}`;k.visit(t)},M=s=>({planned:"Planned",active:"Active",completed:"Completed",cancelled:"Cancelled"})[s]||s,O=s=>({planned:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",A=s=>({self:"Self Assessment",manager:"Manager Assessment",peer:"Peer Assessment",360:"360Â° Feedback"})[s]||s,R=s=>({draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected"})[s]||s,U=s=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",w=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(s,t)=>(l(),g(Q,null,{default:x(()=>[i(q,{title:r.cycle.name,subtitle:"Assessment cycle details and progress",breadcrumbs:F.value,actions:B.value},{default:x(()=>{var $,D;return[($=s.$page.props.flash)!=null&&$.success?(l(),n("div",X,[e("p",Y,a(s.$page.props.flash.success),1)])):u("",!0),(D=s.$page.props.flash)!=null&&D.error?(l(),n("div",Z,[e("p",ee,a(s.$page.props.flash.error),1)])):u("",!0),r.cycle.status==="planned"?(l(),g(d(f),{key:2,href:s.route("assessment-cycles.edit",r.cycle.id),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[i(d(S),{class:"w-4 h-4 mr-2"}),t[0]||(t[0]=y(" Edit Cycle "))]),_:1,__:[0]},8,["href"])):u("",!0),e("div",te,[e("div",se,[e("div",re,[t[8]||(t[8]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Cycle Overview")],-1)),e("div",oe,[e("dl",le,[e("div",null,[t[1]||(t[1]=e("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("dd",ae,[e("span",{class:p([O(r.cycle.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(M(r.cycle.status)),3)])]),e("div",null,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500"},"Progress",-1)),e("dd",ne,[e("div",ce,[e("div",de,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:H({width:`${r.cycle.completion_percentage||0}%`})},null,4)]),e("span",ie,a(r.cycle.completion_percentage||0)+"%",1)])])]),e("div",null,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500"},"Start Date",-1)),e("dd",ue,a(w(r.cycle.start_date)),1)]),e("div",null,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500"},"End Date",-1)),e("dd",me,a(w(r.cycle.end_date)),1)]),e("div",null,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500"},"Participants",-1)),e("dd",ye,a(r.cycle.participant_count||0),1)]),e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Total Assessments",-1)),e("dd",ge,a(r.cycle.assessment_count||0),1)])]),r.cycle.description?(l(),n("div",xe,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("dd",fe,a(r.cycle.description),1)])):u("",!0)])]),e("div",pe,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Assessments")],-1)),e("div",be,[e("table",he,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Competency "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ve,[(l(!0),n(b,null,h(r.assessments.data,o=>{var j,E,T;return l(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",we,[e("div",_e,a(((E=(j=o.employee)==null?void 0:j.user)==null?void 0:E.name)||"Unknown"),1)]),e("td",ke,[e("div",Se,a((T=o.competency)==null?void 0:T.name),1)]),e("td",Ce,[e("span",Ae,a(A(o.assessment_type)),1)]),e("td",$e,[e("span",{class:p([U(o.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(R(o.status)),3)]),e("td",De,[o.rating?(l(),n("div",je,[e("div",Ee,[(l(),n(b,null,h(5,L=>i(d(G),{key:L,class:p([L<=o.rating?"text-yellow-400":"text-gray-300","h-4 w-4"])},null,8,["class"])),64))]),e("span",Te,a(o.rating)+"/5",1)])):(l(),n("span",Le,"Not rated"))]),e("td",Pe,[e("div",Fe,[o.status==="draft"?(l(),g(d(f),{key:0,href:s.route("competency-assessments.evaluate",o.id),class:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[i(d(S),{class:"w-3 h-3 mr-1"}),t[9]||(t[9]=y(" Assess "))]),_:2,__:[9]},1032,["href"])):(l(),g(d(f),{key:1,href:s.route("competency-assessments.show",o.id),class:"text-blue-600 hover:text-blue-900 text-sm"},{default:x(()=>t[10]||(t[10]=[y(" View ")])),_:2,__:[10]},1032,["href"]))])])])}),128))])])]),r.assessments.links?(l(),n("div",Be,[e("div",Ne,[e("div",Ve," Showing "+a(r.assessments.from)+" to "+a(r.assessments.to)+" of "+a(r.assessments.total)+" results ",1),e("div",Me,[(l(!0),n(b,null,h(r.assessments.links,o=>(l(),g(d(f),{key:o.label,href:o.url,class:p(["px-3 py-2 text-sm font-medium rounded-md",o.active?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"]),innerHTML:o.label},null,8,["href","class","innerHTML"]))),128))])])])):u("",!0)])]),e("div",Oe,[r.cycle.status==="planned"?(l(),n("div",Re,[t[15]||(t[15]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Actions")],-1)),e("div",Ue,[v.value?(l(),n("div",ze,[e("div",He,[i(d(J),{class:"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0"}),e("div",Qe,[t[13]||(t[13]=e("p",{class:"font-medium"},"Scheduled Start",-1)),e("p",null,"This cycle is scheduled to start on "+a(w(r.cycle.start_date))+".",1),t[14]||(t[14]=e("p",{class:"mt-1 text-xs"},"As an admin, you can start it early if needed.",-1))])])])):u("",!0),e("button",{onClick:C,disabled:m.value,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},[i(d(P),{class:"w-4 h-4 mr-2"}),y(" "+a(v.value?"Start Early":"Start Cycle"),1)],8,qe)])])):u("",!0),r.cycle.status==="active"?(l(),n("div",Ie,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Actions")],-1)),e("div",Ge,[e("button",{onClick:V,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[i(d(K),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=y(" Create Assessment "))]),e("button",{onClick:N,disabled:m.value,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[i(d(W),{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=y(" Complete Cycle "))],8,Je)])])):u("",!0),e("div",Ke,[t[19]||(t[19]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Assessment Types")],-1)),e("div",We,[e("div",Xe,[(l(!0),n(b,null,h(r.cycle.assessment_types,o=>(l(),n("span",{key:o,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2 mb-2"},a(A(o)),1))),128))])])])])])]}),_:1},8,["title","breadcrumbs","actions"])]),_:1}))}};export{dt as default};
