import{e as E,f as m,z as W,B as X,c as n,o as r,i as l,F as A,r as _,n as f,g,s as P,t as y,a as o,k as z,u as B,h as F,T as Y,l as Z,S as ee,A as N,Q as se}from"./app-CcqTUaOx.js";import{L as S}from"./InfoCard-eTXxIBwZ.js";import{u as te}from"./usePermissions-BNLhb1TD.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{x as re,c as ne,k as ae}from"./Icon-B93A1H9x.js";const le={key:0,class:"flex items-center space-x-2"},ie=["onClick","disabled","title"],oe={key:2},ce={key:1,class:"flex items-center space-x-2"},ue=["onClick","disabled","title"],de={key:2},me=["disabled","aria-expanded"],fe={class:"py-1",role:"none"},ge=["onClick","disabled"],ye={key:2,class:"ml-auto text-xs text-neutral-400"},be={key:3,class:"text-xs text-neutral-500"},he={__name:"ActionBar",props:{actions:{type:Array,default:()=>[],validator:e=>e.every(h=>h.id&&(h.label||h.icon)&&typeof h.handler=="function")},layout:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","compact"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},loading:{type:Boolean,default:!1},loadingActions:{type:Array,default:()=>[]},maxPrimaryActions:{type:Number,default:3},maxSecondaryActions:{type:Number,default:2},requiredPermissions:{type:Array,default:()=>[]},requireAllPermissions:{type:Boolean,default:!1}},emits:["action"],setup(e,{emit:h}){const a=e,j=h,{hasAnyPermission:v,hasAllPermissions:x}=te(),p=E(!1),w=E(null),q=m(()=>{const s="action-bar flex items-center",u={horizontal:"space-x-3",vertical:"flex-col space-y-2",compact:"space-x-1"},t={sm:"text-sm",md:"",lg:"text-lg"};return`${s} ${u[a.layout]} ${t[a.size]}`}),i=m(()=>a.actions.filter(s=>s.permissions&&s.permissions.length&&!(s.requireAllPermissions?x(s.permissions):v(s.permissions))?!1:typeof s.visible=="function"?s.visible():s.visible!==!1)),k=m(()=>i.value.filter(s=>s.priority==="primary").slice(0,a.maxPrimaryActions)),d=m(()=>i.value.filter(s=>s.priority==="secondary"||!s.priority).slice(0,a.maxSecondaryActions)),C=m(()=>{const s=i.value.filter(c=>c.priority==="primary").slice(a.maxPrimaryActions),u=i.value.filter(c=>c.priority==="secondary"||!c.priority).slice(a.maxSecondaryActions),t=i.value.filter(c=>c.priority==="dropdown");return[...s,...u,...t]}),R=m(()=>{const s="inline-flex items-center justify-center p-2 rounded-md text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",u=a.loading?"opacity-50 cursor-not-allowed":"";return`${s} ${u}`}),T=m(()=>"absolute right-0 z-10 mt-2 w-56 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"),U=m(()=>a.requiredPermissions.length>0),G=m(()=>U.value?a.requireAllPermissions?x(a.requiredPermissions):v(a.requiredPermissions):!0),O=(s,u="primary")=>{const t="inline-flex items-center px-3 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",c={primary:{primary:"border-transparent text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",secondary:"border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50 focus:ring-primary-500",success:"border-transparent text-white bg-success-600 hover:bg-success-700 focus:ring-success-500",warning:"border-transparent text-white bg-warning-600 hover:bg-warning-700 focus:ring-warning-500",error:"border-transparent text-white bg-error-600 hover:bg-error-700 focus:ring-error-500"},secondary:{primary:"border-primary-300 text-primary-700 bg-primary-50 hover:bg-primary-100 focus:ring-primary-500",secondary:"border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50 focus:ring-neutral-500",success:"border-success-300 text-success-700 bg-success-50 hover:bg-success-100 focus:ring-success-500",warning:"border-warning-300 text-warning-700 bg-warning-50 hover:bg-warning-100 focus:ring-warning-500",error:"border-error-300 text-error-700 bg-error-50 hover:bg-error-100 focus:ring-error-500"}},$={sm:"px-2 py-1 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2 text-base"},L=s.disabled||a.loading||b(s.id)?"opacity-50 cursor-not-allowed":"",J=s.variant||"primary",K=c[u][J]||c[u].primary;return`${t} ${K} ${$[a.size]} ${L}`},M=s=>{const u="group flex items-center w-full px-4 py-2 text-sm text-left hover:bg-neutral-100 focus:outline-none focus:bg-neutral-100 transition-colors duration-200",t={error:"text-error-700 hover:bg-error-50 focus:bg-error-50",warning:"text-warning-700 hover:bg-warning-50 focus:bg-warning-50",success:"text-success-700 hover:bg-success-50 focus:bg-success-50"},c=s.disabled||a.loading||b(s.id)?"opacity-50 cursor-not-allowed":"",$=s.variant,L=$&&t[$]?t[$]:"text-neutral-700";return`${u} ${L} ${c}`},b=s=>a.loadingActions.includes(s),D=s=>{if(!(s.disabled||a.loading||b(s.id))){if(s.permissions&&s.permissions.length&&!(s.requireAllPermissions?x(s.permissions):v(s.permissions))){console.warn(`Action ${s.id} blocked: insufficient permissions`);return}typeof s.handler=="function"&&s.handler(),j("action",s)}},Q=s=>{D(s),p.value=!1},H=()=>{a.loading||(p.value=!p.value)},V=s=>{w.value&&!w.value.contains(s.target)&&(p.value=!1)};return W(()=>{document.addEventListener("click",V)}),X(()=>{document.removeEventListener("click",V)}),(s,u)=>(r(),n("div",{class:f(q.value)},[k.value.length?(r(),n("div",le,[(r(!0),n(A,null,_(k.value,t=>(r(),n("button",{key:t.id,onClick:c=>D(t),disabled:t.disabled||e.loading||b(t.id),class:f(O(t,"primary")),title:t.tooltip},[b(t.id)?(r(),g(S,{key:0,size:"sm",class:"mr-2"})):t.icon?(r(),g(P(t.icon),{key:1,class:f(["w-4 h-4",{"mr-2":t.label}])},null,8,["class"])):l("",!0),t.label?(r(),n("span",oe,y(t.label),1)):l("",!0)],10,ie))),128))])):l("",!0),d.value.length?(r(),n("div",ce,[(r(!0),n(A,null,_(d.value,t=>(r(),n("button",{key:t.id,onClick:c=>D(t),disabled:t.disabled||e.loading||b(t.id),class:f(O(t,"secondary")),title:t.tooltip},[b(t.id)?(r(),g(S,{key:0,size:"sm",class:"mr-2"})):t.icon?(r(),g(P(t.icon),{key:1,class:f(["w-4 h-4",{"mr-2":t.label}])},null,8,["class"])):l("",!0),t.label?(r(),n("span",de,y(t.label),1)):l("",!0)],10,ue))),128))])):l("",!0),C.value.length?(r(),n("div",{key:2,class:"relative",ref_key:"dropdownRef",ref:w},[o("button",{onClick:H,disabled:e.loading,class:f(R.value),"aria-expanded":p.value,"aria-haspopup":"true"},[z(B(re),{class:"w-4 h-4"})],10,me),z(Y,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[p.value?(r(),n("div",{key:0,class:f(T.value),role:"menu","aria-orientation":"vertical"},[o("div",fe,[(r(!0),n(A,null,_(C.value,t=>(r(),n("button",{key:t.id,onClick:c=>Q(t),disabled:t.disabled||e.loading||b(t.id),class:f(M(t)),role:"menuitem"},[b(t.id)?(r(),g(S,{key:0,size:"sm",class:"mr-3"})):t.icon?(r(),g(P(t.icon),{key:1,class:"w-4 h-4 mr-3"})):l("",!0),o("span",null,y(t.label),1),t.shortcut?(r(),n("span",ye,y(t.shortcut),1)):l("",!0)],10,ge))),128))])],2)):l("",!0)]),_:1})],512)):l("",!0),U.value&&!G.value?(r(),n("div",be," Insufficient permissions ")):l("",!0)],2))}},pe=I(he,[["__scopeId","data-v-aae129fc"]]),ve={class:"detail-page"},xe={class:"detail-page-header bg-white border-b border-neutral-200 px-6 py-4 mb-6"},we={class:"flex items-center justify-between"},ke={class:"flex items-center space-x-4"},Ce=["aria-label"],$e={class:"min-w-0 flex-1"},Ae={class:"flex items-center space-x-3"},_e={key:0,class:"flex-shrink-0 w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"},Pe={key:1,class:"flex-shrink-0"},Be=["src","alt"],Se={key:1,class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},ze={class:"text-sm font-semibold text-primary-700"},je={class:"min-w-0 flex-1"},qe={class:"text-2xl font-bold text-neutral-900 truncate"},De={key:0,class:"text-sm text-neutral-600 mt-1"},Le={key:2,class:"flex-shrink-0"},Ne={key:0,class:"flex mt-2","aria-label":"Breadcrumb"},Ue={class:"flex items-center space-x-2 text-sm"},Oe={class:"flex items-center"},Ve=["aria-current"],Ee={class:"detail-page-content px-6 pb-6"},Fe={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10"},Ie={__name:"DetailPage",props:{title:{type:String,required:!0},subtitle:{type:String,default:null},icon:{type:[Object,Function],default:null},avatar:{type:Object,default:null,validator:e=>e?typeof e=="object"&&(e.src||e.initials):!0},status:{type:Object,default:null,validator:e=>e?typeof e=="object"&&e.label:!0},breadcrumbs:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},layout:{type:String,default:"two-column",validator:e=>["single-column","two-column","three-column"].includes(e)},showBackButton:{type:Boolean,default:!0},backButtonLabel:{type:String,default:"Go back"},backUrl:{type:String,default:null},loading:{type:Boolean,default:!1}},emits:["back"],setup(e,{emit:h}){const a=e,j=h,v=m(()=>{const i="grid gap-6";switch(a.layout){case"single-column":return`${i} grid-cols-1`;case"two-column":return`${i} grid-cols-1 lg:grid-cols-3`;case"three-column":return`${i} grid-cols-1 md:grid-cols-2 lg:grid-cols-3`;default:return`${i} grid-cols-1 lg:grid-cols-3`}}),x=m(()=>{switch(a.layout){case"single-column":return"col-span-1";case"two-column":return"lg:col-span-2";case"three-column":return"md:col-span-1 lg:col-span-2";default:return"lg:col-span-2"}}),p=m(()=>{switch(a.layout){case"single-column":return"col-span-1";case"two-column":return"lg:col-span-1";case"three-column":return"md:col-span-1 lg:col-span-1";default:return"lg:col-span-1"}}),w=i=>{const k="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",d={success:"bg-success-100 text-success-800",warning:"bg-warning-100 text-warning-800",error:"bg-error-100 text-error-800",info:"bg-info-100 text-info-800",neutral:"bg-neutral-100 text-neutral-800",primary:"bg-primary-100 text-primary-800"};return`${k} ${d[i.variant]||d.neutral}`},q=()=>{a.backUrl?se.visit(a.backUrl):(j("back"),a.backUrl||window.history.back())};return(i,k)=>(r(),n("div",ve,[o("div",xe,[o("div",we,[o("div",ke,[e.showBackButton?(r(),n("button",{key:0,onClick:q,class:"inline-flex items-center p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200","aria-label":e.backButtonLabel},[z(B(ne),{class:"w-5 h-5"})],8,Ce)):l("",!0),o("div",$e,[o("div",Ae,[e.icon?(r(),n("div",_e,[(r(),g(P(e.icon),{class:"w-6 h-6 text-primary-600"}))])):e.avatar?(r(),n("div",Pe,[e.avatar.src?(r(),n("img",{key:0,src:e.avatar.src,alt:e.avatar.alt||e.title,class:"w-10 h-10 rounded-full object-cover"},null,8,Be)):(r(),n("div",Se,[o("span",ze,y(e.avatar.initials),1)]))])):l("",!0),o("div",je,[o("h1",qe,y(e.title),1),e.subtitle?(r(),n("p",De,y(e.subtitle),1)):l("",!0)]),e.status?(r(),n("div",Le,[o("span",{class:f(w(e.status))},y(e.status.label),3)])):l("",!0)]),e.breadcrumbs&&e.breadcrumbs.length?(r(),n("nav",Ne,[o("ol",Ue,[(r(!0),n(A,null,_(e.breadcrumbs,(d,C)=>(r(),n("li",{key:C},[o("div",Oe,[C>0?(r(),g(B(ae),{key:0,class:"w-4 h-4 text-neutral-400 mr-2"})):l("",!0),d.href&&!d.current?(r(),g(B(ee),{key:1,href:d.href,class:"text-neutral-500 hover:text-neutral-700 transition-colors duration-200"},{default:F(()=>[Z(y(d.label),1)]),_:2},1032,["href"])):(r(),n("span",{key:2,class:"text-neutral-900 font-medium","aria-current":d.current?"page":void 0},y(d.label),9,Ve))])]))),128))])])):l("",!0)])]),e.actions&&e.actions.length?(r(),g(pe,{key:0,actions:e.actions,loading:e.loading,class:"flex-shrink-0 ml-6"},null,8,["actions","loading"])):l("",!0)])]),o("div",Ee,[o("div",{class:f(v.value)},[o("div",{class:f(x.value)},[N(i.$slots,"primary",{},void 0,!0),N(i.$slots,"default",{},void 0,!0)],2),i.$slots.secondary?(r(),n("div",{key:0,class:f(p.value)},[N(i.$slots,"secondary",{},void 0,!0)],2)):l("",!0)],2)]),e.loading?(r(),n("div",Fe,[z(S,{size:"lg"})])):l("",!0)]))}},He=I(Ie,[["__scopeId","data-v-f52f1f31"]]);export{He as D};
