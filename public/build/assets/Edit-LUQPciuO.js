import{M as $,x as I,f as y,g as f,o as a,h as _,k as u,a as e,d as j,c as i,i as l,u as s,t as o,w as x,l as m,b as w,j as k}from"./app-BP0mJPoz.js";import{_ as z}from"./AuthenticatedLayout-CDSONXsj.js";import{P as F}from"./PageLayout-CR_V_dMg.js";import{C as H}from"./ContentCard-B3pCgLpq.js";import{C}from"./ContentSection-DBEbHLtf.js";import{p as b,e as g,h as T,i as N,c as O}from"./Icon-BHWzvrQ1.js";import"./useAuth-nbMsfpWI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-pPLbGU3W.js";import"./useAccessibility-BaMtWr5G.js";import"./PageHeader-Cm8t4zMh.js";/* empty css                                                                   *//* empty css                                                                   *//* empty css                                                                    *//* empty css                                                                       */const Q={key:0,class:"bg-warning-50 border border-warning-200 rounded-md p-4"},W={class:"flex"},G={class:"text-sm text-warning-700 mt-1"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={key:0,class:"text-error-600 text-sm mt-1"},X={class:"relative"},Y={key:0,class:"text-error-600 text-sm mt-1"},Z={key:1,class:"text-warning-600 text-sm mt-1 flex items-center"},ee={class:"mt-6"},te={key:0,class:"text-error-600 text-sm mt-1"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},re={class:"space-y-6"},ae={class:"flex items-start"},oe={class:"flex items-center h-5"},ie={class:"ml-3"},ne={key:0,class:"text-warning-600 text-xs mt-1 flex items-center"},le={class:"flex items-start"},de={class:"flex items-center h-5"},ue={class:"space-y-6"},ce={class:"flex items-start"},me={class:"flex items-center h-5"},pe={class:"ml-3"},ve={key:0,class:"text-error-600 text-xs mt-1 flex items-center"},ye={class:"bg-neutral-50 rounded-lg p-4"},xe={class:"space-y-1 text-xs text-neutral-600"},fe={class:"flex items-center"},_e={class:"flex items-center"},be={class:"flex items-center"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={class:"relative"},he={class:"text-xs text-neutral-500 mt-1"},qe={key:0,class:"text-error-600 text-sm mt-1"},ke={key:1,class:"text-warning-600 text-xs mt-1 flex items-center"},Ce={class:"relative"},Te={class:"text-xs text-neutral-500 mt-1"},Ne={key:0,class:"text-error-600 text-sm mt-1"},Ve={key:1,class:"text-warning-600 text-xs mt-1 flex items-center"},Ae={key:1,class:"bg-info-50 border border-info-200 rounded-lg p-4"},Ue={class:"flex"},Le={class:"text-sm text-info-700 mt-1 space-y-1"},Pe={key:0},De={key:1},Me={key:2},Re={key:3},Se={key:4},Be={class:"flex items-center justify-between pt-8 border-t border-neutral-200"},Ee={class:"flex items-center space-x-3"},$e=["disabled"],Ie=["disabled"],je={key:0,class:"flex items-center"},ze={key:1,class:"flex items-center"},at={__name:"Edit",props:{leaveType:Object},setup(h){const c=h,n=$({...c.leaveType}),r=I({name:c.leaveType.name,quota:c.leaveType.quota,description:c.leaveType.description||"",is_active:c.leaveType.is_active,requires_approval:c.leaveType.requires_approval,max_consecutive_days:c.leaveType.max_consecutive_days,min_notice_days:c.leaveType.min_notice_days,carry_forward:c.leaveType.carry_forward}),V=y(()=>r.quota!==n.quota),A=y(()=>r.requires_approval!==n.requires_approval),U=y(()=>r.is_active!==n.is_active),L=y(()=>r.max_consecutive_days!==n.max_consecutive_days),P=y(()=>r.min_notice_days!==n.min_notice_days),q=y(()=>r.name!==n.name||r.quota!==n.quota||r.description!==(n.description||"")||r.is_active!==n.is_active||r.requires_approval!==n.requires_approval||r.max_consecutive_days!==n.max_consecutive_days||r.min_notice_days!==n.min_notice_days||r.carry_forward!==n.carry_forward),M=y(()=>{var v;return((v=c.leaveType.leaves)==null?void 0:v.some(t=>t.status==="pending"))||!1}),R=y(()=>{var v;return((v=c.leaveType.leaves)==null?void 0:v.filter(t=>t.status==="pending").length)||0}),S=y(()=>[{label:"Dashboard",href:route("dashboard")},{label:"Leave Policies",href:route("leave-types.index")},{label:c.leaveType.name,href:route("leave-types.show",c.leaveType.id)},{label:"Edit Policy",current:!0}]),B=()=>{r.put(route("leave-types.update",c.leaveType.id),{onSuccess:()=>{},onError:v=>{console.error("Validation errors:",v)}})},E=()=>{r.reset(),r.clearErrors()},{errors:p,processing:D}=r;return(v,t)=>(a(),f(z,null,{default:_(()=>[u(F,{title:`Edit Leave Policy: ${h.leaveType.name}`,subtitle:"Update leave type policies and restrictions",breadcrumbs:S.value},{default:_(()=>[u(H,null,{default:_(()=>[e("form",{onSubmit:j(B,["prevent"]),class:"space-y-8"},[M.value?(a(),i("div",Q,[e("div",W,[u(s(b),{class:"h-5 w-5 text-warning-400 mr-3 mt-0.5"}),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-medium text-warning-800"}," Active Leave Requests Exist ",-1)),e("p",G," This leave type has "+o(R.value)+" active leave requests. Changes to policies may affect existing requests. Please review carefully. ",1)])])])):l("",!0),u(C,{title:"Basic Information",subtitle:"Update the leave type name, quota, and description"},{default:_(()=>[e("div",J,[e("div",null,[t[10]||(t[10]=e("label",{for:"name",class:"block text-sm font-medium text-neutral-700 mb-2"},[m(" Leave Type Name "),e("span",{class:"text-error-500"},"*")],-1)),x(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=d=>s(r).name=d),type:"text",class:"w-full border border-neutral-300 rounded-md shadow-sm px-3 py-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-150",placeholder:"e.g., Annual Leave, Sick Leave",required:""},null,512),[[w,s(r).name]]),s(p).name?(a(),i("div",K,o(s(p).name),1)):l("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{for:"quota",class:"block text-sm font-medium text-neutral-700 mb-2"},[m(" Annual Quota (Days) "),e("span",{class:"text-error-500"},"*")],-1)),e("div",X,[x(e("input",{id:"quota","onUpdate:modelValue":t[1]||(t[1]=d=>s(r).quota=d),type:"number",min:"0",max:"365",class:"w-full border border-neutral-300 rounded-md shadow-sm px-3 py-2 pr-12 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-150",placeholder:"25",required:""},null,512),[[w,s(r).quota,void 0,{number:!0}]]),t[11]||(t[11]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-neutral-500 text-sm"},"days")],-1))]),s(p).quota?(a(),i("div",Y,o(s(p).quota),1)):l("",!0),V.value?(a(),i("div",Z,[u(s(b),{class:"w-4 h-4 mr-1"}),t[12]||(t[12]=m(" Changing quota may affect employee leave balances "))])):l("",!0)])]),e("div",ee,[t[14]||(t[14]=e("label",{for:"description",class:"block text-sm font-medium text-neutral-700 mb-2"}," Description ",-1)),x(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=d=>s(r).description=d),rows:"3",class:"w-full border border-neutral-300 rounded-md shadow-sm px-3 py-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-150",placeholder:"Brief description of this leave type and when it can be used..."},null,512),[[w,s(r).description]]),s(p).description?(a(),i("div",te,o(s(p).description),1)):l("",!0)])]),_:1}),u(C,{title:"Policy Settings",subtitle:"Configure approval requirements and carry-forward rules"},{default:_(()=>[e("div",se,[e("div",re,[e("div",ae,[e("div",oe,[x(e("input",{id:"requires_approval","onUpdate:modelValue":t[3]||(t[3]=d=>s(r).requires_approval=d),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded transition-colors duration-150"},null,512),[[k,s(r).requires_approval]])]),e("div",ie,[t[16]||(t[16]=e("label",{for:"requires_approval",class:"text-sm font-medium text-neutral-900"}," Requires manager approval ",-1)),t[17]||(t[17]=e("p",{class:"text-xs text-neutral-500 mt-1"}," When enabled, all leave requests must be approved by a manager before being granted ",-1)),A.value?(a(),i("div",ne,[u(s(b),{class:"w-3 h-3 mr-1"}),t[15]||(t[15]=m(" This will affect how future requests are processed "))])):l("",!0)])]),e("div",le,[e("div",de,[x(e("input",{id:"carry_forward","onUpdate:modelValue":t[4]||(t[4]=d=>s(r).carry_forward=d),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded transition-colors duration-150"},null,512),[[k,s(r).carry_forward]])]),t[18]||(t[18]=e("div",{class:"ml-3"},[e("label",{for:"carry_forward",class:"text-sm font-medium text-neutral-900"}," Allow carry forward "),e("p",{class:"text-xs text-neutral-500 mt-1"}," Unused leave days will roll over to the next year ")],-1))])]),e("div",ue,[e("div",ce,[e("div",me,[x(e("input",{id:"is_active","onUpdate:modelValue":t[5]||(t[5]=d=>s(r).is_active=d),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded transition-colors duration-150"},null,512),[[k,s(r).is_active]])]),e("div",pe,[t[20]||(t[20]=e("label",{for:"is_active",class:"text-sm font-medium text-neutral-900"}," Active policy ",-1)),t[21]||(t[21]=e("p",{class:"text-xs text-neutral-500 mt-1"}," Employees can request this leave type when active ",-1)),U.value&&!s(r).is_active?(a(),i("div",ve,[u(s(b),{class:"w-3 h-3 mr-1"}),t[19]||(t[19]=m(" Deactivating will prevent new leave requests "))])):l("",!0)])]),e("div",ye,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-2"},"Policy Preview",-1)),e("div",xe,[e("div",fe,[s(r).requires_approval?(a(),f(s(g),{key:0,class:"w-3 h-3 text-success-500 mr-2"})):(a(),f(s(T),{key:1,class:"w-3 h-3 text-neutral-400 mr-2"})),e("span",null,o(s(r).requires_approval?"Requires approval":"Auto-approved"),1)]),e("div",_e,[s(r).carry_forward?(a(),f(s(g),{key:0,class:"w-3 h-3 text-success-500 mr-2"})):(a(),f(s(T),{key:1,class:"w-3 h-3 text-neutral-400 mr-2"})),e("span",null,o(s(r).carry_forward?"Carry forward enabled":"No carry forward"),1)]),e("div",be,[s(r).is_active?(a(),f(s(g),{key:0,class:"w-3 h-3 text-success-500 mr-2"})):(a(),f(s(T),{key:1,class:"w-3 h-3 text-neutral-400 mr-2"})),e("span",null,o(s(r).is_active?"Active policy":"Inactive policy"),1)])])])])])]),_:1}),u(C,{title:"Restrictions & Limits",subtitle:"Set limits on consecutive days and notice requirements"},{default:_(()=>[e("div",we,[e("div",null,[t[25]||(t[25]=e("label",{for:"max_consecutive_days",class:"block text-sm font-medium text-neutral-700 mb-2"}," Maximum Consecutive Days ",-1)),e("div",ge,[x(e("input",{id:"max_consecutive_days","onUpdate:modelValue":t[6]||(t[6]=d=>s(r).max_consecutive_days=d),type:"number",min:"1",max:"365",class:"w-full border border-neutral-300 rounded-md shadow-sm px-3 py-2 pr-12 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-150",placeholder:"30"},null,512),[[w,s(r).max_consecutive_days,void 0,{number:!0}]]),t[23]||(t[23]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-neutral-500 text-sm"},"days")],-1))]),e("p",he,[u(s(N),{class:"w-3 h-3 inline mr-1"}),t[24]||(t[24]=m(" Leave blank for no limit. Maximum consecutive days that can be taken at once. "))]),s(p).max_consecutive_days?(a(),i("div",qe,o(s(p).max_consecutive_days),1)):l("",!0),L.value&&s(r).max_consecutive_days?(a(),i("div",ke,[u(s(b),{class:"w-3 h-3 mr-1"}),m(" This may affect pending leave requests exceeding "+o(s(r).max_consecutive_days)+" days ",1)])):l("",!0)]),e("div",null,[t[28]||(t[28]=e("label",{for:"min_notice_days",class:"block text-sm font-medium text-neutral-700 mb-2"}," Minimum Notice Period ",-1)),e("div",Ce,[x(e("input",{id:"min_notice_days","onUpdate:modelValue":t[7]||(t[7]=d=>s(r).min_notice_days=d),type:"number",min:"0",max:"365",class:"w-full border border-neutral-300 rounded-md shadow-sm px-3 py-2 pr-12 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-150",placeholder:"7"},null,512),[[w,s(r).min_notice_days,void 0,{number:!0}]]),t[26]||(t[26]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-neutral-500 text-sm"},"days")],-1))]),e("p",Te,[u(s(N),{class:"w-3 h-3 inline mr-1"}),t[27]||(t[27]=m(" Leave blank for no requirement. How many days in advance employees must request this leave. "))]),s(p).min_notice_days?(a(),i("div",Ne,o(s(p).min_notice_days),1)):l("",!0),P.value&&s(r).min_notice_days?(a(),i("div",Ve,[u(s(b),{class:"w-3 h-3 mr-1"}),m(" Future requests will require "+o(s(r).min_notice_days)+" days advance notice ",1)])):l("",!0)])])]),_:1}),q.value?(a(),i("div",Ae,[e("div",Ue,[u(s(N),{class:"h-5 w-5 text-info-400 mr-3 mt-0.5 flex-shrink-0"}),e("div",null,[t[29]||(t[29]=e("h4",{class:"text-sm font-medium text-info-800"},"Changes Summary",-1)),e("div",Le,[V.value?(a(),i("p",Pe," • Annual quota: "+o(n.quota)+" → "+o(s(r).quota)+" days ",1)):l("",!0),A.value?(a(),i("p",De," • Approval requirement: "+o(n.requires_approval?"Required":"Not required")+" → "+o(s(r).requires_approval?"Required":"Not required"),1)):l("",!0),U.value?(a(),i("p",Me," • Status: "+o(n.is_active?"Active":"Inactive")+" → "+o(s(r).is_active?"Active":"Inactive"),1)):l("",!0),L.value?(a(),i("p",Re," • Max consecutive days: "+o(n.max_consecutive_days||"No limit")+" → "+o(s(r).max_consecutive_days||"No limit"),1)):l("",!0),P.value?(a(),i("p",Se," • Notice period: "+o(n.min_notice_days||"No requirement")+" → "+o(s(r).min_notice_days||"No requirement")+" days ",1)):l("",!0)])])])])):l("",!0),e("div",Be,[e("button",{type:"button",onClick:t[8]||(t[8]=d=>v.$inertia.visit(v.route("leave-types.show",h.leaveType.id))),class:"inline-flex items-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},[u(s(O),{class:"w-4 h-4 mr-2"}),t[30]||(t[30]=m(" Back to Details "))]),e("div",Ee,[e("button",{type:"button",onClick:E,disabled:!q.value,class:"px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150"}," Reset Changes ",8,$e),e("button",{type:"submit",disabled:s(D)||!q.value,class:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150"},[s(D)?(a(),i("span",je,t[31]||(t[31]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),m(" Updating... ")]))):(a(),i("span",ze,[u(s(g),{class:"w-4 h-4 mr-2"}),t[32]||(t[32]=m(" Update Leave Policy "))]))],8,Ie)])])],32)]),_:1})]),_:1},8,["title","breadcrumbs"])]),_:1}))}};export{at as default};
