import{e as ae,x as ne,f as b,g as x,o as i,h as c,k as l,a as e,i as r,c as o,t as n,F,r as S,u as p,S as ie,n as y,l as le,d as oe,Q}from"./app-BuZ8QPkp.js";import{_ as re}from"./AuthenticatedLayout-Dhycl0eR.js";import{D as de}from"./DetailPage-91tIthoe.js";import{I as h}from"./InfoCard-aw7nJY9f.js";import{B as R}from"./BaseButton-CSM0_2QQ.js";import{B as ce}from"./BaseTextarea-BI7mK6U-.js";import{I as v}from"./Icon-iw-cBB3h.js";import{u as ue}from"./useAuth-oa3hJQF1.js";import{u as me}from"./useNotifications-CfvE7VBY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BZWhHHH8.js";import"./useAccessibility-BMZysmHz.js";import"./usePermissions-D_omtBxc.js";/* empty css                                                                 *//* empty css                                                                   */const fe={class:"space-y-6"},be={class:"space-y-6"},xe={class:"flex items-center justify-between p-4 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg"},he={class:"flex items-center space-x-4"},ke={class:"flex items-center space-x-2"},ge={class:"flex items-center space-x-1"},pe={class:"text-2xl font-bold text-neutral-900"},ve={class:"text-sm text-neutral-600 mt-1"},ye={key:0,class:"space-y-3"},we={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},_e={class:"flex items-center space-x-2"},Fe={class:"text-sm font-medium text-neutral-900 capitalize"},Se={class:"flex items-center space-x-1"},Re={class:"text-sm font-medium text-neutral-700 ml-1"},Ce={class:"flex items-center justify-center p-4 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg"},De={class:"flex items-center space-x-3"},Ee={class:"font-medium text-neutral-900"},je={class:"space-y-6"},Ae={class:"prose prose-sm max-w-none"},Pe={class:"text-neutral-700 leading-relaxed whitespace-pre-wrap"},Be={class:"prose prose-sm max-w-none"},$e={class:"text-neutral-700 leading-relaxed whitespace-pre-wrap"},Ie={class:"prose prose-sm max-w-none"},Ne={class:"text-neutral-700 leading-relaxed whitespace-pre-wrap"},Ve={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Le={class:"space-y-2"},Te={class:"flex-shrink-0 w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center mt-0.5"},Ue={class:"text-xs font-semibold text-primary-700"},Me={class:"text-sm text-neutral-700 leading-relaxed"},Oe={class:"prose prose-sm max-w-none"},Qe={class:"text-neutral-700 leading-relaxed whitespace-pre-wrap"},qe={key:0,class:"border-t border-neutral-200 pt-6"},ze={class:"bg-neutral-50 rounded-lg p-6"},He={class:"text-lg font-semibold text-neutral-900 mb-4 flex items-center"},Ye={key:0,class:"mb-4"},Ge={class:"bg-white rounded-lg p-4 border border-neutral-200"},We={class:"flex items-center justify-between mb-2"},Ze={class:"text-sm font-medium text-neutral-900"},Je={class:"text-xs text-neutral-500"},Ke={class:"text-neutral-700 leading-relaxed whitespace-pre-wrap"},Xe={key:1},et={class:"flex items-center justify-end space-x-3"},tt={key:2,class:"text-center py-4"},st={class:"text-neutral-600"},at={class:"space-y-6"},nt={class:"space-y-3"},it={class:"mt-1 flex items-center space-x-2"},lt={class:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center"},ot={class:"text-xs font-semibold text-primary-700"},rt={class:"text-sm text-neutral-900"},dt={class:"mt-1 flex items-center space-x-2"},ct={class:"w-6 h-6 bg-secondary-100 rounded-full flex items-center justify-center"},ut={class:"text-xs font-semibold text-secondary-700"},mt={class:"text-sm text-neutral-900"},ft={class:"mt-1 text-sm text-neutral-900"},bt={class:"mt-1 text-sm text-neutral-900"},xt={key:0},ht={class:"mt-1 text-sm text-neutral-900"},kt={class:"space-y-3"},gt={class:"space-y-3"},pt={class:"flex items-center justify-between"},vt={class:"text-sm font-medium text-neutral-900"},yt={class:"text-xs text-neutral-600"},wt={class:"flex items-center space-x-1"},Lt={__name:"Show",props:{feedback:Object,relatedFeedbacks:{type:Array,default:()=>[]}},setup(t){const d=t,{hasAnyRole:q,getUserProperty:z}=ue(),{showNotification:w}=me(),A=ae(!1),f=ne({response:""}),P=b(()=>z("id")),B=b(()=>q(["Admin","HR"])),D=b(()=>d.feedback.reviewee_id===P.value),E=b(()=>d.feedback.reviewer_id===P.value||B.value),$=b(()=>E.value),H=b(()=>D.value||B.value),Y=b(()=>d.feedback.response?{label:"Responded",variant:"success"}:{label:"Pending Response",variant:"warning"}),G=b(()=>{var s;return[{label:"Feedbacks",href:route("feedbacks.index")},{label:`${(s=d.feedback.reviewee)==null?void 0:s.name} - ${d.feedback.period}`,current:!0}]}),W=b(()=>{const s=[];return E.value&&s.push({id:"edit",label:"Edit",icon:"pencil",variant:"secondary",href:route("feedbacks.edit",d.feedback.id)}),s.push({id:"export",label:"Export PDF",icon:"document-download",variant:"secondary"}),$.value&&s.push({id:"delete",label:"Delete",icon:"trash",variant:"danger"}),s}),Z=s=>({1:"Needs Improvement",2:"Below Expectations",3:"Meets Expectations",4:"Exceeds Expectations",5:"Exceptional"})[s]||"No rating",J=s=>({communication:"chat",teamwork:"users",technical:"cog",leadership:"star",initiative:"bolt",reliability:"shield"})[s]||"star",I=s=>s>=4?"heart":s>=3?"star":"warning",N=s=>s>=4?"bg-green-100":s>=3?"bg-yellow-100":"bg-red-100",V=s=>s>=4?"text-green-600":s>=3?"text-yellow-600":"text-red-600",L=s=>s>=4?"Positive Feedback":s>=3?"Constructive Feedback":"Needs Attention",T=s=>s?s.split(" ").map(a=>a[0]).join("").toUpperCase():"",j=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",K=()=>{f.post(route("feedbacks.respond",d.feedback.id),{onSuccess:()=>{w({type:"success",title:"Response Submitted",message:"Your response to the feedback has been submitted successfully."}),A.value=!1},onError:()=>{w({type:"error",title:"Submission Failed",message:"Failed to submit your response. Please try again."})}})},X=()=>{f.reset(),A.value=!1},ee=()=>{window.open(route("feedbacks.export-pdf",d.feedback.id),"_blank"),w({type:"success",title:"Export Started",message:"Your PDF export is being prepared for download."})},te=()=>{var s,a;navigator.share?navigator.share({title:`Feedback for ${(s=d.feedback.reviewee)==null?void 0:s.name}`,text:`Performance feedback for ${(a=d.feedback.reviewee)==null?void 0:a.name} - ${d.feedback.period}`,url:window.location.href}):navigator.clipboard.writeText(window.location.href).then(()=>{w({type:"success",title:"Link Copied",message:"Feedback link has been copied to your clipboard."})})},se=()=>{var s;confirm(`Are you sure you want to delete this feedback for ${(s=d.feedback.reviewee)==null?void 0:s.name}?`)&&Q.delete(route("feedbacks.destroy",d.feedback.id),{onSuccess:()=>{w({type:"success",title:"Feedback Deleted",message:"The feedback has been successfully deleted."}),Q.visit(route("feedbacks.index"))},onError:()=>{w({type:"error",title:"Delete Failed",message:"Failed to delete the feedback. Please try again."})}})};return(s,a)=>(i(),x(re,null,{default:c(()=>{var U,M;return[l(de,{title:`Feedback for ${(U=t.feedback.reviewee)==null?void 0:U.name}`,subtitle:`${t.feedback.period} • Submitted by ${(M=t.feedback.reviewer)==null?void 0:M.name}`,icon:s.MessageSquareIcon,status:Y.value,breadcrumbs:G.value,actions:W.value,"back-url":s.route("feedbacks.index"),layout:"two-column"},{primary:c(()=>{var C,m,k,g;return[e("div",fe,[l(h,{title:"Performance Rating",icon:"star"},{default:c(()=>[e("div",be,[e("div",xe,[e("div",he,[e("div",{class:y(["w-12 h-12 rounded-full flex items-center justify-center",N(t.feedback.rating)])},[l(v,{name:I(t.feedback.rating),class:y(["w-7 h-7",V(t.feedback.rating)])},null,8,["name","class"])],2),e("div",null,[e("div",ke,[e("div",ge,[(i(),o(F,null,S(5,u=>l(v,{key:u,name:"star-solid",class:y(["w-6 h-6",u<=t.feedback.rating?"text-yellow-400":"text-neutral-300"])},null,8,["class"])),64))]),e("span",pe,n(t.feedback.rating)+"/5 ",1)]),e("p",ve,n(Z(t.feedback.rating))+" • "+n(L(t.feedback.rating)),1)])])]),t.feedback.categoryRatings?(i(),o("div",ye,[a[1]||(a[1]=e("h4",{class:"text-sm font-medium text-neutral-700"},"Category Breakdown",-1)),e("div",we,[(i(!0),o(F,null,S(t.feedback.categoryRatings,(u,_)=>(i(),o("div",{key:_,class:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg"},[e("div",_e,[l(v,{name:J(_),class:"w-4 h-4 text-neutral-600"},null,8,["name"]),e("span",Fe,n(_.replace(/([A-Z])/g," $1").trim()),1)]),e("div",Se,[(i(),o(F,null,S(5,O=>l(v,{key:O,name:"star-solid",class:y(["w-3 h-3",O<=u?"text-yellow-400":"text-neutral-300"])},null,8,["class"])),64)),e("span",Re,n(u),1)])]))),128))])])):r("",!0),e("div",Ce,[e("div",De,[e("div",{class:y(["w-10 h-10 rounded-full flex items-center justify-center",N(t.feedback.rating)])},[l(v,{name:I(t.feedback.rating),class:y(["w-6 h-6",V(t.feedback.rating)])},null,8,["name","class"])],2),e("div",null,[e("p",Ee,n(L(t.feedback.rating)),1),a[2]||(a[2]=e("p",{class:"text-sm text-neutral-600"},"Overall feedback sentiment",-1))])])])])]),_:1}),e("div",je,[t.feedback.strengths?(i(),x(h,{key:0,title:"Strengths & Achievements",icon:"check-circle"},{default:c(()=>[e("div",Ae,[e("p",Pe,n(t.feedback.strengths),1)])]),_:1})):r("",!0),t.feedback.improvements?(i(),x(h,{key:1,title:"Areas for Development",icon:"trending-up"},{default:c(()=>[e("div",Be,[e("p",$e,n(t.feedback.improvements),1)])]),_:1})):r("",!0),l(h,{title:"Additional Comments",icon:"message-square"},{default:c(()=>[e("div",Ie,[e("p",Ne,n(t.feedback.comments),1)])]),_:1}),(C=t.feedback.goals)!=null&&C.length||t.feedback.support?(i(),o("div",Ve,[(m=t.feedback.goals)!=null&&m.length?(i(),x(h,{key:0,title:"Recommended Goals",icon:"target"},{default:c(()=>[e("ul",Le,[(i(!0),o(F,null,S(t.feedback.goals,(u,_)=>(i(),o("li",{key:_,class:"flex items-start space-x-3"},[e("div",Te,[e("span",Ue,n(_+1),1)]),e("p",Me,n(u),1)]))),128))])]),_:1})):r("",!0),t.feedback.support?(i(),x(h,{key:1,title:"Support & Resources",icon:"heart"},{default:c(()=>[e("div",Oe,[e("p",Qe,n(t.feedback.support),1)])]),_:1})):r("",!0)])):r("",!0)]),H.value?(i(),o("div",qe,[e("div",ze,[e("h3",He,[l(v,{name:"chat",class:"w-5 h-5 mr-2 text-primary-600"}),a[3]||(a[3]=le(" Response to Feedback "))]),t.feedback.response?(i(),o("div",Ye,[e("div",Ge,[e("div",We,[e("span",Ze,n((k=t.feedback.reviewee)==null?void 0:k.name),1),e("span",Je,n(j(t.feedback.response_date)),1)]),e("p",Ke,n(t.feedback.response),1)])])):r("",!0),!t.feedback.response&&D.value?(i(),o("div",Xe,[e("form",{onSubmit:oe(K,["prevent"]),class:"space-y-4"},[l(ce,{modelValue:p(f).response,"onUpdate:modelValue":a[0]||(a[0]=u=>p(f).response=u),placeholder:"Share your thoughts on this feedback, acknowledge the points raised, or discuss your development plans...",rows:"4",disabled:p(f).processing,"character-count":!0,"max-length":1e3},null,8,["modelValue","disabled"]),e("div",et,[l(R,{variant:"secondary",label:"Cancel",onClick:X,disabled:p(f).processing},null,8,["disabled"]),l(R,{variant:"primary",label:"Submit Response",type:"submit",disabled:p(f).processing||!p(f).response.trim(),loading:p(f).processing},null,8,["disabled","loading"])])],32)])):r("",!0),!t.feedback.response&&!D.value?(i(),o("div",tt,[l(v,{name:"clock",class:"w-8 h-8 text-neutral-400 mx-auto mb-2"}),e("p",st,"Waiting for "+n((g=t.feedback.reviewee)==null?void 0:g.name)+" to respond",1)])):r("",!0)])])):r("",!0)])]}),secondary:c(()=>{var C;return[e("div",at,[l(h,{title:"Feedback Details",icon:"info"},{default:c(()=>{var m,k,g,u;return[e("dl",nt,[e("div",null,[a[4]||(a[4]=e("dt",{class:"text-sm font-medium text-neutral-500"},"Reviewer",-1)),e("dd",it,[e("div",lt,[e("span",ot,n(T((m=t.feedback.reviewer)==null?void 0:m.name)),1)]),e("span",rt,n((k=t.feedback.reviewer)==null?void 0:k.name),1)])]),e("div",null,[a[5]||(a[5]=e("dt",{class:"text-sm font-medium text-neutral-500"},"Reviewee",-1)),e("dd",dt,[e("div",ct,[e("span",ut,n(T((g=t.feedback.reviewee)==null?void 0:g.name)),1)]),e("span",mt,n((u=t.feedback.reviewee)==null?void 0:u.name),1)])]),e("div",null,[a[6]||(a[6]=e("dt",{class:"text-sm font-medium text-neutral-500"},"Review Period",-1)),e("dd",ft,n(t.feedback.period),1)]),e("div",null,[a[7]||(a[7]=e("dt",{class:"text-sm font-medium text-neutral-500"},"Submitted",-1)),e("dd",bt,n(j(t.feedback.created_at)),1)]),t.feedback.updated_at!==t.feedback.created_at?(i(),o("div",xt,[a[8]||(a[8]=e("dt",{class:"text-sm font-medium text-neutral-500"},"Last Updated",-1)),e("dd",ht,n(j(t.feedback.updated_at)),1)])):r("",!0)])]}),_:1}),l(h,{title:"Quick Actions",icon:"bolt"},{default:c(()=>[e("div",kt,[E.value?(i(),x(R,{key:0,href:s.route("feedbacks.edit",t.feedback.id),variant:"secondary","icon-left":"pencil",label:"Edit Feedback","full-width":""},null,8,["href"])):r("",!0),l(R,{variant:"secondary","icon-left":"document-download",label:"Export PDF","full-width":"",onClick:ee}),l(R,{variant:"secondary","icon-left":"envelope",label:"Share Feedback","full-width":"",onClick:te}),$.value?(i(),x(R,{key:1,variant:"ghost","icon-left":"trash",label:"Delete Feedback","full-width":"",onClick:se,class:"text-red-600 hover:text-red-700 hover:bg-red-50"})):r("",!0)])]),_:1}),(C=t.relatedFeedbacks)!=null&&C.length?(i(),x(h,{key:0,title:"Related Feedbacks",icon:"folder"},{default:c(()=>[e("div",gt,[(i(!0),o(F,null,S(t.relatedFeedbacks,m=>(i(),x(p(ie),{key:m.id,href:s.route("feedbacks.show",m.id),class:"block p-3 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors duration-200"},{default:c(()=>{var k;return[e("div",pt,[e("div",null,[e("p",vt,n(m.period),1),e("p",yt,"by "+n((k=m.reviewer)==null?void 0:k.name),1)]),e("div",wt,[(i(),o(F,null,S(5,g=>l(v,{key:g,name:"star-solid",class:y(["w-3 h-3",g<=m.rating?"text-yellow-400":"text-neutral-300"])},null,8,["class"])),64))])])]}),_:2},1032,["href"]))),128))])]),_:1})):r("",!0)])]}),_:1},8,["title","subtitle","icon","status","breadcrumbs","actions","back-url"])]}),_:1}))}};export{Lt as default};
