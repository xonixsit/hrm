import{f as x,g as c,o as n,h as d,k as f,a as t,c as a,F as u,r as m,t as i,i as S,n as g,l as E,Q as h}from"./app-BZSoyAQ4.js";import{_ as M}from"./AuthenticatedLayout-CGU6bz7p.js";import{P as N}from"./PageLayout-DYCxWHav.js";import{_ as V}from"./SimpleInfoCard-C_w07Mua.js";import{B as j}from"./BaseSelect-D6ewdR7x.js";import{B as $}from"./BaseButton-D0ap8v-1.js";import"./useAuth-C_KYBUzS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-bZGkATQv.js";import"./Icon-BIgMkaDq.js";import"./useAccessibility-DCqOG1QY.js";import"./PageHeader-Daxr3Iyj.js";/* empty css                                                                   *//* empty css                                                                   */import"./ChartBarIcon-MUrCOcJg.js";import"./UserGroupIcon-BVQm91E-.js";/* empty css                                                                   *//* empty css                                                                   */const H={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},z={class:"bg-white rounded-lg shadow-sm border border-neutral-200"},D={class:"overflow-x-auto"},L={class:"min-w-full divide-y divide-neutral-200"},F={class:"bg-white divide-y divide-neutral-200"},P={class:"px-6 py-4 whitespace-nowrap"},Q={class:"flex items-center"},T={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},Y={class:"text-sm font-semibold text-primary-700"},G={class:"ml-4"},J={class:"text-sm font-medium text-neutral-900"},O={class:"text-sm text-neutral-500"},q={class:"text-xs text-neutral-400"},K={class:"px-6 py-4 whitespace-nowrap"},W={class:"flex flex-wrap gap-1"},X={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-800"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-900"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},se={class:"flex flex-col space-y-3 min-w-[160px]"},oe={class:"space-y-1"},re={key:0,class:"space-y-1"},ne={key:1,class:"text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded-md p-2 text-center"},le={key:1,class:"space-y-1"},Ae={__name:"Index",props:{users:Array,availableRoles:Array,currentUserId:Number},setup(p){const l=p,b=[{label:"Dashboard",href:route("dashboard"),icon:"home"},{label:"Administration",href:"#"},{label:"Role Management",href:route("admin.roles.index"),current:!0}],v=x(()=>l.availableRoles.map(o=>({value:o,label:o}))),y=x(()=>{const o=l.availableRoles.map(e=>{const r=l.users.filter(I=>I.roles.includes(e)).length;return{name:e,count:r,icon:w(e),color:k(e)}}),s=l.users.filter(e=>e.roles.length===0).length;return s>0&&o.push({name:"No Role",count:s,icon:"UserIcon",color:"neutral"}),o});function _(o){return o.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2)}function w(o){return{Admin:"ShieldCheckIcon",HR:"UserGroupIcon",Manager:"BriefcaseIcon",Employee:"UserIcon"}[o]||"UserIcon"}function k(o){return{Admin:"red",HR:"blue",Manager:"green",Employee:"yellow"}[o]||"neutral"}function R(o){return{Admin:"bg-red-100 text-red-800",HR:"bg-blue-100 text-blue-800",Manager:"bg-green-100 text-green-800",Employee:"bg-yellow-100 text-yellow-800"}[o]||"bg-neutral-100 text-neutral-800"}function A(o){return!(o.id===l.currentUserId&&o.roles.includes("Admin"))}function C(o){return o.id===l.currentUserId&&o.roles.includes("Admin")?"Cannot remove your own Admin role":""}function U(o,s){if(!s)return;const e=l.users.find(r=>r.id===o);if(o===l.currentUserId&&(e!=null&&e.roles.includes("Admin"))&&s!=="Admin"){alert("You cannot remove your own Admin role.");return}h.post(route("admin.roles.assign",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:r=>{console.error("Error assigning role:",r)}})}function B(o,s){if(s){if(o===l.currentUserId&&s==="Admin"){alert("You cannot remove your own Admin role.");return}confirm(`Are you sure you want to remove the ${s} role from this user?`)&&h.post(route("admin.roles.remove",o),{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error("Error removing role:",e)}})}}return(o,s)=>(n(),c(M,null,{default:d(()=>[f(N,{title:"Role Management",subtitle:"Assign and manage user roles in the system",breadcrumbs:b},{default:d(()=>[t("div",H,[(n(!0),a(u,null,m(y.value,e=>(n(),c(V,{key:e.name,title:e.name,value:e.count,subtitle:`${e.count===1?"user":"users"} with this role`,icon:e.icon,color:e.color},null,8,["title","value","subtitle","icon","color"]))),128))]),t("div",z,[s[5]||(s[5]=t("div",{class:"px-6 py-4 border-b border-neutral-200"},[t("h3",{class:"text-lg font-semibold text-neutral-900"},"User Role Assignments"),t("p",{class:"text-sm text-neutral-600 mt-1"},"Manage roles for all employees in the system")],-1)),t("div",D,[t("table",L,[s[4]||(s[4]=t("thead",{class:"bg-neutral-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Employee "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Current Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Job Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider"}," Role Actions ")])],-1)),t("tbody",F,[(n(!0),a(u,null,m(p.users,e=>(n(),a("tr",{key:e.id,class:"hover:bg-neutral-50"},[t("td",P,[t("div",Q,[t("div",T,[t("span",Y,i(_(e.name)),1)]),t("div",G,[t("div",J,i(e.name),1),t("div",O,i(e.email),1),t("div",q,"ID: "+i(e.employee_code),1)])])]),t("td",K,[t("div",W,[e.roles.length===0?(n(),a("span",X," No Role ")):S("",!0),(n(!0),a(u,null,m(e.roles,r=>(n(),a("span",{key:r,class:g([R(r),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},i(r),3))),128))])]),t("td",Z,i(e.job_title),1),t("td",ee,[t("span",{class:g([e.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},i(e.status),3)]),t("td",te,[t("div",se,[t("div",oe,[s[0]||(s[0]=t("label",{class:"block text-xs font-medium text-neutral-700"}," Assign Role ",-1)),f(j,{"model-value":e.roles[0]||"",options:v.value,placeholder:"Select role",class:"w-full","onUpdate:modelValue":r=>U(e.id,r)},null,8,["model-value","options","onUpdate:modelValue"])]),e.roles.length>0?(n(),a("div",re,[s[2]||(s[2]=t("label",{class:"block text-xs font-medium text-neutral-700"}," Remove Role ",-1)),A(e)?(n(),c($,{key:0,variant:"outline",size:"sm",onClick:r=>B(e.id,e.roles[0]),class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 w-full justify-center"},{default:d(()=>[s[1]||(s[1]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),E(" Remove "+i(e.roles[0]),1)]),_:2,__:[1]},1032,["onClick"])):(n(),a("div",ne,i(C(e)),1))])):(n(),a("div",le,s[3]||(s[3]=[t("div",{class:"text-xs text-neutral-500 bg-neutral-50 border border-neutral-200 rounded-md p-2 text-center"}," No role assigned ",-1)])))])])]))),128))])])])])]),_:1})]),_:1}))}};export{Ae as default};
