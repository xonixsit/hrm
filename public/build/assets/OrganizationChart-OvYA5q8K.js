import{c as o,o as a,a as e,f as j,i as x,k as m,t as n,u as b,n as V,F as _,r as k,Q as M,e as C,z as q,g as L,h as $,q as U,l as Z}from"./app-CcqTUaOx.js";import{_ as Q}from"./AuthenticatedLayout-BPnvssXb.js";import{P as T}from"./PageLayout-BPEaywBZ.js";import{C as W}from"./ContentCard-DV_T4BOD.js";import{B as S}from"./BaseSelect-Dad56xxT.js";import{I as D,f as G,h as J,C as K,a as X}from"./Icon-B93A1H9x.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Y}from"./ArrowDownTrayIcon-BrAQggSM.js";import"./useAuth-DaQRKePi.js";import"./ApplicationLogo-DhXqjtvM.js";import"./useAccessibility-Bbz5iDUU.js";import"./PageHeader-DxHDWug0.js";/* empty css                                                                   *//* empty css                                                                   *//* empty css                                                                    *//* empty css                                                                   */function ee(s,v){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const te={class:"bg-white rounded-lg border-2 shadow-sm p-4 min-w-[200px]"},se={class:"flex items-center space-x-3 mb-3"},ne={class:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0"},ae={class:"min-w-0 flex-1"},re={class:"font-semibold text-neutral-900 truncate"},oe={class:"text-sm text-neutral-500 truncate"},le={key:0,class:"mb-3"},ie={class:"flex items-center space-x-2"},de={class:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},ce={class:"text-xs font-medium text-green-700"},ue={class:"min-w-0 flex-1"},me={class:"text-sm font-medium text-neutral-900 truncate"},xe={class:"text-xs text-neutral-500 truncate"},pe={class:"flex items-center justify-between text-sm"},ve={class:"flex items-center space-x-1"},he={class:"text-neutral-600"},fe={class:"flex items-center space-x-1"},ge={key:1,class:"mt-3 pt-3 border-t border-neutral-200"},be={class:"space-y-2 max-h-32 overflow-y-auto"},ye={class:"w-5 h-5 bg-neutral-200 rounded-full flex items-center justify-center"},we={class:"text-xs font-medium text-neutral-600"},$e={class:"min-w-0 flex-1"},_e={class:"text-xs font-medium text-neutral-900 truncate"},ke={class:"text-xs text-neutral-500 truncate"},Ce={key:0,class:"text-xs text-neutral-500 text-center"},je={__name:"DepartmentNode",props:{department:{type:Object,required:!0},viewMode:{type:String,default:"departments"},isRoot:{type:Boolean,default:!1}},emits:["node-click"],setup(s){const v=s,g=j(()=>{const t=[];return v.isRoot&&t.push("border-primary-300 bg-primary-50"),t.join(" ")}),y=t=>t.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2),u=t=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[t]||"building-office",l=t=>{const c="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(t==null?void 0:t.toLowerCase()){case"active":return`${c} bg-green-100 text-green-800`;case"inactive":return`${c} bg-red-100 text-red-800`;case"restructuring":return`${c} bg-yellow-100 text-yellow-800`;default:return`${c} bg-green-100 text-green-800`}};return(t,c)=>{var i;return a(),o("div",{class:V(["department-node cursor-pointer transform transition-all duration-200 hover:scale-105",g.value]),onClick:c[0]||(c[0]=p=>t.$emit("node-click",s.department))},[e("div",te,[e("div",se,[e("div",ne,[m(D,{name:u(s.department.name),class:"w-5 h-5 text-primary-600"},null,8,["name"])]),e("div",ae,[e("h3",re,n(s.department.name),1),e("p",oe,n(s.department.code||"No code"),1)])]),s.department.manager&&(s.viewMode==="employees"||s.viewMode==="mixed")?(a(),o("div",le,[e("div",ie,[e("div",de,[e("span",ce,n(y(s.department.manager.user.name)),1)]),e("div",ue,[e("p",me,n(s.department.manager.user.name),1),e("p",xe,n(s.department.manager.job_title||"Manager"),1)])])])):x("",!0),e("div",pe,[e("div",ve,[m(b(G),{class:"w-4 h-4 text-neutral-400"}),e("span",he,n(s.department.employees_count||0),1)]),e("div",fe,[e("span",{class:V(l(s.department.status))},n(s.department.status||"Active"),3)])]),s.viewMode==="employees"&&((i=s.department.employees)==null?void 0:i.length)>0?(a(),o("div",ge,[e("div",be,[(a(!0),o(_,null,k(s.department.employees.slice(0,5),p=>(a(),o("div",{key:p.id,class:"flex items-center space-x-2"},[e("div",ye,[e("span",we,n(y(p.user.name)),1)]),e("div",$e,[e("p",_e,n(p.user.name),1),e("p",ke,n(p.job_title||"No title"),1)])]))),128)),s.department.employees.length>5?(a(),o("div",Ce," +"+n(s.department.employees.length-5)+" more ",1)):x("",!0)])])):x("",!0)]),c[1]||(c[1]=e("div",{class:"connection-point absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-neutral-300 rounded-full border-2 border-white"},null,-1))],2)}}},O=E(je,[["__scopeId","data-v-197d911b"]]),Me={class:"fixed inset-0 z-50 overflow-y-auto"},Ve={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},De={class:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"},ze={class:"flex items-center justify-between mb-6"},Ne={class:"flex items-center space-x-3"},Le={class:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center"},Se={class:"text-lg font-semibold text-neutral-900"},Oe={class:"text-sm text-neutral-500"},Ee={class:"space-y-6"},Ie={class:"grid grid-cols-2 gap-4 text-sm"},Ae={class:"ml-2 font-medium text-neutral-900"},Be={key:0},He={class:"ml-2 text-neutral-900"},Pe={key:1},Fe={class:"ml-2 text-neutral-900"},Re={key:0},qe={class:"flex items-center space-x-3 p-3 bg-neutral-50 rounded-lg"},Ue={class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},Ze={class:"text-sm font-medium text-green-700"},Qe={class:"flex-1"},Te={class:"font-medium text-neutral-900"},We={class:"text-sm text-neutral-500"},Ge={class:"text-sm text-neutral-500"},Je={key:1},Ke={class:"text-sm text-neutral-600 leading-relaxed"},Xe={key:2},Ye={class:"text-sm font-medium text-neutral-900 mb-3"},et={class:"max-h-48 overflow-y-auto space-y-2"},tt={class:"flex items-center space-x-3"},st={class:"w-8 h-8 bg-neutral-200 rounded-full flex items-center justify-center"},nt={class:"text-xs font-medium text-neutral-600"},at={class:"text-sm font-medium text-neutral-900"},rt={class:"text-xs text-neutral-500"},ot={class:"flex items-center space-x-2"},lt=["onClick"],it={class:"flex items-center justify-end space-x-3 pt-4 border-t border-neutral-200"},dt={__name:"DepartmentModal",props:{department:{type:Object,required:!0}},emits:["close"],setup(s){const v=l=>l.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),g=l=>({Engineering:"code-bracket",Marketing:"megaphone",Sales:"chart-bar",HR:"users",Finance:"currency-dollar",Operations:"cog",Support:"lifebuoy",Legal:"scale",Design:"paint-brush",Product:"light-bulb"})[l]||"building-office",y=l=>{const t="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(l==null?void 0:l.toLowerCase()){case"active":return`${t} bg-green-100 text-green-800`;case"inactive":return`${t} bg-red-100 text-red-800`;case"restructuring":return`${t} bg-yellow-100 text-yellow-800`;default:return`${t} bg-green-100 text-green-800`}},u=l=>{const t="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(l){case"Full-time":return`${t} bg-green-100 text-green-800`;case"Part-time":return`${t} bg-yellow-100 text-yellow-800`;case"Contract":return`${t} bg-blue-100 text-blue-800`;default:return`${t} bg-neutral-100 text-neutral-800`}};return(l,t)=>{var c;return a(),o("div",Me,[e("div",Ve,[e("div",{class:"fixed inset-0 transition-opacity bg-neutral-500 bg-opacity-75",onClick:t[0]||(t[0]=i=>l.$emit("close"))}),e("div",De,[e("div",ze,[e("div",Ne,[e("div",Le,[m(D,{name:g(s.department.name),class:"w-6 h-6 text-primary-600"},null,8,["name"])]),e("div",null,[e("h3",Se,n(s.department.name),1),e("p",Oe,n(s.department.code||"No code assigned"),1)])]),e("button",{onClick:t[1]||(t[1]=i=>l.$emit("close")),class:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-colors"},[m(b(J),{class:"w-5 h-5"})])]),e("div",Ee,[e("div",null,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Department Information",-1)),e("div",Ie,[e("div",null,[t[5]||(t[5]=e("span",{class:"text-neutral-500"},"Status:",-1)),e("span",{class:V([y(s.department.status),"ml-2"])},n(s.department.status||"Active"),3)]),e("div",null,[t[6]||(t[6]=e("span",{class:"text-neutral-500"},"Employees:",-1)),e("span",Ae,n(s.department.employees_count||0),1)]),s.department.location?(a(),o("div",Be,[t[7]||(t[7]=e("span",{class:"text-neutral-500"},"Location:",-1)),e("span",He,n(s.department.location),1)])):x("",!0),s.department.budget?(a(),o("div",Pe,[t[8]||(t[8]=e("span",{class:"text-neutral-500"},"Budget:",-1)),e("span",Fe,"$"+n(Number(s.department.budget).toLocaleString()),1)])):x("",!0)])]),s.department.manager?(a(),o("div",Re,[t[10]||(t[10]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Department Manager",-1)),e("div",qe,[e("div",Ue,[e("span",Ze,n(v(s.department.manager.user.name)),1)]),e("div",Qe,[e("p",Te,n(s.department.manager.user.name),1),e("p",We,n(s.department.manager.job_title||"Manager"),1),e("p",Ge,n(s.department.manager.user.email),1)]),e("button",{onClick:t[2]||(t[2]=i=>b(M).visit(l.route("employees.show",s.department.manager.id))),class:"px-3 py-1 text-sm text-primary-600 hover:text-primary-700 font-medium"}," View Profile ")])])):x("",!0),s.department.description?(a(),o("div",Je,[t[11]||(t[11]=e("h4",{class:"text-sm font-medium text-neutral-900 mb-3"},"Description",-1)),e("p",Ke,n(s.department.description),1)])):x("",!0),((c=s.department.employees)==null?void 0:c.length)>0?(a(),o("div",Xe,[e("h4",Ye," Department Employees ("+n(s.department.employees.length)+") ",1),e("div",et,[(a(!0),o(_,null,k(s.department.employees,i=>(a(),o("div",{key:i.id,class:"flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-colors"},[e("div",tt,[e("div",st,[e("span",nt,n(v(i.user.name)),1)]),e("div",null,[e("p",at,n(i.user.name),1),e("p",rt,n(i.job_title||"No title"),1)])]),e("div",ot,[e("span",{class:V(u(i.contract_type))},n(i.contract_type||"N/A"),3),e("button",{onClick:p=>b(M).visit(l.route("employees.show",i.id)),class:"text-xs text-primary-600 hover:text-primary-700 font-medium"}," View ",8,lt)])]))),128))])])):x("",!0),e("div",it,[e("button",{onClick:t[3]||(t[3]=i=>l.$emit("close")),class:"px-4 py-2 text-sm text-neutral-600 hover:text-neutral-900 font-medium"}," Close "),e("button",{onClick:t[4]||(t[4]=i=>b(M).visit(l.route("departments.show",s.department.id))),class:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"}," View Details ")])])])])])}}},ct={class:"border-b border-neutral-200 p-4 bg-neutral-50"},ut={class:"flex items-center justify-between"},mt={class:"flex items-center space-x-4"},xt={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},vt={class:"flex items-center space-x-2"},ht=["disabled"],ft={class:"text-sm text-neutral-600 min-w-[60px] text-center"},gt=["disabled"],bt={class:"relative overflow-auto",style:{height:"600px"}},yt={class:"flex justify-center py-8"},wt={key:0,class:"org-chart-node"},$t={key:0,class:"relative"},_t={class:"absolute inset-0 w-full h-full pointer-events-none",style:{"z-index":"1"}},kt=["x1","y1","x2","y2"],Ct={key:1,class:"text-center py-16"},jt={__name:"OrganizationChart",props:{departments:{type:Array,required:!0}},setup(s){const v=s,g=C("departments"),y=C("vertical"),u=C(1),l=C(null),t=[{label:"Dashboard",href:route("dashboard")},{label:"People Management",href:"#"},{label:"Departments",href:route("departments.index")},{label:"Organization Chart",current:!0}],c=[{id:"export-chart",label:"Export Chart",icon:Y,variant:"secondary",handler:()=>P()},{id:"print-chart",label:"Print Chart",icon:ee,variant:"secondary",handler:()=>F()}],i=j(()=>v.departments.find(h=>!h.parent_id&&h.manager)),p=j(()=>{const h=[],r=new Set;let d=v.departments.filter(w=>{var f;return!w.parent_id&&w.id!==((f=i.value)==null?void 0:f.id)});for(;d.length>0;){h.push([...d]),d.forEach(f=>r.add(f.id));const w=[];d.forEach(f=>{const R=v.departments.filter(N=>N.parent_id===f.id&&!r.has(N.id));w.push(...R)}),d=w}return h}),I=j(()=>[]),z=h=>{l.value=h},A=()=>{u.value<2&&(u.value=Math.min(2,u.value+.1))},B=()=>{u.value>.5&&(u.value=Math.max(.5,u.value-.1))},H=()=>{u.value=1},P=()=>{console.log("Exporting organization chart...")},F=()=>{window.print()};return q(()=>{}),(h,r)=>(a(),L(Q,null,{default:$(()=>[m(T,{title:"Organization Chart",subtitle:"Visual representation of your organizational structure",breadcrumbs:t,actions:c},{default:$(()=>[m(W,{class:"overflow-hidden"},{default:$(()=>[e("div",ct,[e("div",ut,[e("div",mt,[e("div",xt,[r[5]||(r[5]=e("label",{class:"text-sm font-medium text-neutral-700"},"View:",-1)),m(S,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=d=>g.value=d),class:"w-40"},{default:$(()=>r[4]||(r[4]=[e("option",{value:"departments"},"Departments",-1),e("option",{value:"employees"},"Employees",-1),e("option",{value:"mixed"},"Mixed View",-1)])),_:1,__:[4]},8,["modelValue"])]),e("div",pt,[r[7]||(r[7]=e("label",{class:"text-sm font-medium text-neutral-700"},"Layout:",-1)),m(S,{modelValue:y.value,"onUpdate:modelValue":r[1]||(r[1]=d=>y.value=d),class:"w-32"},{default:$(()=>r[6]||(r[6]=[e("option",{value:"vertical"},"Vertical",-1),e("option",{value:"horizontal"},"Horizontal",-1)])),_:1,__:[6]},8,["modelValue"])])]),e("div",vt,[e("button",{onClick:B,class:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",disabled:u.value<=.5},[m(D,{name:"minus",class:"w-4 h-4"})],8,ht),e("span",ft,n(Math.round(u.value*100))+"% ",1),e("button",{onClick:A,class:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",disabled:u.value>=2},[m(D,{name:"plus",class:"w-4 h-4"})],8,gt),e("button",{onClick:H,class:"px-3 py-2 text-sm text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors"}," Reset ")])])]),e("div",bt,[e("div",{class:"org-chart-container",style:U({transform:`scale(${u.value})`,transformOrigin:"top left",minWidth:"100%",minHeight:"100%"})},[e("div",yt,[i.value?(a(),o("div",wt,[m(O,{department:i.value,"view-mode":g.value,"is-root":!0,onNodeClick:z},null,8,["department","view-mode"])])):x("",!0)]),p.value.length>0?(a(),o("div",$t,[(a(),o("svg",_t,[(a(!0),o(_,null,k(I.value,d=>(a(),o("g",{key:`${d.from}-${d.to}`},[e("line",{x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,stroke:"#d1d5db","stroke-width":"2"},null,8,kt)]))),128))])),(a(!0),o(_,null,k(p.value,(d,w)=>(a(),o("div",{key:w,class:"flex justify-center space-x-8 py-8",style:{"z-index":"2",position:"relative"}},[(a(!0),o(_,null,k(d,f=>(a(),o("div",{key:f.id,class:"org-chart-node"},[m(O,{department:f,"view-mode":g.value,onNodeClick:z},null,8,["department","view-mode"])]))),128))]))),128))])):x("",!0),!i.value&&p.value.length===0?(a(),o("div",Ct,[m(b(K),{class:"w-16 h-16 text-neutral-400 mx-auto mb-4"}),r[9]||(r[9]=e("h3",{class:"text-lg font-medium text-neutral-900 mb-2"},"No Organization Structure",-1)),r[10]||(r[10]=e("p",{class:"text-neutral-600 mb-4"},"Create departments and assign managers to build your organization chart.",-1)),e("button",{onClick:r[2]||(r[2]=d=>b(M).visit(h.route("departments.create"))),class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"},[m(b(X),{class:"w-4 h-4 mr-2"}),r[8]||(r[8]=Z(" Create Department "))])])):x("",!0)],4)])]),_:1}),l.value?(a(),L(dt,{key:0,department:l.value,onClose:r[3]||(r[3]=d=>l.value=null)},null,8,["department"])):x("",!0)]),_:1})]),_:1}))}},qt=E(jt,[["__scopeId","data-v-569ed06d"]]);export{qt as default};
