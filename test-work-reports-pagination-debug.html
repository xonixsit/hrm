<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Reports Pagination Debug</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .pagination-controls { display: flex; gap: 10px; align-items: center; margin: 20px 0; }
        .page-button { padding: 8px 12px; border: 1px solid #ccc; background: white; cursor: pointer; }
        .page-button.active { background: #007bff; color: white; }
        .page-button:disabled { opacity: 0.5; cursor: not-allowed; }
        .page-button:hover:not(:disabled) { background: #f0f0f0; }
        .page-button.active:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div id="app">
        <h1>Work Reports Pagination Debug</h1>
        
        <div class="debug-section">
            <h3>Current Pagination Data</h3>
            <pre>{{ JSON.stringify(paginationData, null, 2) }}</pre>
        </div>
        
        <div class="debug-section">
            <h3>Generated Page Links</h3>
            <div v-if="paginationData.links && paginationData.links.length">
                <p>Laravel Links ({{ paginationData.links.length }} total):</p>
                <div v-for="(link, index) in paginationData.links" :key="index" style="margin: 5px 0;">
                    <strong>{{ index }}:</strong> 
                    Label: "{{ link.label }}" | 
                    URL: {{ link.url || 'null' }} | 
                    Active: {{ link.active }}
                </div>
            </div>
            <div v-else>
                <p>‚ùå No Laravel pagination links found</p>
            </div>
        </div>
        
        <div class="debug-section">
            <h3>Manual Pagination Test</h3>
            <div class="pagination-controls">
                <button 
                    class="page-button" 
                    :disabled="currentPage <= 1"
                    @click="goToPage(currentPage - 1)"
                >
                    Previous
                </button>
                
                <button 
                    v-for="page in visiblePages" 
                    :key="page"
                    class="page-button"
                    :class="{ active: page === currentPage }"
                    @click="goToPage(page)"
                >
                    {{ page }}
                </button>
                
                <button 
                    class="page-button" 
                    :disabled="currentPage >= lastPage"
                    @click="goToPage(currentPage + 1)"
                >
                    Next
                </button>
            </div>
            
            <p>Current Page: {{ currentPage }} / {{ lastPage }}</p>
            <p>Showing {{ from }} to {{ to }} of {{ total }} results</p>
        </div>
        
        <div class="debug-section">
            <h3>Navigation Test</h3>
            <button @click="testNavigation(1)">Test Page 1</button>
            <button @click="testNavigation(2)">Test Page 2</button>
            <button @click="testNavigation(3)">Test Page 3</button>
            <div v-if="navigationLog.length">
                <h4>Navigation Log:</h4>
                <div v-for="(log, index) in navigationLog" :key="index">
                    {{ log }}
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    // Simulated pagination data from Laravel
                    paginationData: {
                        current_page: 1,
                        data: [], // Would contain actual work reports
                        first_page_url: "http://localhost/work-reports?page=1",
                        from: 1,
                        last_page: 3,
                        last_page_url: "http://localhost/work-reports?page=3",
                        links: [
                            {
                                url: null,
                                label: "&laquo; Previous",
                                active: false
                            },
                            {
                                url: "http://localhost/work-reports?page=1",
                                label: "1",
                                active: true
                            },
                            {
                                url: "http://localhost/work-reports?page=2",
                                label: "2",
                                active: false
                            },
                            {
                                url: "http://localhost/work-reports?page=3",
                                label: "3",
                                active: false
                            },
                            {
                                url: "http://localhost/work-reports?page=2",
                                label: "Next &raquo;",
                                active: false
                            }
                        ],
                        next_page_url: "http://localhost/work-reports?page=2",
                        path: "http://localhost/work-reports",
                        per_page: 10,
                        prev_page_url: null,
                        to: 10,
                        total: 23
                    },
                    navigationLog: []
                };
            },
            computed: {
                currentPage() {
                    return this.paginationData.current_page;
                },
                lastPage() {
                    return this.paginationData.last_page;
                },
                total() {
                    return this.paginationData.total;
                },
                from() {
                    return this.paginationData.from;
                },
                to() {
                    return this.paginationData.to;
                },
                visiblePages() {
                    const pages = [];
                    for (let i = 1; i <= this.lastPage; i++) {
                        pages.push(i);
                    }
                    return pages;
                }
            },
            methods: {
                goToPage(page) {
                    if (page < 1 || page > this.lastPage) {
                        this.navigationLog.push(`‚ùå Invalid page: ${page}`);
                        return;
                    }
                    
                    this.navigationLog.push(`‚úÖ Navigating to page ${page}`);
                    
                    // Simulate navigation
                    this.paginationData.current_page = page;
                    this.updatePaginationData(page);
                },
                
                updatePaginationData(page) {
                    // Update pagination data to simulate server response
                    const perPage = this.paginationData.per_page;
                    const total = this.paginationData.total;
                    
                    this.paginationData.from = ((page - 1) * perPage) + 1;
                    this.paginationData.to = Math.min(page * perPage, total);
                    
                    // Update links
                    this.paginationData.links = this.paginationData.links.map(link => {
                        if (link.label === "&laquo; Previous") {
                            return {
                                ...link,
                                url: page > 1 ? `http://localhost/work-reports?page=${page - 1}` : null
                            };
                        } else if (link.label === "Next &raquo;") {
                            return {
                                ...link,
                                url: page < this.lastPage ? `http://localhost/work-reports?page=${page + 1}` : null
                            };
                        } else if (!isNaN(parseInt(link.label))) {
                            return {
                                ...link,
                                active: parseInt(link.label) === page
                            };
                        }
                        return link;
                    });
                    
                    this.navigationLog.push(`üìä Updated: showing ${this.paginationData.from}-${this.paginationData.to} of ${total}`);
                },
                
                testNavigation(page) {
                    this.navigationLog.push(`üß™ Testing navigation to page ${page}`);
                    
                    // Find the link for this page
                    const pageLink = this.paginationData.links.find(link => 
                        parseInt(link.label) === page
                    );
                    
                    if (pageLink) {
                        this.navigationLog.push(`‚úÖ Found link: ${pageLink.url}`);
                        if (pageLink.url) {
                            this.navigationLog.push(`üîó Would navigate to: ${pageLink.url}`);
                            this.goToPage(page);
                        } else {
                            this.navigationLog.push(`‚ùå Link URL is null`);
                        }
                    } else {
                        this.navigationLog.push(`‚ùå No link found for page ${page}`);
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>